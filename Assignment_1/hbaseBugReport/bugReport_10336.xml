<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:12:48 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-10336/HBASE-10336.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-10336] Remove deprecated usage of Hadoop HttpServer in InfoServer</title>
                <link>https://issues.apache.org/jira/browse/HBASE-10336</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Recent changes in Hadoop HttpServer give NPE when running on hadoop 3.0.0-SNAPSHOT. This way we use HttpServer is deprecated and will probably be not fixed (see &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10232&quot; title=&quot;More options to HttpServer Builder&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10232&quot;&gt;&lt;del&gt;HDFS-5760&lt;/del&gt;&lt;/a&gt;). We&apos;d better move to the new proposed builder pattern, which means we can no more use inheritance to build our nice InfoServer.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12688732">HBASE-10336</key>
            <summary>Remove deprecated usage of Hadoop HttpServer in InfoServer</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="eric@apache.org">Eric Charles</assignee>
                                    <reporter username="eric@apache.org">Eric Charles</reporter>
                        <labels>
                    </labels>
                <created>Tue, 14 Jan 2014 13:15:33 +0000</created>
                <updated>Wed, 4 May 2016 15:02:36 +0000</updated>
                            <resolved>Wed, 11 Jun 2014 20:57:03 +0000</resolved>
                                    <version>0.99.0</version>
                                    <fixVersion>0.99.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>14</watches>
                                                                <comments>
                            <comment id="13870706" author="eric@apache.org" created="Tue, 14 Jan 2014 13:21:42 +0000"  >&lt;p&gt;This patch uses composition instead of inheritance. &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10232&quot; title=&quot;More options to HttpServer Builder&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10232&quot;&gt;&lt;del&gt;HDFS-5760&lt;/del&gt;&lt;/a&gt;-2.patch in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10232&quot; title=&quot;More options to HttpServer Builder&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10232&quot;&gt;&lt;del&gt;HDFS-5760&lt;/del&gt;&lt;/a&gt; is needed.&lt;/p&gt;

&lt;p&gt;However, it is still no enough. I have&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.io.FileNotFoundException: webapps/master not found in CLASSPATH
	at org.apache.hadoop.http.HttpServer.getWebAppsPath(HttpServer.java:854)
	at org.apache.hadoop.http.HttpServer.&amp;lt;init&amp;gt;(HttpServer.java:465)
	at org.apache.hadoop.http.HttpServer.&amp;lt;init&amp;gt;(HttpServer.java:464)
	at org.apache.hadoop.http.HttpServer$Builder.build(HttpServer.java:321)
	at org.apache.hadoop.hbase.util.InfoServer.&amp;lt;init&amp;gt;(InfoServer.java:66)
	at org.apache.hadoop.hbase.master.HMaster.run(HMaster.java:584)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:724)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;which is logical because the builder verifies for such a path before creating the instance.&lt;/p&gt;

&lt;p&gt;I see in InfoServer that the needed is done to let access /hbase-webapps instead of /webapps, so I will try to make the HttpServer configurable.&lt;/p&gt;

&lt;p&gt;Writing here for any early feedback.&lt;/p&gt;</comment>
                            <comment id="13870788" author="eric@apache.org" created="Tue, 14 Jan 2014 15:04:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10336&quot; title=&quot;Remove deprecated usage of Hadoop HttpServer in InfoServer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10336&quot;&gt;&lt;del&gt;HBASE-10336&lt;/del&gt;&lt;/a&gt;-2.patch works in conjunction with hadoop HttpServer patch.&lt;br/&gt;
This is needed to work on current hadoop 3.0.0-SNAPSHOT.&lt;/p&gt;</comment>
                            <comment id="13870915" author="stack" created="Tue, 14 Jan 2014 17:15:12 +0000"  >&lt;p&gt;Patch looks good &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=echarles&quot; class=&quot;user-hover&quot; rel=&quot;echarles&quot;&gt;Eric Charles&lt;/a&gt;.  Thanks.&lt;/p&gt;

&lt;p&gt;In here:&lt;/p&gt;

&lt;p&gt;+    builder.setName(name).addEndpoint(URI.create(&quot;http://&quot; + bindAddress + &quot;:&quot; + port))&lt;/p&gt;

&lt;p&gt;Could we pass &quot;//&quot; instead of &quot;http://&quot; so it works for both http and https if configured?&lt;/p&gt;

&lt;p&gt;Will this break h2 and h1 if it gets committed?&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="13870932" author="eric@apache.org" created="Tue, 14 Jan 2014 17:29:20 +0000"  >&lt;p&gt;I will test with //, it should work. h2 is still ok, but I need to check for h1, but I expect it will fail, the builder was probably not there.&lt;/p&gt;</comment>
                            <comment id="13871002" author="eric@apache.org" created="Tue, 14 Jan 2014 18:50:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; it will break on h1 and even h2 because we use releases. We need to go for a more generic and larger shim. I will hack on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9213&quot; title=&quot;create a unified shim for hadoop 1 and 2 so that there&amp;#39;s one build of HBase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9213&quot;&gt;HBASE-9213&lt;/a&gt; to solve this and &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6581&quot; title=&quot;Build with hadoop.profile=3.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6581&quot;&gt;HBASE-6581&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13872203" author="eric@apache.org" created="Wed, 15 Jan 2014 15:46:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10336&quot; title=&quot;Remove deprecated usage of Hadoop HttpServer in InfoServer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10336&quot;&gt;&lt;del&gt;HBASE-10336&lt;/del&gt;&lt;/a&gt;-3.patch rebased on latest &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10232&quot; title=&quot;More options to HttpServer Builder&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10232&quot;&gt;&lt;del&gt;HADOOP-10232&lt;/del&gt;&lt;/a&gt; patch.&lt;br/&gt;
InfoServer is now really simple, but shiming is needed to deal with hadoop-1 and hadoop-2.&lt;/p&gt;</comment>
                            <comment id="13872350" author="stack" created="Wed, 15 Jan 2014 18:15:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=echarles&quot; class=&quot;user-hover&quot; rel=&quot;echarles&quot;&gt;Eric Charles&lt;/a&gt; Help me out boss.  We can&apos;t commit this patch until &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10232&quot; title=&quot;More options to HttpServer Builder&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10232&quot;&gt;&lt;del&gt;HADOOP-10232&lt;/del&gt;&lt;/a&gt; is in all hadoops we depend on?  (Do I have that right?)&lt;/p&gt;</comment>
                            <comment id="13872386" author="eric@apache.org" created="Wed, 15 Jan 2014 18:30:22 +0000"  >&lt;p&gt;We need to wait on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9213&quot; title=&quot;create a unified shim for hadoop 1 and 2 so that there&amp;#39;s one build of HBase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9213&quot;&gt;HBASE-9213&lt;/a&gt; to provide a correct shim (on hdfs and jetty apis, such as hive does it). Once we have the shim, we need &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10232&quot; title=&quot;More options to HttpServer Builder&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10232&quot;&gt;&lt;del&gt;HADOOP-10232&lt;/del&gt;&lt;/a&gt;  to be committed in 3.0.0-SNAPSHOT to allow hbase run on h3. does it make sense?&lt;/p&gt;</comment>
                            <comment id="13872399" author="stack" created="Wed, 15 Jan 2014 18:36:36 +0000"  >&lt;p&gt;yessir.  Thanks.&lt;/p&gt;</comment>
                            <comment id="13873701" author="eric@apache.org" created="Thu, 16 Jan 2014 18:22:40 +0000"  >&lt;p&gt;We talked in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10232&quot; title=&quot;More options to HttpServer Builder&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10232&quot;&gt;&lt;del&gt;HADOOP-10232&lt;/del&gt;&lt;/a&gt; to decouple the http server.&lt;br/&gt;
The decoupling has a cost.&lt;br/&gt;
The cost is &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10336&quot; title=&quot;Remove deprecated usage of Hadoop HttpServer in InfoServer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10336&quot;&gt;&lt;del&gt;HBASE-10336&lt;/del&gt;&lt;/a&gt;-4.patch. Enjoy &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Tested: runs in eclipse + as a distribution.&lt;/p&gt;</comment>
                            <comment id="13874252" author="stack" created="Fri, 17 Jan 2014 01:06:21 +0000"  >&lt;p&gt;I took a quick look.  Seems like you are copying into hbase the hadoop httpserver and servlets (and tests) to undo our dependency.  You also move around a few classes to put them into places that make more sense now httpserver is in  hbase.&lt;/p&gt;

&lt;p&gt;That right?&lt;/p&gt;

&lt;p&gt;What are implications of applying this to our trunk Eric? (I did not see adding jetty to our pom.  Do we need it or are we transitively including it?  Do we need to exclude import of jetty from hadoop  now?).&lt;/p&gt;

&lt;p&gt;Good work.&lt;/p&gt;</comment>
                            <comment id="13874641" author="eric@apache.org" created="Fri, 17 Jan 2014 10:35:50 +0000"  >&lt;p&gt;You got it &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;. Upon that, please welcome additional config keys (hbase.http.filter.initializers and hbase.http.max.threads) and a separate webapp context attribute (CONF_CONTEXT_ATTRIBUTE = &quot;hbase.conf&quot;) which would allow mixed hadoop/hbase webapp to coexist in the same JVM (quite theorical, but could be useful for extended embedeed minicluster test cases).&lt;/p&gt;

&lt;p&gt;The attached patch &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10336&quot; title=&quot;Remove deprecated usage of Hadoop HttpServer in InfoServer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10336&quot;&gt;&lt;del&gt;HBASE-10336&lt;/del&gt;&lt;/a&gt;-5.patch adds in hbase-default.xml the 2 new keys and pulls 2 more needed test classes from hadoop.&lt;/p&gt;

&lt;p&gt;About the pom, yes I have thought about the exclusion/inclusion exercise, but would really prefer to perform this when submitting &lt;br/&gt;
another patch via &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6581&quot; title=&quot;Build with hadoop.profile=3.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6581&quot;&gt;HBASE-6581&lt;/a&gt;. For now, I have quite some branches and would prefer rebasing on trunk.&lt;/p&gt;

&lt;p&gt;And yes, if you commit to trunk, everything compiles/works as before on the various hadoop versions. So to me, you can commit &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10336&quot; title=&quot;Remove deprecated usage of Hadoop HttpServer in InfoServer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10336&quot;&gt;&lt;del&gt;HBASE-10336&lt;/del&gt;&lt;/a&gt;-5.patch.&lt;/p&gt;</comment>
                            <comment id="13877210" author="stack" created="Tue, 21 Jan 2014 05:24:37 +0000"  >&lt;p&gt;I tried this locally and it applied cleanly.  Lets see what hadoopqa says.&lt;/p&gt;</comment>
                            <comment id="13877217" author="stack" created="Tue, 21 Jan 2014 05:30:13 +0000"  >&lt;p&gt;I applied the patch locally.  I don&apos;t see any difference!  (smile).  You thinking we stay with jetty6 @eric charles?  I suppose at least till this patch goes in.  In another issue we can wrangle with upgrading jetty if wanted.  Let me try on cluster.&lt;/p&gt;</comment>
                            <comment id="13877225" author="hadoopqa" created="Tue, 21 Jan 2014 05:42:21 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12623623/HBASE-10336-5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12623623/HBASE-10336-5.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12623623&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 50 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 hadoop1.0&lt;/font&gt;.  The patch failed to compile against the hadoop 1.0 profile.&lt;br/&gt;
    Here is snippet of errors:&lt;/p&gt;
    &lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.5.1:compile (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-compile) on project hbase-server: Compilation failure
[ERROR] /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/http/&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;-info.java:[25,43] illegal start of expression
[ERROR] -&amp;gt; [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.5.1:compile (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-compile) on project hbase-server: Compilation failure
/home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/http/&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;-info.java:[25,43] illegal start of expression

	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:213)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
--
Caused by: org.apache.maven.plugin.CompilationFailureException: Compilation failure
/home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/http/&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;-info.java:[25,43] illegal start of expression

	at org.apache.maven.plugin.AbstractCompilerMojo.execute(AbstractCompilerMojo.java:729)
	at org.apache.maven.plugin.CompilerMojo.execute(CompilerMojo.java:128)
	at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8479//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8479//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13877249" author="stack" created="Tue, 21 Jan 2014 06:14:56 +0000"  >&lt;p&gt;I tried it on cluster.  Looks good.  Let me review the patch now.&lt;/p&gt;</comment>
                            <comment id="13877261" author="stack" created="Tue, 21 Jan 2014 06:26:56 +0000"  >&lt;p&gt;I&apos;d cut this down to ten threads on commit... ok w/ you @eric charles?&lt;/p&gt;

&lt;p&gt;+    &amp;lt;name&amp;gt;hbase.http.max.threads&amp;lt;/name&amp;gt;&lt;br/&gt;
+    &amp;lt;value&amp;gt;250&amp;lt;/value&amp;gt;&lt;/p&gt;

&lt;p&gt;My guess is that it is high in hadoop because its the MR transport&lt;/p&gt;

&lt;p&gt;This should be in http package?  ConfServlet.java  Might make more sense there.&lt;/p&gt;

&lt;p&gt;Should these configs be made into hbase configs?  HADOOP_SSL_ENABLED_KEY&lt;/p&gt;

&lt;p&gt;And there HADOOP_JETTY_LOGS_SERVE_ALIASES&lt;/p&gt;

&lt;p&gt;This is good:&lt;/p&gt;

&lt;p&gt;+ * Copied from hadoop source code.&amp;lt;br/&amp;gt;&lt;br/&gt;
+ * See &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10232&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HADOOP-10232&lt;/a&gt; to know why.&lt;/p&gt;

&lt;p&gt;Skimmed the patch.  I&apos;m +1 on it. &lt;/p&gt;</comment>
                            <comment id="13877328" author="eric@apache.org" created="Tue, 21 Jan 2014 08:20:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; 250 was set as default if hadoop.http.max.threads was not present, but yes, I also found this value much too high. +1 for 10 which is a very reasonable number&lt;br/&gt;
Yes, a few servlet classes to go home in the http package (as well in main as test).&lt;br/&gt;
Didn&apos;t look at HADOOP_SSL_ENABLED_KEY nor HADOOP_JETTY_LOGS_SERVE_ALIASES...&lt;br/&gt;
Jenkins is strict and doesn&apos;t like the uneeded comma in /package-info.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;25,43&amp;#93;&lt;/span&gt; @InterfaceAudience.LimitedPrivate(&lt;/p&gt;
{&quot;HBase&quot;,}
&lt;p&gt;)&lt;/p&gt;

&lt;p&gt;Where are we now Mr. Stack? have you updated the patch and will upload a new patch or do you like me to make it?&lt;br/&gt;
We can talk and fix the HADOOP_SSL_ENABLED_KEY,  HADOOP_JETTY_LOGS_SERVE_ALIASES and the upgrade to whatever jetty version after the commit.&lt;/p&gt;</comment>
                            <comment id="13877570" author="stack" created="Tue, 21 Jan 2014 16:11:22 +0000"  >&lt;p&gt;I have not made the changes.  Would you mind?  Doing the hadoop keys &amp;#8211; if at all &amp;#8211; post commit makes sense.  Put up new patch and I&apos;ll commit.&lt;/p&gt;</comment>
                            <comment id="13877623" author="eric@apache.org" created="Tue, 21 Jan 2014 17:13:09 +0000"  >&lt;p&gt;Ok &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;. I&apos;m a bit short at time today, so it will be for tomorrow - will look also at the hadoop keys.&lt;/p&gt;</comment>
                            <comment id="13877968" author="yuzhihong@gmail.com" created="Tue, 21 Jan 2014 23:02:18 +0000"  >&lt;p&gt;Is the following file needed ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+++ hbase-server/src/test/resources/webapps/test/.gitignore
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Is the following annotation needed ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+@InterfaceAudience.LimitedPrivate({&lt;span class=&quot;code-quote&quot;&gt;&quot;HBase&quot;&lt;/span&gt;})
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13878833" author="yuzhihong@gmail.com" created="Wed, 22 Jan 2014 16:59:37 +0000"  >&lt;p&gt;Starting HBase 0.98 on hadoop built from hadoop-2 branch gave us:  &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2014-01-21 06:07:17,871 FATAL [master:h2-centos6-uns-1390276854-hbase-10:60000] master.HMaster: Unhandled exception. Starting shutdown.
java.lang.IllegalArgumentException: Property value must not be &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
at com.google.common.base.Preconditions.checkArgument(Preconditions.java:92)
at org.apache.hadoop.conf.Configuration.set(Configuration.java:958)
at org.apache.hadoop.conf.Configuration.set(Configuration.java:940)
at org.apache.hadoop.http.HttpServer.initializeWebServer(HttpServer.java:510)
at org.apache.hadoop.http.HttpServer.&amp;lt;init&amp;gt;(HttpServer.java:470)
at org.apache.hadoop.http.HttpServer.&amp;lt;init&amp;gt;(HttpServer.java:458)
at org.apache.hadoop.http.HttpServer.&amp;lt;init&amp;gt;(HttpServer.java:412)
at org.apache.hadoop.hbase.util.InfoServer.&amp;lt;init&amp;gt;(InfoServer.java:59)
at org.apache.hadoop.hbase.master.HMaster.run(HMaster.java:584)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Looks like this JIRA would get us pass the above issue.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;:&lt;br/&gt;
Can you consider this for 0.98.0 ?&lt;/p&gt;</comment>
                            <comment id="13878948" author="apurtell" created="Wed, 22 Jan 2014 18:19:43 +0000"  >&lt;p&gt;This is a pretty substantial and risky change to go in so late just ahead of RC0, which I am likely to tag today. It should go on trunk only. However, that does mean neither 0.96.x nor 0.98.x will work on Hadoop 2.4.0 unless this change can go in on a minor bump.&lt;/p&gt;

&lt;p&gt;Ping &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; - would you put this in on a 0.96 minor? (I doubt it, just checking.)&lt;/p&gt;</comment>
                            <comment id="13878951" author="apurtell" created="Wed, 22 Jan 2014 18:20:50 +0000"  >&lt;blockquote&gt;&lt;p&gt;Looks like this JIRA would get us pass the above issue.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Also, I hate to ask, but &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yuzhihong%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;yuzhihong@gmail.com&quot;&gt;Ted Yu&lt;/a&gt; did you check that applying this patch fixes the problem you have reported?&lt;/p&gt;</comment>
                            <comment id="13878952" author="eric@apache.org" created="Wed, 22 Jan 2014 18:20:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tedyu@apache.org&quot;&gt;Ted Yu&lt;/a&gt; I had that error with trunk on h3-snapshot, and yes, this patch solves it. - I am also double checking the other error you mentioned. I am working on trunk: against which 0.98.x branch would you like to port this? Finally oops, although on my top-3 for today, my dev time is exhausted, so this will be hopefully for tomorrow.&lt;/p&gt;</comment>
                            <comment id="13878971" author="eric@apache.org" created="Wed, 22 Jan 2014 18:33:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; I hate to say it, but yes, it will fix the reported issue. Will &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tedyu@apache.org&quot;&gt;Ted Yu&lt;/a&gt; fall on another issue, who knows. At least, here it runs fine on h3-snapshot.&lt;br/&gt;
I will come back in one hour and see if there is a demand for a final patch.&lt;/p&gt;</comment>
                            <comment id="13878975" author="apurtell" created="Wed, 22 Jan 2014 18:35:54 +0000"  >&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; I hate to say it, but yes, it will fix the reported issue.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I will come back in one hour and see if there is a demand for a final patch.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If there&apos;s a patch that fixes this issue I promise to try it and consider it.&lt;/p&gt;</comment>
                            <comment id="13878978" author="stack" created="Wed, 22 Jan 2014 18:36:59 +0000"  >&lt;p&gt;Not for a point release in 0.96.  The exception should be carried back up to hadoop.  There is a contract in place.  It says we are allowed access at the head of the hadoop class.  Lets fix hadoop branch-2 before it releases.&lt;/p&gt;</comment>
                            <comment id="13878979" author="wheat9" created="Wed, 22 Jan 2014 18:37:25 +0000"  >&lt;p&gt;The following code has been deprecated:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+
+  &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; {
+    Configuration conf = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Configuration();
+    &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; sslEnabled = conf.getBoolean(
+            CommonConfigurationKeysPublic.HADOOP_SSL_ENABLED_KEY,
+            CommonConfigurationKeysPublic.HADOOP_SSL_ENABLED_DEFAULT);
+    policy = sslEnabled ? Policy.HTTPS_ONLY : Policy.HTTP_ONLY;
+  }
+
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void setPolicy(Policy policy) {
+    HttpConfig.policy = policy;
+  }
+
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isSecure() {
+    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; policy == Policy.HTTPS_ONLY;
+  }
+
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getSchemePrefix() {
+    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; (isSecure()) ? &lt;span class=&quot;code-quote&quot;&gt;&quot;https:&lt;span class=&quot;code-comment&quot;&gt;//&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;http://&quot;&lt;/span&gt;;
&lt;/span&gt;+  }
+
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getScheme(Policy policy) {
+    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; policy == Policy.HTTPS_ONLY ? &lt;span class=&quot;code-quote&quot;&gt;&quot;https:&lt;span class=&quot;code-comment&quot;&gt;//&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;http://&quot;&lt;/span&gt;;
&lt;/span&gt;+  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    /**
+     * Use setAppDir() instead.
+     */
+    @Deprecated
+    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Builder setName(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name){
+      &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.name = name;
+      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;;
+    }
+
+    /**
+     * Use addEndpoint() instead.
+     */
+    @Deprecated
+    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Builder setBindAddress(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; bindAddress){
+      &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.bindAddress = bindAddress;
+      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;;
+    }
+
+    /**
+     * Use addEndpoint() instead.
+     */
+    @Deprecated
+    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Builder setPort(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; port) {
+      &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.port = port;
+      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;;
+    }
+    
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And there are significant amount of code in &lt;tt&gt;HttpServer&lt;/tt&gt; has been marked as deprecated. You might want to get rid of them as well.&lt;/p&gt;</comment>
                            <comment id="13878980" author="apurtell" created="Wed, 22 Jan 2014 18:37:29 +0000"  >&lt;blockquote&gt;&lt;p&gt;h3-snapshot.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;h3-snapshot is branch-2 HEAD and HBase trunk, that right?&lt;/p&gt;</comment>
                            <comment id="13878983" author="apurtell" created="Wed, 22 Jan 2014 18:39:32 +0000"  >&lt;blockquote&gt;&lt;p&gt;There is a contract in place. It says we are allowed access at the head of the hadoop class. Lets fix hadoop branch-2 before it releases.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Ok, you heard the man. This is very unlikely to make the 0.98.0 RC 0 because I want to tag it today after a couple more things go in. &lt;/p&gt;</comment>
                            <comment id="13878989" author="eric@apache.org" created="Wed, 22 Jan 2014 18:42:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; I run hbase-trunk on hadoop-trunk. To run it successfully, I have two options:&lt;br/&gt;
1. The tiny patch of &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10232&quot; title=&quot;More options to HttpServer Builder&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10232&quot;&gt;&lt;del&gt;HADOOP-10232&lt;/del&gt;&lt;/a&gt; rejected by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wheat9&quot; class=&quot;user-hover&quot; rel=&quot;wheat9&quot;&gt;Haohui Mai&lt;/a&gt;&lt;br/&gt;
2. The large patch of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10336&quot; title=&quot;Remove deprecated usage of Hadoop HttpServer in InfoServer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10336&quot;&gt;&lt;del&gt;HBASE-10336&lt;/del&gt;&lt;/a&gt; which is nearly ready, but for which I miss one hour. my bad, and I wouldn&apos;t want to inject incomplete and potentially buggy code in a hbase release.&lt;/p&gt;</comment>
                            <comment id="13878999" author="apurtell" created="Wed, 22 Jan 2014 18:49:12 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eric%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;eric@apache.org&quot;&gt;Eric Charles&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;but for which I miss one hour. my bad&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It&apos;s not you. The solution to this problem looks to need doing upstream.&lt;/p&gt;</comment>
                            <comment id="13879002" author="stack" created="Wed, 22 Jan 2014 18:50:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wheat9&quot; class=&quot;user-hover&quot; rel=&quot;wheat9&quot;&gt;Haohui Mai&lt;/a&gt; it is deprecated... and the implication is?  That you will purge in a 2.4 release?  Why not in a 3.0?  Which hadoop issue is this?  Thanks.  (For a whiff of why we are disturbed, we would like to avoid there being yet more variants on our hbase x hadoop table here &lt;a href=&quot;http://hbase.apache.org/book.html#hadoop&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hbase.apache.org/book.html#hadoop&lt;/a&gt;  &amp;#8211; it is frightening enough as it is)&lt;/p&gt;</comment>
                            <comment id="13879013" author="apurtell" created="Wed, 22 Jan 2014 18:58:21 +0000"  >&lt;p&gt;The exception Ted reported above has been reported upstream as &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10252&quot; title=&quot;HttpServer can&amp;#39;t start if hostname is not specified&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10252&quot;&gt;&lt;del&gt;HADOOP-10252&lt;/del&gt;&lt;/a&gt; looks like.&lt;/p&gt;</comment>
                            <comment id="13879037" author="wheat9" created="Wed, 22 Jan 2014 19:08:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-5305&quot; title=&quot;Add https support in HDFS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-5305&quot;&gt;&lt;del&gt;HDFS-5305&lt;/del&gt;&lt;/a&gt; and related jiras implement HTTPS support, as a side effect they have changed a lot how &lt;tt&gt;HttpServer&lt;/tt&gt; works.&lt;/p&gt;

&lt;p&gt;I anticipate that there are more changes for &lt;tt&gt;HttpServer&lt;/tt&gt; in the near term. We want to keep it as an private API so that we can keep cleaning it up and without worrying about compatibility.&lt;/p&gt;

&lt;p&gt;For distribution, the approach of this jira might work better. It seems to me that this is a reliable way to not making the table you&apos;ve mentioned more frightening. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13879038" author="stack" created="Wed, 22 Jan 2014 19:08:28 +0000"  >&lt;p&gt;Is &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ted_yu&quot; class=&quot;user-hover&quot; rel=&quot;ted_yu&quot;&gt;Ted Yu&lt;/a&gt; not picking up &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10252&quot; title=&quot;HttpServer can&amp;#39;t start if hostname is not specified&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10252&quot;&gt;&lt;del&gt;HADOOP-10252&lt;/del&gt;&lt;/a&gt; in his testing or does that patch not totally fix the issue?&lt;/p&gt;</comment>
                            <comment id="13879039" author="yuzhihong@gmail.com" created="Wed, 22 Jan 2014 19:08:59 +0000"  >&lt;p&gt;@Andy:&lt;br/&gt;
I was about to test patch v5 which applies cleanly on 0.98 in a cluster.&lt;/p&gt;

&lt;p&gt;Somehow there was rollback in local repo.&lt;/p&gt;

&lt;p&gt;I will proceed and report back.&lt;/p&gt;</comment>
                            <comment id="13879046" author="apurtell" created="Wed, 22 Jan 2014 19:12:34 +0000"  >&lt;blockquote&gt;&lt;p&gt;I was about to test patch v5 which applies cleanly on 0.98 in a cluster.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It doesn&apos;t matter because this change isn&apos;t going to make RC0. I&apos;m guessing we won&apos;t have just one release candidate, but this is not likely to go in on any subsequent RC because it only addresses a future problem in exchange for risky big changes.&lt;/p&gt;</comment>
                            <comment id="13879055" author="stack" created="Wed, 22 Jan 2014 19:17:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wheat9&quot; class=&quot;user-hover&quot; rel=&quot;wheat9&quot;&gt;Haohui Mai&lt;/a&gt; All well and good.  We are working to undo our dependency.  This patch will go in soon but as &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jxiang&quot; class=&quot;user-hover&quot; rel=&quot;jxiang&quot;&gt;Jimmy Xiang&lt;/a&gt; says up in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-5305&quot; title=&quot;Unit test org.apache.hadoop.fs.TestCopyFiles.testMapCount fails on trunk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-5305&quot;&gt;&lt;del&gt;HADOOP-5305&lt;/del&gt;&lt;/a&gt;, we want both the deprecated APIs to remain in place a while.  We&apos;ve just &apos;learned&apos; of your effort to purge this code in 2.x timeframe.  Unless there is some hard reason that the deprecated methods cannot stay in place (other than you have not tested them &amp;#8211; we&apos;ll yell and patch if you break something), rather than piss off a downstream project and put us in an awkward spot, I suggest leave them in place deprecated.&lt;/p&gt;</comment>
                            <comment id="13879067" author="eric@apache.org" created="Wed, 22 Jan 2014 19:26:39 +0000"  >&lt;p&gt;If &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tedyu@apache.org&quot;&gt;Ted Yu&lt;/a&gt; confirms patch v5 works well, it is safe to commit and release. The cleaning is more about class servlet move to http package, gitignore file to remove, hadoop key to rename/document, @InterfaceAudience to be removed. This can be done after.&lt;/p&gt;</comment>
                            <comment id="13879071" author="apurtell" created="Wed, 22 Jan 2014 19:29:21 +0000"  >&lt;blockquote&gt;&lt;p&gt;If Ted Yu confirms patch v5 works well, it is safe to commit and release. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Well two HBase RMs disagree with your assessment.&lt;/p&gt;</comment>
                            <comment id="13879081" author="jxiang" created="Wed, 22 Jan 2014 19:35:04 +0000"  >&lt;p&gt;FYI &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10252&quot; title=&quot;HttpServer can&amp;#39;t start if hostname is not specified&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10252&quot;&gt;&lt;del&gt;HADOOP-10252&lt;/del&gt;&lt;/a&gt; hasn&apos;t fixed all issues related to the deprecated constructor.  I am still looking into it now.&lt;/p&gt;</comment>
                            <comment id="13879103" author="eric@apache.org" created="Wed, 22 Jan 2014 19:56:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jxiang&quot; class=&quot;user-hover&quot; rel=&quot;jxiang&quot;&gt;Jimmy Xiang&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10252&quot; title=&quot;HttpServer can&amp;#39;t start if hostname is not specified&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10252&quot;&gt;&lt;del&gt;HADOOP-10252&lt;/del&gt;&lt;/a&gt; sounds like a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10232&quot; title=&quot;More options to HttpServer Builder&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10232&quot;&gt;&lt;del&gt;HADOOP-10232&lt;/del&gt;&lt;/a&gt; for which &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; is a valid patch IMHO. the patch submitted for &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10252&quot; title=&quot;HttpServer can&amp;#39;t start if hostname is not specified&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10252&quot;&gt;&lt;del&gt;HADOOP-10252&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; seems like the first try I made, but had to add more code to make it work&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; sorry, I should have said &quot;IMHO, it would be safe to commit and release if no other issue is found after unit and integration tests + real deployment and traffic on a real cluster&quot;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;  &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12622867/HDFS-5760-2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12622867/HDFS-5760-2.patch&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;  &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12624372/hadoop-10252.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12624372/hadoop-10252.patch&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13879116" author="jxiang" created="Wed, 22 Jan 2014 20:08:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=echarles&quot; class=&quot;user-hover&quot; rel=&quot;echarles&quot;&gt;Eric Charles&lt;/a&gt;, you are right &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10252&quot; title=&quot;HttpServer can&amp;#39;t start if hostname is not specified&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10252&quot;&gt;&lt;del&gt;HADOOP-10252&lt;/del&gt;&lt;/a&gt; is not complete. I filed &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10254&quot; title=&quot;HttpServer doesn&amp;#39;t load listeners&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10254&quot;&gt;&lt;del&gt;HADOOP-10254&lt;/del&gt;&lt;/a&gt;, with which the mini cluster starts.&lt;/p&gt;</comment>
                            <comment id="13879127" author="eric@apache.org" created="Wed, 22 Jan 2014 20:15:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jxiang&quot; class=&quot;user-hover&quot; rel=&quot;jxiang&quot;&gt;Jimmy Xiang&lt;/a&gt; With &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10254&quot; title=&quot;HttpServer doesn&amp;#39;t load listeners&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10254&quot;&gt;&lt;del&gt;HADOOP-10254&lt;/del&gt;&lt;/a&gt;, TestInfoServer may be ok, but hbase will fail at runtime, at least I would bet on that. On the other hand &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10252&quot; title=&quot;HttpServer can&amp;#39;t start if hostname is not specified&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10252&quot;&gt;&lt;del&gt;HADOOP-10252&lt;/del&gt;&lt;/a&gt; is not enough, a patch uploaded here (not the last one) would be needed.&lt;/p&gt;

&lt;p&gt;Btw, what about simply dropping any change to hadoop and concentrate on the hbase decoupling. It was the plan, no? Sorry, i have to leave. Read you tomorrow.&lt;/p&gt;</comment>
                            <comment id="13879151" author="jxiang" created="Wed, 22 Jan 2014 20:34:05 +0000"  >&lt;p&gt;I just tested. My HBase cluster works fine with it. Thanks.&lt;/p&gt;</comment>
                            <comment id="13879256" author="wheat9" created="Wed, 22 Jan 2014 22:09:46 +0000"  >&lt;p&gt;As &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sureshms&quot; class=&quot;user-hover&quot; rel=&quot;sureshms&quot;&gt;Suresh Srinivas&lt;/a&gt; suggested in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10253&quot; title=&quot;Remove deprecated methods in HttpServer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10253&quot;&gt;&lt;del&gt;HADOOP-10253&lt;/del&gt;&lt;/a&gt;, an alternative approach is to maintain a temporary copy of &lt;tt&gt;HttpServer&lt;/tt&gt; in hadoop-common for HBase in 2.4. That way hbase can work with hadoop 2.4 untile &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10336&quot; title=&quot;Remove deprecated usage of Hadoop HttpServer in InfoServer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10336&quot;&gt;&lt;del&gt;HBASE-10336&lt;/del&gt;&lt;/a&gt; is landed.&lt;/p&gt;</comment>
                            <comment id="13879265" author="jxiang" created="Wed, 22 Jan 2014 22:12:37 +0000"  >&lt;p&gt;If this works, it is great.&lt;/p&gt;</comment>
                            <comment id="13879335" author="yuzhihong@gmail.com" created="Wed, 22 Jan 2014 23:20:43 +0000"  >&lt;p&gt;For Eric&apos;s patch v5:&lt;/p&gt;

&lt;p&gt;applied on 0.98 tip&lt;br/&gt;
built 0.98 tar ball&lt;br/&gt;
built Hoya with 0.98 dependency&lt;br/&gt;
ran LoadTestTool using Hoya with 0.98 tar ball - it passed.&lt;/p&gt;</comment>
                            <comment id="13879349" author="stack" created="Wed, 22 Jan 2014 23:28:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wheat9&quot; class=&quot;user-hover&quot; rel=&quot;wheat9&quot;&gt;Haohui Mai&lt;/a&gt; Thanks.  Am up for testing and review np.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ted_yu&quot; class=&quot;user-hover&quot; rel=&quot;ted_yu&quot;&gt;Ted Yu&lt;/a&gt; You are not helping.&lt;/p&gt;</comment>
                            <comment id="13879351" author="apurtell" created="Wed, 22 Jan 2014 23:29:04 +0000"  >&lt;p&gt;I see you didn&apos;t actually check the InfoServers &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yuzhihong%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;yuzhihong@gmail.com&quot;&gt;Ted Yu&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;-1 for 0.98. I am tagging RC0 today. &lt;/p&gt;</comment>
                            <comment id="13879353" author="apurtell" created="Wed, 22 Jan 2014 23:31:04 +0000"  >&lt;p&gt;By the way, what does Hoya have to do with validating an HBase release? If you want to make it part of HBase release criteria, raise a discussion on dev@. Mention on this issue is completely beside the point.&lt;/p&gt;</comment>
                            <comment id="13879354" author="yuzhihong@gmail.com" created="Wed, 22 Jan 2014 23:31:23 +0000"  >&lt;p&gt;@Andy:&lt;br/&gt;
I was not suggesting Eric&apos;s patch for 0.98&lt;/p&gt;</comment>
                            <comment id="13879357" author="apurtell" created="Wed, 22 Jan 2014 23:32:27 +0000"  >&lt;blockquote&gt;&lt;p&gt;I was not suggesting Eric&apos;s patch for 0.98&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Could have fooled me because there is a mention of &quot;0.98&quot; on every line of your above comment. &lt;/p&gt;</comment>
                            <comment id="13879462" author="stack" created="Thu, 23 Jan 2014 05:44:09 +0000"  >&lt;blockquote&gt;&lt;p&gt;I was not suggesting Eric&apos;s patch for 0.98&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;As per Andrew, the above is a non sequitur&lt;/p&gt;</comment>
                            <comment id="13879797" author="eric@apache.org" created="Thu, 23 Jan 2014 09:41:20 +0000"  >&lt;p&gt;Attached &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10336&quot; title=&quot;Remove deprecated usage of Hadoop HttpServer in InfoServer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10336&quot;&gt;&lt;del&gt;HBASE-10336&lt;/del&gt;&lt;/a&gt;-6.patch which is v5 taking into account &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tedyu@apache.org&quot;&gt;Ted Yu&lt;/a&gt; comments:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;value 10 is set for hbase.http.max.threads key in hbase-default.xml&lt;/li&gt;
	&lt;li&gt;InterfaceAudience.LimitedPrivate in package-info.java removed&lt;/li&gt;
	&lt;li&gt;new classes in conf, jmx, log, ssl moved to http package (as well in main as in test).&lt;/li&gt;
	&lt;li&gt;HADOOP_SSL_ENABLED_KEY and HADOOP_JETTY_LOGS_SERVE_ALIASES are now defined as HBASE_... in o.a.h.hbase.conf.ServerConfigurationKeys&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Yet a new class in hbase-server/src/test/java/org/apache/hadoop/hbase/test/ package - not sure if you like it? (maybe should go to hbase.util.test package - just tell me)&lt;/p&gt;

&lt;p&gt;!!! &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; this patch is just for comment/review. In my env with today trunks, I receive&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.hadoop.hbase.TableExistsException: hbase:namespace
    at org.apache.hadoop.hbase.master.handler.CreateTableHandler.prepare(CreateTableHandler.java:120)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is/should be orthogonal to the changes I made and the cause is prolly somewhere else. Will look at this...&lt;/p&gt;

&lt;p&gt;I also have a few test errors, but I also have them running the http tests in hadoop code.&lt;/p&gt;

&lt;p&gt;Let&apos;s see what jenkins tells us about this &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10336&quot; title=&quot;Remove deprecated usage of Hadoop HttpServer in InfoServer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10336&quot;&gt;&lt;del&gt;HBASE-10336&lt;/del&gt;&lt;/a&gt;-6.patch.&lt;/p&gt;</comment>
                            <comment id="13879798" author="eric@apache.org" created="Thu, 23 Jan 2014 09:43:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; can you trigger jenkins build for  &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10336&quot; title=&quot;Remove deprecated usage of Hadoop HttpServer in InfoServer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10336&quot;&gt;&lt;del&gt;HBASE-10336&lt;/del&gt;&lt;/a&gt;-6.patch ? Optionally, can you induce me on how to do this ? (is it possible to specify a set of patches to apply or does it take the last uploaded one?) (or do I need special granting?)&lt;/p&gt;</comment>
                            <comment id="13879801" author="eric@apache.org" created="Thu, 23 Jan 2014 09:49:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; horror, v6 has v5 embedded as a file. &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10336&quot; title=&quot;Remove deprecated usage of Hadoop HttpServer in InfoServer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10336&quot;&gt;&lt;del&gt;HBASE-10336&lt;/del&gt;&lt;/a&gt;-7.patch is a clean one. Sorry for the mess.&lt;/p&gt;</comment>
                            <comment id="13879825" author="eric@apache.org" created="Thu, 23 Jan 2014 10:21:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; ServerConfigurationKeys need a small change. I will wait jenkins results before uploading a new patch.&lt;/p&gt;</comment>
                            <comment id="13880751" author="stack" created="Fri, 24 Jan 2014 06:14:26 +0000"  >&lt;p&gt;Let me try kicking hadoopqa.&lt;/p&gt;</comment>
                            <comment id="13880758" author="stack" created="Fri, 24 Jan 2014 06:23:46 +0000"  >&lt;p&gt;Jenkins is &apos;sick&apos;.  Will try again in our morning.&lt;/p&gt;</comment>
                            <comment id="13881952" author="hadoopqa" created="Sat, 25 Jan 2014 17:19:11 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12624767/HBASE-10336-7.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12624767/HBASE-10336-7.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12624767&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 48 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 hadoop1.0&lt;/font&gt;.  The patch failed to compile against the hadoop 1.0 profile.&lt;br/&gt;
    Here is snippet of errors:&lt;/p&gt;
    &lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.5.1:compile (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-compile) on project hbase-server: Compilation failure: Compilation failure:
[ERROR] /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/http/HttpServer.java:[50,24] cannot find symbol
[ERROR] symbol  : class HadoopIllegalArgumentException
[ERROR] location: &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; org.apache.hadoop
[ERROR] /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/http/lib/StaticUserWebFilter.java:[41,0] cannot find symbol
[ERROR] symbol  : &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; DEFAULT_HADOOP_HTTP_STATIC_USER
--
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.5.1:compile (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-compile) on project hbase-server: Compilation failure
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:213)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
	at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
	at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
--
Caused by: org.apache.maven.plugin.CompilationFailureException: Compilation failure
	at org.apache.maven.plugin.AbstractCompilerMojo.execute(AbstractCompilerMojo.java:729)
	at org.apache.maven.plugin.CompilerMojo.execute(CompilerMojo.java:128)
	at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
	... 19 more&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8509//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8509//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13881971" author="eric@apache.org" created="Sat, 25 Jan 2014 18:17:38 +0000"  >&lt;p&gt;on my env (tested with jdk6 and jdk7):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
git stash
git pull upstream trunk
patch -p0 &amp;lt; HBASE-10336-7.patch
mvn clean install -DskipTests
...
BUILD SUCCESS
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I wonder jenkins is not happy - anyone could quickly run the above snippet and report back? &lt;br/&gt;
Thx, Eric&lt;/p&gt;</comment>
                            <comment id="13881980" author="yuzhihong@gmail.com" created="Sat, 25 Jan 2014 18:31:15 +0000"  >&lt;p&gt;As QA reported, compilation against hadoop-1 failed:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HadoopIllegalArgumentException(&lt;span class=&quot;code-quote&quot;&gt;&quot;name is not set&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;HadoopIllegalArgumentException is not in hadoop-1&lt;/p&gt;

&lt;p&gt;Consider using IllegalArgumentException instead.&lt;/p&gt;</comment>
                            <comment id="13881992" author="eric@apache.org" created="Sat, 25 Jan 2014 19:05:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tedyu@apache.org&quot;&gt;Ted Yu&lt;/a&gt; thx for the pointer. Actually, I looked at jenkins output and didn&apos;t see the command invoked not any details on the outputs. just the exception. I guess the build script mutes this on purpose which makes it more tricky for newbies like me, if the -Dhadoop.profile=1.0 would have appeared in the log, I would have seen where the error was coming from, obviously from the fact I didn&apos;t try to compile with hadoop1.&lt;/p&gt;

&lt;p&gt;I have decoupled quite more keys (there was the reported DEFAULT_HADOOP_HTTP_STATIC_USER and a few more). Now I have a more tricky one&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[ERROR] /home/eric/wrk/com/hbase.git/hbase-server/src/main/java/org/apache/hadoop/hbase/http/conf/ConfServlet.java:[93,10] writeXml(java.io.OutputStream) in org.apache.hadoop.conf.Configuration cannot be applied to (java.io.Writer)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It&apos;s the classical ball of wool.... I&apos;m sure you see what I eman You guys please tell me: a quick hack for this before falling on the next one or a more complete solution via &apos;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9213&quot; title=&quot;create a unified shim for hadoop 1 and 2 so that there&amp;#39;s one build of HBase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9213&quot;&gt;HBASE-9213&lt;/a&gt; create a unified shim for hadoop 1 and 2 so that there&apos;s one build of HBase&apos; - Depends how quick you want this &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10336&quot; title=&quot;Remove deprecated usage of Hadoop HttpServer in InfoServer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10336&quot;&gt;&lt;del&gt;HBASE-10336&lt;/del&gt;&lt;/a&gt; to land.&lt;/p&gt;</comment>
                            <comment id="13882009" author="eric@apache.org" created="Sat, 25 Jan 2014 19:36:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tedyu@apache.org&quot;&gt;Ted Yu&lt;/a&gt; attached the patch which gives writeXml(java.io.OutputStream) in org.apache.hadoop.conf.Configuration cannot be applied to (java.io.Writer) with -Dhadoop.profile=1.0&lt;/p&gt;

&lt;p&gt;with -Dhadoop.profile=1.1, it is worse: package org.apache.hadoop.security.ssl does not exist... and so one.&lt;br/&gt;
Will further investigate my tomorrow.&lt;/p&gt;</comment>
                            <comment id="13882013" author="hadoopqa" created="Sat, 25 Jan 2014 19:45:41 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12625203/HBASE-10336-8.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12625203/HBASE-10336-8.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12625203&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 48 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 hadoop1.0&lt;/font&gt;.  The patch failed to compile against the hadoop 1.0 profile.&lt;br/&gt;
    Here is snippet of errors:&lt;/p&gt;
    &lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.5.1:compile (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-compile) on project hbase-server: Compilation failure
[ERROR] /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/http/conf/ConfServlet.java:[93,10] writeXml(java.io.OutputStream) in org.apache.hadoop.conf.Configuration cannot be applied to (java.io.Writer)
[ERROR] -&amp;gt; [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.5.1:compile (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-compile) on project hbase-server: Compilation failure
/home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/http/conf/ConfServlet.java:[93,10] writeXml(java.io.OutputStream) in org.apache.hadoop.conf.Configuration cannot be applied to (java.io.Writer)

	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:213)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
--
Caused by: org.apache.maven.plugin.CompilationFailureException: Compilation failure
/home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/http/conf/ConfServlet.java:[93,10] writeXml(java.io.OutputStream) in org.apache.hadoop.conf.Configuration cannot be applied to (java.io.Writer)

	at org.apache.maven.plugin.AbstractCompilerMojo.execute(AbstractCompilerMojo.java:729)
	at org.apache.maven.plugin.CompilerMojo.execute(CompilerMojo.java:128)
	at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8514//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8514//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13885983" author="stack" created="Wed, 29 Jan 2014 23:21:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=echarles&quot; class=&quot;user-hover&quot; rel=&quot;echarles&quot;&gt;Eric Charles&lt;/a&gt; Lets avoid &quot;...a more complete solution via &apos;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9213&quot; title=&quot;create a unified shim for hadoop 1 and 2 so that there&amp;#39;s one build of HBase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9213&quot;&gt;HBASE-9213&lt;/a&gt; create a unified shim for hadoop 1 and 2 so that there&apos;s one build of HBase&apos;....&quot; if we can.  We have the hadoop1 and hadoop2 modules.  Can particular needs per target be code added in here?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=echarles&quot; class=&quot;user-hover&quot; rel=&quot;echarles&quot;&gt;Eric Charles&lt;/a&gt; Do we have to do something crazy like rely on hadoop httpserver if hadoop1 and this new one if hadoop2?&lt;/p&gt;
</comment>
                            <comment id="13885984" author="stack" created="Wed, 29 Jan 2014 23:22:15 +0000"  >&lt;p&gt;Or, we can&apos;t break the dependency till post 1.0?  1.0 hbase can&apos;t run on hadoop3?  After 1.0, we commit this patch?&lt;/p&gt;</comment>
                            <comment id="13988705" author="eric@apache.org" created="Sat, 3 May 2014 14:40:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10336&quot; title=&quot;Remove deprecated usage of Hadoop HttpServer in InfoServer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10336&quot;&gt;&lt;del&gt;HBASE-10336&lt;/del&gt;&lt;/a&gt;-9.patch is rebased on trunk. TestSSLHttpServer fails here, but I suspect a jdk issue (running on jdk8). Would be worth to run on Jenkins.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10336&quot; title=&quot;Remove deprecated usage of Hadoop HttpServer in InfoServer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10336&quot;&gt;&lt;del&gt;HBASE-10336&lt;/del&gt;&lt;/a&gt; must land before  &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6581&quot; title=&quot;Build with hadoop.profile=3.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6581&quot;&gt;HBASE-6581&lt;/a&gt; (run on hadoop-3) to progress - This is still more needed since Hadoop has made HttpServer final in hadoop trunk...&lt;/p&gt;</comment>
                            <comment id="13988934" author="eric@apache.org" created="Sun, 4 May 2014 06:56:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10336&quot; title=&quot;Remove deprecated usage of Hadoop HttpServer in InfoServer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10336&quot;&gt;&lt;del&gt;HBASE-10336&lt;/del&gt;&lt;/a&gt;-10.patch should work with jenkins. It builds/tests fine on my jdk7.&lt;/p&gt;</comment>
                            <comment id="13992081" author="hadoopqa" created="Wed, 7 May 2014 18:31:37 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12643254/HBASE-10569-10.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12643254/HBASE-10569-10.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12643254&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 48 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javac&lt;/font&gt;.  The applied patch generated 45 javac compiler warnings (more than the trunk&apos;s current 4 warnings).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 1 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +        .append(isAlive() ? STATE_DESCRIPTION_ALIVE : STATE_DESCRIPTION_NOT_LIVE).append(&quot;), listening at:&quot;);&lt;br/&gt;
+  private void writeAttribute(JsonGenerator jg, ObjectName oname, MBeanAttributeInfo attr) throws IOException {&lt;br/&gt;
+  public static HttpServer createServer(String webapp, Configuration conf, AccessControlList adminsAcl)&lt;br/&gt;
+    return localServerBuilder(webapp).setFindPort(true).setConf(conf).setPathSpec(pathSpecs).build();&lt;br/&gt;
+    String serverURL = &quot;http://&quot; + NetUtils.getHostPortString(myServer.getConnectorAddress(0)) + &quot;/&quot;;&lt;br/&gt;
+    Mockito.verify(response).sendError(Mockito.eq(HttpServletResponse.SC_UNAUTHORIZED), Mockito.anyString());&lt;br/&gt;
+    Mockito.verify(response).sendError(Mockito.eq(HttpServletResponse.SC_UNAUTHORIZED), Mockito.anyString());&lt;br/&gt;
+      assertTrue( e.getMessage().contains(&quot;Problem in starting http server. Server handlers failed&quot;));&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestMultiParallel&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9471//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9471//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9471//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9471//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9471//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9471//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9471//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9471//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9471//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9471//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9471//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9471//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9471//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9471//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9471//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9471//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9471//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9471//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9471//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9471//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9471//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9471//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13998410" author="eric@apache.org" created="Thu, 15 May 2014 03:16:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu&quot; class=&quot;user-hover&quot; rel=&quot;tedyu&quot;&gt;Ted Yu&lt;/a&gt; Thx for the jenkins trrigger. It gave back -1 for the tests.&lt;/p&gt;

&lt;p&gt;After a few hours, the build #9471 logs and information are already purged (the links return a 404)  - Latest precommit build is now #9511, which is 40 precommit builds in a few hours.&lt;br/&gt;
I can not see if the org.apache.hadoop.hbase.client.TestMultiParallel is the only failing test and why it has failed (stacktrace). It is a client test, not related to http. The other http test &lt;b&gt;seem&lt;/b&gt; to have succeeded (not sure, I don&apos;t have the test reports).&lt;/p&gt;

&lt;p&gt;Is it a good time to upload the patch on the review board (&lt;a href=&quot;https://reviews.apache.org/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/&lt;/a&gt;) or do we need to try again with jenkins ?&lt;/p&gt;</comment>
                            <comment id="13998630" author="yuzhihong@gmail.com" created="Thu, 15 May 2014 09:40:19 +0000"  >&lt;p&gt;Uploading onto review board would make review process smooth. &lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="13998877" author="stack" created="Thu, 15 May 2014 16:21:37 +0000"  >&lt;p&gt;@eric charles TestMultiParallel is not likely your patch &amp;#8211; it has been failing a while.&lt;/p&gt;</comment>
                            <comment id="14001977" author="eric@apache.org" created="Mon, 19 May 2014 16:53:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tedyu@apache.org&quot;&gt;Ted Yu&lt;/a&gt; I generated the diff with &quot;git diff --no-prefix&quot; and gets from &lt;a href=&quot;https://reviews.apache.org/r/new/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/new/&lt;/a&gt; the error message : &quot;No valid separator after the filename was found in the diff header&quot;.&lt;br/&gt;
The patch I try to upload is the &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10569&quot; title=&quot;Co-locate meta and master&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10569&quot;&gt;&lt;del&gt;HBASE-10569&lt;/del&gt;&lt;/a&gt;-10.patch&quot;. &lt;br/&gt;
Any idea?&lt;/p&gt;
</comment>
                            <comment id="14001981" author="yuzhihong@gmail.com" created="Mon, 19 May 2014 16:58:34 +0000"  >&lt;p&gt;Did you select hbase-git repository ?&lt;/p&gt;</comment>
                            <comment id="14002069" author="eric@apache.org" created="Mon, 19 May 2014 17:56:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tedyu@apache.org&quot;&gt;Ted Yu&lt;/a&gt; I didn&apos;t.. now with hbase-git, I have &quot;The file &apos;hbase-server/pom.xml&apos; (r3b4e546) could not be found in the repository&quot;&lt;/p&gt;</comment>
                            <comment id="14002086" author="yuzhihong@gmail.com" created="Mon, 19 May 2014 18:08:04 +0000"  >&lt;p&gt;I got the same error.&lt;/p&gt;

&lt;p&gt;Maybe re-generate patch ?&lt;br/&gt;
&quot;--no-prefix&quot; is not needed - reviewboard should be able to recognize git diff.&lt;/p&gt;</comment>
                            <comment id="14002115" author="eric@apache.org" created="Mon, 19 May 2014 18:17:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tedyu@apache.org&quot;&gt;Ted Yu&lt;/a&gt; even with a new patch created without &apos;--no-prefix&quot; option, I get &quot;The file &apos;hbase-server/pom.xml&apos; (r3b4e546) could not be found in the repository&quot;&lt;/p&gt;</comment>
                            <comment id="14002306" author="yuzhihong@gmail.com" created="Mon, 19 May 2014 20:14:55 +0000"  >&lt;p&gt;Should the following two files be under hbase-server/src/test/java/org/apache/hadoop/hbase ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$ ls hbase-server/src/test/java/org/apache/hadoop/hbase/test | head
GenericTestUtils.java
TimedOutTestsListener.java
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I re-generated diff using svn repo (based on patch v10) and was able to create review request. I will attach that patch here.&lt;/p&gt;</comment>
                            <comment id="14002309" author="yuzhihong@gmail.com" created="Mon, 19 May 2014 20:15:23 +0000"  >&lt;p&gt;Same patch as Eric&apos;s v10.&lt;/p&gt;</comment>
                            <comment id="14003278" author="eric@apache.org" created="Tue, 20 May 2014 13:55:03 +0000"  >&lt;p&gt;Thx Ted. I don&apos;t find the review request you created... can you post the url. &lt;br/&gt;
Maybe github is also useful to review : &lt;a href=&quot;https://github.com/datalayer/hbase/compare/HBASE-6581...HBASE-10336&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/datalayer/hbase/compare/HBASE-6581...HBASE-10336&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14003279" author="eric@apache.org" created="Tue, 20 May 2014 13:56:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tedyu@apache.org&quot;&gt;Ted Yu&lt;/a&gt; The github push contains the move of GenericTestUtils and TimedOutTestsListener you proposed. Any other comment?&lt;/p&gt;</comment>
                            <comment id="14003313" author="yuzhihong@gmail.com" created="Tue, 20 May 2014 14:02:43 +0000"  >&lt;p&gt;@Eric:&lt;br/&gt;
You can create review request using the file I attached.&lt;br/&gt;
The creator of review request is able to upload new patches onto the same review request. That was why I didn&apos;t post the request I created.&lt;/p&gt;</comment>
                            <comment id="14003552" author="hadoopqa" created="Tue, 20 May 2014 16:05:26 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12645625/10336-v10.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12645625/10336-v10.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12645625&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 69 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javac&lt;/font&gt;.  The applied patch generated 45 javac compiler warnings (more than the trunk&apos;s current 4 warnings).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 2 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +    String serverURL = &quot;http://&quot; + NetUtils.getHostPortString(myServer.getConnectorAddress(0)) + &quot;/&quot;;&lt;br/&gt;
+    Mockito.verify(response).sendError(Mockito.eq(HttpServletResponse.SC_UNAUTHORIZED), Mockito.anyString());&lt;br/&gt;
+    Mockito.verify(response).sendError(Mockito.eq(HttpServletResponse.SC_UNAUTHORIZED), Mockito.anyString());&lt;br/&gt;
+  public static HttpServer createServer(String webapp, Configuration conf, AccessControlList adminsAcl)&lt;br/&gt;
+    return localServerBuilder(webapp).setFindPort(true).setConf(conf).setPathSpec(pathSpecs).build();&lt;br/&gt;
+      assertTrue( e.getMessage().contains(&quot;Problem in starting http server. Server handlers failed&quot;));&lt;br/&gt;
+        .append(isAlive() ? STATE_DESCRIPTION_ALIVE : STATE_DESCRIPTION_NOT_LIVE).append(&quot;), listening at:&quot;);&lt;br/&gt;
+  private void writeAttribute(JsonGenerator jg, ObjectName oname, MBeanAttributeInfo attr) throws IOException {&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.procedure.TestZKProcedure&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestHCM&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9549//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9549//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9549//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9549//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9549//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9549//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9549//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9549//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9549//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9549//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9549//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9549//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9549//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9549//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9549//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9549//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9549//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9549//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9549//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9549//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9549//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9549//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14003619" author="eric@apache.org" created="Tue, 20 May 2014 16:48:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tedyu@apache.org&quot;&gt;Ted Yu&lt;/a&gt; Thx for the support. Review is not published on &lt;a href=&quot;https://reviews.apache.org/r/21705/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/21705/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14009935" author="eric@apache.org" created="Tue, 27 May 2014 17:31:33 +0000"  >&lt;p&gt;Thx &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu&quot; class=&quot;user-hover&quot; rel=&quot;tedyu&quot;&gt;Ted Yu&lt;/a&gt; for your review.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;,... any other comment on it?&lt;/p&gt;</comment>
                            <comment id="14009936" author="eric@apache.org" created="Tue, 27 May 2014 17:33:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;... &quot;it&quot; being &lt;a href=&quot;https://reviews.apache.org/r/21705/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/21705/&lt;/a&gt;&lt;br/&gt;
thx, Eric&lt;/p&gt;</comment>
                            <comment id="14012636" author="eric@apache.org" created="Thu, 29 May 2014 18:05:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tedyu@apache.org&quot;&gt;Ted Yu&lt;/a&gt; I rebased on latest master and updated further to your comments on &lt;a href=&quot;https://reviews.apache.org/r/21705/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/21705/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I can not recreate the SVN format as we are now on GIT. When I try to submit the patch via the review web site selecting hbase-git, I get no errors, but no changes is displayed.&lt;/p&gt;

&lt;p&gt;I have attached my latest patch here &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10336&quot; title=&quot;Remove deprecated usage of Hadoop HttpServer in InfoServer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10336&quot;&gt;&lt;del&gt;HBASE-10336&lt;/del&gt;&lt;/a&gt;-after-first-review.patch (may be you can double check what&apos;s happening with &lt;a href=&quot;https://reviews.apache.org&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="14012680" author="hadoopqa" created="Thu, 29 May 2014 18:37:52 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12647405/HBASE-10336-after-first-review.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12647405/HBASE-10336-after-first-review.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12647405&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 48 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javac&lt;/font&gt;.  The applied patch generated 45 javac compiler warnings (more than the trunk&apos;s current 4 warnings).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +        .append(isAlive() ? STATE_DESCRIPTION_ALIVE : STATE_DESCRIPTION_NOT_LIVE).append(&quot;), listening at:&quot;);&lt;br/&gt;
+  private void writeAttribute(JsonGenerator jg, ObjectName oname, MBeanAttributeInfo attr) throws IOException {&lt;br/&gt;
+  public static HttpServer createServer(String webapp, Configuration conf, AccessControlList adminsAcl)&lt;br/&gt;
+    return localServerBuilder(webapp).setFindPort(true).setConf(conf).setPathSpec(pathSpecs).build();&lt;br/&gt;
+    String serverURL = &quot;http://&quot; + NetUtils.getHostPortString(myServer.getConnectorAddress(0)) + &quot;/&quot;;&lt;br/&gt;
+    Mockito.verify(response).sendError(Mockito.eq(HttpServletResponse.SC_UNAUTHORIZED), Mockito.anyString());&lt;br/&gt;
+    Mockito.verify(response).sendError(Mockito.eq(HttpServletResponse.SC_UNAUTHORIZED), Mockito.anyString());&lt;br/&gt;
+      assertTrue( e.getMessage().contains(&quot;Problem in starting http server. Server handlers failed&quot;));&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn site goal to fail.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.io.crypto.aes.TestAES&lt;br/&gt;
                  org.apache.hadoop.hbase.TestHBaseConfiguration&lt;br/&gt;
                  org.apache.hadoop.hbase.TestClassFinder&lt;br/&gt;
                  org.apache.hadoop.hbase.util.TestCoprocessorClassLoader&lt;br/&gt;
                  org.apache.hadoop.hbase.io.crypto.TestKeyProvider&lt;br/&gt;
                  org.apache.hadoop.hbase.io.crypto.TestCipherProvider&lt;br/&gt;
                  org.apache.hadoop.hbase.io.crypto.TestEncryption&lt;br/&gt;
                  org.apache.hadoop.hbase.util.TestDynamicClassLoader&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9639//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9639//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9639//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9639//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9639//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9639//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9639//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9639//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9639//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9639//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9639//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9639//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9639//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9639//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9639//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9639//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9639//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9639//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9639//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9639//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9639//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9639//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14013252" author="yuzhihong@gmail.com" created="Fri, 30 May 2014 03:24:13 +0000"  >&lt;p&gt;In hbase-common/src/main/resources/hbase-default.xml:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &amp;lt;/property&amp;gt;
+  &amp;lt;property&amp;gt;
 &amp;lt;/configuration&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The last &apos;&amp;lt;property&amp;gt;&apos; caused parsing error.&lt;/p&gt;</comment>
                            <comment id="14013396" author="eric@apache.org" created="Fri, 30 May 2014 07:49:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tedyu@apache.org&quot;&gt;Ted Yu&lt;/a&gt; My bad... &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10336&quot; title=&quot;Remove deprecated usage of Hadoop HttpServer in InfoServer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10336&quot;&gt;&lt;del&gt;HBASE-10336&lt;/del&gt;&lt;/a&gt;-after-first-review-2.patch is now OK.&lt;/p&gt;</comment>
                            <comment id="14013455" author="hadoopqa" created="Fri, 30 May 2014 09:29:35 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12647553/HBASE-10336-after-first-review-2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12647553/HBASE-10336-after-first-review-2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12647553&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 48 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javac&lt;/font&gt;.  The applied patch generated 45 javac compiler warnings (more than the trunk&apos;s current 4 warnings).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +        .append(isAlive() ? STATE_DESCRIPTION_ALIVE : STATE_DESCRIPTION_NOT_LIVE).append(&quot;), listening at:&quot;);&lt;br/&gt;
+  private void writeAttribute(JsonGenerator jg, ObjectName oname, MBeanAttributeInfo attr) throws IOException {&lt;br/&gt;
+  public static HttpServer createServer(String webapp, Configuration conf, AccessControlList adminsAcl)&lt;br/&gt;
+    return localServerBuilder(webapp).setFindPort(true).setConf(conf).setPathSpec(pathSpecs).build();&lt;br/&gt;
+    String serverURL = &quot;http://&quot; + NetUtils.getHostPortString(myServer.getConnectorAddress(0)) + &quot;/&quot;;&lt;br/&gt;
+    Mockito.verify(response).sendError(Mockito.eq(HttpServletResponse.SC_UNAUTHORIZED), Mockito.anyString());&lt;br/&gt;
+    Mockito.verify(response).sendError(Mockito.eq(HttpServletResponse.SC_UNAUTHORIZED), Mockito.anyString());&lt;br/&gt;
+      assertTrue( e.getMessage().contains(&quot;Problem in starting http server. Server handlers failed&quot;));&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9645//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9645//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9645//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9645//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9645//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9645//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9645//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9645//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9645//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9645//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9645//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9645//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9645//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9645//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9645//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9645//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9645//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9645//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9645//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9645//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9645//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9645//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14013721" author="yuzhihong@gmail.com" created="Fri, 30 May 2014 14:54:10 +0000"  >&lt;p&gt;From &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9645//artifact/patchprocess/patchJavacWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9645//artifact/patchprocess/patchJavacWarnings.txt&lt;/a&gt; :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[WARNING] /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-server/src/test/java/org/apache/hadoop/hbase/http/ssl/KeyStoreTestUtil.java:[99,39] sun.security.x509.AlgorithmId is Sun proprietary API and may be removed in a &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; release
[WARNING] /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase-server/src/test/java/org/apache/hadoop/hbase/http/ssl/KeyStoreTestUtil.java:[100,13] sun.security.x509.X509CertInfo is Sun proprietary API and may be removed in a &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; release
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Can you suppress the above warnings ?&lt;/p&gt;</comment>
                            <comment id="14013868" author="eric@apache.org" created="Fri, 30 May 2014 16:06:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tedyu@apache.org&quot;&gt;Ted Yu&lt;/a&gt; I have removed the warning reading a self-signed certificate from a file, but got now an java.security.SignatureException: Signature length not correct: got 128 but was expecting 256.&lt;br/&gt;
Are the warning stoppers, they are only in the tests?&lt;/p&gt;</comment>
                            <comment id="14014388" author="yuzhihong@gmail.com" created="Fri, 30 May 2014 23:52:23 +0000"  >&lt;p&gt;The above warnings on x509 are not stoppers.&lt;br/&gt;
You can address review comments first.&lt;/p&gt;</comment>
                            <comment id="14014544" author="eric@apache.org" created="Sat, 31 May 2014 06:34:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu&quot; class=&quot;user-hover&quot; rel=&quot;tedyu&quot;&gt;Ted Yu&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=saint.ack%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;saint.ack@gmail.com&quot;&gt;Stack&lt;/a&gt;&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;you comments have been commented.&lt;/li&gt;
	&lt;li&gt;I have implemented your comments (except the x509 warning which I propose to solve later on, with all the jazz on upgrading jetty...) - the diff are on &lt;a href=&quot;https://reviews.apache.org/r/21705/diff/1-2&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/21705/diff/1-2&lt;/a&gt;  (I had to make an old-scholl diff, applying the git patch on the 1 week-old trunk, and regenerating via svn diff to be compatible with the review based on svn)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;(The review for hbase-git ddidn&apos;t work with the patch generated with git - normal?)&lt;/p&gt;</comment>
                            <comment id="14015628" author="stack" created="Mon, 2 Jun 2014 17:42:15 +0000"  >&lt;p&gt;Looking at raw patch because rb not working for me:&lt;/p&gt;

&lt;p&gt;Why a new &apos;conf&apos; package?&lt;/p&gt;

&lt;p&gt;conf/ServerConfigurationKeys.java&lt;/p&gt;

&lt;p&gt;Are the keys used by master and regionserver?  You don&apos;t want to put them in the Server interface or in HConstants?  Or in the InfoServer or in &apos;http&apos; package since the constants seem to pertain there?&lt;/p&gt;

&lt;p&gt;I asked some questions on rb like how much of this is copy and paste from hadoop..... and do we have to pull it all in?  E.g. HtmlQuoting.&lt;/p&gt;

&lt;p&gt;I think InfoServer only exists because most of HttpServer was private.  It could probably go away right?  (Another JIRA).&lt;/p&gt;

&lt;p&gt;I took a quick look.  I&apos;d be up for taking in this patch even if it does too much as long as it works and then working on purging stuff after it is in.  This is a difficult task doing this kind of work.&lt;/p&gt;

&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=echarles&quot; class=&quot;user-hover&quot; rel=&quot;echarles&quot;&gt;Eric Charles&lt;/a&gt;&lt;/p&gt;


</comment>
                            <comment id="14015677" author="eric@apache.org" created="Mon, 2 Jun 2014 18:12:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=saint.ack%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;saint.ack@gmail.com&quot;&gt;Stack&lt;/a&gt; Tr&lt;/p&gt;</comment>
                            <comment id="14015685" author="eric@apache.org" created="Mon, 2 Jun 2014 18:17:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; Trying to answer your points taking into account my last patch uploaded on rb (also answered you comments on rb):&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;no more conf package and interface instead of class - yep, we could put then in server interface or hconstants - just wanted to mimick what hadoop does and btw, a dedicated interface could make sense for http.&lt;/li&gt;
	&lt;li&gt;95% copy/paste from hadoop - pulled everyting related to http - Yes, we could have left HtmlQuoting... in Hadoop, but this could lead later on to issues (changes that we don&apos;t want, more difficult to inject changes...)&lt;/li&gt;
	&lt;li&gt;hierarchy of InfoServer/HttpServer could be reviewed indeed.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The patch works.&lt;/p&gt;

&lt;p&gt;Thx, Eric&lt;/p&gt;</comment>
                            <comment id="14015696" author="eric@apache.org" created="Mon, 2 Jun 2014 18:24:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; to avoid confusion, the latest patch with all @tedyu and yours comments has been uploaded on rb, but not on this jira. If you think we should commit this, I will double check everything, clean a few unneeded spaces and upload the final patch here.&lt;/p&gt;</comment>
                            <comment id="14015706" author="stack" created="Mon, 2 Jun 2014 18:31:06 +0000"  >&lt;p&gt;The patch on rb is kinda messed up.  Please attach latest here and I&apos;ll give it another go over....  I&apos;m thinking commit if it works then in subsequent issues do purge of uneeded classes.  I was going to suggest you put your patch philosophy &amp;#8211; i.e. clean cut of the cord up in the rlease notes &amp;#8211; but it is there already.....&lt;/p&gt;</comment>
                            <comment id="14028244" author="eric@apache.org" created="Wed, 11 Jun 2014 19:10:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tedyu@apache.org&quot;&gt;Ted Yu&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10336&quot; title=&quot;Remove deprecated usage of Hadoop HttpServer in InfoServer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10336&quot;&gt;&lt;del&gt;HBASE-10336&lt;/del&gt;&lt;/a&gt;-11.patch implements your comments. It is working here.&lt;/p&gt;</comment>
                            <comment id="14028279" author="stack" created="Wed, 11 Jun 2014 19:33:13 +0000"  >&lt;p&gt;+1 I tried it.  It seems to be working.  Let hadoopqa run.  See what it says.  If it comes back good enough I&apos;ll commit.  You the man &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=echarles&quot; class=&quot;user-hover&quot; rel=&quot;echarles&quot;&gt;Eric Charles&lt;/a&gt;  I suppose there will be followup issues?  No need of an InfoServer if HttpServer is in our context?  I wonder what else can be removed?&lt;/p&gt;</comment>
                            <comment id="14028309" author="eric@apache.org" created="Wed, 11 Jun 2014 19:51:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; Sure, there will be follow-up to clean up and e.g. merge InfoServer with HttpServer. All located in http package. IMHO what is now is needed. The good thing is that we can make it evolve (new jetty version...)&lt;/p&gt;</comment>
                            <comment id="14028373" author="hadoopqa" created="Wed, 11 Jun 2014 20:48:52 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12649852/HBASE-10336-11.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12649852/HBASE-10336-11.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12649852&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 48 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javac&lt;/font&gt;.  The applied patch generated 45 javac compiler warnings (more than the trunk&apos;s current 4 warnings).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +        .append(isAlive() ? STATE_DESCRIPTION_ALIVE : STATE_DESCRIPTION_NOT_LIVE).append(&quot;), listening at:&quot;);&lt;br/&gt;
+  private void writeAttribute(JsonGenerator jg, ObjectName oname, MBeanAttributeInfo attr) throws IOException {&lt;br/&gt;
+  public static HttpServer createServer(String webapp, Configuration conf, AccessControlList adminsAcl)&lt;br/&gt;
+    return localServerBuilder(webapp).setFindPort(true).setConf(conf).setPathSpec(pathSpecs).build();&lt;br/&gt;
+    String serverURL = &quot;http://&quot; + NetUtils.getHostPortString(myServer.getConnectorAddress(0)) + &quot;/&quot;;&lt;br/&gt;
+    Mockito.verify(response).sendError(Mockito.eq(HttpServletResponse.SC_UNAUTHORIZED), Mockito.anyString());&lt;br/&gt;
+    Mockito.verify(response).sendError(Mockito.eq(HttpServletResponse.SC_UNAUTHORIZED), Mockito.anyString());&lt;br/&gt;
+      assertTrue( e.getMessage().contains(&quot;Problem in starting http server. Server handlers failed&quot;));&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9746//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9746//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9746//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9746//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9746//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9746//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9746//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9746//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9746//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9746//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9746//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9746//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9746//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9746//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9746//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9746//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9746//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9746//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9746//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9746//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9746//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9746//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14028385" author="stack" created="Wed, 11 Jun 2014 20:57:03 +0000"  >&lt;p&gt;Committed to master.  Thanks for persevering &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=echarles&quot; class=&quot;user-hover&quot; rel=&quot;echarles&quot;&gt;Eric Charles&lt;/a&gt;  Nice one.  When you get a chance please file followon issues to do a bit of cleanup removing stuff we don&apos;t need.  Thanks boss.&lt;/p&gt;</comment>
                            <comment id="14028594" author="hudson" created="Wed, 11 Jun 2014 23:44:40 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-TRUNK #5197 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/5197/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/5197/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10336&quot; title=&quot;Remove deprecated usage of Hadoop HttpServer in InfoServer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10336&quot;&gt;&lt;del&gt;HBASE-10336&lt;/del&gt;&lt;/a&gt; Remove deprecated usage of Hadoop HttpServer in InfoServer (Eric Charles) (stack: rev 26096f363e8645ec61982ef26073e3172f1ce91c)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/http/TestServletFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/http/HttpServerFunctionalTest.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/http/InfoServer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/resources/webapps/test/testjsp.jsp&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/http/jmx/package-info.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/http/TestSSLHttpServer.java&lt;/li&gt;
	&lt;li&gt;hbase-thrift/src/main/java/org/apache/hadoop/hbase/thrift2/ThriftServer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/http/HttpConfig.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/http/TestHtmlQuoting.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/GenericTestUtils.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/http/jmx/TestJMXJsonServlet.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/http/TestGlobalFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/resources/hbase-default.xml&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/http/conf/TestConfServlet.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/http/TestHttpRequestLog.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/http/ServerConfigurationKeys.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/http/FilterInitializer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/http/jmx/JMXJsonServlet.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/http/TestHttpRequestLogAppender.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/http/NoCacheFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/http/conf/ConfServlet.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/http/TestHttpServer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/http/package-info.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/http/HttpServer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/http/log/LogLevel.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/http/FilterContainer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/http/log/TestLogLevel.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/http/HtmlQuoting.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/http/AdminAuthorizedServlet.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/resources/webapps/static/test.css&lt;/li&gt;
	&lt;li&gt;hbase-server/pom.xml&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/http/lib/TestStaticUserWebFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/rest/RESTServer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/http/lib/package-info.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/http/lib/StaticUserWebFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/http/HttpRequestLogAppender.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/http/TestPathFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/http/TestHttpServerLifecycle.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/http/HttpRequestLog.java&lt;/li&gt;
	&lt;li&gt;hbase-thrift/src/main/java/org/apache/hadoop/hbase/thrift/ThriftServer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/TimedOutTestsListener.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/http/TestHttpServerWebapps.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/http/ssl/KeyStoreTestUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/http/resource/JerseyResource.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14028800" author="eric@apache.org" created="Thu, 12 Jun 2014 04:01:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; Lovely! &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tedyu@apache.org&quot;&gt;Ted Yu&lt;/a&gt; Thx for your encouragements and reviews.&lt;/p&gt;

&lt;p&gt;I will look what we can remove. I think the http infrastructure is quite well built and flexible like it is. I&apos;ve worked a lot with embedded jetty, and this one sounds like a great base and should be kept and polished, upgrading to latest jetty. But yes, a few class merge is possible. Let me note it and gimme a a few weeks (time is really busy atm).&lt;/p&gt;

&lt;p&gt;Also who knows, there could be some side effects I didn&apos;t identify. I will monitor the mailing list and ask to ping me for anything suspect around http. &lt;/p&gt;</comment>
                            <comment id="14330708" author="enis" created="Sat, 21 Feb 2015 23:30:34 +0000"  >&lt;p&gt;Closing this issue after 0.99.0 release. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12949010">HBASE-15445</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12690351">HADOOP-10253</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12690365">HADOOP-10254</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12690305">HADOOP-10252</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12539981">HBASE-5291</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12690418">HADOOP-10255</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12645625" name="10336-v10.txt" size="250831" author="yuzhihong@gmail.com" created="Mon, 19 May 2014 20:15:23 +0000"/>
                            <attachment id="12622857" name="HBASE-10336-1.patch" size="3816" author="eric@apache.org" created="Tue, 14 Jan 2014 13:21:42 +0000"/>
                            <attachment id="12649852" name="HBASE-10336-11.patch" size="252167" author="eric@apache.org" created="Wed, 11 Jun 2014 19:10:55 +0000"/>
                            <attachment id="12622866" name="HBASE-10336-2.patch" size="5092" author="eric@apache.org" created="Tue, 14 Jan 2014 15:04:39 +0000"/>
                            <attachment id="12623160" name="HBASE-10336-3.patch" size="5238" author="eric@apache.org" created="Wed, 15 Jan 2014 15:46:54 +0000"/>
                            <attachment id="12623430" name="HBASE-10336-4.patch" size="220436" author="eric@apache.org" created="Thu, 16 Jan 2014 18:22:40 +0000"/>
                            <attachment id="12623623" name="HBASE-10336-5.patch" size="254834" author="eric@apache.org" created="Fri, 17 Jan 2014 10:35:50 +0000"/>
                            <attachment id="12624764" name="HBASE-10336-6.patch" size="516915" author="eric@apache.org" created="Thu, 23 Jan 2014 09:41:20 +0000"/>
                            <attachment id="12624767" name="HBASE-10336-7.patch" size="255111" author="eric@apache.org" created="Thu, 23 Jan 2014 09:49:25 +0000"/>
                            <attachment id="12625203" name="HBASE-10336-8.patch" size="256347" author="eric@apache.org" created="Sat, 25 Jan 2014 19:36:18 +0000"/>
                            <attachment id="12643205" name="HBASE-10336-9.patch" size="249509" author="eric@apache.org" created="Sat, 3 May 2014 14:40:42 +0000"/>
                            <attachment id="12647553" name="HBASE-10336-after-first-review-2.patch" size="251615" author="eric@apache.org" created="Fri, 30 May 2014 07:49:33 +0000"/>
                            <attachment id="12647405" name="HBASE-10336-after-first-review.patch" size="251615" author="eric@apache.org" created="Thu, 29 May 2014 18:05:35 +0000"/>
                            <attachment id="12643254" name="HBASE-10569-10.patch" size="255294" author="eric@apache.org" created="Sun, 4 May 2014 06:56:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 14 Jan 2014 17:15:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367751</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1rdzr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368058</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Undo the dependence on Hadoop InfoServer and its servlets by pulling what we need local.  For HBase to work against Hadoop3, we need changes, but Hadoop wants to redo how it does its http servers, so we cut the cord.  See &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-10232&quot; title=&quot;More options to HttpServer Builder&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-10232&quot;&gt;&lt;strike&gt;HADOOP-10232&lt;/strike&gt;&lt;/a&gt;  for more.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>