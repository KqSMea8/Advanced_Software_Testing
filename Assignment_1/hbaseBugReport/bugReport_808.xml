<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:47:42 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-808/HBASE-808.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-808] MAX_VERSIONS not respected.</title>
                <link>https://issues.apache.org/jira/browse/HBASE-808</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Below is a report from the list.  I confirmed playing in shell that indeed we have this problem.  Lets fix for 0.2.1.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Hello.

I made some tests with HBase 0.2.0 (RC2), focused on insertion and
timestamps behaviour. I had some surprising results, and I was wondering &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;
people using hbase already tried such an usage, and what was their
conclusion.

First of all I created a table with the &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; column attributes, using
hbase shell



## TABLE

hbase(main):008:0&amp;gt; describe &apos;proxy-0.2&apos;
{NAME =&amp;gt; &apos;proxy-0.2&apos;, IS_ROOT =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&apos;, IS_META =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&apos;, FAMILIES =&amp;gt;
[{NAME =&amp;gt; &apos;status&apos;, BLOOMFILTER =&amp;gt; &apos;
&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&apos;, IN_MEMORY =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&apos;, LENGTH =&amp;gt; &apos;2147483647&apos;, BLOCKCACHE =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&apos;,
VERSIONS =&amp;gt; &apos;3&apos;, TTL =&amp;gt; &apos;-1&apos;, COM
PRESSION =&amp;gt; &apos;NONE&apos;}, {NAME =&amp;gt; &apos;header&apos;, BLOOMFILTER =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&apos;, IN_MEMORY =&amp;gt;
&apos;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&apos;, LENGTH =&amp;gt; &apos;2147483647&apos;,
BLOCKCACHE =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&apos;, VERSIONS =&amp;gt; &apos;3&apos;, TTL =&amp;gt; &apos;-1&apos;, COMPRESSION =&amp;gt; &apos;NONE&apos;},
{NAME =&amp;gt; &apos;bytes&apos;, BLOOMFILTER =&amp;gt;
&apos;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&apos;, IN_MEMORY =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&apos;, LENGTH =&amp;gt; &apos;2147483647&apos;, BLOCKCACHE =&amp;gt;
&apos;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&apos;, VERSIONS =&amp;gt; &apos;3&apos;, TTL =&amp;gt; &apos;-1&apos;, CO
MPRESSION =&amp;gt; &apos;NONE&apos;}, {NAME =&amp;gt; &apos;info&apos;, BLOOMFILTER =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&apos;, IN_MEMORY =&amp;gt;
&apos;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&apos;, LENGTH =&amp;gt; &apos;2147483647&apos;, B
LOCKCACHE =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&apos;, VERSIONS =&amp;gt; &apos;3&apos;, TTL =&amp;gt; &apos;-1&apos;, COMPRESSION =&amp;gt; &apos;NONE&apos;}]}


Test1

I make a loop that inserts the same row with different values at different
timestamps, arbitrary from 1000 incrementing from 10 to 10. I have a method
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; dumping the row history: it makes a query &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the last version, and
queries &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; past version using the current version timestamp minus 1. Note
that my table object is created once &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; entire program life cycle.


## GLOBAL CODE

	&lt;span class=&quot;code-comment&quot;&gt;// somewhere in constructor
&lt;/span&gt;	t = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HTable(conf, TABLE_NAME);

	/**
	 * Dump reversed history of a HBase row, querying &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; older version
	 * using the max timestamp of all cells -1 until there is no cell returned
	 * @param rowKey
	 */
	&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void dumpRowVersions(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; rowKey) {
		Logger.log.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Versions or row : &quot;&lt;/span&gt;+rowKey);
		&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
			&lt;span class=&quot;code-comment&quot;&gt;// first query. The newest version of the row
&lt;/span&gt;			RowResult rr = t.getRow(rowKey);
			&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; version = 1;
			&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; maxTs;
			
			&lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; {
				maxTs = -1;
				&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; line = &quot;&quot;;
				&lt;span class=&quot;code-comment&quot;&gt;// go through all cells of the row
&lt;/span&gt;				&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Map.Entry en : rr.entrySet()) {
					&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; ts = en.getValue().getTimestamp();
					maxTs = &lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.max(maxTs, ts);
					line += &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;(en.getKey());
					line += &lt;span class=&quot;code-quote&quot;&gt;&quot; =&amp;gt; &quot;&lt;/span&gt; + &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;(en.getValue().getValue());
					line += &lt;span class=&quot;code-quote&quot;&gt;&quot; [&quot;&lt;/span&gt;+ts+&lt;span class=&quot;code-quote&quot;&gt;&quot;], &quot;&lt;/span&gt;;
				}

				&lt;span class=&quot;code-comment&quot;&gt;// remove the last coma and space &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; smarter output
&lt;/span&gt;				&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (line.length() &amp;gt; 0) {
					line = line.substring(0, line.length()-2);
				}

				&lt;span class=&quot;code-comment&quot;&gt;// prefix result with a version counter and the max timestamp 
&lt;/span&gt;				&lt;span class=&quot;code-comment&quot;&gt;// found in the cells
&lt;/span&gt;				line = &lt;span class=&quot;code-quote&quot;&gt;&quot;#&quot;&lt;/span&gt;+version+&lt;span class=&quot;code-quote&quot;&gt;&quot; MXTS[&quot;&lt;/span&gt;+maxTs+&lt;span class=&quot;code-quote&quot;&gt;&quot;] &quot;&lt;/span&gt;+line;
				&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (maxTs != -1) {
					&lt;span class=&quot;code-comment&quot;&gt;// there was resulting cell. Continue iteration
&lt;/span&gt;					Logger.log.info(line);
					
					&lt;span class=&quot;code-comment&quot;&gt;// get previous version
&lt;/span&gt;					version++;
					rr = t.getRow(rowKey, maxTs-1);
				}
			} &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (maxTs != -1);
			
		} &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IOException ex) {
			&lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalStateException(&quot;Cannot fetch history of row
&quot;+rowKey,ex);
		}
	}

## LOOP CODE 

			&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; ts = 1000;
			&lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; {
				&lt;span class=&quot;code-comment&quot;&gt;// insert the testrow with a &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; timestamp
&lt;/span&gt;				BatchUpdate bu = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BatchUpdate(&lt;span class=&quot;code-quote&quot;&gt;&quot;testrow&quot;&lt;/span&gt;, ts);
				bu.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;bytes:&quot;&lt;/span&gt;, (&lt;span class=&quot;code-quote&quot;&gt;&quot;valbytes ts &quot;&lt;/span&gt;+ts).getBytes());
				bu.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;status:&quot;&lt;/span&gt;, (&lt;span class=&quot;code-quote&quot;&gt;&quot;valstat ts&quot;&lt;/span&gt;+ts).getBytes());
				t.commit(bu);
				Logger.log.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;-- Inserted ts &quot;&lt;/span&gt;+ts);
				
				&lt;span class=&quot;code-comment&quot;&gt;// dump row history
&lt;/span&gt;				&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(70);
				dumpRowVersions(&lt;span class=&quot;code-quote&quot;&gt;&quot;testrow&quot;&lt;/span&gt;);
				
				&lt;span class=&quot;code-comment&quot;&gt;// next iteration in two seconds
&lt;/span&gt;				ts += 10;
				&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(2000);
			} &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);

## OUTPUT

&amp;gt; &amp;gt; Connecting to hbase master...
 &amp;gt; -- Inserted ts 1000
 &amp;gt; Versions or row : testrow
 &amp;gt; #1 MXTS[1000] bytes: =&amp;gt; valbytes ts 1000 [1000], status: =&amp;gt; valstat
ts1000 [1000]
 &amp;gt; -- Inserted ts 1010
 &amp;gt; Versions or row : testrow
 &amp;gt; #1 MXTS[1010] bytes: =&amp;gt; valbytes ts 1010 [1010], status: =&amp;gt; valstat
ts1010 [1010]
 &amp;gt; #2 MXTS[1000] bytes: =&amp;gt; valbytes ts 1000 [1000], status: =&amp;gt; valstat
ts1000 [1000]
 &amp;gt; -- Inserted ts 1020
 &amp;gt; Versions or row : testrow
 &amp;gt; #1 MXTS[1020] bytes: =&amp;gt; valbytes ts 1020 [1020], status: =&amp;gt; valstat
ts1020 [1020]
 &amp;gt; #2 MXTS[1010] bytes: =&amp;gt; valbytes ts 1010 [1010], status: =&amp;gt; valstat
ts1010 [1010]
 &amp;gt; #3 MXTS[1000] bytes: =&amp;gt; valbytes ts 1000 [1000], status: =&amp;gt; valstat
ts1000 [1000]
 &amp;gt; -- Inserted ts 1030
 &amp;gt; Versions or row : testrow
 &amp;gt; #1 MXTS[1030] bytes: =&amp;gt; valbytes ts 1030 [1030], status: =&amp;gt; valstat
ts1030 [1030]
 &amp;gt; #2 MXTS[1020] bytes: =&amp;gt; valbytes ts 1020 [1020], status: =&amp;gt; valstat
ts1020 [1020]
 &amp;gt; #3 MXTS[1010] bytes: =&amp;gt; valbytes ts 1010 [1010], status: =&amp;gt; valstat
ts1010 [1010]
 &amp;gt; #4 MXTS[1000] bytes: =&amp;gt; valbytes ts 1000 [1000], status: =&amp;gt; valstat
ts1000 [1000]
 &amp;gt; -- Inserted ts 1040
 &amp;gt; Versions or row : testrow
 &amp;gt; #1 MXTS[1040] bytes: =&amp;gt; valbytes ts 1040 [1040], status: =&amp;gt; valstat
ts1040 [1040]
 &amp;gt; #2 MXTS[1030] bytes: =&amp;gt; valbytes ts 1030 [1030], status: =&amp;gt; valstat
ts1030 [1030]
 &amp;gt; #3 MXTS[1020] bytes: =&amp;gt; valbytes ts 1020 [1020], status: =&amp;gt; valstat
ts1020 [1020]
 &amp;gt; #4 MXTS[1010] bytes: =&amp;gt; valbytes ts 1010 [1010], status: =&amp;gt; valstat
ts1010 [1010]
 &amp;gt; #5 MXTS[1000] bytes: =&amp;gt; valbytes ts 1000 [1000], status: =&amp;gt; valstat
ts1000 [1000]
 &amp;gt; -- Inserted ts 1050
 &amp;gt; Versions or row : testrow
 &amp;gt; #1 MXTS[1050] bytes: =&amp;gt; valbytes ts 1050 [1050], status: =&amp;gt; valstat
ts1050 [1050]
 &amp;gt; #2 MXTS[1040] bytes: =&amp;gt; valbytes ts 1040 [1040], status: =&amp;gt; valstat
ts1040 [1040]
 &amp;gt; #3 MXTS[1030] bytes: =&amp;gt; valbytes ts 1030 [1030], status: =&amp;gt; valstat
ts1030 [1030]
 &amp;gt; #4 MXTS[1020] bytes: =&amp;gt; valbytes ts 1020 [1020], status: =&amp;gt; valstat
ts1020 [1020]
 &amp;gt; #5 MXTS[1010] bytes: =&amp;gt; valbytes ts 1010 [1010], status: =&amp;gt; valstat
ts1010 [1010]
 &amp;gt; #6 MXTS[1000] bytes: =&amp;gt; valbytes ts 1000 [1000], status: =&amp;gt; valstat
ts1000 [1000]
 &amp;gt; -- Inserted ts 1060
 &amp;gt; Versions or row : testrow
 &amp;gt; #1 MXTS[1060] bytes: =&amp;gt; valbytes ts 1060 [1060], status: =&amp;gt; valstat
ts1060 [1060]
 &amp;gt; #2 MXTS[1050] bytes: =&amp;gt; valbytes ts 1050 [1050], status: =&amp;gt; valstat
ts1050 [1050]
 &amp;gt; #3 MXTS[1040] bytes: =&amp;gt; valbytes ts 1040 [1040], status: =&amp;gt; valstat
ts1040 [1040]
 &amp;gt; #4 MXTS[1030] bytes: =&amp;gt; valbytes ts 1030 [1030], status: =&amp;gt; valstat
ts1030 [1030]
 &amp;gt; #5 MXTS[1020] bytes: =&amp;gt; valbytes ts 1020 [1020], status: =&amp;gt; valstat
ts1020 [1020]
 &amp;gt; #6 MXTS[1010] bytes: =&amp;gt; valbytes ts 1010 [1010], status: =&amp;gt; valstat
ts1010 [1010]
 &amp;gt; #7 MXTS[1000] bytes: =&amp;gt; valbytes ts 1000 [1000], status: =&amp;gt; valstat
ts1000 [1000]
 &amp;gt; -- Inserted ts 1070
 &amp;gt; Versions or row : testrow
 &amp;gt; #1 MXTS[1070] bytes: =&amp;gt; valbytes ts 1070 [1070], status: =&amp;gt; valstat
ts1070 [1070]
 &amp;gt; #2 MXTS[1060] bytes: =&amp;gt; valbytes ts 1060 [1060], status: =&amp;gt; valstat
ts1060 [1060]
 &amp;gt; #3 MXTS[1050] bytes: =&amp;gt; valbytes ts 1050 [1050], status: =&amp;gt; valstat
ts1050 [1050]
 &amp;gt; #4 MXTS[1040] bytes: =&amp;gt; valbytes ts 1040 [1040], status: =&amp;gt; valstat
ts1040 [1040]
 &amp;gt; #5 MXTS[1030] bytes: =&amp;gt; valbytes ts 1030 [1030], status: =&amp;gt; valstat
ts1030 [1030]
 &amp;gt; #6 MXTS[1020] bytes: =&amp;gt; valbytes ts 1020 [1020], status: =&amp;gt; valstat
ts1020 [1020]
 &amp;gt; #7 MXTS[1010] bytes: =&amp;gt; valbytes ts 1010 [1010], status: =&amp;gt; valstat
ts1010 [1010]
 &amp;gt; #8 MXTS[1000] bytes: =&amp;gt; valbytes ts 1000 [1000], status: =&amp;gt; valstat
ts1000 [1000]
 &amp;gt; -- Inserted ts 1080
 &amp;gt; Versions or row : testrow
 &amp;gt; #1 MXTS[1080] bytes: =&amp;gt; valbytes ts 1080 [1080], status: =&amp;gt; valstat
ts1080 [1080]
 &amp;gt; #2 MXTS[1070] bytes: =&amp;gt; valbytes ts 1070 [1070], status: =&amp;gt; valstat
ts1070 [1070]
 &amp;gt; #3 MXTS[1060] bytes: =&amp;gt; valbytes ts 1060 [1060], status: =&amp;gt; valstat
ts1060 [1060]
 &amp;gt; #4 MXTS[1050] bytes: =&amp;gt; valbytes ts 1050 [1050], status: =&amp;gt; valstat
ts1050 [1050]
 &amp;gt; #5 MXTS[1040] bytes: =&amp;gt; valbytes ts 1040 [1040], status: =&amp;gt; valstat
ts1040 [1040]
 &amp;gt; #6 MXTS[1030] bytes: =&amp;gt; valbytes ts 1030 [1030], status: =&amp;gt; valstat
ts1030 [1030]
 &amp;gt; #7 MXTS[1020] bytes: =&amp;gt; valbytes ts 1020 [1020], status: =&amp;gt; valstat
ts1020 [1020]
 &amp;gt; #8 MXTS[1010] bytes: =&amp;gt; valbytes ts 1010 [1010], status: =&amp;gt; valstat
ts1010 [1010]
 &amp;gt; #9 MXTS[1000] bytes: =&amp;gt; valbytes ts 1000 [1000], status: =&amp;gt; valstat
ts1000 [1000]
 &amp;gt; -- Inserted ts 1090
 &amp;gt; Versions or row : testrow
 &amp;gt; #1 MXTS[1090] bytes: =&amp;gt; valbytes ts 1090 [1090], status: =&amp;gt; valstat
ts1090 [1090]
 &amp;gt; #2 MXTS[1080] bytes: =&amp;gt; valbytes ts 1080 [1080], status: =&amp;gt; valstat
ts1080 [1080]
 &amp;gt; #3 MXTS[1070] bytes: =&amp;gt; valbytes ts 1070 [1070], status: =&amp;gt; valstat
ts1070 [1070]
 &amp;gt; #4 MXTS[1060] bytes: =&amp;gt; valbytes ts 1060 [1060], status: =&amp;gt; valstat
ts1060 [1060]
 &amp;gt; #5 MXTS[1050] bytes: =&amp;gt; valbytes ts 1050 [1050], status: =&amp;gt; valstat
ts1050 [1050]
 &amp;gt; #6 MXTS[1040] bytes: =&amp;gt; valbytes ts 1040 [1040], status: =&amp;gt; valstat
ts1040 [1040]
 &amp;gt; #7 MXTS[1030] bytes: =&amp;gt; valbytes ts 1030 [1030], status: =&amp;gt; valstat
ts1030 [1030]
 &amp;gt; #8 MXTS[1020] bytes: =&amp;gt; valbytes ts 1020 [1020], status: =&amp;gt; valstat
ts1020 [1020]
 &amp;gt; #9 MXTS[1010] bytes: =&amp;gt; valbytes ts 1010 [1010], status: =&amp;gt; valstat
ts1010 [1010]
 &amp;gt; #10 MXTS[1000] bytes: =&amp;gt; valbytes ts 1000 [1000], status: =&amp;gt; valstat
ts1000 [1000]
 &amp;gt; -- Inserted ts 1100
 &amp;gt; Versions or row : testrow
 &amp;gt; #1 MXTS[1100] bytes: =&amp;gt; valbytes ts 1100 [1100], status: =&amp;gt; valstat
ts1100 [1100]
 &amp;gt; #2 MXTS[1090] bytes: =&amp;gt; valbytes ts 1090 [1090], status: =&amp;gt; valstat
ts1090 [1090]
 &amp;gt; #3 MXTS[1080] bytes: =&amp;gt; valbytes ts 1080 [1080], status: =&amp;gt; valstat
ts1080 [1080]
 &amp;gt; #4 MXTS[1070] bytes: =&amp;gt; valbytes ts 1070 [1070], status: =&amp;gt; valstat
ts1070 [1070]
 &amp;gt; #5 MXTS[1060] bytes: =&amp;gt; valbytes ts 1060 [1060], status: =&amp;gt; valstat
ts1060 [1060]
 &amp;gt; #6 MXTS[1050] bytes: =&amp;gt; valbytes ts 1050 [1050], status: =&amp;gt; valstat
ts1050 [1050]
 &amp;gt; #7 MXTS[1040] bytes: =&amp;gt; valbytes ts 1040 [1040], status: =&amp;gt; valstat
ts1040 [1040]
 &amp;gt; #8 MXTS[1030] bytes: =&amp;gt; valbytes ts 1030 [1030], status: =&amp;gt; valstat
ts1030 [1030]
 &amp;gt; #9 MXTS[1020] bytes: =&amp;gt; valbytes ts 1020 [1020], status: =&amp;gt; valstat
ts1020 [1020]
 &amp;gt; #10 MXTS[1010] bytes: =&amp;gt; valbytes ts 1010 [1010], status: =&amp;gt; valstat
ts1010 [1010]
 &amp;gt; #11 MXTS[1000] bytes: =&amp;gt; valbytes ts 1000 [1000], status: =&amp;gt; valstat
ts1000 [1000]


Despite the VERSIONS parameter of the columns (3) it seems that all versions
are stored. 

Question: is there some garbage collector process that removes the old
versions ? &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; yes, when does it take place ?

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12402040">HBASE-808</key>
            <summary>MAX_VERSIONS not respected.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Aug 2008 22:37:25 +0000</created>
                <updated>Sat, 13 Sep 2008 23:22:44 +0000</updated>
                            <resolved>Wed, 13 Aug 2008 04:17:41 +0000</resolved>
                                                    <fixVersion>0.2.1</fixVersion>
                    <fixVersion>0.18.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12621104" author="stack" created="Sat, 9 Aug 2008 00:41:08 +0000"  >&lt;p&gt;For sure, this stuff is broke.  The Memcache handling does not pay attention to column family/store MAX_VERSIONS.&lt;/p&gt;</comment>
                            <comment id="12621544" author="jdcryans" created="Mon, 11 Aug 2008 18:40:57 +0000"  >&lt;p&gt;This patch fixes both &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-808&quot; title=&quot;MAX_VERSIONS not respected.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-808&quot;&gt;&lt;del&gt;HBASE-808&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-809&quot; title=&quot;Deletall doesn&amp;#39;t and inserts after delete don&amp;#39;t work as expected.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-809&quot;&gt;&lt;del&gt;HBASE-809&lt;/del&gt;&lt;/a&gt;. I worked extensively with stack on this one. It fixes a hole that we didn&apos;t check if there were deletes in snapshots. Also adds a new test based on Jean-Adrien testing and checks in Memcache to make sure we honor MAX_VERSIONS.&lt;/p&gt;</comment>
                            <comment id="12621955" author="stack" created="Tue, 12 Aug 2008 20:27:55 +0000"  >&lt;p&gt;Making this a blocker on 0.2.1 and 0.3.0. Reviewed patch and it looks good.  Weird we haven&apos;t run into this issue before.  Hopefully Jean-Adrien tries this patch and reports back +/-1&lt;/p&gt;</comment>
                            <comment id="12622085" author="stack" created="Wed, 13 Aug 2008 04:17:41 +0000"  >&lt;p&gt;Committed on branch and trunk.  See if helps with hbase-826.  Thanks for patch J-D.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12387976" name="hbase-808-809-v1.patch" size="33086" author="jdcryans" created="Mon, 11 Aug 2008 18:40:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 11 Aug 2008 18:40:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25408</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 19 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h9kf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98812</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>