<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:56:48 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-14821/HBASE-14821.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-14821] CopyTable should allow overriding more config properties for peer cluster</title>
                <link>https://issues.apache.org/jira/browse/HBASE-14821</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;When using CopyTable across two separate clusters, you can specify the ZK quorum for the destination cluster, but not much else in configuration overrides.  This can be a problem when the cluster configurations differ, such as when using security with different configurations for server principals.&lt;/p&gt;

&lt;p&gt;We should provide a general way to override configuration properties for the peer / destination cluster.  One option would be to allow use of a prefix for command line properties (&quot;peer.property.&quot;).  Properties matching this prefix will be stripped and merged to the peer configuration.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12913471">HBASE-14821</key>
            <summary>CopyTable should allow overriding more config properties for peer cluster</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ghelmling">Gary Helmling</assignee>
                                    <reporter username="ghelmling">Gary Helmling</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Nov 2015 21:57:14 +0000</created>
                <updated>Wed, 25 Nov 2015 02:27:32 +0000</updated>
                            <resolved>Tue, 24 Nov 2015 20:29:35 +0000</resolved>
                                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>1.2.0</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                                    <component>mapreduce</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="15018711" author="ghelmling" created="Fri, 20 Nov 2015 20:21:11 +0000"  >&lt;p&gt;This patch adds support for overriding arbitrary config properties on the destination cluster side when obtaining a delegation token for the destination clsuter, and when initializing TableOutputFormat.  I&apos;ve been testing this to override the kerberos principal names for a destination cluster, but it could be used for other config properties as well.&lt;/p&gt;

&lt;p&gt;This adds:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;a static &lt;tt&gt;HBaseConfiguration.subset(Configuration,String)&lt;/tt&gt; method to extra the set of configuration properties matching a key prefix, with the prefix removed from the keys in the returned subset.&lt;/li&gt;
	&lt;li&gt;test for the above&lt;/li&gt;
	&lt;li&gt;use of the subset method in &lt;tt&gt;TableMapReduceUtil.initCredentials()&lt;/tt&gt; and &lt;tt&gt;TableOutputFormat.setConf()&lt;/tt&gt;, using a prefix of &quot;hbase.mapred.output.&quot;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This allows jobs using &lt;tt&gt;TableOutputFormat&lt;/tt&gt; to use a different set of configuration values on the output side than those used on the input side.&lt;/p&gt;

&lt;p&gt;There are a few caveats with the current implementation that are less than ideal:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;the prefix &quot;hbase.mapred.output.&quot; makes for verbose keys (ie. &quot;hbase.mapred.output.hbase.regionserver.kerberos.principal&quot;), but it&apos;s consistent with other property keys used by TableOutputFormat.&lt;/li&gt;
	&lt;li&gt;There are now two ways of specifying values for the existing TOF keys matching this prefix &amp;#8211; the current short version (hbase.mapred.output.quorum) and the new long version (hbase.mapred.output.hbase.zookeeper.quorum). This is duplicative, but I don&apos;t see any reason to remove the short versions since it would break back compatibility and docs.&lt;/li&gt;
	&lt;li&gt;This also means that the short versions get copied to the subset-ed config with odd names (&quot;quorum&quot;, &quot;quorum.port&quot;, &quot;rs.class&quot;, &quot;rs.impl&quot;), though I don&apos;t think this harms anything.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I did &lt;em&gt;not&lt;/em&gt; apply these changes to the o.a.h.h.mapred versions of TableMapReduceUtil and TableOutputFormat, since those currently lack any of the existing configuration overrides. &lt;/p&gt;</comment>
                            <comment id="15019016" author="ghelmling" created="Fri, 20 Nov 2015 23:09:33 +0000"  >&lt;p&gt;It looks like an additional change is needed to cover VerifyReplication.  I&apos;ll post an updated patch shortly.&lt;/p&gt;</comment>
                            <comment id="15019069" author="ghelmling" created="Fri, 20 Nov 2015 23:36:58 +0000"  >&lt;p&gt;Created a separate issue for addressing VerifyReplication &amp;#8211; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14866&quot; title=&quot;VerifyReplication should use peer configuration in peer connection&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14866&quot;&gt;&lt;del&gt;HBASE-14866&lt;/del&gt;&lt;/a&gt;.  It should have everything it needs in the ReplicationPeerConfig.&lt;/p&gt;</comment>
                            <comment id="15019080" author="hadoopqa" created="Fri, 20 Nov 2015 23:43:36 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12773591/HBASE-14821.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12773591/HBASE-14821.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 52edd83baf2e8bbf519c6c4927cbdd8dce9ae406.&lt;br/&gt;
  ATTACHMENT ID: 12773591&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16624//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16624//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16624//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16624//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16624//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16624//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16624//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16624//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15023893" author="chenheng" created="Tue, 24 Nov 2015 07:11:46 +0000"  >&lt;p&gt;LGTM.  &lt;br/&gt;
+1&lt;/p&gt;</comment>
                            <comment id="15024839" author="eclark" created="Tue, 24 Nov 2015 16:50:23 +0000"  >&lt;p&gt;+1 looks great.&lt;/p&gt;</comment>
                            <comment id="15025298" author="ghelmling" created="Tue, 24 Nov 2015 20:29:35 +0000"  >&lt;p&gt;Thanks for reviews &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chenheng&quot; class=&quot;user-hover&quot; rel=&quot;chenheng&quot;&gt;Heng Chen&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt;!&lt;/p&gt;

&lt;p&gt;Committed to master, branch-1, and branch-1.2.&lt;/p&gt;</comment>
                            <comment id="15025691" author="hudson" created="Tue, 24 Nov 2015 23:23:47 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.3 #395 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3/395/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3/395/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14821&quot; title=&quot;CopyTable should allow overriding more config properties for peer cluster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14821&quot;&gt;&lt;del&gt;HBASE-14821&lt;/del&gt;&lt;/a&gt; Allow configuration overrides in TableOutputFormat (garyh: rev 07b07300b86385e33f3ab83c2930886935ad882c)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-common/src/test/java/org/apache/hadoop/hbase/TestHBaseConfiguration.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/TableOutputFormat.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/HBaseConfiguration.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15025727" author="hudson" created="Tue, 24 Nov 2015 23:43:05 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.3-IT #335 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3-IT/335/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3-IT/335/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14821&quot; title=&quot;CopyTable should allow overriding more config properties for peer cluster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14821&quot;&gt;&lt;del&gt;HBASE-14821&lt;/del&gt;&lt;/a&gt; Allow configuration overrides in TableOutputFormat (garyh: rev 07b07300b86385e33f3ab83c2930886935ad882c)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-common/src/test/java/org/apache/hadoop/hbase/TestHBaseConfiguration.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/HBaseConfiguration.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/TableOutputFormat.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15025798" author="hudson" created="Wed, 25 Nov 2015 00:21:56 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-Trunk_matrix #497 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-Trunk_matrix/497/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-Trunk_matrix/497/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14821&quot; title=&quot;CopyTable should allow overriding more config properties for peer cluster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14821&quot;&gt;&lt;del&gt;HBASE-14821&lt;/del&gt;&lt;/a&gt; Allow configuration overrides in TableOutputFormat (garyh: rev 8b67df69486222641071ebe1cd08e220d840b17f)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/HBaseConfiguration.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/TableOutputFormat.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/test/java/org/apache/hadoop/hbase/TestHBaseConfiguration.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15025857" author="hudson" created="Wed, 25 Nov 2015 00:45:44 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.2-IT #306 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2-IT/306/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2-IT/306/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14821&quot; title=&quot;CopyTable should allow overriding more config properties for peer cluster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14821&quot;&gt;&lt;del&gt;HBASE-14821&lt;/del&gt;&lt;/a&gt; Allow configuration overrides in TableOutputFormat (garyh: rev 3ce461f87cbbb10901208704e54536daf7f5c32e)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-common/src/test/java/org/apache/hadoop/hbase/TestHBaseConfiguration.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/TableOutputFormat.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/HBaseConfiguration.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15026028" author="hudson" created="Wed, 25 Nov 2015 02:27:32 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.2 #399 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2/399/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2/399/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14821&quot; title=&quot;CopyTable should allow overriding more config properties for peer cluster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14821&quot;&gt;&lt;del&gt;HBASE-14821&lt;/del&gt;&lt;/a&gt; Allow configuration overrides in TableOutputFormat (garyh: rev 3ce461f87cbbb10901208704e54536daf7f5c32e)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-common/src/test/java/org/apache/hadoop/hbase/TestHBaseConfiguration.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/TableOutputFormat.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/HBaseConfiguration.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12773591" name="HBASE-14821.patch" size="7575" author="ghelmling" created="Fri, 20 Nov 2015 20:21:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 20 Nov 2015 23:43:36 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 3 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ogwv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Configuration properties for org.apache.hadoop.hbase.mapreduce.TableOutputFormat can now be overridden by prefixing the property keys with &amp;quot;hbase.mapred.output.&amp;quot;.  When the configuration is applied to TableOutputFormat, these entries will be rewritten with the prefix removed -- ie. &amp;quot;hbase.mapred.output.hbase.security.authentication&amp;quot; becomes &amp;quot;hbase.security.authentication&amp;quot;.  This can be useful when directing output to a peer cluster with different security configuration, for example.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>