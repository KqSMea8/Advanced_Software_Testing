<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:18:30 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-10925/HBASE-10925.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-10925] Do not OOME, throw RowTooBigException instead</title>
                <link>https://issues.apache.org/jira/browse/HBASE-10925</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;If 10M columns in a row, throw a RowTooBigException rather than OOME when Get&apos;ing or Scanning w/o in-row scan flag set.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12707035">HBASE-10925</key>
            <summary>Do not OOME, throw RowTooBigException instead</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mantonov">Mikhail Antonov</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Apr 2014 21:48:10 +0000</created>
                <updated>Sat, 21 Feb 2015 23:30:47 +0000</updated>
                            <resolved>Wed, 30 Apr 2014 00:08:59 +0000</resolved>
                                    <version>0.99.0</version>
                                    <fixVersion>0.99.0</fixVersion>
                                    <component>Usability</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13963095" author="apurtell" created="Tue, 8 Apr 2014 15:44:32 +0000"  >&lt;p&gt;Do you have any thoughts on how the &quot;row too big&quot; condition should be calculated &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; ?&lt;/p&gt;</comment>
                            <comment id="13966305" author="mantonov" created="Fri, 11 Apr 2014 07:30:43 +0000"  >&lt;p&gt;my 2 cents..may be go not by num of columns, but by total size of row (in bytes), and either compare that with configurable threshold (not more than 2 gb), or with fraction of the JVM/RS node memory available (like not more than 20% thereof)?&lt;/p&gt;</comment>
                            <comment id="13967130" author="mantonov" created="Fri, 11 Apr 2014 21:36:32 +0000"  >&lt;p&gt;I could pick up this one I guess..&lt;/p&gt;</comment>
                            <comment id="13970248" author="mantonov" created="Wed, 16 Apr 2014 00:22:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; , &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; if the thoughts above make sense I could take it I guess, as it&apos;s unassigned now.&lt;/p&gt;</comment>
                            <comment id="13970440" author="stack" created="Wed, 16 Apr 2014 05:20:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mantonov&quot; class=&quot;user-hover&quot; rel=&quot;mantonov&quot;&gt;Mikhail Antonov&lt;/a&gt; Size accumulated sounds right boss.&lt;/p&gt;</comment>
                            <comment id="13970446" author="mantonov" created="Wed, 16 Apr 2014 05:28:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; thanks, will start working on patch then&lt;/p&gt;</comment>
                            <comment id="13977584" author="mantonov" created="Tue, 22 Apr 2014 22:53:48 +0000"  >&lt;p&gt;First draft version of patch, to review general logic.&lt;/p&gt;

&lt;p&gt;I actually found 2 scenarios of OOME, running tests with -Xmx128.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;one, really artificial, but still: when row contains the few huge cells (like 10Mb each), and they are put and without compaction, than upon read the all store file scanners get sought after the key being looked up, and HRS fails with OOME even before actual scanner.next() is called.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Like that:&lt;/p&gt;

&lt;p&gt;java.lang.OutOfMemoryError: Java heap space&lt;br/&gt;
	at org.apache.hadoop.hbase.io.hfile.HFileBlock$FSReaderV2.readBlockDataInternal(HFileBlock.java:1487)&lt;br/&gt;
	at org.apache.hadoop.hbase.io.hfile.HFileBlock$FSReaderV2.readBlockData(HFileBlock.java:1314)&lt;br/&gt;
	at org.apache.hadoop.hbase.io.hfile.HFileReaderV2.readBlock(HFileReaderV2.java:413)&lt;br/&gt;
	at org.apache.hadoop.hbase.io.hfile.HFileReaderV2$ScannerV2.seekTo(HFileReaderV2.java:846)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.StoreFileScanner.seekAtOrAfter(StoreFileScanner.java:247)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.StoreFileScanner.seek(StoreFileScanner.java:155)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.StoreScanner.seekScanners(StoreScanner.java:317)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.StoreScanner.&amp;lt;init&amp;gt;(StoreScanner.java:176)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HStore.getScanner(HStore.java:1751)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HRegion$RegionScannerImpl.&amp;lt;init&amp;gt;(HRegion.java:3691)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HRegion.instantiateRegionScanner(HRegion.java:1876)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HRegion.getScanner(HRegion.java:1862)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HRegion.getScanner(HRegion.java:1839)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HRegion.get(HRegion.java:4699)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HRegion.get(HRegion.java:4674)&lt;/p&gt;

&lt;p&gt;As a fix for that, I put the check in the code which does the initial seek in the scanner, just to illustrate. Not that it&apos;s valid usecase really?&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;second usecase, if when record just have a lot of columns, store files are compacted, but they scanners just attempt to load too much data. The fix I made is to calculate the total size of Cell elements which are getting appended to the result list.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Error for second case (without fix) looks like this:&lt;/p&gt;

&lt;p&gt;java.lang.OutOfMemoryError: Java heap space&lt;br/&gt;
	at org.apache.hadoop.hbase.io.hfile.HFileBlock$FSReaderV2.readBlockDataInternal(HFileBlock.java:1431)&lt;br/&gt;
	at org.apache.hadoop.hbase.io.hfile.HFileBlock$FSReaderV2.readBlockData(HFileBlock.java:1314)&lt;br/&gt;
	at org.apache.hadoop.hbase.io.hfile.HFileReaderV2.readBlock(HFileReaderV2.java:413)&lt;br/&gt;
	at org.apache.hadoop.hbase.io.hfile.HFileReaderV2$AbstractScannerV2.readNextDataBlock(HFileReaderV2.java:680)&lt;br/&gt;
	at org.apache.hadoop.hbase.io.hfile.HFileReaderV2$ScannerV2.next(HFileReaderV2.java:800)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.StoreFileScanner.next(StoreFileScanner.java:139)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.KeyValueHeap.next(KeyValueHeap.java:107)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.StoreScanner.next(StoreScanner.java:516)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.KeyValueHeap.next(KeyValueHeap.java:139)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HRegion$RegionScannerImpl.populateResult(HRegion.java:3823)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HRegion$RegionScannerImpl.nextInternal(HRegion.java:3903)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HRegion$RegionScannerImpl.nextRaw(HRegion.java:3771)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HRegion$RegionScannerImpl.next(HRegion.java:3753)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HRegion$RegionScannerImpl.next(HRegion.java:3740)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HRegion.get(HRegion.java:4700)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HRegion.get(HRegion.java:4674)&lt;br/&gt;
	at &lt;/p&gt;</comment>
                            <comment id="13977843" author="stack" created="Wed, 23 Apr 2014 05:10:53 +0000"  >&lt;p&gt;Looks good.&lt;/p&gt;

&lt;p&gt;This should be a configuration: +    long maxRowSize = 10 * 1024 * 1024;&lt;/p&gt;

&lt;p&gt;On the below:&lt;/p&gt;

&lt;p&gt;+            totalReadSize += kv.getRowLength() + kv.getFamilyLength()&lt;br/&gt;
+              + kv.getQualifierLength() + kv.getValueLength();&lt;br/&gt;
+            if (totalReadSize &amp;gt; maxRowSize) &lt;/p&gt;
{
+              throw new RowTooBigException(&quot;Max size of row is :&quot; + maxRowSize
+              + &quot;, but the row is bigger than that.&quot;);
+            }


&lt;p&gt;... it is a bit of a pain having to do the above.  I suppose we should add a getSize to CellUtils.  Could do that in another patch.  Was also thinking what if the Cell is offheap but then above is probably fine still because while it is offheap in the server, in the client it may not be and a 10G rowsize is likely larger than it can swallow w/o OOME.&lt;/p&gt;</comment>
                            <comment id="13977862" author="mantonov" created="Wed, 23 Apr 2014 05:52:23 +0000"  >&lt;blockquote&gt;&lt;p&gt;This should be a configuration&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Sure, I just wanted to show the draft to validate approach. That shall be in hbase-site.xml I think (what would be the appropriate default limit I wonder? 1Gg? I think size expressed in mb or gb is better than % of heapsize.)&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;it is a bit of a pain having to do the above. I suppose we should add a getSize to CellUtils&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes - or may be in the Cell interface itself? I can add this in another patch, yep.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Was also thinking what if the Cell is offheap&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I thought off-heap-related work is in design/prototyping stage? Will check out. But anyway, it&apos;d be off-heap (JVM-wise), but still in-process for HRS, right? So still counts towards total memory usage on the server process, and should be limited to reasonable size, or idea is that off-heap-allocated cells would be taken care off..&lt;em&gt;manually&lt;/em&gt;, and no Scanner-level checks are needed?&lt;/p&gt;

&lt;p&gt;Also curious about how valid the first usecase actually is?&lt;/p&gt;






</comment>
                            <comment id="13978538" author="stack" created="Wed, 23 Apr 2014 17:56:28 +0000"  >&lt;p&gt;1Gig seems fine for first cut.&lt;/p&gt;

&lt;p&gt;Suggest adding to CellUtil for now.  Having Cell implement HeapSize got some pushback IIRC elsewhere.&lt;/p&gt;

&lt;p&gt;Yeah, though offheap in server, it could be in heap when gets to client and OOME it.... so I think this scheme works for both cases.... Go for it.&lt;/p&gt;</comment>
                            <comment id="13978999" author="mantonov" created="Wed, 23 Apr 2014 22:13:28 +0000"  >&lt;p&gt;Heh, actually there is &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; estimatedSizeOf(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Cell cell)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;already in CellUtil. Going to use that unless there&apos;s reason not to. Will rework patch today.&lt;/p&gt;</comment>
                            <comment id="13979181" author="mantonov" created="Thu, 24 Apr 2014 01:33:17 +0000"  >&lt;p&gt;Revised patch.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;added max row size to hbase conf&lt;/li&gt;
	&lt;li&gt;use CellUtil.estimateSizeOf() to get cell size&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13979256" author="hadoopqa" created="Thu, 24 Apr 2014 04:12:53 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12641630/HBASE-10925.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12641630/HBASE-10925.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12641630&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 1 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 release audit&lt;/font&gt;.  The applied patch generated 1 release audit warnings (more than the trunk&apos;s current 0 warnings).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.regionserver.TestReversibleScanners&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestStoreScanner&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestDefaultMemStore&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9384//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9384//testReport/&lt;/a&gt;&lt;br/&gt;
Release audit warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9384//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9384//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9384//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9384//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9384//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9384//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9384//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9384//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9384//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9384//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9384//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9384//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9384//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9384//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9384//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9384//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9384//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9384//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9384//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9384//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9384//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9384//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13979345" author="mantonov" created="Thu, 24 Apr 2014 06:26:00 +0000"  >&lt;p&gt;fixed regression tests failures, added missed license header.&lt;/p&gt;

&lt;p&gt;Findbugs don&apos;t look related to this patch.&lt;/p&gt;</comment>
                            <comment id="13979500" author="hadoopqa" created="Thu, 24 Apr 2014 09:21:01 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12641662/HBASE-10925.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12641662/HBASE-10925.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12641662&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9388//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9388//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9388//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9388//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9388//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9388//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9388//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9388//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9388//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9388//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9388//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9388//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9388//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9388//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9388//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9388//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9388//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9388//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9388//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9388//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9388//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9388//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13980434" author="stack" created="Thu, 24 Apr 2014 22:55:40 +0000"  >&lt;p&gt;Very nice.  +1.  Leaving it open a while in case others want to review.  Will commit in a day or so unless objection.&lt;/p&gt;</comment>
                            <comment id="13980441" author="mantonov" created="Thu, 24 Apr 2014 23:00:27 +0000"  >&lt;p&gt;Thanks for review!&lt;/p&gt;</comment>
                            <comment id="13984992" author="stack" created="Wed, 30 Apr 2014 00:08:59 +0000"  >&lt;p&gt;Committed to trunk.  Thanks for the patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mantonov&quot; class=&quot;user-hover&quot; rel=&quot;mantonov&quot;&gt;Mikhail Antonov&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13984999" author="mantonov" created="Wed, 30 Apr 2014 00:16:44 +0000"  >&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="13985139" author="hudson" created="Wed, 30 Apr 2014 04:01:55 +0000"  >&lt;p&gt;ABORTED: Integrated in HBase-TRUNK #5125 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/5125/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/5125/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10925&quot; title=&quot;Do not OOME, throw RowTooBigException instead&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10925&quot;&gt;&lt;del&gt;HBASE-10925&lt;/del&gt;&lt;/a&gt; Do not OOME, throw RowTooBigException instead (Mikhail Antonov) (stack: rev 1591154)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-common/src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-common/src/main/resources/hbase-default.xml&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RowTooBigException.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestRowTooBig.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14330736" author="enis" created="Sat, 21 Feb 2015 23:30:47 +0000"  >&lt;p&gt;Closing this issue after 0.99.0 release. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12641662" name="HBASE-10925.patch" size="11674" author="mantonov" created="Thu, 24 Apr 2014 06:26:00 +0000"/>
                            <attachment id="12641630" name="HBASE-10925.patch" size="10634" author="mantonov" created="Thu, 24 Apr 2014 01:33:17 +0000"/>
                            <attachment id="12641362" name="HBASE-10925.patch" size="6411" author="mantonov" created="Tue, 22 Apr 2014 22:53:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 8 Apr 2014 15:44:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>385358</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1udy7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>385625</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Now throws RowTooBigException if accumulated row size is &amp;gt; the configured &amp;quot;hbase.table.max.rowsize&amp;quot; (1G by default).</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>