<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:56:16 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1777/HBASE-1777.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1777] column length is not checked before saved to memstore</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1777</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;I added some debuging to line 511 in HFile.java and found that the column is causing my problem it was &amp;gt; max size&lt;br/&gt;
we should check this before saving the record to memstore&lt;/p&gt;

&lt;p&gt;As of 0.20.0-RC2 the server dies and cause the hlogs to be read again by the next region server that gets the region in the end it cause the whole cluster to go down sense the bad data is in the hlog at this point.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2009-08-18 12:54:16,572 FATAL 
org.apache.hadoop.hbase.regionserver.MemStoreFlusher: Replay of hlog 
required. Forcing server shutdown
org.apache.hadoop.hbase.DroppedSnapshotException: region: 
webdata,http:\x2F\x2Fanaal-genomen.isporno.nl\x2F,1250569930062
        at org.apache.hadoop.hbase.regionserver.HRegion.internalFlushcache(HRegion.java:950)
        at org.apache.hadoop.hbase.regionserver.HRegion.flushcache(HRegion.java:843)
        at org.apache.hadoop.hbase.regionserver.MemStoreFlusher.flushRegion(MemStoreFlusher.java:241)
        at org.apache.hadoop.hbase.regionserver.MemStoreFlusher.run(MemStoreFlusher.java:149)
Caused by: java.io.IOException: Key length 183108 &amp;gt; 65536
        at org.apache.hadoop.hbase.io.hfile.HFile$Writer.checkKey(HFile.java:511)
        at org.apache.hadoop.hbase.io.hfile.HFile$Writer.append(HFile.java:479)
        at org.apache.hadoop.hbase.io.hfile.HFile$Writer.append(HFile.java:447)
        at org.apache.hadoop.hbase.regionserver.Store.internalFlushCache(Store.java:525)
        at org.apache.hadoop.hbase.regionserver.Store.flushCache(Store.java:489)
        at org.apache.hadoop.hbase.regionserver.HRegion.internalFlushcache(HRegion.java:935)
        ... 3 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12433368">HBASE-1777</key>
            <summary>column length is not checked before saved to memstore</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="amansk">Amandeep Khurana</assignee>
                                    <reporter username="viper799">Billy Pearson</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Aug 2009 19:10:11 +0000</created>
                <updated>Fri, 12 Oct 2012 06:13:23 +0000</updated>
                            <resolved>Wed, 21 Oct 2009 23:38:03 +0000</resolved>
                                    <version>0.20.0</version>
                                    <fixVersion>0.20.2</fixVersion>
                    <fixVersion>0.90.0</fixVersion>
                                    <component>Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12744659" author="stack" created="Tue, 18 Aug 2009 19:19:31 +0000"  >&lt;p&gt;Good one Billy.  Lets fix in 0.20.1.&lt;/p&gt;</comment>
                            <comment id="12758439" author="amansk" created="Tue, 22 Sep 2009 21:12:39 +0000"  >&lt;p&gt;Moving it to 0.21 since I didnt get time to look into it yet.&lt;/p&gt;</comment>
                            <comment id="12758440" author="stack" created="Tue, 22 Sep 2009 21:13:27 +0000"  >&lt;p&gt;Moving out of 0.20.1 after chatting with Aman.  Its rare that we run into this issue &amp;#8211; though its bad when it happens.&lt;/p&gt;

&lt;p&gt;A while back, looking at this issue with Aman, it looks like there are some interesting mismatches in how length checking is done as you go down from client through server and out to hfile so its needs a bit of careful study.&lt;/p&gt;</comment>
                            <comment id="12763697" author="ryanobjc" created="Thu, 8 Oct 2009 21:07:23 +0000"  >&lt;p&gt;this one is not as straightforward as it seems, the mainline code in Put and KeyValue checks the row length, thus this is &quot;impossible&quot;. Must be one of the other code paths somewhere...&lt;/p&gt;</comment>
                            <comment id="12763709" author="ryanobjc" created="Thu, 8 Oct 2009 21:23:37 +0000"  >&lt;p&gt;ah looks like its a minor bug in HFile, the code is:&lt;/p&gt;

&lt;p&gt;      if (length &amp;gt; MAXIMUM_KEY_LENGTH) &lt;/p&gt;
{
        throw new IOException(&quot;Key length &quot; + length + &quot; &amp;gt; &quot; +
          MAXIMUM_KEY_LENGTH);
      }


&lt;p&gt;MAXIMUM_KEY_LENGTH is 64*1024, it should be really (2^31-1), since a HFile key can be up to that sized.  The actual row portion can only be 32/64k.&lt;/p&gt;</comment>
                            <comment id="12764693" author="amansk" created="Mon, 12 Oct 2009 14:25:50 +0000"  >&lt;p&gt;Attaching a patch. Havent got a chance to write a test case for this yet.&lt;/p&gt;</comment>
                            <comment id="12768514" author="streamy" created="Wed, 21 Oct 2009 23:22:27 +0000"  >&lt;p&gt;Moving back into 0.20.2... This got moved out and never committed&lt;/p&gt;</comment>
                            <comment id="12768520" author="streamy" created="Wed, 21 Oct 2009 23:38:02 +0000"  >&lt;p&gt;Committed to branch and trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12421874" name="HBASE-1777.patch" size="519" author="amansk" created="Mon, 12 Oct 2009 14:30:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 18 Aug 2009 19:19:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25972</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 9 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08s7j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>49170</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>