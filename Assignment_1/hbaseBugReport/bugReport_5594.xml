<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:29:11 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5594/HBASE-5594.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5594] Unable to stop a master that&apos;s waiting on -ROOT- during initialization</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5594</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;We just had a case where the master (that was just restarted) was having a hard time assigning &lt;del&gt;ROOT&lt;/del&gt; (all the PRI handlers were full already) so we tried to shutdown the cluster and even though all the RS closed down properly the master kept running being blocked on:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&quot;master-sv4r20s12,10302,1331916142866&quot; prio=10 tid=0x00007f3708008800 nid=0x4b20 in Object.wait() [0x00007f370d1d0000]
   java.lang.Thread.State: WAITING (on object monitor)
	at java.lang.Object.wait(Native Method)
	- waiting on &amp;lt;0x00000006030be3f8&amp;gt; (a org.apache.hadoop.hbase.zookeeper.RootRegionTracker)
	at java.lang.Object.wait(Object.java:485)
	at org.apache.hadoop.hbase.zookeeper.ZooKeeperNodeTracker.blockUntilAvailable(ZooKeeperNodeTracker.java:131)
	- locked &amp;lt;0x00000006030be3f8&amp;gt; (a org.apache.hadoop.hbase.zookeeper.RootRegionTracker)
	at org.apache.hadoop.hbase.zookeeper.ZooKeeperNodeTracker.blockUntilAvailable(ZooKeeperNodeTracker.java:104)
	- locked &amp;lt;0x00000006030be3f8&amp;gt; (a org.apache.hadoop.hbase.zookeeper.RootRegionTracker)
	at org.apache.hadoop.hbase.catalog.CatalogTracker.waitForRoot(CatalogTracker.java:313)
	at org.apache.hadoop.hbase.master.HMaster.assignRootAndMeta(HMaster.java:571)
	at org.apache.hadoop.hbase.master.HMaster.finishInitialization(HMaster.java:501)
	at org.apache.hadoop.hbase.master.HMaster.run(HMaster.java:336)
	at java.lang.Thread.run(Thread.java:662)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I haven&apos;t checked the 0.90 code, we got this on 0.92.1&lt;/p&gt;</description>
                <environment></environment>
        <key id="12546821">HBASE-5594</key>
            <summary>Unable to stop a master that&apos;s waiting on -ROOT- during initialization</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jdcryans">Jean-Daniel Cryans</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Mar 2012 16:56:38 +0000</created>
                <updated>Mon, 23 Sep 2013 18:31:04 +0000</updated>
                            <resolved>Thu, 22 Mar 2012 00:05:29 +0000</resolved>
                                    <version>0.92.1</version>
                                    <fixVersion>0.95.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13232440" author="ram_krish" created="Mon, 19 Mar 2012 04:51:20 +0000"  >&lt;p&gt;@J-D&lt;br/&gt;
This same as &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4951&quot; title=&quot;master process can not be stopped when it is initializing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4951&quot;&gt;&lt;del&gt;HBASE-4951&lt;/del&gt;&lt;/a&gt;.  I tried to give a patch there some half baked one.  But needed some more changes to make it fully done.&lt;br/&gt;
Can you confirm if the two are duplictes if so one we can invalidate?&lt;/p&gt;</comment>
                            <comment id="13233000" author="jdcryans" created="Mon, 19 Mar 2012 23:06:20 +0000"  >&lt;p&gt;Hey Ram,&lt;/p&gt;

&lt;p&gt;Didn&apos;t you write that that thread dump on Dec. 9th wasn&apos;t for 4951 and that the issue wasn&apos;t in 0.92?&lt;/p&gt;</comment>
                            <comment id="13233270" author="ram_krish" created="Tue, 20 Mar 2012 07:04:49 +0000"  >&lt;p&gt;@J-D&lt;br/&gt;
That was when the issue started i thought not there in 0.92.&lt;br/&gt;
But see the comment at 13/Dec/11 02:48&lt;br/&gt;
It is applicable for 0.92 also.  Some problems is when we wait for root we dont have access to the master at all.  Because ZK classes dont give access to master related variables.  &lt;/p&gt;</comment>
                            <comment id="13234004" author="stack" created="Wed, 21 Mar 2012 01:06:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5328&quot; title=&quot;Small changes to Master to make it more testable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5328&quot;&gt;&lt;del&gt;HBASE-5328&lt;/del&gt;&lt;/a&gt; has a patch that includes removing the infinite wait on root in waitForRoot.  Also has a test.  Let me break out the pieces that should fix this.&lt;/p&gt;</comment>
                            <comment id="13234943" author="lhofhansl" created="Wed, 21 Mar 2012 19:52:32 +0000"  >&lt;p&gt;@Stack: You want this for 0.94?&lt;/p&gt;</comment>
                            <comment id="13234978" author="stack" created="Wed, 21 Mar 2012 20:20:04 +0000"  >&lt;p&gt;Not necessary.  I want to get it into trunk though, hbase-5328 that is (which fixes this)&lt;/p&gt;</comment>
                            <comment id="13234998" author="stack" created="Wed, 21 Mar 2012 20:35:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2464&quot; title=&quot;Shutdown of master doesn&amp;#39;t succeed if root isn&amp;#39;t assigned&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2464&quot;&gt;&lt;del&gt;HBASE-2464&lt;/del&gt;&lt;/a&gt; seems to be same issue as this.&lt;/p&gt;</comment>
                            <comment id="13235238" author="stack" created="Thu, 22 Mar 2012 00:05:30 +0000"  >&lt;p&gt;Going to claim this fixed by hbase-5328.  It has fixup in master to take care of this issue (and a test).  Was needed making a testable standalone master.&lt;/p&gt;</comment>
                            <comment id="13235239" author="stack" created="Thu, 22 Mar 2012 00:06:25 +0000"  >&lt;p&gt;hmmm... maybe hbase-2464 is not same thing.  Going to leave that one for now.&lt;/p&gt;</comment>
                            <comment id="13775247" author="stack" created="Mon, 23 Sep 2013 18:31:04 +0000"  >&lt;p&gt;Marking closed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 19 Mar 2012 04:51:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>231979</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0693j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34405</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>