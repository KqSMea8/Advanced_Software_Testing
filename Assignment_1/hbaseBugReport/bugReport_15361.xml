<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 21:02:39 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-15361/HBASE-15361.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-15361] Remove unnecessary or Document  constraints on BucketCache possible bucket sizes</title>
                <link>https://issues.apache.org/jira/browse/HBASE-15361</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;When we were trying to tune the bucket sizes &lt;tt&gt;hbase.bucketcache.bucket.sizes&lt;/tt&gt; according to our workload, we encountered an issue due to the way offset is stored in the bucket entry. We divide the offset into integer base and byte value and it assumes that all bucket offsets  will be a multiple of 256 (left shifting by 8). See the code below&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

    &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; offset() { &lt;span class=&quot;code-comment&quot;&gt;// Java has no unsigned numbers
&lt;/span&gt;      &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; o = ((&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;) offsetBase) &amp;amp; 0xFFFFFFFF;
      o += (((&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;) (offset1)) &amp;amp; 0xFF) &amp;lt;&amp;lt; 32;
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; o &amp;lt;&amp;lt; 8;
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void setOffset(&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; value) {
      &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; (value &amp;amp; 0xFF) == 0;
      value &amp;gt;&amp;gt;= 8;
      offsetBase = (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) value;
      offset1 = (&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;) (value &amp;gt;&amp;gt; 32);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This was there to save 3 bytes per BucketEntry instead of using long and when there are no other fields in the Bucket Entry, but now there are lot of fields in the bucket entry , This not documented so we could either document the constraint that it should be a strict 256 bytes multiple of just go away with this constraint.  &lt;/p&gt;</description>
                <environment></environment>
        <key id="12945631">HBASE-15361</key>
            <summary>Remove unnecessary or Document  constraints on BucketCache possible bucket sizes</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12938047">HBASE-15240</parent>
                                    <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dvdreddy">deepankar</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Feb 2016 22:04:34 +0000</created>
                <updated>Fri, 16 Dec 2016 10:18:21 +0000</updated>
                            <resolved>Fri, 16 Dec 2016 09:47:25 +0000</resolved>
                                                                    <component>BucketCache</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15172708" author="dvdreddy" created="Mon, 29 Feb 2016 22:05:06 +0000"  >&lt;p&gt;I can put up a patch based on the direction community suggests &lt;/p&gt;</comment>
                            <comment id="15173268" author="anoop.hbase" created="Tue, 1 Mar 2016 05:49:12 +0000"  >&lt;p&gt;Ya I have also observed this recently. (When checking a bug reported in BucketCache).  Ya we have many more states now..  I don&apos;t think we need to try to save 3 bytes this way.  cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=saint.ack%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;saint.ack@gmail.com&quot;&gt;Stack&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15173299" author="ram_krish" created="Tue, 1 Mar 2016 06:24:53 +0000"  >&lt;blockquote&gt;&lt;p&gt;Ya we have many more states now.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;What are the new states added now?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;volatile&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; markedForEvict;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; AtomicInteger refCount = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AtomicInteger(0);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;These two were added recently I think. &lt;/p&gt;</comment>
                            <comment id="15173309" author="anoop.hbase" created="Tue, 1 Mar 2016 06:37:30 +0000"  >&lt;p&gt;There is a long state for accessCount as well..  Said that, this saving of 3 bytes is not much..  We should try to reduce other bigger things then.  IMO&lt;/p&gt;</comment>
                            <comment id="15753961" author="anoop.hbase" created="Fri, 16 Dec 2016 09:47:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-16993&quot; title=&quot;BucketCache throw java.io.IOException: Invalid HFile block magic when DATA_BLOCK_ENCODING set to DIFF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-16993&quot;&gt;HBASE-16993&lt;/a&gt; is trying to solve it..  Having offset state as long only..  Patch avail there and hopefully can get committed soon.. Am resolving this issue as  a dup then&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13017194">HBASE-16993</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 1 Mar 2016 05:49:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 hours ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2txwn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>