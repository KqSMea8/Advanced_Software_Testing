<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:40:27 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6854/HBASE-6854.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6854] Deletion of SPLITTING node on split rollback should clear the region from RIT</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6854</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;If a failure happens in split before OFFLINING_PARENT, we tend to rollback the split including deleting the znodes created.&lt;br/&gt;
On deletion of the RS_ZK_SPLITTING node we are getting a callback but not remvoving from RIT. We need to remove it from RIT, anyway SSH logic is well guarded in case the delete event comes due to RS down scenario.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12608625">HBASE-6854</key>
            <summary>Deletion of SPLITTING node on split rollback should clear the region from RIT</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ram_krish">ramkrishna.s.vasudevan</assignee>
                                    <reporter username="ram_krish">ramkrishna.s.vasudevan</reporter>
                        <labels>
                    </labels>
                <created>Fri, 21 Sep 2012 13:25:39 +0000</created>
                <updated>Fri, 9 Nov 2012 23:44:07 +0000</updated>
                            <resolved>Thu, 27 Sep 2012 16:06:03 +0000</resolved>
                                                    <fixVersion>0.94.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                <comments>
                            <comment id="13460617" author="lhofhansl" created="Fri, 21 Sep 2012 16:55:36 +0000"  >&lt;p&gt;Unless there&apos;s patch today, let&apos;s move it to 0.94.3.&lt;/p&gt;</comment>
                            <comment id="13461202" author="ram_krish" created="Sat, 22 Sep 2012 16:07:05 +0000"  >&lt;p&gt;Not applicable to trunk.. Just verified.  In trunk we are not populating RIT for SPLITTING state.&lt;/p&gt;</comment>
                            <comment id="13461216" author="ram_krish" created="Sat, 22 Sep 2012 17:18:09 +0000"  >&lt;p&gt;Patch for 0.94&lt;/p&gt;</comment>
                            <comment id="13461217" author="ram_krish" created="Sat, 22 Sep 2012 17:18:47 +0000"  >&lt;p&gt;Pls review and provide your comments.&lt;/p&gt;</comment>
                            <comment id="13461565" author="jeason" created="Mon, 24 Sep 2012 01:56:05 +0000"  >&lt;p&gt;We also found the same problem. Only 2 minor comments:&lt;br/&gt;
1.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
LOG.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Ephemeral node deleted.  Found in SPLIITING state. &quot;&lt;/span&gt; + &lt;span class=&quot;code-quote&quot;&gt;&quot;Removing from RIT &quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;SPLIITING should be SPLITTING.&lt;br/&gt;
2. HBaseAdmin in testShouldClearRITWhenNodeFoundInSplittingState should be closed in finally block.&lt;/p&gt;

&lt;p&gt;Otherwise, I&apos;m +1 on this patch.&lt;/p&gt;</comment>
                            <comment id="13461597" author="ram_krish" created="Mon, 24 Sep 2012 04:43:14 +0000"  >&lt;p&gt;@Jieshan&lt;br/&gt;
Is it ok if i address these 2 comments on commit ?&lt;br/&gt;
If not i can prepare another patch from home.&lt;/p&gt;</comment>
                            <comment id="13461613" author="jeason" created="Mon, 24 Sep 2012 06:09:24 +0000"  >&lt;p&gt;I think it&apos;s ok&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13461936" author="ram_krish" created="Mon, 24 Sep 2012 17:42:09 +0000"  >&lt;p&gt;Am planning to commit this...&lt;br/&gt;
Reviews welcome. &lt;/p&gt;</comment>
                            <comment id="13463037" author="ram_krish" created="Tue, 25 Sep 2012 17:53:10 +0000"  >&lt;p&gt;I found that the testcase added with this is sometimes failing.  Seems there is something in the AM and the way the watcher is set.&lt;br/&gt;
I will debug it and then commit the patch though it is only a testcase change.&lt;/p&gt;</comment>
                            <comment id="13464443" author="ram_krish" created="Thu, 27 Sep 2012 05:02:11 +0000"  >&lt;p&gt;Found the problem. It is a testcase related issue.  The RIT that was got in the testcase should be updated everytime.&lt;br/&gt;
Will update the patch and commit it once i reach home.&lt;/p&gt;</comment>
                            <comment id="13464465" author="stack" created="Thu, 27 Sep 2012 05:37:28 +0000"  >&lt;p&gt;Looking at the patch, why we do this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-          LOG.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Ephemeral node deleted, regionserver crashed?, &quot;&lt;/span&gt; +
-            &lt;span class=&quot;code-quote&quot;&gt;&quot;clearing from RIT; rs=&quot;&lt;/span&gt; + rs);
+          LOG.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Ephemeral node deleted, regionserver crashed?, offlining the region&quot;&lt;/span&gt;
+              + rs.getRegion() + &lt;span class=&quot;code-quote&quot;&gt;&quot;clearing from RIT; rs=&quot;&lt;/span&gt; + rs);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The lone &apos;rs&apos; will become rs.toString.  rs is a RegionState.  When I look at RegionState.toString, it includes region name so why add the rs.getRegion?&lt;/p&gt;

&lt;p&gt;The above can be fixed on commit because otherwise, this looks like a good bug fix.&lt;/p&gt;</comment>
                            <comment id="13464841" author="ram_krish" created="Thu, 27 Sep 2012 16:05:37 +0000"  >&lt;p&gt;This is what i committed.&lt;/p&gt;</comment>
                            <comment id="13464842" author="ram_krish" created="Thu, 27 Sep 2012 16:06:03 +0000"  >&lt;p&gt;Committed to 0.94.&lt;br/&gt;
Thanks for the review Stack and Bijieshan&lt;/p&gt;</comment>
                            <comment id="13464892" author="hudson" created="Thu, 27 Sep 2012 17:28:48 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #492 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/492/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/492/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6854&quot; title=&quot;Deletion of SPLITTING node on split rollback should clear the region from RIT&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6854&quot;&gt;&lt;del&gt;HBASE-6854&lt;/del&gt;&lt;/a&gt; Deletion of SPLITTING node on split rollback should clear the region from RIT (Ram)&lt;/p&gt;

&lt;p&gt;Submitted by:Ram&lt;br/&gt;
Reviewed by:Bijieshan, Stack (Revision 1391074)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
ramkrishna : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/SplitTransaction.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/regionserver/TestSplitTransactionOnCluster.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13467517" author="hudson" created="Tue, 2 Oct 2012 06:06:22 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #58 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/58/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/58/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6854&quot; title=&quot;Deletion of SPLITTING node on split rollback should clear the region from RIT&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6854&quot;&gt;&lt;del&gt;HBASE-6854&lt;/del&gt;&lt;/a&gt; Deletion of SPLITTING node on split rollback should clear the region from RIT (Ram)&lt;/p&gt;

&lt;p&gt;Submitted by:Ram&lt;br/&gt;
Reviewed by:Bijieshan, Stack (Revision 1391074)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
ramkrishna : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/SplitTransaction.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/regionserver/TestSplitTransactionOnCluster.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13469902" author="hudson" created="Fri, 5 Oct 2012 00:37:48 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security-on-Hadoop-23 #8 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/8/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/8/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6854&quot; title=&quot;Deletion of SPLITTING node on split rollback should clear the region from RIT&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6854&quot;&gt;&lt;del&gt;HBASE-6854&lt;/del&gt;&lt;/a&gt; Deletion of SPLITTING node on split rollback should clear the region from RIT (Ram)&lt;/p&gt;

&lt;p&gt;Submitted by:Ram&lt;br/&gt;
Reviewed by:Bijieshan, Stack (Revision 1391074)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
ramkrishna : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/SplitTransaction.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/regionserver/TestSplitTransactionOnCluster.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13471153" author="lhofhansl" created="Sun, 7 Oct 2012 06:12:24 +0000"  >&lt;p&gt;The test introduced here (testShouldClearRITWhenNodeFoundInSplittingState) fails frequently in the 0.94 tests.&lt;/p&gt;</comment>
                            <comment id="13471294" author="lhofhansl" created="Sun, 7 Oct 2012 19:11:45 +0000"  >&lt;p&gt;related to env issues on the ubuntu2 jenkins machine. Sorry for the noise&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12614929">HBASE-7103</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12546870" name="HBASE-6854.patch" size="5508" author="ram_krish" created="Thu, 27 Sep 2012 16:05:37 +0000"/>
                            <attachment id="12546170" name="HBASE-6854.patch" size="5592" author="ram_krish" created="Sat, 22 Sep 2012 17:18:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 21 Sep 2012 16:55:36 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>241993</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 10 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02hq7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12473</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>