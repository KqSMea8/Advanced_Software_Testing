<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:13:00 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-10356/HBASE-10356.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-10356] Failover RPC&apos;s for multi-get </title>
                <link>https://issues.apache.org/jira/browse/HBASE-10356</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;This is extension of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10355&quot; title=&quot;Failover RPC&amp;#39;s from client using region replicas&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10355&quot;&gt;&lt;del&gt;HBASE-10355&lt;/del&gt;&lt;/a&gt; to add failover support for multi-gets. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12689127">HBASE-10356</key>
            <summary>Failover RPC&apos;s for multi-get </summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12682280">HBASE-10070</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sershe">Sergey Shelukhin</assignee>
                                    <reporter username="enis">Enis Soztutar</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Jan 2014 00:08:29 +0000</created>
                <updated>Sat, 21 Feb 2015 23:32:33 +0000</updated>
                            <resolved>Tue, 18 Feb 2014 23:39:34 +0000</resolved>
                                                    <fixVersion>0.99.0</fixVersion>
                    <fixVersion>hbase-10070</fixVersion>
                                    <component>Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="13885920" author="sershe" created="Wed, 29 Jan 2014 22:32:07 +0000"  >&lt;p&gt;Here&apos;s the patch for reference. It is done on top of one or the replica changes branches and is not applicable to trunk. Also, it includes parts of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10277&quot; title=&quot;refactor AsyncProcess&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10277&quot;&gt;&lt;del&gt;HBASE-10277&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10427&quot; title=&quot;clean up HRegionLocation/ServerName usage &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10427&quot;&gt;&lt;del&gt;HBASE-10427&lt;/del&gt;&lt;/a&gt;. &lt;br/&gt;
Due to all of this branching and additional changes going on in trunk e.g. &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10347&quot; title=&quot;HRegionInfo changes for adding replicaId and MetaEditor/MetaReader changes for region replicas&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10347&quot;&gt;&lt;del&gt;HBASE-10347&lt;/del&gt;&lt;/a&gt;, I suspect the patch will eventually have to be manually applied to whatever trunk + earlier parts of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10070&quot; title=&quot;HBase read high-availability using timeline-consistent region replicas&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10070&quot;&gt;&lt;del&gt;HBASE-10070&lt;/del&gt;&lt;/a&gt; turns out to look like.&lt;/p&gt;</comment>
                            <comment id="13885922" author="sershe" created="Wed, 29 Jan 2014 22:33:25 +0000"  >&lt;p&gt;TestAsyncProcess passes. I will run other tests later today, and add unit tests in foreseeable future.&lt;/p&gt;</comment>
                            <comment id="13885923" author="sershe" created="Wed, 29 Jan 2014 22:34:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=devaraj&quot; class=&quot;user-hover&quot; rel=&quot;devaraj&quot;&gt;Devaraj Das&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nkeywal&quot; class=&quot;user-hover&quot; rel=&quot;nkeywal&quot;&gt;Nicolas Liochon&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; fyi&lt;/p&gt;</comment>
                            <comment id="13892993" author="sershe" created="Thu, 6 Feb 2014 03:37:43 +0000"  >&lt;p&gt;merged patch on top of new branch... now it&apos;s much smaller. Either some changes are still missing from it, or I&apos;d need to take a look tomorrow for new ways to do stuff&lt;/p&gt;</comment>
                            <comment id="13893084" author="stack" created="Thu, 6 Feb 2014 06:07:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sershe&quot; class=&quot;user-hover&quot; rel=&quot;sershe&quot;&gt;Sergey Shelukhin&lt;/a&gt; I looked at the  smaller patch.&lt;/p&gt;

&lt;p&gt;Why does Action have to know about replicaid?  Currently it is the outline of a Get, Put, or Delete just for keeping up an index so we can run multi of these in a request... and make sense of the result and exceptoins when they come back.   replicaid stuff should be going on elsewhere where we are figuring the destination server for this Action?  Won&apos;t you want to be able to take an Action that fails one replica and point it at another replica (w/o having to update the replica it is carrying?)&lt;/p&gt;

&lt;p&gt;These are right?&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;@Override&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;On AsyncProcess knowing about replicas, again, shouldn&apos;t it be a read replica driver class that runs the AsyncProcess making sense of results and rescheduling against new replicas if failure rather than doctoring of AsyncProcess?&lt;/p&gt;

&lt;p&gt;Its hard to figure how this works.  Is there a bit of doc on it somewhere?&lt;/p&gt;

&lt;p&gt;A AsyncRequestFutureImpl has a ReplicaRunnable.  What is a ReplicaRunnable?&lt;/p&gt;

&lt;p&gt;SingleServerRunnable is what happens when no read replicas?  Why ain&apos;t SingleServerRunnable an instance of ReplicaRunnable only replicas==1?&lt;/p&gt;

&lt;p&gt;I skimmed the rest.  I think you get my main point.&lt;/p&gt;</comment>
                            <comment id="13893583" author="sershe" created="Thu, 6 Feb 2014 17:52:11 +0000"  >&lt;blockquote&gt;&lt;p&gt;Why does Action have to know about replicaid? Currently it is the outline of a Get, Put, or Delete just for keeping up an index so we can run multi of these in a request... and make sense of the result and exceptoins when they come back. replicaid stuff should be going on elsewhere where we are figuring the destination server for this Action? Won&apos;t you want to be able to take an Action that fails one replica and point it at another replica (w/o having to update the replica it is carrying?)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Action represents local context for a particular... action (which is different from Action, hence action.getAction(), poor naming imho) that is a part of MultiAction. Local context included original index, now it also includes replica ID for the same reason, it needs to be propagated between sending request and processing response (not going to server, though). Seems like a logical place to put it.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On AsyncProcess knowing about replicas, again, shouldn&apos;t it be a read replica driver class that runs the AsyncProcess making sense of results and rescheduling against new replicas if failure rather than doctoring of AsyncProcess?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;First, replica calls run in parallel with normal calls, it&apos;s not just for failures, so there has to be a point of syncronization. Second, AP currently already manages finding the locations and grouping of request, it wouldn&apos;t make sense to have another external place to manage replica locations separately and group requests separately for replica case. If you notice, the send code is almost the same replicas or no replicas, the only difference is how we group, and the scheduling of replica calls themselves.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Its hard to figure how this works. Is there a bit of doc on it somewhere?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I will augment the comments &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;A AsyncRequestFutureImpl has a ReplicaRunnable. What is a ReplicaRunnable?&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;SingleServerRunnable is what happens when no read replicas? Why ain&apos;t SingleServerRunnable an instance of ReplicaRunnable only replicas==1?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Both are just thread runnables; the second is just moved code - previously it was an inline runnable for calls, I moved it to make code cleaner. &lt;br/&gt;
The first is a runnable for replica calls thread. Replica calls could be made on the same thread, but that would compromise the async behavior because we wait before making them.&lt;/p&gt;
</comment>
                            <comment id="13893749" author="stack" created="Thu, 6 Feb 2014 20:28:51 +0000"  >&lt;p&gt;Can we fix the naming?  An Action instance with a method named getAction is confusing (not you I know...)&lt;/p&gt;

&lt;p&gt;Do I have the model wrong then? This Action is for accounting on how this &apos;Action&apos; did in the Multi request, right?   My thinking is that server and region accounting is done outside of the Action usually.  I&apos;d think which replica would be done there w/o needing to mark this index on the Multi call.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Second, AP currently already manages finding the locations and grouping of request, it wouldn&apos;t make sense to have another external place to manage replica locations separately and group requests separately for replica case. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;AP is involved as it is.  I&apos;d think that read replica management would be a cilent of AP rather than threaded through (but as said above, I am not clear what is going on here...)&lt;/p&gt;

&lt;p&gt;The new Runnables need explanatory comments and better names &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/help_16.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.  Should the two types be related?  Subclass?   Do we need two Callable types?&lt;/p&gt;

&lt;p&gt;Thanks Sergey.&lt;/p&gt;


</comment>
                            <comment id="13897426" author="sershe" created="Tue, 11 Feb 2014 01:43:37 +0000"  >&lt;blockquote&gt;&lt;p&gt;Can we fix the naming? An Action instance with a method named getAction is confusing (not you I know...)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Will do separate patch on trunk probably.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Do I have the model wrong then? This Action is for accounting on how this &apos;Action&apos; did in the Multi request, right? My thinking is that server and region accounting is done outside of the Action usually. I&apos;d think which replica would be done there w/o needing to mark this index on the Multi call.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I don&apos;t think Action has any particular model, it&apos;s just a context between request and response time.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The new Runnables need explanatory comments and better names . Should the two types be related? Subclass? Do we need two Callable types?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Two types are not related. Will rename and add comments.&lt;/p&gt;</comment>
                            <comment id="13897433" author="sershe" created="Tue, 11 Feb 2014 01:51:46 +0000"  >&lt;p&gt;Rebased onto hbase-10070 with recent changes, changed the patch accordingly to use the new location interfaces to get replicas, added extensive unit tests, added comments and renames for the runnables.&lt;br/&gt;
I ran TestAsyncProcess for now, will run other tests too.&lt;/p&gt;</comment>
                            <comment id="13897442" author="sershe" created="Tue, 11 Feb 2014 01:59:11 +0000"  >&lt;p&gt;rb at &lt;a href=&quot;https://reviews.apache.org/r/17937/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/17937/&lt;/a&gt;;  RB is acting as usual for me, so publish button is stuck. This review will eventually become available&lt;/p&gt;</comment>
                            <comment id="13897443" author="sershe" created="Tue, 11 Feb 2014 02:00:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=devaraj&quot; class=&quot;user-hover&quot; rel=&quot;devaraj&quot;&gt;Devaraj Das&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nkeywal&quot; class=&quot;user-hover&quot; rel=&quot;nkeywal&quot;&gt;Nicolas Liochon&lt;/a&gt; fyi&lt;/p&gt;</comment>
                            <comment id="13897453" author="sershe" created="Tue, 11 Feb 2014 02:10:30 +0000"  >&lt;p&gt;there&apos;s a small bug in the test which can cause it to pass incorrectly... but it still passes after being fixed&lt;/p&gt;</comment>
                            <comment id="13897456" author="hadoopqa" created="Tue, 11 Feb 2014 02:12:08 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12628137/HBASE-10356.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12628137/HBASE-10356.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12628137&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8658//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8658//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13900845" author="sershe" created="Thu, 13 Feb 2014 23:05:11 +0000"  >&lt;p&gt;CR feedback, some javadoc&lt;/p&gt;</comment>
                            <comment id="13901041" author="hadoopqa" created="Fri, 14 Feb 2014 02:26:26 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12628881/HBASE-10356.01.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12628881/HBASE-10356.01.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12628881&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8686//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8686//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13901966" author="devaraj" created="Fri, 14 Feb 2014 21:30:46 +0000"  >&lt;p&gt;LGTM overall.&lt;/p&gt;</comment>
                            <comment id="13901970" author="sershe" created="Fri, 14 Feb 2014 21:38:41 +0000"  >&lt;p&gt;will commit to trunk and hbase-10070 today&lt;/p&gt;</comment>
                            <comment id="13901972" author="sershe" created="Fri, 14 Feb 2014 21:38:54 +0000"  >&lt;p&gt;sorry not trunk&lt;/p&gt;</comment>
                            <comment id="13902257" author="devaraj" created="Sat, 15 Feb 2014 01:42:24 +0000"  >&lt;p&gt;This is the same as what Sergey last uploaded with some minor conflicts fixed.&lt;/p&gt;</comment>
                            <comment id="13902296" author="hadoopqa" created="Sat, 15 Feb 2014 03:03:14 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12629178/HBASE-10356.01.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12629178/HBASE-10356.01.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12629178&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8714//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8714//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13904812" author="sershe" created="Tue, 18 Feb 2014 23:37:51 +0000"  >&lt;p&gt;Patch with conflicts resolved&lt;/p&gt;</comment>
                            <comment id="13904816" author="sershe" created="Tue, 18 Feb 2014 23:39:34 +0000"  >&lt;p&gt;committed to hbase-10070 branch&lt;/p&gt;</comment>
                            <comment id="13919560" author="nkeywal" created="Tue, 4 Mar 2014 16:10:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sershe&quot; class=&quot;user-hover&quot; rel=&quot;sershe&quot;&gt;Sergey Shelukhin&lt;/a&gt; I&apos;m working on merging this with &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10355&quot; title=&quot;Failover RPC&amp;#39;s from client using region replicas&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10355&quot;&gt;&lt;del&gt;HBASE-10355&lt;/del&gt;&lt;/a&gt;. It includes using microseconds everywhere, so I have to modify this patch (on the other hand I&apos;m not sure we should not have a different setting for multiget &amp;amp; for simple get, but it&apos;s another story).&lt;/p&gt;

&lt;p&gt;I noticed a bug in the branch 10070, in AsyncProcess&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; waitUntilDone(&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; cutoff) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; InterruptedException {
      &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; hasWait = cutoff != &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;.MAX_VALUE;
      &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; lastLog = hasWait ? 0 : EnvironmentEdgeManager.currentTimeMillis();
      &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; currentInProgress;
      &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (0 != (currentInProgress = actionsInProgress.get())) {
        &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; now = 0;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (hasWait &amp;amp;&amp;amp; (now = EnvironmentEdgeManager.currentTimeMillis()) &amp;gt; cutoff) {
          &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
        }
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!hasWait) {    &amp;lt;======================================= too wide
          &lt;span class=&quot;code-comment&quot;&gt;// Only log &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; wait is infinite.
&lt;/span&gt;          now = EnvironmentEdgeManager.currentTimeMillis();
          &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (now &amp;gt; lastLog + 10000) {
            lastLog = now;
            LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;#&quot;&lt;/span&gt; + id + &lt;span class=&quot;code-quote&quot;&gt;&quot;, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &quot;&lt;/span&gt; + currentInProgress + &lt;span class=&quot;code-quote&quot;&gt;&quot;  actions to finish&quot;&lt;/span&gt;);
          }
          &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; (actionsInProgress) { 
            actionsInProgress.wait(&lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.min(100, hasWait ? (cutoff - now) : &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;.MAX_VALUE));   &amp;lt;=========  hasWait is always &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; here
          }
        }
      }
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Is the branch up to date?&lt;/p&gt;</comment>
                            <comment id="13919590" author="nkeywal" created="Tue, 4 Mar 2014 16:44:03 +0000"  >&lt;p&gt;In any case; I&apos;m doing the fix in 10355&lt;/p&gt;</comment>
                            <comment id="13919639" author="sershe" created="Tue, 4 Mar 2014 17:12:19 +0000"  >&lt;p&gt;Yeah, hasWait should not cover .wait, it&apos;s a bug that can cause tight loop&lt;/p&gt;</comment>
                            <comment id="14046605" author="enis" created="Sat, 28 Jun 2014 01:46:44 +0000"  >&lt;p&gt;Attaching rebased patch for master that is committed&lt;/p&gt;</comment>
                            <comment id="14046654" author="enis" created="Sat, 28 Jun 2014 02:07:24 +0000"  >&lt;p&gt;Committed to master as part of hbase-10070 branch merge&lt;/p&gt;</comment>
                            <comment id="14046751" author="hudson" created="Sat, 28 Jun 2014 06:13:57 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #5245 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/5245/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/5245/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10356&quot; title=&quot;Failover RPC&amp;#39;s for multi-get &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10356&quot;&gt;&lt;del&gt;HBASE-10356&lt;/del&gt;&lt;/a&gt; Failover RPC&apos;s for multi-get (enis: rev 25b6103dadba16e85db0a8c5f2fc44ecf9fc3f2a)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/ClusterConnection.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/test/java/org/apache/hadoop/hbase/client/TestAsyncProcess.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/ConnectionManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/client/HConnectionTestingUtility.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/Action.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/HRegionInfo.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/RegionReplicaUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/RegionLocations.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/MultiServerCallable.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/ConnectionAdapter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/client/CoprocessorHConnection.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/MultiAction.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/AsyncProcess.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14330975" author="enis" created="Sat, 21 Feb 2015 23:32:33 +0000"  >&lt;p&gt;Closing this issue after 0.99.0 release. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12687283">HBASE-10277</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12693629">HBASE-10479</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12652944" name="0006-HBASE-10356-Failover-RPC-s-for-multi-get.patch" size="72569" author="enis" created="Sat, 28 Jun 2014 01:46:43 +0000"/>
                            <attachment id="12629178" name="HBASE-10356.01.patch" size="68319" author="devaraj" created="Sat, 15 Feb 2014 01:42:24 +0000"/>
                            <attachment id="12628881" name="HBASE-10356.01.patch" size="68779" author="sershe" created="Thu, 13 Feb 2014 23:05:11 +0000"/>
                            <attachment id="12629680" name="HBASE-10356.02.patch" size="68350" author="sershe" created="Tue, 18 Feb 2014 23:37:51 +0000"/>
                            <attachment id="12628137" name="HBASE-10356.patch" size="66334" author="sershe" created="Tue, 11 Feb 2014 01:51:46 +0000"/>
                            <attachment id="12627289" name="HBASE-10356.reference.patch" size="34335" author="sershe" created="Thu, 6 Feb 2014 03:37:43 +0000"/>
                            <attachment id="12625997" name="HBASE-10356.reference.patch" size="141890" author="sershe" created="Wed, 29 Jan 2014 22:32:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 29 Jan 2014 22:32:07 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368094</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1rg1r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368399</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>