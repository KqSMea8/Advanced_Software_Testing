<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:47:42 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-7645/HBASE-7645.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-7645] put without timestamp duplicates the record/row</title>
                <link>https://issues.apache.org/jira/browse/HBASE-7645</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;if I call a couple of times SQOOP on the same dataset, outputting to HBase,&lt;br/&gt;
I will end up with duplicated data...&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hbase(main):030:0&amp;gt; get &lt;span class=&quot;code-quote&quot;&gt;&quot;dump_HKFAS.sales_order&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt;, {COLUMN =&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;mysql:created_at&quot;&lt;/span&gt;, VERSIONS =&amp;gt; 4}
COLUMN                             CELL                                                                                             
mysql:created_at                  timestamp=1358853505756, value=2011-12-21 18:07:38.0                                             
mysql:created_at                  timestamp=1358790515451, value=2011-12-21 18:07:38.0                                             
2 row(s) in 0.0040 seconds

today&apos;s sqoop run
hbase(main):031:0&amp;gt; Date.&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;(1358853505756).toString()
=&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;Tue Jan 22 11:18:25 UTC 2013&quot;&lt;/span&gt;

yesterday&apos;s sqoop run
hbase(main):032:0&amp;gt; Date.&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;(1358790515451).toString()
=&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;Mon Jan 21 17:48:35 UTC 2013&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the fact that the Put.add() method writes the kv without checking if, apart of the timestamp, the value has not changed, is it by design? or a bug?&lt;/p&gt;

&lt;p&gt;I mean, what&apos;s the idea behind? Shall it be SQOOP (the client application) supposed to handle the read on the value before issuing an add() statement call?&lt;/p&gt;

&lt;p&gt;from: trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/client/Put.java&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Put add(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; [] family, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; [] qualifier, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; [] value) {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; add(family, qualifier, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.ts, value);
  }

  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Put add(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; [] family, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; [] qualifier, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; ts, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; [] value) {
    List&amp;lt;KeyValue&amp;gt; list = getKeyValueList(family);
    KeyValue kv = createPutKeyValue(family, qualifier, ts, value);
    list.add(kv);
    familyMap.put(kv.getFamily(), list);
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;;
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12628743">HBASE-7645</key>
            <summary>put without timestamp duplicates the record/row</summary>
                <type id="13" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/genericissue.png">Brainstorming</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="zeph">Guido Serra aka Zeph</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Jan 2013 17:15:36 +0000</created>
                <updated>Wed, 23 Jan 2013 00:04:10 +0000</updated>
                            <resolved>Tue, 22 Jan 2013 17:27:33 +0000</resolved>
                                                                    <component>Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13559780" author="anoopsamjohn" created="Tue, 22 Jan 2013 17:23:02 +0000"  >&lt;p&gt;When you put data without specifying a timestamp, HBase will assign a TS for the insert. This will be the system time at the RS. So when you do put with the same data set it can get a new TS making it a new version. This is expected behavior only.&lt;/p&gt;</comment>
                            <comment id="13559783" author="zeph" created="Tue, 22 Jan 2013 17:27:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoopsamjohn&quot; class=&quot;user-hover&quot; rel=&quot;anoopsamjohn&quot;&gt;Anoop Sam John&lt;/a&gt; uh, ok... so that is then expect. Thanks for clarifying &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I&apos;ll handle it on client side then&lt;/p&gt;</comment>
                            <comment id="13560207" author="enis" created="Wed, 23 Jan 2013 00:04:10 +0000"  >&lt;p&gt;You can also set VERSIONS=1 in the column family descriptor. HBase will not keep more than 1 version. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12628748">SQOOP-834</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 22 Jan 2013 17:23:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>307378</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 47 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1avwn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>271635</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>