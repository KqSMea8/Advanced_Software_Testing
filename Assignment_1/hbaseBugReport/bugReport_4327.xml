<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:17:55 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4327/HBASE-4327.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4327] Compile HBase against hadoop 0.22</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4327</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Pom contains a profile for hadoop-0.20 and one for hadoop-0.23, but not one for hadoop-0.22.&lt;/p&gt;

&lt;p&gt;When overriding hadoop.version to 0.22, then the (compile-time) dependency on hadoop-annotations cannot be met.&lt;br/&gt;
That exists on 0.23 and 0.24/trunk, but not on 0.22.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12521140">HBASE-4327</key>
            <summary>Compile HBase against hadoop 0.22</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jrottinghuis">Joep Rottinghuis</assignee>
                                    <reporter username="jrottinghuis">Joep Rottinghuis</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Sep 2011 02:38:41 +0000</created>
                <updated>Fri, 20 Nov 2015 11:53:05 +0000</updated>
                            <resolved>Wed, 7 Sep 2011 06:20:24 +0000</resolved>
                                    <version>0.92.0</version>
                                    <fixVersion>0.92.0</fixVersion>
                                    <component>build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13095730" author="jrottinghuis" created="Fri, 2 Sep 2011 02:46:38 +0000"  >&lt;p&gt;I&apos;m happy to provide a patch. I see three options:&lt;/p&gt;

&lt;p&gt;1) modify the POM to provide a separate property for the hadoop-annotation dependency version. That way one can depend on hadoop-0.22-SNAPSHOT (or whatever other 0.22 version) for hadoop-common, hadoop-hdfs, etc, and one could grab hadoop-annotations from 0.23 or 0.24.&lt;/p&gt;

&lt;p&gt;2) modify the POM to have an entirely separate 0.22 profile. Again the profile would have to point to hadoop-annotation from a 0.23 or 0.24/trunk snapshot.&lt;/p&gt;

&lt;p&gt;3) Not modify the pom, manually build hadoop-annotations from trunk with a modified / faked 0.22 version and deploy to local repo. This would solve my own internal problem, but is not likely to be a satisfying solution for uploading to the apache repo&apos;s (not sure if any committer is willing to upload such hadoop-annotation-0.22-SNAPSHOT.jar).&lt;/p&gt;

&lt;p&gt;Any suggestions?&lt;/p&gt;</comment>
                            <comment id="13095756" author="stack" created="Fri, 2 Sep 2011 03:56:11 +0000"  >&lt;p&gt;@Joep Any chance of seeing the compile error?  How comes trunk compiles against hadoop 0.20.x w/o need of annotations?  Is it because of the 0.20 profile?  If we do a 0.22 profile, option 2., why we need hadoop-annotations?&lt;/p&gt;

&lt;p&gt;I&apos;m wondering because I seem to remember compiling against 0.22 at one time w/o this dependency; maybe I was dreaming.&lt;/p&gt;</comment>
                            <comment id="13096209" author="michaelweng" created="Fri, 2 Sep 2011 18:58:16 +0000"  >&lt;p&gt;I added a separate 0.22 profile without annotations. Build is fine. And no issue found so far while running hbase trunk on hadoop 0.22.&lt;/p&gt;</comment>
                            <comment id="13096211" author="stack" created="Fri, 2 Sep 2011 19:00:36 +0000"  >&lt;p&gt;Good on you Michael.  Post a patch?&lt;/p&gt;</comment>
                            <comment id="13096212" author="jrottinghuis" created="Fri, 2 Sep 2011 19:01:37 +0000"  >&lt;p&gt;Testing a patch locally, will post soon.&lt;br/&gt;
Initially I thought that HBase depended on hadoop-annotations, but that is a problem with 0.23 (probably a missed dependency in those POMs).&lt;/p&gt;</comment>
                            <comment id="13096221" author="jrottinghuis" created="Fri, 2 Sep 2011 19:16:38 +0000"  >&lt;p&gt;Still seeing compilation error:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Failed to execute goal on project hbase: Could not resolve dependencies for project org.apache.hbase:hbase:jar:0.91.0-SNAPSHOT: The following artifacts could not be resolved: org.apache.hadoop:hadoop-test:jar:0.22.0-SNAPSHOT, org.apache.hadoop:guava:jar:r09: Could not find artifact org.apache.hadoop:hadoop-test:jar:0.22.0-SNAPSHOT in apache release (&lt;a href=&quot;https://repository.apache.org/content/repositories/releases/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://repository.apache.org/content/repositories/releases/&lt;/a&gt;) -&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;The guava one is related to &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-2189&quot; title=&quot;guava-r09 dependency missing from &amp;quot;ivy/hadoop-hdfs-template.xml&amp;quot; in HDFS.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-2189&quot;&gt;&lt;del&gt;HDFS-2189&lt;/del&gt;&lt;/a&gt; (and &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-2214&quot; title=&quot;Generated POMs hardcode dependency on hadoop-common version 0.22.0-SNAPSHOT&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-2214&quot;&gt;&lt;del&gt;HDFS-2214&lt;/del&gt;&lt;/a&gt;), which for some reason keeps rearing it&apos;s ugly head. Just wiped out ~/.m2/repository. Will download the offending POM manually to double-check.&lt;/p&gt;</comment>
                            <comment id="13096241" author="jrottinghuis" created="Fri, 2 Sep 2011 19:47:25 +0000"  >&lt;p&gt;Problem still there on the Hadoop side:&lt;br/&gt;
&lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/hadoop/hadoop-hdfs/0.22.0-SNAPSHOT/hadoop-hdfs-0.22.0-20110726.103826-380.pom&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/hadoop/hadoop-hdfs/0.22.0-SNAPSHOT/hadoop-hdfs-0.22.0-20110726.103826-380.pom&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The POM still points to org.apache.hadoop#guava and it should be com.google.guava.&lt;br/&gt;
The source code in hdfs is correct, but the last published build is stale.&lt;/p&gt;</comment>
                            <comment id="13096293" author="jrottinghuis" created="Fri, 2 Sep 2011 20:52:53 +0000"  >&lt;p&gt;Preliminary patch. Still need to resolve downstream hdfs dependency issue first. Asked Konstantin to initiate integration build on hadoop-0.22 in order to publish fixed jar+pom.&lt;br/&gt;
Once in I need to check where the hadoop-test error comes from.&lt;/p&gt;</comment>
                            <comment id="13096442" author="michaelweng" created="Fri, 2 Sep 2011 22:39:17 +0000"  >&lt;p&gt;Here is my patch.&lt;/p&gt;</comment>
                            <comment id="13096959" author="stack" created="Sun, 4 Sep 2011 23:02:51 +0000"  >&lt;p&gt;Joep and Michael.  You fellas are together?  Should I apply Michael&apos;s last patch?  It looks good to me.  Do you want to make sure it works w/ whats published for hadoop 0.22 first? (Thanks for doing this work).&lt;/p&gt;</comment>
                            <comment id="13096979" author="jrottinghuis" created="Mon, 5 Sep 2011 01:40:48 +0000"  >&lt;p&gt;My preference is to have the hdfs pom fixed first, then I&apos;ll test the patch and confirm.&lt;/p&gt;</comment>
                            <comment id="13098571" author="jrottinghuis" created="Wed, 7 Sep 2011 03:11:16 +0000"  >&lt;p&gt;Turned out that HDFS was broken. I filed a bug for it: &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-2315&quot; title=&quot;Build fails with ant 1.7.0 but works with 1.8.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-2315&quot;&gt;&lt;del&gt;HDFS-2315&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
The newly published POM seems to have fixed the HDFS guava dependency issue&lt;br/&gt;
:&lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/hadoop/hadoop-hdfs/0.22.0-SNAPSHOT/hadoop-hdfs-0.22.0-20110907.001816-381.pom&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/hadoop/hadoop-hdfs/0.22.0-SNAPSHOT/hadoop-hdfs-0.22.0-20110907.001816-381.pom&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;ll test the patch again and report back.&lt;/p&gt;</comment>
                            <comment id="13098593" author="jrottinghuis" created="Wed, 7 Sep 2011 04:48:48 +0000"  >&lt;p&gt;Added additional comment and now that HDFS dependencies are fixed, the patch can now be applied.&lt;/p&gt;</comment>
                            <comment id="13098596" author="stack" created="Wed, 7 Sep 2011 05:02:04 +0000"  >&lt;p&gt;I applied the above patch and got this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Compilation failure

/Users/stack/checkout/clean-trunk/src/main/java/org/apache/hadoop/hbase/Server.java:[22,29] &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; org.apache.hadoop.conf does not exist

/Users/stack/checkout/clean-trunk/src/main/java/org/apache/hadoop/hbase/HRegionInfo.java:[29,29] &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; org.apache.hadoop.conf does not exist

/Users/stack/checkout/clean-trunk/src/main/java/org/apache/hadoop/hbase/HRegionInfo.java:[30,27] &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; org.apache.hadoop.fs does not exist

/Users/stack/checkout/clean-trunk/src/main/java/org/apache/hadoop/hbase/HRegionInfo.java:[31,27] &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; org.apache.hadoop.fs does not exist

/Users/stack/checkout/clean-trunk/src/main/java/org/apache/hadoop/hbase/KeyValue.java:[37,27] &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; org.apache.hadoop.io does not exist

/Users/stack/checkout/clean-trunk/src/main/java/org/apache/hadoop/hbase/KeyValue.java:[38,27] &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; org.apache.hadoop.io does not exist

/Users/stack/checkout/clean-trunk/src/main/java/org/apache/hadoop/hbase/KeyValue.java:[66,33] cannot find symbol
symbol: class Writable
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; class KeyValue &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; Writable, HeapSize {
....
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Is it because of this change?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
       &amp;lt;id&amp;gt;hadoop-0.20&amp;lt;/id&amp;gt;
       &amp;lt;activation&amp;gt;
         &amp;lt;property&amp;gt;
-          &amp;lt;name&amp;gt;!hadoop23&amp;lt;/name&amp;gt;
+          &amp;lt;name&amp;gt;hadoop20&amp;lt;/name&amp;gt;
         &amp;lt;/property&amp;gt;
       &amp;lt;/activation&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13098598" author="jrottinghuis" created="Wed, 7 Sep 2011 05:08:20 +0000"  >&lt;p&gt;Uhm, yes.&lt;br/&gt;
Before there were two options:&lt;br/&gt;
either specify nothing, or specify -Dhadoop23.&lt;br/&gt;
The nothing/default option was run against 0.20 and was done when hadoop23 was not specified.&lt;br/&gt;
Now we have three options.&lt;br/&gt;
Let me see if we can make it something like:&lt;br/&gt;
!(hadoop22 || hadoop 23)&lt;br/&gt;
I tried with the specific options, but not without any.&lt;br/&gt;
Will get back to you...&lt;/p&gt;</comment>
                            <comment id="13098610" author="jrottinghuis" created="Wed, 7 Sep 2011 05:52:45 +0000"  >&lt;p&gt;Looks like there is a bug open in Maven to do exactly what I wanted to do:&lt;br/&gt;
&lt;a href=&quot;http://jira.codehaus.org/browse/MNG-3328&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://jira.codehaus.org/browse/MNG-3328&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;What I can do is to change the property to hadoop.profile.&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;When nothing is specified, then HBase will build against 0.20&lt;/li&gt;
	&lt;li&gt;When -Dhadoop.profile=22 is specified, HBase will build against hadoop 0.22&lt;/li&gt;
	&lt;li&gt;When -Dhadoop.profile=23 is specified, HBase will build against hadoop 0.23. This is a change in behavior, previously used to be -Dhadoop23&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Attached a new patch with above behavior. Please let me know if this is acceptable.&lt;/p&gt;</comment>
                            <comment id="13098628" author="stack" created="Wed, 7 Sep 2011 06:11:06 +0000"  >&lt;p&gt;That should work.  We have a build against 0.23 up on apache build box.  I&apos;d need to change the config. there on commit but that should be fine.&lt;/p&gt;</comment>
                            <comment id="13098635" author="stack" created="Wed, 7 Sep 2011 06:20:24 +0000"  >&lt;p&gt;Committed to TRUNK.  I tried it w/o a profile and for 0.23.&lt;/p&gt;

&lt;p&gt;Todd, I updated build.apache.org so that our 0.23 build now uses this new flag instead.&lt;/p&gt;

&lt;p&gt;Thanks for the patch Joep.  Nice on.&lt;/p&gt;</comment>
                            <comment id="13098791" author="hudson" created="Wed, 7 Sep 2011 09:03:31 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2180 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2180/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2180/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4327&quot; title=&quot;Compile HBase against hadoop 0.22&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4327&quot;&gt;&lt;del&gt;HBASE-4327&lt;/del&gt;&lt;/a&gt; Compile HBase against hadoop 0.22&lt;/p&gt;

&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15015902" author="lars_francke" created="Fri, 20 Nov 2015 11:53:05 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12523293">HADOOP-7646</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12492843" name="HBASE-4327-Michael.patch" size="5555" author="michaelweng" created="Fri, 2 Sep 2011 22:39:17 +0000"/>
                            <attachment id="12493277" name="HBASE-4327.patch" size="6012" author="jrottinghuis" created="Wed, 7 Sep 2011 05:52:45 +0000"/>
                            <attachment id="12493272" name="HBASE-4327.patch" size="5698" author="jrottinghuis" created="Wed, 7 Sep 2011 04:48:48 +0000"/>
                            <attachment id="12492809" name="HBASE-4327.patch" size="5275" author="jrottinghuis" created="Fri, 2 Sep 2011 20:52:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 2 Sep 2011 03:56:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>27260</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hqfz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>101546</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>To compile against a version of hadoop other than 0.20, set hadoop.profile. When -Dhadoop.profile=22 is specified, HBase will build against hadoop 0.22.  When -Dhadoop.profile=23 is specified, HBase will build against hadoop 0.23. This is a change in behavior, previously used to be -Dhadoop23. When nothing is specified, then HBase will build against 0.20</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>