<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:43:30 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-355/HBASE-355.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-355] Use primitives -- long, byte [] -- in place of Long, BytesWritable, etc.</title>
                <link>https://issues.apache.org/jira/browse/HBASE-355</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Profiling, bulk of allocations are short-lived object wrapping of primitives. Examples include:&lt;/p&gt;

&lt;p&gt;+ &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-341&quot; title=&quot;Use long primitives creating, renewing, and cancelling leases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-341&quot;&gt;&lt;del&gt;HADOOP-1483&lt;/del&gt;&lt;/a&gt; &apos;Use long primitives creating, renewing, and cancelling leases&apos; now subsumed by this issue.&lt;br/&gt;
+ Published APIs for region server, master and clients return ByteWritables or arrays of ByteWritables when could be returning byte [] or byte [][].&lt;/p&gt;</description>
                <environment></environment>
        <key id="12371786">HBASE-355</key>
            <summary>Use primitives -- long, byte [] -- in place of Long, BytesWritable, etc.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Jun 2007 22:12:23 +0000</created>
                <updated>Mon, 4 Feb 2008 18:41:52 +0000</updated>
                            <resolved>Tue, 19 Jun 2007 17:11:21 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12505413" author="stack" created="Sat, 16 Jun 2007 00:41:32 +0000"  >

&lt;p&gt;Commit message.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-355&quot; title=&quot;Use primitives -- long, byte [] -- in place of Long, BytesWritable, etc.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-355&quot;&gt;&lt;del&gt;HADOOP-1498&lt;/del&gt;&lt;/a&gt; Use primitives &amp;#8211; long, byte [] &amp;#8211; in place of Long,&lt;br/&gt;
BytesWritable, etc.&lt;/p&gt;

&lt;p&gt;General pattern of changes in the below is:&lt;/p&gt;

&lt;p&gt; + Replace BytesWriable instances with byte [].&lt;br/&gt;
 + Remove unnecessary copying of byte arrays.&lt;br/&gt;
 + Use ImmutableByteWritable where we need to pass a Comparable.&lt;br/&gt;
 + Add in javadoc.&lt;br/&gt;
 + New style for loop.&lt;br/&gt;
 + Use List instead of Vector where no need of synchronization.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;src/contrib/hbase/src/test/org/apache/hadoop/hbase/TestHMemcache.java&lt;/li&gt;
	&lt;li&gt;src/contrib/hbase/src/test/org/apache/hadoop/hbase/TestScanner2.java&lt;/li&gt;
	&lt;li&gt;src/contrib/hbase/src/test/org/apache/hadoop/hbase/AbstractMergeTestBase.java&lt;/li&gt;
	&lt;li&gt;src/contrib/hbase/src/test/org/apache/hadoop/hbase/TestHLog.java&lt;/li&gt;
	&lt;li&gt;src/contrib/hbase/src/test/org/apache/hadoop/hbase/TestScanner.java&lt;/li&gt;
	&lt;li&gt;src/contrib/hbase/src/test/org/apache/hadoop/hbase/TestHRegion.java&lt;/li&gt;
	&lt;li&gt;src/contrib/hbase/src/java/org/apache/hadoop/hbase/HStore.java&lt;/li&gt;
	&lt;li&gt;src/contrib/hbase/src/java/org/apache/hadoop/hbase/HMerge.java&lt;/li&gt;
	&lt;li&gt;src/contrib/hbase/src/java/org/apache/hadoop/hbase/HScannerInterface.java&lt;/li&gt;
	&lt;li&gt;src/contrib/hbase/src/java/org/apache/hadoop/hbase/HClient.java&lt;/li&gt;
	&lt;li&gt;src/contrib/hbase/src/java/org/apache/hadoop/hbase/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;src/contrib/hbase/src/java/org/apache/hadoop/hbase/HMaster.java&lt;/li&gt;
	&lt;li&gt;src/contrib/hbase/src/java/org/apache/hadoop/hbase/HMemcache.java&lt;/li&gt;
	&lt;li&gt;src/contrib/hbase/src/java/org/apache/hadoop/hbase/HRegiondirReader.java&lt;/li&gt;
	&lt;li&gt;src/contrib/hbase/src/java/org/apache/hadoop/hbase/HInternalScannerInterface.java&lt;/li&gt;
	&lt;li&gt;src/contrib/hbase/src/java/org/apache/hadoop/hbase/HAbstractScanner.java&lt;br/&gt;
  All above got the general treatment.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;  Below got general treatment plus whatever we call out below.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;src/contrib/hbase/src/test/org/apache/hadoop/hbase/TestHStoreKey.java&lt;br/&gt;
  Added extractFamily tests.&lt;/li&gt;
	&lt;li&gt;src/contrib/hbase/src/java/org/apache/hadoop/hbase/HLogKey.java&lt;br/&gt;
  Added comment.&lt;/li&gt;
	&lt;li&gt;src/contrib/hbase/src/java/org/apache/hadoop/hbase/Leases.java&lt;br/&gt;
  Have leases created, renewed and cancelled using longs rather than&lt;br/&gt;
  Text. Makes for large savings in object creation.&lt;br/&gt;
  Javadoc edit. Changed leases Map from TreeMap to HashMap.&lt;br/&gt;
  (getLeaseId, createLeaseId): Renamed.&lt;br/&gt;
  (LeaseName, creatLeaseName, getLeaseName): Added.&lt;/li&gt;
	&lt;li&gt;src/contrib/hbase/src/java/org/apache/hadoop/hbase/HStoreKey.java&lt;br/&gt;
  Added override so can extractFamily with colon appended.&lt;br/&gt;
  Redid extraction so we used Text#find rather than String.indexOf&lt;br/&gt;
  Makes for object creations savings.&lt;/li&gt;
	&lt;li&gt;src/contrib/hbase/src/java/org/apache/hadoop/hbase/HRegionServer.java&lt;br/&gt;
  Pass scannerId long instead of ScannerName creating, cancelling, etc.,&lt;br/&gt;
  leases for scanners.&lt;/li&gt;
	&lt;li&gt;src/contrib/hbase/src/java/org/apache/hadoop/hbase/HLog.java&lt;br/&gt;
  Comment.&lt;/li&gt;
	&lt;li&gt;src/contrib/hbase/src/java/org/apache/hadoop/hbase/HMaster.java&lt;br/&gt;
  Use server name hashCode for lease naming.&lt;/li&gt;
	&lt;li&gt;src/contrib/hbase/src/java/org/apache/hadoop/hbase/HRegion.java&lt;br/&gt;
  servers, rowsToLocks, locksToRows, stores do not need to be&lt;br/&gt;
  TreeMaps (They are more expensive than hashmaps).&lt;/li&gt;
	&lt;li&gt;src/contrib/hbase/src/java/org/apache/hadoop/hbase/HLogKey.java&lt;br/&gt;
    Added Comment.&lt;/li&gt;
	&lt;li&gt;src/contrib/hbase/src/test/org/apache/hadoop/hbase/TestGet.java&lt;br/&gt;
    Add in some assertions about what the expected name of the server&lt;br/&gt;
    is meant to be when we read HRegion.&lt;/li&gt;
	&lt;li&gt;src/contrib/hbase/src/test/org/apache/hadoop/hbase/TestHBaseCluster.java&lt;br/&gt;
    (testHBaseCluster): Remove catching of exceptions. Just let them out.&lt;/li&gt;
	&lt;li&gt;src/contrib/hbase/src/java/org/apache/hadoop/hbase/HStoreFile.java&lt;br/&gt;
    (doReconstructionLog): Move bunch of constructor into its own method.&lt;/li&gt;
	&lt;li&gt;src/contrib/hbase/src/java/org/apache/hadoop/hbase/HConstants.java&lt;br/&gt;
    Added ImmutableBytesWriable defines for DELETE_BYTES and COPMLETE_CACHEFLUSH&lt;/li&gt;
	&lt;li&gt;src/contrib/hbase/src/java/org/apache/hadoop/hbase/HRegionInterface.java&lt;/li&gt;
	&lt;li&gt;src/contrib/hbase/src/java/org/apache/hadoop/hbase/HMasterRegionInterface.java&lt;br/&gt;
    Formatting.&lt;/li&gt;
	&lt;li&gt;src/contrib/hbase/src/java/org/apache/hadoop/hbase/HServerAddress.java&lt;br/&gt;
    Added intValue to extract port from Integer.&lt;/li&gt;
	&lt;li&gt;src/contrib/hbase/src/java/org/apache/hadoop/hbase/io/ImmutableBytesWritable.java&lt;br/&gt;
    Added.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12505415" author="stack" created="Sat, 16 Jun 2007 00:42:03 +0000"  >&lt;p&gt;Passes local tests.  See if Hudson agrees.&lt;/p&gt;</comment>
                            <comment id="12505424" author="hadoopqa" created="Sat, 16 Jun 2007 02:22:19 +0000"  >&lt;p&gt;-1, build or testing failed&lt;/p&gt;

&lt;p&gt;2 attempts failed to build and test the latest attachment &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12359915/primitives.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12359915/primitives.patch&lt;/a&gt; against trunk revision r547811.&lt;/p&gt;

&lt;p&gt;Test results:   &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/291/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/291/testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/291/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/291/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please note that this message is automatically generated and may represent a problem with the automation system and not the patch.&lt;/p&gt;</comment>
                            <comment id="12505562" author="stack" created="Sun, 17 Jun 2007 01:55:22 +0000"  >&lt;p&gt;Version 2.  Fixes failing TestHRegion unit test.&lt;/p&gt;</comment>
                            <comment id="12505570" author="hadoopqa" created="Sun, 17 Jun 2007 02:57:25 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12359950/primitives-v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12359950/primitives-v2.patch&lt;/a&gt; applied and successfully tested against trunk revision r547811.&lt;/p&gt;

&lt;p&gt;Test results:   &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/292/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/292/testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/292/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/292/console&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12506041" author="hadoopqa" created="Tue, 19 Jun 2007 05:02:42 +0000"  >&lt;p&gt;Integrated in Hadoop-Nightly #127 (See &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Nightly/127/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Nightly/127/&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="12506248" author="stack" created="Tue, 19 Jun 2007 17:11:21 +0000"  >&lt;p&gt;Patch committed closing.&lt;/p&gt;</comment>
                            <comment id="12506258" author="hudson" created="Tue, 19 Jun 2007 17:44:29 +0000"  >&lt;p&gt;Integrated in Hadoop-Nightly #129 (See &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Nightly/129/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Nightly/129/&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="12506291" author="hadoopqa" created="Tue, 19 Jun 2007 20:52:36 +0000"  >&lt;p&gt;-1, could not apply patch.&lt;/p&gt;

&lt;p&gt;The patch command could not apply the latest attachment &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12359950/primitives-v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12359950/primitives-v2.patch&lt;/a&gt; as a patch to trunk revision r548794.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/302/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/302/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please note that this message is automatically generated and may represent a problem with the automation system and not the patch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12359950" name="primitives-v2.patch" size="165114" author="stack" created="Sun, 17 Jun 2007 01:55:22 +0000"/>
                            <attachment id="12359915" name="primitives.patch" size="164870" author="stack" created="Sat, 16 Jun 2007 00:41:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 16 Jun 2007 02:22:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25139</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 27 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h6t3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98365</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>