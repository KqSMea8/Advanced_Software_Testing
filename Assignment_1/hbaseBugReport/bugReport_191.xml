<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:41:54 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-191/HBASE-191.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-191] [HBase] TableInputFormat.TableRecordReader.next has a bug</title>
                <link>https://issues.apache.org/jira/browse/HBASE-191</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;TableInputFormat.TableRecordReader.next has the following:&lt;br/&gt;
  if (m_endRow.getLength() &amp;gt; 0 &amp;amp;&amp;amp; (tKey.getRow().compareTo(m_endRow) &amp;lt; 0))&lt;br/&gt;
          hasMore = false;&lt;/p&gt;

&lt;p&gt;It should be:&lt;br/&gt;
  if (m_endRow.getLength() &amp;gt; 0 &amp;amp;&amp;amp; (tKey.getRow().compareTo(m_endRow) &amp;gt;= 0))&lt;br/&gt;
          hasMore = false;&lt;/p&gt;

&lt;p&gt;TestTableMapReduce test passes because it tested map-reduce on a single-region table.&lt;br/&gt;
The problem only shows on a multi-region table. The patch includes changes to TestTableMapReduce&lt;br/&gt;
so map-reduce is tested on a multi-region table as well. The multi-region table is created&lt;br/&gt;
in a similar way as done in TestSplit.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12376900">HBASE-191</key>
            <summary>[HBase] TableInputFormat.TableRecordReader.next has a bug</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ningli">Ning Li</reporter>
                        <labels>
                    </labels>
                <created>Sun, 26 Aug 2007 20:04:28 +0000</created>
                <updated>Mon, 4 Feb 2008 18:41:03 +0000</updated>
                            <resolved>Wed, 29 Aug 2007 23:40:49 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12523046" author="stack" created="Mon, 27 Aug 2007 16:54:30 +0000"  >&lt;p&gt;Thanks for the patch Ning (and for including a test for your fix).&lt;/p&gt;

&lt;p&gt;The patch is missing TestMultiRegionTableMapReduce.  Lines should be &amp;lt; 80 characters if possible.    Usually folks make their patch inside the HADOOP_TRUNK dir.  The paths in your patch are all absolute paths starting from C:/).&lt;/p&gt;

&lt;p&gt;Otherwise the patch looks great (Making addContent static is a good idea).  Should we refactor splitTable to use your new MultiRegionTable.java?&lt;/p&gt;
</comment>
                            <comment id="12523072" author="ningli" created="Mon, 27 Aug 2007 18:07:30 +0000"  >&lt;p&gt;Hopefully, take 2 addresses all of your comments, including refactoring splitTable to use MultiRegionTable.&lt;/p&gt;</comment>
                            <comment id="12523126" author="stack" created="Mon, 27 Aug 2007 23:11:47 +0000"  >&lt;p&gt;Thanks for the fixes Ning.&lt;/p&gt;

&lt;p&gt;Here&apos;s a version 3 that adds a bit of javadoc and commentary.&lt;/p&gt;</comment>
                            <comment id="12523127" author="stack" created="Mon, 27 Aug 2007 23:12:07 +0000"  >&lt;p&gt;Builds and passes all tests locally.  Trying against hudson.&lt;/p&gt;</comment>
                            <comment id="12523138" author="hadoopqa" created="Tue, 28 Aug 2007 00:33:44 +0000"  >&lt;p&gt;-1, build or testing failed&lt;/p&gt;

&lt;p&gt;2 attempts failed to build and test the latest attachment &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12364652/TableInputFormat.take3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12364652/TableInputFormat.take3.patch&lt;/a&gt; against trunk revision r570207.&lt;/p&gt;

&lt;p&gt;Test results:   &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/625/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/625/testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/625/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/625/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please note that this message is automatically generated and may represent a problem with the automation system and not the patch.&lt;/p&gt;</comment>
                            <comment id="12523151" author="stack" created="Tue, 28 Aug 2007 03:58:04 +0000"  >&lt;p&gt;Forgot to attach new file to patch&lt;/p&gt;</comment>
                            <comment id="12523152" author="stack" created="Tue, 28 Aug 2007 04:06:57 +0000"  >&lt;p&gt;Add in missing file.  Below is list of changes:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
HADOOP-1785 TableInputFormat.TableRecordReader.next has a bug
M  src/contrib/hbase/src/test/org/apache/hadoop/hbase/TestTableMapReduce.java
    (localTestSingleRegionTable, localTestMultiRegionTable, verify): Added.
M  src/contrib/hbase/src/test/org/apache/hadoop/hbase/HBaseTestCase.java
    Javadoc &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; addContents and Loader &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; and implementations.
    Methods have been made &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; so accessible w/o subclassing.
M  src/contrib/hbase/src/test/org/apache/hadoop/hbase/MultiRegionTable.java
    Guts of TestSplit has been moved here so other tests can have
    access to a multiregion table.
M  src/contrib/hbase/src/test/org/apache/hadoop/hbase/TestSplit.java
    Bulk moved to MultiRegionTable utility class.  Use &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; class
    instead.
M  src/contrib/hbase/src/java/org/apache/hadoop/hbase/HTable.java
    Added &apos;@deprecated&apos; javadoc.
M src/contrib/hbase/src/java/org/apache/hadoop/hbase/HMaster.java
    Was throwing RuntimeException when a msgQueue.put was interrupted
    but &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is a likely event on shutdown.  Log a message instead.
M  src/contrib/hbase/src/java/org/apache/hadoop/hbase/mapred/TableInputFormat.java
    Actually fix &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; HADOOP-1785... reverse test of row comparison.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12523155" author="stack" created="Tue, 28 Aug 2007 04:45:51 +0000"  >&lt;p&gt;Try again against hudson now I&apos;ve added in the missing file.&lt;/p&gt;</comment>
                            <comment id="12523161" author="hadoopqa" created="Tue, 28 Aug 2007 05:53:42 +0000"  >&lt;p&gt;-1, new javadoc warnings&lt;/p&gt;

&lt;p&gt;The javadoc tool appears to have generated warning messages when testing the latest attachment &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12364659/TableInputFormat.take4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12364659/TableInputFormat.take4.patch&lt;/a&gt; against trunk revision r570270.&lt;/p&gt;

&lt;p&gt;Test results:   &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/627/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/627/testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/627/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/627/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please note that this message is automatically generated and may represent a problem with the automation system and not the patch.&lt;/p&gt;</comment>
                            <comment id="12523270" author="stack" created="Tue, 28 Aug 2007 16:13:02 +0000"  >&lt;p&gt;Fix javadoc warnings&lt;/p&gt;</comment>
                            <comment id="12523271" author="stack" created="Tue, 28 Aug 2007 16:13:26 +0000"  >&lt;p&gt;Retrying against hudson&lt;/p&gt;</comment>
                            <comment id="12523307" author="hadoopqa" created="Tue, 28 Aug 2007 18:54:06 +0000"  >&lt;p&gt;-1, build or testing failed&lt;/p&gt;

&lt;p&gt;2 attempts failed to build and test the latest attachment &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12364693/TableInputFormat.take5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12364693/TableInputFormat.take5.patch&lt;/a&gt; against trunk revision r570270.&lt;/p&gt;

&lt;p&gt;Test results:   &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/630/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/630/testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/630/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/630/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please note that this message is automatically generated and may represent a problem with the automation system and not the patch.&lt;/p&gt;</comment>
                            <comment id="12523375" author="jimk" created="Tue, 28 Aug 2007 22:30:13 +0000"  >&lt;p&gt;Resubmitting. &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-111&quot; title=&quot;[hbase] Fix NPEs in MetaScanner constructor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-111&quot;&gt;&lt;del&gt;HADOOP-1797&lt;/del&gt;&lt;/a&gt; was probably the culprit.&lt;/p&gt;</comment>
                            <comment id="12523404" author="hadoopqa" created="Tue, 28 Aug 2007 23:53:28 +0000"  >&lt;p&gt;-1, could not apply patch.&lt;/p&gt;

&lt;p&gt;The patch command could not apply the latest attachment &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12364693/TableInputFormat.take5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12364693/TableInputFormat.take5.patch&lt;/a&gt; as a patch to trunk revision r570583.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/635/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/635/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please note that this message is automatically generated and may represent a problem with the automation system and not the patch.&lt;/p&gt;</comment>
                            <comment id="12523406" author="stack" created="Wed, 29 Aug 2007 00:09:01 +0000"  >&lt;p&gt;Patch failed to apply because of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-111&quot; title=&quot;[hbase] Fix NPEs in MetaScanner constructor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-111&quot;&gt;&lt;del&gt;HADOOP-1797&lt;/del&gt;&lt;/a&gt; commit.   Here&apos;s a fixed take6.&lt;/p&gt;</comment>
                            <comment id="12523407" author="stack" created="Wed, 29 Aug 2007 00:09:23 +0000"  >&lt;p&gt;Applies and builds locally.  Trying Hudson.&lt;/p&gt;</comment>
                            <comment id="12523451" author="hadoopqa" created="Wed, 29 Aug 2007 04:44:41 +0000"  >&lt;p&gt;-1, could not apply patch.&lt;/p&gt;

&lt;p&gt;The patch command could not apply the latest attachment &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12364730/TableInputFormat.take6.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12364730/TableInputFormat.take6.patch&lt;/a&gt; as a patch to trunk revision r570633.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/639/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/639/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please note that this message is automatically generated and may represent a problem with the automation system and not the patch.&lt;/p&gt;</comment>
                            <comment id="12523455" author="stack" created="Wed, 29 Aug 2007 05:07:35 +0000"  >&lt;p&gt;If patch has additions to CHANGES.txt and it gets changed meantime, patch fails to apply.&lt;/p&gt;</comment>
                            <comment id="12523457" author="stack" created="Wed, 29 Aug 2007 05:09:08 +0000"  >&lt;p&gt;Removed changes to CHANGES.txt from the take6 version of the patch.&lt;/p&gt;</comment>
                            <comment id="12523458" author="stack" created="Wed, 29 Aug 2007 05:11:46 +0000"  >&lt;p&gt;Retry.  Applies locally and if a change to hbase CHANGES.txt happens in meantime, should still work.&lt;/p&gt;</comment>
                            <comment id="12523594" author="stack" created="Wed, 29 Aug 2007 14:58:46 +0000"  >&lt;p&gt;Hudson is hung building this patch just after failing TestMiniMRWithDFS because it took &amp;gt; 600seconds.&lt;/p&gt;</comment>
                            <comment id="12523632" author="hadoopqa" created="Wed, 29 Aug 2007 17:24:25 +0000"  >&lt;p&gt;-1, build or testing failed&lt;/p&gt;

&lt;p&gt;2 attempts failed to build and test the latest attachment &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12364743/TableInputFormat.take7.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12364743/TableInputFormat.take7.patch&lt;/a&gt; against trunk revision r570633.&lt;/p&gt;

&lt;p&gt;Test results:   &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/644/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/644/testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/644/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/644/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please note that this message is automatically generated and may represent a problem with the automation system and not the patch.&lt;/p&gt;</comment>
                            <comment id="12523636" author="stack" created="Wed, 29 Aug 2007 17:44:14 +0000"  >&lt;p&gt;Patch was missing new file.&lt;/p&gt;</comment>
                            <comment id="12523637" author="stack" created="Wed, 29 Aug 2007 17:46:11 +0000"  >&lt;p&gt;Another attempt at the &quot;patch that would not apply&quot;  adding in (again) the missing added file.&lt;/p&gt;</comment>
                            <comment id="12523643" author="stack" created="Wed, 29 Aug 2007 18:00:49 +0000"  >&lt;p&gt;Going up against hudson for 8th time (Applies and builds locally).&lt;/p&gt;</comment>
                            <comment id="12523731" author="hadoopqa" created="Wed, 29 Aug 2007 23:26:16 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12364779/TableInputFormat.take8.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12364779/TableInputFormat.take8.patch&lt;/a&gt; applied and successfully tested against trunk revision r570937.&lt;/p&gt;

&lt;p&gt;Test results:   &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/648/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/648/testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/648/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/648/console&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12523732" author="stack" created="Wed, 29 Aug 2007 23:40:49 +0000"  >&lt;p&gt;Committed.  Resolving issue.  Thanks for the patch Ning Li.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12376619">HBASE-377</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12364580" name="TableInputFormat.patch" size="20681" author="ningli" created="Sun, 26 Aug 2007 20:05:44 +0000"/>
                            <attachment id="12364629" name="TableInputFormat.take2.patch" size="30770" author="ningli" created="Mon, 27 Aug 2007 18:07:30 +0000"/>
                            <attachment id="12364652" name="TableInputFormat.take3.patch" size="27116" author="stack" created="Mon, 27 Aug 2007 23:11:46 +0000"/>
                            <attachment id="12364659" name="TableInputFormat.take4.patch" size="37350" author="stack" created="Tue, 28 Aug 2007 04:06:57 +0000"/>
                            <attachment id="12364693" name="TableInputFormat.take5.patch" size="37649" author="stack" created="Tue, 28 Aug 2007 16:13:02 +0000"/>
                            <attachment id="12364730" name="TableInputFormat.take6.patch" size="27955" author="stack" created="Wed, 29 Aug 2007 00:09:01 +0000"/>
                            <attachment id="12364743" name="TableInputFormat.take7.patch" size="27415" author="stack" created="Wed, 29 Aug 2007 05:09:08 +0000"/>
                            <attachment id="12364779" name="TableInputFormat.take8.patch" size="37089" author="stack" created="Wed, 29 Aug 2007 17:46:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 27 Aug 2007 16:54:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24975</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 17 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h5af:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98119</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>