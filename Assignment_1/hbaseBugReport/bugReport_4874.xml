<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:22:48 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4874/HBASE-4874.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4874] Run tests with non-secure random, some tests hang otherwise</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4874</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;TestHCM#testClosing fails on Linux if not enough entropy is available in /dev/random&lt;/p&gt;</description>
                <environment></environment>
        <key id="12532775">HBASE-4874</key>
            <summary>Run tests with non-secure random, some tests hang otherwise</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lhofhansl">Lars Hofhansl</assignee>
                                    <reporter username="yuzhihong@gmail.com">Ted Yu</reporter>
                        <labels>
                    </labels>
                <created>Sat, 26 Nov 2011 05:14:55 +0000</created>
                <updated>Fri, 12 Oct 2012 05:34:58 +0000</updated>
                            <resolved>Sun, 27 Nov 2011 23:13:32 +0000</resolved>
                                    <version>0.92.0</version>
                    <version>0.94.0</version>
                                    <fixVersion>0.92.0</fixVersion>
                    <fixVersion>0.94.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13157378" author="lhofhansl" created="Sat, 26 Nov 2011 05:52:26 +0000"  >&lt;p&gt;This happens at least on Linux when SecureRandom is used.&lt;br/&gt;
SecureRandom uses /dev/random in Linux, which will block if not enough entropy has been gathered by system events (disk, network, keyboard, mouse movements, etc).&lt;/p&gt;

&lt;p&gt;It&apos;s &lt;b&gt;not&lt;/b&gt; only testClosing. Every time a test cluster is started it might hang, if the system happens to run out of entropy bits to generate secure random numbers. I&apos;ve seen the same with TestFromClient and other tests that start an actual cluster for the test.&lt;/p&gt;

&lt;p&gt;The fix I found was to add &quot;-Djava.security.egd=&lt;a href=&quot;file:/dev/./urandom&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/dev/./urandom&lt;/a&gt;&quot; (note the extra ./ in path is needed for JDK 1.5 or newer) to the command line. /dev/urandom never blocks, but if not enough entropy has been gathered the random numbers generated won&apos;t be truly random (which is fine for the tests).&lt;/p&gt;</comment>
                            <comment id="13157380" author="lhofhansl" created="Sat, 26 Nov 2011 05:55:52 +0000"  >&lt;p&gt;minipatch... not sure how to make this Linux specific.&lt;/p&gt;</comment>
                            <comment id="13157382" author="yuzhihong@gmail.com" created="Sat, 26 Nov 2011 06:11:43 +0000"  >&lt;p&gt;+1 on patch.&lt;/p&gt;

&lt;p&gt;SecureRandom isn&apos;t used in classes under src/main - Whew.&lt;/p&gt;</comment>
                            <comment id="13157383" author="lhofhansl" created="Sat, 26 Nov 2011 06:19:16 +0000"  >&lt;p&gt;But it&apos;s used by UUID.randomUUID() which is used in main classes.&lt;/p&gt;</comment>
                            <comment id="13157384" author="lhofhansl" created="Sat, 26 Nov 2011 06:21:33 +0000"  >&lt;p&gt;On server type setups we should be OK as entropy is also gathered by network and disk activity.&lt;/p&gt;</comment>
                            <comment id="13157536" author="stack" created="Sat, 26 Nov 2011 16:28:02 +0000"  >&lt;p&gt;I suppose this can&apos;t be done in a platform independent way?&lt;/p&gt;

&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13157551" author="lhofhansl" created="Sat, 26 Nov 2011 17:28:42 +0000"  >&lt;p&gt;Todd suggest to do the same as in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7841&quot; title=&quot;Run tests with non-secure random&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-7841&quot;&gt;&lt;del&gt;HADOOP-7841&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
I have the feeling this will make the overall automated test runs much more predictable.&lt;/p&gt;</comment>
                            <comment id="13157565" author="lhofhansl" created="Sat, 26 Nov 2011 17:58:17 +0000"  >&lt;p&gt;Alas... That does not seem to work. When I use &amp;lt;systemPropertyVariables&amp;gt; that test still hangs after I run it twice. Passing it with -D to the command line (as in this patch) works fine.&lt;/p&gt;</comment>
                            <comment id="13157606" author="stack" created="Sat, 26 Nov 2011 20:55:10 +0000"  >&lt;p&gt;Ok +1.&lt;/p&gt;</comment>
                            <comment id="13157627" author="lhofhansl" created="Sun, 27 Nov 2011 00:57:17 +0000"  >&lt;p&gt;Can somebody try on other environments (Mac, Cygwin, or whatever else we support), to make sure this does not break envs other than Linux?&lt;/p&gt;</comment>
                            <comment id="13157996" author="yuzhihong@gmail.com" created="Sun, 27 Nov 2011 20:32:41 +0000"  >&lt;p&gt;I tried the patch on MacBook.&lt;br/&gt;
TestHCM#testClosing passed.&lt;/p&gt;</comment>
                            <comment id="13158075" author="lhofhansl" created="Sun, 27 Nov 2011 23:13:32 +0000"  >&lt;p&gt;Committed to 0.92 and trunk&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12505175" name="4874.txt" size="581" author="lhofhansl" created="Sat, 26 Nov 2011 05:55:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 26 Nov 2011 05:52:26 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>218508</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 3 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i06a9r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34595</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>