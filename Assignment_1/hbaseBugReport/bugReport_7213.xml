<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:43:39 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-7213/HBASE-7213.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-7213] Have HLog files for .META. and -ROOT- edits only</title>
                <link>https://issues.apache.org/jira/browse/HBASE-7213</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Over on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6774&quot; title=&quot;Immediate assignment of regions that don&amp;#39;t have entries in HLog&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6774&quot;&gt;HBASE-6774&lt;/a&gt;, there is a discussion on separating out the edits for .META. regions from the other regions&apos; edits w.r.t where the edits are written. This jira is to track an implementation of that.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12617472">HBASE-7213</key>
            <summary>Have HLog files for .META. and -ROOT- edits only</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="devaraj">Devaraj Das</assignee>
                                    <reporter username="devaraj">Devaraj Das</reporter>
                        <labels>
                    </labels>
                <created>Fri, 23 Nov 2012 19:57:54 +0000</created>
                <updated>Mon, 23 Sep 2013 18:31:28 +0000</updated>
                            <resolved>Wed, 16 Jan 2013 19:10:59 +0000</resolved>
                                                    <fixVersion>0.95.0</fixVersion>
                                    <component>master</component>
                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>14</watches>
                                                                <comments>
                            <comment id="13503342" author="ram_krish" created="Sat, 24 Nov 2012 05:43:34 +0000"  >&lt;p&gt;Is the idea to write it in a seperate WAL file? So that i can be picked up first?&lt;/p&gt;</comment>
                            <comment id="13504032" author="stack" created="Mon, 26 Nov 2012 19:48:41 +0000"  >&lt;p&gt;Yes&lt;/p&gt;</comment>
                            <comment id="13504230" author="enis" created="Mon, 26 Nov 2012 23:13:29 +0000"  >&lt;p&gt;This can also allow us to directly deploy META without waiting for log splitting (if we have separate WAL for every META region, there is nothing to split).&lt;/p&gt;</comment>
                            <comment id="13504398" author="devaraj" created="Tue, 27 Nov 2012 06:35:46 +0000"  >&lt;p&gt;Apologies for not responding earlier.. But yes, the high level idea is to make the recovery of META table fast and hence reduce the downtime of META should the regionserver hosting the RS crash. By having a dedicated HLog for META, the log splitting will be really simple (maybe just simple rename operations of files; need to look at the code here)...&lt;/p&gt;

&lt;p&gt;I am in the middle of plumbing through the code to make this work. Will hopefully have something in a day or two.&lt;/p&gt;</comment>
                            <comment id="13504404" author="ram_krish" created="Tue, 27 Nov 2012 06:50:24 +0000"  >&lt;p&gt;@Deva&lt;br/&gt;
Thanks for the  update.  I remeber there is a hlog created inside a hregion also which is never getting used?  Can we make use of it?&lt;/p&gt;</comment>
                            <comment id="13504413" author="devaraj" created="Tue, 27 Nov 2012 07:09:05 +0000"  >&lt;p&gt;Will take a look &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ram_krish&quot; class=&quot;user-hover&quot; rel=&quot;ram_krish&quot;&gt;ramkrishna.s.vasudevan&lt;/a&gt;, but is there any particular reason why that should be reused? (are you referring to the field &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;final HLog log;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;).&lt;/p&gt;</comment>
                            <comment id="13505153" author="devaraj" created="Wed, 28 Nov 2012 01:38:16 +0000"  >&lt;p&gt;Here is a rough, currently work in progress, patch. At a high level:&lt;br/&gt;
1. There is a new MetaServices class that currently provides the services for creating/getting meta hlog.&lt;br/&gt;
2. OpenMetaHandler invokes the method for creating the meta hlog, and also makes sure that the opened region gets the right hlog instance.&lt;br/&gt;
3. The meta hlog file is created in the same root hlog directory, but is suffixed with .META.&lt;/p&gt;

&lt;p&gt;I still need to plumb through the log splitting code, etc. But I thought I&apos;ll post what I have to see if there is any immediate feedback.&lt;/p&gt;</comment>
                            <comment id="13505217" author="ram_krish" created="Wed, 28 Nov 2012 04:24:51 +0000"  >&lt;p&gt;Deva,&lt;br/&gt;
I could not apply the code to trunk as i don have the trunk code with me now..  (will apply it later once i go home).&lt;br/&gt;
Just one question i have here..&lt;br/&gt;
If the META region moves newly to an RS we instantiate the HLog for META.&lt;br/&gt;
If an RS that had the META once and again gets back the META in that case we should be pointing to the same HLog right?&lt;br/&gt;
May be if the code does it already pardon me....because i could not apply the code i had this doubt.&lt;/p&gt;</comment>
                            <comment id="13505247" author="devaraj" created="Wed, 28 Nov 2012 06:17:02 +0000"  >&lt;blockquote&gt;&lt;p&gt;If an RS that had the META once and again gets back the META in that case we should be pointing to the same HLog right?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ram_krish&quot; class=&quot;user-hover&quot; rel=&quot;ram_krish&quot;&gt;ramkrishna.s.vasudevan&lt;/a&gt;, it should be pointing to the same HLog. I am wondering though when could this happen. I can see the obvious case where a RS dies and the meta gets assigned to some other RS, but when does the former get it back?&lt;/p&gt;</comment>
                            <comment id="13505253" author="ram_krish" created="Wed, 28 Nov 2012 06:32:25 +0000"  >&lt;p&gt;Thanks Deva.  Normally not possible.  But seeing the 0.94 code atleast we dont block in issuing an assign or move command to META. !!&lt;/p&gt;</comment>
                            <comment id="13505254" author="nkeywal" created="Wed, 28 Nov 2012 06:38:11 +0000"  >&lt;p&gt;Is it something forbidden? Because there is a (fixed) jira that says we should be able to do it (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3756&quot; title=&quot;Can&amp;#39;t move META or ROOT from shell&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3756&quot;&gt;&lt;del&gt;HBASE-3756&lt;/del&gt;&lt;/a&gt;).&lt;br/&gt;
It&apos;s obviously critical, but I think it&apos;s requires for rolling restart, where we move all the regions from a server before stopping/starting it.&lt;br/&gt;
We could also imagine balancers doing this...&lt;/p&gt;</comment>
                            <comment id="13505256" author="ram_krish" created="Wed, 28 Nov 2012 06:43:12 +0000"  >&lt;p&gt;@N&lt;br/&gt;
Yes balancer is also one thing which is doing it. just verified the code.&lt;/p&gt;</comment>
                            <comment id="13505261" author="devaraj" created="Wed, 28 Nov 2012 07:03:44 +0000"  >&lt;p&gt;Thanks for the clarifications, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ram_krish&quot; class=&quot;user-hover&quot; rel=&quot;ram_krish&quot;&gt;ramkrishna.s.vasudevan&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nkeywal&quot; class=&quot;user-hover&quot; rel=&quot;nkeywal&quot;&gt;Nicolas Liochon&lt;/a&gt;. The thought of moving meta sounds scary to me though &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;but this patch doesn&amp;#39;t intend to affect that part&amp;#93;&lt;/span&gt;.&lt;/p&gt;</comment>
                            <comment id="13505501" author="ram_krish" created="Wed, 28 Nov 2012 14:44:40 +0000"  >&lt;p&gt;@Deva&lt;br/&gt;
Patch looks good.. We may need to check on log rolling, log splitting etc...&lt;br/&gt;
One thing is if the META has just moved from one RS to another RS and the first RS crashes.  We will be having a the HLog for the META also with it(because it was holding it).. So in this i think we need not split that META hlog right? Correct me if am wrong here.&lt;/p&gt;</comment>
                            <comment id="13505785" author="devaraj" created="Wed, 28 Nov 2012 18:57:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ram_krish&quot; class=&quot;user-hover&quot; rel=&quot;ram_krish&quot;&gt;ramkrishna.s.vasudevan&lt;/a&gt;, thanks for looking. Yes, this patch is not complete yet and the next iteration will have the missing functionalities. I&apos;ll also answer your questions in the next iteration.&lt;/p&gt;</comment>
                            <comment id="13505791" author="stack" created="Wed, 28 Nov 2012 19:03:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ram_krish&quot; class=&quot;user-hover&quot; rel=&quot;ram_krish&quot;&gt;ramkrishna.s.vasudevan&lt;/a&gt; On if a .META. moved from one RS to another, and first crashes, then when we go to recover, we will see it wasn&apos;t carrying .META. so we won&apos;t try and recover it (as is the case w/ any other region).&lt;/p&gt;</comment>
                            <comment id="13505803" author="stack" created="Wed, 28 Nov 2012 19:14:40 +0000"  >&lt;p&gt;On the approach in the sketch patch:&lt;/p&gt;

&lt;p&gt;Passing a flag to instantiateHLog when its meta is a little awkward.  Ripples all the ways down.  Would instantiateMetaHLog and createMetaHLog in the factory be more plain about what is going on?  Runs into a wall at FSHLog though though here, is there anything in the  log name that would denote it a .META. WAL?&lt;/p&gt;

&lt;p&gt;Patch doesn&apos;t look bad so far.  Not too intrusive for big payback.&lt;/p&gt;

&lt;p&gt;I was thinking this facility would come in as part of the multiwal work... if multiwals, make provision for an extra if carrying .meta..... but this seems like shorter path.  Do you think this work will get in the way of the multiwal feature?&lt;/p&gt;
</comment>
                            <comment id="13505896" author="devaraj" created="Wed, 28 Nov 2012 21:13:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;, yes, I am trying to keep the patch as less intrusive as I can. The fact that the multiwal is being done for META only helps towards that (for example, replication won&apos;t need to be tweaked since replication is not done for META entries, etc.). I&apos;ll check on the flag comment and see if I can introduce new methods rather than use a flag..&lt;/p&gt;</comment>
                            <comment id="13506204" author="ram_krish" created="Thu, 29 Nov 2012 04:24:49 +0000"  >&lt;blockquote&gt;&lt;p&gt;we will see it wasn&apos;t carrying .META. so we won&apos;t try and recover it &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes that is true...MetaServerServerShutDownHandler alone should be handling the split of META hlog.  The normal SSH will handle only the other HLog.&lt;/p&gt;
</comment>
                            <comment id="13506314" author="yuzhihong@gmail.com" created="Thu, 29 Nov 2012 08:13:33 +0000"  >&lt;p&gt;I wonder what kind of data structure should be in place for the FSHLog instances (two for the region server hosting .META.) so that multiple WAL implementation would be more intuitive.&lt;br/&gt;
Previously, close / deletion of HLog operates on the single instance. Now things start to get more interesting.&lt;/p&gt;</comment>
                            <comment id="13506730" author="tlipcon" created="Thu, 29 Nov 2012 19:54:35 +0000"  >&lt;p&gt;I agree it seems to make sense to lump this with the multi-WAL work. Perhaps an interface like &quot;WALFactory&quot; or &quot;WALProvider&quot;, which, given a region name, gives back a WAL instance? The basic implementation would always provide the single WAL. Then, we could add the feature that returns a different WAL for META alone. More complex implementations could choose to give different tenants of a cluster separate WALs, etc.&lt;/p&gt;</comment>
                            <comment id="13506884" author="yuzhihong@gmail.com" created="Thu, 29 Nov 2012 22:21:07 +0000"  >&lt;p&gt;We already have HLogFactory in trunk.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;to lump this with the multi-WAL work&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Can I interpret the above as saying that multi-WAL work should be done at the same time, if not earlier ?&lt;/p&gt;

&lt;p&gt;Since HLogFactory can hand out the unique instance for .META., it is not far from handing out different instances (for different regions) which is what &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5699&quot; title=&quot;Run with &amp;gt; 1 WAL in HRegionServer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5699&quot;&gt;&lt;del&gt;HBASE-5699&lt;/del&gt;&lt;/a&gt; tries to do.&lt;/p&gt;</comment>
                            <comment id="13506923" author="devaraj" created="Thu, 29 Nov 2012 23:10:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tlipcon&quot; class=&quot;user-hover&quot; rel=&quot;tlipcon&quot;&gt;Todd Lipcon&lt;/a&gt;, good points there. But I&apos;d like to separate the META SPOF work from the full fledged multiwal work (for the full multi-wal case, we&apos;d need to fix up things like replication, and those can be skipped from the meta-only design that this jira attempts to do).&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yuzhihong%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;yuzhihong@gmail.com&quot;&gt;Ted Yu&lt;/a&gt;, I guess you are right. In theory, one could read the HLogFactory as the WALFactory... &lt;/p&gt;

&lt;p&gt;Thoughts? (i am in the process of extending the patch I previously posted to a fully functional one)&lt;/p&gt;</comment>
                            <comment id="13506953" author="tlipcon" created="Thu, 29 Nov 2012 23:51:57 +0000"  >&lt;p&gt;Yea, I don&apos;t think you need to strictly sequence this after the multi-WAL work. But it would be nice to have the &quot;end goal&quot; in mind while doing this work. Sorry, haven&apos;t had time to look at the in-progress patch, but if there&apos;s a simple solution that works OK now, no sense blocking it for the perfect end-game solution later.&lt;/p&gt;</comment>
                            <comment id="13507250" author="nkeywal" created="Fri, 30 Nov 2012 10:31:42 +0000"  >&lt;p&gt;To me, there are some stuff that are nice to have in multiwal but very useful here:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;it&apos;s better to have only one table in the wal with &quot;.meta.&quot;&lt;/li&gt;
	&lt;li&gt;it&apos;s would be great to be able to configure the replication factor for this wal&lt;/li&gt;
	&lt;li&gt;having a separate wal for meta should be the only option (it could make sense short term to have it as an option for safety, but it would be temporary)&lt;/li&gt;
	&lt;li&gt;there is no real split of the .meta. wal (at least conceptually: all regions ends up on the same server..). There is some room for (premature?) optimization there.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13508419" author="devaraj" created="Mon, 3 Dec 2012 00:35:50 +0000"  >&lt;p&gt;A more complete version. Testing in progress. This patch adds APIs to do with META in some classes (as opposed to a flag, as suggested by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; earlier). The logs for META region is written in a special file ending with &quot;.META&quot;. The SSH&apos;s process method treats META hlogs with higher priority and splits them first, and as soon as the split is done, tries to assign them, and then goes on to split other regions / assignments. I have not made changes to how the &lt;del&gt;ROOT&lt;/del&gt; region is handled, and the reason is that it is very very likely the case that the &lt;del&gt;ROOT&lt;/del&gt;&apos;s region&apos;s edits are already persisted on disk (and in case folks feel that &lt;del&gt;ROOT&lt;/del&gt; should be handled as well, it probably can be done in a follow up..).&lt;/p&gt;</comment>
                            <comment id="13508425" author="yuzhihong@gmail.com" created="Mon, 3 Dec 2012 01:00:13 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    List&amp;lt;ServerName&amp;gt; serverNames = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;ServerName&amp;gt;();
+    serverNames.add(serverName);
+    List&amp;lt;Path&amp;gt; logDirs = getLogDirs(serverNames);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The first two lines above can be moved below the if block which checks logDirs.isEmpty()&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+   * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException
+   *             &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; there was an error &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; splitting any log file
+   * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; cumulative size of the logfiles split
+   * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException 
+   */
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; splitMetatLogDistributed(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; List&amp;lt;Path&amp;gt; logDirs) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Please group the @throws lines together. The method name is misspelled - I couldn&apos;t find where it is called.&lt;br/&gt;
I think the above method is eclipsed by splitMetaLogDistributed() which appears later.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (isCarryingMeta() || isCarryingRoot()) {
+        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
+          LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Splitting META logs &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &quot;&lt;/span&gt; + serverName);
+          &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.shouldSplitHlog) {
+            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.services.getMasterFileSystem().splitMetaLog(serverName);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The check for ROOT region above is for assigning ROOT. Suggest making the check of ROOT and .META. separate so that the logic is clearer.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; HLog instantiateMetaHLog(Path rootdir, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; logName) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
+    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; HLogFactory.createMetaHLog(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.fs.getBackingFs(), rootdir, logName, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.conf,
+        getMETAWALActionListeners(), &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.serverNameFromMasterPOV.toString());
+  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above method is only called by setupMetaWAL(). Can we merge it with setupMetaWAL() ?&lt;br/&gt;
nit: getMETAWALActionListeners(), do we need to make all 4 letters of Meta capitalized ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;ISALIVE: &quot;&lt;/span&gt; + leases.isAlive() + &lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt; +cacheFlusher.isAlive() + &lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt;+ &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.compactionChecker.isAlive() + &lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt; + hlogRoller.isAlive() + &lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt; + metaHlogRoller.isAlive()); &lt;span class=&quot;code-comment&quot;&gt;//REMOVETHIS&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;As the comment says: remove in next patch.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+class MetaLogRoller &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; LogRoller {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Consider putting MetaLogRoller in its own class.&lt;/p&gt;

&lt;p&gt;For MetaServices.java, please add license and audience annotation.&lt;/p&gt;</comment>
                            <comment id="13508999" author="enis" created="Mon, 3 Dec 2012 20:08:59 +0000"  >&lt;blockquote&gt;&lt;p&gt;and in case folks feel that ROOT should be handled as well, it probably can be done in a follow up&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I think JD has updated the patch for removing ROOT in favor of ZK. &lt;/p&gt;</comment>
                            <comment id="13509046" author="devaraj" created="Mon, 3 Dec 2012 21:08:44 +0000"  >&lt;p&gt;Addresses most of the comments..&lt;/p&gt;

&lt;p&gt;One thing I didn&apos;t change is &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;The check for ROOT region above is for assigning ROOT ..&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3171&quot; title=&quot;Drop ROOT and instead store META location(s) directly in ZooKeeper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3171&quot;&gt;&lt;del&gt;HBASE-3171&lt;/del&gt;&lt;/a&gt;, there is work underway to remove &lt;del&gt;ROOT&lt;/del&gt; .. So not much gain here to address things to do with how the root region is handled. I have left it as such (with a known and a very corner case that if the server holding the root&apos;s region crashes before the region&apos;s edits are persisted, the assignment of the region might be an issue).&lt;/p&gt;

&lt;p&gt;Manual tests seemed to indicate things are working well. I&apos;ll start the full set of unit tests now. &lt;/p&gt;</comment>
                            <comment id="13509360" author="devaraj" created="Tue, 4 Dec 2012 00:10:57 +0000"  >&lt;p&gt;Trying hadoopqa.&lt;/p&gt;</comment>
                            <comment id="13509513" author="hadoopqa" created="Tue, 4 Dec 2012 05:07:47 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12555829/7213-in-progress.2.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12555829/7213-in-progress.2.2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 99 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 26 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.catalog.TestMetaReaderEditor&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3443//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3443//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3443//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3443//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3443//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3443//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3443//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3443//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3443//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3443//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3443//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3443//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3443//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3443//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3443//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3443//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3443//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3443//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13509536" author="devaraj" created="Tue, 4 Dec 2012 06:15:38 +0000"  >&lt;p&gt;TestMetaReaderEditor (timed out in the hadoopqa run) passes locally..&lt;/p&gt;</comment>
                            <comment id="13509537" author="stack" created="Tue, 4 Dec 2012 06:16:01 +0000"  >&lt;p&gt;.META. file ends in &apos;.META&apos; and not &apos;.META.&apos;?  Can&apos;t it end in .log?  xxxxxx.log.META looks a bit odd and I&apos;m sure will trip up someone else trying to find WALs for whatever reason.&lt;/p&gt;

&lt;p&gt;How does splitMetaLog work?  It is passed a server name and if we find logs in the filesystem, then we&apos;ll split its logs?  What if .META. is currently assigned? The splitting will be to no avail?  When would we ever log this message:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;No logs to split&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Should that be .META. logs to split?&lt;/p&gt;

&lt;p&gt;Methods usually have a space between them rather than:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  }
+  /**
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;... in hbase codebase boss.&lt;/p&gt;

&lt;p&gt;Why emit two log lines when you could have one that varies with whether meta or not:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
             LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Done splitting &quot;&lt;/span&gt; + path);
+            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (path.endsWith(HConstants.META_HLOG_FILE_EXTN)) {
+              LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Done splitting meta region&quot;&lt;/span&gt;);
+            }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Should be a isMetaWAL method?  to do the looking for META_LOG_FILE_EXTN... since used in a few places.&lt;/p&gt;

&lt;p&gt;In process, we have code for meta and root handling in the general ServerShutdownHandler.  Should the root handling be up in RootServerShutdownHandler, in its process, which then calls through to the general SSH#process and ditto for the .META.?  (Might mean ROOT needs to subclass Meta for now... ).  We maybe should have done it before but was a bit tougher since had to do the log splitting first...  could have broke up the process more ... but might be easier now these root and meta handlings are first thing done in the process method.&lt;/p&gt;

&lt;p&gt;Is this needed?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.services.getExecutorService().submit(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;);
+        &lt;span class=&quot;code-comment&quot;&gt;//typecast to SSH so that we don&apos;t &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; the above meta log split again
&lt;/span&gt;+        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.services.getExecutorService().submit((ServerShutdownHandler)&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Would make sense if you move the meta specific code to metaSSH, and ditto on ROOT?&lt;/p&gt;

&lt;p&gt;MetaServices Interface doesn&apos;t seem right?  Its all about a WAL.  What else would ever go in here?  Who uses this new Interface and its methods?  I don&apos;t see anything else in this patch using it.  I suppose MetaLogRoller  does but it is sitting beside RegionServer &amp;#8211; could be protected or package private &amp;#8211; yet its public in the Interface.  Hmm... i see that OpenRegionHandler uses it.  Can&apos;t RegionServer notice when its a meta region and do the setup etc., internally?  Ugh, maybe not looking at this OpenRegionHandler....how it needs the exact WAL?  What if you passed in the regionname to getWAL?  Then it internally would do the right thing.  You wouldn&apos;t have to add new methods?   Especially public ones?&lt;/p&gt;

&lt;p&gt;When we lose the .META. region, does the RS clean up its .META. log?&lt;/p&gt;

&lt;p&gt;I don&apos;t like extending the RegionServerServices because makes it harder mocking up an RSS... more stuff to add in.&lt;/p&gt;

&lt;p&gt;Should it be MetaFSHLog rather than FSLog w/ boolean args in constructor?  Just wondering.&lt;/p&gt;

&lt;p&gt;You have this: +        LOG.info(&quot;CREATED writer &quot; + path); //REMOVETHIS&lt;/p&gt;

&lt;p&gt;We have to add this method?&lt;/p&gt;

&lt;p&gt;+    public static HLog createMetaHLog(final FileSystem fs, final Path root, final String logName,&lt;br/&gt;
+        final Configuration conf, final List&amp;lt;WALActionsListener&amp;gt; listeners,&lt;br/&gt;
+        final String prefix) throws IOException &lt;/p&gt;
{
+      return new FSHLog(fs, root, logName, HConstants.HREGION_OLDLOGDIR_NAME, 
+            conf, listeners, false, prefix, true);
+    }

&lt;p&gt;Nothing in say the log name that would clue us its a .META. file?  Could we preface the logName with .META. or something and then we don&apos;t have to pass flags to FSHLog?  Could have static isMetaWAL method that looks at log name and can tell it .META.?&lt;/p&gt;

&lt;p&gt;Import this in LogSplitter but not used: +import org.apache.hadoop.fs.PathFilter;&lt;/p&gt;

&lt;p&gt;Is this used:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private static final Pattern pattern = Pattern.compile(&quot;.&lt;b&gt;\\.&lt;br class=&quot;atl-forced-newline&quot; /&gt;d&lt;/b&gt;&quot;);&lt;br/&gt;
+  private static final Pattern pattern = Pattern.compile(&quot;.&lt;b&gt;\\.&lt;br class=&quot;atl-forced-newline&quot; /&gt;d&lt;/b&gt;(.META)*&quot;);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Good stuff.&lt;/p&gt;</comment>
                            <comment id="13509573" author="devaraj" created="Tue, 4 Dec 2012 08:06:32 +0000"  >&lt;blockquote&gt;&lt;p&gt;.META. file ends in &apos;.META&apos; and not &apos;.META.&apos;? Can&apos;t it end in .log? xxxxxx.log.META looks a bit odd and I&apos;m sure will trip up someone else trying to find WALs for whatever reason.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Hmm.. &quot;xxxx.log.META&quot; sounds better..&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;How does splitMetaLog work? It is passed a server name and if we find logs in the filesystem, then we&apos;ll split its logs? &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes.. (much like how it&apos;s currently done for the non-meta logs)&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;What if .META. is currently assigned? The splitting will be to no avail?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Can you please explain when this can happen (that a RS hosting the .META. crashes, and before we do the log splitting, the .META. gets assigned to someone else)? But in general, the behavior shouldn&apos;t change in the patch from what the behavior currently is...&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;When would we ever log this message:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;LOG.info(&quot;No logs to split&quot;);&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is the same log that gets emitted for the general case (in the current codebase). Look at splitLog method in MasterFileSystem. Seems like when the logdir (.logs) doesn&apos;t exist, getLogDirs returns an empty list.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Should that be .META. logs to split?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes..&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Methods usually have a space between them rather than:&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Ack. I missed adding a space. I usually always add spaces without fail (smile)&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Why emit two log lines when you could have one that varies with whether meta or not:&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This was mostly for my debugging. I&apos;ll update this..&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Should be a isMetaWAL method? to do the looking for META_LOG_FILE_EXTN... since used in a few places.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yeah.. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;We maybe should have done it before but was a bit tougher since had to do the log splitting first... could have broke up the process more ..&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I went that route and backtracked.. The problem is that when a RS crashes, we will probably have that RS hosting many regions (including the catalog ones). To recover we have to call process() methods of both SSH and MSSH as a pair. That seemed harder to maintain.. So I kept the existing semantics of one SSH process doing the work for both META and non-meta regions. As I have noted in a previous comment, I have explicitly not handled &lt;del&gt;ROOT&lt;/del&gt; since the root region is going to disappear post &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3171&quot; title=&quot;Drop ROOT and instead store META location(s) directly in ZooKeeper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3171&quot;&gt;&lt;del&gt;HBASE-3171&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Is this needed?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yeah, since the process() method handles both .META. and non-meta regions. My earlier comment explains why I am not very inclined to separate the handling in process(). But I&apos;ll reconsider this part and see if I can do something better.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;MetaServices Interface doesn&apos;t seem right? Its all about a WAL.  You wouldn&apos;t have to add new methods? Especially public ones?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yeah, I shouldn&apos;t have made that a public class, etc. and maybe called it MetaWALServices or something. Would doing that alleviate this concern?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;When we lose the .META. region, does the RS clean up its .META. log?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I need to check on this.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I don&apos;t like extending the RegionServerServices because makes it harder mocking up an RSS... more stuff to add in.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The new methods could just return null (and that&apos;s what I have done in the existing mock classes). But I&apos;ll consider this.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Should it be MetaFSHLog rather than FSLog w/ boolean args in constructor? Just wondering.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;You mean another class.. Seems overkill to me.. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;We have to add this method?&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;public static HLog createMetaHLog(final FileSystem fs, final Path root, final String logName,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Nothing in say the log name that would clue us its a .META. file? Could we preface the logName with .META. or something and then we don&apos;t have to pass flags to FSHLog? Could have static isMetaWAL method that looks at log name and can tell it .META.?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The &quot;logname&quot; (and this is there in the current trunk) is kind of misleading. It actually signifies the directory name (and maybe I should update the code to call it logdir everywhere)... So in that sense, there is nothing indicative of &quot;meta&quot;. Also, I&apos;d prefer passing explicit booleans rather than string based conditionals..&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Is this used:&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;private static final Pattern pattern = Pattern.compile(&quot;.&lt;br class=&quot;atl-forced-newline&quot; /&gt;.&lt;br/&gt;
d&quot;);&lt;br/&gt;
+ private static final Pattern pattern = Pattern.compile(&quot;.&lt;br class=&quot;atl-forced-newline&quot; /&gt;.&lt;br/&gt;
d(.META)*&quot;);&lt;/p&gt;</comment>
                            <comment id="13509575" author="devaraj" created="Tue, 4 Dec 2012 08:09:18 +0000"  >&lt;p&gt;Sorry, I hit the submit button too soon. Ignore the last few lines in the last comment (starting from &quot;Is this used&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;

&lt;p&gt;On the last bit:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Is this used:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;private static final Pattern pattern = Pattern.compile(&quot;.&lt;br class=&quot;atl-forced-newline&quot; /&gt;.d&quot;);&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;+ private static final Pattern pattern = Pattern.compile(&quot;.&lt;br class=&quot;atl-forced-newline&quot; /&gt;.d(.META)*&quot;);&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, otherwise the master deletes the .META hlog files.. (this makes it so that files are accepted with .META extensions).&lt;/p&gt;</comment>
                            <comment id="13510057" author="devaraj" created="Tue, 4 Dec 2012 22:03:30 +0000"  >&lt;blockquote&gt;&lt;p&gt;When we lose the .META. region, does the RS clean up its .META. log?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t think I need to do anything specific here. The existing code should handle this already.&lt;/p&gt;</comment>
                            <comment id="13510355" author="devaraj" created="Wed, 5 Dec 2012 08:29:14 +0000"  >&lt;p&gt;Okay, this patch addresses most of the comments. The thing that I have left here not-handled is the (corner) case of the RS carrying the &lt;del&gt;root&lt;/del&gt; region dying before its edits are persisted (splitMetaLog doesn&apos;t take into account &lt;del&gt;root&lt;/del&gt; and the &lt;del&gt;root&lt;/del&gt; edits are not written to a separate file either). The reason is &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3171&quot; title=&quot;Drop ROOT and instead store META location(s) directly in ZooKeeper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3171&quot;&gt;&lt;del&gt;HBASE-3171&lt;/del&gt;&lt;/a&gt; is removing the &lt;del&gt;root&lt;/del&gt; table/region and so not much point in trying to address &lt;del&gt;root&lt;/del&gt; here .. &lt;br/&gt;
I have added an API getWAL(HRegionInfo) in RegionServerServices, and when the argument is null, the default/common WAL is returned (imagine a WAL for meta, and maybe some other regions, and a common WAL for everything else).&lt;br/&gt;
I have broken up the ServerShutdownHandler.process into two parts and moved some code into MetaServerShutdownHandler.&lt;/p&gt;</comment>
                            <comment id="13510706" author="stack" created="Wed, 5 Dec 2012 19:26:58 +0000"  >&lt;p&gt;Do other logs have a &apos;.log&apos; suffix?  You add .hlog with the below?&lt;/p&gt;

&lt;p&gt;+  /** The META region&apos;s HLog filename extension */&lt;br/&gt;
+  public static final String META_HLOG_FILE_EXTN = &quot;.meta.hlog&quot;;&lt;/p&gt;

&lt;p&gt;The refactoring in MasterFileSystem to make a new getLogDirs method is nice.&lt;/p&gt;

&lt;p&gt;The SSH changes look good.  There is a hole though at the moment around &lt;del&gt;ROOT&lt;/del&gt; handling?  We need to wait on &lt;del&gt;ROOT&lt;/del&gt; removal before this can go in, right?  (The RootServerShutdownHandler would go....or should RSSH be calling MSSH when it is done w/ its process?)&lt;/p&gt;

&lt;p&gt;This below is given to an executor?  Should have a better name than handler?&lt;/p&gt;

&lt;p&gt;+  private UncaughtExceptionHandler handler;&lt;/p&gt;

&lt;p&gt;Will we always create the metahlog just because getMetaHLog was called?  Even if we are NOT carrying .META.:&lt;/p&gt;

&lt;p&gt;+  private HLog getMetaWAL() throws IOException {&lt;br/&gt;
+    if (this.hlogForMeta == null) {&lt;/p&gt;

&lt;p&gt;If .META. moves away from a RS and then comes back, we&apos;ll just use the already made meta log roller, etc.?&lt;/p&gt;

&lt;p&gt;Replication will skip this .META. log?&lt;/p&gt;

&lt;p&gt;It is intentional that MetaServices is still in the patch?&lt;/p&gt;

&lt;p&gt;Changing param name from logName to logDir is good stuff&lt;/p&gt;

&lt;p&gt;In SplitLogManager, we have added splitMetaLogDistributed.  A more generic method might have been splitLogDistributed that took a file path filter instead...&lt;/p&gt;

&lt;p&gt;There is a define for .META. HRegionInfo in HRegionInfo#FIRST_META_REGIONINFO so you don&apos;t have to make it each time, FYI.&lt;/p&gt;

&lt;p&gt;Don&apos;t have to deprecate the below I&apos;d say.  This is for 0.96 the singularity and this is on a class with annotation @InterfaceAudience.Private&lt;/p&gt;

&lt;p&gt;   /** @return the HLog */&lt;br/&gt;
+  @Deprecated&lt;br/&gt;
   public HLog getWAL();&lt;br/&gt;
+  &lt;br/&gt;
+  /** @return the HLog for a particular region. Pass null for getting the &lt;br/&gt;
+   * default (common) WAL */&lt;br/&gt;
+  public HLog getWAL(HRegionInfo regionInfo) throws IOException;&lt;/p&gt;

&lt;p&gt;Here....&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;return new Path(dir, prefix + &quot;.&quot; + filenum);&lt;br/&gt;
+    String child = prefix + &quot;.&quot; + filenum;&lt;br/&gt;
+    if (forMeta) 
{
+      child += HConstants.META_HLOG_FILE_EXTN;
+    }
&lt;p&gt;+    return new Path(dir, child);&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;the &apos;normal&apos; WALs do not seem to pick up the suffix in here.  Is it possible that the &apos;.log&apos; is appended elsewhere?   Are your .META. logs getting double &apos;.log&apos;?  Just wondering.&lt;/p&gt;


&lt;p&gt;Good stuff&lt;/p&gt;
</comment>
                            <comment id="13510829" author="devaraj" created="Wed, 5 Dec 2012 22:07:42 +0000"  >&lt;blockquote&gt;&lt;p&gt;Do other logs have a &apos;.log&apos; suffix? You add .hlog with the below?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Currently (in the trunk codebase), the log files don&apos;t have extension like .log or something (the files look like 192.168.1.8%2C60020%2C1354695930505.1354695931168). They are in directory called &quot;.logs/&amp;lt;region-server&amp;gt;&quot;. So I am wondering whether I should just have &quot;.meta&quot; as the suffix for the meta log files, and be done with it (as I had it in the previous patch). In the current patch, the meta logs have .meta.hlog as the extension. Or, would it make sense to change the log files to have &quot;.hlog&quot; extension as well? Please let me know..&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The SSH changes look good. There is a hole though at the moment around ROOT handling? We need to wait on ROOT removal before this can go in, right? (The RootServerShutdownHandler would go....or should RSSH be calling MSSH when it is done w/ its process?)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It can be done either way in theory (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3171&quot; title=&quot;Drop ROOT and instead store META location(s) directly in ZooKeeper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3171&quot;&gt;&lt;del&gt;HBASE-3171&lt;/del&gt;&lt;/a&gt; first or this first). On the hole, yes, if this patch goes in first, and if there is a case where the same RS hosts both the root and meta regions, and that RS goes down, and the root&apos;s edits weren&apos;t already persisted, there will be a problem. But given that the root doesn&apos;t have edits other than the one row to do with .META., it is unlikely that we will run into the hole in practice. But am okay to wait till &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3171&quot; title=&quot;Drop ROOT and instead store META location(s) directly in ZooKeeper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3171&quot;&gt;&lt;del&gt;HBASE-3171&lt;/del&gt;&lt;/a&gt; goes in (and that&apos;s a better way to line the commits, but would like to close on on the other comments).&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;This below is given to an executor? Should have a better name than handler?&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;+ private UncaughtExceptionHandler handler;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Will take a look and update.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Will we always create the metahlog just because getMetaHLog was called? Even if we are NOT carrying .META.:&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No. It&apos;ll be created on the first call to getMetaWAL (and getMetaWAL gets indirectly called only when we are asked to open the meta region in OpenRegionHandler)&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;If .META. moves away from a RS and then comes back, we&apos;ll just use the already made meta log roller, etc.?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Replication will skip this .META. log?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes. The MetaLogRoller doesn&apos;t &quot;register&quot; with the Replication folks when instantiated.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;It is intentional that MetaServices is still in the patch?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Mistake.. Will update.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;In SplitLogManager, we have added splitMetaLogDistributed. A more generic method might have been splitLogDistributed that took a file path filter instead...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Hmm.. Let me see..&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;There is a define for .META. HRegionInfo in HRegionInfo#FIRST_META_REGIONINFO so you don&apos;t have to make it each time, FYI.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I had seen this one but had forgotten to update code to use it.. will update.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Don&apos;t have to deprecate the below I&apos;d say. This is for 0.96 the singularity and this is on a class with annotation @InterfaceAudience.Private&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;/** @return the HLog */&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;+ @Deprecated&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;public HLog getWAL();&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Okay..&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Here....&lt;br/&gt;
return new Path(dir, prefix + &quot;.&quot; + filenum);&lt;br/&gt;
+ String child = prefix + &quot;.&quot; + filenum;&lt;br/&gt;
+ return new Path(dir, child);&lt;br/&gt;
the &apos;normal&apos; WALs do not seem to pick up the suffix in here. Is it possible that the &apos;.log&apos; is appended elsewhere? Are your .META. logs getting double &apos;.log&apos;? Just wondering.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No.. as I said before, the log files don&apos;t have the string extensions.. So what do you think - should I just remove the .hlog from the .meta.hlog extension that I did for meta hlogs? Or, leave .meta.hlog as it is and add .hlog to the non-meta hlog files, or, leave the non-meta hlog names as they are now?&lt;/p&gt;</comment>
                            <comment id="13510843" author="stack" created="Wed, 5 Dec 2012 22:18:54 +0000"  >&lt;blockquote&gt;&lt;p&gt;So I am wondering whether I should just have &quot;.meta&quot; as the suffix for the meta log files, and be done with it (as I had it in the previous patch).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes.  The &apos;.hlog&apos; is extraneous (I thought all log files had .log suffix &amp;#8211; sorry if I mislead)&lt;/p&gt;

&lt;p&gt;One more spin and I&apos;d say this patch is ready to go in.  Good on you DD.&lt;/p&gt;</comment>
                            <comment id="13510979" author="devaraj" created="Thu, 6 Dec 2012 00:38:01 +0000"  >&lt;blockquote&gt;&lt;p&gt;One more spin and I&apos;d say this patch is ready to go in. Good on you DD.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sweet... Here is an updated patch with the filename extn change, and with passing PathFilter in splitLogDistributed as per your last comments.&lt;/p&gt;</comment>
                            <comment id="13511030" author="devaraj" created="Thu, 6 Dec 2012 02:29:18 +0000"  >&lt;p&gt;I ran tests locally with the patch and they passed. I also ran some manual tests (killing region servers  after making sure some edits weren&apos;t persisted, etc.).&lt;/p&gt;</comment>
                            <comment id="13511109" author="stack" created="Thu, 6 Dec 2012 04:52:04 +0000"  >&lt;p&gt;This looks new (and important):&lt;/p&gt;

&lt;p&gt;+        splitLog(serverNames, META_FILTER);&lt;br/&gt;
+        splitLog(serverNames, NON_META_FILTER);&lt;/p&gt;

&lt;p&gt;I can remove this on commit:&lt;/p&gt;

&lt;p&gt;   /** @return the HLog */&lt;br/&gt;
   public HLog getWAL();&lt;/p&gt;

&lt;p&gt;Patch looks good to me.&lt;/p&gt;

&lt;p&gt;Lets wait some time on hbase-3171.  If it doesn&apos;t show up soon, we&apos;ll commit this.&lt;/p&gt;</comment>
                            <comment id="13511110" author="stack" created="Thu, 6 Dec 2012 04:52:43 +0000"  >&lt;p&gt;Marking critical so we don&apos;t forget it, so it goes in.&lt;/p&gt;</comment>
                            <comment id="13511137" author="devaraj" created="Thu, 6 Dec 2012 06:01:29 +0000"  >&lt;blockquote&gt;&lt;p&gt;I can remove this on commit:&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Oops.. apologies for missing the removal. This patch removes the interface method.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;This looks new (and important):&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yeah (smile). I noticed it recently..&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Lets wait some time on hbase-3171. If it doesn&apos;t show up soon, we&apos;ll commit this.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Okay. That makes sense. Thanks folks for reviewing the patch and providing good feedback.&lt;/p&gt;</comment>
                            <comment id="13530719" author="hadoopqa" created="Thu, 13 Dec 2012 06:15:21 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12556217/7213-2.8.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12556217/7213-2.8.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 102 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 23 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.regionserver.TestHRegionOnCluster&lt;br/&gt;
                  org.apache.hadoop.hbase.TestDrainingServer&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestMultiParallel&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestRSKilledWhenMasterInitializing&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3511//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3511//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3511//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3511//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3511//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3511//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3511//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3511//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3511//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3511//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3511//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3511//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3511//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3511//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3511//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3511//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3511//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3511//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13548888" author="devaraj" created="Wed, 9 Jan 2013 19:40:10 +0000"  >&lt;p&gt;Folks, should we commit this. It has been nearly 1.5 months since the patch was reviewed and +1&apos;ed. Since this patch is somewhat big, I&apos;d prefer this be closed sooner than later.. (can I do anything to expedite the commit for this patch).&lt;/p&gt;</comment>
                            <comment id="13549181" author="yuzhihong@gmail.com" created="Wed, 9 Jan 2013 23:27:07 +0000"  >&lt;p&gt;There&apos;re a few conflicts for patch v8:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-rw-r--r--  1 tyu  staff  1578 Jan  9 15:24 ./hbase-server/src/main/java/org/apache/hadoop/hbase/master/MasterFileSystem.java.rej
-rw-r--r--  1 tyu  staff  3086 Jan  9 15:24 ./hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java.rej
-rw-r--r--  1 tyu  staff  1380 Jan  9 15:24 ./hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/FSHLog.java.rej
-rw-r--r--  1 tyu  staff  323 Jan  9 15:24 ./hbase-server/src/test/java/org/apache/hadoop/hbase/util/MockRegionServerServices.java.rej
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;After they&apos;re fixed, let Hadoop QA run the test suite.&lt;/p&gt;</comment>
                            <comment id="13549269" author="devaraj" created="Thu, 10 Jan 2013 01:23:58 +0000"  >&lt;p&gt;Thanks for looking, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yuzhihong%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;yuzhihong@gmail.com&quot;&gt;Ted Yu&lt;/a&gt;. This is the rebased patch.&lt;/p&gt;</comment>
                            <comment id="13549302" author="hadoopqa" created="Thu, 10 Jan 2013 02:30:43 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12564079/7213-2.9.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12564079/7213-2.9.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces lines longer than 100&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestScannerTimeout&lt;br/&gt;
                  org.apache.hadoop.hbase.replication.TestReplication&lt;br/&gt;
                  org.apache.hadoop.hbase.master.TestMasterFailover&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestRSKilledWhenMasterInitializing&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestHRegionOnCluster&lt;br/&gt;
                  org.apache.hadoop.hbase.TestDrainingServer&lt;br/&gt;
                  org.apache.hadoop.hbase.TestLocalHBaseCluster&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 2 zombie test(s): 	at org.apache.hadoop.hbase.regionserver.TestSplitTransactionOnCluster.testSplitBeforeSettingSplittingInZKInternals(TestSplitTransactionOnCluster.java:738)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.TestSplitTransactionOnCluster.testSplitBeforeSettingSplittingInZK(TestSplitTransactionOnCluster.java:541)&lt;br/&gt;
	at org.apache.hadoop.hdfs.server.balancer.TestBalancerWithNodeGroup.testBalancerWithRackLocality(TestBalancerWithNodeGroup.java:220)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3956//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3956//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3956//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3956//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3956//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3956//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3956//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3956//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3956//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3956//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3956//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3956//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3956//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3956//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3956//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3956//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3956//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3956//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13549344" author="yuzhihong@gmail.com" created="Thu, 10 Jan 2013 03:53:01 +0000"  >&lt;p&gt;Running tests mentioned above against latest patch:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
test3686b(org.apache.hadoop.hbase.client.TestScannerTimeout)  Time elapsed: 0.007 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.lang.ArrayIndexOutOfBoundsException: -1
  at java.util.concurrent.CopyOnWriteArrayList.get(CopyOnWriteArrayList.java:343)
  at java.util.Collections$UnmodifiableList.get(Collections.java:1152)
  at org.apache.hadoop.hbase.HBaseTestingUtility.getRSForFirstRegionInTable(HBaseTestingUtility.java:1456)
  at org.apache.hadoop.hbase.client.TestScannerTimeout.test3686b(TestScannerTimeout.java:199)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It may not be related to the patch.&lt;br/&gt;
The following two may need closer look:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
testDataCorrectnessReplayingRecoveredEdits(org.apache.hadoop.hbase.regionserver.TestHRegionOnCluster)  Time elapsed: 85.445 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
org.apache.hadoop.hbase.client.RetriesExhaustedWithDetailsException: Failed 1 action: ExecutionException: 1 time,
  at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation$&lt;span class=&quot;code-object&quot;&gt;Process&lt;/span&gt;.processBatchCallback(HConnectionManager.java:2063)
  at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation$&lt;span class=&quot;code-object&quot;&gt;Process&lt;/span&gt;.access$900(HConnectionManager.java:1850)
  at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.processBatchCallback(HConnectionManager.java:1839)
  at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.processBatch(HConnectionManager.java:1818)
  at org.apache.hadoop.hbase.client.HTable.flushCommits(HTable.java:885)
  at org.apache.hadoop.hbase.client.HTable.doPut(HTable.java:695)
  at org.apache.hadoop.hbase.client.HTable.put(HTable.java:670)
  at org.apache.hadoop.hbase.regionserver.TestHRegionOnCluster.putDataAndVerify(TestHRegionOnCluster.java:127)
  at org.apache.hadoop.hbase.regionserver.TestHRegionOnCluster.testDataCorrectnessReplayingRecoveredEdits(TestHRegionOnCluster.java:115)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
testCorrectnessWhenMasterFailOver(org.apache.hadoop.hbase.regionserver.TestRSKilledWhenMasterInitializing)  Time elapsed: 23.843 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.lang.AssertionError
  at org.junit.Assert.fail(Assert.java:92)
  at org.junit.Assert.assertTrue(Assert.java:43)
  at org.junit.Assert.assertTrue(Assert.java:54)
  at org.apache.hadoop.hbase.regionserver.TestRSKilledWhenMasterInitializing.testCorrectnessWhenMasterFailOver(TestRSKilledWhenMasterInitializing.java:188)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13550341" author="devaraj" created="Thu, 10 Jan 2013 19:58:31 +0000"  >&lt;p&gt;Rebased (again). Also I fixed a bug in HMaster.java. Some of the unit test failures were legit and were caused by the bug.&lt;/p&gt;</comment>
                            <comment id="13550423" author="hadoopqa" created="Thu, 10 Jan 2013 21:12:49 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12564237/7213-2.10.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12564237/7213-2.10.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces lines longer than 100&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestScannerTimeout&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestMultiParallel&lt;br/&gt;
                  org.apache.hadoop.hbase.TestLocalHBaseCluster&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 3 zombie test(s): 	at org.apache.hadoop.hbase.regionserver.TestSplitTransactionOnCluster.testSplitBeforeSettingSplittingInZKInternals(TestSplitTransactionOnCluster.java:738)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.TestSplitTransactionOnCluster.testSplitBeforeSettingSplittingInZK(TestSplitTransactionOnCluster.java:541)&lt;br/&gt;
	at org.apache.hadoop.hdfs.server.balancer.TestBalancerWithNodeGroup.testBalancerWithRackLocality(TestBalancerWithNodeGroup.java:220)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3965//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3965//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3965//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3965//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3965//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3965//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3965//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3965//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3965//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3965//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3965//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3965//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3965//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3965//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3965//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3965//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3965//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3965//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13550873" author="stack" created="Fri, 11 Jan 2013 06:18:09 +0000"  >&lt;p&gt;I was trying this &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=devaraj&quot; class=&quot;user-hover&quot; rel=&quot;devaraj&quot;&gt;Devaraj Das&lt;/a&gt; and if fails to apply to trunk.  I tried to get it in but there is a big difference in this file: hbase-server/src/main/java/org/apache/hadoop/hbase/master/handler/ServerShutdownHandler.java.rej  Mind taking look see sir?&lt;/p&gt;

&lt;p&gt;Looking at the patch again, you might move the define that is out in HConstants local to the wal package:&lt;/p&gt;

&lt;p&gt;public static final String META_HLOG_FILE_EXTN = &quot;.meta&quot;;  &lt;/p&gt;

&lt;p&gt;Put it in HLog.java Interface?&lt;/p&gt;

&lt;p&gt;In MasterFileSystem, should a few of the public methods have some javadoc or comment?  For instance, I see splitMetaLog twice but one takes a ServerName and another takes a list of ServerNames but their bodies do different things.  It is a little confusing.&lt;/p&gt;

&lt;p&gt;Else looks good.  Lets get it in quick.  Elsewhere fellas are talking about removing MetaServerShutdown handler so would require yet another patch moving stuff around.  Good stuff.&lt;/p&gt;

</comment>
                            <comment id="13550922" author="devaraj" created="Fri, 11 Jan 2013 07:28:41 +0000"  >&lt;p&gt;Hopefully my last rebase &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13550923" author="devaraj" created="Fri, 11 Jan 2013 07:30:15 +0000"  >&lt;p&gt;Sorry, forgot to mention that I took into consideration the last 2-3 comments from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; in the last patch (and in the process, removed one unnecessary splitMetaLog).&lt;/p&gt;</comment>
                            <comment id="13550942" author="hadoopqa" created="Fri, 11 Jan 2013 07:47:46 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12564369/7213-2.11.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12564369/7213-2.11.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces lines longer than 100&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.regionserver.TestSplitTransaction&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3979//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3979//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3979//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3979//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3979//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3979//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3979//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3979//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3979//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3979//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3979//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3979//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3979//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3979//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3979//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3979//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3979//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3979//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13550981" author="stack" created="Fri, 11 Jan 2013 08:31:44 +0000"  >&lt;p&gt;Committed to trunk.  Thanks for the patch DD.&lt;/p&gt;</comment>
                            <comment id="13551018" author="hudson" created="Fri, 11 Jan 2013 09:54:20 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3730 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3730/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3730/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7213&quot; title=&quot;Have HLog files for .META. and -ROOT- edits only&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7213&quot;&gt;&lt;del&gt;HBASE-7213&lt;/del&gt;&lt;/a&gt; Have HLog files for .META. edits only (Revision 1431935)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/MasterFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/SplitLogManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/handler/MetaServerShutdownHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/handler/ServerShutdownHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/LogRoller.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/MetaLogRoller.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RegionServerServices.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/handler/OpenRegionHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/FSHLog.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLog.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogFactory.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogSplitter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/master/MockRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/util/MockRegionServerServices.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13551150" author="yuzhihong@gmail.com" created="Fri, 11 Jan 2013 14:55:18 +0000"  >&lt;p&gt;The test failure in TestSplitTransaction of QA run prevented large tests from running.&lt;/p&gt;

&lt;p&gt;I guess the failed tests (TestWALReplay, TestScannerTimeout) in trunk build #3730 were related to this patch.&lt;/p&gt;</comment>
                            <comment id="13551202" author="devaraj" created="Fri, 11 Jan 2013 15:46:48 +0000"  >&lt;p&gt;I will look at the test failures shortly.&lt;/p&gt;</comment>
                            <comment id="13551302" author="stack" created="Fri, 11 Jan 2013 17:39:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ted_yu&quot; class=&quot;user-hover&quot; rel=&quot;ted_yu&quot;&gt;Ted Yu&lt;/a&gt; Thanks Ted.  Let me back out the patch till we get green light from DD.&lt;/p&gt;</comment>
                            <comment id="13551306" author="stack" created="Fri, 11 Jan 2013 17:41:48 +0000"  >&lt;p&gt;Or, I&apos;ll let it for a few hours... if you get a chance to look see and make an addendum, that&apos;d be sweet &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=devaraj&quot; class=&quot;user-hover&quot; rel=&quot;devaraj&quot;&gt;Devaraj Das&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13551310" author="stack" created="Fri, 11 Jan 2013 17:43:04 +0000"  >&lt;p&gt;Here is what I committed last night.  I fixed a long line IIRC.  Putting this up in case we have to rollback.&lt;/p&gt;</comment>
                            <comment id="13551387" author="yuzhihong@gmail.com" created="Fri, 11 Jan 2013 18:50:30 +0000"  >&lt;p&gt;TestCatalogTrackerOnCluster failed in trunk builds #3730 and #3731. It fails locally as well.&lt;br/&gt;
I saw the following in test output:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2013-01-11 10:42:33,443 ERROR [Shutdown of org.apache.hadoop.hbase.fs.HFileSystem@2dc4df0b] hdfs.DFSClient(416): Failed to close file /user/tyu/hbase/.logs/10.10.8.161,51511,1357929747103/10.10.8.161%2C51511%2C1357929747103.1357929752224.meta
org.apache.hadoop.ipc.RemoteException: org.apache.hadoop.hdfs.server.namenode.LeaseExpiredException: No lease on /user/tyu/hbase/.logs/10.10.8.161,51511,1357929747103/10.10.8.161%2C51511%2C1357929747103.1357929752224.meta File does not exist. [Lease.  Holder: DFSClient_hb_rs_10.10.8.161,51511,1357929747103_891897357_107, pendingcreates: 1]
  at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.checkLease(FSNamesystem.java:1720)
  at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.checkLease(FSNamesystem.java:1711)
  at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBlock(FSNamesystem.java:1619)
  at org.apache.hadoop.hdfs.server.namenode.NameNode.addBlock(NameNode.java:729)
  at sun.reflect.GeneratedMethodAccessor13.invoke(Unknown Source)
  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
  at java.lang.reflect.Method.invoke(Method.java:601)
  at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:578)
  at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1393)
  at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1389)
  at java.security.AccessController.doPrivileged(Native Method)
  at javax.security.auth.Subject.doAs(Subject.java:415)
  at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1136)
  at org.apache.hadoop.ipc.Server$Handler.run(Server.java:1387)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Will attach test output.&lt;/p&gt;</comment>
                            <comment id="13551412" author="stack" created="Fri, 11 Jan 2013 19:08:33 +0000"  >&lt;p&gt;I reverted for now.&lt;/p&gt;</comment>
                            <comment id="13551427" author="devaraj" created="Fri, 11 Jan 2013 19:21:10 +0000"  >&lt;p&gt;Yeah the revert makes sense. Things may have changed in the codebase in the last couple of weeks leading to some test failures. I&apos;m investigating more deeply now.&lt;/p&gt;</comment>
                            <comment id="13551495" author="hudson" created="Fri, 11 Jan 2013 20:31:25 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3733 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3733/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3733/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7213&quot; title=&quot;Have HLog files for .META. and -ROOT- edits only&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7213&quot;&gt;&lt;del&gt;HBASE-7213&lt;/del&gt;&lt;/a&gt; Have HLog files for .META. edits only; REVERT (Revision 1432234)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/MasterFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/SplitLogManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/handler/MetaServerShutdownHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/handler/ServerShutdownHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/LogRoller.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/MetaLogRoller.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RegionServerServices.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/handler/OpenRegionHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/FSHLog.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLog.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogFactory.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogSplitter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/master/MockRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/util/MockRegionServerServices.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13551669" author="hudson" created="Fri, 11 Jan 2013 23:58:35 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #344 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/344/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/344/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7213&quot; title=&quot;Have HLog files for .META. and -ROOT- edits only&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7213&quot;&gt;&lt;del&gt;HBASE-7213&lt;/del&gt;&lt;/a&gt; Have HLog files for .META. edits only; REVERT (Revision 1432234)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/MasterFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/SplitLogManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/handler/MetaServerShutdownHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/handler/ServerShutdownHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/LogRoller.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/MetaLogRoller.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RegionServerServices.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/handler/OpenRegionHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/FSHLog.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLog.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogFactory.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogSplitter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/master/MockRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/util/MockRegionServerServices.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13551733" author="devaraj" created="Sat, 12 Jan 2013 01:31:16 +0000"  >&lt;p&gt;Okay this patch fixes the issue discovered by the tests. Specifically, in the previous iteration, I missed the closeWAL for the meta hlog when a regionserver is shutdown gracefully. I also needed to add some checks around deletion of the log directory in FSHLog.closeAndDelete method. I manually verified that the failing tests in &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3732/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3732/testReport/&lt;/a&gt; passes with this patch.&lt;/p&gt;

&lt;p&gt;This patch also fixes the 100+ line length problem.&lt;/p&gt;</comment>
                            <comment id="13551735" author="devaraj" created="Sat, 12 Jan 2013 01:32:52 +0000"  >&lt;p&gt;Let&apos;s try hudson.&lt;/p&gt;</comment>
                            <comment id="13551772" author="hadoopqa" created="Sat, 12 Jan 2013 02:41:44 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12564534/7213-2.12.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12564534/7213-2.12.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 1 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.replication.TestReplicationWithCompression&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.wal.TestWALReplay&lt;br/&gt;
                  org.apache.hadoop.hbase.TestLocalHBaseCluster&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 2 zombie test(s): 	at org.apache.hadoop.hdfs.server.balancer.TestBalancerWithNodeGroup.testBalancerWithRackLocality(TestBalancerWithNodeGroup.java:220)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3988//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3988//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3988//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3988//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3988//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3988//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3988//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3988//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3988//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3988//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3988//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3988//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3988//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3988//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3988//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3988//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3988//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3988//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13551794" author="yuzhihong@gmail.com" created="Sat, 12 Jan 2013 04:05:57 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void closeWAL(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; delete, HLog hlog) {
     &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
-      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.hlog != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
+      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (hlog != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above code deals with hlog parameter which happens to eclipse this.hlog&lt;br/&gt;
It would be better to distinguish the parameter more clearly from member variable.&lt;/p&gt;

&lt;p&gt;Currently HRegionServer has knowledge about the WAL for .META. and normal WAL. We can revisit this when multi-WAL is to be supported.&lt;/p&gt;</comment>
                            <comment id="13551993" author="devaraj" created="Sat, 12 Jan 2013 18:48:24 +0000"  >&lt;p&gt;Changed the part where I close the meta hlog, to make it less intrusive. In the previous patch, it seemed like I was putting state in FSHLog.closeAndDelete where it needed to keep track of directory being empty before deleting. Didn&apos;t like it so much. There is an API &apos;close&apos; in FSHLog, I am now calling that from HRegionServer (left in a comment there about the reason). &lt;/p&gt;

&lt;p&gt;I have also attached the diff file that does a diff between the earlier committed patch (7213-2.11.patch) and the current one, for quick reference on what changed.&lt;/p&gt;</comment>
                            <comment id="13551997" author="devaraj" created="Sat, 12 Jan 2013 18:55:44 +0000"  >&lt;blockquote&gt;&lt;p&gt;I have also attached the diff file that does a diff between the earlier committed patch (7213-2.11.patch) and the current one, for quick reference on what changed.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Deleted the file since it might confuse hadoopqa.. (but yeah the difference between my earlier patch a version of which got committed and this new one is only in the HRegionServer.closeWAL, and a line length fix)&lt;/p&gt;</comment>
                            <comment id="13552012" author="yuzhihong@gmail.com" created="Sat, 12 Jan 2013 19:29:37 +0000"  >&lt;p&gt;Patch v14 looks good.&lt;br/&gt;
I ran the following tests locally and they passed:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  684  mt -Dtest=TestCatalogTrackerOnCluster#testBadOriginalRootLocation 
  685  mt -Dtest=TestUpgradeFromHFileV1ToEncoding#testUpgrade 
  686  mt -Dtest=TestRestartCluster
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;There was one test failure which may not be related to the patch:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
testReplayEditsAfterRegionMovedWithMultiCF(org.apache.hadoop.hbase.regionserver.wal.TestWALReplay)  Time elapsed: 41.99 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
org.apache.hadoop.hbase.client.RetriesExhaustedException: Failed after attempts=10, exceptions:
Sat Jan 12 11:25:58 PST 2013, org.apache.hadoop.hbase.client.HTable$3@3c993730, org.apache.hadoop.hbase.RegionMovedException: Region moved to: hostname=10.120.104.184 port=56941.
Sat Jan 12 11:25:59 PST 2013, org.apache.hadoop.hbase.client.HTable$3@3c993730, java.io.IOException: Call to /10.120.104.184:56941 failed on local exception: java.io.EOFException
Sat Jan 12 11:26:00 PST 2013, org.apache.hadoop.hbase.client.HTable$3@3c993730, java.net.ConnectException: Connection refused
Sat Jan 12 11:26:01 PST 2013, org.apache.hadoop.hbase.client.HTable$3@3c993730, org.apache.hadoop.hbase.ipc.HBaseClient$FailedServerException: This server is in the failed servers list: /10.120.104.184:56941
Sat Jan 12 11:26:03 PST 2013, org.apache.hadoop.hbase.client.HTable$3@3c993730, java.net.ConnectException: Connection refused
Sat Jan 12 11:26:05 PST 2013, org.apache.hadoop.hbase.client.HTable$3@3c993730, java.net.ConnectException: Connection refused
Sat Jan 12 11:26:09 PST 2013, org.apache.hadoop.hbase.client.HTable$3@3c993730, java.net.ConnectException: Connection refused
Sat Jan 12 11:26:13 PST 2013, org.apache.hadoop.hbase.client.HTable$3@3c993730, java.net.ConnectException: Connection refused
Sat Jan 12 11:26:22 PST 2013, org.apache.hadoop.hbase.client.HTable$3@3c993730, java.net.ConnectException: Connection refused
Sat Jan 12 11:26:38 PST 2013, org.apache.hadoop.hbase.client.HTable$3@3c993730, java.net.ConnectException: Connection refused

  at org.apache.hadoop.hbase.client.ServerCallable.withRetries(ServerCallable.java:186)
  at org.apache.hadoop.hbase.client.HTable.get(HTable.java:561)
  at org.apache.hadoop.hbase.regionserver.wal.TestWALReplay.testReplayEditsAfterRegionMovedWithMultiCF(TestWALReplay.java:198)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13552017" author="yuzhihong@gmail.com" created="Sat, 12 Jan 2013 19:37:19 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.hlogForMeta != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
...
+        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.hlogForMeta.close();
+      }
       &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.hlog != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;For the first if statement above, should we check whether this.hlog is null ? If this.hlog is null, we should be calling this.hlogForMeta.closeAndDelete().&lt;/p&gt;

&lt;p&gt;Since there is constraint on order of closing multiple WALs, it would better if this logic is handled by FSHLog - can be done in another JIRA.&lt;/p&gt;</comment>
                            <comment id="13552024" author="hadoopqa" created="Sat, 12 Jan 2013 19:49:36 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12564585/7213-2.14.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12564585/7213-2.14.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 1 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestMultiParallel&lt;br/&gt;
                  org.apache.hadoop.hbase.replication.TestReplicationWithCompression&lt;br/&gt;
                  org.apache.hadoop.hbase.master.TestDistributedLogSplitting&lt;br/&gt;
                  org.apache.hadoop.hbase.TestLocalHBaseCluster&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 2 zombie test(s): 	at org.apache.hadoop.hdfs.server.balancer.TestBalancerWithNodeGroup.testBalancerWithRackLocality(TestBalancerWithNodeGroup.java:220)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3989//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3989//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3989//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3989//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3989//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3989//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3989//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3989//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3989//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3989//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3989//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3989//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3989//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3989//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3989//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3989//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3989//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3989//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13552031" author="devaraj" created="Sat, 12 Jan 2013 19:55:29 +0000"  >&lt;blockquote&gt;&lt;p&gt;For the first if statement above, should we check whether this.hlog is null ? If this.hlog is null, we should be calling this.hlogForMeta.closeAndDelete().&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t think we need to worry about it. We will not have a case where &lt;em&gt;hlogForMeta&lt;/em&gt; is non-null and &lt;em&gt;hlog&lt;/em&gt; is null (&lt;em&gt;hlog&lt;/em&gt; is initialized before &lt;em&gt;hlogForMeta&lt;/em&gt;).&lt;/p&gt;</comment>
                            <comment id="13552042" author="devaraj" created="Sat, 12 Jan 2013 20:11:29 +0000"  >&lt;p&gt;Verified that the tests pass locally.&lt;/p&gt;</comment>
                            <comment id="13552052" author="yuzhihong@gmail.com" created="Sat, 12 Jan 2013 20:38:02 +0000"  >&lt;p&gt;Re-attaching patch v14.&lt;/p&gt;</comment>
                            <comment id="13552074" author="hadoopqa" created="Sat, 12 Jan 2013 21:46:19 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12564591/7213-2.14.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12564591/7213-2.14.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 1 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestScannerTimeout&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestMultiParallel&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestHRegionOnCluster&lt;br/&gt;
                  org.apache.hadoop.hbase.master.TestRollingRestart&lt;br/&gt;
                  org.apache.hadoop.hbase.TestLocalHBaseCluster&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 4 zombie test(s): 	at org.apache.hadoop.hbase.regionserver.TestSplitTransactionOnCluster.testSplitBeforeSettingSplittingInZKInternals(TestSplitTransactionOnCluster.java:738)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.TestSplitTransactionOnCluster.testSplitBeforeSettingSplittingInZK(TestSplitTransactionOnCluster.java:541)&lt;br/&gt;
	at org.apache.hadoop.hdfs.server.balancer.TestBalancerWithNodeGroup.testBalancerWithRackLocality(TestBalancerWithNodeGroup.java:220)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3991//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3991//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3991//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3991//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3991//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3991//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3991//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3991//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3991//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3991//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3991//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3991//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3991//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3991//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3991//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3991//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3991//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3991//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13552131" author="zjushch" created="Sun, 13 Jan 2013 03:36:03 +0000"  >&lt;p&gt;Run the failed test TestMultiParallel on local PC for several times.&lt;/p&gt;

&lt;p&gt;Without patch,passed 15 times;&lt;br/&gt;
With 7213-2.14.patch,4 failed of total 10;&lt;/p&gt;

&lt;p&gt;Following is the failed tests&apos; stacktrace:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.hadoop.hbase.client.RetriesExhaustedWithDetailsException: Failed 37 actions: ExecutionException: 37 times,
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation$&lt;span class=&quot;code-object&quot;&gt;Process&lt;/span&gt;$BatchErrors.makeException(HConnectionManager.java:2106)
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation$&lt;span class=&quot;code-object&quot;&gt;Process&lt;/span&gt;$BatchErrors.rethrowIfAny(HConnectionManager.java:2089)
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation$&lt;span class=&quot;code-object&quot;&gt;Process&lt;/span&gt;.processBatchCallback(HConnectionManager.java:2071)
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation$&lt;span class=&quot;code-object&quot;&gt;Process&lt;/span&gt;.access$900(HConnectionManager.java:1850)
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.processBatchCallback(HConnectionManager.java:1839)
        at org.apache.hadoop.hbase.client.HTable.batch(HTable.java:601)
        at org.apache.hadoop.hbase.client.TestMultiParallel.testBatchWithPut(TestMultiParallel.java:303)
 
org.apache.hadoop.hbase.client.RetriesExhaustedWithDetailsException: Failed 321 actions:
ExecutionException: 321 times,
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation$&lt;span class=&quot;code-object&quot;&gt;Process&lt;/span&gt;$BatchErrors.makeException(HConnectionManager.java:2106)
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation$&lt;span class=&quot;code-object&quot;&gt;Process&lt;/span&gt;$BatchErrors.rethrowIfAny(HConnectionManager.java:2089)
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation$&lt;span class=&quot;code-object&quot;&gt;Process&lt;/span&gt;.processBatchCallback(HConnectionManager.java:2071)
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation$&lt;span class=&quot;code-object&quot;&gt;Process&lt;/span&gt;.access$900(HConnectionManager.java:1850)
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.processBatchCallback(HConnectionManager.java:1839)
        at org.apache.hadoop.hbase.client.HTable.batch(HTable.java:601)
        at org.apache.hadoop.hbase.client.TestMultiParallel.testBatchWithDelete(TestMultiParallel.java:331)
 
org.apache.hadoop.hbase.client.RetriesExhaustedWithDetailsException: Failed 321 actions:
ExecutionException: 321 times,
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation$&lt;span class=&quot;code-object&quot;&gt;Process&lt;/span&gt;$BatchErrors.makeException(HConnectionManager.java:2106)
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation$&lt;span class=&quot;code-object&quot;&gt;Process&lt;/span&gt;$BatchErrors.rethrowIfAny(HConnectionManager.java:2089)
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation$&lt;span class=&quot;code-object&quot;&gt;Process&lt;/span&gt;.processBatchCallback(HConnectionManager.java:2071)
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation$&lt;span class=&quot;code-object&quot;&gt;Process&lt;/span&gt;.access$900(HConnectionManager.java:1850)
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.processBatchCallback(HConnectionManager.java:1839)
        at org.apache.hadoop.hbase.client.HTable.batch(HTable.java:601)
        at org.apache.hadoop.hbase.client.TestMultiParallel.testHTableDeleteWithList(TestMultiParallel.java:360)
 
org.apache.hadoop.hbase.client.RetriesExhaustedWithDetailsException: Failed 100 actions:
ExecutionException: 100 times,
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation$&lt;span class=&quot;code-object&quot;&gt;Process&lt;/span&gt;$BatchErrors.makeException(HConnectionManager.java:2106)
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation$&lt;span class=&quot;code-object&quot;&gt;Process&lt;/span&gt;$BatchErrors.rethrowIfAny(HConnectionManager.java:2089)
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation$&lt;span class=&quot;code-object&quot;&gt;Process&lt;/span&gt;.processBatchCallback(HConnectionManager.java:2071)
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation$&lt;span class=&quot;code-object&quot;&gt;Process&lt;/span&gt;.access$900(HConnectionManager.java:1850)
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.processBatchCallback(HConnectionManager.java:1839)
        at org.apache.hadoop.hbase.client.HTable.batch(HTable.java:601)
        at org.apache.hadoop.hbase.client.TestMultiParallel.testBatchWithManyColsInOneRowGetAndPut(TestMultiParallel.java:394)

org.apache.hadoop.hbase.client.RetriesExhaustedWithDetailsException: Failed 358 actions:
ExecutionException: 358 times,
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation$&lt;span class=&quot;code-object&quot;&gt;Process&lt;/span&gt;$BatchErrors.makeException(HConnectionManager.java:2106)
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation$&lt;span class=&quot;code-object&quot;&gt;Process&lt;/span&gt;$BatchErrors.rethrowIfAny(HConnectionManager.java:2089)
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation$&lt;span class=&quot;code-object&quot;&gt;Process&lt;/span&gt;.processBatchCallback(HConnectionManager.java:2071)
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation$&lt;span class=&quot;code-object&quot;&gt;Process&lt;/span&gt;.access$900(HConnectionManager.java:1850)
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.processBatchCallback(HConnectionManager.java:1839)
        at org.apache.hadoop.hbase.client.HTable.batch(HTable.java:601)
        at org.apache.hadoop.hbase.client.TestMultiParallel.testBatchWithMixedActions(TestMultiParallel.java:459)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;FYI &lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="13552231" author="devaraj" created="Sun, 13 Jan 2013 16:42:08 +0000"  >&lt;p&gt;I am looking at the TestMultiParallel. I am at this point just can&apos;t see how this patch could cause the test failure..&lt;/p&gt;</comment>
                            <comment id="13552245" author="yuzhihong@gmail.com" created="Sun, 13 Jan 2013 17:16:18 +0000"  >&lt;p&gt;Test output for TestMultiParallel failure.&lt;/p&gt;</comment>
                            <comment id="13552249" author="hadoopqa" created="Sun, 13 Jan 2013 17:23:09 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12564621/TEST-org.apache.hadoop.hbase.client.TestMultiParallel.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12564621/TEST-org.apache.hadoop.hbase.client.TestMultiParallel.xml&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 5 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3993//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3993//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13552418" author="zjushch" created="Mon, 14 Jan 2013 03:58:24 +0000"  >&lt;p&gt;From&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; HLog getWAL(HRegionInfo regionInfo) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    &lt;span class=&quot;code-comment&quot;&gt;//TODO: at some point &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; should delegate to the HLogFactory
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;//currently, we don&apos;t care about the region as much as we care about the 
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;//table.. (hence checking the tablename below)
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (regionInfo != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; 
        Arrays.equals(regionInfo.getTableName(), HConstants.META_TABLE_NAME)) {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; getMetaWAL();
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;what about ROOT region? we put its logs with other user regions?&lt;br/&gt;
In MetaServerShutdownHadnler, we consider META and ROOT both are meta regions.&lt;/p&gt;


&lt;p&gt;Correct me if wrong&lt;/p&gt;

&lt;p&gt;Thanks. &lt;/p&gt;</comment>
                            <comment id="13552424" author="zjushch" created="Mon, 14 Jan 2013 04:23:50 +0000"  >&lt;p&gt;After fixing the above problem, passed TestMultiParallel for 15 times on my local PC.&lt;/p&gt;</comment>
                            <comment id="13552428" author="yuzhihong@gmail.com" created="Mon, 14 Jan 2013 04:43:05 +0000"  >&lt;p&gt;Patch v15 incorporates Chunhui&apos;s suggestion&lt;/p&gt;</comment>
                            <comment id="13552445" author="hadoopqa" created="Mon, 14 Jan 2013 05:44:39 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12564659/7213-15.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12564659/7213-15.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 1 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.TestZooKeeper&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3996//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3996//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3996//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3996//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3996//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3996//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3996//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3996//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3996//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3996//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3996//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3996//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3996//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3996//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3996//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3996//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3996//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3996//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13552982" author="yuzhihong@gmail.com" created="Mon, 14 Jan 2013 18:49:28 +0000"  >&lt;p&gt;I ran the following tests locally and they passed:&lt;/p&gt;

&lt;p&gt;  981  mt -Dtest=TestZooKeeper,TestSplitTransactionOnCluster,TestHRegionOnCluster&lt;br/&gt;
  982  mt -Dtest=TestRSKilledWhenMasterInitializing&lt;/p&gt;

&lt;p&gt;I think patch v15 should be ready for integration.&lt;/p&gt;</comment>
                            <comment id="13552999" author="devaraj" created="Mon, 14 Jan 2013 19:08:00 +0000"  >&lt;p&gt;Thanks a lot, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zjushch&quot; class=&quot;user-hover&quot; rel=&quot;zjushch&quot;&gt;chunhui shen&lt;/a&gt; for spotting the problem. Thanks, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yuzhihong%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;yuzhihong@gmail.com&quot;&gt;Ted Yu&lt;/a&gt; for validating the fix.&lt;/p&gt;

&lt;p&gt;I am uploading a new patch that takes into account the latest change in &lt;em&gt;HRegionServer.getWAL(HRegionInfo)&lt;/em&gt; as suggested by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zjushch&quot; class=&quot;user-hover&quot; rel=&quot;zjushch&quot;&gt;chunhui shen&lt;/a&gt;, and also adds/updates some comments in parts of the patch.&lt;/p&gt;</comment>
                            <comment id="13553059" author="hadoopqa" created="Mon, 14 Jan 2013 20:04:52 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12564753/7213-2.16.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12564753/7213-2.16.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 1 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.TestLocalHBaseCluster&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4004//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4004//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4004//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4004//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4004//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4004//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4004//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4004//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4004//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4004//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4004//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4004//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4004//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4004//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4004//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4004//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4004//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4004//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13553145" author="devaraj" created="Mon, 14 Jan 2013 21:34:51 +0000"  >&lt;p&gt;I ran TestLocalHBaseCluster many times locally and all runs passed..&lt;/p&gt;</comment>
                            <comment id="13553158" author="yuzhihong@gmail.com" created="Mon, 14 Jan 2013 21:46:33 +0000"  >&lt;p&gt;Integrated v16 to trunk.&lt;/p&gt;

&lt;p&gt;Thanks for the patch, Devaraj.&lt;/p&gt;

&lt;p&gt;Thanks for the review, Chunhui.&lt;/p&gt;</comment>
                            <comment id="13553273" author="hudson" created="Mon, 14 Jan 2013 23:38:36 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3744 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3744/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3744/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7213&quot; title=&quot;Have HLog files for .META. and -ROOT- edits only&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7213&quot;&gt;&lt;del&gt;HBASE-7213&lt;/del&gt;&lt;/a&gt; Have HLog files for .META. and &lt;del&gt;ROOT&lt;/del&gt; edits only (Devaraj Das) (Revision 1433152)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/MasterFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/SplitLogManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/handler/MetaServerShutdownHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/handler/ServerShutdownHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/LogRoller.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/MetaLogRoller.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RegionServerServices.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/handler/OpenRegionHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/FSHLog.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLog.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogFactory.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogSplitter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/master/MockRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/util/MockRegionServerServices.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13553277" author="yuzhihong@gmail.com" created="Mon, 14 Jan 2013 23:42:10 +0000"  >&lt;p&gt;I ran TestAssignmentManagerOnCluster, TestDistributedLogSplitting and TestHBaseFsck using both jdk 1.6 and 1.7 locally.&lt;br/&gt;
They passed.&lt;/p&gt;

&lt;p&gt;The tests failed in a previous build, #3743, too.&lt;/p&gt;</comment>
                            <comment id="13553321" author="hudson" created="Tue, 15 Jan 2013 00:18:06 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #347 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/347/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/347/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7213&quot; title=&quot;Have HLog files for .META. and -ROOT- edits only&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7213&quot;&gt;&lt;del&gt;HBASE-7213&lt;/del&gt;&lt;/a&gt; Have HLog files for .META. and &lt;del&gt;ROOT&lt;/del&gt; edits only (Devaraj Das) (Revision 1433152)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/MasterFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/SplitLogManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/handler/MetaServerShutdownHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/handler/ServerShutdownHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/LogRoller.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/MetaLogRoller.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RegionServerServices.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/handler/OpenRegionHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/FSHLog.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLog.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogFactory.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogSplitter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/master/MockRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/util/MockRegionServerServices.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13554697" author="zjushch" created="Wed, 16 Jan 2013 03:11:43 +0000"  >&lt;p&gt;Ted found the failed test in &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3751/testReport/org.apache.hadoop.hbase.regionserver/TestHRegionOnCluster/testDataCorrectnessReplayingRecoveredEdits/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3751/testReport/org.apache.hadoop.hbase.regionserver/TestHRegionOnCluster/testDataCorrectnessReplayingRecoveredEdits/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I think the root cause is :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2013-01-15 18:55:11,132 INFO  [RegionServer:1;minerva.apache.org,57481,1358276108448] regionserver.HRegionServer(1658): STOPPED: Meta HLog roller thread is no longer alive -- stop
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;From the code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.metaHLogRoller = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MetaLogRoller(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;);
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; n = &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.currentThread().getName();
    Threads.setDaemonThreadRunning(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.metaHLogRoller.getThread(), 
        n + &lt;span class=&quot;code-quote&quot;&gt;&quot;MetaLogRoller&quot;&lt;/span&gt;, uncaughtExceptionHandler);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (metaHLogRoller != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; !metaHLogRoller.isAlive()) {
      stop(&lt;span class=&quot;code-quote&quot;&gt;&quot;Meta HLog roller thread is no longer alive -- stop&quot;&lt;/span&gt;);
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Should we consider it is possible where metaHLogRoller != null but we haven&apos;t start this thread?&lt;/p&gt;

&lt;p&gt;Make an addendum patch.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=devaraj&quot; class=&quot;user-hover&quot; rel=&quot;devaraj&quot;&gt;Devaraj Das&lt;/a&gt;&lt;br/&gt;
Could you confirm it?&lt;/p&gt;
</comment>
                            <comment id="13554711" author="yuzhihong@gmail.com" created="Wed, 16 Jan 2013 03:44:01 +0000"  >&lt;p&gt;Try addendum through hadoop QA&lt;/p&gt;</comment>
                            <comment id="13554713" author="yuzhihong@gmail.com" created="Wed, 16 Jan 2013 03:47:55 +0000"  >&lt;p&gt;The test does this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      targetServer.kill();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;However I don&apos;t find &quot;Simulated kill&quot; that should have been logged by the above call.&lt;/p&gt;</comment>
                            <comment id="13554718" author="zjushch" created="Wed, 16 Jan 2013 03:53:59 +0000"  >&lt;p&gt;Ted&lt;br/&gt;
It is not caused by targetServer.kill();&lt;/p&gt;

&lt;p&gt;Test is failed when starting cluster.&lt;/p&gt;

&lt;p&gt;The regionserver main thread do the check isHealthy() in run()&lt;br/&gt;
and the open-root-thread do getMetaWAL(). The two threads caused the above log&lt;/p&gt;</comment>
                            <comment id="13554723" author="yuzhihong@gmail.com" created="Wed, 16 Jan 2013 04:04:00 +0000"  >&lt;p&gt;We&apos;re on the same page.&lt;br/&gt;
I meant that region server going down was not caused by call to kill().&lt;/p&gt;</comment>
                            <comment id="13554730" author="zjushch" created="Wed, 16 Jan 2013 04:27:34 +0000"  >&lt;p&gt;hmm...I took a wrong understanding...&lt;sup&gt;_&lt;/sup&gt; &lt;/p&gt;</comment>
                            <comment id="13554744" author="hadoopqa" created="Wed, 16 Jan 2013 04:53:40 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12565065/7213-addendum.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12565065/7213-addendum.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 2 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.regionserver.TestSplitTransactionOnCluster&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4041//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4041//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4041//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4041//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4041//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4041//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4041//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4041//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4041//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4041//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4041//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4041//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4041//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4041//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4041//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4041//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/4041//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/4041//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13554765" author="devaraj" created="Wed, 16 Jan 2013 05:40:32 +0000"  >&lt;p&gt;Addendum looks fine. Thanks guys!&lt;/p&gt;</comment>
                            <comment id="13554766" author="yuzhihong@gmail.com" created="Wed, 16 Jan 2013 05:45:47 +0000"  >&lt;p&gt;Addendum integrated to trunk.&lt;/p&gt;

&lt;p&gt;Thanks Chunhui for the patch.&lt;/p&gt;</comment>
                            <comment id="13554771" author="hudson" created="Wed, 16 Jan 2013 05:56:50 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3754 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3754/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3754/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7213&quot; title=&quot;Have HLog files for .META. and -ROOT- edits only&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7213&quot;&gt;&lt;del&gt;HBASE-7213&lt;/del&gt;&lt;/a&gt; Addendum tries to fix premature LogRoller exit (Chunhui) (Revision 1433830)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13554969" author="hudson" created="Wed, 16 Jan 2013 12:04:18 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #350 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/350/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/350/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7213&quot; title=&quot;Have HLog files for .META. and -ROOT- edits only&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7213&quot;&gt;&lt;del&gt;HBASE-7213&lt;/del&gt;&lt;/a&gt; Addendum tries to fix premature LogRoller exit (Chunhui) (Revision 1433830)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13614975" author="hudson" created="Wed, 27 Mar 2013 06:24:35 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #924 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/924/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/924/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8081&quot; title=&quot;Backport HBASE-7213 (separate hlog for meta tables) to 0.94&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8081&quot;&gt;&lt;del&gt;HBASE-8081&lt;/del&gt;&lt;/a&gt;. Backport &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7213&quot; title=&quot;Have HLog files for .META. and -ROOT- edits only&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7213&quot;&gt;&lt;del&gt;HBASE-7213&lt;/del&gt;&lt;/a&gt; (separate hlog for meta tables) (Devaraj Das). (Revision 1461314)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
ddas : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/MasterFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/MasterServices.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/SplitLogManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/handler/MetaServerShutdownHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/handler/ServerShutdownHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/LogRoller.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/MetaLogRoller.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/RegionServerServices.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/handler/OpenRegionHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLog.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogSplitter.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/resources/hbase-default.xml&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/master/TestCatalogJanitor.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/util/MockRegionServerServices.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13617793" author="hudson" created="Fri, 29 Mar 2013 22:17:46 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #129 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/129/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/129/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8081&quot; title=&quot;Backport HBASE-7213 (separate hlog for meta tables) to 0.94&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8081&quot;&gt;&lt;del&gt;HBASE-8081&lt;/del&gt;&lt;/a&gt;. Backport &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7213&quot; title=&quot;Have HLog files for .META. and -ROOT- edits only&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7213&quot;&gt;&lt;del&gt;HBASE-7213&lt;/del&gt;&lt;/a&gt; (separate hlog for meta tables) (Devaraj Das). (Revision 1461314)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
ddas : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/MasterFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/MasterServices.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/SplitLogManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/handler/MetaServerShutdownHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/handler/ServerShutdownHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/LogRoller.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/MetaLogRoller.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/RegionServerServices.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/handler/OpenRegionHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLog.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogSplitter.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/resources/hbase-default.xml&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/master/TestCatalogJanitor.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/util/MockRegionServerServices.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13623172" author="hudson" created="Fri, 5 Apr 2013 01:00:52 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security-on-Hadoop-23 #13 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/13/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/13/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8081&quot; title=&quot;Backport HBASE-7213 (separate hlog for meta tables) to 0.94&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8081&quot;&gt;&lt;del&gt;HBASE-8081&lt;/del&gt;&lt;/a&gt;. Backport &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7213&quot; title=&quot;Have HLog files for .META. and -ROOT- edits only&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7213&quot;&gt;&lt;del&gt;HBASE-7213&lt;/del&gt;&lt;/a&gt; (separate hlog for meta tables) (Devaraj Das). (Revision 1461314)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
ddas : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/MasterFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/MasterServices.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/SplitLogManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/handler/MetaServerShutdownHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/handler/ServerShutdownHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/LogRoller.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/MetaLogRoller.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/RegionServerServices.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/handler/OpenRegionHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLog.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogSplitter.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/resources/hbase-default.xml&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/master/TestCatalogJanitor.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/util/MockRegionServerServices.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13775418" author="stack" created="Mon, 23 Sep 2013 18:31:28 +0000"  >&lt;p&gt;Marking closed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12607467">HBASE-6774</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                                                <inwardlinks description="is required by">
                                        <issuelink>
            <issuekey id="12551766">HBASE-5843</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12564659" name="7213-15.patch" size="45663" author="yuzhihong@gmail.com" created="Mon, 14 Jan 2013 04:43:05 +0000"/>
                            <attachment id="12564237" name="7213-2.10.patch" size="46889" author="devaraj" created="Thu, 10 Jan 2013 19:58:31 +0000"/>
                            <attachment id="12564369" name="7213-2.11.patch" size="48401" author="devaraj" created="Fri, 11 Jan 2013 07:28:41 +0000"/>
                            <attachment id="12564534" name="7213-2.12.patch" size="51373" author="devaraj" created="Sat, 12 Jan 2013 01:31:16 +0000"/>
                            <attachment id="12564591" name="7213-2.14.patch" size="49029" author="yuzhihong@gmail.com" created="Sat, 12 Jan 2013 20:38:02 +0000"/>
                            <attachment id="12564585" name="7213-2.14.patch" size="49029" author="devaraj" created="Sat, 12 Jan 2013 18:48:24 +0000"/>
                            <attachment id="12564753" name="7213-2.16.patch" size="49150" author="devaraj" created="Mon, 14 Jan 2013 19:08:00 +0000"/>
                            <attachment id="12556076" name="7213-2.4.patch" size="44444" author="devaraj" created="Wed, 5 Dec 2012 08:29:14 +0000"/>
                            <attachment id="12556185" name="7213-2.6.patch" size="44792" author="devaraj" created="Thu, 6 Dec 2012 00:38:01 +0000"/>
                            <attachment id="12556217" name="7213-2.8.patch" size="45401" author="devaraj" created="Thu, 6 Dec 2012 06:01:29 +0000"/>
                            <attachment id="12564079" name="7213-2.9.patch" size="45677" author="devaraj" created="Thu, 10 Jan 2013 01:23:58 +0000"/>
                            <attachment id="12565065" name="7213-addendum.patch" size="1204" author="zjushch" created="Wed, 16 Jan 2013 03:11:56 +0000"/>
                            <attachment id="12555829" name="7213-in-progress.2.2.patch" size="36573" author="devaraj" created="Mon, 3 Dec 2012 21:08:44 +0000"/>
                            <attachment id="12555696" name="7213-in-progress.2.patch" size="35454" author="devaraj" created="Mon, 3 Dec 2012 00:35:50 +0000"/>
                            <attachment id="12555102" name="7213-in-progress.patch" size="17455" author="devaraj" created="Wed, 28 Nov 2012 01:38:16 +0000"/>
                            <attachment id="12564456" name="7213v13.txt" size="45604" author="stack" created="Fri, 11 Jan 2013 17:43:04 +0000"/>
                            <attachment id="12564621" name="TEST-org.apache.hadoop.hbase.client.TestMultiParallel.xml" size="8796567" author="yuzhihong@gmail.com" created="Sun, 13 Jan 2013 17:16:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>17.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 24 Nov 2012 05:43:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>291913</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0rhhb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>158476</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>The regionserver carrying .META. / -ROOT- region will now write two WALs; the usual one w/ all edits and then a special one with a .meta. suffix into which all edits for .META. / -ROOT- region go.  These files will be recovered first on server crash.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>