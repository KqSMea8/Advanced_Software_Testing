<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:20:30 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4610/HBASE-4610.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4610] Port HBASE-3380 (Master failover can split logs of live servers) to 92/trunk (definitely bring in config params, decide if we need to do more to fix the bug)</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4610</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Over in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3380&quot; title=&quot;Master failover can split logs of live servers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3380&quot;&gt;&lt;del&gt;HBASE-3380&lt;/del&gt;&lt;/a&gt; we were having some TestMasterFailover flakiness.  We added some more config parameters to better control the master startup loop where it waits for RS to heartbeat in.  We had thought at the time that 92 would have a different solution but it is still relying on heartbeats to learn about RSs.&lt;/p&gt;

&lt;p&gt;For now, we should definitely bring these config params into 92/trunk.  Otherwise this is an incompatible regression and adding these will also make things like what was just reported over in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4603&quot; title=&quot;Uneeded sleep time for tests in hbase.master.ServerManager#waitForRegionServers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4603&quot;&gt;&lt;del&gt;HBASE-4603&lt;/del&gt;&lt;/a&gt; trivial to fix in an optimal way.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12527521">HBASE-4610</key>
            <summary>Port HBASE-3380 (Master failover can split logs of live servers) to 92/trunk (definitely bring in config params, decide if we need to do more to fix the bug)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="streamy">Jonathan Gray</assignee>
                                    <reporter username="streamy">Jonathan Gray</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Oct 2011 23:50:09 +0000</created>
                <updated>Fri, 12 Oct 2012 05:35:00 +0000</updated>
                            <resolved>Thu, 8 Dec 2011 00:29:20 +0000</resolved>
                                    <version>0.92.0</version>
                    <version>0.94.0</version>
                                    <fixVersion>0.92.0</fixVersion>
                    <fixVersion>0.94.0</fixVersion>
                                    <component>master</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13134798" author="stack" created="Tue, 25 Oct 2011 07:13:20 +0000"  >&lt;p&gt;Any update on this one?&lt;/p&gt;</comment>
                            <comment id="13140364" author="stack" created="Mon, 31 Oct 2011 17:39:40 +0000"  >&lt;p&gt;No movement on this; making it major.  Not going to let it get in way of cutting a 0.92RC&lt;/p&gt;</comment>
                            <comment id="13149094" author="yuzhihong@gmail.com" created="Sat, 12 Nov 2011 15:24:47 +0000"  >&lt;p&gt;Since &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4749&quot; title=&quot;TestMasterFailover#testMasterFailoverWithMockedRITOnDeadRS occasionally fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4749&quot;&gt;&lt;del&gt;HBASE-4749&lt;/del&gt;&lt;/a&gt; has been integrated, is this still needed ?&lt;/p&gt;</comment>
                            <comment id="13164634" author="zhihyu@ebaysf.com" created="Wed, 7 Dec 2011 19:24:37 +0000"  >&lt;p&gt;Jonathan&apos;s patch from &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3380&quot; title=&quot;Master failover can split logs of live servers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3380&quot;&gt;&lt;del&gt;HBASE-3380&lt;/del&gt;&lt;/a&gt;, rebased for TRUNK.&lt;/p&gt;</comment>
                            <comment id="13164637" author="zhihyu@ebaysf.com" created="Wed, 7 Dec 2011 19:24:56 +0000"  >&lt;p&gt;Patch testing.&lt;/p&gt;</comment>
                            <comment id="13164682" author="hadoopqa" created="Wed, 7 Dec 2011 20:38:19 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12506499/4610.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12506499/4610.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -160 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 72 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.util.hbck.TestOfflineMetaRebuildOverlap&lt;br/&gt;
                  org.apache.hadoop.hbase.util.hbck.TestOfflineMetaRebuildHole&lt;br/&gt;
                  org.apache.hadoop.hbase.util.hbck.TestOfflineMetaRebuildBase&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/463//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/463//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/463//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/463//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/463//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/463//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13164719" author="zhihyu@ebaysf.com" created="Wed, 7 Dec 2011 21:28:12 +0000"  >&lt;p&gt;Patch testing now that &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4927&quot; title=&quot;CatalogJanior:SplitParentFirstComparator doesn&amp;#39;t sort as expected, for the last region when the endkey is empty&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4927&quot;&gt;&lt;del&gt;HBASE-4927&lt;/del&gt;&lt;/a&gt; addendum has been integrated&lt;/p&gt;</comment>
                            <comment id="13164772" author="hadoopqa" created="Wed, 7 Dec 2011 22:17:47 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12506517/4610.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12506517/4610.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -160 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 72 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/467//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/467//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/467//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/467//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/467//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/467//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13164785" author="zhihyu@ebaysf.com" created="Wed, 7 Dec 2011 22:32:51 +0000"  >&lt;p&gt;Test suite passes.&lt;/p&gt;

&lt;p&gt;Will commit later today if no objections.&lt;/p&gt;</comment>
                            <comment id="13164835" author="jmhsieh" created="Wed, 7 Dec 2011 23:31:15 +0000"  >&lt;p&gt;I had started doing this also &amp;#8211; are you sure you want to keep the &apos;if (count == oldcount &amp;amp;&amp;amp; count &amp;gt; 0) break&apos; line?  It was removed on the 0.90 version.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; slept = 0;
     &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; oldcount = countOfRegionServers(); !&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.master.isStopped();) {
       &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(interval);
+      slept += interval;
       count = countOfRegionServers();
       &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (count == oldcount &amp;amp;&amp;amp; count &amp;gt; 0) &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
 
       &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; msg;
+      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (count == oldcount &amp;amp;&amp;amp; count &amp;gt;= minToStart &amp;amp;&amp;amp; slept &amp;gt;= timeout) {
+        LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Finished waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; regionserver count to settle; &quot;&lt;/span&gt; +
+            &lt;span class=&quot;code-quote&quot;&gt;&quot;count=&quot;&lt;/span&gt; + count + &lt;span class=&quot;code-quote&quot;&gt;&quot;, sleptFor=&quot;&lt;/span&gt; + slept);
+        &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Before and after test, TestMasterFailover seemed flaky for me on the 0.92 branch.  &lt;/p&gt;

&lt;p&gt;Is the plan for this 0.92.0 or 0.92.1?&lt;/p&gt;</comment>
                            <comment id="13164839" author="zhihyu@ebaysf.com" created="Wed, 7 Dec 2011 23:39:59 +0000"  >&lt;p&gt;Thanks for the review Jonathan.&lt;br/&gt;
The first break statement should be removed.&lt;/p&gt;

&lt;p&gt;I ran TestMasterFailover on MacBook and didn&apos;t see failure.&lt;/p&gt;

&lt;p&gt;I think this should go to 0.92.0&lt;/p&gt;</comment>
                            <comment id="13164844" author="jmhsieh" created="Wed, 7 Dec 2011 23:43:26 +0000"  >&lt;p&gt;I think if the tests are no worse than before, 0.92.0 sounds reasonable to me.&lt;/p&gt;</comment>
                            <comment id="13164853" author="stack" created="Wed, 7 Dec 2011 23:56:36 +0000"  >&lt;p&gt;+1 on include in 0.92.&lt;/p&gt;</comment>
                            <comment id="13164872" author="zhihyu@ebaysf.com" created="Thu, 8 Dec 2011 00:29:20 +0000"  >&lt;p&gt;Integrated to 0.92 and TRUNK.&lt;/p&gt;

&lt;p&gt;Thanks for the review Jonathan and Stack.&lt;/p&gt;</comment>
                            <comment id="13164967" author="hudson" created="Thu, 8 Dec 2011 04:05:22 +0000"  >&lt;p&gt;Integrated in HBase-0.92 #176 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92/176/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92/176/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4610&quot; title=&quot;Port HBASE-3380 (Master failover can split logs of live servers) to 92/trunk (definitely bring in config params, decide if we need to do more to fix the bug)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4610&quot;&gt;&lt;del&gt;HBASE-4610&lt;/del&gt;&lt;/a&gt; Addendum removes break statement&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4610&quot; title=&quot;Port HBASE-3380 (Master failover can split logs of live servers) to 92/trunk (definitely bring in config params, decide if we need to do more to fix the bug)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4610&quot;&gt;&lt;del&gt;HBASE-4610&lt;/del&gt;&lt;/a&gt;  Port &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3380&quot; title=&quot;Master failover can split logs of live servers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3380&quot;&gt;&lt;del&gt;HBASE-3380&lt;/del&gt;&lt;/a&gt; (Master failover can split logs of live servers) to 92/trunk&lt;/p&gt;

&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/ServerManager.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/ServerManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/master/TestMasterFailover.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13165009" author="hudson" created="Thu, 8 Dec 2011 05:55:30 +0000"  >&lt;p&gt;Integrated in HBase-0.92-security #33 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92-security/33/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92-security/33/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4610&quot; title=&quot;Port HBASE-3380 (Master failover can split logs of live servers) to 92/trunk (definitely bring in config params, decide if we need to do more to fix the bug)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4610&quot;&gt;&lt;del&gt;HBASE-4610&lt;/del&gt;&lt;/a&gt; Addendum removes break statement&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4610&quot; title=&quot;Port HBASE-3380 (Master failover can split logs of live servers) to 92/trunk (definitely bring in config params, decide if we need to do more to fix the bug)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4610&quot;&gt;&lt;del&gt;HBASE-4610&lt;/del&gt;&lt;/a&gt;  Port &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3380&quot; title=&quot;Master failover can split logs of live servers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3380&quot;&gt;&lt;del&gt;HBASE-3380&lt;/del&gt;&lt;/a&gt; (Master failover can split logs of live servers) to 92/trunk&lt;/p&gt;

&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/ServerManager.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/ServerManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/master/TestMasterFailover.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13165038" author="hudson" created="Thu, 8 Dec 2011 06:47:17 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-security #25 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-security/25/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-security/25/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4610&quot; title=&quot;Port HBASE-3380 (Master failover can split logs of live servers) to 92/trunk (definitely bring in config params, decide if we need to do more to fix the bug)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4610&quot;&gt;&lt;del&gt;HBASE-4610&lt;/del&gt;&lt;/a&gt; Addendum removes break statement&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4610&quot; title=&quot;Port HBASE-3380 (Master failover can split logs of live servers) to 92/trunk (definitely bring in config params, decide if we need to do more to fix the bug)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4610&quot;&gt;&lt;del&gt;HBASE-4610&lt;/del&gt;&lt;/a&gt;  Port &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3380&quot; title=&quot;Master failover can split logs of live servers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3380&quot;&gt;&lt;del&gt;HBASE-3380&lt;/del&gt;&lt;/a&gt; (Master failover can split logs of live servers) to 92/trunk&lt;/p&gt;

&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/ServerManager.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/ServerManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/master/TestMasterFailover.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13165089" author="hudson" created="Thu, 8 Dec 2011 08:44:04 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2526 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2526/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2526/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4610&quot; title=&quot;Port HBASE-3380 (Master failover can split logs of live servers) to 92/trunk (definitely bring in config params, decide if we need to do more to fix the bug)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4610&quot;&gt;&lt;del&gt;HBASE-4610&lt;/del&gt;&lt;/a&gt; Addendum removes break statement&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4610&quot; title=&quot;Port HBASE-3380 (Master failover can split logs of live servers) to 92/trunk (definitely bring in config params, decide if we need to do more to fix the bug)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4610&quot;&gt;&lt;del&gt;HBASE-4610&lt;/del&gt;&lt;/a&gt;  Port &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3380&quot; title=&quot;Master failover can split logs of live servers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3380&quot;&gt;&lt;del&gt;HBASE-3380&lt;/del&gt;&lt;/a&gt; (Master failover can split logs of live servers) to 92/trunk&lt;/p&gt;

&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/ServerManager.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/ServerManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/master/TestMasterFailover.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13166048" author="nkeywal" created="Fri, 9 Dec 2011 10:35:48 +0000"  >&lt;p&gt;There is a side effect: the mini cluster needs 4,5 seconds to start&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2011-12-09 01:30:37,883 INFO  [SplitLogWorker-localhost,39827,1323423035986] regionserver.SplitLogWorker(140): SplitLogWorker localhost,39827,1323423035986 starting
2011-12-09 01:30:37,961 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:38,062 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:38,163 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:38,264 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:38,365 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:38,467 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:38,568 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:38,668 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:38,769 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:38,870 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:38,971 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:39,072 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:39,173 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:39,274 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:39,375 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:39,476 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:39,577 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:39,678 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:39,779 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:39,881 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:39,981 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:40,082 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:40,183 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:40,284 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:40,385 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:40,486 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:40,587 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:40,688 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:40,789 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:40,890 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:40,991 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:41,092 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:41,194 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:41,295 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:41,395 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:41,496 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:41,598 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:41,698 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:41,800 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:41,900 INFO  [Master:0;localhost,35818,1323423035631] master.ServerManager(557): Waiting on regionserver(s) count to settle; currently=1
2011-12-09 01:30:49,048 INFO  [pool-1-thread-1] hbase.HBaseTestingUtility(529): Starting up minicluster with 1 master(s) and 2 regionserver(s) and 2 datanode(s)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I believe that we could set the number of hbase.master.wait.on.regionservers.maxtostart to the exact number of region we want to start. Would be nice not to have the first sleep as well.&lt;/p&gt;</comment>
                            <comment id="13166343" author="nkeywal" created="Fri, 9 Dec 2011 17:36:10 +0000"  >&lt;p&gt;I will fix this in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4993&quot; title=&quot;Performance regression in minicluster creation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4993&quot;&gt;&lt;del&gt;HBASE-4993&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13166413" author="nkeywal" created="Fri, 9 Dec 2011 18:33:45 +0000"  >&lt;p&gt;The parameter &quot;hbase.master.wait.on.regionservers.timeout&quot; is not a full timemout; if we don&apos;t have the regionservers.mintostart, we will continue to loop until the master is killed. That&apos;s the intend?&lt;/p&gt;</comment>
                            <comment id="13166417" author="stack" created="Fri, 9 Dec 2011 18:37:13 +0000"  >&lt;p&gt;I&apos;d doubt it.  IIRC, we&apos;re supposed to move on w/ the regionservers that we have after the timeout.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12493779">HBASE-3380</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12534510">HBASE-4993</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12506517" name="4610.txt" size="3720" author="zhihyu@ebaysf.com" created="Wed, 7 Dec 2011 21:27:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 25 Oct 2011 07:13:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>88716</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 2 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08r4f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48994</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>