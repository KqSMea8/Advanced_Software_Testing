<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:32:29 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5955/HBASE-5955.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5955] Guava 11 drops MapEvictionListener and Hadoop 2.0.0-alpha requires it</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5955</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Hadoop 2.0.0-alpha depends on Guava 11.0.2. Updating HBase dependencies to match produces the following compilation errors:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[ERROR] SingleSizeCache.java:[41,32] cannot find symbol
[ERROR] symbol  : class MapEvictionListener
[ERROR] location: &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; com.google.common.collect
[ERROR] 
[ERROR] SingleSizeCache.java:[94,4] cannot find symbol
[ERROR] symbol  : class MapEvictionListener
[ERROR] location: class org.apache.hadoop.hbase.io.hfile.slab.SingleSizeCache
[ERROR] 
[ERROR] SingleSizeCache.java:[94,69] cannot find symbol
[ERROR] symbol  : class MapEvictionListener
[ERROR] location: class org.apache.hadoop.hbase.io.hfile.slab.SingleSizeCache
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12554276">HBASE-5955</key>
            <summary>Guava 11 drops MapEvictionListener and Hadoop 2.0.0-alpha requires it</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lhofhansl">Lars Hofhansl</assignee>
                                    <reporter username="apurtell">Andrew Purtell</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 May 2012 04:52:26 +0000</created>
                <updated>Fri, 12 Oct 2012 05:36:26 +0000</updated>
                            <resolved>Mon, 2 Jul 2012 17:57:58 +0000</resolved>
                                    <version>0.94.0</version>
                                    <fixVersion>0.94.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13270198" author="apurtell" created="Tue, 8 May 2012 04:55:21 +0000"  >&lt;p&gt;Also there&apos;s a change in MapMaker:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[ERROR] SingleSizeCache.java:[104,31] maximumSize(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) is not &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; in com.google.common.collect.MapMaker; cannot be accessed from outside &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13270221" author="tlipcon" created="Tue, 8 May 2012 05:34:39 +0000"  >&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5739&quot; title=&quot;Upgrade guava to 11.0.2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5739&quot;&gt;&lt;del&gt;HBASE-5739&lt;/del&gt;&lt;/a&gt;. I&apos;ll commit that tomorrow if no one objects.&lt;/p&gt;</comment>
                            <comment id="13270222" author="tlipcon" created="Tue, 8 May 2012 05:35:23 +0000"  >&lt;p&gt;Oh, wait, it is committed... maybe we need to backport to 0.94 or 0.92? Will that be painful for downstream users? Dare we shade guava?&lt;/p&gt;</comment>
                            <comment id="13270249" author="apurtell" created="Tue, 8 May 2012 06:22:13 +0000"  >&lt;p&gt;+ 1 on backport to 0.94. I don&apos;t think we need support 2.0.0 with 0.92, we can stick with 1.0, 0.22, and 0.23, to varying degrees.&lt;/p&gt;

&lt;p&gt;Edit: Fix accidental use of markup.&lt;/p&gt;</comment>
                            <comment id="13270260" author="apurtell" created="Tue, 8 May 2012 06:36:57 +0000"  >&lt;p&gt;FYI, the symptom that brought me here is if one tries to use 0.94 with 2.0.0 then you can&apos;t instantiate HDFS filesystems, with a cryptic &quot;No filesystem for scheme: hdfs&quot;.&lt;/p&gt;</comment>
                            <comment id="13270910" author="apurtell" created="Tue, 8 May 2012 22:49:38 +0000"  >&lt;p&gt;@Lars, how about getting &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5739&quot; title=&quot;Upgrade guava to 11.0.2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5739&quot;&gt;&lt;del&gt;HBASE-5739&lt;/del&gt;&lt;/a&gt; into 0.94?&lt;/p&gt;</comment>
                            <comment id="13270999" author="apurtell" created="Wed, 9 May 2012 01:18:05 +0000"  >&lt;p&gt;Reassign to Lars as it is not my call.&lt;/p&gt;</comment>
                            <comment id="13272422" author="lhofhansl" created="Thu, 10 May 2012 15:28:30 +0000"  >&lt;p&gt;+1 on backport. This is a dup of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5739&quot; title=&quot;Upgrade guava to 11.0.2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5739&quot;&gt;&lt;del&gt;HBASE-5739&lt;/del&gt;&lt;/a&gt;, right?&lt;/p&gt;</comment>
                            <comment id="13272623" author="apurtell" created="Thu, 10 May 2012 18:42:45 +0000"  >&lt;blockquote&gt;&lt;p&gt;This is a dup of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5739&quot; title=&quot;Upgrade guava to 11.0.2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5739&quot;&gt;&lt;del&gt;HBASE-5739&lt;/del&gt;&lt;/a&gt;, right?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, with the variation on which branch is the commit target.&lt;/p&gt;</comment>
                            <comment id="13284966" author="lhofhansl" created="Tue, 29 May 2012 17:52:33 +0000"  >&lt;p&gt;Will this have any negative side effects when using older versions of Hadoop?&lt;br/&gt;
I.e. is it 100% safe for 0.94?&lt;/p&gt;</comment>
                            <comment id="13284974" author="stack" created="Tue, 29 May 2012 18:01:35 +0000"  >&lt;p&gt;We want to do same for 0.94?  Does version of hadoop even matter for this issue?&lt;/p&gt;

&lt;p&gt;Up on dev list, discussion had it that only 0.96 can require 1.0.0 hadoop as its minimum version.&lt;/p&gt;</comment>
                            <comment id="13284976" author="apurtell" created="Tue, 29 May 2012 18:01:59 +0000"  >&lt;p&gt;Those of us who want to run 0.94 on Hadoop 2.0.x can carry around a private patch if you want to be 100% safe Lars. &lt;/p&gt;</comment>
                            <comment id="13284979" author="apurtell" created="Tue, 29 May 2012 18:03:03 +0000"  >&lt;blockquote&gt;&lt;p&gt;Does version of hadoop even matter for this issue?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;You can&apos;t compile HBase 0.94 against Hadoop 2.0.x without this patch.&lt;/p&gt;</comment>
                            <comment id="13403565" author="lhofhansl" created="Thu, 28 Jun 2012 23:12:07 +0000"  >&lt;p&gt;I find that I get runtime errors with Hadoop-2 (but not compile time errrors):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.NoSuchMethodError: com.google.common.collect.LinkedListMultimap.values()Ljava/util/List;
        at org.apache.hadoop.hdfs.SocketCache.clear(SocketCache.java:131)
        at org.apache.hadoop.hdfs.DFSClient.close(DFSClient.java:604)
        at org.apache.hadoop.hdfs.DistributedFileSystem.close(DistributedFileSystem.java:506)
        at org.apache.hadoop.fs.FileSystem$Cache.getInternal(FileSystem.java:2237)
        at org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:2215)
        at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:302)
        at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:158)
        at org.apache.hadoop.hbase.fs.HFileSystem.&amp;lt;init&amp;gt;(HFileSystem.java:62)
        at org.apache.hadoop.hbase.regionserver.HRegionServer.handleReportForDutyResponse(HRegionServer.java:974)
        at org.apache.hadoop.hbase.regionserver.HRegionServer.run(HRegionServer.java:672)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:619)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The signature of LinkedListMultiMap.values() has changed to return a List rather than a collection. That would imply that switching out Guava would fail with the reverse problem in Hadoop-1 and before. Sigh.&lt;br/&gt;
So this would need to be profile dependent?&lt;/p&gt;</comment>
                            <comment id="13403580" author="apurtell" created="Thu, 28 Jun 2012 23:28:11 +0000"  >&lt;p&gt;In the POMs I have on hand for Hadoop 2.0.1 and HBase 0.94, the Guava version for both is 11.0.2 (via &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-3187&quot; title=&quot;Upgrade guava to 11.0.2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-3187&quot;&gt;&lt;del&gt;HDFS-3187&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5739&quot; title=&quot;Upgrade guava to 11.0.2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5739&quot;&gt;&lt;del&gt;HBASE-5739&lt;/del&gt;&lt;/a&gt;). I&apos;m guessing you have a Hadoop compiled against something older?&lt;/p&gt;</comment>
                            <comment id="13403630" author="lhofhansl" created="Fri, 29 Jun 2012 00:45:20 +0000"  >&lt;p&gt;Hmm... I see:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;lt;guava.version&amp;gt;r09&amp;lt;/guava.version&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;in 0.94&apos;s pom.xml&lt;/p&gt;

&lt;p&gt;Are you sure you didn&apos;t update this locally to make it work for Hadoop 2?&lt;/p&gt;</comment>
                            <comment id="13403632" author="lhofhansl" created="Fri, 29 Jun 2012 00:53:10 +0000"  >&lt;p&gt;Oh, an the problem here is in the DFSClient as used from HBase, so it &quot;sees&quot; all the HBase libraries (which in this case is Guava r09).&lt;br/&gt;
Also, I checked whether Guava r09 has RemovalListener (see parent patch), but it does not, so we&apos;d have to reflect this away.&lt;br/&gt;
(Because if we use the current EvictionListener it won&apos;t work with Guava 11.x, and if we use RemovalListener it won&apos;t work Guava 9, and at the same time we have to use the same version of Guava that Hadoop is using)&lt;/p&gt;</comment>
                            <comment id="13403636" author="apurtell" created="Fri, 29 Jun 2012 01:08:14 +0000"  >&lt;blockquote&gt;&lt;p&gt;Are you sure you didn&apos;t update this locally to make it work for Hadoop 2?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;You are right of course, I see now that &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5739&quot; title=&quot;Upgrade guava to 11.0.2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5739&quot;&gt;&lt;del&gt;HBASE-5739&lt;/del&gt;&lt;/a&gt; only went into trunk. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Also, I checked whether Guava r09 has RemovalListener (see parent patch), but it does not, so we&apos;d have to reflect this away.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes.&lt;/p&gt;</comment>
                            <comment id="13403653" author="lhofhansl" created="Fri, 29 Jun 2012 01:59:33 +0000"  >&lt;p&gt;Looks like guava was only add in hadoop 0.22 (r09 there) - I asked for the exact point of introduction in parent to be sure.&lt;/p&gt;

&lt;p&gt;In that case I am fine with updating to 11.0.2 in 0.94.1 (and hence some versions of Hadoop 1.0.x &amp;lt; version &amp;lt; 2.0.x would not work correctly).&lt;/p&gt;</comment>
                            <comment id="13403656" author="lhofhansl" created="Fri, 29 Jun 2012 02:06:49 +0000"  >&lt;p&gt;So specifically +1 on updating to Guava 11.0.2 in 0.94.1.&lt;br/&gt;
Please let me know if you disagree (hadoop 0.22 and some later versions before Hadoop 2.0.x would be broken).&lt;/p&gt;</comment>
                            <comment id="13404315" author="lhofhansl" created="Fri, 29 Jun 2012 23:27:31 +0000"  >&lt;p&gt;Unless there are objections I will pull parent into 0.94 (breaking HBase with all hadoop versions: hadoop-0.22 &amp;lt;= version &amp;lt; hadoop-2.0.0)&lt;/p&gt;</comment>
                            <comment id="13404539" author="lhofhansl" created="Sat, 30 Jun 2012 16:23:31 +0000"  >&lt;p&gt;0.94 patch&lt;/p&gt;</comment>
                            <comment id="13405173" author="lhofhansl" created="Mon, 2 Jul 2012 17:57:58 +0000"  >&lt;p&gt;Committed to 0.94&lt;/p&gt;</comment>
                            <comment id="13406674" author="hudson" created="Wed, 4 Jul 2012 19:38:59 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #290 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/290/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/290/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5955&quot; title=&quot;Guava 11 drops MapEvictionListener and Hadoop 2.0.0-alpha requires it&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5955&quot;&gt;&lt;del&gt;HBASE-5955&lt;/del&gt;&lt;/a&gt; Guava 11 drops MapEvictionListener and Hadoop 2.0.0-alpha requires it (Revision 1356379)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/pom.xml&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/io/hfile/slab/SingleSizeCache.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13411158" author="hudson" created="Wed, 11 Jul 2012 02:36:55 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #39 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/39/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/39/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5955&quot; title=&quot;Guava 11 drops MapEvictionListener and Hadoop 2.0.0-alpha requires it&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5955&quot;&gt;&lt;del&gt;HBASE-5955&lt;/del&gt;&lt;/a&gt; Guava 11 drops MapEvictionListener and Hadoop 2.0.0-alpha requires it (Revision 1356379)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/pom.xml&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/io/hfile/slab/SingleSizeCache.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12549843">HBASE-5739</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12534113" name="5955.txt" size="2873" author="lhofhansl" created="Sat, 30 Jun 2012 16:23:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 8 May 2012 05:34:39 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>238506</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 23 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i068k7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34318</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>