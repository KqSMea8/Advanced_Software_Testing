<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:26:29 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5295/HBASE-5295.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5295] Improve the Thrift API  to switch on/off writing to wal for Mutations</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5295</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The thrift api currently does not support switching off updating wal for Puts/Deletes. Support it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12540212">HBASE-5295</key>
            <summary>Improve the Thrift API  to switch on/off writing to wal for Mutations</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dhruba">dhruba borthakur</assignee>
                                    <reporter username="dhruba">dhruba borthakur</reporter>
                        <labels>
                    </labels>
                <created>Fri, 27 Jan 2012 23:04:06 +0000</created>
                <updated>Thu, 10 May 2012 18:10:50 +0000</updated>
                            <resolved>Wed, 1 Feb 2012 19:11:43 +0000</resolved>
                                                                    <component>Thrift</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13195668" author="phabricator@reviews.facebook.net" created="Sun, 29 Jan 2012 02:20:09 +0000"  >&lt;p&gt;dhruba requested code review of &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5295&quot; title=&quot;Improve the Thrift API  to switch on/off writing to wal for Mutations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5295&quot;&gt;&lt;del&gt;HBASE-5295&lt;/del&gt;&lt;/a&gt; Improve the Thrift API to switch on/off writing to wal for Mutations&quot;.&lt;br/&gt;
Reviewers: sc, tedyu, stack&lt;/p&gt;

&lt;p&gt;  Enhance the thrift api to have the ability to switch of wal when doing a put or delete. The only change is adding a new field to the thrift Mutation object.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  TestThriftServer&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1515&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1515&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/thrift/TestThriftServer.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/ThriftServerRunner.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/Mutation.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/BatchMutation.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/Hbase.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/TScan.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/TRowResult.java&lt;br/&gt;
  src/main/resources/org/apache/hadoop/hbase/thrift/Hbase.thrift&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/3165/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/3165/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13195669" author="phabricator@reviews.facebook.net" created="Sun, 29 Jan 2012 02:20:10 +0000"  >&lt;p&gt;dhruba requested code review of &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5295&quot; title=&quot;Improve the Thrift API  to switch on/off writing to wal for Mutations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5295&quot;&gt;&lt;del&gt;HBASE-5295&lt;/del&gt;&lt;/a&gt; Improve the Thrift API to switch on/off writing to wal for Mutations&quot;.&lt;br/&gt;
Reviewers: sc, tedyu, stack&lt;/p&gt;

&lt;p&gt;  Enhance the thrift api to have the ability to switch of wal when doing a put or delete. The only change is adding a new field to the thrift Mutation object.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  TestThriftServer&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1515&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1515&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/thrift/TestThriftServer.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/ThriftServerRunner.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/Mutation.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/BatchMutation.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/Hbase.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/TScan.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/TRowResult.java&lt;br/&gt;
  src/main/resources/org/apache/hadoop/hbase/thrift/Hbase.thrift&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/3165/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/3165/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13195670" author="phabricator@reviews.facebook.net" created="Sun, 29 Jan 2012 02:20:11 +0000"  >&lt;p&gt;dhruba requested code review of &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5295&quot; title=&quot;Improve the Thrift API  to switch on/off writing to wal for Mutations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5295&quot;&gt;&lt;del&gt;HBASE-5295&lt;/del&gt;&lt;/a&gt; Improve the Thrift API to switch on/off writing to wal for Mutations&quot;.&lt;br/&gt;
Reviewers: sc, tedyu, stack&lt;/p&gt;

&lt;p&gt;  Enhance the thrift api to have the ability to switch of wal when doing a put or delete. The only change is adding a new field to the thrift Mutation object.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  TestThriftServer&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1515&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1515&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/thrift/TestThriftServer.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/ThriftServerRunner.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/Mutation.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/BatchMutation.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/Hbase.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/TScan.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/TRowResult.java&lt;br/&gt;
  src/main/resources/org/apache/hadoop/hbase/thrift/Hbase.thrift&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/3165/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/3165/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13195671" author="phabricator@reviews.facebook.net" created="Sun, 29 Jan 2012 02:20:13 +0000"  >&lt;p&gt;dhruba requested code review of &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5295&quot; title=&quot;Improve the Thrift API  to switch on/off writing to wal for Mutations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5295&quot;&gt;&lt;del&gt;HBASE-5295&lt;/del&gt;&lt;/a&gt; Improve the Thrift API to switch on/off writing to wal for Mutations&quot;.&lt;br/&gt;
Reviewers: sc, tedyu, stack&lt;/p&gt;

&lt;p&gt;  Enhance the thrift api to have the ability to switch of wal when doing a put or delete. The only change is adding a new field to the thrift Mutation object.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  TestThriftServer&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1515&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1515&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/thrift/TestThriftServer.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/ThriftServerRunner.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/Mutation.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/BatchMutation.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/Hbase.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/TScan.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/TRowResult.java&lt;br/&gt;
  src/main/resources/org/apache/hadoop/hbase/thrift/Hbase.thrift&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/3165/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/3165/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13195678" author="phabricator@reviews.facebook.net" created="Sun, 29 Jan 2012 02:50:08 +0000"  >&lt;p&gt;tedyu has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5295&quot; title=&quot;Improve the Thrift API  to switch on/off writing to wal for Mutations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5295&quot;&gt;&lt;del&gt;HBASE-5295&lt;/del&gt;&lt;/a&gt; Improve the Thrift API to switch on/off writing to wal for Mutations&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/ThriftServerRunner.java:859 What about thrift2 ?&lt;br/&gt;
  e.g. src/main/java/org/apache/hadoop/hbase/thrift2/ThriftUtilities.java has counterparts for this method.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1515&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1515&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13195679" author="phabricator@reviews.facebook.net" created="Sun, 29 Jan 2012 02:50:09 +0000"  >&lt;p&gt;tedyu has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5295&quot; title=&quot;Improve the Thrift API  to switch on/off writing to wal for Mutations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5295&quot;&gt;&lt;del&gt;HBASE-5295&lt;/del&gt;&lt;/a&gt; Improve the Thrift API to switch on/off writing to wal for Mutations&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/ThriftServerRunner.java:859 What about thrift2 ?&lt;br/&gt;
  e.g. src/main/java/org/apache/hadoop/hbase/thrift2/ThriftUtilities.java has counterparts for this method.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1515&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1515&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13195680" author="phabricator@reviews.facebook.net" created="Sun, 29 Jan 2012 02:50:10 +0000"  >&lt;p&gt;tedyu has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5295&quot; title=&quot;Improve the Thrift API  to switch on/off writing to wal for Mutations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5295&quot;&gt;&lt;del&gt;HBASE-5295&lt;/del&gt;&lt;/a&gt; Improve the Thrift API to switch on/off writing to wal for Mutations&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/ThriftServerRunner.java:859 What about thrift2 ?&lt;br/&gt;
  e.g. src/main/java/org/apache/hadoop/hbase/thrift2/ThriftUtilities.java has counterparts for this method.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1515&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1515&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13195681" author="phabricator@reviews.facebook.net" created="Sun, 29 Jan 2012 02:50:11 +0000"  >&lt;p&gt;tedyu has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5295&quot; title=&quot;Improve the Thrift API  to switch on/off writing to wal for Mutations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5295&quot;&gt;&lt;del&gt;HBASE-5295&lt;/del&gt;&lt;/a&gt; Improve the Thrift API to switch on/off writing to wal for Mutations&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/ThriftServerRunner.java:859 What about thrift2 ?&lt;br/&gt;
  e.g. src/main/java/org/apache/hadoop/hbase/thrift2/ThriftUtilities.java has counterparts for this method.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1515&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1515&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13195686" author="hadoopqa" created="Sun, 29 Jan 2012 03:16:28 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12512345/D1515.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12512345/D1515.1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -140 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 161 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat&lt;br/&gt;
                  org.apache.hadoop.hbase.mapred.TestTableMapReduce&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestFromClientSide&lt;br/&gt;
                  org.apache.hadoop.hbase.io.hfile.TestHFileBlock&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestImportTsv&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/866//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/866//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/866//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/866//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/866//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/866//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13195695" author="phabricator@reviews.facebook.net" created="Sun, 29 Jan 2012 06:08:08 +0000"  >&lt;p&gt;dhruba has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5295&quot; title=&quot;Improve the Thrift API  to switch on/off writing to wal for Mutations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5295&quot;&gt;&lt;del&gt;HBASE-5295&lt;/del&gt;&lt;/a&gt; Improve the Thrift API to switch on/off writing to wal for Mutations&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/ThriftServerRunner.java:859 thrift2/TPut already has the feature to switch off wal if needed, no further work is necessary.&lt;/p&gt;

&lt;p&gt;  also, just curious: the two thrift apis are not same. there are some features exposed via thrift that are not exposed via thrift2 and vice-versa. can you pl educate me on the history on why we have two different thrift apis?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1515&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1515&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13195696" author="phabricator@reviews.facebook.net" created="Sun, 29 Jan 2012 06:08:09 +0000"  >&lt;p&gt;dhruba has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5295&quot; title=&quot;Improve the Thrift API  to switch on/off writing to wal for Mutations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5295&quot;&gt;&lt;del&gt;HBASE-5295&lt;/del&gt;&lt;/a&gt; Improve the Thrift API to switch on/off writing to wal for Mutations&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/ThriftServerRunner.java:859 thrift2/TPut already has the feature to switch off wal if needed, no further work is necessary.&lt;/p&gt;

&lt;p&gt;  also, just curious: the two thrift apis are not same. there are some features exposed via thrift that are not exposed via thrift2 and vice-versa. can you pl educate me on the history on why we have two different thrift apis?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1515&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1515&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13195697" author="phabricator@reviews.facebook.net" created="Sun, 29 Jan 2012 06:08:10 +0000"  >&lt;p&gt;dhruba has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5295&quot; title=&quot;Improve the Thrift API  to switch on/off writing to wal for Mutations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5295&quot;&gt;&lt;del&gt;HBASE-5295&lt;/del&gt;&lt;/a&gt; Improve the Thrift API to switch on/off writing to wal for Mutations&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/ThriftServerRunner.java:859 thrift2/TPut already has the feature to switch off wal if needed, no further work is necessary.&lt;/p&gt;

&lt;p&gt;  also, just curious: the two thrift apis are not same. there are some features exposed via thrift that are not exposed via thrift2 and vice-versa. can you pl educate me on the history on why we have two different thrift apis?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1515&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1515&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13195698" author="phabricator@reviews.facebook.net" created="Sun, 29 Jan 2012 06:08:11 +0000"  >&lt;p&gt;dhruba has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5295&quot; title=&quot;Improve the Thrift API  to switch on/off writing to wal for Mutations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5295&quot;&gt;&lt;del&gt;HBASE-5295&lt;/del&gt;&lt;/a&gt; Improve the Thrift API to switch on/off writing to wal for Mutations&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/ThriftServerRunner.java:859 thrift2/TPut already has the feature to switch off wal if needed, no further work is necessary.&lt;/p&gt;

&lt;p&gt;  also, just curious: the two thrift apis are not same. there are some features exposed via thrift that are not exposed via thrift2 and vice-versa. can you pl educate me on the history on why we have two different thrift apis?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1515&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1515&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13195764" author="phabricator@reviews.facebook.net" created="Sun, 29 Jan 2012 15:27:08 +0000"  >&lt;p&gt;tedyu has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5295&quot; title=&quot;Improve the Thrift API  to switch on/off writing to wal for Mutations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5295&quot;&gt;&lt;del&gt;HBASE-5295&lt;/del&gt;&lt;/a&gt; Improve the Thrift API to switch on/off writing to wal for Mutations&quot;.&lt;/p&gt;

&lt;p&gt;  thrift2/TDelete doesn&apos;t support WAL switch.&lt;br/&gt;
  Delete is a mutation:&lt;br/&gt;
  public class Delete extends Mutation&lt;/p&gt;

&lt;p&gt;  thrift2/ThriftUtilities.java has out.setWriteToWAL() call for incrementFromThrift() and incrementFromThrift(). deleteFromThrift() should also have this call.&lt;/p&gt;

&lt;p&gt;  w.r.t. why two thrift packages are maintained, you can find some discussions in this JIRA:&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1744?focusedCommentId=12921845&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12921845&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-1744?focusedCommentId=12921845&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12921845&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  There&apos;re so many Thrift experts at FB, I am sure they have better idea about the two packages.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1515&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1515&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13195765" author="phabricator@reviews.facebook.net" created="Sun, 29 Jan 2012 15:27:09 +0000"  >&lt;p&gt;tedyu has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5295&quot; title=&quot;Improve the Thrift API  to switch on/off writing to wal for Mutations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5295&quot;&gt;&lt;del&gt;HBASE-5295&lt;/del&gt;&lt;/a&gt; Improve the Thrift API to switch on/off writing to wal for Mutations&quot;.&lt;/p&gt;

&lt;p&gt;  thrift2/TDelete doesn&apos;t support WAL switch.&lt;br/&gt;
  Delete is a mutation:&lt;br/&gt;
  public class Delete extends Mutation&lt;/p&gt;

&lt;p&gt;  thrift2/ThriftUtilities.java has out.setWriteToWAL() call for incrementFromThrift() and incrementFromThrift(). deleteFromThrift() should also have this call.&lt;/p&gt;

&lt;p&gt;  w.r.t. why two thrift packages are maintained, you can find some discussions in this JIRA:&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1744?focusedCommentId=12921845&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12921845&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-1744?focusedCommentId=12921845&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12921845&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  There&apos;re so many Thrift experts at FB, I am sure they have better idea about the two packages.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1515&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1515&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13195766" author="phabricator@reviews.facebook.net" created="Sun, 29 Jan 2012 15:27:11 +0000"  >&lt;p&gt;tedyu has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5295&quot; title=&quot;Improve the Thrift API  to switch on/off writing to wal for Mutations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5295&quot;&gt;&lt;del&gt;HBASE-5295&lt;/del&gt;&lt;/a&gt; Improve the Thrift API to switch on/off writing to wal for Mutations&quot;.&lt;/p&gt;

&lt;p&gt;  thrift2/TDelete doesn&apos;t support WAL switch.&lt;br/&gt;
  Delete is a mutation:&lt;br/&gt;
  public class Delete extends Mutation&lt;/p&gt;

&lt;p&gt;  thrift2/ThriftUtilities.java has out.setWriteToWAL() call for incrementFromThrift() and incrementFromThrift(). deleteFromThrift() should also have this call.&lt;/p&gt;

&lt;p&gt;  w.r.t. why two thrift packages are maintained, you can find some discussions in this JIRA:&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1744?focusedCommentId=12921845&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12921845&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-1744?focusedCommentId=12921845&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12921845&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  There&apos;re so many Thrift experts at FB, I am sure they have better idea about the two packages.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1515&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1515&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13195767" author="phabricator@reviews.facebook.net" created="Sun, 29 Jan 2012 15:27:11 +0000"  >&lt;p&gt;tedyu has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5295&quot; title=&quot;Improve the Thrift API  to switch on/off writing to wal for Mutations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5295&quot;&gt;&lt;del&gt;HBASE-5295&lt;/del&gt;&lt;/a&gt; Improve the Thrift API to switch on/off writing to wal for Mutations&quot;.&lt;/p&gt;

&lt;p&gt;  thrift2/TDelete doesn&apos;t support WAL switch.&lt;br/&gt;
  Delete is a mutation:&lt;br/&gt;
  public class Delete extends Mutation&lt;/p&gt;

&lt;p&gt;  thrift2/ThriftUtilities.java has out.setWriteToWAL() call for incrementFromThrift() and incrementFromThrift(). deleteFromThrift() should also have this call.&lt;/p&gt;

&lt;p&gt;  w.r.t. why two thrift packages are maintained, you can find some discussions in this JIRA:&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1744?focusedCommentId=12921845&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12921845&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-1744?focusedCommentId=12921845&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12921845&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  There&apos;re so many Thrift experts at FB, I am sure they have better idea about the two packages.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1515&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1515&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13195946" author="phabricator@reviews.facebook.net" created="Mon, 30 Jan 2012 05:55:08 +0000"  >&lt;p&gt;dhruba updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5295&quot; title=&quot;Improve the Thrift API  to switch on/off writing to wal for Mutations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5295&quot;&gt;&lt;del&gt;HBASE-5295&lt;/del&gt;&lt;/a&gt; Improve the Thrift API to switch on/off writing to wal for Mutations&quot;.&lt;br/&gt;
Reviewers: sc, tedyu, stack&lt;/p&gt;

&lt;p&gt;  Incorporated changes to thrift2 as well.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1515&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1515&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/thrift/TestThriftServer.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift2/ThriftUtilities.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift2/generated/TResult.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift2/generated/TGet.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift2/generated/TDelete.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift2/generated/THBaseService.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift2/generated/TIncrement.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift2/generated/TScan.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift2/generated/TPut.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/ThriftServerRunner.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/Mutation.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/BatchMutation.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/Hbase.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/TScan.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/TRowResult.java&lt;br/&gt;
  src/main/resources/org/apache/hadoop/hbase/thrift/Hbase.thrift&lt;br/&gt;
  src/main/resources/org/apache/hadoop/hbase/thrift2/hbase.thrift&lt;/p&gt;</comment>
                            <comment id="13195947" author="phabricator@reviews.facebook.net" created="Mon, 30 Jan 2012 05:55:10 +0000"  >&lt;p&gt;dhruba updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5295&quot; title=&quot;Improve the Thrift API  to switch on/off writing to wal for Mutations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5295&quot;&gt;&lt;del&gt;HBASE-5295&lt;/del&gt;&lt;/a&gt; Improve the Thrift API to switch on/off writing to wal for Mutations&quot;.&lt;br/&gt;
Reviewers: sc, tedyu, stack&lt;/p&gt;

&lt;p&gt;  Incorporated changes to thrift2 as well.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1515&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1515&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/thrift/TestThriftServer.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift2/ThriftUtilities.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift2/generated/TResult.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift2/generated/TGet.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift2/generated/TDelete.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift2/generated/THBaseService.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift2/generated/TIncrement.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift2/generated/TScan.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift2/generated/TPut.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/ThriftServerRunner.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/Mutation.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/BatchMutation.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/Hbase.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/TScan.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/TRowResult.java&lt;br/&gt;
  src/main/resources/org/apache/hadoop/hbase/thrift/Hbase.thrift&lt;br/&gt;
  src/main/resources/org/apache/hadoop/hbase/thrift2/hbase.thrift&lt;/p&gt;</comment>
                            <comment id="13195948" author="phabricator@reviews.facebook.net" created="Mon, 30 Jan 2012 05:55:11 +0000"  >&lt;p&gt;dhruba updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5295&quot; title=&quot;Improve the Thrift API  to switch on/off writing to wal for Mutations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5295&quot;&gt;&lt;del&gt;HBASE-5295&lt;/del&gt;&lt;/a&gt; Improve the Thrift API to switch on/off writing to wal for Mutations&quot;.&lt;br/&gt;
Reviewers: sc, tedyu, stack&lt;/p&gt;

&lt;p&gt;  Incorporated changes to thrift2 as well.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1515&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1515&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/thrift/TestThriftServer.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift2/ThriftUtilities.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift2/generated/TResult.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift2/generated/TGet.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift2/generated/TDelete.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift2/generated/THBaseService.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift2/generated/TIncrement.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift2/generated/TScan.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift2/generated/TPut.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/ThriftServerRunner.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/Mutation.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/BatchMutation.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/Hbase.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/TScan.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/TRowResult.java&lt;br/&gt;
  src/main/resources/org/apache/hadoop/hbase/thrift/Hbase.thrift&lt;br/&gt;
  src/main/resources/org/apache/hadoop/hbase/thrift2/hbase.thrift&lt;/p&gt;</comment>
                            <comment id="13195949" author="phabricator@reviews.facebook.net" created="Mon, 30 Jan 2012 05:55:13 +0000"  >&lt;p&gt;dhruba updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5295&quot; title=&quot;Improve the Thrift API  to switch on/off writing to wal for Mutations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5295&quot;&gt;&lt;del&gt;HBASE-5295&lt;/del&gt;&lt;/a&gt; Improve the Thrift API to switch on/off writing to wal for Mutations&quot;.&lt;br/&gt;
Reviewers: sc, tedyu, stack&lt;/p&gt;

&lt;p&gt;  Incorporated changes to thrift2 as well.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1515&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1515&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/thrift/TestThriftServer.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift2/ThriftUtilities.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift2/generated/TResult.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift2/generated/TGet.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift2/generated/TDelete.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift2/generated/THBaseService.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift2/generated/TIncrement.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift2/generated/TScan.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift2/generated/TPut.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/ThriftServerRunner.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/Mutation.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/BatchMutation.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/Hbase.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/TScan.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/TRowResult.java&lt;br/&gt;
  src/main/resources/org/apache/hadoop/hbase/thrift/Hbase.thrift&lt;br/&gt;
  src/main/resources/org/apache/hadoop/hbase/thrift2/hbase.thrift&lt;/p&gt;</comment>
                            <comment id="13195962" author="hadoopqa" created="Mon, 30 Jan 2012 06:47:21 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12512389/D1515.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12512389/D1515.2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -140 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 161 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat&lt;br/&gt;
                  org.apache.hadoop.hbase.mapred.TestTableMapReduce&lt;br/&gt;
                  org.apache.hadoop.hbase.io.hfile.TestHFileBlock&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestImportTsv&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/868//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/868//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/868//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/868//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/868//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/868//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13196046" author="zhihyu@ebaysf.com" created="Mon, 30 Jan 2012 10:48:36 +0000"  >&lt;p&gt;There were no hanging tests for patch v2.&lt;/p&gt;</comment>
                            <comment id="13196586" author="phabricator@reviews.facebook.net" created="Tue, 31 Jan 2012 00:41:08 +0000"  >&lt;p&gt;tedyu has accepted the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5295&quot; title=&quot;Improve the Thrift API  to switch on/off writing to wal for Mutations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5295&quot;&gt;&lt;del&gt;HBASE-5295&lt;/del&gt;&lt;/a&gt; Improve the Thrift API to switch on/off writing to wal for Mutations&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1515&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1515&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13196587" author="phabricator@reviews.facebook.net" created="Tue, 31 Jan 2012 00:41:09 +0000"  >&lt;p&gt;tedyu has accepted the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5295&quot; title=&quot;Improve the Thrift API  to switch on/off writing to wal for Mutations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5295&quot;&gt;&lt;del&gt;HBASE-5295&lt;/del&gt;&lt;/a&gt; Improve the Thrift API to switch on/off writing to wal for Mutations&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1515&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1515&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13196588" author="phabricator@reviews.facebook.net" created="Tue, 31 Jan 2012 00:41:09 +0000"  >&lt;p&gt;tedyu has accepted the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5295&quot; title=&quot;Improve the Thrift API  to switch on/off writing to wal for Mutations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5295&quot;&gt;&lt;del&gt;HBASE-5295&lt;/del&gt;&lt;/a&gt; Improve the Thrift API to switch on/off writing to wal for Mutations&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1515&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1515&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13196589" author="phabricator@reviews.facebook.net" created="Tue, 31 Jan 2012 00:41:11 +0000"  >&lt;p&gt;tedyu has accepted the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5295&quot; title=&quot;Improve the Thrift API  to switch on/off writing to wal for Mutations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5295&quot;&gt;&lt;del&gt;HBASE-5295&lt;/del&gt;&lt;/a&gt; Improve the Thrift API to switch on/off writing to wal for Mutations&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1515&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1515&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13198005" author="dhruba" created="Wed, 1 Feb 2012 17:59:30 +0000"  >&lt;p&gt;Can some kind soul pl commit this one?&lt;/p&gt;</comment>
                            <comment id="13198009" author="zhihyu@ebaysf.com" created="Wed, 1 Feb 2012 18:04:41 +0000"  >&lt;p&gt;I was in the process of integrating the patch &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Integrated to TRUNK.&lt;/p&gt;

&lt;p&gt;Thanks for the patch, Dhruba.&lt;/p&gt;</comment>
                            <comment id="13198087" author="hudson" created="Wed, 1 Feb 2012 19:46:18 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2650 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2650/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2650/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5295&quot; title=&quot;Improve the Thrift API  to switch on/off writing to wal for Mutations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5295&quot;&gt;&lt;del&gt;HBASE-5295&lt;/del&gt;&lt;/a&gt; Improve the Thrift API to switch on/off writing to wal for Mutations (Dhruba)&lt;/p&gt;

&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/thrift/ThriftServerRunner.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/thrift/generated/BatchMutation.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/thrift/generated/Hbase.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/thrift/generated/Mutation.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/thrift/generated/TRowResult.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/thrift/generated/TScan.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/thrift2/ThriftUtilities.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/thrift2/generated/TDelete.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/thrift2/generated/TGet.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/thrift2/generated/THBaseService.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/thrift2/generated/TIncrement.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/thrift2/generated/TPut.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/thrift2/generated/TResult.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/thrift2/generated/TScan.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/resources/org/apache/hadoop/hbase/thrift/Hbase.thrift&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/resources/org/apache/hadoop/hbase/thrift2/hbase.thrift&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/thrift/TestThriftServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13267814" author="phabricator@reviews.facebook.net" created="Thu, 3 May 2012 21:26:47 +0000"  >&lt;p&gt;mbautin requested code review of &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5295&quot; title=&quot;Improve the Thrift API  to switch on/off writing to wal for Mutations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5295&quot;&gt;&lt;del&gt;HBASE-5295&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;89-fb&amp;#93;&lt;/span&gt; Improve the Thrift API to switch on/off writing to wal for Mutations&quot;.&lt;br/&gt;
Reviewers: Kannan, dhruba, sc, JIRA&lt;/p&gt;

&lt;p&gt;  Porting Dhruba&apos;s patch from &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5295&quot; title=&quot;Improve the Thrift API  to switch on/off writing to wal for Mutations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5295&quot;&gt;&lt;del&gt;HBASE-5295&lt;/del&gt;&lt;/a&gt; to 89-fb add a writeToWAL flag to the Mutation Thrift API. Also adding a new unit test and fixing an inconsistency in the mutateRow API in case different Mutation objects have different values of writeToWAL specified.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  Exiting unit tests&lt;br/&gt;
  New unit test&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3015&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3015&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/KeyValue.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLog.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/ThriftServerRunner.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/ThriftUtilities.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/Mutation.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/Bytes.java&lt;br/&gt;
  src/main/resources/org/apache/hadoop/hbase/thrift/Hbase.thrift&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/HTestConst.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/thrift/TestMutationWriteToWAL.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/thrift/TestThriftServer.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/thrift/TestThriftServerLegacy.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/6861/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/herald/transcript/6861/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13268724" author="phabricator@reviews.facebook.net" created="Fri, 4 May 2012 21:33:51 +0000"  >&lt;p&gt;Kannan has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5295&quot; title=&quot;Improve the Thrift API  to switch on/off writing to wal for Mutations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5295&quot;&gt;&lt;del&gt;HBASE-5295&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;89-fb&amp;#93;&lt;/span&gt; Improve the Thrift API to switch on/off writing to wal for Mutations&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/ThriftServerRunner.java:989 @mikhail: the tighter check you added to make sure all mutations have the same writeToWAL setting should be added for this case too.&lt;/p&gt;

&lt;p&gt;  Otherwise, rest of the diff looks really good. And nice test!&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3015&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3015&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13268859" author="phabricator@reviews.facebook.net" created="Sat, 5 May 2012 01:51:47 +0000"  >&lt;p&gt;mbautin updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5295&quot; title=&quot;Improve the Thrift API  to switch on/off writing to wal for Mutations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5295&quot;&gt;&lt;del&gt;HBASE-5295&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;89-fb&amp;#93;&lt;/span&gt; Improve the Thrift API to switch on/off writing to wal for Mutations&quot;.&lt;br/&gt;
Reviewers: Kannan, dhruba, sc, JIRA&lt;/p&gt;

&lt;p&gt;  Addressing Kannan&apos;s comment. Testing both API methods in the unit test.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3015&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3015&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/KeyValue.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLog.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/ThriftServerRunner.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/ThriftUtilities.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/Mutation.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/Bytes.java&lt;br/&gt;
  src/main/resources/org/apache/hadoop/hbase/thrift/Hbase.thrift&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/HTestConst.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/thrift/TestMutationWriteToWAL.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/thrift/TestThriftServer.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/thrift/TestThriftServerLegacy.java&lt;/p&gt;</comment>
                            <comment id="13268883" author="phabricator@reviews.facebook.net" created="Sat, 5 May 2012 03:09:54 +0000"  >&lt;p&gt;mbautin updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5295&quot; title=&quot;Improve the Thrift API  to switch on/off writing to wal for Mutations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5295&quot;&gt;&lt;del&gt;HBASE-5295&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;89-fb&amp;#93;&lt;/span&gt; Improve the Thrift API to switch on/off writing to wal for Mutations&quot;.&lt;br/&gt;
Reviewers: Kannan, dhruba, sc, JIRA&lt;/p&gt;

&lt;p&gt;  Testing deletes. Fixed a bug: we were always writing deletes to WAL (this is fixed in trunk).&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3015&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3015&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/KeyValue.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLog.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/ThriftServerRunner.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/ThriftUtilities.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/Mutation.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/Bytes.java&lt;br/&gt;
  src/main/resources/org/apache/hadoop/hbase/thrift/Hbase.thrift&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/HTestConst.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/thrift/TestMutationWriteToWAL.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/thrift/TestThriftServer.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/thrift/TestThriftServerLegacy.java&lt;/p&gt;</comment>
                            <comment id="13268886" author="phabricator@reviews.facebook.net" created="Sat, 5 May 2012 03:13:49 +0000"  >&lt;p&gt;mbautin updated the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5295&quot; title=&quot;Improve the Thrift API  to switch on/off writing to wal for Mutations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5295&quot;&gt;&lt;del&gt;HBASE-5295&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;89-fb&amp;#93;&lt;/span&gt; Improve the Thrift API to switch on/off writing to wal for Mutations&quot;.&lt;br/&gt;
Reviewers: Kannan, dhruba, sc, JIRA&lt;/p&gt;

&lt;p&gt;  Simplifying a couple of lines&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3015&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3015&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/KeyValue.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLog.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/ThriftServerRunner.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/ThriftUtilities.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/thrift/generated/Mutation.java&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/util/Bytes.java&lt;br/&gt;
  src/main/resources/org/apache/hadoop/hbase/thrift/Hbase.thrift&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/HTestConst.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/thrift/TestMutationWriteToWAL.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/thrift/TestThriftServer.java&lt;br/&gt;
  src/test/java/org/apache/hadoop/hbase/thrift/TestThriftServerLegacy.java&lt;/p&gt;</comment>
                            <comment id="13268898" author="phabricator@reviews.facebook.net" created="Sat, 5 May 2012 04:25:12 +0000"  >&lt;p&gt;Kannan has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5295&quot; title=&quot;Improve the Thrift API  to switch on/off writing to wal for Mutations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5295&quot;&gt;&lt;del&gt;HBASE-5295&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;89-fb&amp;#93;&lt;/span&gt; Improve the Thrift API to switch on/off writing to wal for Mutations&quot;.&lt;/p&gt;

&lt;p&gt;  looks good! nice work as usual Mikhail.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java:2370 good catch!&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3015&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3015&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13269824" author="phabricator@reviews.facebook.net" created="Mon, 7 May 2012 18:02:46 +0000"  >&lt;p&gt;mbautin has commented on the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5295&quot; title=&quot;Improve the Thrift API  to switch on/off writing to wal for Mutations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5295&quot;&gt;&lt;del&gt;HBASE-5295&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;89-fb&amp;#93;&lt;/span&gt; Improve the Thrift API to switch on/off writing to wal for Mutations&quot;.&lt;/p&gt;

&lt;p&gt;  @Kannan: thanks for reviewing! Could you please accept the diff if it looks good?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3015&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3015&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13269852" author="phabricator@reviews.facebook.net" created="Mon, 7 May 2012 18:28:50 +0000"  >&lt;p&gt;Kannan has accepted the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5295&quot; title=&quot;Improve the Thrift API  to switch on/off writing to wal for Mutations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5295&quot;&gt;&lt;del&gt;HBASE-5295&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;89-fb&amp;#93;&lt;/span&gt; Improve the Thrift API to switch on/off writing to wal for Mutations&quot;.&lt;/p&gt;

&lt;p&gt;  sorry for forgetting to hit accept last time &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3015&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3015&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  hbase_5295_improve_the_thrift_api_to_switch_v6&lt;/p&gt;</comment>
                            <comment id="13269976" author="phabricator@reviews.facebook.net" created="Mon, 7 May 2012 20:24:54 +0000"  >&lt;p&gt;mbautin has committed the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5295&quot; title=&quot;Improve the Thrift API  to switch on/off writing to wal for Mutations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5295&quot;&gt;&lt;del&gt;HBASE-5295&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;89-fb&amp;#93;&lt;/span&gt; Improve the Thrift API to switch on/off writing to wal for Mutations&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D3015&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D3015&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;COMMIT&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/rHBASEEIGHTNINEFBBRANCH1335234&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/rHBASEEIGHTNINEFBBRANCH1335234&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13272576" author="phabricator@reviews.facebook.net" created="Thu, 10 May 2012 18:10:50 +0000"  >&lt;p&gt;dhruba has closed the revision &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5295&quot; title=&quot;Improve the Thrift API  to switch on/off writing to wal for Mutations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5295&quot;&gt;&lt;del&gt;HBASE-5295&lt;/del&gt;&lt;/a&gt; Improve the Thrift API to switch on/off writing to wal for Mutations&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1515&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.facebook.net/D1515&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: sc, tedyu, stack, dhruba&lt;br/&gt;
Cc: JIRA, tedyu, dhruba&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12512345" name="ASF.LICENSE.NOT.GRANTED--D1515.1.patch" size="49190" author="phabricator@reviews.facebook.net" created="Sun, 29 Jan 2012 02:20:13 +0000"/>
                            <attachment id="12512344" name="ASF.LICENSE.NOT.GRANTED--D1515.1.patch" size="49190" author="phabricator@reviews.facebook.net" created="Sun, 29 Jan 2012 02:20:12 +0000"/>
                            <attachment id="12512343" name="ASF.LICENSE.NOT.GRANTED--D1515.1.patch" size="49190" author="phabricator@reviews.facebook.net" created="Sun, 29 Jan 2012 02:20:10 +0000"/>
                            <attachment id="12512342" name="ASF.LICENSE.NOT.GRANTED--D1515.1.patch" size="49190" author="phabricator@reviews.facebook.net" created="Sun, 29 Jan 2012 02:20:09 +0000"/>
                            <attachment id="12512389" name="ASF.LICENSE.NOT.GRANTED--D1515.2.patch" size="72433" author="phabricator@reviews.facebook.net" created="Mon, 30 Jan 2012 05:55:14 +0000"/>
                            <attachment id="12512388" name="ASF.LICENSE.NOT.GRANTED--D1515.2.patch" size="72433" author="phabricator@reviews.facebook.net" created="Mon, 30 Jan 2012 05:55:12 +0000"/>
                            <attachment id="12512387" name="ASF.LICENSE.NOT.GRANTED--D1515.2.patch" size="72433" author="phabricator@reviews.facebook.net" created="Mon, 30 Jan 2012 05:55:10 +0000"/>
                            <attachment id="12512386" name="ASF.LICENSE.NOT.GRANTED--D1515.2.patch" size="72433" author="phabricator@reviews.facebook.net" created="Mon, 30 Jan 2012 05:55:09 +0000"/>
                            <attachment id="12525513" name="ASF.LICENSE.NOT.GRANTED--D3015.1.patch" size="30287" author="phabricator@reviews.facebook.net" created="Thu, 3 May 2012 21:26:49 +0000"/>
                            <attachment id="12525710" name="ASF.LICENSE.NOT.GRANTED--D3015.2.patch" size="32940" author="phabricator@reviews.facebook.net" created="Sat, 5 May 2012 01:51:48 +0000"/>
                            <attachment id="12525715" name="ASF.LICENSE.NOT.GRANTED--D3015.3.patch" size="34633" author="phabricator@reviews.facebook.net" created="Sat, 5 May 2012 03:09:55 +0000"/>
                            <attachment id="12525717" name="ASF.LICENSE.NOT.GRANTED--D3015.4.patch" size="34554" author="phabricator@reviews.facebook.net" created="Sat, 5 May 2012 03:13:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 29 Jan 2012 02:20:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>225627</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 32 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0168n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4780</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>