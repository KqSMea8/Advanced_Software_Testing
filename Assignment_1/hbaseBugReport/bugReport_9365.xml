<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:03:46 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-9365/HBASE-9365.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-9365] Optionally limit major compactions to off peak hours</title>
                <link>https://issues.apache.org/jira/browse/HBASE-9365</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;We already have off peak hours (where we set a more aggressive compaction ratio) and periodic major compactions.&lt;br/&gt;
It would be nice if we could limit this to off peak hours as well.&lt;/p&gt;

&lt;p&gt;A major compaction can be triggered in three ways:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;a periodic chore checking every ~3h (10.000.000ms) by default&lt;/li&gt;
	&lt;li&gt;a minor compaction promoted to major because the last major compaction was too long ago&lt;/li&gt;
	&lt;li&gt;a minor compaction promoted to major (at the HStore level), because it touched all HFiles anyway&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;For case #1 and #2 we could could optionally return false from Store.isMajorCompaction(...) when we&apos;re not in the off peak window. Would have a new config option to enforce that only optionally.&lt;br/&gt;
In case #3 we&apos;re compacting all files anyway, so not need to interfere with that.&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12665983">HBASE-9365</key>
            <summary>Optionally limit major compactions to off peak hours</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="lhofhansl">Lars Hofhansl</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 Aug 2013 18:56:28 +0000</created>
                <updated>Thu, 29 Aug 2013 18:31:28 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13752766" author="stack" created="Wed, 28 Aug 2013 19:33:53 +0000"  >&lt;p&gt;Is this facility out in the fb branch?&lt;/p&gt;</comment>
                            <comment id="13752816" author="lhofhansl" created="Wed, 28 Aug 2013 20:31:53 +0000"  >&lt;p&gt;AFAIK, they are running major compactions manually; so probably not (haven&apos;t checked the code). The of peak stuff is in both fb and 0.94+&lt;br/&gt;
The patch here would be simple, actually, just a check for the already off peak hours in some more places.&lt;/p&gt;</comment>
                            <comment id="13753459" author="apurtell" created="Thu, 29 Aug 2013 09:30:38 +0000"  >&lt;p&gt;Can we make the decision when to run major compaction pluggable? Then provide the current decisionmaking as default. Then introduce the suggested policy in this issue.&lt;/p&gt;</comment>
                            <comment id="13753913" author="lhofhansl" created="Thu, 29 Aug 2013 18:31:28 +0000"  >&lt;p&gt;Heh. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jesse_yates&quot; class=&quot;user-hover&quot; rel=&quot;jesse_yates&quot;&gt;Jesse Yates&lt;/a&gt; was saying the same thing. I&apos;ll see what I can do.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 28 Aug 2013 19:33:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>345922</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 16 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1nnhj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>346223</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>