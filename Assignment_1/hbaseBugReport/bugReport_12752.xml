<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:36:07 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-12752/HBASE-12752.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-12752] Move from HServerAddress (0.89-fb) to HostAndPort in hbase-consensus module</title>
                <link>https://issues.apache.org/jira/browse/HBASE-12752</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;0.89-fb uses HServerAddress and so does hbase-consensus. The trunk has moved to ServerName and we need to migrate from HServerAddress to ServerName.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12763512">HBASE-12752</key>
            <summary>Move from HServerAddress (0.89-fb) to HostAndPort in hbase-consensus module</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12748178">HBASE-12259</parent>
                                    <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="rshroff">Rishit Shroff</assignee>
                                    <reporter username="rshroff">Rishit Shroff</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Dec 2014 18:30:06 +0000</created>
                <updated>Fri, 26 Jun 2015 19:45:37 +0000</updated>
                                            <version>HBASE-12259</version>
                                    <fixVersion>HBASE-12259</fixVersion>
                                    <component>hbase</component>
                        <due>Tue, 23 Dec 2014 00:00:00 +0000</due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="14257882" author="hadoopqa" created="Wed, 24 Dec 2014 03:12:11 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12688976/0001-HBASE-12752-Get-rid-of-HServerAddress-from-hbase-con.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12688976/0001-HBASE-12752-Get-rid-of-HServerAddress-from-hbase-con.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 9a829dc458505f72702cb8c6942cd952f9d290d0.&lt;br/&gt;
  ATTACHMENT ID: 12688976&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 10 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12219//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12219//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14257921" author="stack" created="Wed, 24 Dec 2014 03:44:11 +0000"  >&lt;p&gt;In a quorum, machines are known by host and port  only; there is no consideration of startcode.  Thats ok?  As far as a quorum client is concerned, as long as same host and port, it will host same regions? (maybe that is the case currently and thats fine but later, we might want to revisit?)&lt;/p&gt;

&lt;p&gt;Is the compare in AbstractPeerManager (and in QuorumInfo ) going to be ok? (Where we compare ServerName?)  We sure it is always going to be NON_STARTCODE?  If so, fine.  Might want to add a comment to that effect on commit.&lt;/p&gt;

&lt;p&gt;Move to ServerName is going to better if though it not exactly the right fit since HServerAddress was doing DNS lookups under the floorboards.&lt;/p&gt;

&lt;p&gt;Might want to change name of this method:&lt;/p&gt;

&lt;p&gt;	  public ServerName getServerAddress() {&lt;/p&gt;

&lt;p&gt;and ditto&lt;/p&gt;

&lt;p&gt; public static ServerName getHRegionServerAddress(&lt;/p&gt;

&lt;p&gt;+1 Let me know if you need someone to commit to the branch for you.&lt;/p&gt;</comment>
                            <comment id="14258011" author="rshroff" created="Wed, 24 Dec 2014 06:07:06 +0000"  >&lt;p&gt;In a quorum, machines are known by host and port only; there is no consideration of startcode. Thats ok? As far as a quorum client is concerned, as long as same host and port, it will host same regions? (maybe that is the case currently and thats fine but later, we might want to revisit?)&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Within a Quorum, a host and port should be good enough to uniquely identify the member. startcode should not matter. We can surely revisit this later. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Is the compare in AbstractPeerManager (and in QuorumInfo ) going to be ok? (Where we compare ServerName?) We sure it is always going to be NON_STARTCODE? If so, fine. Might want to add a comment to that effect on commit.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Yeah, the start code should always be NON_STARTCODE&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Move to ServerName is going to better if though it not exactly the right fit since HServerAddress was doing DNS lookups under the floorboards.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;I agree&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Might want to change name of this method:&lt;br/&gt;
public ServerName getServerAddress() {&lt;br/&gt;
and ditto&lt;br/&gt;
public static ServerName getHRegionServerAddress(&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Done&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; Ideally, we need only host+port for the consensus module. I was tempted to use the HostAndPort from guava, but then I decided to remain in-sync with HBase usage. Hence, the patch has NON_STARTCODE usage everywhere. If folks are fine, I can send out a patch to change to HostAndPort.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Rishit&lt;/p&gt;</comment>
                            <comment id="14258016" author="hadoopqa" created="Wed, 24 Dec 2014 06:12:03 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12689000/0001-HBASE-12752-Get-rid-of-HServerAddress-from-hbase-con.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12689000/0001-HBASE-12752-Get-rid-of-HServerAddress-from-hbase-con.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 9a829dc458505f72702cb8c6942cd952f9d290d0.&lt;br/&gt;
  ATTACHMENT ID: 12689000&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 10 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12222//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12222//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14258039" author="stack" created="Wed, 24 Dec 2014 06:33:18 +0000"  >&lt;p&gt;Do what you think makes most sense regards host and port &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rshroff&quot; class=&quot;user-hover&quot; rel=&quot;rshroff&quot;&gt;Rishit Shroff&lt;/a&gt;  As you suggest if never going to use startcode, then might make more sense doing host and port.  If a server crashes and then comes back, it will be given the same set of regions to server in current codebase?&lt;/p&gt;</comment>
                            <comment id="14258044" author="rshroff" created="Wed, 24 Dec 2014 06:37:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; yups. If the RMap has not changed across the reboot, then same regions should be assigned to the the regionserver. I will put out a patch to use HostAndPort to make it easier and demystify this startcode special use here. Will get it out before the holidays!&lt;/p&gt;</comment>
                            <comment id="14258603" author="hadoopqa" created="Thu, 25 Dec 2014 00:41:57 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12689083/0001-Replace-HServerAddress-with-HostAndPort.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12689083/0001-Replace-HServerAddress-with-HostAndPort.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 30424ec73f7f100b233e27196c0a6a90abd62ad2.&lt;br/&gt;
  ATTACHMENT ID: 12689083&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 10 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12223//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12223//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14259574" author="stack" created="Sun, 28 Dec 2014 05:22:22 +0000"  >&lt;p&gt;Patch looks good.&lt;/p&gt;

&lt;p&gt;In below, you are worried the string may not be correctly formatted? Is that why you go from string and back to string again?&lt;/p&gt;

&lt;p&gt;	179	            HostAndPort leaderAddr = HostAndPort.fromString(leaderAddrString);&lt;br/&gt;
180	            leader = agentMap.get(leaderAddr.toString());&lt;/p&gt;

&lt;p&gt;You do sam ein QuorumThriftClientAgent&lt;/p&gt;

&lt;p&gt;QuorumThriftClientCLI and AbstractPeerManager add imports that are not used?&lt;/p&gt;

&lt;p&gt;+1 on patch. Above nits can be addressed on commit.&lt;/p&gt;</comment>
                            <comment id="14260332" author="rshroff" created="Mon, 29 Dec 2014 19:07:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; Thanks for the review. I have addressed the review comments and uploaded the new patch.&lt;/p&gt;

&lt;p&gt;In below, you are worried the string may not be correctly formatted? Is that why you go from string and back to string again?&lt;br/&gt;
179	HostAndPort leaderAddr = HostAndPort.fromString(leaderAddrString);&lt;br/&gt;
180	leader = agentMap.get(leaderAddr.toString());&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Done&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;You do sam ein QuorumThriftClientAgent&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Yeah, I need to create the InetSocketAddress object and hence need the address and port separately. Therefore storing it in HostAndPort and then using toString() for logging.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;QuorumThriftClientCLI and AbstractPeerManager add imports that are not used?&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Done&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;+1 on patch. Above nits can be addressed on commit.&lt;/p&gt;</comment>
                            <comment id="14260333" author="hadoopqa" created="Mon, 29 Dec 2014 19:12:21 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12689362/0001-Replace-HServerAddress-with-HostAndPort-1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12689362/0001-Replace-HServerAddress-with-HostAndPort-1.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit b2eea8cac6cceab323bf79b77e321d24dd5c90c2.&lt;br/&gt;
  ATTACHMENT ID: 12689362&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 10 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12249//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12249//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12689362" name="0001-Replace-HServerAddress-with-HostAndPort-1.patch" size="70410" author="rshroff" created="Mon, 29 Dec 2014 19:04:35 +0000"/>
                            <attachment id="12689083" name="0001-Replace-HServerAddress-with-HostAndPort.patch" size="70042" author="rshroff" created="Thu, 25 Dec 2014 00:31:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 24 Dec 2014 03:12:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 50 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i23qev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>