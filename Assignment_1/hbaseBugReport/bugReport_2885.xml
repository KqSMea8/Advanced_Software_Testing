<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:05:34 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-2885/HBASE-2885.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-2885] Data which was invisible shows up after restarting HBase</title>
                <link>https://issues.apache.org/jira/browse/HBASE-2885</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;As experienced by Karthik Kambatla, Vlad and Steve Kuo, HBase 0.20.5 exhibits inconsistent behavior when user tries to access data in a table.&lt;/p&gt;

&lt;p&gt;One such case involves offline region for the underlying table.&lt;/p&gt;

&lt;p&gt;See the following threads in hbase user mailing list:&lt;br/&gt;
How to delete an &quot;non-existent&quot; table&lt;br/&gt;
Flaky tableExists()&lt;/p&gt;

&lt;p&gt;And this thread in hbase dev mailing list:&lt;br/&gt;
Data disappears and re-appears again after HBase cluster restart&lt;/p&gt;</description>
                <environment></environment>
        <key id="12470307">HBASE-2885</key>
            <summary>Data which was invisible shows up after restarting HBase</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ted_yu">Ted Yu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 Jul 2010 01:49:37 +0000</created>
                <updated>Wed, 16 Jul 2014 22:21:45 +0000</updated>
                            <resolved>Wed, 16 Jul 2014 22:21:45 +0000</resolved>
                                    <version>0.20.5</version>
                                                    <component>master</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12893399" author="ted_yu" created="Wed, 28 Jul 2010 22:27:40 +0000"  >&lt;p&gt;I can observe this problem on master.jsp which shows 6 tables after 2 runs.&lt;br/&gt;
But HBase shell shows correct number of tables: 14&lt;/p&gt;

&lt;p&gt;It is clear from master log that although RegionManager.metaScanner locates .META. table on 10.32.56.155, the cache in HConnectionManager$TableServers is stale.&lt;br/&gt;
Refreshing master.jsp doesn&apos;t give the correct table count.&lt;/p&gt;

&lt;p&gt;Here is snippet from master log:&lt;/p&gt;

&lt;p&gt;2010-07-28 15:19:10,974 DEBUG org.apache.hadoop.hbase.master.RegionManager: Assigning address: 10.32.56.156:60020, startcode: 1280346234926, load: (requests=0, regions=14, usedHeap=60, maxHeap=3991) 1 regions&lt;br/&gt;
2010-07-28 15:19:10,974 INFO org.apache.hadoop.hbase.master.RegionManager: Assigning region 2__HB_NOINC_ORCL_SQLLDR_0728-DIMENSIONS-1280352660291-0,,1280352695476 to sjc9-flash-grid02.carrieriq.com,60020,1280346234926&lt;br/&gt;
2010-07-28 15:19:10,976 INFO org.apache.hadoop.hbase.master.ServerManager: Processing MSG_REPORT_OPEN: 2__HB_NOINC_ORCL_SQLLDR_0728-DIMENSIONS-1280352660291-0,,1280352695476 from sjc9-flash-grid02.carrieriq.com,60020,1280346234926; 1 of 1&lt;br/&gt;
2010-07-28 15:19:10,976 DEBUG org.apache.hadoop.hbase.master.HMaster: Processing todo: PendingOpenOperation from sjc9-flash-grid02.carrieriq.com,60020,1280346234926&lt;br/&gt;
2010-07-28 15:19:10,976 INFO org.apache.hadoop.hbase.master.RegionServerOperation: 2__HB_NOINC_ORCL_SQLLDR_0728-DIMENSIONS-1280352660291-0,,1280352695476 open on 10.32.56.156:60020&lt;br/&gt;
2010-07-28 15:19:10,977 INFO org.apache.hadoop.hbase.master.RegionServerOperation: Updated row 2__HB_NOINC_ORCL_SQLLDR_0728-DIMENSIONS-1280352660291-0,,1280352695476 in region .META.,,1 with startcode=1280346234926, server=10.32.56.156:60020&lt;br/&gt;
2010-07-28 15:20:08,621 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$TableServers: Cache hit for row &amp;lt;&amp;gt; in tableName .META.: location server 10.32.56.157:60020, location region name .META.,,1&lt;br/&gt;
2010-07-28 15:20:09,875 INFO org.apache.hadoop.hbase.master.ServerManager: 3 region servers, 0 dead, average load 14.333333333333334&lt;br/&gt;
2010-07-28 15:20:10,001 INFO org.apache.hadoop.hbase.master.BaseScanner: RegionManager.metaScanner scanning meta region &lt;/p&gt;
{server: 10.32.56.155:60020, regionname: .META.,,1, startKey: &amp;lt;&amp;gt;}
&lt;p&gt;2010-07-28 15:20:10,016 DEBUG org.apache.hadoop.hbase.master.BaseScanner: Current assignment of 2__HB_NOINC_ORCL_SQLLDR_0728-DIMENSIONS-1280352660291-0,,1280352695476 is not valid;  serverAddress=10.32.56.156:60020, startCode=1280346234926 unknown.&lt;br/&gt;
2010-07-28 15:20:10,021 INFO org.apache.hadoop.hbase.master.BaseScanner: RegionManager.metaScanner scan of 14 row(s) of meta region &lt;/p&gt;
{server: 10.32.56.155:60020, regionname: .META.,,1, startKey: &amp;lt;&amp;gt;}
&lt;p&gt; complete&lt;br/&gt;
2010-07-28 15:20:10,022 INFO org.apache.hadoop.hbase.master.BaseScanner: All 1 .META. region(s) scanned&lt;br/&gt;
2010-07-28 15:20:10,162 DEBUG org.apache.hadoop.hbase.master.RegionManager: Assigning for address: 10.32.56.156:60020, startcode: 1280346234926, load: (requests=0, regions=14, usedHeap=45, maxHeap=3991): total nregions to assign=1, regions to give other servers than this=0, isMetaAssign=false&lt;br/&gt;
2010-07-28 15:20:10,162 DEBUG org.apache.hadoop.hbase.master.RegionManager: Assigning address: 10.32.56.156:60020, startcode: 1280346234926, load: (requests=0, regions=14, usedHeap=45, maxHeap=3991) 1 regions&lt;br/&gt;
2010-07-28 15:20:10,162 INFO org.apache.hadoop.hbase.master.RegionManager: Assigning region 2__HB_NOINC_ORCL_SQLLDR_0728-DIMENSIONS-1280352660291-0,,1280352695476 to sjc9-flash-grid02.carrieriq.com,60020,1280346234926&lt;br/&gt;
2010-07-28 15:20:10,164 INFO org.apache.hadoop.hbase.master.ServerManager: Processing MSG_REPORT_OPEN: 2__HB_NOINC_ORCL_SQLLDR_0728-DIMENSIONS-1280352660291-0,,1280352695476 from sjc9-flash-grid02.carrieriq.com,60020,1280346234926; 1 of 1&lt;br/&gt;
2010-07-28 15:20:10,164 DEBUG org.apache.hadoop.hbase.master.HMaster: Processing todo: PendingOpenOperation from sjc9-flash-grid02.carrieriq.com,60020,1280346234926&lt;br/&gt;
2010-07-28 15:20:10,164 INFO org.apache.hadoop.hbase.master.RegionServerOperation: 2__HB_NOINC_ORCL_SQLLDR_0728-DIMENSIONS-1280352660291-0,,1280352695476 open on 10.32.56.156:60020&lt;br/&gt;
2010-07-28 15:20:10,166 INFO org.apache.hadoop.hbase.master.RegionServerOperation: Updated row 2__HB_NOINC_ORCL_SQLLDR_0728-DIMENSIONS-1280352660291-0,,1280352695476 in region .META.,,1 with startcode=1280346234926, server=10.32.56.156:60020&lt;br/&gt;
2010-07-28 15:20:10,810 INFO org.apache.hadoop.hbase.master.BaseScanner: RegionManager.rootScanner scanning meta region &lt;/p&gt;
{server: 10.32.56.155:60020, regionname: -ROOT-,,0, startKey: &amp;lt;&amp;gt;}
&lt;p&gt;2010-07-28 15:20:10,813 INFO org.apache.hadoop.hbase.master.BaseScanner: RegionManager.rootScanner scan of 1 row(s) of meta region &lt;/p&gt;
{server: 10.32.56.155:60020, regionname: -ROOT-,,0, startKey: &amp;lt;&amp;gt;}
&lt;p&gt; complete&lt;/p&gt;</comment>
                            <comment id="12893405" author="ted_yu" created="Wed, 28 Jul 2010 22:38:20 +0000"  >&lt;p&gt;clearRegionCache() which is in trunk should be added to HConnectionManager.java&lt;/p&gt;</comment>
                            <comment id="14064237" author="apurtell" created="Wed, 16 Jul 2014 22:21:45 +0000"  >&lt;p&gt;Reopen or file new issue if still relevant with modern HBase versions&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 16 Jul 2014 22:21:45 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26517</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 22 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02c1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11552</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>