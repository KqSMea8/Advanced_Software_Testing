<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:45:39 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-584/HBASE-584.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-584] Names in the filter interface are confusing</title>
                <link>https://issues.apache.org/jira/browse/HBASE-584</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;I don&apos;t like the names of the filter methods in RowFilterInterface. They don&apos;t really tell how the methods are being used in the implementation of scanners.&lt;/p&gt;

&lt;p&gt;I&apos;d like to change:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;filter(Text) to filterRow(...)&lt;/li&gt;
	&lt;li&gt;filter(Text, Text, byte[]) to filterColumn(...)&lt;br/&gt;
  and the worst one is&lt;/li&gt;
	&lt;li&gt;filterNotNull(SortedMap&amp;lt;Text, byte[]&amp;gt;). This should be filterRow(Text, SortedMap&amp;lt;Text, byte[]&amp;gt;) (so we add the row key/).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;It may be nice to have timestamps in the methods as well? &lt;/p&gt;

&lt;p&gt;Also the java doc could be cleaned and improved to tell how the filtering is implemented (check rows keys first, then check each individual columns, finally check the assembled row)&lt;/p&gt;

&lt;p&gt;Upon positive feedback, and I&apos;ll create a patch.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12394133">HBASE-584</key>
            <summary>Names in the filter interface are confusing</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="clint.morgan">Clint Morgan</assignee>
                                    <reporter username="clint.morgan">Clint Morgan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 Apr 2008 17:27:41 +0000</created>
                <updated>Fri, 22 Aug 2008 21:13:13 +0000</updated>
                            <resolved>Wed, 23 Apr 2008 01:01:36 +0000</resolved>
                                                    <fixVersion>0.2.0</fixVersion>
                                    <component>Filters</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12589667" author="jimk" created="Wed, 16 Apr 2008 17:38:24 +0000"  >&lt;p&gt;Deprecate the old method names, and have them call the new methods.&lt;/p&gt;

&lt;p&gt;+1 on fixing javadoc&lt;/p&gt;

&lt;p&gt;If you add timestamps, make them optional (e.g., caller specifies 0 for timestamp means don&apos;t filter on timestamp). The deprecated APIs will call the new APIs and specify 0 for the timestamp value.&lt;/p&gt;

&lt;p&gt;Please update test cases to use new APIs.&lt;/p&gt;

&lt;p&gt;Please make the patch for the 0.1 branch, and we can remove the deprecated APIs  in 0.2&lt;/p&gt;</comment>
                            <comment id="12589677" author="stack" created="Wed, 16 Apr 2008 17:56:53 +0000"  >&lt;p&gt;+1 Clint.  Go for it.&lt;/p&gt;

&lt;p&gt;I think other than Jim in that I don&apos;t think you need to do a patch for the 0.1 branch.  Filters are a PITA enough w/o you&apos;re having to deal w/ the big differences in 0.1 and TRUNK codebase.  Up to you.&lt;/p&gt;</comment>
                            <comment id="12589694" author="jimk" created="Wed, 16 Apr 2008 19:03:23 +0000"  >&lt;p&gt;Clint,&lt;/p&gt;

&lt;p&gt;I&apos;m ok with being only a 0.2 patch, unless you want to use it in 0.1.x&lt;/p&gt;</comment>
                            <comment id="12590195" author="clint.morgan" created="Thu, 17 Apr 2008 20:15:43 +0000"  >&lt;p&gt;I don&apos;t see the need to backport this. It just a renaming on interface methods, and backporting could break existing 3rd party filters.&lt;/p&gt;

&lt;p&gt;Attached is a simple renaming patch as discussed.&lt;/p&gt;

&lt;p&gt;It also contains a slight rework of RowFilterSet to use ObjectWritable for serialization of the filters. This results in cleaner code, and moreover I hit a snag where this code would barf due to non-public constructor, where ObjectWritable will handle corectly.&lt;/p&gt;</comment>
                            <comment id="12591367" author="jimk" created="Tue, 22 Apr 2008 17:08:11 +0000"  >&lt;p&gt;Clint,&lt;/p&gt;

&lt;p&gt;I reviewed the patch and while it is fine in renaming filter methods, it does not include the old names as deprecated methods. Our policy is that an existing API must continue to exist for one release before the new API is the default and the deprecated APIs are removed.&lt;/p&gt;

&lt;p&gt;Deprecated methods should include an @deprecated flag in javadoc and a @Deprecated annotation.&lt;/p&gt;</comment>
                            <comment id="12591378" author="clint.morgan" created="Tue, 22 Apr 2008 17:23:45 +0000"  >&lt;p&gt;I get that, but does the policy make sense for interfaces that are only exposed for users to implement (rather than use)?&lt;/p&gt;

&lt;p&gt;Two cases here:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;User is simply using the filters. Then he only touches the constructors, and interface changes will not matter to him.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; -User has implemented their own RowFilter. But then they will still get compile error either way because they do not have the new interface names. If they were all inheriting from an AbstractRowFilter or something, then we could make it work, but otherwise I don&apos;t see the point of the @deprecation.&lt;/p&gt;

&lt;p&gt;What am I missing?&lt;/p&gt;</comment>
                            <comment id="12591394" author="jimk" created="Tue, 22 Apr 2008 18:21:51 +0000"  >&lt;p&gt;Clint,&lt;/p&gt;

&lt;p&gt;Our policy is that all APIs need to be supported for one release past the point where they are deprecated. Some users do not live on the bleeding edge and need time to adjust. Deprecating existing interfaces while providing the new interface gives them warning that they will need to change their code. One of the reasons I suggested making this a patch for 0.1 branch is that if we deprecate it in 0.1, we can remove it in 0.2&lt;/p&gt;

&lt;p&gt;However, if this is only going to be a 0.2 patch, then users need 1 release cycle to upgrade to the new API. So if this is a 0.2 patch, the existing APIs need to be supported until 0.3 comes out.&lt;/p&gt;</comment>
                            <comment id="12591398" author="stack" created="Tue, 22 Apr 2008 18:34:28 +0000"  >&lt;p&gt;JIm: I&apos;d be fine w/ skipping the usual deprecation in this one case.  Apart from Clint&apos;s reasoning above, here&apos;s a few more reasons why.&lt;/p&gt;

&lt;p&gt;+ In the transition from 0.1 to 0.2, we&apos;re breaking the API in a way thats not backward compatible (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-521&quot; title=&quot;Improve client scanner interface&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-521&quot;&gt;&lt;del&gt;HBASE-521&lt;/del&gt;&lt;/a&gt;); i.e we can&apos;t bring users forward using the usual deprecate because the nature of the changes do not allow it.  We can just slip i these changes under the same umbrella.&lt;br/&gt;
+ IMO, I don&apos;t think anyone has written Filters (other than maybe Clint himself) so no one will be effected by the lack of a smooth transition.&lt;/p&gt;</comment>
                            <comment id="12591399" author="clint.morgan" created="Tue, 22 Apr 2008 18:41:56 +0000"  >&lt;p&gt;Yes, I see the reasoning for the API policy, etc. &lt;/p&gt;

&lt;p&gt;Please reread my previous comment. &lt;/p&gt;

&lt;p&gt;From a practical point of view, I don&apos;t understand how you plan to add new methods to an interface and still think that a users RowFilter&apos;s implementation would work. Adding new methods to the interface, will cause a compile failure regardless of deprecated tags. (Unless we can provide default implementations (eg that delegate to old methods) in an abstract class. But there is no such Abstract class).&lt;/p&gt;

&lt;p&gt;What am I missing?&lt;/p&gt;
</comment>
                            <comment id="12591410" author="jimk" created="Tue, 22 Apr 2008 19:06:23 +0000"  >&lt;p&gt;I follow Stack&apos;s reasoning on this so we can do the patch as-is.&lt;/p&gt;</comment>
                            <comment id="12591414" author="jimk" created="Tue, 22 Apr 2008 19:16:41 +0000"  >&lt;p&gt;-1 on patch because test cases under src/test/org/apache/hadoop/hbase/mapred no longer compile&lt;/p&gt;</comment>
                            <comment id="12591439" author="clint.morgan" created="Tue, 22 Apr 2008 20:43:22 +0000"  >&lt;p&gt;patch for the tests&lt;/p&gt;</comment>
                            <comment id="12591497" author="jimk" created="Wed, 23 Apr 2008 01:01:36 +0000"  >&lt;p&gt;I just committed this. Thanks Clint!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12380722" name="hbase-584-tests.patch" size="11878" author="clint.morgan" created="Tue, 22 Apr 2008 20:43:22 +0000"/>
                            <attachment id="12380437" name="hbase-584.patch" size="16910" author="clint.morgan" created="Thu, 17 Apr 2008 20:15:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 16 Apr 2008 17:38:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31771</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 35 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h87b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98591</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>