<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:33:40 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6085/HBASE-6085.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6085] SaslServer intermittently ignoring SaslClient&apos;s requests</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6085</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;I often hit this problem where the client request is just ignored* by the server.&lt;br/&gt;
The logs at the server doesn&apos;t reflect anything about the client, and then it does process the request in the next trial.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12557121">HBASE-6085</key>
            <summary>SaslServer intermittently ignoring SaslClient&apos;s requests</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="7">Later</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="v.himanshu">Himanshu Vashishtha</reporter>
                        <labels>
                    </labels>
                <created>Thu, 24 May 2012 02:50:39 +0000</created>
                <updated>Thu, 31 May 2012 15:27:32 +0000</updated>
                            <resolved>Thu, 31 May 2012 15:27:32 +0000</resolved>
                                                                    <component>security</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13282145" author="v.himanshu" created="Thu, 24 May 2012 02:53:51 +0000"  >&lt;p&gt;In this context, I send a shell command to create a table. The master makes a SASL client and tries to connect to the region server, but it gets nothing from the region server for a minute. It then tries again and this time, request is successful.&lt;/p&gt;

&lt;p&gt;The relevant master server logs:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2012-05-23 19:41:38,894 DEBUG org.apache.hadoop.hbase.security.HBaseSaslRpcClient: Creating SASL GSSAPI client. Server&apos;s Kerberos principal name is hbase/c0319.hal.cloudera.com@CLOUDERA.COM
2012-05-23 19:41:38,896 DEBUG org.apache.hadoop.hbase.security.HBaseSaslRpcClient: Have sent token of size 540 from initSASLContext.
2012-05-23 19:41:41,266 DEBUG org.apache.zookeeper.ClientCnxn: Got ping response &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; sessionid: 0x1377a5de16b0015 after 0ms
2012-05-23 19:41:48,204 DEBUG org.apache.zookeeper.ClientCnxn: Got ping response &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; sessionid: 0x1377a5de16b0013 after 0ms
2012-05-23 19:41:49,870 DEBUG org.apache.zookeeper.ClientCnxn: Got ping response &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; sessionid: 0x1377a5de16b0028 after 0ms
2012-05-23 19:41:51,452 DEBUG org.apache.zookeeper.ClientCnxn: Got ping response &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; sessionid: 0x1377a5de16b0014 after 0ms
2012-05-23 19:41:54,599 DEBUG org.apache.zookeeper.ClientCnxn: Got ping response &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; sessionid: 0x1377a5de16b0015 after 0ms
2012-05-23 19:42:01,538 DEBUG org.apache.zookeeper.ClientCnxn: Got ping response &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; sessionid: 0x1377a5de16b0013 after 0ms
2012-05-23 19:42:03,204 DEBUG org.apache.zookeeper.ClientCnxn: Got ping response &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; sessionid: 0x1377a5de16b0028 after 0ms
2012-05-23 19:42:04,785 DEBUG org.apache.zookeeper.ClientCnxn: Got ping response &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; sessionid: 0x1377a5de16b0014 after 0ms
2012-05-23 19:42:07,932 DEBUG org.apache.zookeeper.ClientCnxn: Got ping response &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; sessionid: 0x1377a5de16b0015 after 0ms
2012-05-23 19:42:14,872 DEBUG org.apache.zookeeper.ClientCnxn: Got ping response &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; sessionid: 0x1377a5de16b0013 after 0ms
2012-05-23 19:42:16,538 DEBUG org.apache.zookeeper.ClientCnxn: Got ping response &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; sessionid: 0x1377a5de16b0028 after 0ms
2012-05-23 19:42:18,118 DEBUG org.apache.zookeeper.ClientCnxn: Got ping response &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; sessionid: 0x1377a5de16b0014 after 0ms
2012-05-23 19:42:21,265 DEBUG org.apache.zookeeper.ClientCnxn: Got ping response &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; sessionid: 0x1377a5de16b0015 after 0ms
2012-05-23 19:42:28,206 DEBUG org.apache.zookeeper.ClientCnxn: Got ping response &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; sessionid: 0x1377a5de16b0013 after 0ms
2012-05-23 19:42:29,873 DEBUG org.apache.zookeeper.ClientCnxn: Got ping response &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; sessionid: 0x1377a5de16b0028 after 0ms
2012-05-23 19:42:31,452 DEBUG org.apache.zookeeper.ClientCnxn: Got ping response &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; sessionid: 0x1377a5de16b0014 after 0ms
2012-05-23 19:42:34,598 DEBUG org.apache.zookeeper.ClientCnxn: Got ping response &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; sessionid: 0x1377a5de16b0015 after 0ms
2012-05-23 19:42:38,896 ERROR org.apache.hadoop.security.UserGroupInformation: PriviledgedActionException as:hbase/c0319.hal.cloudera.com@CLOUDERA.COM (auth:KERBEROS) cause:java.net.SocketTimeoutException: 60000 millis timeout &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; channel to be ready &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; read. ch : java.nio.channels.SocketChannel[connected local=/172.29.81.101:44593 remote=c0319.hal.cloudera.com/172.29.81.101:40020]
2012-05-23 19:42:40,543 DEBUG org.apache.hadoop.hbase.security.HBaseSaslRpcClient: Creating SASL GSSAPI client. Server&apos;s Kerberos principal name is hbase/c0319.hal.cloudera.com@CLOUDERA.COM
2012-05-23 19:42:40,546 DEBUG org.apache.hadoop.hbase.security.HBaseSaslRpcClient: Have sent token of size 540 from initSASLContext.
2012-05-23 19:42:40,549 DEBUG org.apache.hadoop.hbase.security.HBaseSaslRpcClient: Will read input token of size 98 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; processing by initSASLContext
2012-05-23 19:42:40,550 DEBUG org.apache.hadoop.hbase.security.HBaseSaslRpcClient: Will send token of size 0 from initSASLContext.
2012-05-23 19:42:40,550 DEBUG org.apache.hadoop.hbase.security.HBaseSaslRpcClient: Will read input token of size 53 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; processing by initSASLContext
2012-05-23 19:42:40,551 DEBUG org.apache.hadoop.hbase.security.HBaseSaslRpcClient: Will send token of size 53 from initSASLContext.
2012-05-23 19:42:40,551 DEBUG org.apache.hadoop.hbase.security.HBaseSaslRpcClient: SASL client context established. Negotiated QoP: auth
2012-05-23 19:42:40,593 DEBUG org.apache.hadoop.hbase.client.HTable$ClientScanner: Creating scanner over .META. starting at key &apos;m7,,&apos;
2012-05-23 19:42:40,593 DEBUG org.apache.hadoop.hbase.client.HTable$ClientScanner: Advancing internal scanner to startKey at &apos;m7,,&apos;
2012-05-23 19:42:40,596 DEBUG org.apache.zookeeper.ClientCnxn: Reading reply sessionid:0x1377a5de16b0013, packet:: clientPath:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; serverPath:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; finished:&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; header:: 1919,3  replyHeader:: 1919,2101,-101  request:: &apos;/hbase/table/m7,F  response::

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13286184" author="stack" created="Wed, 30 May 2012 23:19:23 +0000"  >&lt;p&gt;A note of Andrew&apos;s on this issue:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Anything of note appear in the server side logs at DEBUG level? Have
you tried duplicating &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; in an all-localhost configuration? If it is
possible to reproduce in an all-localhost configuration, or on a
cluster not otherwise occupied, then we can turn on additional
SASL/GSSAPI level debugging that may shed light but will be quite
verbose.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13286194" author="v.himanshu" created="Wed, 30 May 2012 23:40:44 +0000"  >&lt;p&gt;I was trying it on a single node. Client, zk, master and rs all on one node. &lt;br/&gt;
tcpdump also suggested that there was indeed no response from server for a minute in case request was not successful.&lt;/p&gt;

&lt;p&gt;Here are the tcpdump I find for a successful and failed &quot;list&quot; request from shell:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[himanshu@c0319 ~]$ grep 40869 masterTcp/successList2
07:02:22.751435 IP c0319.hal.cloudera.com.40869 &amp;gt;
c0319.hal.cloudera.com.40000: S 2797432318:2797432318(0) win 32792
&amp;lt;mss 16396,sackOK,timestamp 3153221090 0,nop,wscale 7&amp;gt;
07:02:22.751454 IP c0319.hal.cloudera.com.40000 &amp;gt;
c0319.hal.cloudera.com.40869: S 2802101336:2802101336(0) ack
2797432319 win 32768 &amp;lt;mss 16396,sackOK,timestamp 3153221090
3153221090,nop,wscale 7&amp;gt;
07:02:22.751465 IP c0319.hal.cloudera.com.40869 &amp;gt;
c0319.hal.cloudera.com.40000: . ack 1 win 257 &amp;lt;nop,nop,timestamp
3153221090 3153221090&amp;gt;
07:02:22.751656 IP c0319.hal.cloudera.com.40869 &amp;gt;
c0319.hal.cloudera.com.40000: P 1:7(6) ack 1 win 257
&amp;lt;nop,nop,timestamp 3153221091 3153221090&amp;gt;
07:02:22.751666 IP c0319.hal.cloudera.com.40000 &amp;gt;
c0319.hal.cloudera.com.40869: . ack 7 win 256 &amp;lt;nop,nop,timestamp
3153221091 3153221091&amp;gt;
07:02:22.754652 IP c0319.hal.cloudera.com.40869 &amp;gt;
c0319.hal.cloudera.com.40000: P 7:551(544) ack 1 win 257
&amp;lt;nop,nop,timestamp 3153221094 3153221091&amp;gt;
07:02:22.754663 IP c0319.hal.cloudera.com.40000 &amp;gt;
c0319.hal.cloudera.com.40869: . ack 551 win 265 &amp;lt;nop,nop,timestamp
3153221094 3153221094&amp;gt;
07:02:22.758010 IP c0319.hal.cloudera.com.40000 &amp;gt;
c0319.hal.cloudera.com.40869: P 1:111(110) ack 551 win 265
&amp;lt;nop,nop,timestamp 3153221097 3153221094&amp;gt;
07:02:22.758020 IP c0319.hal.cloudera.com.40869 &amp;gt;
c0319.hal.cloudera.com.40000: . ack 111 win 257 &amp;lt;nop,nop,timestamp
3153221097 3153221097&amp;gt;
07:02:22.758692 IP c0319.hal.cloudera.com.40869 &amp;gt;
c0319.hal.cloudera.com.40000: P 551:555(4) ack 111 win 257
&amp;lt;nop,nop,timestamp 3153221098 3153221097&amp;gt;
07:02:22.759194 IP c0319.hal.cloudera.com.40000 &amp;gt;
c0319.hal.cloudera.com.40869: P 111:176(65) ack 555 win 265
&amp;lt;nop,nop,timestamp 3153221098 3153221098&amp;gt;
07:02:22.760662 IP c0319.hal.cloudera.com.40869 &amp;gt;
c0319.hal.cloudera.com.40000: P 555:612(57) ack 176 win 257
&amp;lt;nop,nop,timestamp 3153221100 3153221098&amp;gt;
07:02:22.801021 IP c0319.hal.cloudera.com.40000 &amp;gt;
c0319.hal.cloudera.com.40869: . ack 612 win 265 &amp;lt;nop,nop,timestamp
3153221140 3153221100&amp;gt;
07:02:22.801035 IP c0319.hal.cloudera.com.40869 &amp;gt;
c0319.hal.cloudera.com.40000: P 612:753(141) ack 176 win 257
&amp;lt;nop,nop,timestamp 3153221140 3153221140&amp;gt;
07:02:22.801044 IP c0319.hal.cloudera.com.40000 &amp;gt;
c0319.hal.cloudera.com.40869: . ack 753 win 273 &amp;lt;nop,nop,timestamp
3153221140 3153221140&amp;gt;
07:02:22.907009 IP c0319.hal.cloudera.com.40000 &amp;gt;
c0319.hal.cloudera.com.40869: P 176:5537(5361) ack 753 win 273
&amp;lt;nop,nop,timestamp 3153221246 3153221140&amp;gt;
07:02:22.947065 IP c0319.hal.cloudera.com.40869 &amp;gt;
c0319.hal.cloudera.com.40000: . ack 5537 win 385 &amp;lt;nop,nop,timestamp
3153221286 3153221246&amp;gt;
[himanshu@c0319 ~]$
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Failed one:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[himanshu@c0319 ~]$
[himanshu@c0319 ~]$ cat masterTcp/failedListReq
06:43:14.225674 IP c0319.hal.cloudera.com.45551 &amp;gt;
c0319.hal.cloudera.com.40000: S 1589303657:1589303657(0) win 32792
&amp;lt;mss 16396,sackOK,timestamp 3152072554 0,nop,wscale 7&amp;gt;
06:43:14.225693 IP c0319.hal.cloudera.com.40000 &amp;gt;
c0319.hal.cloudera.com.45551: S 1589991199:1589991199(0) ack
1589303658 win 32768 &amp;lt;mss 16396,sackOK,timestamp 3152072554
3152072554,nop,wscale 7&amp;gt;
06:43:14.225705 IP c0319.hal.cloudera.com.45551 &amp;gt;
c0319.hal.cloudera.com.40000: . ack 1 win 257 &amp;lt;nop,nop,timestamp
3152072554 3152072554&amp;gt;
06:43:14.225951 IP c0319.hal.cloudera.com.45551 &amp;gt;
c0319.hal.cloudera.com.40000: P 1:7(6) ack 1 win 257
&amp;lt;nop,nop,timestamp 3152072555 3152072554&amp;gt;
06:43:14.225961 IP c0319.hal.cloudera.com.40000 &amp;gt;
c0319.hal.cloudera.com.45551: . ack 7 win 256 &amp;lt;nop,nop,timestamp
3152072555 3152072555&amp;gt;
06:43:14.229954 IP c0319.hal.cloudera.com.45551 &amp;gt;
c0319.hal.cloudera.com.40000: P 7:551(544) ack 1 win 257
&amp;lt;nop,nop,timestamp 3152072558 3152072555&amp;gt;
06:43:14.229968 IP c0319.hal.cloudera.com.40000 &amp;gt;
c0319.hal.cloudera.com.45551: . ack 551 win 265 &amp;lt;nop,nop,timestamp
3152072559 3152072558&amp;gt;
06:44:14.232171 IP c0319.hal.cloudera.com.45551 &amp;gt;
c0319.hal.cloudera.com.40000: F 551:551(0) ack 1 win 257
&amp;lt;nop,nop,timestamp 3152132561 3152072559&amp;gt;
06:44:14.272194 IP c0319.hal.cloudera.com.40000 &amp;gt;
c0319.hal.cloudera.com.45551: . ack 552 win 265 &amp;lt;nop,nop,timestamp
3152132601 3152132561&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Upgrading to hadoop 2.0 based cloudera version, i couldn&apos;t reproduce it, even after trying out 50+ times. Initially it was occurring at freq of about 1/10.&lt;/p&gt;</comment>
                            <comment id="13286477" author="apurtell" created="Thu, 31 May 2012 11:11:33 +0000"  >&lt;p&gt;I&apos;ve not been able to reproduce this, made 100s of secure shell connections via bash script with 0.94 and Hadoop 2.0.0-alpha. Suggest resolving issue as &apos;Later&apos;. It&apos;s not actionable but not invalid either. &lt;/p&gt;</comment>
                            <comment id="13286656" author="v.himanshu" created="Thu, 31 May 2012 15:27:32 +0000"  >&lt;p&gt;ok, as you say Andrew.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 30 May 2012 23:19:23 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245415</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 29 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i068dr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34289</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>