<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:31:52 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-12319/HBASE-12319.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-12319] Inconsistencies during region recovery due to close/open of a region during recovery</title>
                <link>https://issues.apache.org/jira/browse/HBASE-12319</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;In one of my test runs, I saw the following:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2014-10-14 13:45:30,782 DEBUG [StoreOpener-51af4bd23dc32a940ad2dd5435f00e1d-1] regionserver.HStore: loaded hdfs://hor9n01.gq1.ygridcore.net:8020/apps/hbase/data/data/default/IntegrationTestIngest/51af4bd23dc32a940ad2dd5435f00e1d/test_cf/d6df5cfe15ca41d68c619489fbde4d04, isReference=false, isBulkLoadResult=false, seqid=141197, majorCompaction=true
2014-10-14 13:45:30,788 DEBUG [RS_OPEN_REGION-hor9n01:60020-1] regionserver.HRegion: Found 3 recovered edits file(s) under hdfs://hor9n01.gq1.ygridcore.net:8020/apps/hbase/data/data/default/IntegrationTestIngest/51af4bd23dc32a940ad2dd5435f00e1d
.............
.............
2014-10-14 13:45:31,916 WARN  [RS_OPEN_REGION-hor9n01:60020-1] regionserver.HRegion: Null or non-existent edits file: hdfs://hor9n01.gq1.ygridcore.net:8020/apps/hbase/data/data/default/IntegrationTestIngest/51af4bd23dc32a940ad2dd5435f00e1d/recovered.edits/0000000000000198080
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The above logs is from a regionserver, say RS2. From the initial analysis it seemed like the master asked a certain regionserver to open the region (let&apos;s say RS1) and for some reason asked it to close soon after. The open was still proceeding on RS1 but the master reassigned the region to RS2. This also started the recovery but it ended up seeing an inconsistent view of the recovered-edits files (it reports missing files as per the logs above) since the first regionserver (RS1) deleted some files after it completed the recovery. When RS2 really opens the region, it might not see the recent data that was written by flushes on hor9n10 during the recovery process. Reads of that data would have inconsistencies.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12749712">HBASE-12319</key>
            <summary>Inconsistencies during region recovery due to close/open of a region during recovery</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jeffreyz">Jeffrey Zhong</assignee>
                                    <reporter username="devaraj">Devaraj Das</reporter>
                        <labels>
                    </labels>
                <created>Wed, 22 Oct 2014 07:21:34 +0000</created>
                <updated>Sat, 21 Feb 2015 23:44:54 +0000</updated>
                            <resolved>Wed, 12 Nov 2014 02:34:08 +0000</resolved>
                                    <version>0.98.7</version>
                    <version>0.99.1</version>
                                    <fixVersion>0.98.8</fixVersion>
                    <fixVersion>0.99.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                <comments>
                            <comment id="14181756" author="jeffreyz" created="Thu, 23 Oct 2014 18:47:40 +0000"  >&lt;p&gt;This issue is due to region opening is canceled while AM doesn&apos;t wait for the cancel completes and reassign the region immediately as shown in the following log lines. Therefore, the previous region open operation may overlap the new region assignment. This issue happen in 0.98 &amp;amp; branch-1. &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hbase-hbase-master-hor9n01.gq1.ygridcore.net.log:Caused by: org.apache.hadoop.hbase.ipc.RemoteWithExtrasException(org.apache.hadoop.hbase.NotServingRegionException): org.apache.hadoop.hbase.NotServingRegionException: The region 51af4bd23dc32a940ad2dd5435f00e1d was opening but not yet served. Opening is cancelled.
hbase-hbase-master-hor9n01.gq1.ygridcore.net.log:2014-10-14 13:45:30,564 INFO  [AM.-pool1-t8] master.RegionStates: Transitioned {51af4bd23dc32a940ad2dd5435f00e1d state=OPENING, ts=1413294330350, server=hor9n10.gq1.ygridcore.net,60020,1413293516978} to {51af4bd23dc32a940ad2dd5435f00e1d state=OFFLINE, ts=1413294330564, server=hor9n10.gq1.ygridcore.net,60020,1413293516978}
hbase-hbase-master-hor9n01.gq1.ygridcore.net.log:2014-10-14 13:45:30,566 DEBUG [AM.-pool1-t8] master.AssignmentManager: No previous transition plan found (or ignoring an existing plan) for IntegrationTestIngest,59999994,1413293958381.51af4bd23dc32a940ad2dd5435f00e1d.; generated random plan=hri=IntegrationTestIngest,59999994,1413293958381.51af4bd23dc32a940ad2dd5435f00e1d., src=, dest=hor9n01.gq1.ygridcore.net,60020,1413294323616; 4 (online=4, available=4) available servers, forceNewPlan=true
hbase-hbase-master-hor9n01.gq1.ygridcore.net.log:2014-10-14 13:45:30,566 DEBUG [AM.-pool1-t8] zookeeper.ZKAssign: master:60000-0x3490b3b07a1085e, quorum=hor9n08.gq1.ygridcore.net:2181,hor9n01.gq1.ygridcore.net:2181,hor9n10.gq1.ygridcore.net:2181, baseZNode=/hbase Creating (or updating) unassigned node 51af4bd23dc32a940ad2dd5435f00e1d with OFFLINE state
hbase-hbase-master-hor9n01.gq1.ygridcore.net.log:2014-10-14 13:45:30,589 INFO  [AM.-pool1-t8] master.AssignmentManager: Assigning IntegrationTestIngest,59999994,1413293958381.51af4bd23dc32a940ad2dd5435f00e1d. to hor9n01.gq1.ygridcore.net,60020,1413294323616
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14181773" author="jeffreyz" created="Thu, 23 Oct 2014 18:57:18 +0000"  >&lt;p&gt;This patch let AM wait for region open cancelled before re-assigning a region. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jxiang&quot; class=&quot;user-hover&quot; rel=&quot;jxiang&quot;&gt;Jimmy Xiang&lt;/a&gt; Could you please take a look? Thanks.&lt;/p&gt;</comment>
                            <comment id="14181901" author="jxiang" created="Thu, 23 Oct 2014 20:28:48 +0000"  >&lt;p&gt;+1. Looks good to me.&lt;/p&gt;</comment>
                            <comment id="14195742" author="jeffreyz" created="Tue, 4 Nov 2014 05:45:23 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jxiang&quot; class=&quot;user-hover&quot; rel=&quot;jxiang&quot;&gt;Jimmy Xiang&lt;/a&gt; for the review! I&apos;ve integrated the fix into 0.98 &amp;amp; branch-1. &lt;/p&gt;</comment>
                            <comment id="14195767" author="lhofhansl" created="Tue, 4 Nov 2014 06:21:38 +0000"  >&lt;p&gt;This does not happen in master branch?&lt;/p&gt;</comment>
                            <comment id="14195844" author="hudson" created="Tue, 4 Nov 2014 07:48:40 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98 #650 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/650/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/650/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12319&quot; title=&quot;Inconsistencies during region recovery due to close/open of a region during recovery&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12319&quot;&gt;&lt;del&gt;HBASE-12319&lt;/del&gt;&lt;/a&gt;: Inconsistencies during region recovery due to close/open of a region during recovery (jeffreyz: rev 3c08eb02136bf39343e6d8f0a8115bbe0f5b471b)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionServerNoMaster.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14195852" author="hudson" created="Tue, 4 Nov 2014 08:02:33 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.0 #416 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/416/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.0/416/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12319&quot; title=&quot;Inconsistencies during region recovery due to close/open of a region during recovery&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12319&quot;&gt;&lt;del&gt;HBASE-12319&lt;/del&gt;&lt;/a&gt;: Inconsistencies during region recovery due to close/open of a region during recovery (jeffreyz: rev c84b13514e22588282a32dde9fe477287806643b)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionServerNoMaster.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14195961" author="hudson" created="Tue, 4 Nov 2014 09:48:16 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98-on-Hadoop-1.1 #619 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/619/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/619/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12319&quot; title=&quot;Inconsistencies during region recovery due to close/open of a region during recovery&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12319&quot;&gt;&lt;del&gt;HBASE-12319&lt;/del&gt;&lt;/a&gt;: Inconsistencies during region recovery due to close/open of a region during recovery (jeffreyz: rev 3c08eb02136bf39343e6d8f0a8115bbe0f5b471b)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionServerNoMaster.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14196382" author="stack" created="Tue, 4 Nov 2014 17:21:03 +0000"  >&lt;p&gt;Backing this out for now.  Branch-1 has turned unstable and it looks related.&lt;/p&gt;</comment>
                            <comment id="14196388" author="jeffreyz" created="Tue, 4 Nov 2014 17:23:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=saint.ack%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;saint.ack@gmail.com&quot;&gt;Stack&lt;/a&gt; Yeah. I also noticed the issue. We can revert it for now on 0.98 &amp;amp; branch-1. Thanks.&lt;/p&gt;</comment>
                            <comment id="14196397" author="stack" created="Tue, 4 Nov 2014 17:27:31 +0000"  >&lt;p&gt;Reverted from 0.98 and from branch-1. Now am going to see if branch-1 goes stable again.  Will report back.&lt;/p&gt;</comment>
                            <comment id="14196402" author="stack" created="Tue, 4 Nov 2014 17:30:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jeffreyz&quot; class=&quot;user-hover&quot; rel=&quot;jeffreyz&quot;&gt;Jeffrey Zhong&lt;/a&gt; Thanks boss.  Let me see if build stabilizes again.  You have the logs from the failing tests?  You think related?&lt;/p&gt;</comment>
                            <comment id="14196409" author="jeffreyz" created="Tue, 4 Nov 2014 17:34:26 +0000"  >&lt;p&gt;The failure TestZKLessAMOnCluster.testOpenCloseRacing is related. I have the failing logs and I&apos;ll debug to see why it&apos;s failing with the patch. Thanks.&lt;/p&gt;</comment>
                            <comment id="14196574" author="hudson" created="Tue, 4 Nov 2014 18:43:03 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.0 #419 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/419/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.0/419/&lt;/a&gt;)&lt;br/&gt;
 &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12319&quot; title=&quot;Inconsistencies during region recovery due to close/open of a region during recovery&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12319&quot;&gt;&lt;del&gt;HBASE-12319&lt;/del&gt;&lt;/a&gt;: Inconsistencies during region recovery due to close/open of a region during recovery; REVERT &amp;#8211; UNSTABLE BUILD (stack: rev a347d32cc5ab1e41e4ce94d52e863b2706dd661e)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionServerNoMaster.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14196730" author="hudson" created="Tue, 4 Nov 2014 20:08:34 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98 #652 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/652/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/652/&lt;/a&gt;)&lt;br/&gt;
 &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12319&quot; title=&quot;Inconsistencies during region recovery due to close/open of a region during recovery&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12319&quot;&gt;&lt;del&gt;HBASE-12319&lt;/del&gt;&lt;/a&gt;: Inconsistencies during region recovery due to close/open of a region during recovery; REVERT &amp;#8211; UNSTABLE BUILD (stack: rev ad6652d87045eaa745bbb754922214f8233f347e)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionServerNoMaster.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14196763" author="hudson" created="Tue, 4 Nov 2014 20:33:04 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98-on-Hadoop-1.1 #621 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/621/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/621/&lt;/a&gt;)&lt;br/&gt;
 &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12319&quot; title=&quot;Inconsistencies during region recovery due to close/open of a region during recovery&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12319&quot;&gt;&lt;del&gt;HBASE-12319&lt;/del&gt;&lt;/a&gt;: Inconsistencies during region recovery due to close/open of a region during recovery; REVERT &amp;#8211; UNSTABLE BUILD (stack: rev ad6652d87045eaa745bbb754922214f8233f347e)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionServerNoMaster.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14197056" author="stack" created="Tue, 4 Nov 2014 23:01:09 +0000"  >&lt;p&gt;Its looking like this patch indeed made branch-1 unstable (branch-1 is back to blue again ... except for a hickup brought on by preemptive fail).&lt;/p&gt;</comment>
                            <comment id="14203690" author="jeffreyz" created="Sun, 9 Nov 2014 00:16:20 +0000"  >&lt;p&gt;Since this issue may cause data loss or inconsistent data read, I marked it as critical. The symptom of the issue is that a region open doesn&apos;t wait for the previous region close completes so the newly opened region may not open all stores files if the previous region close may flush more data to disk.&lt;/p&gt;

&lt;p&gt;The test testOpenCloseRacing failure after the fix is a test issue.  During the test, the region is opened twice therefore after the fix the region is opened in another RS while AM returns the first RS the region previously is assigned to. Before the fix, the test case doesn&apos;t wait for previous region open cancel complete, the test case can see the second region assignment immediately. If you put a sleep after the final assertion in the test case, you will see the meta location will be updated again by the previous canceled region opening. Below is the log after I put a 60-secs sleep after the final assert and you can see region ff976daf00708ecad200b113349fc4b4 in &quot;OPEN&quot; state and still got another &quot;OPENED&quot; which was from the previous assignment.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2014-11-08 12:48:32,238 DEBUG [FifoRpcScheduler.handler1-thread-2] master.AssignmentManager(4077): Got transition OPENED for {ff976daf00708ecad200b113349fc4b4 state=PENDING_OPEN, ts=1415479712217, server=10.10.8.224,55613,1415479709023} from 10.10.8.224,55613,1415479709023
&#8230;
2014-11-08 12:48:32,936 DEBUG [FifoRpcScheduler.handler1-thread-4] master.AssignmentManager(4077): Got transition OPENED for {ff976daf00708ecad200b113349fc4b4 state=OPEN, ts=1415479712238, server=10.10.8.224,55613,1415479709023} from 10.10.8.224,55609,1415479708922
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The v2 patch amend the test case and make sure that region opening cleanupFailedOpen wait for region close before returning NotServingRegionException. Thanks.&lt;/p&gt;</comment>
                            <comment id="14203694" author="hadoopqa" created="Sun, 9 Nov 2014 00:22:44 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12680438/HBASE-12319-v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12680438/HBASE-12319-v2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12680438&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11623//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11623//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14203696" author="jeffreyz" created="Sun, 9 Nov 2014 00:34:49 +0000"  >&lt;p&gt;The v2 patch passed all tests against 0.98 branch.&lt;/p&gt;</comment>
                            <comment id="14203708" author="apurtell" created="Sun, 9 Nov 2014 01:08:50 +0000"  >&lt;p&gt;If this was critical as you say and meant for 0.98 why did you wait until after the 0.98.8RC0 was cut before posting an update? The RC date was announced days in advance. I&apos;m not inclined to do it over except for a blocker so this may wait for the next release. &lt;/p&gt;</comment>
                            <comment id="14203722" author="jeffreyz" created="Sun, 9 Nov 2014 01:44:38 +0000"  >&lt;blockquote&gt;
&lt;p&gt;I&apos;m not inclined to do it over except for a blocker so this may wait for the next release.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;That&apos;s fine. This is an existing issue and there is no reason to hold off current release. It&apos;s also better to bake the fix for a little before releasing it. Once all good, I can hold to check the fix in once after 0.98.8 is out. Thanks.&lt;/p&gt;</comment>
                            <comment id="14205404" author="apurtell" created="Mon, 10 Nov 2014 22:04:26 +0000"  >&lt;p&gt;+1, let&apos;s commit this&lt;/p&gt;</comment>
                            <comment id="14205411" author="apurtell" created="Mon, 10 Nov 2014 22:07:00 +0000"  >&lt;p&gt;Will commit this shortly unless there is an objection&lt;/p&gt;</comment>
                            <comment id="14207387" author="apurtell" created="Wed, 12 Nov 2014 00:11:23 +0000"  >&lt;p&gt;The v2 patch doesn&apos;t apply to master or branch-1. This can&apos;t be an issue that only applies to branch 0.98. Cancelling patch&lt;/p&gt;</comment>
                            <comment id="14207395" author="jeffreyz" created="Wed, 12 Nov 2014 00:24:38 +0000"  >&lt;p&gt;The v2 patch attached is for 0.98 only. The issue is for branch-1 &amp;amp; 0.98 and let me try to commit it 0.98 &amp;amp; branch-1 if you don&apos;t mind.  &lt;/p&gt;</comment>
                            <comment id="14207422" author="apurtell" created="Wed, 12 Nov 2014 00:39:43 +0000"  >&lt;p&gt;Sure, please go ahead and commit this. I&apos;ll change the fix version back again &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14207574" author="jeffreyz" created="Wed, 12 Nov 2014 02:34:08 +0000"  >&lt;p&gt;I&apos;ve integrated the fix into 0.98 &amp;amp; branch-1. Thanks.&lt;/p&gt;</comment>
                            <comment id="14207641" author="hudson" created="Wed, 12 Nov 2014 03:54:22 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.0 #455 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/455/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.0/455/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12319&quot; title=&quot;Inconsistencies during region recovery due to close/open of a region during recovery&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12319&quot;&gt;&lt;del&gt;HBASE-12319&lt;/del&gt;&lt;/a&gt;: Inconsistencies during region recovery due to close/open of a region during recovery (jeffreyz: rev 86711846d38efa32515c1fcdba8c1eadce15e7b2)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestAssignmentManagerOnCluster.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionServerNoMaster.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/handler/OpenRegionHandler.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14207660" author="hudson" created="Wed, 12 Nov 2014 04:27:55 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.98 #669 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/669/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/669/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12319&quot; title=&quot;Inconsistencies during region recovery due to close/open of a region during recovery&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12319&quot;&gt;&lt;del&gt;HBASE-12319&lt;/del&gt;&lt;/a&gt;: Inconsistencies during region recovery due to close/open of a region during recovery (jeffreyz: rev 78c1a919c906649427defdcaa17d8ab73bbb9482)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestAssignmentManagerOnCluster.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionServerNoMaster.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/handler/OpenRegionHandler.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14207682" author="hudson" created="Wed, 12 Nov 2014 04:56:13 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98-on-Hadoop-1.1 #637 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/637/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/637/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12319&quot; title=&quot;Inconsistencies during region recovery due to close/open of a region during recovery&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12319&quot;&gt;&lt;del&gt;HBASE-12319&lt;/del&gt;&lt;/a&gt;: Inconsistencies during region recovery due to close/open of a region during recovery (jeffreyz: rev 78c1a919c906649427defdcaa17d8ab73bbb9482)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/handler/OpenRegionHandler.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestAssignmentManagerOnCluster.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionServerNoMaster.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14331560" author="enis" created="Sat, 21 Feb 2015 23:44:54 +0000"  >&lt;p&gt;Closing this issue after 0.99.2 release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12680438" name="HBASE-12319-v2.patch" size="4591" author="jeffreyz" created="Sun, 9 Nov 2014 00:17:12 +0000"/>
                            <attachment id="12676679" name="HBASE-12319.patch" size="1001" author="jeffreyz" created="Thu, 23 Oct 2014 18:57:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 23 Oct 2014 18:47:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i21frb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>