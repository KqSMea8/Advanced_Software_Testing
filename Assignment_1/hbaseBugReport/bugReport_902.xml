<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:48:36 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-902/HBASE-902.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-902] Add force compaction and force split operations to UI and Admin</title>
                <link>https://issues.apache.org/jira/browse/HBASE-902</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Would help debugging or at start of big upload or if we have a hot region we want to distribute over the cluster if we could just manually force the splitting of regions.&lt;/p&gt;

&lt;p&gt;I thought it would be just a little messing in jsp but its a bit more than that.&lt;/p&gt;

&lt;p&gt;Actual decision to split is made down in guts of the Store.  Won&apos;t split if any references still around and a file must be &amp;gt; maxsize.&lt;/p&gt;

&lt;p&gt;Chatting w/ Jon Gray, could set a flag on the region that we want to split.  Could do this from UI (Can get to HRegion instance from HRS instance in HRS jsp).  Stores have references to their hosting regions (I think).  When figuring if we&apos;re to split, check the force split flag up in the hosting region.&lt;/p&gt;

&lt;p&gt;To get the flag checked, safest way is to just force a flush (Otherwise, have to mess w/ locks in the compact/splitter thread).  Registering a flush request on a region is easy enough to do.  Its a public method on HRS (or HR).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12405199">HBASE-902</key>
            <summary>Add force compaction and force split operations to UI and Admin</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="apurtell">Andrew Purtell</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 Sep 2008 05:42:26 +0000</created>
                <updated>Sun, 13 Sep 2009 22:26:27 +0000</updated>
                            <resolved>Fri, 28 Nov 2008 10:16:05 +0000</resolved>
                                                    <fixVersion>0.19.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12635055" author="apurtell" created="Fri, 26 Sep 2008 22:56:12 +0000"  >&lt;p&gt;If this is going to happen, can we/I put in a client side method for forcing a split? An importer process can be smart about splitting a region whenever the row key distribution is good, and anyway pressing a button on the Master UI repeatedly seems a coarse way to do it (not that I&apos;m arguing against having such a button...)&lt;/p&gt;
</comment>
                            <comment id="12635058" author="stack" created="Fri, 26 Sep 2008 23:05:12 +0000"  >&lt;p&gt;Go for it.&lt;/p&gt;

&lt;p&gt;Its easy in UI since you have the HRS context just there.  Running split from client is a bit harder in that you have to add support for new admin message.  Rather than an a message per, should we just add support once for a Writable version of &lt;a href=&quot;http://java.sun.com/j2se/1.4.2/docs/api/java/util/EventObject.html?&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://java.sun.com/j2se/1.4.2/docs/api/java/util/EventObject.html?&lt;/a&gt;  Split would be the first message type.  Flush, Major Compact, Merge could be others.  UI and Client could send same eventing mechanism.&lt;/p&gt;</comment>
                            <comment id="12635065" author="apurtell" created="Fri, 26 Sep 2008 23:25:20 +0000"  >&lt;p&gt;modifyTableMeta was originally going to be a catch-all like this for meta ops &amp;#8211; of which HTD modification would be one &amp;#8211; but I scaled back because all I wanted to do at the time was modify HTD. So instead of modifyTableMeta() it would be like modifyTable(). Maybe that should get a fresh look? &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
admin.modifyTable(table, SET_META, htd)
admin.modifyTable(table, FLUSH)
admin.modifyTable(table, MERGE, ...)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12635068" author="stack" created="Fri, 26 Sep 2008 23:42:50 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12635073" author="streamy" created="Fri, 26 Sep 2008 23:56:45 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12635802" author="apurtell" created="Tue, 30 Sep 2008 18:20:21 +0000"  >&lt;p&gt;I&apos;ve got something preliminary mostly worked out.&lt;/p&gt;

&lt;p&gt;admin.modifyTable as described is ioctl-like (which I personally like, for this type of swiss army knife type interface) and so in the client API uses Java varargs and at the HRPC level uses Writable[] to box them up and ship them to the master.&lt;br/&gt;
For example:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// replace HTD
&lt;/span&gt;admin.modifyTable(tableName, SET_META, htd);

&lt;span class=&quot;code-comment&quot;&gt;// split all regions of the table
&lt;/span&gt;admin.modifyTable(tableName, SPLIT);

&lt;span class=&quot;code-comment&quot;&gt;// split one region of the table only, closest to the given key
&lt;/span&gt;admin.modifyTable(tableName, SPLIT, rowKey);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Objections?&lt;/p&gt;

&lt;p&gt;Also, in order to communicate administrative actions from master to regionservers, the master will keep a list of pending actions in RegionManager. I&apos;ll need to add new HMsg ops for forcing splits etc. that the master will send back to the appropriate region servers when they check in.&lt;/p&gt;</comment>
                            <comment id="12635882" author="stack" created="Tue, 30 Sep 2008 22:29:59 +0000"  >&lt;p&gt;Only objection I would have had was making varargs cross the RPC but you seem to have figured that so, go for it.&lt;/p&gt;

&lt;p&gt;Does the master have to tell the regionserver split?  Can the client go direct to the regionserver and tell it since normally regionservers initiate and orchestrate splits?  (There is probably a reason if I took a look at code).&lt;/p&gt;</comment>
                            <comment id="12635885" author="apurtell" created="Tue, 30 Sep 2008 22:43:09 +0000"  >&lt;p&gt;Edited my earlier comment to s/ServerManager/RegionManager/ for clarity. &lt;/p&gt;

&lt;p&gt;My take is that RegionManager in the master is already orchestrating assignment, and is a central place to e.g. determine if a requested split has already happened. &lt;/p&gt;

&lt;p&gt;Also it&apos;s clean and easy then to have a big &apos;Split&apos; button in the master UI this way. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;</comment>
                            <comment id="12636219" author="apurtell" created="Wed, 1 Oct 2008 22:36:19 +0000"  >&lt;p&gt;Patch attached that implements force split functions. Provided at this time for feedback on implementation choices (if any). No master UI tweaks yet. Passes all tests but util.TestMigrate. Working on a testcase now to confirm this works as expected and also a &quot;split&quot; button for the master UI. &lt;/p&gt;</comment>
                            <comment id="12636480" author="stack" created="Thu, 2 Oct 2008 21:49:32 +0000"  >&lt;p&gt;Its interesting how you carry then internal split message in HRI.  Thats fine I suppose least I cannot come up with anything more elegant (better to have HStore go to HRI than to its hosting HRegion.  There is a presumption that HRegion and HStore both share HRI instances.   Maybe add a comment to this effect on the HStore HRI data member?&lt;/p&gt;

&lt;p&gt;Perhaps name the HRI method &apos;split&apos; rather than shouldSplit?&lt;/p&gt;

&lt;p&gt;Should RegionManager.startSplit and endSplit instead be scheduleSplit and removeSplit or some such?  start and end don&apos;t seem to describe whats going on here.&lt;/p&gt;

&lt;p&gt;Does getMetaRegionForTableClosest belong in metautils? It looks generally useful?&lt;/p&gt;

&lt;p&gt;If an HStore still holds references, will we split (We shouldn&apos;t &amp;#8211; or rather, we can&apos;t).&lt;/p&gt;

&lt;p&gt;This is really great functionality.  I like the way you&apos;ve made it easily extensible too.&lt;/p&gt;</comment>
                            <comment id="12636481" author="stack" created="Thu, 2 Oct 2008 21:50:33 +0000"  >&lt;p&gt;Oh, if regionserver is already part ways into a split, what happens?  Is request to split ignored and dropped?&lt;/p&gt;</comment>
                            <comment id="12636482" author="apurtell" created="Thu, 2 Oct 2008 22:02:32 +0000"  >&lt;p&gt;HStore has a reference to its HRI but not to the HRegion. Instead of using HRI I could just convert the reference that HStore has to the region to HRegion and fix up the affected code. &lt;/p&gt;

&lt;p&gt;Don&apos;t know about metautils. &lt;/p&gt;

&lt;p&gt;If a HStore still holds references, the split request will be ignored. The only thing the &quot;force split&apos; request does differently is ask that the HStore max file size be effectively considered to be 1. &lt;/p&gt;

&lt;p&gt;If the regionserver is already part way into the split, it should be ignored also but I&apos;ll double check this. compactSplitThread and children should handle the case already. If not they should. &lt;/p&gt;</comment>
                            <comment id="12636488" author="stack" created="Thu, 2 Oct 2008 22:19:49 +0000"  >&lt;p&gt;I&apos;d say go with what you have for now.  I was going to suggest that we pass to HStore its hosting HRegion but our general impetus should be going the opposite direction making it so HStore doesn&apos;t even take an HRI so can be standalone (Things are a little perverse at the moment; HRI is needed supporting binary keys until we redo HSK).&lt;/p&gt;

&lt;p&gt;Don&apos;t worry about metautils either.&lt;/p&gt;

&lt;p&gt;OK on rest of your comment.&lt;/p&gt;</comment>
                            <comment id="12638703" author="apurtell" created="Sat, 11 Oct 2008 02:15:20 +0000"  >&lt;p&gt;Please let me know if the proposed UI change (attached as split.png) is not acceptable in some way.&lt;/p&gt;</comment>
                            <comment id="12638705" author="jdcryans" created="Sat, 11 Oct 2008 02:21:08 +0000"  >&lt;p&gt;Big button is nice! I would add a bit of doc (maybe to the right in italic) to briefly explain what it does.&lt;/p&gt;</comment>
                            <comment id="12638709" author="stack" created="Sat, 11 Oct 2008 03:51:50 +0000"  >&lt;p&gt;Yeah on the bit of doc.&lt;/p&gt;

&lt;p&gt;What if table has many regions?  Where does the button go then?   Does the midkey determine which region to squash?  Maybe squash the optional midkey and let the system figure it out?&lt;/p&gt;

&lt;p&gt;On major compactions, lads here were asking if it&apos;d be possible to run a major compaction on a table, not just a region?&lt;/p&gt;

&lt;p&gt;Good stuff Andrew.&lt;/p&gt;</comment>
                            <comment id="12638783" author="apurtell" created="Sat, 11 Oct 2008 18:54:50 +0000"  >&lt;p&gt;The idea is to have a menu of table actions at the bottom of table.jsp output, separated by a horizontal rule from the region listing. The forms post back via GET to table.jsp which performs the appropriate action as indicated by query parameters. This also allows table actions to be easily automated.  &lt;/p&gt;

&lt;p&gt;See attached &apos;ui.1.png&apos; which incorporates suggestions by jdcryans and stack. &lt;/p&gt;

&lt;p&gt;If a key is not given that locates a specific region, all regions are split or compacted or whatever action is under consideration. The key does not need to be a midkey, only &amp;gt;= the start key for the particular region. (This is why getMetaRegionForKeyClosest().)  &lt;/p&gt;</comment>
                            <comment id="12638789" author="jdcryans" created="Sat, 11 Oct 2008 19:16:45 +0000"  >&lt;p&gt;I like what I see. A bit of nitpicking tho would be that you refer to region &quot;keys&quot; yet the table lists &quot;names&quot;. One or the other.&lt;/p&gt;

&lt;p&gt;Would it be easy to have the same functionalities in the shell? &lt;/p&gt;</comment>
                            <comment id="12638790" author="apurtell" created="Sat, 11 Oct 2008 19:25:54 +0000"  >&lt;p&gt;Hmm... Well at the interface/HRPC level the split and compact requests use a key to locate a specific region, not a region name or encoded name, so I think key is appropriate. Using keys allows a client to split regions considering the distribution of the keys if it knows anything about that, which I assume it will hence the desire to control splitting. We can keep it this way or move to using region names instead of a key contained within to target specific regions. Either way works for me, but the latter means more work for the client for what I believe would be a common use case. &lt;/p&gt;

&lt;p&gt;As for putting this functionality in the shell, indeed I intend to add it. The shell can use the client side HBaseAdmin.modifyTable interface. See earlier comments on this. &lt;/p&gt;</comment>
                            <comment id="12638792" author="jdcryans" created="Sat, 11 Oct 2008 19:33:08 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Hmm... Well at the interface/HRPC level the split and compact requests use a key to locate a specific region, not a region name or encoded name, so I think key is appropriate. Using keys allows a client to split regions considering the distribution of the keys if it knows anything about that, which I assume it will hence the desire to control splitting. We can keep it this way or move to using region names instead of a key contained within to target specific regions. Either way works for me, but the latter means more work for the client for what I believe would be a common use case.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Oh yeah I see. You should keep it that way.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;As for putting this functionality in the shell, indeed I intend to add it. The shell can use the client side HBaseAdmin.modifyTable interface. See earlier comments on this.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Ok great.&lt;/p&gt;</comment>
                            <comment id="12639178" author="stack" created="Mon, 13 Oct 2008 19:34:42 +0000"  >&lt;p&gt;Andrew: I&apos;m down w/ your explaination of explicit row rather than explicit region and +1 on your last png.&lt;/p&gt;</comment>
                            <comment id="12639272" author="apurtell" created="Tue, 14 Oct 2008 01:34:14 +0000"  >&lt;p&gt;New patch with UI bits included. Compaction requests work ok. Split requests break META. Debugging that now. &lt;/p&gt;</comment>
                            <comment id="12639291" author="stack" created="Tue, 14 Oct 2008 04:08:58 +0000"  >&lt;p&gt;Patch looks good to me Andrew.&lt;/p&gt;

&lt;p&gt;Below doesn&apos;t need to be in an else:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
+      &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; (onlineMetaRegions) {
+        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; onlineMetaRegions.get(
+          onlineMetaRegions.tailMap(key).firstKey());
+      }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;...given as the clause above it ends in a return.&lt;/p&gt;

&lt;p&gt;Only concern is what if a split is ongoing or if master gets a SPLIT message when it has one pending?&lt;/p&gt;

&lt;p&gt;Run &apos;ant javadoc&apos;.  I think you should see warnings going by what you&apos;ve added.   See if you can clean them up.&lt;/p&gt;

&lt;p&gt;Is this intended:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-        writeClassCode(out, c);
+        out.writeByte(code);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Should these be enums?  No biggie, just a suggestion:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  /** modifyTable op &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; replacing the table descriptor */
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; SET_HTD = 1;
+  /** modifyTable op &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; forcing a split */
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; SPLIT = 2;
+  /** modifyTable op &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; forcing a compaction */
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; COMPACT = 3;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Otherwise, looks great.&lt;/p&gt;</comment>
                            <comment id="12639296" author="apurtell" created="Tue, 14 Oct 2008 04:22:25 +0000"  >&lt;p&gt;Thanks for the review Stack. I&apos;ll hit all of your points in the next rev. &lt;/p&gt;

&lt;p&gt;About the SET_HTD, SPLIT, and COMPACT constants, are Java enums an issue for HRPC? The thought occurred to me so I just punted and used ints.  &lt;/p&gt;</comment>
                            <comment id="12639307" author="stack" created="Tue, 14 Oct 2008 05:11:39 +0000"  >&lt;p&gt;Looking at HbaseObjectWritable, looks like they should make it across the great RPC divide.  Not the end of the world if you don&apos;t convert them A.  Worry about your meta issue (smile).&lt;/p&gt;</comment>
                            <comment id="12639630" author="apurtell" created="Tue, 14 Oct 2008 22:35:35 +0000"  >&lt;p&gt;Patch 902-3 is much better. It does everything it is supposed to. This time around I had substantially more clue. &lt;/p&gt;

&lt;p&gt;Passes all tests but TestMigrate, a FileSystemVersionException from FSUtils.checkVersion. I didn&apos;t change the file system version so I don&apos;t know what&apos;s going on with that. &lt;/p&gt;</comment>
                            <comment id="12640734" author="apurtell" created="Sat, 18 Oct 2008 01:57:03 +0000"  >&lt;p&gt;I would like to commit this but do not want to commit something (of mine) without review by another pair of eyes. Will wait. &lt;/p&gt;</comment>
                            <comment id="12640753" author="stack" created="Sat, 18 Oct 2008 05:46:29 +0000"  >&lt;p&gt;Reviewed patch and did basic testing.  Looks great to me.  Go commit it.&lt;/p&gt;

&lt;p&gt;Be warned that the patch fails going into HRegionServer, IIRC, because HRS has changed since this patch.  Fix is easy though.  Also, in your webapp changes, no such thing as isEmpty in String.  Change the !isEmpty to key != null &amp;amp;&amp;amp; key.length() &amp;gt; 0.&lt;/p&gt;

&lt;p&gt;Its excellent hitting the split key, waiting a while, and then seeing your regions doubled before your eyes.&lt;/p&gt;

&lt;p&gt;How do I get at this new facility from the shell?  Its ok if I have to write a bit of code to do it.  We just need to document it in FAQ or some place.&lt;/p&gt;

&lt;p&gt;Good stuff Andrew.&lt;/p&gt;</comment>
                            <comment id="12640754" author="stack" created="Sat, 18 Oct 2008 05:53:07 +0000"  >&lt;p&gt;One other thing: TRUNK unit tests are broke at the moment so don&apos;t be surprised when hudson complains after commit.&lt;/p&gt;</comment>
                            <comment id="12640879" author="apurtell" created="Sun, 19 Oct 2008 21:21:52 +0000"  >&lt;p&gt;Thanks Stack for the review. I&apos;ll make the necessary fixups and commit assuming all tests succeed (except for TestMigrate).&lt;/p&gt;

&lt;p&gt;Thanks for reminding me about the shell access to the split facility. Really that should be part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-800&quot; title=&quot;support HTD and HCD get/set attribute in shell, Thrift, and REST interfaces&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-800&quot;&gt;&lt;del&gt;HBASE-800&lt;/del&gt;&lt;/a&gt; I think. Meantime the modifyTableMeta (now modifyTable after this patch is committed) workaround will let you split a table from the shell:&lt;/p&gt;

&lt;p&gt;To replace HTD, for example:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
table = HTable.&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;(@configuration, &apos;test&apos;)
htd = table.getTableDescriptor()
# need a read-write descriptor
htd = HTableDescriptor.&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;(htd)
htd.setMaxFileSize(67108864)
admin = HBaseAdmin.&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;(@configuration)
admin.modifyTable(Bytes.toBytes(&apos;test&apos;), HConstants.MODIFY_TABLE_SET_HTD, htd)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To split all regions of a table:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
admin = HBaseAdmin.&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;(@configuration)
admin.modifyTable(Bytes.toBytes(&apos;test&apos;), HConstants.MODIFY_TABLE_SPLIT)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To split one region of a table:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
admin = HBaseAdmin.&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;(@configuration)
admin.modifyTable(Bytes.toBytes(&apos;test&apos;), HConstants.MODIFY_TABLE_SPLIT, Bytes.toBytes(&apos;keyInRegion&apos;))
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To force a compaction of all regions of a table:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
admin = HBaseAdmin.&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;(@configuration)
admin.modifyTable(Bytes.toBytes(&apos;test&apos;), HConstants.MODIFY_TABLE_COMPACT)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To force a compaction of one region of a table:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
admin = HBaseAdmin.&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;(@configuration)
admin.modifyTable(Bytes.toBytes(&apos;test&apos;), HConstants.MODIFY_TABLE_COMPACT, Bytes.toBytes(&apos;keyInRegion&apos;))
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12641571" author="jdcryans" created="Tue, 21 Oct 2008 20:22:14 +0000"  >&lt;p&gt;All tests in trunk should be passing now.&lt;/p&gt;</comment>
                            <comment id="12641572" author="apurtell" created="Tue, 21 Oct 2008 20:23:45 +0000"  >&lt;p&gt;Committed.  Passed all tests in trunk.&lt;/p&gt;</comment>
                            <comment id="12644553" author="apurtell" created="Sun, 2 Nov 2008 02:23:07 +0000"  >&lt;p&gt;Forced splits do not seem to work any more on trunk. Find out why.&lt;/p&gt;</comment>
                            <comment id="12648200" author="stack" created="Mon, 17 Nov 2008 17:41:32 +0000"  >&lt;p&gt;Moving out of 0.19 (unless Clint shows up soon with new patch addressing Andrew&apos;s commentary).&lt;/p&gt;</comment>
                            <comment id="12648201" author="stack" created="Mon, 17 Nov 2008 17:43:18 +0000"  >&lt;p&gt;Moved wrong issue.&lt;/p&gt;</comment>
                            <comment id="12650696" author="apurtell" created="Tue, 25 Nov 2008 19:29:36 +0000"  >&lt;p&gt;In private communication Krzysztof Szlapinski asks for the ability to split empty regions. Will look into this also.&lt;/p&gt;</comment>
                            <comment id="12651280" author="apurtell" created="Thu, 27 Nov 2008 08:30:51 +0000"  >&lt;p&gt;Was having problems with splitting due to not flushing memcache first. Patch &quot;902.fix.patch&quot; also adds a test case for force splitting.&lt;/p&gt;</comment>
                            <comment id="12651476" author="stack" created="Fri, 28 Nov 2008 07:11:57 +0000"  >&lt;p&gt;+1 on patch.  FYI Andrew for next time, the general hadoop style adds &apos;{&apos; parenthesis even if only one line inside the curly-braces.  Good stuff.&lt;/p&gt;</comment>
                            <comment id="12651512" author="apurtell" created="Fri, 28 Nov 2008 10:16:05 +0000"  >&lt;p&gt;Committed. Added braces as suggested. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12405200">HBASE-903</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12391326" name="902-1.patch" size="15401" author="apurtell" created="Wed, 1 Oct 2008 22:36:19 +0000"/>
                            <attachment id="12392053" name="902-2.patch" size="25374" author="apurtell" created="Tue, 14 Oct 2008 01:34:14 +0000"/>
                            <attachment id="12392144" name="902-3.patch" size="30706" author="apurtell" created="Tue, 14 Oct 2008 22:35:35 +0000"/>
                            <attachment id="12394819" name="902.fix.patch" size="10801" author="apurtell" created="Thu, 27 Nov 2008 08:30:51 +0000"/>
                            <attachment id="12391925" name="split.png" size="60069" author="apurtell" created="Sat, 11 Oct 2008 02:15:20 +0000"/>
                            <attachment id="12391943" name="ui.1.png" size="71924" author="apurtell" created="Sat, 11 Oct 2008 18:54:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 26 Sep 2008 22:56:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31896</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ha5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98906</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>