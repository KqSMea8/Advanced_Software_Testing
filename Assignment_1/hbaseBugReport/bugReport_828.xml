<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:47:53 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-828/HBASE-828.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-828] HBaseAdmin.tableExists(new Text(&quot;TestTable5&quot;)) returns false when table actually exists.</title>
                <link>https://issues.apache.org/jira/browse/HBASE-828</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Process:&lt;/p&gt;

&lt;p&gt;One the 1st run of the application, i use tableExists( new Text(&quot;TestTable5&quot;)) &amp;amp; tableCreate to create the table.&lt;/p&gt;

&lt;p&gt;On the 2nd run, I call tableExists(new Text(&quot;TestTable5&quot;)), which returns false, then i call disableTable, deleteTable, and finally createTable.&lt;/p&gt;


&lt;p&gt;Workaround for now is to avoid using Text.   tableExists(byte[]) works when i tested it.&lt;/p&gt;

&lt;p&gt;To test this, you have to run the program 2 times.  Once to create the table that doesnt exist, then the 2nd time to see the error.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12402328">HBASE-828</key>
            <summary>HBaseAdmin.tableExists(new Text(&quot;TestTable5&quot;)) returns false when table actually exists.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="osm">Ryan Smith</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Aug 2008 17:22:21 +0000</created>
                <updated>Wed, 20 May 2009 18:22:56 +0000</updated>
                            <resolved>Wed, 20 May 2009 18:22:56 +0000</resolved>
                                    <version>0.2.0</version>
                                                    <component>util</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12623432" author="irubin" created="Mon, 18 Aug 2008 18:51:45 +0000"  >&lt;p&gt;I&apos;m trying to get a better understanding of this problem. Are you using tableExists() and createTable() before or during the first MR job? It doesn&apos;t make sense to make these calls during a MR job, since a MR job has to run on an existing table. And if these calls are being made before the first MR job, what is the MR job doing? The same questions apply for the second MR job.&lt;/p&gt;

&lt;p&gt;Let me know a little more detail about what&apos;s going on, and I&apos;ll try to replicate the problem and come up with a fix.&lt;/p&gt;

&lt;p&gt;I tried doing a real simple test, creating a table and testing its existence with tableExists(Text), as follows:&lt;/p&gt;

&lt;p&gt;&amp;lt;code&amp;gt;&lt;br/&gt;
HBaseAdmin admin = new HBaseAdmin(conf);&lt;br/&gt;
admin.createTable(Bytes.toBytes(&quot;tableA&quot;));&lt;br/&gt;
assertTrue(admin.tableExists(new Text(&quot;tableA&quot;)));&lt;br/&gt;
&amp;lt;code&amp;gt;&lt;/p&gt;

&lt;p&gt;This worked fine, but I don&apos;t think this is what you&apos;re describing. Let me know.&lt;/p&gt;</comment>
                            <comment id="12623435" author="osm" created="Mon, 18 Aug 2008 19:00:43 +0000"  >&lt;p&gt;Hi Izaak,&lt;/p&gt;

&lt;p&gt;Thanks for responding.  then the trouble could be in the way im making the table.&lt;br/&gt;
If you could, please test creating the table using HTableDescriptor.&lt;/p&gt;

&lt;p&gt;		log.info(&quot;creating table in HBase: tableA&quot;);&lt;br/&gt;
		HTableDescriptor desc = new HTableDescriptor(&quot;tableA&quot;);&lt;/p&gt;

&lt;p&gt;		desc.addFamily(new HColumnDescriptor(&quot;label:&quot;));&lt;br/&gt;
		HBaseAdmin admin = new HBaseAdmin(hbaseConf);&lt;br/&gt;
		if (!admin.tableExists(new Text(&quot;tableA&quot;))) {&lt;br/&gt;
			try &lt;/p&gt;
{
				admin.disableTable(desc.getName());
				admin.deleteTable(desc.getName());
			}
&lt;p&gt; catch (TableNotFoundException te) &lt;/p&gt;
{
				log.info(&quot;no existing table was found to delete.&quot;);
			}
&lt;p&gt;			admin.createTable(desc);&lt;br/&gt;
			for (HTableDescriptor table : admin.listTables()) &lt;/p&gt;
{
				log.info(&quot;found table: &quot; + table.getName());
			}
&lt;p&gt;		}&lt;/p&gt;</comment>
                            <comment id="12623445" author="irubin" created="Mon, 18 Aug 2008 19:41:47 +0000"  >&lt;p&gt;Hi Ryan,&lt;/p&gt;

&lt;p&gt;Actually the code snippet I put in my first comment was wrong, in testing I had passed an HTableDescriptor to createTable(), not a byte[] (bad type-o on my part).  I did try running the code from your most recent comment, and that worked fine.  Was that the code you were having trouble with?  Maybe try it out again on your machine and see if it&apos;s still a problem.  Let me know if there&apos;s anything else I should try.&lt;/p&gt;</comment>
                            <comment id="12623446" author="osm" created="Mon, 18 Aug 2008 19:44:29 +0000"  >&lt;p&gt;Izzak,&lt;br/&gt;
Possibly try creating the table on one run, then check for the table on a seperate run?&lt;/p&gt;

&lt;p&gt;Thats the only other thing i can think of.  Ill test it out here again, I am testing on branch-2.0/ latest&lt;br/&gt;
Thanks again,&lt;br/&gt;
-Ryan&lt;/p&gt;</comment>
                            <comment id="12623487" author="irubin" created="Mon, 18 Aug 2008 23:18:28 +0000"  >&lt;p&gt;I&apos;ll try to do that, maybe I&apos;ll experiment with flushing the data to disk between calls to tableExists().  Another thing I realized is that I&apos;d been doing my tests for this on trunk, but I then downloaded and tested on branch 0.2 and it still worked.&lt;/p&gt;</comment>
                            <comment id="12623722" author="irubin" created="Tue, 19 Aug 2008 16:54:31 +0000"  >&lt;p&gt;I don&apos;t think there&apos;s much more testing I can do on this, based on some advice I got from Jim Kellerman on the issue:&lt;/p&gt;

&lt;p&gt;&quot;you have no control on flushing stuff to disk other than shutting down HBase and restarting it. There should be no need as the caches should do the right thing. If they don&apos;t, I need to see an example.&quot;&lt;/p&gt;

&lt;p&gt;I had a thought about your use of Text.  The internal bytes of a Text pad on a few extra &apos;\0&apos; characters.  So, it&apos;s important to note that the bytes returned from &lt;/p&gt;
{new Text(&quot;TestTable5&quot;).getBytes();} are not the same as those returned from {&quot;TestTable5&quot;.getBytes();}.  HBase doesn&apos;t do anything fancy to make these two equivalent.  So, if you pass in {new Text(&quot;TestTable5&quot;).getBytes();}
&lt;p&gt; to the constructor of your HTableDescriptor, using &lt;/p&gt;
{tableExists(new Text(&quot;TestTable5&quot;));}
&lt;p&gt; should work fine, but if you use Strings you&apos;ll run into problems.&lt;/p&gt;

&lt;p&gt;Ah, and here&apos;s another thing I just discovered: the bytes for new Text(&quot;tableA&quot;) and &quot;tableA&quot; are the same.  So the amount of padding varies with the length of the String.  &lt;/p&gt;

&lt;p&gt;Look into this and let me know if there&apos;s still something weird happening.&lt;/p&gt;</comment>
                            <comment id="12643585" author="stack" created="Wed, 29 Oct 2008 18:30:41 +0000"  >&lt;p&gt;Moving out of 0.19.0.&lt;/p&gt;</comment>
                            <comment id="12711275" author="stack" created="Wed, 20 May 2009 18:22:56 +0000"  >&lt;p&gt;Marking invalid.  We&apos;ve moved on from 0.2.0 and Text.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 18 Aug 2008 18:51:45 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25422</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 31 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h9ov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98832</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>