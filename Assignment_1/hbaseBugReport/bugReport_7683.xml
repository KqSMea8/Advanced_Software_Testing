<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:48:06 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-7683/HBASE-7683.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-7683] TestMasterObserver fails occasionally</title>
                <link>https://issues.apache.org/jira/browse/HBASE-7683</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.hadoop.hbase.InvalidFamilyOperationException: Column family &apos;fam2&apos; does not exist  at 
org.apache.hadoop.hbase.master.handler.TableEventHandler.hasColumnFamily(TableEventHandler.java:182)  at
org.apache.hadoop.hbase.master.handler.TableDeleteFamilyHandler.&amp;lt;init&amp;gt;(TableDeleteFamilyHandler.java:43)  at 
org.apache.hadoop.hbase.master.HMaster.deleteColumn(HMaster.java:1303)  at 
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  at 
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)  at 
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)  at 
java.lang.reflect.Method.invoke(Method.java:597)  at 
org.apache.hadoop.hbase.ipc.SecureRpcEngine$Server.call(SecureRpcEngine.java:372)  at 
org.apache.hadoop.hbase.ipc.HBaseServer$Handler.run(HBaseServer.java:1426) 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12629421">HBASE-7683</key>
            <summary>TestMasterObserver fails occasionally</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="7">Later</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="lhofhansl">Lars Hofhansl</reporter>
                        <labels>
                    </labels>
                <created>Sun, 27 Jan 2013 07:16:12 +0000</created>
                <updated>Thu, 21 Feb 2013 07:21:37 +0000</updated>
                            <resolved>Thu, 21 Feb 2013 07:21:37 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13563744" author="lhofhansl" created="Sun, 27 Jan 2013 07:20:27 +0000"  >&lt;p&gt;I think this log snippet is interesting.&lt;/p&gt;

&lt;p&gt;The sequence is this:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;updating /observed_table/.tableinfo.0000000003&lt;/li&gt;
	&lt;li&gt;updating /observed_table/.tableinfo.0000000004&lt;/li&gt;
	&lt;li&gt;updating /observed_table/.tableinfo.0000000005&lt;/li&gt;
	&lt;li&gt;updating /observed_table/.tableinfo.0000000006&lt;/li&gt;
	&lt;li&gt;failed to delete /observed_table/.tableinfo.0000000006&lt;/li&gt;
	&lt;li&gt;updating /observed_table/.tableinfo.0000000002&lt;/li&gt;
	&lt;li&gt;cleaned up /observed_table/.tableinfo.0000000002&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;So it seems version 2 was somehow updated out of sync&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2013-01-27 05:22:57,737 DEBUG [IPC Server handler 1 on 41253] client.ClientScanner(185): Finished with scanning at {NAME =&amp;gt; &apos;.META.,,1&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENCODED =&amp;gt; 1028785192,}
2013-01-27 05:22:57,737 INFO  [IPC Server handler 1 on 41253] master.MasterFileSystem(541): AddColumn. Table = observed_table HCD = {NAME =&amp;gt; &apos;fam2&apos;, DATA_BLOCK_ENCODING =&amp;gt; &apos;NONE&apos;, BLOOMFILTER =&amp;gt; &apos;NONE&apos;, REPLICATION_SCOPE =&amp;gt; &apos;0&apos;, VERSIONS =&amp;gt; &apos;3&apos;, COMPRESSION =&amp;gt; &apos;NONE&apos;, MIN_VERSIONS =&amp;gt; &apos;0&apos;, TTL =&amp;gt; &apos;2147483647&apos;, KEEP_DELETED_CELLS =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&apos;, BLOCKSIZE =&amp;gt; &apos;65536&apos;, IN_MEMORY =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&apos;, ENCODE_ON_DISK =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&apos;, BLOCKCACHE =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&apos;}
2013-01-27 05:22:57,740 DEBUG [IPC Server handler 1 on 41253] util.FSTableDescriptors(501): hdfs:&lt;span class=&quot;code-comment&quot;&gt;//localhost:40948/user/jenkins/hbase/observed_table/.tmp/.tableinfo.0000000002 exists; retrying up to 10 times
&lt;/span&gt;2013-01-27 05:22:57,750 INFO  [IPC Server handler 1 on 41253] util.FSTableDescriptors(452): Updated tableinfo=hdfs:&lt;span class=&quot;code-comment&quot;&gt;//localhost:40948/user/jenkins/hbase/observed_table/.tableinfo.0000000003
&lt;/span&gt;2013-01-27 05:22:57,761 INFO  [IPC Server handler 1 on 41253] util.FSTableDescriptors(452): Updated tableinfo=hdfs:&lt;span class=&quot;code-comment&quot;&gt;//localhost:40948/user/jenkins/hbase/observed_table/.tableinfo.0000000004
&lt;/span&gt;2013-01-27 05:22:57,764 DEBUG [IPC Server handler 0 on 41253] client.ClientScanner(90): Creating scanner over .META. starting at key &apos;observed_table,,&apos;
2013-01-27 05:22:57,764 DEBUG [IPC Server handler 0 on 41253] client.ClientScanner(198): Advancing internal scanner to startKey at &apos;observed_table,,&apos;
2013-01-27 05:22:57,767 INFO  [IPC Server handler 0 on 41253] handler.TableEventHandler(91): Handling table operation C_M_MODIFY_FAMILY on table observed_table
2013-01-27 05:22:57,768 DEBUG [IPC Server handler 0 on 41253] client.ClientScanner(90): Creating scanner over .META. starting at key &apos;observed_table,,&apos;
2013-01-27 05:22:57,768 DEBUG [IPC Server handler 0 on 41253] client.ClientScanner(198): Advancing internal scanner to startKey at &apos;observed_table,,&apos;
2013-01-27 05:22:57,771 DEBUG [IPC Server handler 0 on 41253] client.ClientScanner(185): Finished with scanning at {NAME =&amp;gt; &apos;.META.,,1&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENCODED =&amp;gt; 1028785192,}
2013-01-27 05:22:57,771 INFO  [IPC Server handler 0 on 41253] master.MasterFileSystem(518): AddModifyColumn. Table = observed_table HCD = {NAME =&amp;gt; &apos;fam2&apos;, DATA_BLOCK_ENCODING =&amp;gt; &apos;NONE&apos;, BLOOMFILTER =&amp;gt; &apos;NONE&apos;, REPLICATION_SCOPE =&amp;gt; &apos;0&apos;, VERSIONS =&amp;gt; &apos;25&apos;, COMPRESSION =&amp;gt; &apos;NONE&apos;, MIN_VERSIONS =&amp;gt; &apos;0&apos;, TTL =&amp;gt; &apos;2147483647&apos;, KEEP_DELETED_CELLS =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&apos;, BLOCKSIZE =&amp;gt; &apos;65536&apos;, IN_MEMORY =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&apos;, ENCODE_ON_DISK =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&apos;, BLOCKCACHE =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&apos;}
2013-01-27 05:22:57,787 INFO  [IPC Server handler 0 on 41253] util.FSTableDescriptors(452): Updated tableinfo=hdfs:&lt;span class=&quot;code-comment&quot;&gt;//localhost:40948/user/jenkins/hbase/observed_table/.tableinfo.0000000005
&lt;/span&gt;2013-01-27 05:22:57,799 INFO  [IPC Server handler 0 on 41253] util.FSTableDescriptors(452): Updated tableinfo=hdfs:&lt;span class=&quot;code-comment&quot;&gt;//localhost:40948/user/jenkins/hbase/observed_table/.tableinfo.0000000006
&lt;/span&gt;2013-01-27 05:22:57,801 DEBUG [IPC Server handler 1 on 41253] client.ClientScanner(90): Creating scanner over .META. starting at key &apos;observed_table,,&apos;
2013-01-27 05:22:57,801 DEBUG [IPC Server handler 1 on 41253] client.ClientScanner(198): Advancing internal scanner to startKey at &apos;observed_table,,&apos;
2013-01-27 05:22:57,808 INFO  [pool-1-thread-1] client.HBaseAdmin(727): Started enable of observed_table
2013-01-27 05:22:57,809 DEBUG [pool-1-thread-1] zookeeper.ZKUtil(1571): hconnection-0x13c7a752b7c0006 Retrieved 8 &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;(s) of data from znode /hbase/table/observed_table; data=ENABLING
2013-01-27 05:22:57,809 DEBUG [pool-1-thread-1] client.HBaseAdmin(684): Sleeping= 1000ms, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; all regions to be enabled in observed_table
2013-01-27 05:22:58,136 WARN  [MASTER_TABLE_OPERATIONS-hemera.apache.org,41253,1359264165304-0] util.FSTableDescriptors(522): Failed delete of hdfs:&lt;span class=&quot;code-comment&quot;&gt;//localhost:40948/user/jenkins/hbase/observed_table/.tableinfo.0000000001; continuing
&lt;/span&gt;2013-01-27 05:22:58,136 INFO  [MASTER_TABLE_OPERATIONS-hemera.apache.org,41253,1359264165304-0] util.FSTableDescriptors(452): Updated tableinfo=hdfs:&lt;span class=&quot;code-comment&quot;&gt;//localhost:40948/user/jenkins/hbase/observed_table/.tableinfo.0000000002
&lt;/span&gt;2013-01-27 05:22:58,138 DEBUG [MASTER_TABLE_OPERATIONS-hemera.apache.org,41253,1359264165304-0] util.FSTableDescriptors(286): Cleaned up old tableinfo file hdfs:&lt;span class=&quot;code-comment&quot;&gt;//localhost:40948/user/jenkins/hbase/observed_table/.tableinfo.0000000002&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13563745" author="lhofhansl" created="Sun, 27 Jan 2013 07:21:21 +0000"  >&lt;p&gt;If someone feels like looking at this that would be greatly appreciated, as I have exhausted my goodwill time to work on tests for a bit.&lt;/p&gt;</comment>
                            <comment id="13563746" author="lhofhansl" created="Sun, 27 Jan 2013 07:24:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/767/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/767/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/99/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/99/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/97/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/97/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I have not seen this test failing in a long time.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt; While I do not see how it could be related, it did start after the commit of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7647&quot; title=&quot;0.94 hfiles v2.1 are not backwards compatible with HFilev2.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7647&quot;&gt;&lt;del&gt;HBASE-7647&lt;/del&gt;&lt;/a&gt;. (Has failed 3 times since, and never before - as far as I can from the test history)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>309917</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 46 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1hhi7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>310261</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>