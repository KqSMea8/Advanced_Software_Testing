<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:37:38 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-12909/HBASE-12909.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-12909] Junit listed at compile scope instead of test</title>
                <link>https://issues.apache.org/jira/browse/HBASE-12909</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Right now our top level pom lists junit as a dependency for every module in the compile scope, which makes it subject to our compatibility promises.&lt;/p&gt;

&lt;p&gt;It should instead be test scope.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12769477">HBASE-12909</key>
            <summary>Junit listed at compile scope instead of test</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="busbey">Sean Busbey</assignee>
                                    <reporter username="busbey">Sean Busbey</reporter>
                        <labels>
                    </labels>
                <created>Thu, 22 Jan 2015 23:31:17 +0000</created>
                <updated>Fri, 30 Sep 2016 18:19:10 +0000</updated>
                                            <version>1.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="14288485" author="busbey" created="Fri, 23 Jan 2015 00:06:39 +0000"  >&lt;p&gt;first pass. compilation works. running through test set now.&lt;/p&gt;

&lt;p&gt;Had to muck a bit to make hbase-testing-util show proper scope for the dependencies it pulls in.&lt;/p&gt;</comment>
                            <comment id="14288673" author="enis" created="Fri, 23 Jan 2015 03:16:24 +0000"  >&lt;p&gt;Makes sense. I remember vaguely that mvn transitive dependency resolution was broken for test scope. Maybe it was the reason in the first place. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt; maybe you know more context. &lt;/p&gt;</comment>
                            <comment id="14288798" author="hadoopqa" created="Fri, 23 Jan 2015 05:49:48 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12694042/HBASE-12909.1.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12694042/HBASE-12909.1.patch.txt&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 5fbf80ee5ecb288804d2d2d042199dcd834ae848.&lt;br/&gt;
  ATTACHMENT ID: 12694042&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 2 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 2 zombie test(s): 	at org.apache.hadoop.hbase.master.TestTableLockManager.testTableReadLock(TestTableLockManager.java:409)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12565//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12565//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12565//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12565//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12565//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12565//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12565//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12565//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12565//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12565//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12565//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12565//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12565//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12565//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12565//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12565//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12565//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12565//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12565//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12565//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12565//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12565//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12565//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12565//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12565//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12565//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Javadoc warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12565//artifact/patchprocess/patchJavadocWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12565//artifact/patchprocess/patchJavadocWarnings.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12565//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12565//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14289359" author="busbey" created="Fri, 23 Jan 2015 15:15:12 +0000"  >&lt;p&gt;I ran through -PrunAllTests and all tests pass. I had to rerun TestCacheOnWrite. I presume the failure on first run was a resource contention issue since this was on a VM that isn&apos;t very powerful.&lt;/p&gt;

&lt;p&gt;Test scoped dependencies won&apos;t show up as transitive dependencies when an artifact is listed as a dependency of another project, that&apos;s true. AFAICT, the only artifact we publish where we would want junit to show up is hbase-testing-util. the current patch properly changes the scope for that case.&lt;/p&gt;

&lt;p&gt;for the curious, the reason junit and mockito weren&apos;t showing up properly there is that the parent pom was setting the scope to test.  This is normally what we want, but that scope overrides the normal changing of test scope to compile scope when hbase-testing-util tries to add the test-jars for other components.&lt;/p&gt;</comment>
                            <comment id="14289505" author="stack" created="Fri, 23 Jan 2015 16:45:54 +0000"  >&lt;p&gt;Patch looks good. More finesse than what was there before. Want me to check with &lt;a href=&quot;https://github.com/saintstack/hbase-downstreamer?&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/saintstack/hbase-downstreamer?&lt;/a&gt; It was a means of faking a downstream app checking we pull in dependencies we need.&lt;/p&gt;</comment>
                            <comment id="14289506" author="busbey" created="Fri, 23 Jan 2015 16:49:08 +0000"  >&lt;p&gt;yes, please! I was trying to remember if we had anything I could use to test the changes for downstream.&lt;/p&gt;</comment>
                            <comment id="14291312" author="enis" created="Mon, 26 Jan 2015 00:04:57 +0000"  >&lt;p&gt;+1. I pushed 1.0.0-SNAPSHOT with this patch and tested with hbase-downstreamer. &lt;/p&gt;</comment>
                            <comment id="14291313" author="eclark" created="Mon, 26 Jan 2015 00:07:14 +0000"  >&lt;p&gt;If I remember correctly this was put into compile so that some IT tests could be run from the command line.&lt;/p&gt;</comment>
                            <comment id="14291315" author="enis" created="Mon, 26 Jan 2015 00:09:10 +0000"  >&lt;p&gt;Hmm, good point. Let me test it out. I&apos;ve already committed this to master, but I can back it out. &lt;/p&gt;</comment>
                            <comment id="14291318" author="enis" created="Mon, 26 Jan 2015 00:17:04 +0000"  >&lt;p&gt;I was able to run ITBLL, and ITTableSnapshotInputFormat from command line in a code check out after &lt;tt&gt;mvn clean install&lt;/tt&gt;. For tarball deployments or RPM, usually the test jars are also deployed, so it should not matter for ITs, right ? &lt;/p&gt;</comment>
                            <comment id="14291324" author="enis" created="Mon, 26 Jan 2015 00:40:31 +0000"  >&lt;p&gt;Found &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8421&quot; title=&quot;hbase-0.95.0 tgz does not include lib/junit*.jar&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8421&quot;&gt;&lt;del&gt;HBASE-8421&lt;/del&gt;&lt;/a&gt;.  &lt;/p&gt;</comment>
                            <comment id="14291333" author="enis" created="Mon, 26 Jan 2015 01:05:30 +0000"  >&lt;p&gt;Ok, I&apos;ve reverted the commit pushed to master. In &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8421&quot; title=&quot;hbase-0.95.0 tgz does not include lib/junit*.jar&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8421&quot;&gt;&lt;del&gt;HBASE-8421&lt;/del&gt;&lt;/a&gt; the reason for having junit dep in the main scope was to be able to run ITs from command line (ITDriver). I&apos;ve created a tarball with this patch, and it does not contain junit jar which is necessary. I thought previously that the tarball will be made from the test scope, but apparently it is not the case. &lt;/p&gt;

&lt;p&gt;What we should do with this? Close as won&apos;t fix? I am temporarily removing this from 1.0.0. &lt;/p&gt;</comment>
                            <comment id="14291338" author="busbey" created="Mon, 26 Jan 2015 01:14:18 +0000"  >&lt;p&gt;If we want to be able to run ITDriver from a deployed assembly, then I&apos;ll update the patch to add them into the assembly.&lt;/p&gt;

&lt;p&gt;I&apos;d really like to isolate the dependencies needed to run the ITDriver on a deployed cluster from the classes included in scope for client or server side extensions, so that they&apos;re not a part of our compat guarantees. If that doesn&apos;t make 1.0, it&apos;s not the end of the world.&lt;/p&gt;</comment>
                            <comment id="14291397" author="hudson" created="Mon, 26 Jan 2015 02:24:02 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #6054 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/6054/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/6054/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12909&quot; title=&quot;Junit listed at compile scope instead of test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12909&quot;&gt;HBASE-12909&lt;/a&gt; Junit listed at compile scope instead of test (Sean Busbey) (enis: rev c30865a71f54c6e5bf937fe7108d17ba1e173e90)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-testing-util/pom.xml&lt;/li&gt;
	&lt;li&gt;pom.xml&lt;br/&gt;
Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12909&quot; title=&quot;Junit listed at compile scope instead of test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12909&quot;&gt;HBASE-12909&lt;/a&gt; Junit listed at compile scope instead of test (Sean Busbey)&quot; (enis: rev 34da035c5d10ad48ab32b0d0a459cddacc27f697)&lt;/li&gt;
	&lt;li&gt;pom.xml&lt;/li&gt;
	&lt;li&gt;hbase-testing-util/pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14561113" author="busbey" created="Wed, 27 May 2015 15:06:55 +0000"  >&lt;p&gt;Bumping this again for 2.0. Do we have a place where we keep dependencies in the assembly that are needed for some tools we provide but distinctly not needed for normal client/server operations? (in this case ITDriver)&lt;/p&gt;</comment>
                            <comment id="15536628" author="busbey" created="Fri, 30 Sep 2016 18:19:10 +0000"  >&lt;p&gt;bump again. will start a dev@hbase thread next week-ish presuming no feedback here.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12644452">HBASE-8421</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12694042" name="HBASE-12909.1.patch.txt" size="2020" author="busbey" created="Fri, 23 Jan 2015 00:06:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 23 Jan 2015 03:16:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i24p3r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>