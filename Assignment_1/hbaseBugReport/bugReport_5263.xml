<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:26:13 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5263/HBASE-5263.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5263] Preserving cached data on compactions through cache-on-write</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5263</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;We are tackling &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3976&quot; title=&quot;Disable Block Cache On Compactions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3976&quot;&gt;&lt;del&gt;HBASE-3976&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5230&quot; title=&quot;Ensure compactions do not cache-on-write data blocks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5230&quot;&gt;&lt;del&gt;HBASE-5230&lt;/del&gt;&lt;/a&gt; to make sure we don&apos;t trash the block cache on compactions if cache-on-write is enabled. However, it would be ideal to reduce the effect compactions have on the cached data. For every block we are writing for a compacted file we can decide whether it needs to be cached based on whether the original blocks containing the same data were already in cache. More precisely, for every HFile reader in a compaction we can maintain a boolean flag saying whether the current key-value came from a disk IO or the block cache. In the HFile writer for the compaction&apos;s output we can maintain a flag that is set if any of the key-values in the block being written came from a cached block, use that flag at the end of a block to decide whether to cache-on-write the block, and reset the flag to false on a block boundary. If such an inclusive approach would still trash the cache, we could restrict the total number of blocks to be cached per an output HFile, switch to an &quot;and&quot; logic instead of &quot;or&quot; logic for deciding whether to cache an output file block, or only cache a certain percentage of output file blocks that contain some of the previously cached data. &lt;/p&gt;

&lt;p&gt;Thanks to Nicolas for this elegant online algorithm idea!&lt;/p&gt;</description>
                <environment></environment>
        <key id="12539540">HBASE-5263</key>
            <summary>Preserving cached data on compactions through cache-on-write</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="rshroff">Rishit Shroff</assignee>
                                    <reporter username="mikhail">Mikhail Bautin</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Jan 2012 22:34:49 +0000</created>
                <updated>Fri, 8 Aug 2014 18:49:49 +0000</updated>
                                                                            <component>BlockCache</component>
                    <component>Compaction</component>
                    <component>Performance</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>16</watches>
                                                                <comments>
                            <comment id="13205645" author="kannanm" created="Fri, 10 Feb 2012 19:04:05 +0000"  >&lt;p&gt;Promising idea! &lt;/p&gt;

&lt;p&gt;In terms of the implementation details, it would be nice to avoid some pathological cases... were cold data (which was in the cache but almost on its way out of the cache) becomes hot again. I am guessing a naive approach could have this pitfall, but something that additionally takes into consideration the hotness of the keys in the block and appropriately places the data in the correct place in the blockcache LRU would not. Haven&apos;t thought through much about the implementation details... but wanted to throw out the initial thoughts at least.&lt;/p&gt;

&lt;p&gt;See also related idea by Liyin here: &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5369&quot; title=&quot;Compaction selection based on the hotness of the HFile&amp;#39;s block in the block cache&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5369&quot;&gt;HBASE-5369&lt;/a&gt;. These could be complementary approaches.&lt;/p&gt;</comment>
                            <comment id="13205648" author="zhihyu@ebaysf.com" created="Fri, 10 Feb 2012 19:08:05 +0000"  >&lt;p&gt;@Kannan:&lt;br/&gt;
I think you were referring to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5369&quot; title=&quot;Compaction selection based on the hotness of the HFile&amp;#39;s block in the block cache&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5369&quot;&gt;HBASE-5369&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13205667" author="kannanm" created="Fri, 10 Feb 2012 19:24:13 +0000"  >&lt;p&gt;Zhihong: Yes! Fixed it in place. I had a recursive reference going there... &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12542041">HBASE-5369</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12542183">HBASE-5383</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 10 Feb 2012 19:04:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>225042</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 45 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ht2n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>101972</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>