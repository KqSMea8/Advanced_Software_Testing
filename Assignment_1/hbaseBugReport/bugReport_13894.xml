<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:47:42 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-13894/HBASE-13894.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-13894] Avoid visitor alloc each call of ByteBufferArray get/putMultiple()</title>
                <link>https://issues.apache.org/jira/browse/HBASE-13894</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;ByteBufferArray getMultiple()/putMultiple() creates a new Visitor each call. we can move that visitor out.&lt;/p&gt;

&lt;p&gt;also, ByteBufferArray.multiple() seems to be an hotspot, I tried to do some experiments using slice and read/write lock instead of a mutex, doesn&apos;t seems to change much. any thoughts?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12837433">HBASE-13894</key>
            <summary>Avoid visitor alloc each call of ByteBufferArray get/putMultiple()</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mbertozzi">Matteo Bertozzi</assignee>
                                    <reporter username="mbertozzi">Matteo Bertozzi</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Jun 2015 15:02:59 +0000</created>
                <updated>Mon, 15 Jun 2015 19:41:38 +0000</updated>
                            <resolved>Mon, 15 Jun 2015 16:27:02 +0000</resolved>
                                    <version>2.0.0</version>
                    <version>1.0.1</version>
                    <version>1.1.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>1.2.0</fixVersion>
                    <fixVersion>1.1.1</fixVersion>
                                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="14583591" author="stack" created="Fri, 12 Jun 2015 15:48:26 +0000"  >&lt;p&gt;+1 on this patch... &lt;/p&gt;

&lt;p&gt;In your profiler, can you see where time is being spent inside multiple?&lt;/p&gt;

&lt;p&gt;On it being a hotspot, I wonder if it inlines (it looks like a large method). Would be interesting to see output with below enabled&lt;/p&gt;

&lt;p&gt; -XX:+UnlockDiagnosticVMOptions -XX:+PrintInlining -XX:+PrintCompilation&lt;/p&gt;
</comment>
                            <comment id="14583763" author="anoop.hbase" created="Fri, 12 Jun 2015 17:47:13 +0000"  >&lt;p&gt;+1&lt;br/&gt;
With changes in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11425&quot; title=&quot;Cell/DBB end-to-end on the read-path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11425&quot;&gt;&lt;del&gt;HBASE-11425&lt;/del&gt;&lt;/a&gt;, we wont even need this getMultiple and copy back bytes from bucket BBs to a new BB.&lt;/p&gt;</comment>
                            <comment id="14586466" author="hudson" created="Mon, 15 Jun 2015 18:42:07 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.1 #541 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.1/541/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.1/541/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13894&quot; title=&quot;Avoid visitor alloc each call of ByteBufferArray get/putMultiple()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13894&quot;&gt;&lt;del&gt;HBASE-13894&lt;/del&gt;&lt;/a&gt; Avoid visitor alloc each call of ByteBufferArray get/putMultiple() (matteo.bertozzi: rev 1469ac56964ccb423dfb904ef0daa17a57955ace)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/util/ByteBufferArray.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14586482" author="hudson" created="Mon, 15 Jun 2015 18:49:59 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.2 #10 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2/10/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2/10/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13894&quot; title=&quot;Avoid visitor alloc each call of ByteBufferArray get/putMultiple()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13894&quot;&gt;&lt;del&gt;HBASE-13894&lt;/del&gt;&lt;/a&gt; Avoid visitor alloc each call of ByteBufferArray get/putMultiple() (matteo.bertozzi: rev ceba0659f0e9b4d0064682ee3838f0c9f6620715)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/util/ByteBufferArray.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14586547" author="hudson" created="Mon, 15 Jun 2015 19:41:38 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #6572 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/6572/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/6572/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13894&quot; title=&quot;Avoid visitor alloc each call of ByteBufferArray get/putMultiple()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13894&quot;&gt;&lt;del&gt;HBASE-13894&lt;/del&gt;&lt;/a&gt; Avoid visitor alloc each call of ByteBufferArray get/putMultiple() (matteo.bertozzi: rev dd086bb22f3131680f1e629d7280ecf1978efe7f)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/util/ByteBufferArray.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12739258" name="HBASE-13894-v0.patch" size="3067" author="mbertozzi" created="Fri, 12 Jun 2015 15:03:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 12 Jun 2015 15:48:26 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 26 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2fz9r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>