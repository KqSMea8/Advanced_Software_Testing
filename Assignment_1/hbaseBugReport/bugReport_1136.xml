<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:51:03 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1136/HBASE-1136.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1136] HashFunction inadvertently destroys some randomness</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1136</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;the code&lt;/p&gt;

&lt;p&gt;      for (int i = 0, initval = 0; i &amp;lt; nbHash; i++) &lt;/p&gt;
{
        initval = result[i] = Math.abs(hashFunction.hash(b, initval) % maxValue);
      }

&lt;p&gt;restricts initval for the next hash to the [0, maxValue) range of the hash indexes returned.  This is suboptimal, particularly for larger nbHash and smaller maxValue.  Instead, use:&lt;/p&gt;

&lt;p&gt;      for (int i = 0, initval = 0; i &amp;lt; nbHash; i++) &lt;/p&gt;
{
        initval = hashFunction.hash(b, initval);
        result[i] = Math.abs(initval) % maxValue;
      }</description>
                <environment></environment>
        <key id="12412766">HBASE-1136</key>
            <summary>HashFunction inadvertently destroys some randomness</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jbellis">Jonathan Ellis</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 Jan 2009 19:01:31 +0000</created>
                <updated>Sun, 13 Sep 2009 22:24:21 +0000</updated>
                            <resolved>Tue, 20 Jan 2009 06:38:23 +0000</resolved>
                                                    <fixVersion>0.20.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12665193" author="jbellis" created="Mon, 19 Jan 2009 19:04:22 +0000"  >&lt;p&gt;patch against r735771&lt;/p&gt;</comment>
                            <comment id="12665241" author="stack" created="Mon, 19 Jan 2009 21:25:34 +0000"  >&lt;p&gt;Committed to TRUNK.  Thanks for the patch Jonathan.&lt;/p&gt;

&lt;p&gt;Please open a new patch against Hadoop with a patch for src/core/org/apache/hadoop/util/bloom/HashFunction.java.  HashFunction was moved there by &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-3063&quot; title=&quot;BloomMapFile - fail-fast version of MapFile for sparsely populated key space&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-3063&quot;&gt;&lt;del&gt;HADOOP-3063&lt;/del&gt;&lt;/a&gt; (We&apos;ll move to using the hadoop versions in next hbase).  I can commit it after letting it air for a while in case objection.&lt;/p&gt;</comment>
                            <comment id="12665245" author="jbellis" created="Mon, 19 Jan 2009 21:48:29 +0000"  >&lt;p&gt;done: &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-5079&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HADOOP-5079&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12665283" author="stack" created="Mon, 19 Jan 2009 23:52:39 +0000"  >&lt;p&gt;Reopening.  TestFilter fails.  Reverted patch.  Can you fix Jonathan?&lt;/p&gt;</comment>
                            <comment id="12665293" author="jbellis" created="Tue, 20 Jan 2009 00:37:07 +0000"  >&lt;p&gt;How do I run just TestFilter, and how do I get it to tell me what the failure details are?&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.onelab.test.TestFilter&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 3, Failures: 2, Errors: 0, Time elapsed: 0.019 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Test org.onelab.test.TestFilter FAILED&lt;/p&gt;

&lt;p&gt;not super helpful. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12665295" author="stack" created="Tue, 20 Jan 2009 00:42:22 +0000"  >&lt;p&gt;Sure, np.  If you look in the build/test dir.. there is a dump of the test output. Or, &quot;ant -Dtestcase=TestFilter -Dtest.output=yes test&quot; will run just that test and output to console&lt;/p&gt;</comment>
                            <comment id="12665298" author="jbellis" created="Tue, 20 Jan 2009 00:54:28 +0000"  >&lt;p&gt;oh, I see what is going on.  it&apos;s a bad test.&lt;/p&gt;

&lt;p&gt;    Key key = new StringKey(&quot;toto&quot;);&lt;br/&gt;
    Key k2 = new StringKey(&quot;lulu&quot;);&lt;br/&gt;
    Key k3 = new StringKey(&quot;mama&quot;);&lt;br/&gt;
    bf.add(key);&lt;br/&gt;
    bf.add(k2);&lt;br/&gt;
    bf.add(k3);&lt;br/&gt;
    assertTrue(bf.membershipTest(key));&lt;br/&gt;
    assertTrue(bf.membershipTest(new StringKey(&quot;graknyl&quot;)));&lt;/p&gt;

&lt;p&gt;graknyl was never added.  it&apos;s relying on the implementation details of the old (broken) HashFunction.&lt;/p&gt;

&lt;p&gt;do you want me to just rip stuff like that out?&lt;/p&gt;</comment>
                            <comment id="12665299" author="stack" created="Tue, 20 Jan 2009 00:57:30 +0000"  >&lt;p&gt;Do please.  I did that myself earlier but then, after changing the two instances, it was failing later where a key was reported not present when it should have been.  Thanks Jonathan.&lt;/p&gt;</comment>
                            <comment id="12665307" author="jbellis" created="Tue, 20 Jan 2009 01:39:34 +0000"  >&lt;p&gt;Here is a patch that fixes the test.&lt;/p&gt;

&lt;p&gt;I also took out the &apos;or&apos; test because or-ing two CBFs isn&apos;t valid...  if you take 0x1|0x1 you get 0x1, but really the combined count should be 2.&lt;/p&gt;
</comment>
                            <comment id="12665349" author="stack" created="Tue, 20 Jan 2009 06:38:23 +0000"  >&lt;p&gt;Committed (again).  Thanks for the fixup Jonathan.&lt;/p&gt;

&lt;p&gt;There is no unit test up in Hadoop.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12398254" name="hash.patch" size="597" author="jbellis" created="Mon, 19 Jan 2009 19:04:22 +0000"/>
                            <attachment id="12398278" name="hbase-testfilter.patch" size="2246" author="jbellis" created="Tue, 20 Jan 2009 01:39:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 19 Jan 2009 21:25:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25595</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 48 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hbjb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99131</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>