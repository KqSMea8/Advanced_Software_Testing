<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:03:53 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-2681/HBASE-2681.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-2681] Graceful fallback to NONE when the native compression algo is not found</title>
                <link>https://issues.apache.org/jira/browse/HBASE-2681</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;stack&apos;s word: &quot;Fellas have complained about the way broke lzo manifests itself. HBase will actually take on writes. Its only when it goes to flush that it drops the edits and in a way that is essentially hidden to the client - exceptions are thrown in the regionserver log. So, i&apos;d say, make another issue if you don&apos;t mind but its not for you to fix, not unless you are inclined. It&apos;d be about better user experience around choosing a compression that is not supported or not properly installed.&quot;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12466367">HBASE-2681</key>
            <summary>Graceful fallback to NONE when the native compression algo is not found</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="pirroh">Michele Catasta</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Jun 2010 17:06:08 +0000</created>
                <updated>Fri, 20 Nov 2015 12:44:10 +0000</updated>
                            <resolved>Tue, 5 Oct 2010 23:06:47 +0000</resolved>
                                                    <fixVersion>0.90.0</fixVersion>
                                    <component>io</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="12876315" author="pirroh" created="Mon, 7 Jun 2010 17:09:55 +0000"  >&lt;p&gt;Extracted a method that tries to instantiate a native codec and, if not found, just writes a WARN in the logs instead of throwing a RuntimeException. Trivial test included.&lt;/p&gt;</comment>
                            <comment id="12876393" author="davelatham" created="Mon, 7 Jun 2010 20:18:43 +0000"  >&lt;p&gt;It&apos;s definitely not good to fail silently at a later time.&lt;/p&gt;

&lt;p&gt;However, I&apos;d prefer to see it fail loudly and immediately if I try to use a form of compression that is not available rather than a quiet fallback to no compression that I would likely not notice.&lt;/p&gt;</comment>
                            <comment id="12876405" author="stack" created="Mon, 7 Jun 2010 20:34:24 +0000"  >&lt;p&gt;@Dave Currently, hbase runs and failure happens when we go to flush.  Failure is &apos;loud&apos; if you are looking at logs but if not looking in logs, its not plain what is wrong.  You are suggesting Dave that rather than just proceed, that instead we fail even earlier?  Like when you try to create a table or alter a schema to add a compression that does not exist, that it fail at this time?  Doing this latter is probalby the right thing to do but its kinda tough to do in that you need to ensure the compression is available on all members of the cluster inline w/ the setting of schema.  We don&apos;t have a mechanism to do this.   What do we do also when a new server is added to the cluster only the admins forgot to add compression libs.... should this new node fail loudly or just, log and keep going?&lt;/p&gt;</comment>
                            <comment id="12876406" author="ryanobjc" created="Mon, 7 Jun 2010 20:36:08 +0000"  >&lt;p&gt;During a flush/hfile write it is easy to fall back to &quot;NONE&quot;, but when you try to read a HFile (which was written with a specific codec) and that codec fails to load then there is no good graceful failure while also returning data.  &lt;/p&gt;</comment>
                            <comment id="12876413" author="davelatham" created="Mon, 7 Jun 2010 20:44:38 +0000"  >&lt;p&gt;I agree it&apos;s not easy as it is right now.&lt;/p&gt;

&lt;p&gt;Would it make sense to have a set of expected, &quot;supported&quot; compression schemes in the settings.  On regionserver startup, they check to see if the supported algorithms are available, possibly report that to master or just fail to load.  Then when creating / altering a table immediately complain if the compression isn&apos;t in the supported set?&lt;/p&gt;</comment>
                            <comment id="12876416" author="apurtell" created="Mon, 7 Jun 2010 20:57:44 +0000"  >&lt;p&gt;I think it makes sense for the region server to refuse to open a region if the schema indicates to use an unavailable codec.&lt;/p&gt;



</comment>
                            <comment id="12876419" author="ryanobjc" created="Mon, 7 Jun 2010 21:03:46 +0000"  >&lt;p&gt;A region may contain multiple files with multiple codecs.  Thus even&lt;br/&gt;
if the schema says &quot;GZ&quot; the files may be &quot;LZO&quot;.  Thus the regionserver&lt;br/&gt;
must have all the codecs applicable.&lt;/p&gt;

&lt;p&gt;But it&apos;s a little more insidious, in our case there are 2 failure&lt;br/&gt;
modes with LZO:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;missing class exceptions&lt;/li&gt;
	&lt;li&gt;missing native library exceptions&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Testing for all applicable codecs, including an end to end functional&lt;br/&gt;
test would probably be necessary to detect both these cases.&lt;/p&gt;

</comment>
                            <comment id="12891927" author="stack" created="Sat, 24 Jul 2010 04:03:44 +0000"  >&lt;p&gt;I think we should now close this issue and do &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2514&quot; title=&quot;RegionServer should refuse to be assigned a region that use LZO when LZO isn&amp;#39;t available&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2514&quot;&gt;&lt;del&gt;HBASE-2514&lt;/del&gt;&lt;/a&gt; instead.  What do folks think?&lt;/p&gt;</comment>
                            <comment id="12918305" author="stack" created="Tue, 5 Oct 2010 23:06:47 +0000"  >&lt;p&gt;We&apos;ll go the &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2514&quot; title=&quot;RegionServer should refuse to be assigned a region that use LZO when LZO isn&amp;#39;t available&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2514&quot;&gt;&lt;del&gt;HBASE-2514&lt;/del&gt;&lt;/a&gt; route instead of not loading region if compression not available.&lt;/p&gt;

&lt;p&gt;We can&apos;t go to NONE if region was written w/ a compression lib &amp;#8211; we won&apos;t be able to open the files if absent compression lib.&lt;/p&gt;</comment>
                            <comment id="15017728" author="lars_francke" created="Fri, 20 Nov 2015 12:44:10 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12463722">HBASE-2514</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12463722">HBASE-2514</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12465964">HBASE-2655</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12446500" name="HBASE-2681.patch" size="4967" author="pirroh" created="Mon, 7 Jun 2010 17:09:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 7 Jun 2010 20:18:43 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32714</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hir3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>100300</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>