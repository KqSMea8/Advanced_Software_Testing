<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:40:21 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6843/HBASE-6843.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6843] loading lzo error when using coprocessor</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6843</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;After applying &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6308&quot; title=&quot;Coprocessors should be loaded in a custom ClassLoader to prevent dependency conflicts with HBase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6308&quot;&gt;&lt;del&gt;HBASE-6308&lt;/del&gt;&lt;/a&gt;,we found error followed&lt;/p&gt;

&lt;p&gt;2012-09-06 00:44:38,341 DEBUG org.apache.hadoop.hbase.coprocessor.CoprocessorClassLoader: Finding class: com.hadoop.compression.lzo.LzoCodec&lt;br/&gt;
2012-09-06 00:44:38,351 ERROR com.hadoop.compression.lzo.GPLNativeCodeLoader: Could not load native gpl library&lt;br/&gt;
java.lang.UnsatisfiedLinkError: Native Library /home/zhuzhuang/hbase/0.94.0-ali-1.0/lib/native/Linux-amd64-64/libgplcompression.so already loaded in another classloade&lt;br/&gt;
r&lt;br/&gt;
at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1772)&lt;br/&gt;
at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1732)&lt;br/&gt;
at java.lang.Runtime.loadLibrary0(Runtime.java:823)&lt;br/&gt;
at java.lang.System.loadLibrary(System.java:1028)&lt;br/&gt;
at com.hadoop.compression.lzo.GPLNativeCodeLoader.&amp;lt;clinit&amp;gt;(GPLNativeCodeLoader.java:32)&lt;br/&gt;
at com.hadoop.compression.lzo.LzoCodec.&amp;lt;clinit&amp;gt;(LzoCodec.java:67)&lt;br/&gt;
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)&lt;br/&gt;
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)&lt;br/&gt;
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)&lt;br/&gt;
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)&lt;br/&gt;
at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:113)&lt;br/&gt;
at org.apache.hadoop.hbase.io.hfile.Compression$Algorithm$1.getCodec(Compression.java:107)&lt;br/&gt;
at org.apache.hadoop.hbase.io.hfile.Compression$Algorithm.getCompressor(Compression.java:243)&lt;br/&gt;
at org.apache.hadoop.hbase.util.CompressionTest.testCompression(CompressionTest.java:85)&lt;br/&gt;
at org.apache.hadoop.hbase.regionserver.HRegion.checkCompressionCodecs(HRegion.java:3793)&lt;br/&gt;
at org.apache.hadoop.hbase.regionserver.HRegion.openHRegion(HRegion.java:3782)&lt;br/&gt;
at org.apache.hadoop.hbase.regionserver.HRegion.openHRegion(HRegion.java:3732)&lt;br/&gt;
at org.apache.hadoop.hbase.regionserver.handler.OpenRegionHandler.openRegion(OpenRegionHandler.java:332)&lt;br/&gt;
at org.apache.hadoop.hbase.regionserver.handler.OpenRegionHandler.process(OpenRegionHandler.java:108)&lt;br/&gt;
at org.apache.hadoop.hbase.executor.EventHandler.run(EventHandler.java:169)&lt;br/&gt;
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)&lt;br/&gt;
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:662)&lt;br/&gt;
2012-09-06 00:44:38,355 DEBUG org.apache.hadoop.hbase.coprocessor.CoprocessorClassLoader: Skipping exempt class java.io.PrintWriter - delegating directly to parent&lt;br/&gt;
2012-09-06 00:44:38,355 ERROR com.hadoop.compression.lzo.LzoCodec: Cannot load native-lzo without native-hadoop&lt;/p&gt;</description>
                <environment></environment>
        <key id="12608380">HBASE-6843</key>
            <summary>loading lzo error when using coprocessor</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zhou wen jian">Zhou wenjian</assignee>
                                    <reporter username="zhou wen jian">Zhou wenjian</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 Sep 2012 04:09:28 +0000</created>
                <updated>Tue, 26 Feb 2013 08:20:44 +0000</updated>
                            <resolved>Wed, 24 Oct 2012 04:48:23 +0000</resolved>
                                    <version>0.94.1</version>
                                    <fixVersion>0.94.3</fixVersion>
                    <fixVersion>0.95.0</fixVersion>
                                    <component>Coprocessors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13459315" author="zhou wen jian" created="Thu, 20 Sep 2012 04:12:04 +0000"  >&lt;p&gt;i think we should include the com.hadoop in CoprocessorClassLoader.CLASS_PREFIX_EXEMPTIONS ,to avoid  the lzo loaed twice.&lt;/p&gt;</comment>
                            <comment id="13459335" author="stack" created="Thu, 20 Sep 2012 04:47:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zhou+wenjian&quot; class=&quot;user-hover&quot; rel=&quot;zhou wenjian&quot;&gt;zhou wenjian&lt;/a&gt; What is com.hadoop?  Where does that come from?  Thanks.&lt;/p&gt;</comment>
                            <comment id="13459339" author="zhou wen jian" created="Thu, 20 Sep 2012 05:00:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=saint.ack%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;saint.ack@gmail.com&quot;&gt;Stack&lt;/a&gt;&lt;br/&gt;
IMO, native-lzo is loaded Repeatedly in different regions opening with cp imported in, &lt;br/&gt;
that is because of the PREFIX of lzo( com.hadoop.compression.lzo ) is not included in CoprocessorClassLoader.CLASS_PREFIX_EXEMPTIONS&lt;/p&gt;</comment>
                            <comment id="13459354" author="apurtell" created="Thu, 20 Sep 2012 05:16:41 +0000"  >&lt;p&gt;&quot;com.hadoop&quot; isn&apos;t HBase or even ASF licensed code, so adding it to the built in prefix exemption list seems wrong. What we should do here is allow users to add class prefixes to the exception list. Would you like to try that Zhou?&lt;/p&gt;</comment>
                            <comment id="13475925" author="lhofhansl" created="Mon, 15 Oct 2012 00:41:00 +0000"  >&lt;p&gt;Trying to understand the issue here.&lt;/p&gt;

&lt;p&gt;@Zhou, are you saying the coprocessors cannot be used at all if native lzo is used for compression? Is this the typical lzo compression library folks would use? That would indeed be pretty bad.&lt;/p&gt;</comment>
                            <comment id="13479626" author="lhofhansl" created="Fri, 19 Oct 2012 05:27:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zhou+wen+jian&quot; class=&quot;user-hover&quot; rel=&quot;zhou wen jian&quot;&gt;Zhou wenjian&lt;/a&gt;, any comment?&lt;/p&gt;</comment>
                            <comment id="13481713" author="apurtell" created="Mon, 22 Oct 2012 19:40:31 +0000"  >&lt;blockquote&gt;&lt;p&gt;Is this the typical lzo compression library folks would use? That would indeed be pretty bad.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It is, and it is, but &lt;tt&gt;com.hadoop&lt;/tt&gt; classes are from the Hadoop GPL codec project.&lt;/p&gt;

&lt;p&gt;The trivial thing to do here is add them to the whitelist but there are two larger issues IMHO. The precedent is bad, whitelisting non ASF code. How often will we do this? And anyway the whitelist should not be hardcoded anyway. At least, it should be extensible.&lt;/p&gt;
</comment>
                            <comment id="13481891" author="lhofhansl" created="Mon, 22 Oct 2012 22:45:08 +0000"  >&lt;p&gt;Thank Andy. So if I understand this correctly, all coprocessors are broken if LZO is used. So we &lt;b&gt;need&lt;/b&gt; to do something in the short term.&lt;/p&gt;

&lt;p&gt;+1 on the whitelisting for now in 0.94 and 0.96 (even if that sets a bad precedence) and filing a separate issue for a better fix for 0.96 only.&lt;/p&gt;

&lt;p&gt;I wonder whether it is possible to have a test for this? (probably hard and not worth it, just asking)&lt;/p&gt;</comment>
                            <comment id="13481894" author="apurtell" created="Mon, 22 Oct 2012 22:49:16 +0000"  >&lt;blockquote&gt;&lt;p&gt;So we need to do something in the short term.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The attached patch can apply to both trunk and 0.94.&lt;/p&gt;</comment>
                            <comment id="13481898" author="apurtell" created="Mon, 22 Oct 2012 22:54:41 +0000"  >&lt;blockquote&gt;&lt;p&gt;filing a separate issue for a better fix for 0.96 only.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7030&quot; title=&quot;Configurable whitelist for coprocessor class loader&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7030&quot;&gt;&lt;del&gt;HBASE-7030&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13481915" author="yuzhihong@gmail.com" created="Mon, 22 Oct 2012 23:16:06 +0000"  >&lt;p&gt;+1 on patch.&lt;/p&gt;</comment>
                            <comment id="13482153" author="lhofhansl" created="Tue, 23 Oct 2012 06:22:20 +0000"  >&lt;p&gt;Thanks Andy. +1&lt;/p&gt;</comment>
                            <comment id="13482956" author="lhofhansl" created="Wed, 24 Oct 2012 04:48:23 +0000"  >&lt;p&gt;Committed to 0.94 and 0.96.&lt;br/&gt;
Thanks for the patch and discussion&lt;/p&gt;</comment>
                            <comment id="13483003" author="hudson" created="Wed, 24 Oct 2012 06:04:52 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3479 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3479/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3479/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6843&quot; title=&quot;loading lzo error when using coprocessor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6843&quot;&gt;&lt;del&gt;HBASE-6843&lt;/del&gt;&lt;/a&gt; loading lzo error when using coprocessor (Andy) (Revision 1401551)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/coprocessor/CoprocessorClassLoader.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13483023" author="hudson" created="Wed, 24 Oct 2012 06:31:51 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #551 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/551/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/551/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6843&quot; title=&quot;loading lzo error when using coprocessor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6843&quot;&gt;&lt;del&gt;HBASE-6843&lt;/del&gt;&lt;/a&gt; loading lzo error when using coprocessor (Andy) (Revision 1401550)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/coprocessor/CoprocessorClassLoader.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13483171" author="hudson" created="Wed, 24 Oct 2012 12:25:25 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #233 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/233/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/233/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6843&quot; title=&quot;loading lzo error when using coprocessor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6843&quot;&gt;&lt;del&gt;HBASE-6843&lt;/del&gt;&lt;/a&gt; loading lzo error when using coprocessor (Andy) (Revision 1401551)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/coprocessor/CoprocessorClassLoader.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13490371" author="hudson" created="Mon, 5 Nov 2012 01:35:35 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security-on-Hadoop-23 #9 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/9/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/9/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6843&quot; title=&quot;loading lzo error when using coprocessor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6843&quot;&gt;&lt;del&gt;HBASE-6843&lt;/del&gt;&lt;/a&gt; loading lzo error when using coprocessor (Andy) (Revision 1401550)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/coprocessor/CoprocessorClassLoader.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12545845" name="HBASE-6843-trunk.patch" size="567" author="zhou wen jian" created="Thu, 20 Sep 2012 04:44:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 20 Sep 2012 04:47:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>241721</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 6 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02blr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11481</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>