<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:23:10 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-11432/HBASE-11432.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-11432] [AccessController] Remove cell first strategy</title>
                <link>https://issues.apache.org/jira/browse/HBASE-11432</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The cell first evaluation strategy for cell ACLs has been a problem since introduction. It was an afterthought and a mistake. It&apos;s not possible to use at all with the default config on trunk after &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11077&quot; title=&quot;[AccessController] Restore compatible early-out access denial&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11077&quot;&gt;&lt;del&gt;HBASE-11077&lt;/del&gt;&lt;/a&gt;. Fairly certain there are no users. Remove. Deprecate related client API methods on Query. (Remove on trunk?)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12724263">HBASE-11432</key>
            <summary>[AccessController] Remove cell first strategy</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="apurtell">Andrew Purtell</assignee>
                                    <reporter username="apurtell">Andrew Purtell</reporter>
                        <labels>
                    </labels>
                <created>Sat, 28 Jun 2014 01:21:15 +0000</created>
                <updated>Fri, 6 May 2016 06:33:17 +0000</updated>
                            <resolved>Tue, 1 Jul 2014 22:25:40 +0000</resolved>
                                                    <fixVersion>0.99.0</fixVersion>
                    <fixVersion>0.98.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="14046592" author="apurtell" created="Sat, 28 Jun 2014 01:22:16 +0000"  >&lt;p&gt;Patch is the same for trunk and 0.98.&lt;/p&gt;</comment>
                            <comment id="14046723" author="anoop.hbase" created="Sat, 28 Jun 2014 04:44:40 +0000"  >&lt;p&gt;Patch lgtm&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Deprecate related client API methods on Query. (Remove on trunk?)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I am +1 for deprecate in 98 and remove in trunk.&lt;/p&gt;</comment>
                            <comment id="14046840" author="ram_krish" created="Sat, 28 Jun 2014 12:20:12 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!authResult.isAllowed()) {
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!cellFeaturesEnabled || compatibleEarlyTermination) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This first &apos;if&apos; check will mean that even if compatibleEarlyTermination is false or true it is not going to check the cell level permission.  This is already existing code and not part of this patch.  So my question is if a user is set with READ permission then there narrowing the permission on a cell level does not make sense?  So user A has permssion to read a table and CF but not authorised to read a CELL?&lt;br/&gt;
But if we allow that then the || condition in &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (authManager.authorize(user, table, family, qualifier, Permission.Action.READ) ||
            authManager.authorize(user, table, cell, Permission.Action.READ)) {
          &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ReturnCode.INCLUDE;
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;has to be changed to &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
authManager.authorize(user, table, cell, Permission.Action.READ)) 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Anyway CELL_DEFAULT can be changed to just reading the cell permission.&lt;br/&gt;
+1 on deprecating in 0.98 and removing from trunk.&lt;/p&gt;</comment>
                            <comment id="14046920" author="apurtell" created="Sat, 28 Jun 2014 16:50:14 +0000"  >&lt;blockquote&gt;&lt;p&gt;This first &apos;if&apos; check will mean that even if compatibleEarlyTermination is false or true it is not going to check the cell level permission. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;cellFeaturesEnabled is always true unless running with HFile &amp;lt; 3, so in the typical case this expression is &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; || compatibleEarlyTermination)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So this is really a test for &apos;compatibleEarlyTermination&apos;.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;But if we allow that then the || condition in&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (authManager.authorize(user, table, family, qualifier, Permission.Action.READ) ||
            authManager.authorize(user, table, cell, Permission.Action.READ)) {
          &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ReturnCode.INCLUDE;
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;has to be changed to&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
authManager.authorize(user, table, cell, Permission.Action.READ)) 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;

&lt;p&gt;This code is also called from AccessControlFilter when processing scans. &lt;/p&gt;</comment>
                            <comment id="14047842" author="apurtell" created="Mon, 30 Jun 2014 16:54:03 +0000"  >&lt;p&gt;What I committed to trunk and 0.98&lt;/p&gt;</comment>
                            <comment id="14048034" author="hudson" created="Mon, 30 Jun 2014 19:42:34 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.98-on-Hadoop-1.1 #345 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/345/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/345/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11432&quot; title=&quot;[AccessController] Remove cell first strategy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11432&quot;&gt;&lt;del&gt;HBASE-11432&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;AccessController&amp;#93;&lt;/span&gt; Remove cell first strategy (apurtell: rev 67a95ac75c48afdacf8a876cf767c85b49bf0113)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/security/access/TestScanEarlyTermination.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/security/access/TestCellACLs.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/Mutation.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/Query.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/util/MultiThreadedReaderWithACL.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/security/access/AccessControlFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/security/access/AccessController.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14048053" author="hudson" created="Mon, 30 Jun 2014 20:01:30 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.98 #365 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/365/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/365/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11432&quot; title=&quot;[AccessController] Remove cell first strategy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11432&quot;&gt;&lt;del&gt;HBASE-11432&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;AccessController&amp;#93;&lt;/span&gt; Remove cell first strategy (apurtell: rev 67a95ac75c48afdacf8a876cf767c85b49bf0113)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/security/access/TestScanEarlyTermination.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/Query.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/Mutation.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/util/MultiThreadedReaderWithACL.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/security/access/TestCellACLs.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/security/access/AccessControlFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/security/access/AccessController.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14048059" author="hudson" created="Mon, 30 Jun 2014 20:05:52 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #5249 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/5249/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/5249/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11432&quot; title=&quot;[AccessController] Remove cell first strategy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11432&quot;&gt;&lt;del&gt;HBASE-11432&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;AccessController&amp;#93;&lt;/span&gt; Remove cell first strategy (apurtell: rev d797fc872fd31bdf2a30d33e59837ab37bd50121)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/security/access/TestScanEarlyTermination.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/Mutation.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/security/access/AccessControlFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/util/MultiThreadedReaderWithACL.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/security/access/AccessController.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/Query.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/security/access/TestCellACLs.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14049386" author="apurtell" created="Tue, 1 Jul 2014 22:24:46 +0000"  >&lt;p&gt;Reopen for commit to branch-1. Ping &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14049387" author="apurtell" created="Tue, 1 Jul 2014 22:25:40 +0000"  >&lt;p&gt;Pardon, grep missed it, already in 1.0&lt;/p&gt;</comment>
                            <comment id="14331224" author="enis" created="Sat, 21 Feb 2015 23:34:33 +0000"  >&lt;p&gt;Closing this issue after 0.99.0 release. &lt;/p&gt;</comment>
                            <comment id="15273694" author="anoop.hbase" created="Fri, 6 May 2016 06:33:17 +0000"  >&lt;p&gt;AccessControlConstants which is Public class still have reference&lt;br/&gt;
 /** Cell level ACL evaluation strategy */&lt;br/&gt;
  public static final String OP_ATTRIBUTE_ACL_STRATEGY = &quot;acl.strategy&quot;;&lt;br/&gt;
  /** Default cell ACL evaluation strategy: Table and CF first, then ACL */&lt;br/&gt;
  public static final byte[] OP_ATTRIBUTE_ACL_STRATEGY_DEFAULT = new byte[] &lt;/p&gt;
{ 0 }
&lt;p&gt;;&lt;br/&gt;
  /** Alternate cell ACL evaluation strategy: Cell ACL first, then table and CF */&lt;br/&gt;
  public static final byte[] OP_ATTRIBUTE_ACL_STRATEGY_CELL_FIRST = new byte[] &lt;/p&gt;
{ 1 }
&lt;p&gt;;&lt;br/&gt;
We need to remove them.  And also in hbase book if any ref ?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12653184" name="HBASE-11432-0.98.patch" size="12612" author="apurtell" created="Mon, 30 Jun 2014 16:54:03 +0000"/>
                            <attachment id="12653183" name="HBASE-11432.patch" size="12473" author="apurtell" created="Mon, 30 Jun 2014 16:54:03 +0000"/>
                            <attachment id="12652936" name="HBASE-11432.patch" size="10953" author="apurtell" created="Sat, 28 Jun 2014 01:22:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 28 Jun 2014 04:44:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>402448</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            32 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1x9qf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>402515</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>