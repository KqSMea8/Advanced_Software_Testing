<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:57:12 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-14864/HBASE-14864.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-14864] Add support for bucketing of keys into client library</title>
                <link>https://issues.apache.org/jira/browse/HBASE-14864</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;This has been discussed and taught so many times, I believe it is time to support it properly. The idea is to be able to assign an optional &lt;em&gt;bucketing&lt;/em&gt; strategy to a table, which translates the user given row keys into a bucketed version. This is done by either simple count, or by parts of the key. Possibly some simple functionality should help &lt;em&gt;compute&lt;/em&gt; bucket keys. &lt;/p&gt;

&lt;p&gt;For example, given a key &lt;tt&gt;&amp;lt;service&amp;gt;&amp;#45;&amp;lt;epoch&amp;gt;&amp;#45;&amp;lt;subgroup&amp;gt;-...&lt;/tt&gt; you could imagine that a rule can be defined that takes the &lt;em&gt;epoch&lt;/em&gt; part and chunks it into, for example, 5 minute buckets. This allows to store small time series together and make reading (especially over many servers) much more efficient.&lt;/p&gt;

&lt;p&gt;The client also supports the proper scan logic to fan a scan over the buckets as needed. There may be an executor service (implicitly or explicitly provided) that is used to fetch the original data with user visible ordering from the distributed buckets. &lt;/p&gt;

&lt;p&gt;Note that this has been attempted a few times to various extends out in the field, but then withered away. This is an essential feature that when present in the API will make users consider this earlier, instead of when it is too late (when hot spotting occurs for example).&lt;/p&gt;

&lt;p&gt;The selected bucketing strategy and settings could be stored in the table descriptor key/value pairs. This will allow any client to observe the strategy transparently. If not set the behaviour is the same as today, so the new feature is not touching any critical path in terms of code, and is fully client side. (But could be considered for say UI support as well - if needed).&lt;/p&gt;

&lt;p&gt;The strategies are pluggable using classes, but a few default implementations are supplied.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12914983">HBASE-14864</key>
            <summary>Add support for bucketing of keys into client library</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="larsgeorge">Lars George</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Nov 2015 20:53:38 +0000</created>
                <updated>Sat, 19 Dec 2015 04:22:23 +0000</updated>
                                                                            <component>Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>13</watches>
                                                                <comments>
                            <comment id="15018796" author="tlipcon" created="Fri, 20 Nov 2015 21:08:30 +0000"  >&lt;p&gt;Interesting proposal. Can you give an example or two of the key transformation you&apos;re suggesting? Typically &quot;bucket&quot; means some kind of hash calculation, but from the description it sounds more like you&apos;re applying some &quot;round to nearest 5 minute interval&quot;?&lt;/p&gt;</comment>
                            <comment id="15018880" author="lars_francke" created="Fri, 20 Nov 2015 21:59:18 +0000"  >&lt;p&gt;I can think of a related but slightly different use case: Distributing counters. Not sure if that belongs in this proposal.&lt;/p&gt;

&lt;p&gt;I often see people implementing counters for things like &quot;hits this hour&quot; and they&apos;ll be heavily hotspotted. People then often prefix them with a bucket number and write to a random bucket. Reading needs to sum all buckets up (and could after the hour has passed even reconcile those counters and write them back).&lt;/p&gt;

&lt;p&gt;I agree that this would be a very useful feature.&lt;/p&gt;
</comment>
                            <comment id="15019180" author="larsgeorge" created="Sat, 21 Nov 2015 00:27:34 +0000"  >&lt;p&gt;Yes, say you have an epoch like &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ date -j -f %s 1433763479
Mon Jun  8 04:37:59 PDT 2015
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;or the date it results to given as &lt;tt&gt;20150608043759&lt;/tt&gt;, it would be good to say instead of sending this to a &lt;em&gt;random&lt;/em&gt;, hashed location per time, that you instead &lt;em&gt;round&lt;/em&gt; it to every five minutes. That way all keys from say &lt;tt&gt;201506080435&lt;/tt&gt; to &lt;tt&gt;201506080440&lt;/tt&gt; arrive at the same bucket. Now when you read the data you can fetch it as a block per server, and therefore IO is more efficient (per server).&lt;/p&gt;</comment>
                            <comment id="15019181" author="larsgeorge" created="Sat, 21 Nov 2015 00:28:25 +0000"  >&lt;p&gt;This is certainly related and could be included in the support.&lt;/p&gt;</comment>
                            <comment id="15033584" author="anoop.hbase" created="Tue, 1 Dec 2015 12:10:37 +0000"  >&lt;p&gt;There was another Jira raised on similar req. Sorry I forgot the id.&lt;/p&gt;</comment>
                            <comment id="15041994" author="busbey" created="Fri, 4 Dec 2015 18:59:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt; are you thinking of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12853&quot; title=&quot;distributed write pattern to replace ad hoc &amp;#39;salting&amp;#39;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12853&quot;&gt;&lt;del&gt;HBASE-12853&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="15065228" author="anoop.hbase" created="Sat, 19 Dec 2015 04:22:23 +0000"  >&lt;p&gt;Yes &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=busbey&quot; class=&quot;user-hover&quot; rel=&quot;busbey&quot;&gt;Sean Busbey&lt;/a&gt;  I was saying abt that. The intention of that Jira was this only but the solution proposed was different. (Thinking HBase is working in a different way)..   We will need solution at client side only..  I see that jira being closed now.. So fine.. we can work here.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 20 Nov 2015 21:08:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            51 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2oq7j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>