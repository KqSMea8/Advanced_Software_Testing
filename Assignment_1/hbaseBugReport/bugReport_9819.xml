<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:07:51 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-9819/HBASE-9819.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-9819] Backport HBASE-8372 &apos;Provide mutability to CompoundConfiguration&apos; to 0.94</title>
                <link>https://issues.apache.org/jira/browse/HBASE-9819</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;In the email thread: &lt;a href=&quot;http://search-hadoop.com/m/dcqod1uy32h&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://search-hadoop.com/m/dcqod1uy32h&lt;/a&gt;&lt;br/&gt;
yonghu encountered the following exception when he tried to retrieve HTableInterface:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ERROR: org.apache.hadoop.hbase.client.RetriesExhaustedWithDetailsException:
Failed 1 action: org.apache.hadoop.hbase.DoNotRetryIOException:
Coprocessor:
&apos;org.apache.hadoop.hbase.regionserver.RegionCoprocessorHost$RegionEnvironment@9a99eb&apos;
threw: &apos;java.lang.UnsupportedOperationException: Immutable Configuration&apos;
and has been removedfrom the active coprocessor set.
    at
org.apache.hadoop.hbase.coprocessor.CoprocessorHost.handleCoprocessorThrowable(CoprocessorHost.java:740)
    at
org.apache.hadoop.hbase.regionserver.RegionCoprocessorHost.prePut(RegionCoprocessorHost.java:810)
    at
org.apache.hadoop.hbase.regionserver.HRegion.doPreMutationHook(HRegion.java:2196)
    at
org.apache.hadoop.hbase.regionserver.HRegion.batchMutate(HRegion.java:2172)
    at
org.apache.hadoop.hbase.regionserver.HRegionServer.multi(HRegionServer.java:3811)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at
org.apache.hadoop.hbase.ipc.WritableRpcEngine$Server.call(WritableRpcEngine.java:320)
    at
org.apache.hadoop.hbase.ipc.HBaseServer$Handler.run(HBaseServer.java:1426)
Caused by: java.lang.UnsupportedOperationException: Immutable Configuration
    at
org.apache.hadoop.hbase.regionserver.CompoundConfiguration.set(CompoundConfiguration.java:484)
    at
org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.ensureZookeeperTrackers(HConnectionManager.java:721)
    at
org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegion(HConnectionManager.java:986)
    at
org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegion(HConnectionManager.java:961)
    at org.apache.hadoop.hbase.client.HTable.finishSetup(HTable.java:251)
    at org.apache.hadoop.hbase.client.HTable.&amp;lt;init&amp;gt;(HTable.java:243)
    at
org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.getTable(HConnectionManager.java:671)
    at
org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.getTable(HConnectionManager.java:658)
    at
CDCTrigger.TriggerForModification.prePut(TriggerForModification.java:61)
    at
org.apache.hadoop.hbase.regionserver.RegionCoprocessorHost.prePut(RegionCoprocessorHost.java:808)
    ... 9 more
: 1 time, servers with issues: hans-laptop:60020
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;CompoundConfiguration is mutable in 0.96 and beyond.&lt;br/&gt;
This should be backported to 0.94&lt;/p&gt;</description>
                <environment></environment>
        <key id="12675112">HBASE-9819</key>
            <summary>Backport HBASE-8372 &apos;Provide mutability to CompoundConfiguration&apos; to 0.94</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yuzhihong@gmail.com">Ted Yu</assignee>
                                    <reporter username="yuzhihong@gmail.com">Ted Yu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Oct 2013 19:49:43 +0000</created>
                <updated>Fri, 8 Nov 2013 00:03:16 +0000</updated>
                            <resolved>Fri, 25 Oct 2013 16:50:45 +0000</resolved>
                                                    <fixVersion>0.94.13</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13802475" author="lhofhansl" created="Wed, 23 Oct 2013 00:45:26 +0000"  >&lt;p&gt;This comes from here:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (clusterId == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
        clusterId = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ClusterId(zooKeeper, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (clusterId.hasId()) {
          conf.set(HConstants.CLUSTER_ID, clusterId.getId());
        }
      }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Why are we setting CLUSTER_ID on the config?&lt;/p&gt;</comment>
                            <comment id="13802519" author="lhofhansl" created="Wed, 23 Oct 2013 01:52:59 +0000"  >&lt;p&gt;getTable is new API that cannot be use on just any HConnection.&lt;br/&gt;
The code should create a new HTable. We have not throught through the details in coprocessors.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jesse_yates&quot; class=&quot;user-hover&quot; rel=&quot;jesse_yates&quot;&gt;Jesse Yates&lt;/a&gt; might have some ideas here.&lt;/p&gt;</comment>
                            <comment id="13803090" author="ghelmling" created="Wed, 23 Oct 2013 18:14:33 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (clusterId == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
        clusterId = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ClusterId(zooKeeper, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (clusterId.hasId()) {
          conf.set(HConstants.CLUSTER_ID, clusterId.getId());
        }
      }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This pushes down cluster ID so it&apos;s available in HBaseClient (or SecureClient).  SecureClient uses it to select the correct token for token authentication.&lt;/p&gt;

&lt;p&gt;Now that we&apos;ve removed some of the caching layers between HConnectionImplementation and HBaseClient, though, maybe we can just pass through clusterId as a parameter instead of setting it in the conf.&lt;/p&gt;</comment>
                            <comment id="13803380" author="yuzhihong@gmail.com" created="Wed, 23 Oct 2013 21:50:39 +0000"  >&lt;p&gt;TestCompoundConfiguration passed with patch.&lt;/p&gt;

&lt;p&gt;Running test suite now.&lt;/p&gt;</comment>
                            <comment id="13803527" author="yuzhihong@gmail.com" created="Wed, 23 Oct 2013 23:13:20 +0000"  >&lt;p&gt;Tests run: 1389, Failures: 0, Errors: 0, Skipped: 13&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; BUILD SUCCESS&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Total time: 1:13:15.269s&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Finished at: Wed Oct 23 23:12:42 UTC 2013&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Final Memory: 29M/698M&lt;/p&gt;</comment>
                            <comment id="13804380" author="lhofhansl" created="Thu, 24 Oct 2013 16:43:40 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13804413" author="yuzhihong@gmail.com" created="Thu, 24 Oct 2013 17:08:27 +0000"  >&lt;p&gt;Integrated to 0.94&lt;/p&gt;

&lt;p&gt;Thanks for the review.&lt;/p&gt;</comment>
                            <comment id="13804482" author="hudson" created="Thu, 24 Oct 2013 18:08:14 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.94-security #322 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/322/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/322/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9819&quot; title=&quot;Backport HBASE-8372 &amp;#39;Provide mutability to CompoundConfiguration&amp;#39; to 0.94&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9819&quot;&gt;&lt;del&gt;HBASE-9819&lt;/del&gt;&lt;/a&gt; Backport &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8372&quot; title=&quot;Provide mutability to CompoundConfiguration&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8372&quot;&gt;&lt;del&gt;HBASE-8372&lt;/del&gt;&lt;/a&gt; &apos;Provide mutability to CompoundConfiguration&apos; to 0.94 (Ted Yu) (tedyu: rev 1535442)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/CompoundConfiguration.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/regionserver/TestCompoundConfiguration.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13804580" author="hudson" created="Thu, 24 Oct 2013 19:22:12 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.94 #1181 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/1181/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/1181/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9819&quot; title=&quot;Backport HBASE-8372 &amp;#39;Provide mutability to CompoundConfiguration&amp;#39; to 0.94&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9819&quot;&gt;&lt;del&gt;HBASE-9819&lt;/del&gt;&lt;/a&gt; Backport &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8372&quot; title=&quot;Provide mutability to CompoundConfiguration&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8372&quot;&gt;&lt;del&gt;HBASE-8372&lt;/del&gt;&lt;/a&gt; &apos;Provide mutability to CompoundConfiguration&apos; to 0.94 (Ted Yu) (tedyu: rev 1535442)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/CompoundConfiguration.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/regionserver/TestCompoundConfiguration.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12675182">HBASE-9825</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12643219">HBASE-8372</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12609934" name="9819.txt" size="20543" author="yuzhihong@gmail.com" created="Wed, 23 Oct 2013 21:51:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 23 Oct 2013 00:45:26 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>354732</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 8 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1p5m7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>355021</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>