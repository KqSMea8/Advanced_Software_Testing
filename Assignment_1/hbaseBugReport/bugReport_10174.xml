<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:11:12 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-10174/HBASE-10174.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-10174] Back port HBASE-9667 &apos;NullOutputStream removed from Guava 15&apos; to 0.94</title>
                <link>https://issues.apache.org/jira/browse/HBASE-10174</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;On user mailing list under the thread &apos;Guava 15&apos;, Kristoffer Sj&#246;gren reported NoClassDefFoundError when he used Guava 15.&lt;/p&gt;

&lt;p&gt;The issue has been fixed in 0.96 + by &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9667&quot; title=&quot;NullOutputStream removed from Guava 15&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9667&quot;&gt;&lt;del&gt;HBASE-9667&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This JIRA ports the fix to 0.94 branch&lt;/p&gt;</description>
                <environment></environment>
        <key id="12684998">HBASE-10174</key>
            <summary>Back port HBASE-9667 &apos;NullOutputStream removed from Guava 15&apos; to 0.94</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="yuzhihong@gmail.com">Ted Yu</assignee>
                                    <reporter username="yuzhihong@gmail.com">Ted Yu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Dec 2013 17:04:42 +0000</created>
                <updated>Sun, 9 Feb 2014 06:26:40 +0000</updated>
                            <resolved>Sun, 9 Feb 2014 06:26:40 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13849431" author="yuzhihong@gmail.com" created="Mon, 16 Dec 2013 18:24:46 +0000"  >&lt;p&gt;Test suite passed with patch:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1:14:33.284s
[INFO] Finished at: Mon Dec 16 18:23:47 UTC 2013
[INFO] Final Memory: 36M/642M
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13849621" author="lhofhansl" created="Mon, 16 Dec 2013 19:25:39 +0000"  >&lt;p&gt;Nit:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, Counter&amp;gt; counts;
+  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; ConcurrentMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, Counter&amp;gt; counts = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ConcurrentHashMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, Counter&amp;gt;();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Declaration can remain Map.&lt;/p&gt;

&lt;p&gt;When exactly does that become an issue? In the pom we require Guava 11.0.2.&lt;/p&gt;</comment>
                            <comment id="13849641" author="yuzhihong@gmail.com" created="Mon, 16 Dec 2013 19:40:12 +0000"  >&lt;p&gt;Patch v2 addresses comment on using Map.&lt;/p&gt;

&lt;p&gt;The issue would surface if user wants to upgrade to Guava 15 - e.g. if some user code uses Guava 15 and he/she wants to use one release of Guava in deployment.&lt;/p&gt;</comment>
                            <comment id="13849652" author="stack" created="Mon, 16 Dec 2013 19:51:05 +0000"  >&lt;p&gt;So, a client wants to do G15 so we hack on hbase to accommodate?  For sure this is the only issue when we jump G11 to G15?  We&apos;ve tried on h1 and h2 cluster deploys?  No conflicts?&lt;/p&gt;</comment>
                            <comment id="13849661" author="lhofhansl" created="Mon, 16 Dec 2013 20:00:01 +0000"  >&lt;p&gt;It&apos;s certainly better to make HBase work with the various versions of Guava out there. &lt;/p&gt;

&lt;p&gt;I&apos;m still confused, though. This would be an issue if the &lt;b&gt;client&lt;/b&gt; used the Guava classes, right? Surely nobody would need to upgrade Guava on the HBase server (unless one has custom filters or coprocessors that use a newer Guava, in which case I&apos;d say &quot;tough luck&quot;).&lt;/p&gt;

&lt;p&gt;If we use Guava on the client, I&apos;d agree that we not force a client application to a specific version of Guava just due to the way we&apos;re using it. The changed classes are server only?&lt;/p&gt;</comment>
                            <comment id="13849756" author="stack" created="Mon, 16 Dec 2013 21:41:58 +0000"  >&lt;blockquote&gt;&lt;p&gt;It&apos;s certainly better to make HBase work with the various versions of Guava out there.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No problem w/ that.  I just have a problem with adding classes from said library to hbase core to make it happen.&lt;/p&gt;</comment>
                            <comment id="13849823" author="yuzhihong@gmail.com" created="Mon, 16 Dec 2013 22:49:07 +0000"  >&lt;p&gt;Actually LimitInputStream is not used by 0.94 codebase.&lt;/p&gt;

&lt;p&gt;Removed from patch v3.&lt;/p&gt;</comment>
                            <comment id="13849970" author="lhofhansl" created="Tue, 17 Dec 2013 01:16:15 +0000"  >&lt;blockquote&gt;&lt;p&gt;I just have a problem with adding classes from said library to hbase core to make it happen.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yeah, was wondering that too. Ted already removed the additional code.&lt;/p&gt;

&lt;p&gt;My earlier question remains, though, are any of the changed classes used on the client?&lt;/p&gt;</comment>
                            <comment id="13850143" author="lhofhansl" created="Tue, 17 Dec 2013 05:57:57 +0000"  >&lt;p&gt;Let&apos;s do this in 0.94.16 (unless this is urgent, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tedyu@apache.org&quot;&gt;Ted Yu&lt;/a&gt;?)&lt;/p&gt;</comment>
                            <comment id="13850148" author="yuzhihong@gmail.com" created="Tue, 17 Dec 2013 06:05:21 +0000"  >&lt;p&gt;That&apos;s Okay. &lt;/p&gt;</comment>
                            <comment id="13850272" author="deephacks" created="Tue, 17 Dec 2013 09:15:20 +0000"  >&lt;p&gt;The production environment is not modified at all. This happens when doing in container tests in our application and start a HMaster as part of those tests like so (plus some extra stuff):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HMasterCommandLine(HMaster.class).run(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[]{&quot;start});
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This means that tests (client side) will execute in the classloader as the HMaster. Here are the maven dependencies.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.hbase&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;hbase&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;0.94.7&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.hbase&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;hbase&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;0.94.7&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;type&amp;gt;&lt;/span&gt;test-jar&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/type&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;scope&amp;gt;&lt;/span&gt;test&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/scope&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.hadoop&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;hadoop-core&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.1.2&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.hadoop&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;hadoop-test&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.0.0&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;scope&amp;gt;&lt;/span&gt;test&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/scope&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Im not sure if the client or server breaks here. But it looks like its on the server side?&lt;/p&gt;

&lt;p&gt;The thing is that we want HMaster lifecycle (starting, stopping, table creation etc) to be managed  &lt;em&gt;as part of the tests&lt;/em&gt; and not worry to much about it. This way test executions (developer and CI servers) can have their own isolated HBase. &lt;/p&gt;

&lt;p&gt;Im open for any suggestions on how to do this. &lt;/p&gt;</comment>
                            <comment id="13857640" author="stack" created="Fri, 27 Dec 2013 18:58:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=deephacks&quot; class=&quot;user-hover&quot; rel=&quot;deephacks&quot;&gt;Kristoffer Sj&#246;gren&lt;/a&gt;  Mind pasting the exceptions here?  Supply a subclass of HMaster in your tests, one that loads a NullOutputStream to satisfy any references?  You can specify alternate HMaster with configuraiton.  See how we pass in &apos;class&apos; to construct in HMaster main and how in local cluster tests, we pass a Master override.&lt;/p&gt;</comment>
                            <comment id="13860984" author="lhofhansl" created="Fri, 3 Jan 2014 00:05:00 +0000"  >&lt;p&gt;When we change the dependencies of the code, does this have an impact on existing M/R code? (We need org.apache.commons.io.output.NullOutputStream now, which is in a different jar)&lt;br/&gt;
Unless we tested through all the scenarios I think we should not do this in 0.94.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=deephacks&quot; class=&quot;user-hover&quot; rel=&quot;deephacks&quot;&gt;Kristoffer Sj&#246;gren&lt;/a&gt;, so in your case the container has already loaded Guava 15? &lt;/p&gt;</comment>
                            <comment id="13895844" author="lhofhansl" created="Sun, 9 Feb 2014 06:26:40 +0000"  >&lt;p&gt;We aren&apos;t moving on this. Let me close. Interested parties can use the patch here. It is fixed in 0.96 and later.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12618956" name="10174-v2.txt" size="8237" author="yuzhihong@gmail.com" created="Mon, 16 Dec 2013 19:37:28 +0000"/>
                            <attachment id="12618990" name="10174-v3.txt" size="5057" author="yuzhihong@gmail.com" created="Mon, 16 Dec 2013 22:49:07 +0000"/>
                            <attachment id="12618934" name="9667-0.94.patch" size="8248" author="yuzhihong@gmail.com" created="Mon, 16 Dec 2013 17:05:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 16 Dec 2013 19:25:39 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364075</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 44 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1qr6n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364375</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>