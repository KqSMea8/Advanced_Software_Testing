<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:39:56 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6796/HBASE-6796.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6796] Backport HBASE-5547, Don&apos;t delete HFiles in backup mode.</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6796</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5547&quot; title=&quot;Don&amp;#39;t delete HFiles when in &amp;quot;backup mode&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5547&quot;&gt;&lt;del&gt;HBASE-5547&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12607749">HBASE-6796</key>
            <summary>Backport HBASE-5547, Don&apos;t delete HFiles in backup mode.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jesse_yates">Jesse Yates</assignee>
                                    <reporter username="lhofhansl">Lars Hofhansl</reporter>
                        <labels>
                    </labels>
                <created>Sat, 15 Sep 2012 04:22:38 +0000</created>
                <updated>Thu, 2 May 2013 02:30:55 +0000</updated>
                            <resolved>Thu, 1 Nov 2012 20:54:52 +0000</resolved>
                                                    <fixVersion>0.94.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13456307" author="lhofhansl" created="Sat, 15 Sep 2012 04:24:09 +0000"  >&lt;p&gt;Jesse&apos;s patch.&lt;/p&gt;</comment>
                            <comment id="13456308" author="lhofhansl" created="Sat, 15 Sep 2012 04:24:44 +0000"  >&lt;p&gt;If there are concerns about this being backported into 0.94, let&apos;s discuss here.&lt;/p&gt;</comment>
                            <comment id="13456312" author="yuzhihong@gmail.com" created="Sat, 15 Sep 2012 04:42:34 +0000"  >&lt;blockquote&gt;&lt;p&gt;would consider this an safety feature.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I think you meant safe feature.&lt;/p&gt;

&lt;p&gt;I think we should first make sure related unit tests in trunk pass consistently before backporting.&lt;/p&gt;

&lt;p&gt;Allow me to quote Todd:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;I&apos;m more OK with putting minor features in 0.94.x&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I doubt a 147KB patch represents a minor feature.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I think the Apache project should be concerned with pushing the ball forward on new releases and not on backporting features to older branches.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I like the above quote. Looks like 0.96.0 RC0 isn&apos;t that far from us. We should put more energy on 0.96&lt;/p&gt;

&lt;p&gt;Just me two cents.&lt;/p&gt;</comment>
                            <comment id="13456315" author="lhofhansl" created="Sat, 15 Sep 2012 04:49:56 +0000"  >&lt;p&gt;Yeah, but 0.94 is the current release, and no 0.96 release is in sight.&lt;/p&gt;

&lt;p&gt;The size of the patch is not necessarily an indication whether the feature is major or minor.&lt;/p&gt;</comment>
                            <comment id="13456318" author="yuzhihong@gmail.com" created="Sat, 15 Sep 2012 04:57:52 +0000"  >&lt;p&gt;May I ask what would be the indication for judging a feature being major or minor ?&lt;/p&gt;

&lt;p&gt;I went though Jesse&apos;s backport one more time. The patch touches Master, HRegion, Store. Some classes were removed, some abstract classes added.&lt;br/&gt;
I would say this is not a minor feature.&lt;/p&gt;</comment>
                            <comment id="13456320" author="yuzhihong@gmail.com" created="Sat, 15 Sep 2012 05:00:14 +0000"  >&lt;blockquote&gt;&lt;p&gt;and no 0.96 release is in sight&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I tend to disagree with the above assessment.&lt;br/&gt;
Now that Gary has nailed &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5448&quot; title=&quot;Support for dynamic coprocessor endpoints with PB-based RPC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5448&quot;&gt;&lt;del&gt;HBASE-5448&lt;/del&gt;&lt;/a&gt;, I would say the shape of 0.96 is getting clearer in terms of features.&lt;br/&gt;
We just need to tackle the outstanding blockers and critical bugs.&lt;/p&gt;</comment>
                            <comment id="13456321" author="lhofhansl" created="Sat, 15 Sep 2012 05:02:12 +0000"  >&lt;p&gt;Are you -1&apos;ing this, Ted?&lt;/p&gt;</comment>
                            <comment id="13456330" author="stack" created="Sat, 15 Sep 2012 06:56:50 +0000"  >&lt;p&gt;@Lars You fellas need this in 0.94?&lt;/p&gt;</comment>
                            <comment id="13456491" author="lhofhansl" created="Sat, 15 Sep 2012 21:07:24 +0000"  >&lt;p&gt;@Stack: We will have needed it at Salesforce if an admin type person accidentally dropped a table... Unless that happens we will not have needed it. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Seriously though, I think for a database these data retention policies are essential. So the question is: Is the added data safety outweighed by the risk introduced by new code?&lt;/p&gt;

&lt;p&gt;Maybe Salesforce is special here. Our capital is that we never lose data. Period.&lt;br/&gt;
If our needs do not align with the community here, we could obviously maintain this as private patch on top of 0.94. But for obvious reasons I am trying to avoid that.&lt;/p&gt;

&lt;p&gt;@Stack: What&apos;s your thinking about an 0.96 timeline? When do you think it would be stable?&lt;br/&gt;
(I know I am asking for a shot in the dark here. There are 173 open issues against it still, so it&apos;s hard to say?)&lt;/p&gt;

&lt;p&gt;@Ted, I absolutely agree with you, that we need to track down the test failures in trunk before this can considered for backporting.&lt;/p&gt;

&lt;p&gt;@Jesse, can you have a look at &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6439&quot; title=&quot;Ignore .archive directory as a table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6439&quot;&gt;&lt;del&gt;HBASE-6439&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6797&quot; title=&quot;TestHFileCleaner#testHFileCleaning sometimes fails in trunk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6797&quot;&gt;&lt;del&gt;HBASE-6797&lt;/del&gt;&lt;/a&gt;, and &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6707&quot; title=&quot;TEST org.apache.hadoop.hbase.backup.example.TestZooKeeperTableArchiveClient.testMultipleTables flaps&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6707&quot;&gt;&lt;del&gt;HBASE-6707&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="13456548" author="stack" created="Sun, 16 Sep 2012 06:12:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ted_yu&quot; class=&quot;user-hover&quot; rel=&quot;ted_yu&quot;&gt;Ted Yu&lt;/a&gt; Regards &quot;I think we should first make sure related unit tests in trunk pass consistently before backporting.&quot;  Please name them.  Also, stop with the shape-shifting obstruction (What a minor feature is, when 0.96 will RC).  I can see why Lars would want to backport.  I do not know what your motive for obstructing the backport is other than a quote from the Book of Todd (slightly relevant but from another, more general context).  Quit too w/ the telling folks what to do: &quot;....We should put more energy on 0.96.&quot;  Its a volunteer project.  And you are saying this to the 0.94 RM.  -1 with a reason or get out of the way of fellas trying to do a bit of work.&lt;/p&gt;

&lt;p&gt;0.96, I&apos;d like to branch soon.  There ain&apos;t that many blockers left and some I can punt I&apos;d say &amp;#8211; they don&apos;t belong.  I&apos;d like to run it for a while to make sure it basically works... then branch.  Two weeks?  Four weeks?  Then harden the branch to see if could cut an RC... another two to four weeks presuming I don&apos;t find anything crazy?  RC in two months?  SWAG!&lt;/p&gt;

&lt;p&gt;0.96 is the singularity too.&lt;/p&gt;

&lt;p&gt;I took a quick look at the patch.  Its big adding a bunch of stuff but a bunch of the bulk comes from moving files it seems.  Is the archiving off by default?  You fellas had much experience running this patch?&lt;/p&gt;


</comment>
                            <comment id="13456560" author="yuzhihong@gmail.com" created="Sun, 16 Sep 2012 08:54:58 +0000"  >&lt;p&gt;@Stack:&lt;br/&gt;
There are currently 3 open Jiras which are linked to this issue. &lt;br/&gt;
I exchanged several emails with Lars and he agrees to tackle these 3 issues before back porting. &lt;br/&gt;
Since this feature is useful to users, I am in support of back poring. &lt;/p&gt;

&lt;p&gt;Regards&lt;/p&gt;</comment>
                            <comment id="13456585" author="lhofhansl" created="Sun, 16 Sep 2012 15:31:24 +0000"  >&lt;p&gt;Thanks Stack and Ted. Good discussion.&lt;/p&gt;

&lt;p&gt;I&apos;ll commit Salesforce to the following actions:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Address the three issues mentioned above (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6439&quot; title=&quot;Ignore .archive directory as a table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6439&quot;&gt;&lt;del&gt;HBASE-6439&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6797&quot; title=&quot;TestHFileCleaner#testHFileCleaning sometimes fails in trunk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6797&quot;&gt;&lt;del&gt;HBASE-6797&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6707&quot; title=&quot;TEST org.apache.hadoop.hbase.backup.example.TestZooKeeperTableArchiveClient.testMultipleTables flaps&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6707&quot;&gt;&lt;del&gt;HBASE-6707&lt;/del&gt;&lt;/a&gt;)&lt;/li&gt;
	&lt;li&gt;Run with this patch on our test cluster and poke some load at it, delete some large tables, etc. (so that it leads to lots of deleted HFiles)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13456636" author="jesse_yates" created="Sun, 16 Sep 2012 19:16:24 +0000"  >&lt;blockquote&gt;&lt;p&gt;Address the three issues mentioned above (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6439&quot; title=&quot;Ignore .archive directory as a table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6439&quot;&gt;&lt;del&gt;HBASE-6439&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6797&quot; title=&quot;TestHFileCleaner#testHFileCleaning sometimes fails in trunk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6797&quot;&gt;&lt;del&gt;HBASE-6797&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6707&quot; title=&quot;TEST org.apache.hadoop.hbase.backup.example.TestZooKeeperTableArchiveClient.testMultipleTables flaps&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6707&quot;&gt;&lt;del&gt;HBASE-6707&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;&lt;/blockquote&gt;

&lt;ul&gt;
	&lt;li&gt;There is a patch for 6707 already, just need a committer to go take a look.&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6439&quot; title=&quot;Ignore .archive directory as a table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6439&quot;&gt;&lt;del&gt;HBASE-6439&lt;/del&gt;&lt;/a&gt; is really more of a nice to have - it just prints an warning message occasionally and not needed for correctness. I don&apos;t feel its necessary before a backport, but if people are vehement on this, I&apos;ll get behind it too&lt;/li&gt;
&lt;/ul&gt;


&lt;blockquote&gt;&lt;p&gt;Run with this patch on our test cluster and poke some load at it, delete some large tables, etc. (so that it leads to lots of deleted HFiles)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Definitely +1 on this. Probably end up with some good backup verification tools from this too.&lt;/p&gt;</comment>
                            <comment id="13456693" author="stack" created="Sun, 16 Sep 2012 22:20:13 +0000"  >&lt;p&gt;I&apos;d be fine w/ your committing this after running it a while internally just to make sure it basically works.&lt;/p&gt;</comment>
                            <comment id="13467378" author="lhofhansl" created="Tue, 2 Oct 2012 01:01:22 +0000"  >&lt;p&gt;I ran this on our cluster, created a table with 1bn rows, dropped the table, and checked that the HFile archiving does not fall over (either during the creation or dropping the table afterwards).&lt;/p&gt;</comment>
                            <comment id="13467438" author="stack" created="Tue, 2 Oct 2012 03:27:20 +0000"  >&lt;p&gt;+1 on commit then&lt;/p&gt;</comment>
                            <comment id="13467456" author="yuzhihong@gmail.com" created="Tue, 2 Oct 2012 03:55:55 +0000"  >&lt;p&gt;There&apos;re 3 related JIRAs open at this point which may have pending changes in code code.&lt;/p&gt;

&lt;p&gt;FYI&lt;/p&gt;</comment>
                            <comment id="13467462" author="lhofhansl" created="Tue, 2 Oct 2012 04:02:41 +0000"  >&lt;p&gt;Yes, Ted, we will fix them before this gets committed.&lt;br/&gt;
These are all test fixes as far as I can tell.&lt;/p&gt;</comment>
                            <comment id="13484348" author="jesse_yates" created="Thu, 25 Oct 2012 18:24:32 +0000"  >&lt;p&gt;Attaching patch for backport. Its doesn&apos;t include any of the backup.examples classes (e.g. ZooKeeperTableArchiveClient and friends) since that is really not all the important and has been a notoriously flaky test.&lt;/p&gt;

&lt;p&gt;Includes:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Port of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6797&quot; title=&quot;TestHFileCleaner#testHFileCleaning sometimes fails in trunk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6797&quot;&gt;&lt;del&gt;HBASE-6797&lt;/del&gt;&lt;/a&gt; - TestHFileCleaner fails
	&lt;ul&gt;
		&lt;li&gt;set file mod times rather than sleeping when testing TTL&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Port of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6439&quot; title=&quot;Ignore .archive directory as a table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6439&quot;&gt;&lt;del&gt;HBASE-6439&lt;/del&gt;&lt;/a&gt;- ignore .archive as TL directory&lt;/li&gt;
	&lt;li&gt;Slight cleanup of testhfilecleaner
	&lt;ul&gt;
		&lt;li&gt;Makes sure the file to save falls wthin the TTL&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Applying &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6949&quot; title=&quot;Automatically delete empty directories in CleanerChore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6949&quot;&gt;&lt;del&gt;HBASE-6949&lt;/del&gt;&lt;/a&gt;: Automatically remove directories via CleanerChore.
	&lt;ul&gt;
		&lt;li&gt;Had to add in local StoppableImplementation.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13485695" author="jesse_yates" created="Sun, 28 Oct 2012 19:12:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt; what do you think, wanna pull this into 0.94.3?&lt;/p&gt;</comment>
                            <comment id="13488468" author="lhofhansl" created="Thu, 1 Nov 2012 05:06:00 +0000"  >&lt;p&gt;I am going to commit tomorrow unless I hear objections.&lt;/p&gt;</comment>
                            <comment id="13488917" author="jesse_yates" created="Thu, 1 Nov 2012 18:44:29 +0000"  >&lt;p&gt;Updating patch to include fix from &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7082&quot; title=&quot;TestHFileCleaner#testHFileCleaning fails due to cleaner is reset&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7082&quot;&gt;&lt;del&gt;HBASE-7082&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13488929" author="lhofhansl" created="Thu, 1 Nov 2012 18:56:21 +0000"  >&lt;p&gt;Wanna do it this way, or should I rather commit &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7082&quot; title=&quot;TestHFileCleaner#testHFileCleaning fails due to cleaner is reset&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7082&quot;&gt;&lt;del&gt;HBASE-7082&lt;/del&gt;&lt;/a&gt; to 0.94? I&apos;m fine either way.&lt;/p&gt;</comment>
                            <comment id="13488931" author="lhofhansl" created="Thu, 1 Nov 2012 18:56:52 +0000"  >&lt;p&gt;Oh I see, you did that with all the related changes. Fine then.&lt;/p&gt;</comment>
                            <comment id="13488933" author="jesse_yates" created="Thu, 1 Nov 2012 18:59:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt; seemed like it would be less work for you this way.&lt;/p&gt;</comment>
                            <comment id="13488936" author="lhofhansl" created="Thu, 1 Nov 2012 19:02:08 +0000"  >&lt;p&gt;Hmm... Patch does not apply cleanly to 0.94&lt;/p&gt;</comment>
                            <comment id="13488939" author="jesse_yates" created="Thu, 1 Nov 2012 19:04:30 +0000"  >&lt;p&gt;hmmm, I&apos;ll try a rebase and see.&lt;/p&gt;</comment>
                            <comment id="13488965" author="jesse_yates" created="Thu, 1 Nov 2012 19:32:36 +0000"  >&lt;p&gt;Attaching patch on top of current 0.94 branch. Ran &quot;mvn clean test -Dtest=TestLogsCleaner,TestHFileArchiving,TesstCatalogJanitor,TestCleanerChore,TestHFileCleaner,TestFSTableDescriptors,TestHFileArchiveUtil -P localTests&quot; with no test failures.&lt;/p&gt;</comment>
                            <comment id="13488993" author="lhofhansl" created="Thu, 1 Nov 2012 20:16:44 +0000"  >&lt;p&gt;I&apos;m actually getting a failure with TestFSTableDescriptors &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
testCreateAndUpdate(org.apache.hadoop.hbase.util.TestFSTableDescriptors)  Time elapsed: 0.025 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.lang.AssertionError: statuses.length=5
        at org.junit.Assert.fail(Assert.java:93)
        at org.junit.Assert.assertTrue(Assert.java:43)
        at org.apache.hadoop.hbase.util.TestFSTableDescriptors.testCreateAndUpdate(TestFSTableDescriptors.java:63)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13489003" author="lhofhansl" created="Thu, 1 Nov 2012 20:30:34 +0000"  >&lt;p&gt;And of course it only happens sometimes and never in the debugger. Sigh.&lt;/p&gt;</comment>
                            <comment id="13489010" author="jesse_yates" created="Thu, 1 Nov 2012 20:37:41 +0000"  >&lt;p&gt;Hmm, I added &quot;testReadingArchiveDirectoryFromFS()&quot;. And that method literally has nothing to do with the added code. Looks like a flapper already in the codebase. &lt;/p&gt;

&lt;p&gt;On a related note, it looks like Jenkins isn&apos;t running all the tests for 0.94. See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/563/testReport/org.apache.hadoop.hbase.util/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/563/testReport/org.apache.hadoop.hbase.util/&lt;/a&gt; which should have run TestFSTableDescriptors...but shows neither hide nor hair of it (or many other expected tests).&lt;/p&gt;</comment>
                            <comment id="13489011" author="lhofhansl" created="Thu, 1 Nov 2012 20:40:26 +0000"  >&lt;p&gt;Test works if the datadir is cleaned first (either in an @After method or inline in this one test.)&lt;br/&gt;
I&apos;ll just paste that fix on this patch and commit.&lt;/p&gt;</comment>
                            <comment id="13489012" author="lhofhansl" created="Thu, 1 Nov 2012 20:41:28 +0000"  >&lt;p&gt;Or better even, use a better testdir for that test.&lt;/p&gt;</comment>
                            <comment id="13489017" author="lhofhansl" created="Thu, 1 Nov 2012 20:47:14 +0000"  >&lt;p&gt;One last question: Should TestHFileArchiving be a LargeTest? It runs for 122s on my machine.&lt;/p&gt;</comment>
                            <comment id="13489019" author="lhofhansl" created="Thu, 1 Nov 2012 20:52:49 +0000"  >&lt;p&gt;According to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4737&quot; title=&quot;Categorize the tests into small/medium/large; allow small tests to be run in parallel within a single JVM&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4737&quot;&gt;&lt;del&gt;HBASE-4737&lt;/del&gt;&lt;/a&gt; Medium should be &amp;lt; 45s. So I&apos;ll make it a LargeTest and then commit... Finally.&lt;/p&gt;</comment>
                            <comment id="13489021" author="lhofhansl" created="Thu, 1 Nov 2012 20:54:52 +0000"  >&lt;p&gt;Committed to 0.94... Pfeeww.&lt;/p&gt;</comment>
                            <comment id="13489051" author="jesse_yates" created="Thu, 1 Nov 2012 21:33:06 +0000"  >&lt;p&gt;Thanks Lars!&lt;/p&gt;</comment>
                            <comment id="13489094" author="hudson" created="Thu, 1 Nov 2012 22:42:24 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #565 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/565/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/565/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6796&quot; title=&quot;Backport HBASE-5547, Don&amp;#39;t delete HFiles in backup mode.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6796&quot;&gt;&lt;del&gt;HBASE-6796&lt;/del&gt;&lt;/a&gt; Backport &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5547&quot; title=&quot;Don&amp;#39;t delete HFiles when in &amp;quot;backup mode&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5547&quot;&gt;&lt;del&gt;HBASE-5547&lt;/del&gt;&lt;/a&gt;, Don&apos;t delete HFiles in backup mode. (Jesse Yates) (Revision 1404762)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/BaseConfigurable.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/Chore.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/backup&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/backup/HFileArchiver.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/CatalogJanitor.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/LogCleaner.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/LogCleanerDelegate.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/MasterFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/TimeToLiveLogCleaner.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/cleaner&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/cleaner/BaseHFileCleanerDelegate.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/cleaner/BaseLogCleanerDelegate.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/cleaner/CleanerChore.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/cleaner/FileCleanerDelegate.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/cleaner/HFileCleaner.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/cleaner/LogCleaner.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/cleaner/TimeToLiveHFileCleaner.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/cleaner/TimeToLiveLogCleaner.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/Store.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/StoreFile.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLog.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/replication/master/ReplicationLogCleaner.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/util/FSUtils.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/util/HFileArchiveUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/resources/hbase-default.xml&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/backup&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/backup/TestHFileArchiving.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/master/TestCatalogJanitor.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/master/TestLogsCleaner.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/master/cleaner&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/master/cleaner/TestCleanerChore.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/master/cleaner/TestHFileCleaner.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/master/cleaner/TestLogsCleaner.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/regionserver/CheckedArchivingHFileCleaner.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/util/HFileArchiveTestingUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/util/TestFSTableDescriptors.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/util/TestHFileArchiveUtil.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13489105" author="lhofhansl" created="Thu, 1 Nov 2012 22:54:45 +0000"  >&lt;p&gt;That test run didn&apos;t look so good.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jesse_yates&quot; class=&quot;user-hover&quot; rel=&quot;jesse_yates&quot;&gt;Jesse Yates&lt;/a&gt; Mind having a look?&lt;/p&gt;</comment>
                            <comment id="13489221" author="yuzhihong@gmail.com" created="Fri, 2 Nov 2012 03:09:32 +0000"  >&lt;p&gt;I tried to reproduce the test failure in TestHFileCleaner#testHFileCleaning but was not successful.&lt;br/&gt;
I looked at the test output:&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/view/G-L/view/HBase/job/HBase-0.94/566/testReport/org.apache.hadoop.hbase.master.cleaner/TestHFileCleaner/testHFileCleaning/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/view/G-L/view/HBase/job/HBase-0.94/566/testReport/org.apache.hadoop.hbase.master.cleaner/TestHFileCleaner/testHFileCleaning/&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2012-11-02 01:29:55,534 INFO  [pool-1-thread-1] hbase.ResourceChecker(145): before master.cleaner.TestHFileCleaner#testTTLCleaner: 43 threads, 127 file descriptors 0 connections, 
2012-11-02 01:29:55,898 DEBUG [pool-1-thread-1] cleaner.TimeToLiveHFileCleaner(68): Life:108, ttl:100, current:1351819795897, from: 1351819795789
2012-11-02 01:29:55,900 INFO  [pool-1-thread-1] hbase.ResourceChecker(145): after master.cleaner.TestHFileCleaner#testTTLCleaner: 44 threads (was 43), 127 file descriptors (was 127). 0 connections,  -thread leak?- 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We can see that one thread didn&apos;t exit.&lt;/p&gt;

&lt;p&gt;Still, it is not very obvious which thread hung &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13489561" author="zhihyu@ebaysf.com" created="Fri, 2 Nov 2012 17:24:19 +0000"  >&lt;p&gt;It turns out that there is one thread hanging, even on MacBook, after TestHFileCleaner#testTTLCleaner finishes.&lt;br/&gt;
With the help of patch from &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7086&quot; title=&quot;Enhance ResourceChecker to log stack trace for potentially hanging threads&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7086&quot;&gt;&lt;del&gt;HBASE-7086&lt;/del&gt;&lt;/a&gt;, I saw:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2012-11-02 10:14:05,485 INFO  [main] hbase.ResourceChecker(157): after master.cleaner.TestHFileCleaner#testTTLCleaner: 44 threads (was 43), 145 file descriptors (was 145). 0 connections,  -thread leak?-

2012-11-02 10:14:05,485 INFO  [main] hbase.ResourceChecker(179): after master.cleaner.TestHFileCleaner#testTTLCleaner: potentially hanging thread

2012-11-02 10:14:05,486 INFO  [main] hbase.ResourceChecker(185):  java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(Native Method)

2012-11-02 10:14:05,487 INFO  [main] hbase.ResourceChecker(185):  org.apache.hadoop.hdfs.DFSClient$LeaseChecker.run(DFSClient.java:1379)

2012-11-02 10:14:05,487 INFO  [main] hbase.ResourceChecker(185):  java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:680)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13489914" author="lhofhansl" created="Sat, 3 Nov 2012 03:37:19 +0000"  >&lt;p&gt;TestHFileCleaner.testHFileCleaning has been failing in every build since the checkin.&lt;br/&gt;
We have three options:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;fix the test&lt;/li&gt;
	&lt;li&gt;disable the test&lt;/li&gt;
	&lt;li&gt;revert the change&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;I&apos;d be reluctant to do #3. At the same I cannot release the next RC with a consistently failing test.&lt;/p&gt;</comment>
                            <comment id="13489918" author="lhofhansl" created="Sat, 3 Nov 2012 03:47:01 +0000"  >&lt;p&gt;Why is that test marked with a 2000ms timeout? Seems a bit short, it&apos;s doing a bunch of file manipulation. I am going to remove that annotation in favor of the default as an addendum.&lt;/p&gt;</comment>
                            <comment id="13489919" author="lhofhansl" created="Sat, 3 Nov 2012 03:51:28 +0000"  >&lt;p&gt;In trunk there no 2000ms annotation on that test.&lt;/p&gt;</comment>
                            <comment id="13489921" author="zhihyu@ebaysf.com" created="Sat, 3 Nov 2012 04:06:23 +0000"  >&lt;p&gt;Good finding, Lars.&lt;br/&gt;
I guess it was a typo (missing a 0).&lt;/p&gt;

&lt;p&gt;From &lt;a href=&quot;https://builds.apache.org/view/G-L/view/HBase/job/HBase-0.94/567/testReport/org.apache.hadoop.hbase.master.cleaner/TestHFileCleaner/testHFileCleaning/:&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/view/G-L/view/HBase/job/HBase-0.94/567/testReport/org.apache.hadoop.hbase.master.cleaner/TestHFileCleaner/testHFileCleaning/:&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2012-11-02 20:56:40,589 INFO  [pool-1-thread-1] hbase.ResourceChecker(157): after master.cleaner.TestHFileCleaner#testHFileCleaning: 45 threads (was 44), 127 file descriptors (was 127). 0 connections,  -thread leak?- 
2012-11-02 20:56:40,590 INFO  [pool-1-thread-1] hbase.ResourceChecker(180): after master.cleaner.TestHFileCleaner#testHFileCleaning: potentially hanging thread
2012-11-02 20:56:40,591 INFO  [pool-1-thread-1] hbase.ResourceChecker(186): 	java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(Native Method)
2012-11-02 20:56:40,591 INFO  [pool-1-thread-1] hbase.ResourceChecker(186): 	java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.java:485)
2012-11-02 20:56:40,591 INFO  [pool-1-thread-1] hbase.ResourceChecker(186): 	org.apache.hadoop.ipc.Client.call(Client.java:1056)
2012-11-02 20:56:40,591 INFO  [pool-1-thread-1] hbase.ResourceChecker(186): 	org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:225)
2012-11-02 20:56:40,591 INFO  [pool-1-thread-1] hbase.ResourceChecker(186): 	$Proxy9.create(Unknown Source)
2012-11-02 20:56:40,591 INFO  [pool-1-thread-1] hbase.ResourceChecker(186): 	sun.reflect.GeneratedMethodAccessor8.invoke(Unknown Source)
2012-11-02 20:56:40,591 INFO  [pool-1-thread-1] hbase.ResourceChecker(186): 	sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
2012-11-02 20:56:40,591 INFO  [pool-1-thread-1] hbase.ResourceChecker(186): 	java.lang.reflect.Method.invoke(Method.java:597)
2012-11-02 20:56:40,592 INFO  [pool-1-thread-1] hbase.ResourceChecker(186): 	org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:82)
2012-11-02 20:56:40,592 INFO  [pool-1-thread-1] hbase.ResourceChecker(186): 	org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:59)
2012-11-02 20:56:40,592 INFO  [pool-1-thread-1] hbase.ResourceChecker(186): 	$Proxy9.create(Unknown Source)
2012-11-02 20:56:40,592 INFO  [pool-1-thread-1] hbase.ResourceChecker(186): 	org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.&amp;lt;init&amp;gt;(DFSClient.java:3248)
2012-11-02 20:56:40,592 INFO  [pool-1-thread-1] hbase.ResourceChecker(186): 	org.apache.hadoop.hdfs.DFSClient.create(DFSClient.java:713)
2012-11-02 20:56:40,592 INFO  [pool-1-thread-1] hbase.ResourceChecker(186): 	org.apache.hadoop.hdfs.DistributedFileSystem.create(DistributedFileSystem.java:182)
2012-11-02 20:56:40,592 INFO  [pool-1-thread-1] hbase.ResourceChecker(186): 	org.apache.hadoop.fs.FileSystem.create(FileSystem.java:555)
2012-11-02 20:56:40,592 INFO  [pool-1-thread-1] hbase.ResourceChecker(186): 	org.apache.hadoop.fs.FileSystem.create(FileSystem.java:536)
2012-11-02 20:56:40,593 INFO  [pool-1-thread-1] hbase.ResourceChecker(186): 	org.apache.hadoop.fs.FileSystem.create(FileSystem.java:498)
2012-11-02 20:56:40,593 INFO  [pool-1-thread-1] hbase.ResourceChecker(186): 	org.apache.hadoop.fs.FileSystem.createNewFile(FileSystem.java:638)
2012-11-02 20:56:40,593 INFO  [pool-1-thread-1] hbase.ResourceChecker(186): 	org.apache.hadoop.hbase.master.cleaner.TestHFileCleaner.testHFileCleaning(TestHFileCleaner.java:119)
2012-11-02 20:56:40,593 INFO  [pool-1-thread-1] hbase.ResourceChecker(186): 	sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
2012-11-02 20:56:40,593 INFO  [pool-1-thread-1] hbase.ResourceChecker(186): 	sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
2012-11-02 20:56:40,593 INFO  [pool-1-thread-1] hbase.ResourceChecker(186): 	sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
2012-11-02 20:56:40,593 INFO  [pool-1-thread-1] hbase.ResourceChecker(186): 	java.lang.reflect.Method.invoke(Method.java:597)
2012-11-02 20:56:40,593 INFO  [pool-1-thread-1] hbase.ResourceChecker(186): 	org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
2012-11-02 20:56:40,594 INFO  [pool-1-thread-1] hbase.ResourceChecker(186): 	org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
2012-11-02 20:56:40,594 INFO  [pool-1-thread-1] hbase.ResourceChecker(186): 	org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
2012-11-02 20:56:40,594 INFO  [pool-1-thread-1] hbase.ResourceChecker(186): 	org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
2012-11-02 20:56:40,594 INFO  [pool-1-thread-1] hbase.ResourceChecker(186): 	org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:62)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13489932" author="hudson" created="Sat, 3 Nov 2012 05:21:10 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #568 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/568/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/568/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6796&quot; title=&quot;Backport HBASE-5547, Don&amp;#39;t delete HFiles in backup mode.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6796&quot;&gt;&lt;del&gt;HBASE-6796&lt;/del&gt;&lt;/a&gt; ADDENDUM, remove spurious time limit from testHFileCleaning (Revision 1405275)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/master/cleaner/TestHFileCleaner.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13489936" author="lhofhansl" created="Sat, 3 Nov 2012 06:00:31 +0000"  >&lt;p&gt;Test didn&apos;t fail in latest build.&lt;br/&gt;
If a test is killed by a timeout, does the resource checker do the right thing?&lt;/p&gt;</comment>
                            <comment id="13489995" author="yuzhihong@gmail.com" created="Sat, 3 Nov 2012 11:35:03 +0000"  >&lt;p&gt;Resource checker would report thread(s) which aren&apos;t terminated after the timeout. &lt;/p&gt;</comment>
                            <comment id="13490398" author="hudson" created="Mon, 5 Nov 2012 01:35:36 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security-on-Hadoop-23 #9 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/9/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/9/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6796&quot; title=&quot;Backport HBASE-5547, Don&amp;#39;t delete HFiles in backup mode.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6796&quot;&gt;&lt;del&gt;HBASE-6796&lt;/del&gt;&lt;/a&gt; ADDENDUM, remove spurious time limit from testHFileCleaning (Revision 1405275)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6796&quot; title=&quot;Backport HBASE-5547, Don&amp;#39;t delete HFiles in backup mode.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6796&quot;&gt;&lt;del&gt;HBASE-6796&lt;/del&gt;&lt;/a&gt; Backport &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5547&quot; title=&quot;Don&amp;#39;t delete HFiles when in &amp;quot;backup mode&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5547&quot;&gt;&lt;del&gt;HBASE-5547&lt;/del&gt;&lt;/a&gt;, Don&apos;t delete HFiles in backup mode. (Jesse Yates) (Revision 1404762)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/master/cleaner/TestHFileCleaner.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/BaseConfigurable.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/Chore.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/backup&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/backup/HFileArchiver.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/CatalogJanitor.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/LogCleaner.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/LogCleanerDelegate.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/MasterFileSystem.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/TimeToLiveLogCleaner.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/cleaner&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/cleaner/BaseHFileCleanerDelegate.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/cleaner/BaseLogCleanerDelegate.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/cleaner/CleanerChore.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/cleaner/FileCleanerDelegate.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/cleaner/HFileCleaner.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/cleaner/LogCleaner.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/cleaner/TimeToLiveHFileCleaner.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/cleaner/TimeToLiveLogCleaner.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/Store.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/StoreFile.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLog.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/replication/master/ReplicationLogCleaner.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/util/FSUtils.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/util/HFileArchiveUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/resources/hbase-default.xml&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/backup&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/backup/TestHFileArchiving.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/master/TestCatalogJanitor.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/master/TestLogsCleaner.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/master/cleaner&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/master/cleaner/TestCleanerChore.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/master/cleaner/TestHFileCleaner.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/master/cleaner/TestLogsCleaner.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/regionserver/CheckedArchivingHFileCleaner.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/util/HFileArchiveTestingUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/util/TestFSTableDescriptors.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/util/TestHFileArchiveUtil.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13490461" author="jesse_yates" created="Mon, 5 Nov 2012 05:28:01 +0000"  >&lt;p&gt;Sorry I&apos;ve been AWOL on this - caught up in work/life. I think Lars&apos; change should handle the problem, though file manipulation/creation &lt;em&gt;should&lt;/em&gt; be a fast operation - guess not up on Jenkins &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Looks like the test has been passing since though. thanks for the follow up Lars.&lt;/p&gt;</comment>
                            <comment id="13490463" author="jesse_yates" created="Mon, 5 Nov 2012 05:28:22 +0000"  >&lt;p&gt;and Ted &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12607918">HBASE-6801</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12607767">HBASE-6797</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12605795">HBASE-6707</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12599763">HBASE-6439</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12545774">HBASE-5547</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12614274">HBASE-7082</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12610372">HBASE-6949</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12545263" name="hbase-5547-0.94-backport-v0.patch" size="150428" author="lhofhansl" created="Sat, 15 Sep 2012 04:24:09 +0000"/>
                            <attachment id="12550827" name="hbase-6796-v0.patch" size="164547" author="jesse_yates" created="Thu, 25 Oct 2012 18:24:32 +0000"/>
                            <attachment id="12551741" name="hbase-6796-v1.patch" size="164677" author="jesse_yates" created="Thu, 1 Nov 2012 18:44:29 +0000"/>
                            <attachment id="12551750" name="hbase-6796-v2.patch" size="164636" author="jesse_yates" created="Thu, 1 Nov 2012 19:32:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 15 Sep 2012 04:42:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>240718</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 6 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0152v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4592</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>