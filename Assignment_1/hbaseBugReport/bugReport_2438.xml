<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:01:55 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-2438/HBASE-2438.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-2438] Addition of a Column Pagination Filter</title>
                <link>https://issues.apache.org/jira/browse/HBASE-2438</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Client applications may need to do pagination, depending on the number of columns returned, it may be more efficient to perform pagination algorithms at the database level (similar to SQL&apos;s LIMIT and OFFSET).  This will be an additional filter taking two parameters:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;page&lt;/li&gt;
	&lt;li&gt;pageSize&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;For every row, that gets returned, only a subset of columns are returned based on page and pageSize&lt;/p&gt;

&lt;p&gt;If the page / pageSize column goes over the limits, then no results are returned from the filter.&lt;/p&gt;

&lt;p&gt;A practical example for using a filter like this may be for folks doing Row-based indexing with Hbase.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12461959">HBASE-2438</key>
            <summary>Addition of a Column Pagination Filter</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kida78">Paul Kist</assignee>
                                    <reporter username="kida78">Paul Kist</reporter>
                        <labels>
                    </labels>
                <created>Tue, 13 Apr 2010 15:42:30 +0000</created>
                <updated>Fri, 20 Nov 2015 12:43:57 +0000</updated>
                            <resolved>Tue, 20 Apr 2010 21:30:23 +0000</resolved>
                                    <version>0.20.3</version>
                                    <fixVersion>0.90.0</fixVersion>
                                    <component>Filters</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                    <timeoriginalestimate seconds="28800">8h</timeoriginalestimate>
                            <timeestimate seconds="28800">8h</timeestimate>
                                        <comments>
                            <comment id="12856457" author="apurtell" created="Tue, 13 Apr 2010 16:04:45 +0000"  >&lt;p&gt;Paul, are you planning to provide a patch for this issue?&lt;/p&gt;</comment>
                            <comment id="12856461" author="kida78" created="Tue, 13 Apr 2010 16:07:39 +0000"  >&lt;p&gt;Andrew,   yes, I&apos;m working on a patch for this issue.   Just wanted to present the idea to the community before I submitted it.  It&apos;s almost finished.&lt;br/&gt;
I&apos;ve expanded the TestFilter unit tests to test this new Filter as well.&lt;/p&gt;</comment>
                            <comment id="12856473" author="streamy" created="Tue, 13 Apr 2010 16:24:45 +0000"  >&lt;p&gt;@Paul, this would be for # of columns in a row, not # of rows?&lt;/p&gt;</comment>
                            <comment id="12856480" author="kida78" created="Tue, 13 Apr 2010 16:33:26 +0000"  >&lt;p&gt;Jonathan,&lt;/p&gt;

&lt;p&gt;That is correct.     Column pagination and row pagination need to be handled separately.  I had initially looked at augmenting the PageFilter, however the issue with row pagination at the Filter level is the fact that the Filters run within the context of a single region server, unaware of any other rows that may be returned from other Filters on another region.   That being the case, Row pagination is a different ballgame altogether, so I decided to keep the functionality of this Filter specific to columns.  &lt;/p&gt;</comment>
                            <comment id="12856484" author="gstathis" created="Tue, 13 Apr 2010 16:38:35 +0000"  >&lt;p&gt;Jonathan, this proposed feature works well with &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2426&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-2426&lt;/a&gt;. It does not require it but it makes a lot of sense when used in conjunction. Hope this helps shed some light on what we are up to.&lt;/p&gt;</comment>
                            <comment id="12856493" author="streamy" created="Tue, 13 Apr 2010 16:53:05 +0000"  >&lt;p&gt;Just wanted to clarify.  This all sounds good guys.  You&apos;re right, we currently don&apos;t fully support stateful scanners as they cannot ride across regions.  This has been explored but not yet implemented.&lt;/p&gt;</comment>
                            <comment id="12856610" author="kida78" created="Tue, 13 Apr 2010 20:46:59 +0000"  >&lt;p&gt;Patch containing the new ColumnPaginationFilter, as well as updates to the unit test.&lt;/p&gt;</comment>
                            <comment id="12856619" author="streamy" created="Tue, 13 Apr 2010 21:15:31 +0000"  >&lt;p&gt;Patch looks pretty good.&lt;/p&gt;

&lt;p&gt;One problem I see is that when you deserialize you set page and pageSize, but the offset (which is used) is not calculated like it is in the non-empty constructor. So looks like this will break once serialized (if I read the code correctly). Is there a way we can also have a unit test which would show that?&lt;/p&gt;

&lt;p&gt;Also, in the main filter call:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+ public ReturnCode filterKeyValue(KeyValue v)
+ {
+ ReturnCode code = (count &amp;lt; offset || count &amp;gt;= offset + pageSize) ? ReturnCode.SKIP : ReturnCode.INCLUDE;
+ count++;
+ return code;
+ }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This code is a bit hard to read. Also, once you are passed the offset + pageSize, shouldn&apos;t you be sending the ReturnCode.NEXT_ROW since you don&apos;t want to include anything more in the current row? Count isn&apos;t used once you get passed the offset either so maybe this could be rewritten more like:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+ public ReturnCode filterKeyValue(KeyValue v)
+ {
+ if(count &amp;gt;= offset + pageSize) {
+ return ReturnCode.NEXT_ROW;
+ }
+ ReturnCode code = count &amp;lt; offset ? ReturnCode.SKIP : ReturnCode.INCLUDE;
+ count++;
+ return code;
+ }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Good stuff guys.&lt;/p&gt;</comment>
                            <comment id="12856622" author="streamy" created="Tue, 13 Apr 2010 21:18:35 +0000"  >&lt;p&gt;Added Paul Kist and George Stathis as contributors.  Assigning to Paul.&lt;/p&gt;</comment>
                            <comment id="12856630" author="kida78" created="Tue, 13 Apr 2010 21:32:13 +0000"  >&lt;p&gt;Jonathan,&lt;/p&gt;

&lt;p&gt;Thanks for the performance tip, I&apos;ll definitely include that.  &lt;br/&gt;
Regarding the readFields and write functions, so you&apos;re saying that in readFields, i&apos;ll have to also calculate offset (because that&apos;s what&apos;s being called by the serializer which calls the empty constructor)?&lt;/p&gt;

&lt;p&gt;Could you point me to an example of how I can test the serialization of a filter? Thank you&lt;/p&gt;</comment>
                            <comment id="12856633" author="gstathis" created="Tue, 13 Apr 2010 21:38:49 +0000"  >&lt;p&gt;Got it: TestSingleColumnValueFilter.testSerialization(). We&apos;ll do something like that. The ReturnCode.NEXT_ROW tip was great.&lt;/p&gt;</comment>
                            <comment id="12856665" author="streamy" created="Tue, 13 Apr 2010 22:31:27 +0000"  >&lt;p&gt;That&apos;s right.  When the deserialization happens, it calls the empty constructor and then readFields.  This will leave offset as 0, so you need to calculate offset in the readFields method.&lt;/p&gt;</comment>
                            <comment id="12856722" author="streamy" created="Wed, 14 Apr 2010 01:37:07 +0000"  >&lt;p&gt;I would actually argue for switching the API to limit, offset rather than page, perPage.  The latter is a subset of the former as far as supported behavior and some people may have use cases for the use of offset directly rather than fixed page sizes.&lt;/p&gt;</comment>
                            <comment id="12856949" author="kida78" created="Wed, 14 Apr 2010 16:23:04 +0000"  >&lt;p&gt;Jonathan,   I made the suggested changes, as it would allow for a more generic use of the Filter.  Also, I added a unit test &quot;TestColumnPaginationFilter&quot; which basically tests the serialization and performs a simple filter example (since most of the filter testing is in the TestFilters unit test class.  Will post the patch&lt;/p&gt;</comment>
                            <comment id="12856950" author="kida78" created="Wed, 14 Apr 2010 16:32:43 +0000"  >&lt;p&gt;Updated patch based on user comments discussion.  Ready for code review&lt;/p&gt;</comment>
                            <comment id="12856977" author="streamy" created="Wed, 14 Apr 2010 17:35:46 +0000"  >&lt;p&gt;Patch looks good, just some nitpicks.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Take out cleanup changes made to TestSingleColumnValueFilter (your patch otherwise does not touch this file so doesn&apos;t belong in this patch)&lt;/li&gt;
	&lt;li&gt;TestColumnPaginationFilter has a copyright header from your company.  This should be removed and replaced with the apache license.&lt;/li&gt;
	&lt;li&gt;ColumnPaginationFilter should be given an apache copyright header as well.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Otherwise, this looks good.  Haven&apos;t run unit tests yet but will try to get to that tonight.&lt;/p&gt;

&lt;p&gt;Good stuff Paul.&lt;/p&gt;</comment>
                            <comment id="12857122" author="kida78" created="Wed, 14 Apr 2010 22:19:11 +0000"  >&lt;p&gt;V.3 Update&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Correct License Info&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12857134" author="streamy" created="Wed, 14 Apr 2010 22:50:43 +0000"  >&lt;p&gt;Looks good Paul!&lt;/p&gt;</comment>
                            <comment id="12857323" author="kida78" created="Thu, 15 Apr 2010 14:03:41 +0000"  >&lt;p&gt;Thanks Jonathan,  what&apos;s the next step?   Let me know when we&apos;re set,  and I can click the &quot;Submit Patch&quot; link.&lt;/p&gt;</comment>
                            <comment id="12857483" author="streamy" created="Thu, 15 Apr 2010 18:52:53 +0000"  >&lt;p&gt;Just click Submit Patch.  That just flags it so a committer knows it&apos;s ready for commit.&lt;/p&gt;</comment>
                            <comment id="12857831" author="kida78" created="Fri, 16 Apr 2010 14:31:07 +0000"  >&lt;p&gt;The correct patch is the v3 attachment.&lt;/p&gt;</comment>
                            <comment id="12859070" author="stack" created="Tue, 20 Apr 2010 21:30:22 +0000"  >&lt;p&gt;Committed branch and trunk.  Thanks for the patch Paul.&lt;/p&gt;</comment>
                            <comment id="12866872" author="stack" created="Wed, 12 May 2010 23:52:50 +0000"  >&lt;p&gt;Marking these as fixed against 0.21.0 rather than against 0.20.5.&lt;/p&gt;</comment>
                            <comment id="15017666" author="lars_francke" created="Fri, 20 Nov 2015 12:43:57 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12441747" name="ASF.LICENSE.NOT.GRANTED--hbase-2438-0.20.3-v2.patch" size="10798" author="kida78" created="Wed, 14 Apr 2010 16:32:42 +0000"/>
                            <attachment id="12441774" name="ASF.LICENSE.NOT.GRANTED--hbase-2438-0.20.3-v3.patch" size="11138" author="kida78" created="Wed, 14 Apr 2010 22:19:11 +0000"/>
                            <attachment id="12441650" name="ASF.LICENSE.NOT.GRANTED--hbase-2438-0.20.3.patch" size="6409" author="kida78" created="Tue, 13 Apr 2010 20:46:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 13 Apr 2010 16:04:45 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32587</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hhpb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>100130</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&amp;nbsp;* A filter, based on the ColumnCountGetFilter, takes two arguments: limit and offset.&lt;br/&gt;
&amp;nbsp;* This filter can be used for row-based indexing, where references to other tables are stored across many columns, in order to efficient lookups and paginated results for end users.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>pagination, &amp;quot;row-based indexing&amp;quot;, filter</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>