<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:36:18 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6386/HBASE-6386.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6386] Audit log messages do not include column family / qualifier information consistently</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6386</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The code related to this issue is in AccessController.java:permissionGranted().&lt;/p&gt;

&lt;p&gt;When creating audit logs, that method will do one of the following:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;grant access, create audit log with table name only&lt;/li&gt;
	&lt;li&gt;deny access because of table permission, create audit log with table name only&lt;/li&gt;
	&lt;li&gt;deny access because of column family / qualifier permission, create audit log with specific family / qualifier&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;So, in the case where more than one column family and/or qualifier are in the same request, there will be a loss of information. Even in the case where only one column family and/or qualifier is involved, information may be lost.&lt;/p&gt;

&lt;p&gt;It would be better if this behavior consistently included all the information in the request; regardless of access being granted or denied, and regardless which permission caused the denial, the column family and qualifier info should be part of the audit log message.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12598640">HBASE-6386</key>
            <summary>Audit log messages do not include column family / qualifier information consistently</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mbertozzi">Matteo Bertozzi</assignee>
                                    <reporter username="vanzin">Marcelo Vanzin</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 Jul 2012 22:59:23 +0000</created>
                <updated>Mon, 23 Sep 2013 18:30:44 +0000</updated>
                            <resolved>Wed, 9 Jan 2013 05:47:17 +0000</resolved>
                                    <version>0.95.2</version>
                                    <fixVersion>0.95.0</fixVersion>
                                    <component>security</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="13418844" author="vanzin" created="Fri, 20 Jul 2012 00:57:47 +0000"  >&lt;p&gt;Other methods also seem to suffer from similar issues; for example, preIncrementColumnValue does this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    requirePermission(TablePermission.Action.WRITE, c.getEnvironment(),
        Arrays.asList(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[][]{family}));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Even though there is a &quot;qualifier&quot; argument; so the qualifier information never makes it to the audit log. It also kinda sucks that there&apos;s no standard &quot;family map&quot; type for all these operations, so to come up with one common type for auditing, you&apos;d have to make copies of that data (or use ugly wrapper objects).&lt;/p&gt;</comment>
                            <comment id="13422492" author="vanzin" created="Wed, 25 Jul 2012 18:42:31 +0000"  >&lt;p&gt;Consistently include column family / qualifier info in audit logs.&lt;/p&gt;

&lt;p&gt;This patch makes the AccessController consistently add information about column families and qualifiers into audit logs. Since there may be more than one cf / qualifier involved, the format of the audit log message changed slightly (coupled with some pretty ugly code to create the message).&lt;/p&gt;

&lt;p&gt;TestAccessController passes; also tested on live HBase 0.92 (with a backported version of the patch).&lt;/p&gt;</comment>
                            <comment id="13422543" author="hadoopqa" created="Wed, 25 Jul 2012 19:44:12 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12537874/hbase-6386-v1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12537874/hbase-6386-v1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The applied patch generated 5 javac compiler warnings (more than the trunk&apos;s current 4 warnings).&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 13 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.master.TestAssignmentManager&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestServerCustomProtocol&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2436//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2436//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2436//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2436//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2436//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2436//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2436//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2436//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2436//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2436//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2436//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2436//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2436//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2436//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13422552" author="vanzin" created="Wed, 25 Jul 2012 19:55:32 +0000"  >&lt;p&gt;Tests above are passing for me locally.&lt;/p&gt;</comment>
                            <comment id="13422601" author="stack" created="Wed, 25 Jul 2012 20:55:23 +0000"  >&lt;p&gt;The AccessController class is missing access, the InterfaceAudience.* annotations.  Does this mean it public?  Do we need to bring people along w/ the API changes?&lt;/p&gt;

&lt;p&gt;Otherwise +1 on patch.&lt;/p&gt;

&lt;p&gt;Should we surface another JIRA Marcelo where we fix the &apos;suck&apos;s issue of not having standard way of doing family maps (the point you raise above)?&lt;/p&gt;</comment>
                            <comment id="13422610" author="vanzin" created="Wed, 25 Jul 2012 21:02:38 +0000"  >&lt;p&gt;stack: I&apos;m not changing any public API in AccessController, as far as I remember. So my changes by themselves have no effect on its &quot;InterfaceAudience&quot; status. That being said, since it&apos;s a coprocessor, I don&apos;t think it needs to be InterfaceAudience.Public.&lt;/p&gt;

&lt;p&gt;It would be nice to have a standard way to refer to the family maps, but I&apos;m not familiar with the other parts of the code to be able to say whether it&apos;s feasible to do that.&lt;/p&gt;</comment>
                            <comment id="13422619" author="stack" created="Wed, 25 Jul 2012 21:14:51 +0000"  >&lt;p&gt;@Marcelo I was thinking these changes:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; AuthResult allow(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; reason, User user, Permission.Action action, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] table) {
-      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AuthResult(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, reason, user, action, table, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
+    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; AuthResult allow(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; reason, User user,
+        Permission.Action action, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] table,
+        Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[], ? &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Collection&amp;lt;?&amp;gt;&amp;gt; families) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;@Andrew You think the above changes an issue?  If not I&apos;ll commit.&lt;/p&gt;</comment>
                            <comment id="13422704" author="vanzin" created="Wed, 25 Jul 2012 22:49:50 +0000"  >&lt;p&gt;Ah, yes, right. I&apos;ll wait for Andrew&apos;s comments; in any case, it&apos;s trivial to add the old constructor and method back, they just need to call the new makeFamilyMap() helper method.&lt;/p&gt;</comment>
                            <comment id="13427416" author="apurtell" created="Thu, 2 Aug 2012 16:20:58 +0000"  >&lt;p&gt;AuthResult methods can either be public or package scoped. &lt;/p&gt;

&lt;p&gt;I&apos;m concerned about the costs introduced for building family maps just for audit logging. The AccessController should not impose a performance penalty in total beyond low single digit percentage. Have you profiled the modified AccessController in action? How does it compare to an AC without these changes?&lt;/p&gt;</comment>
                            <comment id="13427495" author="vanzin" created="Thu, 2 Aug 2012 18:01:36 +0000"  >&lt;p&gt;I haven&apos;t profiled the code. But I think I can easily make it on par with the previous version by keeping the old single family / qualifier behavior as an optimization; that way there&apos;s no need to create a family map all the time. The only places that would need to create the map are places that today already create a new structure for that info (e.g. preCheckAndPut()).&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;AuthResult methods can either be public or package scoped. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think Stack was worried that I changed the visibility from public to private, so if anyone was using those methods for any reason, things will break for them. I wouldn&apos;t expect anyone to be doing that, but you never know.&lt;/p&gt;</comment>
                            <comment id="13427525" author="vanzin" created="Thu, 2 Aug 2012 18:53:05 +0000"  >&lt;p&gt;So I went and implemented the optimization, but when reviewing my changes I&apos;m not so sure it&apos;s worth the extra code. The only place where performance would potentially be affected here is callers of the following method:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void requirePermission(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] tableName, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] family, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] qualifier, Action... permissions)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Going through the code, there are only two calls to that method where &quot;family&quot; is not null; both calls were added in my patch, in &quot;grant()&quot; and &quot;revoke()&quot;, which I wouldn&apos;t really consider performance bottlenecks. In the other cases, the &quot;makeFamilyMap()&quot; call will just take a shortcut and return &quot;null&quot; since there is no family. So in the end it&apos;s a wash.&lt;/p&gt;

&lt;p&gt;Let me know if that doesn&apos;t make sense for any reason. &lt;/p&gt;

&lt;p&gt;If you still think it&apos;s important, I&apos;ll update the patch to make the methods public again, but since the class itself is private, I don&apos;t think it makes a difference.&lt;/p&gt;</comment>
                            <comment id="13427597" author="apurtell" created="Thu, 2 Aug 2012 20:45:50 +0000"  >&lt;p&gt;@Marcelo, thanks for digging in, sounds good to me.&lt;/p&gt;

&lt;p&gt;Edit: Fix typo.&lt;/p&gt;</comment>
                            <comment id="13436086" author="vanzin" created="Thu, 16 Aug 2012 16:42:37 +0000"  >&lt;p&gt;Hi Andrew,&lt;/p&gt;

&lt;p&gt;Sorry but it was not clear to me, does the &quot;sound good&quot; refer to the current patch or to making the visibility changes?&lt;/p&gt;</comment>
                            <comment id="13439994" author="gchanan" created="Thu, 23 Aug 2012 01:34:47 +0000"  >&lt;p&gt;One question:&lt;/p&gt;

&lt;p&gt;previously, in certain cases that you mention, the (first?) offending family:qualifier would be logged on permission denial.  Now it prints all the family:qualifiers in the request.  Can I figure out (at least one) column that caused the permission denial, or have I now lost the information?&lt;/p&gt;</comment>
                            <comment id="13439995" author="vanzin" created="Thu, 23 Aug 2012 01:42:06 +0000"  >&lt;p&gt;With my current patch that information is lost. That&apos;s a tricky case, because since the code bails out at the first offense, you don&apos;t know if any of the other families would also cause a permission error. There&apos;s also no good way to convey that in a single audit message; an option would be to create one audit message per column family / qualifier, at the expense of more overhead and more noise in the logs.&lt;/p&gt;

&lt;p&gt;If that&apos;s a problem I can revert that particular portion of the patch.&lt;/p&gt;</comment>
                            <comment id="13440003" author="gchanan" created="Thu, 23 Aug 2012 02:18:13 +0000"  >&lt;p&gt;I don&apos;t think listing more than one permission error is necessary.&lt;/p&gt;

&lt;p&gt;Listing the first permission denied (that caused the entire request to bail) does seem like useful information to me, for debug and audit reasons.  I don&apos;t know the security area well though, perhaps Andrew or someone else could weigh in.&lt;/p&gt;</comment>
                            <comment id="13441392" author="vanzin" created="Fri, 24 Aug 2012 18:52:43 +0000"  >&lt;p&gt;Updated patch: only record offending column / qualifier if access is denied.&lt;/p&gt;</comment>
                            <comment id="13441472" author="hadoopqa" created="Fri, 24 Aug 2012 20:36:49 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12542314/hbase-6386-v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12542314/hbase-6386-v2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The applied patch generated 5 javac compiler warnings (more than the trunk&apos;s current 4 warnings).&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 10 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.TestMultiVersions&lt;br/&gt;
                  org.apache.hadoop.hbase.io.encoding.TestUpgradeFromHFileV1ToEncoding&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2680//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2680//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2680//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2680//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2680//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2680//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2680//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2680//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2680//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2680//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2680//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2680//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2680//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2680//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13510321" author="stack" created="Wed, 5 Dec 2012 06:56:30 +0000"  >&lt;p&gt;This patch is interlinked with hbase-6393.  Which ever goes in first will break the other?&lt;/p&gt;

&lt;p&gt;Patch looks fine.  What does an access denied message look like now w/ your second patch?&lt;/p&gt;</comment>
                            <comment id="13510612" author="vanzin" created="Wed, 5 Dec 2012 17:30:49 +0000"  >&lt;p&gt;I&apos;ll have to rebase and re-test to get a log message; I&apos;ll see if I can find some time in the next few days.&lt;/p&gt;</comment>
                            <comment id="13541138" author="mbertozzi" created="Sun, 30 Dec 2012 19:13:23 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vanzin&quot; class=&quot;user-hover&quot; rel=&quot;vanzin&quot;&gt;Marcelo Vanzin&lt;/a&gt; I&apos;ve added a v3 patch that is the rebase against &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6393&quot; title=&quot;Decouple audit event creation from storage in AccessController&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6393&quot;&gt;HBASE-6393&lt;/a&gt;. &lt;/p&gt;</comment>
                            <comment id="13541139" author="mbertozzi" created="Sun, 30 Dec 2012 19:14:31 +0000"  >&lt;p&gt;The family/qualifier output now looks like this&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
request: put; context: (user=th30z, scope=test-table, family=cf0:q|cf1:q, action=WRITE)
request: put; context: (user=th30z, scope=.META., family=info:server|info:serverstartcode, action=WRITE)
request: get; context: (user=th30z, scope=.META., family=info, action=READ)
request: get; context: (user=th30z, scope=testtb, family=cf|cf2, action=READ)
request: get; context: (user=th30z, scope=testtb, family=cf:q, action=READ)
request: scannerOpen; context: (user=th30z, scope=testtb, family=cf|cf2, action=READ)
request: scannerOpen; context: (user=th30z, scope=testtb, family=cf:q, action=READ)
request: scannerOpen; context: (user=th30z, scope=testtb, family=cf:q|cf2:q, action=READ)
request: delete; context: (user=th30z, scope=testtb, family=cf:q, action=WRITE)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13541143" author="hadoopqa" created="Sun, 30 Dec 2012 19:33:28 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12562731/HBASE-6386-v3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12562731/HBASE-6386-v3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3771//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3771//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13541158" author="stack" created="Sun, 30 Dec 2012 20:53:29 +0000"  >&lt;p&gt;That looks great Matteo.  Let me add that to release note.  So, waiting on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6393&quot; title=&quot;Decouple audit event creation from storage in AccessController&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6393&quot;&gt;HBASE-6393&lt;/a&gt; to go in first it looks like....&lt;/p&gt;</comment>
                            <comment id="13541160" author="apurtell" created="Sun, 30 Dec 2012 21:16:49 +0000"  >&lt;p&gt;Patch looks good.&lt;/p&gt;

&lt;p&gt;I am curious if anyone has quantified the performance impact of having access logging enabled? With LoadTestTool or YCSB? We need a subtask for that? &lt;/p&gt;</comment>
                            <comment id="13547146" author="mbertozzi" created="Tue, 8 Jan 2013 19:25:03 +0000"  >&lt;p&gt;Now this jira depend only on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7518&quot; title=&quot;Move AuthResult out of AccessController&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7518&quot;&gt;&lt;del&gt;HBASE-7518&lt;/del&gt;&lt;/a&gt;, the move out of the AuthResult from the AccessController&lt;/p&gt;</comment>
                            <comment id="13547164" author="vanzin" created="Tue, 8 Jan 2013 19:33:09 +0000"  >&lt;p&gt;Thanks for reworking the patches Matteo. Looks good to me.&lt;/p&gt;</comment>
                            <comment id="13547292" author="hadoopqa" created="Tue, 8 Jan 2013 21:27:25 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12563803/HBASE-6386-v4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12563803/HBASE-6386-v4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3936//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3936//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13547420" author="mbertozzi" created="Tue, 8 Jan 2013 23:41:28 +0000"  >&lt;p&gt;Will commit in a couple of hours unless there are objections.&lt;/p&gt;

&lt;p&gt;(this patch improves the AuthResult family/qualifiers log message)&lt;/p&gt;</comment>
                            <comment id="13547670" author="mbertozzi" created="Wed, 9 Jan 2013 05:47:12 +0000"  >&lt;p&gt;committed to trunk, thanks guys for the review and Marcelo for the patch&lt;/p&gt;</comment>
                            <comment id="13547710" author="hudson" created="Wed, 9 Jan 2013 07:16:23 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3714 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3714/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3714/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6386&quot; title=&quot;Audit log messages do not include column family / qualifier information consistently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6386&quot;&gt;&lt;del&gt;HBASE-6386&lt;/del&gt;&lt;/a&gt; Audit log messages do not include column family / qualifier information consistently (Marcelo Vanzin) (Revision 1430691)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
mbertozzi : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/security/access/AccessController.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/security/access/AuthResult.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13548429" author="hudson" created="Wed, 9 Jan 2013 11:55:06 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #337 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/337/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/337/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6386&quot; title=&quot;Audit log messages do not include column family / qualifier information consistently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6386&quot;&gt;&lt;del&gt;HBASE-6386&lt;/del&gt;&lt;/a&gt; Audit log messages do not include column family / qualifier information consistently (Marcelo Vanzin) (Revision 1430691)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
mbertozzi : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/security/access/AccessController.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/security/access/AuthResult.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13775097" author="stack" created="Mon, 23 Sep 2013 18:30:44 +0000"  >&lt;p&gt;Marking closed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12558146">HBASE-6096</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12626613">HBASE-7518</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12562731" name="HBASE-6386-v3.patch" size="19625" author="mbertozzi" created="Sun, 30 Dec 2012 19:13:23 +0000"/>
                            <attachment id="12563803" name="HBASE-6386-v4.patch" size="19635" author="mbertozzi" created="Tue, 8 Jan 2013 19:25:03 +0000"/>
                            <attachment id="12537874" name="hbase-6386-v1.patch" size="14321" author="vanzin" created="Wed, 25 Jul 2012 18:42:31 +0000"/>
                            <attachment id="12542314" name="hbase-6386-v2.patch" size="15755" author="vanzin" created="Fri, 24 Aug 2012 18:52:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 25 Jul 2012 19:44:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>239673</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i00scn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2525</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Here is how output now looks:&lt;br/&gt;
&lt;br/&gt;
request: put; context: (user=th30z, scope=test-table, family=cf0:q|cf1:q, action=WRITE)&lt;br/&gt;
request: put; context: (user=th30z, scope=.META., family=info:server|info:serverstartcode, action=WRITE)&lt;br/&gt;
request: get; context: (user=th30z, scope=.META., family=info, action=READ)&lt;br/&gt;
request: get; context: (user=th30z, scope=testtb, family=cf|cf2, action=READ)&lt;br/&gt;
request: get; context: (user=th30z, scope=testtb, family=cf:q, action=READ)&lt;br/&gt;
request: scannerOpen; context: (user=th30z, scope=testtb, family=cf|cf2, action=READ)&lt;br/&gt;
request: scannerOpen; context: (user=th30z, scope=testtb, family=cf:q, action=READ)&lt;br/&gt;
request: scannerOpen; context: (user=th30z, scope=testtb, family=cf:q|cf2:q, action=READ)&lt;br/&gt;
request: delete; context: (user=th30z, scope=testtb, family=cf:q, action=WRITE)</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>