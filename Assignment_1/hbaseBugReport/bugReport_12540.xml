<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:33:59 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-12540/HBASE-12540.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-12540] TestRegionServerMetrics#testMobMetrics test failure</title>
                <link>https://issues.apache.org/jira/browse/HBASE-12540</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Got this on an internal rig run.  Maybe you want to take a looksee &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jingchengdu&quot; class=&quot;user-hover&quot; rel=&quot;jingchengdu&quot;&gt;JingchengDu&lt;/a&gt;?&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Error Message

Metrics Counters should be equal expected:&amp;lt;5&amp;gt; but was:&amp;lt;2&amp;gt;
Stacktrace

java.lang.AssertionError: Metrics Counters should be equal expected:&amp;lt;5&amp;gt; but was:&amp;lt;2&amp;gt;
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.failNotEquals(Assert.java:743)
	at org.junit.Assert.assertEquals(Assert.java:118)
	at org.junit.Assert.assertEquals(Assert.java:555)
	at org.apache.hadoop.hbase.test.MetricsAssertHelperImpl.assertCounter(MetricsAssertHelperImpl.java:185)
	at org.apache.hadoop.hbase.regionserver.TestRegionServerMetrics.testMobMetrics(TestRegionServerMetrics.java:448)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.junit.runners.Suite.runChild(Suite.java:127)
	at org.junit.runners.Suite.runChild(Suite.java:26)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
	at java.util.concurrent.FutureTask.run(FutureTask.java:262)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12756552">HBASE-12540</key>
            <summary>TestRegionServerMetrics#testMobMetrics test failure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jingcheng.du@intel.com">Jingcheng Du</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Wed, 19 Nov 2014 22:20:29 +0000</created>
                <updated>Wed, 22 Jul 2015 22:48:45 +0000</updated>
                            <resolved>Thu, 11 Dec 2014 03:47:00 +0000</resolved>
                                    <version>hbase-11339</version>
                                    <fixVersion>hbase-11339</fixVersion>
                                    <component>test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="14218608" author="stack" created="Wed, 19 Nov 2014 22:24:57 +0000"  >&lt;p&gt;Log of the test run.  Hope this helps.&lt;/p&gt;</comment>
                            <comment id="14218923" author="jingcheng.du@intel.com" created="Thu, 20 Nov 2014 03:02:20 +0000"  >&lt;p&gt;Sure, working on that.&lt;/p&gt;</comment>
                            <comment id="14218954" author="jingcheng.du@intel.com" created="Thu, 20 Nov 2014 03:39:12 +0000"  >&lt;p&gt;Hi Stack &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;, I checked the log, &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2014-11-19 12:41:50,889 WARN  [IPC Server handler 8 on 45640] security.UserGroupInformation(1645): PriviledgedActionException as:jenkins.hfs.0 (auth:SIMPLE) cause:java.io.FileNotFoundException: File/Directory /user/jenkins/hbase/data/default/testMobMetrics/9a75b9728c76748d2963cbc975504a43/d/14ea0c361e2348ab816879cd52147bc2 does not exist.
2014-11-19 12:41:50,890 INFO  [IPC Server handler 9 on 45640] blockmanagement.BlockManager(1076): BLOCK* addToInvalidates: blk_1073741846_1022 127.0.0.1:52665
2014-11-19 12:41:50,896 WARN  [RS:0;p0120:56624-smallCompactions-1416429710151] backup.HFileArchiver(427): Failed to archive class org.apache.hadoop.hbase.backup.HFileArchiver$FileableStoreFile, file:hdfs://localhost:45640/user/jenkins/hbase/data/default/testMobMetrics/9a75b9728c76748d2963cbc975504a43/d/14ea0c361e2348ab816879cd52147bc2 on try #0
java.io.FileNotFoundException: File/Directory /user/jenkins/hbase/data/default/testMobMetrics/9a75b9728c76748d2963cbc975504a43/d/14ea0c361e2348ab816879cd52147bc2 does not exist.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The file could not be found when archiving after compaction, this issue might be caused by multiple compactions run at the same time? I have reduced the hfile count to threshold-1 to avoid the HBase compaction. Now the patch is available, and the test passes in the branch &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11339&quot; title=&quot;HBase MOB&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11339&quot;&gt;&lt;del&gt;HBASE-11339&lt;/del&gt;&lt;/a&gt;, please have a look and try in your code, thanks!&lt;/p&gt;</comment>
                            <comment id="14227228" author="jingcheng.du@intel.com" created="Thu, 27 Nov 2014 03:51:55 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=saint.ack%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;saint.ack@gmail.com&quot;&gt;Stack&lt;/a&gt;, does this patch fix the unit test issue? Please advise, thanks.&lt;/p&gt;</comment>
                            <comment id="14227564" author="stack" created="Thu, 27 Nov 2014 11:49:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jingchengdu&quot; class=&quot;user-hover&quot; rel=&quot;jingchengdu&quot;&gt;JingchengDu&lt;/a&gt; I could try your patch but lets wait a few days. The build went unstable over these last few days after some big patches went in changing how we do connections. We seem to be almost stable again.  Once stability is back, I can introduce this change. Thanks.&lt;/p&gt;</comment>
                            <comment id="14241520" author="jmhsieh" created="Wed, 10 Dec 2014 18:46:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jingchengdu&quot; class=&quot;user-hover&quot; rel=&quot;jingchengdu&quot;&gt;JingchengDu&lt;/a&gt; Make sense to me there is a nit we should fix.&lt;/p&gt;

&lt;p&gt;Can we rename the compactionThreshold variable name to something like numFlushes, or numHfiles in the test code?  the fact that it is the compaction threshold value is not intersting and the -1 makes it not the actual value.  It is in reality the numHfiles or number of flushes we execute and validate.&lt;/p&gt;</comment>
                            <comment id="14242047" author="jiajia" created="Thu, 11 Dec 2014 02:55:07 +0000"  >&lt;p&gt;thanks Jon, I upload the &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12540&quot; title=&quot;TestRegionServerMetrics#testMobMetrics test failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12540&quot;&gt;&lt;del&gt;HBASE-12540&lt;/del&gt;&lt;/a&gt;-V2.patch(rename the var compactionThreshold to numHfiles).&lt;/p&gt;</comment>
                            <comment id="14242084" author="jmhsieh" created="Thu, 11 Dec 2014 03:46:40 +0000"  >&lt;p&gt;I&apos;ve committed v3 to hbase-11339 branch (you lost the main fix in the update).  Thanks Jingcheng and Jiajia and thanks stack for taking a look while I was away.&lt;/p&gt;</comment>
                            <comment id="14242088" author="jiajia" created="Thu, 11 Dec 2014 03:52:55 +0000"  >&lt;p&gt;hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmhsieh&quot; class=&quot;user-hover&quot; rel=&quot;jmhsieh&quot;&gt;Jonathan Hsieh&lt;/a&gt;, sorry for missing some in patch, I will upload the new patch soon~&lt;/p&gt;</comment>
                            <comment id="14242092" author="jmhsieh" created="Thu, 11 Dec 2014 03:57:07 +0000"  >&lt;p&gt;no worries.  It was a one liner so I took care of it.&lt;/p&gt;</comment>
                            <comment id="14242093" author="jiajia" created="Thu, 11 Dec 2014 03:57:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jon%40cloudera.com&quot; class=&quot;user-hover&quot; rel=&quot;jon@cloudera.com&quot;&gt;Jonathan Hsieh&lt;/a&gt;, the V2 missing the fix, thanks&lt;/p&gt;</comment>
                            <comment id="14637828" author="hudson" created="Wed, 22 Jul 2015 22:48:45 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #6672 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/6672/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/6672/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12540&quot; title=&quot;TestRegionServerMetrics#testMobMetrics test failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12540&quot;&gt;&lt;del&gt;HBASE-12540&lt;/del&gt;&lt;/a&gt; TestRegionServerMetrics#testMobMetrics test failure (Jingcheng Du and Jiajia Li) (jmhsieh: rev bd5b3e92de37a8ff77d12e05131ba43eeb187a30)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionServerMetrics.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12686427" name="HBASE-12540-V2.patch" size="3375" author="jiajia" created="Thu, 11 Dec 2014 02:55:07 +0000"/>
                            <attachment id="12682568" name="HBASE-12540.diff" size="964" author="jingcheng.du@intel.com" created="Thu, 20 Nov 2014 03:42:53 +0000"/>
                            <attachment id="12686437" name="hbase-12540-v3.patch" size="3379" author="jmhsieh" created="Thu, 11 Dec 2014 03:56:44 +0000"/>
                            <attachment id="12682508" name="log.txt" size="224344" author="stack" created="Wed, 19 Nov 2014 22:24:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 20 Nov 2014 03:02:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 21 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i22kz3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>