<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:50:27 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1066/HBASE-1066.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1066] Master should support close/open/reassignment/enable/disable operations on individual regions</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1066</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The master should support close/open/reassignment/enable/disable operations on individual regions by way of a client API and corresponding shell command(s), and maybe also controls on the master UI.&lt;/p&gt;

&lt;p&gt;If one region out of 1000s is closed or offline, for example due to transient DFS problems, currently the whole table must be disabled, then reenabled to trigger reassignment and, hopefully, successful (re)open of the offline regions. The flurry of compactions this causes can exacerbate the underlying problem and actually make cluster state worse, as more DFS errors accumulate. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12410969">HBASE-1066</key>
            <summary>Master should support close/open/reassignment/enable/disable operations on individual regions</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="apurtell">Andrew Purtell</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Dec 2008 13:19:15 +0000</created>
                <updated>Sun, 13 Sep 2009 22:26:35 +0000</updated>
                            <resolved>Tue, 23 Dec 2008 23:12:13 +0000</resolved>
                                                    <fixVersion>0.19.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12658167" author="stack" created="Fri, 19 Dec 2008 19:36:44 +0000"  >&lt;p&gt;Agreed.&lt;/p&gt;

&lt;p&gt;You can do some of this now but its more awkward than it need be.   To enable/disable individual region, you&apos;d write a script that got info:regioninfo cell from .META., rendered it as HRI, set the particular flag, then wrote it back.  If master has a region and no HRS does, then setting the server to null will force the master to reassign.  Both of the above can be done in two or three lines of script but error-prone and for the congnescenti.  I agree we need it fixing broke clusters and the facility should be more amenable to admins.&lt;/p&gt;</comment>
                            <comment id="12658344" author="stack" created="Sun, 21 Dec 2008 02:42:16 +0000"  >&lt;p&gt;Pulling into 0.19.0.  We can punt on it later.  &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1073&quot; title=&quot;HStore out of sync with what is on filesystem&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1073&quot;&gt;&lt;del&gt;HBASE-1073&lt;/del&gt;&lt;/a&gt; makes for a case where we have a single region of many out of sync.  The &apos;repair&apos; is currently shutting down the regionserver which is very disruptive, especially in small cluster with each node carrying many regions.  Need a way for the master to send a CLOSE region from shell/UI.  See how hard to do.&lt;/p&gt;</comment>
                            <comment id="12658396" author="apurtell" created="Sun, 21 Dec 2008 16:35:31 +0000"  >&lt;p&gt;The HBaseAdmin.modifyTable API is perfect for that. Just add op constants and backing implementation in HMaster for MODIFY_TABLE_CLOSE, MODIFY_TABLE_OPEN, etc. &lt;/p&gt;</comment>
                            <comment id="12658778" author="stack" created="Tue, 23 Dec 2008 06:50:53 +0000"  >&lt;p&gt;Not fully tested.  Adds enable/disable to the shell.  Adds close of a region.  Others, open and reassign are tricky.  How do I say open a region?  The scanners are supposed to be looking at the .META. and opening unopened tables.  Same for reassign.  Just close it and then when scanner runs, it&apos;ll be assigned elsewhere.&lt;/p&gt;</comment>
                            <comment id="12658969" author="stack" created="Tue, 23 Dec 2008 21:58:03 +0000"  >&lt;p&gt;Adds enable/disable and close region with optional removal of STARTCODE and SERVER (so gets reassigned).  Also added being able to specify servername you want to send the close to in case META is not in agreement with whats out on regionservers.  Done as new commands in the shell: enable_region, disable_region, and close_region.  Need to add in help and figure why removal of STARTCODE and SERVER does not always get a region reassigned.  &lt;/p&gt;</comment>
                            <comment id="12658979" author="stack" created="Tue, 23 Dec 2008 22:26:26 +0000"  >&lt;p&gt;Add shell help for these new &apos;tools&apos;&lt;/p&gt;</comment>
                            <comment id="12658980" author="stack" created="Tue, 23 Dec 2008 22:32:20 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hbase(main):002:0&amp;gt; tools
HBASE SURGERY TOOLS:
 enable_region   Enable a single region. For example,
  
                 hbase&amp;gt; enable_region &apos;REGIONNAME&apos;
 
 disable_region  Disable a single region

 close_region    Close a single region.  Optionally specify regionserver and
                 whether to &apos;clean&apos; STARTCODE and SERVER from &apos;.META.&apos; Do not
                 clean the latter &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; you &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; not want the region reassigned.
                 Examples:
                 
                 hbase&amp;gt; close_region &apos;REGIONNAME&apos;
                 hbase&amp;gt; close_region &apos;REGIONNAME&apos;, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
                 hbase&amp;gt; close_region &apos;REGIONNAME&apos;, &apos;REGIONSERVER_IP:PORT&apos;

Above commands are &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &apos;experts&apos;-only as misuse can damage an install
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12658992" author="stack" created="Tue, 23 Dec 2008 23:12:13 +0000"  >&lt;p&gt;Committed after removing notion of clean.  It doesn&apos;t add anything.  Can not clean the SERVER and STARTCODE but hbase will assign the region again anyways in the region close handler.  Can add more tools easy enough as we go.  This should do as a start.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12396696" name="1066-v3.patch" size="20977" author="stack" created="Tue, 23 Dec 2008 21:58:03 +0000"/>
                            <attachment id="12396699" name="1066-v4.patch" size="22256" author="stack" created="Tue, 23 Dec 2008 22:26:26 +0000"/>
                            <attachment id="12396658" name="1066.patch" size="15343" author="stack" created="Tue, 23 Dec 2008 06:50:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 19 Dec 2008 19:36:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31975</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hb4f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99064</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>