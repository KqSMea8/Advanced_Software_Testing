<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:07:28 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-3115/HBASE-3115.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-3115] HBaseClient wastes 1 TCP packet per RPC</title>
                <link>https://issues.apache.org/jira/browse/HBASE-3115</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;In &lt;tt&gt;ipc/HBaseClient.java&lt;/tt&gt;, the method &lt;tt&gt;sendParam&lt;/tt&gt; does:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
out.writeInt(dataLength);      &lt;span class=&quot;code-comment&quot;&gt;//first put the data length
&lt;/span&gt;out.write(data, 0, dataLength);&lt;span class=&quot;code-comment&quot;&gt;//write the data&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;While analyzing some tcpdump traces tonight, I saw that this consistently translates to 1 TCP packet with a 4 byte payload followed by another TCP packet with the RPC itself.  This makes inefficient use of network resources and adversely affects TCP throughput.  I believe each of those lines translates to a &lt;tt&gt;write&lt;/tt&gt; system call on the socket&apos;s file descriptor (unnecessary system calls are also bad for performance).  The code attempts to call &lt;tt&gt;out.flush();&lt;/tt&gt; but this approach is ineffective on sockets in Java (as far as I empirically noticed over the past few months).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12477435">HBASE-3115</key>
            <summary>HBaseClient wastes 1 TCP packet per RPC</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tlipcon">Todd Lipcon</assignee>
                                    <reporter username="tsuna">Benoit Sigoure</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Oct 2010 08:25:12 +0000</created>
                <updated>Fri, 20 Nov 2015 12:42:08 +0000</updated>
                            <resolved>Tue, 19 Oct 2010 06:04:20 +0000</resolved>
                                    <version>0.20.1</version>
                    <version>0.20.2</version>
                    <version>0.20.3</version>
                    <version>0.20.4</version>
                    <version>0.20.5</version>
                    <version>0.20.6</version>
                    <version>0.89.20100621</version>
                                    <fixVersion>0.90.0</fixVersion>
                                    <component>Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12921407" author="stack" created="Fri, 15 Oct 2010 15:34:57 +0000"  >&lt;p&gt;Excellent analysis work Ben&#244;it.&lt;/p&gt;</comment>
                            <comment id="12922172" author="tlipcon" created="Mon, 18 Oct 2010 17:53:45 +0000"  >&lt;p&gt;Maybe something like this?&lt;/p&gt;</comment>
                            <comment id="12922223" author="tsuna" created="Mon, 18 Oct 2010 19:24:09 +0000"  >&lt;p&gt;+1 Todd, thanks a bunch.&lt;/p&gt;</comment>
                            <comment id="12922358" author="stack" created="Mon, 18 Oct 2010 23:41:49 +0000"  >&lt;p&gt;I&apos;m +1 too&lt;/p&gt;</comment>
                            <comment id="12922391" author="tlipcon" created="Tue, 19 Oct 2010 01:01:16 +0000"  >&lt;p&gt;FYI I didn&apos;t verify with tshark or anything that this actually reduced # of packets, just kind of assuming. Did either of you guys try it out?&lt;/p&gt;</comment>
                            <comment id="12922430" author="stack" created="Tue, 19 Oct 2010 04:37:10 +0000"  >&lt;p&gt;Not me (Pinging Benoit).&lt;/p&gt;</comment>
                            <comment id="12922435" author="tsuna" created="Tue, 19 Oct 2010 04:48:55 +0000"  >&lt;p&gt;No I haven&apos;t tried it either - I don&apos;t use this HBase client anymore, I use my asynchronous client instead.&lt;/p&gt;

&lt;p&gt;But given that the patch changes the code to call out.write() only once, I can&apos;t imagine how this can be split in 2 write() system calls that would result in 2 packets.&lt;/p&gt;</comment>
                            <comment id="12922451" author="tlipcon" created="Tue, 19 Oct 2010 06:04:20 +0000"  >&lt;p&gt;OK, I&apos;ll go with your logic. Thanks for the good find, Benoit.&lt;/p&gt;</comment>
                            <comment id="12922710" author="apurtell" created="Tue, 19 Oct 2010 20:41:29 +0000"  >&lt;p&gt;Backported to 0.20 branch (if there&apos;s ever a 0.20.7)&lt;/p&gt;</comment>
                            <comment id="15017168" author="lars_francke" created="Fri, 20 Nov 2015 12:42:08 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12457463" name="hbase-3115.txt" size="1338" author="tlipcon" created="Mon, 18 Oct 2010 17:53:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 15 Oct 2010 15:34:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32906</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hktb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>100634</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>performance</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>