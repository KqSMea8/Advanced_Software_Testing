<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:55:41 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1706/HBASE-1706.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1706] META row with missing HRI breaks UI</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1706</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Seeing this in the master log:&lt;/p&gt;

&lt;p&gt;2009-07-26 06:01:55,373 WARN org.apache.hadoop.hbase.master.BaseScanner: Found 1 rows with empty HRegionInfo while scanning meta region .META.,,1&lt;br/&gt;
2009-07-26 06:01:55,373 WARN org.apache.hadoop.hbase.master.HMaster: Removed region: content,9e1f3dbffe50886f56d67044ca7177e,1248262776854 from meta region: .META.,,1 because HRegionInfo was empty&lt;/p&gt;

&lt;p&gt;Seeing this on the master UI (&lt;a href=&quot;http://test:60010/master.jsp):&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://test:60010/master.jsp):&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;HTTP ERROR: 500&lt;/p&gt;

&lt;p&gt;INTERNAL_SERVER_ERROR&lt;/p&gt;

&lt;p&gt;RequestURI=/master.jsp&lt;br/&gt;
Caused by:&lt;/p&gt;

&lt;p&gt;java.lang.NullPointerException&lt;br/&gt;
	at org.apache.hadoop.hbase.util.Writables.getWritable(Writables.java:74)&lt;br/&gt;
	at org.apache.hadoop.hbase.util.Writables.getHRegionInfo(Writables.java:118)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.HConnectionManager$TableServers$1.processRow(HConnectionManager.java:356)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.MetaScanner.metaScan(MetaScanner.java:63)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.MetaScanner.metaScan(MetaScanner.java:28)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.HConnectionManager$TableServers.listTables(HConnectionManager.java:369)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.HBaseAdmin.listTables(HBaseAdmin.java:127)&lt;br/&gt;
	at org.apache.hadoop.hbase.generated.master.master_jsp._jspService(master_jsp.java:125)&lt;br/&gt;
	at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97)&lt;br/&gt;
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:502)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:363)&lt;br/&gt;
	at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)&lt;br/&gt;
	at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)&lt;br/&gt;
	at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766)&lt;br/&gt;
	at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:417)&lt;br/&gt;
	at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)&lt;br/&gt;
	at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)&lt;br/&gt;
	at org.mortbay.jetty.Server.handle(Server.java:324)&lt;br/&gt;
	at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:534)&lt;br/&gt;
	at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:864)&lt;br/&gt;
	at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:533)&lt;br/&gt;
	at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:207)&lt;br/&gt;
	at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:403)&lt;br/&gt;
	at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)&lt;br/&gt;
	at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:522)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12431446">HBASE-1706</key>
            <summary>META row with missing HRI breaks UI</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="apurtell">Andrew Purtell</assignee>
                                    <reporter username="apurtell">Andrew Purtell</reporter>
                        <labels>
                    </labels>
                <created>Sun, 26 Jul 2009 06:04:01 +0000</created>
                <updated>Sun, 13 Sep 2009 22:24:52 +0000</updated>
                            <resolved>Sun, 26 Jul 2009 23:09:56 +0000</resolved>
                                                    <fixVersion>0.20.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12735349" author="apurtell" created="Sun, 26 Jul 2009 06:17:37 +0000"  >&lt;p&gt;Just before the trouble started:&lt;/p&gt;

&lt;p&gt;2009-07-26 05:30:44,902 INFO org.apache.hadoop.hbase.master.BaseScanner: Deleting region content,9e1f3dbffe50886f56d67044ca7177e,1248262776854 (encoded=636999803) because daughter splits no longer hold references&lt;/p&gt;

&lt;p&gt;I&apos;ve tried forcing major compacting of META twice and have restarted twice. So far the problem has not cleared up. &lt;/p&gt;</comment>
                            <comment id="12735350" author="apurtell" created="Sun, 26 Jul 2009 06:18:41 +0000"  >&lt;p&gt;Raising priority. &lt;/p&gt;</comment>
                            <comment id="12735351" author="apurtell" created="Sun, 26 Jul 2009 06:22:51 +0000"  >&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hbase(main):002:0&amp;gt; get &apos;.META.&apos;, &apos;content,9e1f3dbffe50886f56d67044ca7177e,1248262776854&apos;
0 row(s) in 0.0920 seconds
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So why is the MetaScanner in the client and master still getting a key back for this row?&lt;/p&gt;</comment>
                            <comment id="12735353" author="apurtell" created="Sun, 26 Jul 2009 06:48:17 +0000"  >&lt;p&gt;Patch addresses the symptom and gets the UI working again. &lt;/p&gt;</comment>
                            <comment id="12735359" author="apurtell" created="Sun, 26 Jul 2009 07:40:34 +0000"  >&lt;p&gt;So as commented above, a get returns nothing but a scan picks up &apos;historian:open&apos; in the &quot;deleted&quot; row no matter how many attempts or ways to delete it (deleteall table, row; delete table, row, column; delete table, row, column, timestamp) or how many forced major compactions.&lt;/p&gt;

&lt;p&gt;hbase(main):003:0&amp;gt; scan &apos;.META.&apos;, &lt;/p&gt;
{ STARTROW =&amp;gt; &apos;content,9e1f3dbffe50886f56d67044ca7177e,1248262776854&apos;, LIMIT =&amp;gt; 1}
&lt;p&gt;content,9e1f3dbffe50886f56d  column=historian:open, timestamp=1248466553400, value=&quot;Region opened on server test&lt;br/&gt;
 670444ca7155e,12482627776854&lt;/p&gt;</comment>
                            <comment id="12735386" author="jdcryans" created="Sun, 26 Jul 2009 14:54:31 +0000"  >&lt;p&gt;The stack trace is the same as the one in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1634&quot; title=&quot;UI and shell list throw NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1634&quot;&gt;&lt;del&gt;HBASE-1634&lt;/del&gt;&lt;/a&gt; and symptoms are the same it seems.&lt;/p&gt;</comment>
                            <comment id="12735391" author="stack" created="Sun, 26 Jul 2009 16:09:46 +0000"  >&lt;p&gt;As J-D says, looks same as 1634. &lt;/p&gt;

&lt;p&gt;One thing I was thinking of doing was listing tables, I&apos;d only scan with the info family, not all families.&lt;/p&gt;
</comment>
                            <comment id="12735392" author="stack" created="Sun, 26 Jul 2009 16:12:56 +0000"  >&lt;p&gt;Root cause may be hbase-1638?  1634 I think is just symptom &amp;#8211; though we should guard against it.&lt;/p&gt;</comment>
                            <comment id="12735401" author="apurtell" created="Sun, 26 Jul 2009 17:50:52 +0000"  >&lt;p&gt;I&apos;ll run the script attached to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1638&quot; title=&quot;hfile has entry from wrong family&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1638&quot;&gt;&lt;del&gt;HBASE-1638&lt;/del&gt;&lt;/a&gt; and see what happens. &lt;/p&gt;</comment>
                            <comment id="12735402" author="apurtell" created="Sun, 26 Jul 2009 17:54:30 +0000"  >&lt;p&gt;I think the patch for this issue should be applied, as all clients who try to listTables() will break. For example, I can&apos;t bring up new Heritrix instances or start new jobs now and can&apos;t replace the HBase jar and restart until the current jobs have finished.&lt;/p&gt;</comment>
                            <comment id="12735404" author="apurtell" created="Sun, 26 Jul 2009 18:19:06 +0000"  >&lt;p&gt;Thanks for the help. purgewrongfamily.rb did work to remove the errant &apos;historian:open&apos; key somehow written to one of the info family hfiles for META. &lt;/p&gt;</comment>
                            <comment id="12735427" author="stack" created="Sun, 26 Jul 2009 21:58:38 +0000"  >&lt;p&gt;Sure on the patch if it works for you &amp;#8211; looks good to me &amp;#8211; and doesn&apos;t just move the NPE on to show elsewhere.&lt;/p&gt;</comment>
                            <comment id="12735435" author="apurtell" created="Sun, 26 Jul 2009 23:09:56 +0000"  >&lt;p&gt;Committed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12431596">HBASE-1716</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12414538" name="HBASE-1706.patch" size="1042" author="apurtell" created="Sun, 26 Jul 2009 06:48:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 26 Jul 2009 14:54:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25927</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 21 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0d49b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>74466</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>