<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:07:26 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-3111/HBASE-3111.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-3111] TestTableMapReduce broken up on hudson</title>
                <link>https://issues.apache.org/jira/browse/HBASE-3111</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;So, test has failed for various reasons since fixed over last week or so.  It is currently failing when the reducer starts up.  Its failing because its not picking up the zk servers location; its using stale config.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12477313">HBASE-3111</key>
            <summary>TestTableMapReduce broken up on hudson</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Oct 2010 05:57:19 +0000</created>
                <updated>Fri, 20 Nov 2015 12:42:38 +0000</updated>
                            <resolved>Fri, 15 Oct 2010 20:11:03 +0000</resolved>
                                                    <fixVersion>0.90.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12920856" author="stack" created="Thu, 14 Oct 2010 05:59:00 +0000"  >&lt;p&gt;I&apos;m going to try this change over night:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Index: src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java
===================================================================
--- src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java     (revision 1022380)
+++ src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java     (working copy)
@@ -180,7 +180,6 @@
     job.setOutputKeyClass(ImmutableBytesWritable.class);
     job.setOutputValueClass(Writable.class);
     &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (partitioner == HRegionPartitioner.class) {
-      HBaseConfiguration.addHbaseResources(conf);
       job.setPartitionerClass(HRegionPartitioner.class);
       HTable outputTable = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HTable(conf, table);
       &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; regions = outputTable.getRegionsInfo().size();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;My supposition is that its overwriting the config. we&apos;ve passed in which has in it the amended zk location.&lt;/p&gt;

&lt;p&gt;This is the last failing test on hudson.  If this passes, I&apos;ll make up a better patch... will need documentation.&lt;/p&gt;</comment>
                            <comment id="12921017" author="stack" created="Thu, 14 Oct 2010 16:58:00 +0000"  >&lt;p&gt;This fix looks to have taken care of the failing.  Lets run hudson a few more times before closing.&lt;/p&gt;</comment>
                            <comment id="12921217" author="stack" created="Fri, 15 Oct 2010 04:17:04 +0000"  >&lt;p&gt;So, the above &apos;fix&apos; didn&apos;t work (looking closer, of course it didn&apos;t work).  We&apos;re still picking up wrong ensemble out in TableOutputFormat.  I can replicate the issue now by changing the hardcoded MiniZooKeeperCluster clientport underneath the deprecated HBaseClusterTestCase that is used by TestTableMapReduce.  Digging.&lt;/p&gt;</comment>
                            <comment id="12921234" author="stack" created="Fri, 15 Oct 2010 05:32:32 +0000"  >&lt;p&gt;Problem looks to have been a little more insidious.  TableInputFormat implements Configurable.  TableOutputFormat does not and hbase configs were hoisted up into TOF inside in the RecordWriter constructor by calling HBaseConfiguration.addHbaseResources(context);   This doesn&apos;t looks like it would ever pick up config. set by the job.  Let me try this patch against hudson.  Committing it now.  Here&apos;s a commit message.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
M src/main/java/org/apache/hadoop/hbase/zookeeper/ZKUtil.java
  Changed mentions of &apos;quorum&apos; to &apos;ensemble&apos;.
M src/main/java/org/apache/hadoop/hbase/mapreduce/IdentityTableReducer.java
M src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormat.java
  Minor formatting.
M src/main/java/org/apache/hadoop/hbase/mapreduce/TableInputFormatBase.java
  Removed unused imports and minor formatting.
M src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java
  Documented what the quorumAddress parameter is &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;.
  Removed an unnecessary looking HBaseConfiguration.addHbaseResources(conf);
  (and adjusted documentation of job to say no hbase config set by the
  reduce setup method).
M src/main/java/org/apache/hadoop/hbase/mapreduce/TableOutputFormat.java
  Made &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; class implment Configurable.  Moved creation of table from
  RecordWrite constructor based off passed TaskAttemptContext instead
  into the &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; setConf method.  Added table and conf data members.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12921527" author="stack" created="Fri, 15 Oct 2010 20:11:03 +0000"  >&lt;p&gt;We don&apos;t see this failure in the last few hudson runs.  Resolving.&lt;/p&gt;</comment>
                            <comment id="12989412" author="jdcryans" created="Tue, 1 Feb 2011 22:18:53 +0000"  >&lt;p&gt;This commit broke the CopyTable job because TOF.setConf is called when the job gets created, thus replaces the ZK addresses from the source cluster with the target cluster. AK found the issue.&lt;/p&gt;</comment>
                            <comment id="15017304" author="lars_francke" created="Fri, 20 Nov 2015 12:42:38 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12457235" name="3111-2nd-attempt.txt" size="15043" author="stack" created="Fri, 15 Oct 2010 05:32:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 1 Feb 2011 22:18:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26654</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hksf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>100630</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>