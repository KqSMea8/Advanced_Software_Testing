<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:22:33 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4852/HBASE-4852.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4852] Tests that use RegionServer.openRegion such as TestHBaseFsck#testHBaseFsck should call openRegion synchronously</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4852</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Certain test cases like HBaseFsck#testHBaseFsck make calls to assign region servers and then read meta.  The tests or hbck should be modified to make the RegionServer.openRegion call act synchronously.&lt;/p&gt;

&lt;p&gt;The main issue isn&apos;t what is returned, but when.  Specifically in HBaseFsck#testHBaseFsck, the first &apos;hbck -fix&apos;, the master makes a call to the regionserver to issue an asynchronous request to open the region (which adds data to meta).  The regionserver returns right away.  The next hbck call will cause the master query meta again which is used to check consistency.  A race is exposed &amp;#8211; sometimes the new meta entries are fixed before the second hbck call is done (failing the test), sometimes it is not (not failing).&lt;/p&gt;

&lt;p&gt;The hack in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4842&quot; title=&quot;[hbck] Fix intermittent failures on TestHBaseFsck.testHBaseFsck&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4842&quot;&gt;&lt;del&gt;HBASE-4842&lt;/del&gt;&lt;/a&gt; introduces a slight delay which usually allows the open request to finish and the meta entry to be updated before the subsequent &apos;hbck&apos; call.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12532407">HBASE-4852</key>
            <summary>Tests that use RegionServer.openRegion such as TestHBaseFsck#testHBaseFsck should call openRegion synchronously</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="4" iconUrl="https://issues.apache.org/jira/images/icons/statuses/reopened.png" description="This issue was once resolved, but the resolution was deemed incorrect. From here issues are either marked assigned or resolved.">Reopened</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jmhsieh">Jonathan Hsieh</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Nov 2011 23:17:40 +0000</created>
                <updated>Fri, 31 Aug 2012 16:49:52 +0000</updated>
                                            <version>0.92.0</version>
                    <version>0.94.0</version>
                                                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13443389" author="jesse_yates" created="Tue, 28 Aug 2012 18:54:07 +0000"  >&lt;p&gt;HRegionServer.openRegion isn&apos;t called from any tests (and in particular testHBaseFsck() doesn&apos;t mess with the table directly. Marking as &apos;fixed&apos;&lt;/p&gt;</comment>
                            <comment id="13444663" author="jmhsieh" created="Thu, 30 Aug 2012 04:18:51 +0000"  >&lt;p&gt;Reopening &amp;#8211; the point is that the test use the admin client and that it is asynchronous.  Options to make these tests more reliable is to either add some mechanism to allow it to get notified or poll for when it is done, or modify tests reaching inside the rs to grab regions (bypassing the handler queue, admin interface) so that the operations are synchrounous.  &lt;/p&gt;</comment>
                            <comment id="13446124" author="jesse_yates" created="Fri, 31 Aug 2012 16:49:52 +0000"  >&lt;p&gt;Thanks for the clarification Jon.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12532230">HBASE-4842</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 28 Aug 2012 18:54:07 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>218140</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 16 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02cd3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11604</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>