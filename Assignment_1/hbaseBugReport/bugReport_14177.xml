<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:50:31 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-14177/HBASE-14177.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-14177] Full GC on client may lead to missing scan results</title>
                <link>https://issues.apache.org/jira/browse/HBASE-14177</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;After adding a large row, scanning back that row winds up being empty. After a few attempts it will succeed (all attempts over the same data on an hbase getting no other writes).&lt;/p&gt;

&lt;p&gt;Looking at logs, it seems this happens when there is memory pressure on the client and there are several Full GCs that happen. Then messages that indicate that region locations are being removed from the local client cache:&lt;/p&gt;

&lt;p&gt;2015-07-31 12:50:24,647 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; DEBUG org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation  - Removed 192.168.1.131:50981 as a location of big_row_1438368609944,,1438368610048.880c849594807bdc7412f4f982337d6c. for tableName=big_row_1438368609944 from cache&lt;/p&gt;

&lt;p&gt;Blaming the GC may sound fanciful, but if the test is run with -Xms4g -Xmx4g then it always passes on the first scan attempt. Maybe the pause is enough to remove something from the cache, or the client is using weak references somewhere?&lt;/p&gt;

&lt;p&gt;More info &lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/hbase-user/201507.mbox/%3CCAE8tVdnFf%3Dob569%3DfJkpw1ndVWOVTkihYj9eo6qt0FrzihYHgw%40mail.gmail.com%3E&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://mail-archives.apache.org/mod_mbox/hbase-user/201507.mbox/%3CCAE8tVdnFf%3Dob569%3DfJkpw1ndVWOVTkihYj9eo6qt0FrzihYHgw%40mail.gmail.com%3E&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Test used to reproduce:&lt;br/&gt;
&lt;a href=&quot;https://github.com/housejester/hbase-debugging#fullgctest&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/housejester/hbase-debugging#fullgctest&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;I tested and had failures in:&lt;/p&gt;

&lt;p&gt;0.98.12 client/server&lt;br/&gt;
0.98.13 client 0.98.12 server&lt;br/&gt;
0.98.13 client/server&lt;br/&gt;
1.1.0 client 0.98.13 server&lt;br/&gt;
0.98.13 client and 1.1.0 server&lt;br/&gt;
0.98.12 client and 1.1.0 server&lt;/p&gt;

&lt;p&gt;I tested without failure in:&lt;/p&gt;

&lt;p&gt;1.1.0 client/server&lt;/p&gt;</description>
                <environment></environment>
        <key id="12850680">HBASE-14177</key>
            <summary>Full GC on client may lead to missing scan results</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="housejester">James Estes</reporter>
                        <labels>
                            <label>dataloss</label>
                    </labels>
                <created>Fri, 31 Jul 2015 19:05:39 +0000</created>
                <updated>Fri, 17 Jun 2016 01:03:01 +0000</updated>
                            <resolved>Fri, 17 Jun 2016 01:03:01 +0000</resolved>
                                    <version>0.98.12</version>
                    <version>0.98.13</version>
                    <version>1.0.2</version>
                                                    <component>Client</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>11</watches>
                                                                <comments>
                            <comment id="14698539" author="stack" created="Sun, 16 Aug 2015 04:42:26 +0000"  >&lt;p&gt;Thanks for digging in &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=housejester&quot; class=&quot;user-hover&quot; rel=&quot;housejester&quot;&gt;James Estes&lt;/a&gt; Nice test. Scan got redone for 1.1. It is not something easily backportable.&lt;/p&gt;</comment>
                            <comment id="14903455" author="ndimiduk" created="Tue, 22 Sep 2015 21:18:46 +0000"  >&lt;p&gt;I missed your meaning here &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;. Is there nothing to fix in 0.98 at least?&lt;/p&gt;

&lt;p&gt;FYI &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14903491" author="apurtell" created="Tue, 22 Sep 2015 21:38:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt;, pretty sure &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; meant scanner improvements in 1.1 avoid this issue, as the reporter confirmed, and the 1.1 changes aren&apos;t easy to backport. (Correct me if I&apos;m wrong.) We&apos;d need to pursue a separate fix for 0.98 and 1.0, or close this as wont fix. &lt;/p&gt;</comment>
                            <comment id="14903867" author="stack" created="Wed, 23 Sep 2015 03:02:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt; What &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; said Sir.&lt;/p&gt;</comment>
                            <comment id="14904839" author="ndimiduk" created="Wed, 23 Sep 2015 17:11:40 +0000"  >&lt;p&gt;Okay. I&apos;ve updated the affects and fixFor versions appropriate to this discussion. Let me know if I got that wrong.&lt;/p&gt;</comment>
                            <comment id="14904858" author="housejester" created="Wed, 23 Sep 2015 17:21:41 +0000"  >&lt;p&gt;Looks ok to me, but to be clear, the issue is only fixed if you have 1.1.0 client and server. Any mix of other versions (even if you have 1.1.0 in the mix) does not fix the issue. This was important for us to know because we were doing a rolling migration where we&apos;d obviously have a mix of versions during the rollout (it was to be an extended duration because we had to upgrade from hadoop 2.2 to 2.6). However, I&apos;m sure keeping that sort of matrix in jira would be difficult. &lt;/p&gt;</comment>
                            <comment id="15335132" author="apurtell" created="Fri, 17 Jun 2016 01:03:01 +0000"  >&lt;p&gt;No update here for a long time. &lt;/p&gt;

&lt;p&gt;Branch-1.0 is EOL. &lt;/p&gt;

&lt;p&gt;While the problem still exists in 0.98, there&apos;s no active work in progress. Reopen if that changes. Also serves as motivation to move off 0.98 to a more recent version. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 16 Aug 2015 04:42:26 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2i71b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>