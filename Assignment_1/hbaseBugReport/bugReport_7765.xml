<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:48:50 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-7765/HBASE-7765.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-7765] A tool to replay HLog entries in case a log file is missed while log splitting</title>
                <link>https://issues.apache.org/jira/browse/HBASE-7765</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;There may be a case where a HLog can escape the Log splitting. &lt;br/&gt;
It will be good to have a standalone tool that reads entries from a HLog, and replays it back to HBase. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12630789">HBASE-7765</key>
            <summary>A tool to replay HLog entries in case a log file is missed while log splitting</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="v.himanshu">Himanshu Vashishtha</assignee>
                                    <reporter username="v.himanshu">Himanshu Vashishtha</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Feb 2013 00:45:32 +0000</created>
                <updated>Thu, 7 Feb 2013 05:46:00 +0000</updated>
                            <resolved>Thu, 7 Feb 2013 05:46:00 +0000</resolved>
                                    <version>0.94.4</version>
                                                    <component>wal</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13570806" author="yuzhihong@gmail.com" created="Tue, 5 Feb 2013 00:48:53 +0000"  >&lt;p&gt;Would WALPlayer serve this purpose ?&lt;/p&gt;</comment>
                            <comment id="13570900" author="v.himanshu" created="Tue, 5 Feb 2013 02:59:06 +0000"  >&lt;p&gt;Thanks Ted; I was not aware of this tool.&lt;/p&gt;</comment>
                            <comment id="13570918" author="stack" created="Tue, 5 Feb 2013 03:34:22 +0000"  >&lt;p&gt;Can we close the issue &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hvashish%40cs.ualberta.ca&quot; class=&quot;user-hover&quot; rel=&quot;hvashish@cs.ualberta.ca&quot;&gt;Himanshu Vashishtha&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="13571035" author="lhofhansl" created="Tue, 5 Feb 2013 04:41:59 +0000"  >&lt;p&gt;Assuming you mean this: &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5604&quot; title=&quot;M/R tool to replay WAL files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5604&quot;&gt;&lt;del&gt;HBASE-5604&lt;/del&gt;&lt;/a&gt;... Note that WALPlayer is actually a M/R based tool. Is that too heavyweight for what you are looking for Himanshu?&lt;/p&gt;</comment>
                            <comment id="13571061" author="v.himanshu" created="Tue, 5 Feb 2013 05:17:43 +0000"  >&lt;p&gt;Yeah, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5604&quot; title=&quot;M/R tool to replay WAL files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5604&quot;&gt;&lt;del&gt;HBASE-5604&lt;/del&gt;&lt;/a&gt;. I think it is okay to have a MR tool for now. In case I need a simpler one, I will reopen this and attach a patch here. Will let you know by tomorrow.&lt;/p&gt;</comment>
                            <comment id="13571328" author="kevin.odell" created="Tue, 5 Feb 2013 14:16:10 +0000"  >&lt;p&gt;If it is a fairly simple patch, I think we could only benefit by having a non-MR version of this tool.  I see a trend in the community to have separate clusters for MR and HBase.&lt;/p&gt;</comment>
                            <comment id="13571874" author="v.himanshu" created="Tue, 5 Feb 2013 23:14:59 +0000"  >&lt;p&gt;Agreed Kevin.&lt;/p&gt;</comment>
                            <comment id="13571943" author="stack" created="Tue, 5 Feb 2013 23:50:16 +0000"  >&lt;p&gt;Closing lads because WALPlayer has a main already... Its a Tool.  Has some nice args:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 45   &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void usage(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; errorMsg) {
 44     &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (errorMsg != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; errorMsg.length() &amp;gt; 0) {
 43       &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;ERROR: &quot;&lt;/span&gt; + errorMsg);
 42     }
 41     &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Usage: &quot;&lt;/span&gt; + NAME + &lt;span class=&quot;code-quote&quot;&gt;&quot; [options] &amp;lt;wal inputdir&amp;gt; &amp;lt;tables&amp;gt; [&amp;lt;tableMappings&amp;gt;]&quot;&lt;/span&gt;);
 40     &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Read all WAL entries &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &amp;lt;tables&amp;gt;.&quot;&lt;/span&gt;);
 39     &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;If no tables (\&quot;&lt;/span&gt;\&lt;span class=&quot;code-quote&quot;&gt;&quot;) are specific, all tables are imported.&quot;&lt;/span&gt;);
 38     &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;(Careful, even -ROOT- and .META. entries will be imported in that &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt;.)&quot;&lt;/span&gt;);
 37     &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Otherwise &amp;lt;tables&amp;gt; is a comma separated list of tables.\n&quot;&lt;/span&gt;);
 36     &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;The WAL entries can be mapped to &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; set of tables via &amp;lt;tableMapping&amp;gt;.&quot;&lt;/span&gt;);
 35     &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;lt;tableMapping&amp;gt; is a command separated list of targettables.&quot;&lt;/span&gt;);
 34     &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;If specified, each table in &amp;lt;tables&amp;gt; must have a mapping.\n&quot;&lt;/span&gt;);
 33     &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;By &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; &quot;&lt;/span&gt; + NAME + &lt;span class=&quot;code-quote&quot;&gt;&quot; will load data directly into HBase.&quot;&lt;/span&gt;);
 32     &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;To generate HFiles &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; a bulk data load instead, pass the option:&quot;&lt;/span&gt;);
 31     &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;  -D&quot;&lt;/span&gt; + BULK_OUTPUT_CONF_KEY + &lt;span class=&quot;code-quote&quot;&gt;&quot;=/path/&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;/output&quot;&lt;/span&gt;);
 30     &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;  (Only one table can be specified, and no mapping is allowed!)&quot;&lt;/span&gt;);
 29     &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Other options: (specify time range to WAL edit to consider)&quot;&lt;/span&gt;);
 28     &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;  -D&quot;&lt;/span&gt; + HLogInputFormat.START_TIME_KEY + &lt;span class=&quot;code-quote&quot;&gt;&quot;=[date|ms]&quot;&lt;/span&gt;);
 27     &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;  -D&quot;&lt;/span&gt; + HLogInputFormat.END_TIME_KEY + &lt;span class=&quot;code-quote&quot;&gt;&quot;=[date|ms]&quot;&lt;/span&gt;);
 26     &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;For performance also consider the following options:\n&quot;&lt;/span&gt;
 25         + &lt;span class=&quot;code-quote&quot;&gt;&quot;  -Dmapred.map.tasks.speculative.execution=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;\n&quot;&lt;/span&gt;
 24         + &lt;span class=&quot;code-quote&quot;&gt;&quot;  -Dmapred.reduce.tasks.speculative.execution=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt;);
 23   }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;It even has a bit of doc going on: &lt;a href=&quot;http://hbase.apache.org/book.html#walplayer&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hbase.apache.org/book.html#walplayer&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13571980" author="stack" created="Wed, 6 Feb 2013 00:29:32 +0000"  >&lt;p&gt;Reopening.  Himanshu showed me that this a MR job.  Sorry for closing lads.&lt;/p&gt;

&lt;p&gt;Himanshu is messing w/ passing a local flag so we run the mapreduce job all in context.... so we don&apos;t have to make any change for this issue other than just update the manual.&lt;/p&gt;

&lt;p&gt;St.Ack&lt;/p&gt;</comment>
                            <comment id="13572023" author="v.himanshu" created="Wed, 6 Feb 2013 01:18:41 +0000"  >&lt;p&gt;Yes, one can use it in local mode too:&lt;/p&gt;

&lt;p&gt;We don&apos;t need any patch for local; probably, we can doc something like this in the book:&lt;br/&gt;
To run WALPlayer mapreduce job (or rather any mapreduce job) in a local mode, use &quot;-Dmapred.job.tracker=local&quot; option. To use local filesystem, use &quot;-Dfs.default.name=&lt;a href=&quot;file:///&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:///&lt;/a&gt;&quot; option. By default, these jobs will look for MapReduce (JobTracker/TaskTracker) processes and HDFS.&lt;/p&gt;</comment>
                            <comment id="13572230" author="stack" created="Wed, 6 Feb 2013 06:58:33 +0000"  >&lt;p&gt;Thanks Himanshu.  I just committed below:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@@ -263,6 +266,10 @@
 &amp;lt;programlisting&amp;gt;$ bin/hbase org.apache.hadoop.hbase.mapreduce.WALPlayer /backuplogdir oldTable1,oldTable2 newTable1,newTable2
 &amp;lt;/programlisting&amp;gt;
        &amp;lt;/para&amp;gt;
+       &amp;lt;para&amp;gt;
+           WALPlayer, by &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;, runs as a mapreduce job.  To NOT run WALPlayer as a mapreduce job on your cluster,
+           force it to run all in the local process by adding the flags &amp;lt;code&amp;gt;-Dmapred.job.tracker=local&amp;lt;/code&amp;gt; on the command line.
+       &amp;lt;/para&amp;gt;
     &amp;lt;/section&amp;gt;
     &amp;lt;section xml:id=&lt;span class=&quot;code-quote&quot;&gt;&quot;rowcounter&quot;&lt;/span&gt;&amp;gt;
        &amp;lt;title&amp;gt;RowCounter and CellCounter&amp;lt;/title&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Hopefully that&apos;ll do it.  Will now close this issue hopefully for good.  Again sorry for premature close Himanshu and Kevin.&lt;/p&gt;</comment>
                            <comment id="13572267" author="hudson" created="Wed, 6 Feb 2013 08:34:53 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3855 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3855/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3855/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7765&quot; title=&quot;A tool to replay HLog entries in case a log file is missed while log splitting&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7765&quot;&gt;&lt;del&gt;HBASE-7765&lt;/del&gt;&lt;/a&gt; A tool to replay HLog entries in case a log file is missed while log splitting (Revision 1442853)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/docbkx/ops_mgt.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13572395" author="hudson" created="Wed, 6 Feb 2013 13:15:11 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #394 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/394/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/394/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7765&quot; title=&quot;A tool to replay HLog entries in case a log file is missed while log splitting&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7765&quot;&gt;&lt;del&gt;HBASE-7765&lt;/del&gt;&lt;/a&gt; A tool to replay HLog entries in case a log file is missed while log splitting (Revision 1442853)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/docbkx/ops_mgt.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 5 Feb 2013 00:48:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>311285</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 45 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1hpy7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>311631</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>