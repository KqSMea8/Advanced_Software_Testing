<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:08:01 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-3180/HBASE-3180.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-3180] Review periodic master logging, especially ServerManager once a minute</title>
                <link>https://issues.apache.org/jira/browse/HBASE-3180</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Not including &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3179&quot; title=&quot;Enable ReplicationLogsCleaner only if replication is, and fix its test&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3179&quot;&gt;&lt;del&gt;HBASE-3179&lt;/del&gt;&lt;/a&gt;, the master logs of a steady-state cluster are something like:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2010-10-30 10:03:59,876 INFO org.apache.hadoop.hbase.master.ServerManager: regionservers=86, averageload=28.05
2010-10-30 10:04:59,886 INFO org.apache.hadoop.hbase.master.ServerManager: regionservers=86, averageload=28.05
2010-10-30 10:05:59,894 INFO org.apache.hadoop.hbase.master.ServerManager: regionservers=86, averageload=28.05
2010-10-30 10:06:59,904 INFO org.apache.hadoop.hbase.master.ServerManager: regionservers=86, averageload=28.05
2010-10-30 10:07:59,914 INFO org.apache.hadoop.hbase.master.ServerManager: regionservers=86, averageload=28.05
2010-10-30 10:08:05,941 DEBUG org.apache.hadoop.hbase.master.LoadBalancer: Skipping load balancing.  servers=86 regions=2401 average=27.918604 mostloaded=28 leastloaded=28
2010-10-30 10:08:07,128 INFO org.apache.hadoop.hbase.master.CatalogJanitor: Scanned 2399 catalog row(s) and gc&apos;d 0 unreferenced parent region(s)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Let&apos;s review these and see if there&apos;s anything we want to take out or add.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12478767">HBASE-3180</key>
            <summary>Review periodic master logging, especially ServerManager once a minute</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="streamy">Jonathan Gray</assignee>
                                    <reporter username="streamy">Jonathan Gray</reporter>
                        <labels>
                    </labels>
                <created>Sun, 31 Oct 2010 18:42:05 +0000</created>
                <updated>Fri, 20 Nov 2015 12:40:38 +0000</updated>
                            <resolved>Tue, 2 Nov 2010 04:18:15 +0000</resolved>
                                    <version>0.90.0</version>
                                    <fixVersion>0.90.0</fixVersion>
                                    <component>master</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12926754" author="streamy" created="Sun, 31 Oct 2010 18:45:32 +0000"  >&lt;p&gt;I would say, let&apos;s drop this ServerManager chore (which just does this logging) to once every 5 minutes (that&apos;s what LB and CJ are at).  Is there any other info ServerManager could tell us?&lt;/p&gt;

&lt;p&gt;I think the CatalogJanitor message may belong at DEBUG?  I&apos;d say INFO level if it&apos;s not the &quot;i didn&apos;t do anything&quot; message, like in the load balancer.&lt;/p&gt;</comment>
                            <comment id="12926755" author="streamy" created="Sun, 31 Oct 2010 18:46:33 +0000"  >&lt;p&gt;And if ServerManager does a log, should AssignmentManager?  What info is useful to log in the master at steady state?&lt;/p&gt;</comment>
                            <comment id="12926773" author="streamy" created="Sun, 31 Oct 2010 20:00:09 +0000"  >&lt;p&gt;Changes:  ServerManager log increased to 5 minutes, log at DEBUG in CatalogJanitor if cleaned==0&lt;/p&gt;</comment>
                            <comment id="12927108" author="stack" created="Mon, 1 Nov 2010 19:46:50 +0000"  >&lt;p&gt;Those servermonitor emissions are a dup of what the loadbalancer says.  Kill the servermonitor I&apos;d say (you might have to add deadserver output to load balancer).  Otherwise, all rest is good.&lt;/p&gt;</comment>
                            <comment id="12927114" author="streamy" created="Mon, 1 Nov 2010 19:57:54 +0000"  >&lt;p&gt;Well, difference is that load balancer no-op message is DEBUG.  Of above messages, it&apos;s only ServerManager that is INFO level (so if not running at DEBUG, this is only periodic line you see).&lt;/p&gt;</comment>
                            <comment id="12927120" author="stack" created="Mon, 1 Nov 2010 20:03:06 +0000"  >&lt;p&gt;Change LB to be INFO level.. informational.  Would need to print out balance info even if not going to balance (because of RIT).  Seems silly running a thread to dup or near-dup the LB info.&lt;/p&gt;</comment>
                            <comment id="12927121" author="stack" created="Mon, 1 Nov 2010 20:03:48 +0000"  >&lt;p&gt;Oh, i took a look at SM and nothing else that I can see worth emitting on a period.&lt;/p&gt;</comment>
                            <comment id="12927260" author="streamy" created="Tue, 2 Nov 2010 02:24:36 +0000"  >&lt;p&gt;Removes logging/thread in ServerManager.  Increases LB log to INFO.  Includes same change from previous patch where we don&apos;t log if CatalogJanitor does nothing.&lt;/p&gt;</comment>
                            <comment id="12927261" author="streamy" created="Tue, 2 Nov 2010 02:25:26 +0000"  >&lt;p&gt;correction... in CatalogJanitor, we now log at DEBUG if we do nothing and will log at INFO if it does any cleanup&lt;/p&gt;</comment>
                            <comment id="12927286" author="stack" created="Tue, 2 Nov 2010 03:41:55 +0000"  >&lt;p&gt;+1 (You might add logging of dead servers if &amp;gt; 0 to the log message in LB?).&lt;/p&gt;</comment>
                            <comment id="12927288" author="streamy" created="Tue, 2 Nov 2010 03:46:08 +0000"  >&lt;p&gt;It&apos;d be a complete hack.  Would have to add a new argument into LB method which wouldn&apos;t make much sense.  We should be seeing dead server processing regardless?&lt;/p&gt;</comment>
                            <comment id="12927290" author="stack" created="Tue, 2 Nov 2010 03:51:17 +0000"  >&lt;p&gt;nm then.  +1 on commit.&lt;/p&gt;</comment>
                            <comment id="12927293" author="streamy" created="Tue, 2 Nov 2010 04:18:15 +0000"  >&lt;p&gt;Committed v2.  Thanks stack.&lt;/p&gt;</comment>
                            <comment id="15016763" author="lars_francke" created="Fri, 20 Nov 2015 12:40:38 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12458520" name="HBASE-3180-v1.patch" size="1706" author="streamy" created="Sun, 31 Oct 2010 20:00:09 +0000"/>
                            <attachment id="12458599" name="HBASE-3180-v2.patch" size="6709" author="streamy" created="Tue, 2 Nov 2010 02:24:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 1 Nov 2010 19:46:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32938</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hl27:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>100674</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>