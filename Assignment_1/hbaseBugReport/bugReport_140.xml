<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:41:25 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-140/HBASE-140.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-140] [hbase] Fix assertion failures in TestTableMapReduce</title>
                <link>https://issues.apache.org/jira/browse/HBASE-140</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;TestTableMapReduce consists of two tests: a very simple one that verifies that it is working, and a larger test that verifies that it works when the table consists of multiple regions.&lt;/p&gt;

&lt;p&gt;There are two failure modes:&lt;/p&gt;

&lt;p&gt;1) an assertion failure in the verify method&lt;/p&gt;

&lt;p&gt;2) the test times out because something does not shut down cleanly.&lt;/p&gt;

&lt;p&gt;to figure out what is causing these failures, the first step will be to do copious logging in the test. Once the root cause is determined, we can address it.&lt;/p&gt;

&lt;p&gt;Unfortunately, some of the testing will have to be done via Hudson, because that is the only environment in which it fails. We routinely test under Windows, Fedora Core 6, MacOsX, and Ubuntu. Windows and Ubuntu have both single and dual processor configurations. FC6 and MacOS run on dual core machines.&lt;/p&gt;

&lt;p&gt;Only Hudson seems crippled enough to demonstrate these problems. (A good thing since they are real problems)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12383682">HBASE-140</key>
            <summary>[hbase] Fix assertion failures in TestTableMapReduce</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jimk">Jim Kellerman</reporter>
                        <labels>
                    </labels>
                <created>Fri, 30 Nov 2007 23:04:13 +0000</created>
                <updated>Fri, 22 Aug 2008 21:34:50 +0000</updated>
                            <resolved>Wed, 12 Dec 2007 00:42:25 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12547576" author="jimk" created="Sun, 2 Dec 2007 04:59:43 +0000"  >&lt;p&gt;This problem should be fixed by &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-87&quot; title=&quot;[hbase] ConcurrentModificationException doing get of all region start keys&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-87&quot;&gt;&lt;del&gt;HADOOP-2309&lt;/del&gt;&lt;/a&gt;. Leaving issue open in case there are future failures.&lt;/p&gt;</comment>
                            <comment id="12549670" author="jimk" created="Sat, 8 Dec 2007 08:01:50 +0000"  >&lt;p&gt;The test timing out because something does not shut down cleanly should be fixed by &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-246&quot; title=&quot;[hbase] NPE in master server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-246&quot;&gt;&lt;del&gt;HADOOP-2338&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I have not seen an assertion failure for some time in either patch or nightly builds.&lt;/p&gt;

&lt;p&gt;The latest nightly build failure (build #325) failed because the client ran out of retries. This can probably be fixed by tweaking some config parameters.&lt;/p&gt;

&lt;p&gt;Downgrading priority to minor, because it is annoying, but should be easy to fix if it should occur again.&lt;/p&gt;</comment>
                            <comment id="12549816" author="jimk" created="Sun, 9 Dec 2007 07:59:17 +0000"  >&lt;p&gt;TestTableJoinMapReduce failed in Hadoop-Nightly #326 - investigating&lt;/p&gt;</comment>
                            <comment id="12549817" author="jimk" created="Sun, 9 Dec 2007 08:01:30 +0000"  >&lt;p&gt;TestTableMapReduce failed in Hadoop-Patch #1303 - investigating&lt;/p&gt;</comment>
                            <comment id="12550148" author="jimk" created="Mon, 10 Dec 2007 18:44:49 +0000"  >&lt;p&gt;Failed in nightly build #328&lt;/p&gt;

&lt;p&gt;The weird thing about this failure is that the master updates the meta to indicate that the child split regions are being served, the client can find the children in the meta table, but the meta table scanner doesn&apos;t and proceeds to assign the child regions again:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

    [junit] 2007-12-10 12:22:53,353 INFO  [HMaster] org.apache.hadoop.hbase.HMaster$ProcessRegionOpen.process(HMaster.java:2461): updating row mrtest,kps~`@#$%^&amp;amp;*()-_+=:;&apos;,.&amp;lt;&amp;gt;/?[]{}|,1197289367489 in table .META.,,1 with startcode 1197289296412 and server 140.211.11.75:35921

    [junit] 2007-12-10 12:22:53,355 INFO  [HMaster] org.apache.hadoop.hbase.HMaster$ProcessRegionOpen.process(HMaster.java:2461): updating row mrtest,eya~`@#$%^&amp;amp;*()-_+=:;&apos;,.&amp;lt;&amp;gt;/?[]{}|,1197289367489 in table .META.,,1 with startcode 1197289296412 and server 140.211.11.75:35921

    [junit] 2007-12-10 12:22:57,540 DEBUG [main] org.apache.hadoop.hbase.HConnectionManager$TableServers.findServersForTable(HConnectionManager.java:446): Wiping out all we know of mrtest
    [junit] 2007-12-10 12:22:57,556 DEBUG [main] org.apache.hadoop.hbase.HConnectionManager$TableServers.scanOneMetaRegion(HConnectionManager.java:763): Found 3 servers &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; table mrtest
    [junit] 2007-12-10 12:22:57,557 DEBUG [main] org.apache.hadoop.hbase.HConnectionManager$TableServers.reloadTableServers(HConnectionManager.java:342): Result of findTable on mrtest: 0. address=140.211.11.75:35921, mrtest,,1197289343222 1. address=140.211.11.75:35921, mrtest,eya~`@#$%^&amp;amp;*()-_+=:;&apos;,.&amp;lt;&amp;gt;/?[]{}|,1197289367489 2. address=140.211.11.75:35921, mrtest,kps~`@#$%^&amp;amp;*()-_+=:;&apos;,.&amp;lt;&amp;gt;/?[]{}|,1197289367489

    [junit] 2007-12-10 12:23:02,726 INFO  [HMaster.metaScanner] org.apache.hadoop.hbase.HMaster$BaseScanner.scanRegion(HMaster.java:213): HMaster.metaScanner scanning meta region regionname: .META.,,1, startKey: &amp;lt;&amp;gt;, server: 140.211.11.75:35921}

    [junit] 2007-12-10 12:23:02,738 DEBUG [HMaster.metaScanner] org.apache.hadoop.hbase.HMaster$BaseScanner.scanRegion(HMaster.java:249): HMaster.metaScanner regioninfo: {regionname: mrtest,eya~`@#$%^&amp;amp;*()-_+=:;&apos;,.&amp;lt;&amp;gt;/?[]{}|,1197289367489, startKey: &amp;lt;eya~`@#$%^&amp;amp;*()-_+=:;&apos;,.&amp;lt;&amp;gt;/?[]{}|&amp;gt;, tableDesc: {name: mrtest, families: {contents:={name: contents, max versions: 3, compression: NONE, in memory: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, max length: 2147483647, bloom filter: none}, text:={name: text, max versions: 3, compression: NONE, in memory: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, max length: 2147483647, bloom filter: none}}}}, server: , startCode: -1
    [junit] 2007-12-10 12:23:02,738 DEBUG [HMaster.metaScanner] org.apache.hadoop.hbase.HMaster$BaseScanner.checkAssigned(HMaster.java:469): Current assignment of mrtest,eya~`@#$%^&amp;amp;*()-_+=:;&apos;,.&amp;lt;&amp;gt;/?[]{}|,1197289367489 is no good
    [junit] 2007-12-10 12:23:02,739 DEBUG [HMaster.metaScanner] org.apache.hadoop.hbase.HMaster$BaseScanner.scanRegion(HMaster.java:249): HMaster.metaScanner regioninfo: {regionname: mrtest,kps~`@#$%^&amp;amp;*()-_+=:;&apos;,.&amp;lt;&amp;gt;/?[]{}|,1197289367489, startKey: &amp;lt;kps~`@#$%^&amp;amp;*()-_+=:;&apos;,.&amp;lt;&amp;gt;/?[]{}|&amp;gt;, tableDesc: {name: mrtest, families: {contents:={name: contents, max versions: 3, compression: NONE, in memory: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, max length: 2147483647, bloom filter: none}, text:={name: text, max versions: 3, compression: NONE, in memory: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, max length: 2147483647, bloom filter: none}}}}, server: , startCode: -1
    [junit] 2007-12-10 12:23:02,739 DEBUG [HMaster.metaScanner] org.apache.hadoop.hbase.HMaster$BaseScanner.checkAssigned(HMaster.java:469): Current assignment of mrtest,kps~`@#$%^&amp;amp;*()-_+=:;&apos;,.&amp;lt;&amp;gt;/?[]{}|,1197289367489 is no good
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12550770" author="jimk" created="Wed, 12 Dec 2007 00:42:25 +0000"  >&lt;p&gt;Tests passed. Committed. If the problem should reoccur, we will open a new Jira.&lt;/p&gt;</comment>
                            <comment id="12550945" author="hudson" created="Wed, 12 Dec 2007 12:22:05 +0000"  >&lt;p&gt;Integrated in Hadoop-Nightly #330 (See &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Nightly/330/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Nightly/330/&lt;/a&gt;)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 12 Dec 2007 12:22:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24924</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h4r3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98032</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>