<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:58:23 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-8772/HBASE-8772.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-8772] Separate Replication from HBase RegionServer process</title>
                <link>https://issues.apache.org/jira/browse/HBASE-8772</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Replication is a separate functionality than managing regions and should be able to be managed separately as a service rather than rolled into RegionServer. Load on RegionServer, gc etc shouldn&apos;t affect the replication service.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12653821">HBASE-8772</key>
            <summary>Separate Replication from HBase RegionServer process</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sameerv">Sameer Vaishampayan</reporter>
                        <labels>
                            <label>performance</label>
                    </labels>
                <created>Wed, 19 Jun 2013 23:07:08 +0000</created>
                <updated>Thu, 27 Jun 2013 19:56:19 +0000</updated>
                                                                            <component>regionserver</component>
                    <component>Replication</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>15</watches>
                                                                <comments>
                            <comment id="13689951" author="apurtell" created="Fri, 21 Jun 2013 01:36:09 +0000"  >&lt;p&gt;So we should set up and manage separate replicator processes? HBase is already considered to have too many moving parts. How do we deal with that?&lt;/p&gt;

&lt;p&gt;On the other hand, maybe a small refactoring would give us a Main somewhere where it could be an option if you want to take it on. But this would not be a default. Would that work?&lt;/p&gt;</comment>
                            <comment id="13689963" author="jesse_yates" created="Fri, 21 Jun 2013 01:59:37 +0000"  >&lt;p&gt;this came up from some discussions we&apos;ve been having recently. The replication stuff is already logically separate from everything else (even has minimum cross-package dependencies). IMO, i don&apos;t think we should remove the ability to make it a built-in part of HBase, but the ability to run it separately could make it better (less chance of conflicts with other elements in a RS) and more flexible (maybe support a pull based mechanism?).&lt;/p&gt;</comment>
                            <comment id="13689964" author="jesse_yates" created="Fri, 21 Jun 2013 02:00:26 +0000"  >&lt;p&gt;yeah, a main() would be almost all we need... definitely an &quot;advanced usage&quot; feature.&lt;/p&gt;</comment>
                            <comment id="13689967" author="apurtell" created="Fri, 21 Jun 2013 02:02:11 +0000"  >&lt;blockquote&gt;&lt;p&gt;yeah, a main() would be almost all we need&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13690771" author="jdcryans" created="Fri, 21 Jun 2013 21:57:34 +0000"  >&lt;p&gt;I disagree that a main() is all we need. Currently the code has a strong sense of identity with the region server running it&apos;s running in, not sure what happens then if you restart the RS but not the replication process.&lt;/p&gt;

&lt;p&gt;The other big thing IMO is the preLogRoll/postLogRoll related to the WALActionsListener that we use to add new logs to keep track off.&lt;/p&gt;</comment>
                            <comment id="13692886" author="jeason" created="Tue, 25 Jun 2013 09:28:03 +0000"  >&lt;p&gt;Aggreed with J-D. Below is some key points need to consider in my own understanding:&lt;br/&gt;
1. Seperated process only for ReplicationSource? Meanwhile, ReplicationSink could also be impacted by GC triggered by RegionServer, although ReplicationSink is not a seperated thread currently.&lt;br/&gt;
2. Need to introduce a new RPC interface? RegionInterface can not be used any more.&lt;br/&gt;
3. Need to track logs itself.&lt;br/&gt;
4. Queue-Failover is more complicated. Since RegionServer may have aborted but Replication process still be there, and vice versa. So each replication process should be registered in ZooKeeper, and tracked by each RegionServer.&lt;br/&gt;
5. Support for security.&lt;/p&gt;</comment>
                            <comment id="13695004" author="sameerv" created="Thu, 27 Jun 2013 19:56:19 +0000"  >&lt;p&gt;In my testing I have seen replication slow down significantly on several unrelated things (to replication). Observed itfor compactions, major compactions, gc in regionservers. More nuanced is that the replication balancing of files is based on the regionserver&apos;s regions. Maybe I am not putting it correctly, but heres the scenario I see,&lt;/p&gt;

&lt;p&gt;in a cluster of 16 data nodes, couple of them have active region servers and are seeing pileup of to-replicate-files in zkdump. 14 other nodes are sitting idle saying nothing to replicate. surely the cluster as a whole has much greater capability to replicate. Maybe this replication rebalancing is a separate feature but it surely could be separated out from balancing regions. As after the pileup has occured even balancing regions does little good, right away. If only I could reassign/move the to-replicate files to idle machines.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 21 Jun 2013 01:36:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>334098</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 25 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1lmsv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>334424</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>