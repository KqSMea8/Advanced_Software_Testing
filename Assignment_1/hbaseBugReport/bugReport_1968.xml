<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:57:52 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1968/HBASE-1968.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1968] Give clients access to the write buffer</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1968</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;From a Trend dev team:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;When insert rows into one table by calling the method public synchronized void put(final Put put), if the column family of one row does not exist, the insert operation will failed and throw NoSuchColumnFamilyException.. We observed that all the following insert operation will fails even though all of them have valid column family. That is one exception of insert operation can cause failure of all the following insert operation.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Their further analysis explains in detail the scenario, which I will summarize here:&lt;/p&gt;

&lt;p&gt;1) An invalid put is added to the writeBuffer by put(Put put). It will trigger a NoSuchColumnFamilyException once it goes to the region server.&lt;/p&gt;

&lt;p&gt;2) At some point, the buffer is flushed.&lt;/p&gt;

&lt;p&gt;3) When the invalid put is processed, an exception is thrown. The finally clause of flushCommits() removes all successful puts from the writebuffer list but the failed put remains at the top. This entry becomes an immovable blocker which prevents any subsequent entry from being processed. &lt;/p&gt;

&lt;p&gt;4) Subsequent puts will add more entries to the write buffer until the buffer limit is reached, compounding the problem by allowing more edits to be queued which can never be processed. &lt;/p&gt;

&lt;p&gt;A workaround could be for the client to call getWriteBuffer() &amp;#8211; on trunk &amp;#8211; and remove the entry at the head of the list manually, but without the patch on this issue, the client cannot get access to the list on branch. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12440250">HBASE-1968</key>
            <summary>Give clients access to the write buffer</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="apurtell">Andrew Purtell</assignee>
                                    <reporter username="apurtell">Andrew Purtell</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Nov 2009 04:53:49 +0000</created>
                <updated>Fri, 12 Oct 2012 06:13:23 +0000</updated>
                            <resolved>Tue, 10 Nov 2009 04:56:59 +0000</resolved>
                                                    <fixVersion>0.20.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12775281" author="apurtell" created="Tue, 10 Nov 2009 04:54:36 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Index: src/java/org/apache/hadoop/hbase/client/HTable.java
===================================================================
--- src/java/org/apache/hadoop/hbase/client/HTable.java	(revision 834067)
+++ src/java/org/apache/hadoop/hbase/client/HTable.java	(working copy)
@@ -709,6 +709,14 @@
     }
   }
 
+  /**
+   * Get the write buffer
+   * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; the current write buffer
+   */
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; ArrayList&amp;lt;Put&amp;gt; getWriteBuffer() {
+    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; writeBuffer;
+  }
+
   &lt;span class=&quot;code-comment&quot;&gt;// Old API. Pre-hbase-880, hbase-1304.
&lt;/span&gt;   
   /**
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12775283" author="apurtell" created="Tue, 10 Nov 2009 04:56:59 +0000"  >&lt;p&gt;Committed trivial patch to 0.20 branch. &lt;/p&gt;</comment>
                            <comment id="12775284" author="jdcryans" created="Tue, 10 Nov 2009 04:59:23 +0000"  >&lt;p&gt;Any reason not to apply it on trunk?&lt;/p&gt;</comment>
                            <comment id="12775291" author="apurtell" created="Tue, 10 Nov 2009 05:12:54 +0000"  >&lt;p&gt;getWriteBuffer is already available on trunk.&lt;/p&gt;</comment>
                            <comment id="12775293" author="jdcryans" created="Tue, 10 Nov 2009 05:14:54 +0000"  >&lt;p&gt;Sorry brain lag &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 10 Nov 2009 04:59:23 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32337</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 6 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08s4f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>49156</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>