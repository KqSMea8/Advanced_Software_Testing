<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:17:29 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4277/HBASE-4277.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4277] HRS.closeRegion should be able to close regions with only the encoded name</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4277</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;As suggested by Stack in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4217&quot; title=&quot;HRS.closeRegion should be able to close regions with only the encoded name&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4217&quot;&gt;&lt;del&gt;HBASE-4217&lt;/del&gt;&lt;/a&gt; creating a new issue to provide a patch for 0.90.x version.&lt;/p&gt;


&lt;p&gt;We had some sort of an outage this morning due to a few racks losing power, and some regions were left in the following state:&lt;/p&gt;

&lt;p&gt;ERROR: Region UNKNOWN_REGION on sv4r17s9:60020, key=e32bbe1f48c9b3633c557dc0291b90a3, not on HDFS or in META but deployed on sv4r17s9:60020&lt;/p&gt;

&lt;p&gt;That region was deleted by the master but the region server never got the memo. Right now there&apos;s no way to force close it because HRS.closeRegion requires an HRI and the only way to create one is to get it from .META. which in our case doesn&apos;t contain a row for that region. Basically we have to wait until that server is dead to get rid of the region and make hbck happy.&lt;/p&gt;

&lt;p&gt;The required change is to have closeRegion accept an encoded name in both HBA (when the RS address is provided) and HRS since it&apos;s able to find it anyways from it&apos;s list of live regions.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;If a 0.90 version, we maybe should do that in another issue.&lt;/p&gt;&lt;/blockquote&gt;</description>
                <environment></environment>
        <key id="12520535">HBASE-4277</key>
            <summary>HRS.closeRegion should be able to close regions with only the encoded name</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ram_krish">ramkrishna.s.vasudevan</assignee>
                                    <reporter username="ram_krish">ramkrishna.s.vasudevan</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Aug 2011 08:18:08 +0000</created>
                <updated>Fri, 20 Nov 2015 11:55:55 +0000</updated>
                            <resolved>Wed, 2 Nov 2011 04:54:02 +0000</resolved>
                                    <version>0.90.4</version>
                                    <fixVersion>0.90.5</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13092846" author="yuzhihong@gmail.com" created="Mon, 29 Aug 2011 14:11:25 +0000"  >&lt;p&gt;+1 on patch.&lt;/p&gt;</comment>
                            <comment id="13093078" author="stack" created="Mon, 29 Aug 2011 18:48:01 +0000"  >&lt;p&gt;Patch looks good to me (Thanks for doing this RAM).  Marking critical on 0.90.5.  Before committing, I&apos;d like to check that the addition of new methods to Interface do not break rolling restart.&lt;/p&gt;</comment>
                            <comment id="13104406" author="ram_krish" created="Wed, 14 Sep 2011 10:33:26 +0000"  >&lt;p&gt;For rolling restart verification the following steps were taken&lt;br/&gt;
-&amp;gt; Start 2 RS with 0.90.x version one with patch other without patch.&lt;br/&gt;
-&amp;gt; Have a client with the patched version&lt;br/&gt;
-&amp;gt; Call the new api added in this defect for a region in the patched version&lt;br/&gt;
   This works fine.&lt;br/&gt;
-&amp;gt; Call a region in the unpatch version&lt;br/&gt;
   We get NoSuchMethod found exception.&lt;/p&gt;
</comment>
                            <comment id="13106961" author="stack" created="Sat, 17 Sep 2011 00:32:11 +0000"  >&lt;p&gt;This is a 0.90.5 issue, not for 0.92.0.  Moving it out.&lt;/p&gt;</comment>
                            <comment id="13135727" author="stack" created="Wed, 26 Oct 2011 05:42:45 +0000"  >&lt;p&gt;+1 on commit to 0.90.  I brought up a patched server and it was able to take loads fine.  I then talked to it with an UNPATCHED client doing moves and gets.  Seems fine.&lt;/p&gt;</comment>
                            <comment id="13139933" author="ram_krish" created="Mon, 31 Oct 2011 05:42:41 +0000"  >&lt;p&gt;I will see if the patch still applies if not will prepare an updated on and then commit it.&lt;br/&gt;
Thanks for your review Stack&lt;/p&gt;</comment>
                            <comment id="13140135" author="ram_krish" created="Mon, 31 Oct 2011 13:17:22 +0000"  >&lt;p&gt;The patch applies as is.. If it is ok I can go ahead and commit it.  Pls share your comments.&lt;/p&gt;</comment>
                            <comment id="13140270" author="stack" created="Mon, 31 Oct 2011 16:23:10 +0000"  >&lt;p&gt;+1 on commit&lt;/p&gt;</comment>
                            <comment id="13140968" author="ram_krish" created="Tue, 1 Nov 2011 06:07:07 +0000"  >&lt;p&gt;Tests passes...&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  testClockSkewDetection(org.apache.hadoop.hbase.master.TestClockSkewDetection): hostname can&apos;t be &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
  testScanner(org.apache.hadoop.hbase.regionserver.TestScanner): hostname can&apos;t be &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This failure is not due to the patch for this JIRA.&lt;/p&gt;
</comment>
                            <comment id="13141289" author="stack" created="Tue, 1 Nov 2011 16:22:49 +0000"  >&lt;p&gt;++1 on commit (smile)&lt;/p&gt;</comment>
                            <comment id="13141922" author="ram_krish" created="Wed, 2 Nov 2011 04:54:02 +0000"  >&lt;p&gt;Integrated to 0.90.5. Thanks for your reviews Stack and Ted.&lt;/p&gt;</comment>
                            <comment id="15016610" author="lars_francke" created="Fri, 20 Nov 2015 11:55:55 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12519155">HBASE-4217</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12492063" name="HBASE-4277_0.90.patch" size="16022" author="ram_krish" created="Mon, 29 Aug 2011 12:20:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 29 Aug 2011 14:11:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>27240</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hq7r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>101509</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>