<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 21:02:21 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-15330/HBASE-15330.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-15330] HBase Backup/Restore Phase 3: support delete/truncate table</title>
                <link>https://issues.apache.org/jira/browse/HBASE-15330</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Currently, we do not track delete/recreate or truncate table events&lt;/p&gt;</description>
                <environment></environment>
        <key id="12944611">HBASE-15330</key>
            <summary>HBase Backup/Restore Phase 3: support delete/truncate table</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="vrodionov">Vladimir Rodionov</reporter>
                        <labels>
                    </labels>
                <created>Thu, 25 Feb 2016 19:24:55 +0000</created>
                <updated>Tue, 7 Jun 2016 01:03:26 +0000</updated>
                            <resolved>Tue, 7 Jun 2016 01:03:26 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="15167702" author="vrodionov" created="Thu, 25 Feb 2016 19:29:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=devaraj&quot; class=&quot;user-hover&quot; rel=&quot;devaraj&quot;&gt;Devaraj Das&lt;/a&gt; FYI.&lt;/p&gt;</comment>
                            <comment id="15167719" author="enis" created="Thu, 25 Feb 2016 19:36:02 +0000"  >&lt;p&gt;I was thinking of something like: &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Save the HTDs with every backup, full or incremental.&lt;/li&gt;
	&lt;li&gt;Restore operation creates the table from the snapshot HTD.&lt;/li&gt;
	&lt;li&gt;Before replaying WALs, alter the table.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;However, one challenge is that, the table can be dropped, recreated, truncated etc in between, and it is not obvious how to handle a truncated table for example. &lt;/p&gt;

&lt;p&gt;On other challenge that above does not address is something like this: &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Create table t1 with CF1&lt;/li&gt;
	&lt;li&gt;write some data&lt;/li&gt;
	&lt;li&gt;Full backup&lt;/li&gt;
	&lt;li&gt;Alter table add CF2&lt;/li&gt;
	&lt;li&gt;Write some data to CF1 + CF2&lt;/li&gt;
	&lt;li&gt;Alter table to drop CF2&lt;/li&gt;
	&lt;li&gt;Incremental backup t1.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Now on restore replay, we cannot replay edits of CF2. One solution (that we do elsewhere as well) is to drop the cells for the CFs that does not belong to the table at the restore point. &lt;/p&gt;</comment>
                            <comment id="15167733" author="vrodionov" created="Thu, 25 Feb 2016 19:43:25 +0000"  >&lt;p&gt;Yes, filtering cells on restore. Quite easy. As for drop/truncate, think we need to listen for this event and delete all the backup history from backup system table. I think support for drop/truncation must be in  separate JIRA for Phase 3. This one I will make part of Optimized restore in Phase 2.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12863549">HBASE-14414</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 25 Feb 2016 19:36:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            42 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2trmf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15449&quot; title=&quot;HBase Backup Phase 3: Support physical table layout change &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15449&quot;&gt;&lt;strike&gt;HBASE-15449&lt;/strike&gt;&lt;/a&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>