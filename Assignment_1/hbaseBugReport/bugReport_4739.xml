<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:21:36 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4739/HBASE-4739.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4739] Master dying while going to close a region can leave it in transition forever</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4739</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;I saw this in the aftermath of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4729&quot; title=&quot;Clash between region unassign and splitting kills the master&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4729&quot;&gt;&lt;del&gt;HBASE-4729&lt;/del&gt;&lt;/a&gt; on a 0.92 refreshed yesterday, when the master died it had just created the RIT znode for a region but didn&apos;t tell the RS to close it yet.&lt;/p&gt;

&lt;p&gt;When the master restarted it saw the znode and started printing this:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;2011-11-03 00:02:49,130 INFO org.apache.hadoop.hbase.master.AssignmentManager: Regions in transition timed out:  TestTable,0007560564,1320253568406.f76899564cabe7e9857c3aeb526ec9dc. state=CLOSING, ts=1320253605285, server=sv4r11s38,62003,1320195046948&lt;br/&gt;
2011-11-03 00:02:49,130 INFO org.apache.hadoop.hbase.master.AssignmentManager: Region has been CLOSING for too long, this should eventually complete or the server will expire, doing nothing&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It&apos;s never going to happen, and it&apos;s blocking balancing.&lt;/p&gt;

&lt;p&gt;I&apos;m marking this as minor since I believe this situation is pretty rare unless you hit other bugs while trying out stuff to root bugs out.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12530088">HBASE-4739</key>
            <summary>Master dying while going to close a region can leave it in transition forever</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sunnygao">gaojinchao</assignee>
                                    <reporter username="jdcryans">Jean-Daniel Cryans</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Nov 2011 17:41:16 +0000</created>
                <updated>Fri, 20 Nov 2015 11:52:32 +0000</updated>
                            <resolved>Sat, 10 Dec 2011 00:12:45 +0000</resolved>
                                    <version>0.90.4</version>
                                    <fixVersion>0.92.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13143371" author="jdcryans" created="Thu, 3 Nov 2011 17:44:48 +0000"  >&lt;p&gt;Shutting down the RS fixes the issue.&lt;/p&gt;</comment>
                            <comment id="13143830" author="ram_krish" created="Fri, 4 Nov 2011 08:40:25 +0000"  >&lt;p&gt;Can we try giving a close call after some timeout.  &lt;br/&gt;
Because currently the below code in HRegionServer&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; closeRegion(HRegionInfo region, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; abort,
      &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; zk) {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.regionsInTransitionInRS.containsKey(region.getEncodedNameAsBytes())) {
      LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Received close &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; region we are already opening or closing; &quot;&lt;/span&gt; +
          region.getEncodedName());
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;will prevent a close call reaching once again.  So in the case that J-D had described after a timeout if we issue a close call he should be able to close the region right?&lt;/p&gt;

&lt;p&gt;Correct me if am wrong.&lt;/p&gt;</comment>
                            <comment id="13147458" author="sunnygao" created="Thu, 10 Nov 2011 02:32:49 +0000"  >&lt;p&gt;I think it&apos;s issue about RS. when RS is closing region and throws exception because RS has created a closing zk node.&lt;br/&gt;
we close again, may not solve the problem. If we have any Rs&apos;s logs, it is better.&lt;br/&gt;
If you don&apos;t want to lose data, we should close the RS and split the hlog to recover data.&lt;/p&gt;
</comment>
                            <comment id="13147495" author="ram_krish" created="Thu, 10 Nov 2011 05:21:52 +0000"  >&lt;p&gt;In this scenario what JD has told is there was no close call at all that reached the RS.&lt;br/&gt;
What you say is valid Gao.  But currently if we see closing state we just leave it to the system to take care and we dont take any action.  Atleast that we can change correct ?&lt;/p&gt;</comment>
                            <comment id="13147515" author="sunnygao" created="Thu, 10 Nov 2011 06:28:22 +0000"  >&lt;p&gt;In 0.90 version, I think there is no this scenario, The closing zk node is only created by RS.&lt;br/&gt;
look this code:&lt;br/&gt;
 public void process() {&lt;br/&gt;
      int expectedVersion = FAILED;&lt;br/&gt;
      if (this.zk) &lt;/p&gt;
{
        expectedVersion = setClosingState();
        if (expectedVersion == FAILED) return;
      }

&lt;p&gt;But in 0.92/trunk version, The problem looks like refactoring code,&lt;br/&gt;
I think should be:1&lt;br/&gt;
1.master create a pending cose state flag&lt;br/&gt;
2.RS receives the close call and change zk node to cosing state.&lt;br/&gt;
3.When the master restarted , we should handle two state.&lt;/p&gt;
</comment>
                            <comment id="13147543" author="sunnygao" created="Thu, 10 Nov 2011 07:50:54 +0000"  >&lt;p&gt;It seems &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3789&quot; title=&quot;Cleanup the locking contention in the master&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3789&quot;&gt;&lt;del&gt;HBASE-3789&lt;/del&gt;&lt;/a&gt; refactored the code&lt;/p&gt;</comment>
                            <comment id="13148272" author="yuzhihong@gmail.com" created="Fri, 11 Nov 2011 05:12:35 +0000"  >&lt;p&gt;@Jinchao:&lt;br/&gt;
Do you want to work out a patch as you outlined @ 10/Nov/11 06:28 ?&lt;/p&gt;</comment>
                            <comment id="13148300" author="sunnygao" created="Fri, 11 Nov 2011 06:31:56 +0000"  >&lt;p&gt;Yes, I am trying to reproduce this issue in trunk and make a patch.&lt;/p&gt;</comment>
                            <comment id="13149528" author="sunnygao" created="Mon, 14 Nov 2011 10:14:49 +0000"  >&lt;p&gt;-------------------------------------------------------&lt;br/&gt;
 T E S T S&lt;br/&gt;
-------------------------------------------------------&lt;/p&gt;

&lt;p&gt;-------------------------------------------------------&lt;br/&gt;
 T E S T S&lt;br/&gt;
-------------------------------------------------------&lt;br/&gt;
Running org.apache.hadoop.hbase.master.TestMasterFailover&lt;br/&gt;
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 99.82 sec&lt;/p&gt;

&lt;p&gt;Results :&lt;/p&gt;

&lt;p&gt;Tests run: 4, Failures: 0, Errors: 0, Skipped: 0&lt;/p&gt;</comment>
                            <comment id="13149532" author="sunnygao" created="Mon, 14 Nov 2011 10:21:50 +0000"  >&lt;p&gt;Please review this patch.&lt;/p&gt;</comment>
                            <comment id="13149660" author="yuzhihong@gmail.com" created="Mon, 14 Nov 2011 14:52:52 +0000"  >&lt;p&gt;Why was the check for zk node existence in actOnTimeOut() at line 2531 removed ?&lt;/p&gt;

&lt;p&gt;Would sendRegionClose() be a better name for the new method, handleRegionClose() ?&lt;/p&gt;</comment>
                            <comment id="13149727" author="hadoopqa" created="Mon, 14 Nov 2011 16:34:31 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12503590/HBASE-4739_Trunk.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12503590/HBASE-4739_Trunk.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -163 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 50 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.replication.TestReplication&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/243//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/243//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/243//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/243//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/243//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/243//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13150142" author="sunnygao" created="Tue, 15 Nov 2011 01:08:19 +0000"  >&lt;p&gt;Why was the check for zk node existence in actOnTimeOut() at line 2531 removed ?&lt;/p&gt;

&lt;p&gt;This code snippets is used in branch 0.90, because the zk node &quot;RS_ZK_REGION_CLOSING&quot; is created by RS,&lt;br/&gt;
But in trunk the zk node &quot;RS_ZK_REGION_CLOSING&quot; is created by master. So this conditin should be impossible.&lt;/p&gt;

</comment>
                            <comment id="13150168" author="sunnygao" created="Tue, 15 Nov 2011 02:04:34 +0000"  >&lt;p&gt;V2 fixs Ted&apos;s comment.&lt;/p&gt;

&lt;p&gt;In my local, replication test case passed. I will try to dig this issue &quot;https://builds.apache.org/job/PreCommit-HBASE-Build/243//testReport/org.apache.hadoop.hbase.replication/TestReplication/queueFailover/&quot;&lt;/p&gt;

&lt;p&gt;Running org.apache.hadoop.hbase.replication.TestReplicationSource&lt;br/&gt;
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 3.897 sec&lt;br/&gt;
Running org.apache.hadoop.hbase.replication.TestReplicationPeer&lt;br/&gt;
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 25.538 sec&lt;br/&gt;
Running org.apache.hadoop.hbase.replication.regionserver.TestReplicationSourceManager&lt;br/&gt;
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.089 sec&lt;br/&gt;
Running org.apache.hadoop.hbase.replication.regionserver.TestReplicationSink&lt;br/&gt;
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 22.178 sec&lt;br/&gt;
Running org.apache.hadoop.hbase.replication.TestReplication&lt;br/&gt;
Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 145.709 sec&lt;br/&gt;
Running org.apache.hadoop.hbase.replication.TestMultiSlaveReplication&lt;br/&gt;
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 55.521 sec&lt;br/&gt;
Running org.apache.hadoop.hbase.replication.TestMasterReplication&lt;br/&gt;
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 99.819 sec&lt;br/&gt;
Running org.apache.hadoop.hbase.TestServerName&lt;/p&gt;</comment>
                            <comment id="13150188" author="yuzhihong@gmail.com" created="Tue, 15 Nov 2011 02:18:31 +0000"  >&lt;p&gt;+1 if tests pass.&lt;/p&gt;</comment>
                            <comment id="13150227" author="hadoopqa" created="Tue, 15 Nov 2011 04:10:29 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12503708/HBASE-4739_Trunk_V2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12503708/HBASE-4739_Trunk_V2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -163 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 51 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.master.TestDistributedLogSplitting&lt;br/&gt;
                  org.apache.hadoop.hbase.io.hfile.TestHFileBlock&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/253//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/253//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/253//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/253//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/253//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/253//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13150265" author="ram_krish" created="Tue, 15 Nov 2011 06:53:14 +0000"  >&lt;p&gt;@Gao&lt;br/&gt;
I have 1 thing to say&lt;br/&gt;
-&amp;gt;Why don&apos;t we issue the close call to RS in timeout monitor for CLOSING rather than directly doing it in processRegionInTransition.  This will give us sometime to really see if the RS has not got the call from Master or the RS was really slow in processing the close call?&lt;br/&gt;
What do you say Gao? &lt;br/&gt;
@Ted&lt;br/&gt;
Pls suggest.&lt;/p&gt;
</comment>
                            <comment id="13150267" author="sunnygao" created="Tue, 15 Nov 2011 07:01:52 +0000"  >&lt;p&gt;@Ram&lt;br/&gt;
That is a good suggestion, But timeout monitor needs 30 minutes. should we wait so long time ?&lt;/p&gt;</comment>
                            <comment id="13150277" author="ram_krish" created="Tue, 15 Nov 2011 07:21:01 +0000"  >&lt;p&gt;@Gao&lt;br/&gt;
if you see my comment 04/Nov/11 08:40, we have a check any way in RS to avoid the close call reaching it if RS is already processing it.&lt;br/&gt;
But i felt some timeout may be needed instead of immediately giving an RPC call.&lt;/p&gt;

&lt;p&gt;Also the case that we are addressing is also a rare one, so better to go with timeout monitor.  &lt;br/&gt;
Lets see what Ted has to say&lt;/p&gt;</comment>
                            <comment id="13150290" author="sunnygao" created="Tue, 15 Nov 2011 07:49:05 +0000"  >&lt;p&gt;In fact, I made &#8203;&#8203;another patch that is more complicated and is not compatible, so I didn&apos;t commit.&lt;br/&gt;
another patch step:&lt;br/&gt;
1. Hmaster creater a zk node(M_ZK_REGION_PENDING_CLOSE) and set RIT to pendingclose state&lt;br/&gt;
2. send rpc to RS&lt;br/&gt;
3. RS change zk node to RS_ZK_REGION_CLOSING&lt;br/&gt;
4. Master changes RIT to closing&lt;/p&gt;

&lt;p&gt;if above steps, We can distinguish the state of RIT. if M_ZK_REGION_PENDING_CLOSE we can send a rpc. RS_ZK_REGION_CLOSING we can add to RIT.&lt;/p&gt;
</comment>
                            <comment id="13150310" author="sunnygao" created="Tue, 15 Nov 2011 08:49:39 +0000"  >&lt;p&gt;about test failed:&lt;br/&gt;
1.org.apache.hadoop.hbase.io.hfile.TestHFileBlock&lt;/p&gt;

&lt;p&gt;  Look this comments&lt;br/&gt;
  public void testBlockHeapSize() {&lt;br/&gt;
    // We have seen multiple possible values for this estimate of the heap size&lt;br/&gt;
    // of a ByteBuffer, presumably depending on the JDK version.&lt;br/&gt;
    assertTrue(HFileBlock.BYTE_BUFFER_HEAP_SIZE == 64 ||&lt;br/&gt;
               HFileBlock.BYTE_BUFFER_HEAP_SIZE == 80); But in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4768&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-4768&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;We add some code snippets&#65306;&lt;br/&gt;
      assertEquals(80, HFileBlock.BYTE_BUFFER_HEAP_SIZE);&lt;br/&gt;
      long byteBufferExpectedSize =&lt;br/&gt;
          ClassSize.align(ClassSize.estimateBase(buf.getClass(), true)&lt;br/&gt;
              + HFileBlock.HEADER_SIZE + size);&lt;/p&gt;



&lt;p&gt;2.org.apache.hadoop.hbase.master.TestDistributedLogSplitting&lt;br/&gt;
Because we choose a rs with 0 regions.&lt;/p&gt;

&lt;p&gt;// it said that regions is 0.&lt;br/&gt;
2011-11-15 03:53:11,215 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-2335&amp;#93;&lt;/span&gt; master.TestDistributedLogSplitting(211): #regions = 0&lt;br/&gt;
2011-11-15 03:53:11,215 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;RegionServer:0;asf001.sp2.ygridcore.net,36721,1321329179789.logSyncer&amp;#93;&lt;/span&gt; wal.HLog$LogSyncer(1192): RegionServer:0;asf001.sp2.ygridcore.net,36721,1321329179789.logSyncer interrupted while waiting for sync requests&lt;br/&gt;
2011-11-15 03:53:11,215 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;RegionServer:0;asf001.sp2.ygridcore.net,36721,1321329179789.logSyncer&amp;#93;&lt;/span&gt; wal.HLog$LogSyncer(1194): RegionServer:0;asf001.sp2.ygridcore.net,36721,1321329179789.logSyncer exiting&lt;br/&gt;
2011-11-15 03:53:11,215 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-2335&amp;#93;&lt;/span&gt; wal.HLog(967): closing hlog writer in hdfs://localhost:46229/user/jenkins/.logs/asf001.sp2.ygridcore.net,36721,1321329179789&lt;br/&gt;
2011-11-15 03:53:11,637 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-2335&amp;#93;&lt;/span&gt; master.SplitLogManager(233): Scheduling batch of logs to split&lt;/p&gt;</comment>
                            <comment id="13150325" author="sunnygao" created="Tue, 15 Nov 2011 09:27:33 +0000"  >&lt;p&gt;I made a issue for 2: &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4790&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-4790&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13150339" author="yuzhihong@gmail.com" created="Tue, 15 Nov 2011 09:59:48 +0000"  >&lt;p&gt;Jinchao:&lt;br/&gt;
Do you want to show us your more complicated patch ?&lt;/p&gt;</comment>
                            <comment id="13151149" author="sunnygao" created="Wed, 16 Nov 2011 11:58:50 +0000"  >&lt;p&gt;trail version does not test and need improve&lt;/p&gt;</comment>
                            <comment id="13151197" author="hadoopqa" created="Wed, 16 Nov 2011 13:45:43 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12503873/HBASE-4739_trial.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12503873/HBASE-4739_trial.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -163 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 51 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.regionserver.wal.TestLogRolling&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/264//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/264//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/264//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/264//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/264//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/264//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13151455" author="yuzhihong@gmail.com" created="Wed, 16 Nov 2011 19:39:00 +0000"  >&lt;p&gt;Trial patch makes sense.&lt;/p&gt;

&lt;p&gt;For unassign, the following change to javadoc is inaccurate:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
   * Updates the RegionState and creates a zk node.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We still send close RPC, right ?&lt;/p&gt;

&lt;p&gt;For sendRegionClose():&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
   * sends the CLOSE RPC to a region server.
   * @param region server to be unassigned
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Should read &quot;region server which receives CLOSE RPC&quot;&lt;/p&gt;

&lt;p&gt;For createNodePendingClose(), please replace CLOSING with PEND_CLOSE (not PEND_CLOSING).&lt;/p&gt;</comment>
                            <comment id="13151712" author="sunnygao" created="Thu, 17 Nov 2011 01:27:55 +0000"  >&lt;p&gt;trail2 fixed your comment. if you and Ram make sense, I will test it.&lt;/p&gt;</comment>
                            <comment id="13151761" author="hadoopqa" created="Thu, 17 Nov 2011 03:14:19 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12504006/4739_trial2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12504006/4739_trial2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -163 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 51 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.replication.TestReplication&lt;br/&gt;
                  org.apache.hadoop.hbase.coprocessor.TestCoprocessorEndpoint&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/274//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/274//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/274//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/274//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/274//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/274//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13151765" author="yuzhihong@gmail.com" created="Thu, 17 Nov 2011 03:22:00 +0000"  >&lt;p&gt;The failed tests don&apos;t seem to be related to the changes in this patch.&lt;/p&gt;

&lt;p&gt;@Jinchao:&lt;br/&gt;
Please perform more validation on rela cluster.&lt;/p&gt;

&lt;p&gt;Good work.&lt;/p&gt;</comment>
                            <comment id="13151831" author="ram_krish" created="Thu, 17 Nov 2011 05:49:57 +0000"  >&lt;p&gt;@Gao&lt;br/&gt;
Good work... One suggestion&lt;br/&gt;
For the case &lt;br/&gt;
M_ZK_REGION_PENDING_CLOSE under processRegionsInTransition() i think&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (isOnDeadServer(regionInfo, deadServers) &amp;amp;&amp;amp;
            (data.getOrigin() == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || !serverManager.isServerOnline(data.getOrigin()))) {
          &lt;span class=&quot;code-comment&quot;&gt;// If was on dead server, its closed now. Force to OFFLINE and &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;
&lt;/span&gt;          &lt;span class=&quot;code-comment&quot;&gt;// will get it reassigned &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; appropriate
&lt;/span&gt;          forceOffline(regionInfo, data);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;is needed as we do in RS_ZK_CLOSING&lt;/p&gt;

&lt;p&gt;Because assume a case where master creates the node in PENDING_CLOSE but before sending the call to RS master goes down.  Before the master comes up RS is also down.  Now as per the current patch in case of processRegionInTransition() for M_ZK_REGION_PENDING_CLOSE we will once again try to unassign() which will not happen. so better to force it Offline.  What do you think Gao? &lt;br/&gt;
I still feel we can give just a RPC call to RS instead of handling a new state because in RS any way close call cannot reach it twice.  &lt;/p&gt;</comment>
                            <comment id="13151923" author="sunnygao" created="Thu, 17 Nov 2011 09:05:54 +0000"  >&lt;p&gt;Only sends a RPC, I think state machine lose a state flag. Master doesn&apos;t distinguish pending or closing. Code structure is not well. But this patch is not compatible.&lt;/p&gt;

&lt;p&gt;Fixed other comments&lt;/p&gt;
</comment>
                            <comment id="13151927" author="sunnygao" created="Thu, 17 Nov 2011 09:09:07 +0000"  >&lt;p&gt;trialV3 fixed Ram&apos; comment. &lt;/p&gt;</comment>
                            <comment id="13151998" author="hadoopqa" created="Thu, 17 Nov 2011 11:28:44 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12504045/4739_trialV3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12504045/4739_trialV3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -163 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 51 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.master.TestDistributedLogSplitting&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/280//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/280//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/280//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/280//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/280//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/280//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13152021" author="sunnygao" created="Thu, 17 Nov 2011 12:29:04 +0000"  >&lt;p&gt;Not completed the test ,tomorrow continue!&lt;/p&gt;</comment>
                            <comment id="13152434" author="jdcryans" created="Thu, 17 Nov 2011 23:07:57 +0000"  >&lt;p&gt;I&apos;m really uneasy with adding a new znode, that part of the master code is really finicky. At a minimum this should not be included in 0.92 since this situation is pretty rare (IMO).&lt;/p&gt;</comment>
                            <comment id="13152585" author="sunnygao" created="Fri, 18 Nov 2011 01:51:20 +0000"  >&lt;p&gt;@J-D&lt;br/&gt;
In 0.92 version, uses &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4739&quot; title=&quot;Master dying while going to close a region can leave it in transition forever&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4739&quot;&gt;&lt;del&gt;HBASE-4739&lt;/del&gt;&lt;/a&gt;_Trunk_V2 in timeout monitor for sending a CLOSING rpc.(I try to modify this patch)&lt;br/&gt;
In trunk, uses patch &quot;4739_trialV3&quot;.&lt;br/&gt;
Hbase is used by thousands of people. If this problem occurred once, it may occur more. So I think we need to solve this issue.&lt;/p&gt;

&lt;p&gt;What do you say J-D? &lt;/p&gt;

&lt;p&gt;I will do some more detailed testing about these patches and give my test cases.&lt;/p&gt;
</comment>
                            <comment id="13153969" author="sunnygao" created="Mon, 21 Nov 2011 03:58:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4739&quot; title=&quot;Master dying while going to close a region can leave it in transition forever&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4739&quot;&gt;&lt;del&gt;HBASE-4739&lt;/del&gt;&lt;/a&gt;_trail5 made a few changes, Please review, if it makes sense, I will verify in a real cluster.&lt;/p&gt;</comment>
                            <comment id="13153999" author="hadoopqa" created="Mon, 21 Nov 2011 05:51:10 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12504464/HBASE-4739_trail5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12504464/HBASE-4739_trail5.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -166 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 60 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestAdmin&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/317//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/317//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/317//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/317//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/317//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/317//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13154001" author="ram_krish" created="Mon, 21 Nov 2011 05:55:05 +0000"  >&lt;p&gt;This is similar to the initial version you had given.  &lt;br/&gt;
+1 with the change.  As i said any way RS will not allow the transition from happening again if it was already processing it.  &lt;/p&gt;

&lt;p&gt;But we need to confirm like if we need to handle RegionAlreadyInTransitionException exception.  It may be needed.&lt;/p&gt;</comment>
                            <comment id="13154010" author="sunnygao" created="Mon, 21 Nov 2011 06:28:30 +0000"  >&lt;p&gt;I think we don&apos;t need handle RegionAlreadyInTransitionException exception. We only need update the timestamp of RIT,we have done.&lt;br/&gt;
my reason is :&lt;br/&gt;
1. The moniter timeout is 30 minutes, There are enough time to close a region.&lt;br/&gt;
2. if the RS throws RegionAlreadyInTransitionException exception, we need update the timestamp of RIT and wait next timeout.&lt;/p&gt;</comment>
                            <comment id="13154026" author="ram_krish" created="Mon, 21 Nov 2011 06:56:19 +0000"  >&lt;p&gt;Yes Gao.. thats is what i said when i meant need to handle RegionAlreadyInTransitionException .&lt;br/&gt;
Explicitly catch that exception in the catch block of unassign() and handle the exception by updating the timestamp of RIT. &lt;/p&gt;

&lt;p&gt;Good work.&lt;/p&gt;</comment>
                            <comment id="13154749" author="jdcryans" created="Tue, 22 Nov 2011 00:08:03 +0000"  >&lt;p&gt;I prefer the latest patch, although it seems the EventHandler.java bit was only needed with the new znode.&lt;/p&gt;

&lt;p&gt;Handling RegionAlreadyInTransitionException would be cleaner.&lt;/p&gt;</comment>
                            <comment id="13154758" author="stack" created="Tue, 22 Nov 2011 00:18:27 +0000"  >&lt;p&gt;Is this state misnamed?  Is the comment below saying that the master sets CLOSING state?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-    RS_ZK_REGION_CLOSING      (1),   &lt;span class=&quot;code-comment&quot;&gt;// RS is in process of closing a region
&lt;/span&gt;+    RS_ZK_REGION_CLOSING      (1),   &lt;span class=&quot;code-comment&quot;&gt;// Master adds &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; region as closing in ZK&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Why not just print out state rather than do this in log message:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
(state.isPendingClose() ? &lt;span class=&quot;code-quote&quot;&gt;&quot;pending close &quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;closing &quot;&lt;/span&gt;) +
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;m not up on what rest of patch does so can&apos;t comment more.&lt;/p&gt;

&lt;p&gt;Thanks for digging in Jinchao.&lt;/p&gt;
</comment>
                            <comment id="13155046" author="sunnygao" created="Tue, 22 Nov 2011 12:23:34 +0000"  >&lt;p&gt;Thanks for your review. Fixed all comments&lt;/p&gt;</comment>
                            <comment id="13155048" author="ram_krish" created="Tue, 22 Nov 2011 12:28:42 +0000"  >&lt;p&gt;+1 for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4739&quot; title=&quot;Master dying while going to close a region can leave it in transition forever&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4739&quot;&gt;&lt;del&gt;HBASE-4739&lt;/del&gt;&lt;/a&gt;_trial6.patch.  The state name change is to indicate that the node is created by master.  &lt;/p&gt;

</comment>
                            <comment id="13155050" author="sunnygao" created="Tue, 22 Nov 2011 12:30:48 +0000"  >&lt;p&gt;This patch is not compatible, I added M_ZK_REGION_CLOSING and delete RS_ZK_REGION_CLOSING in EventHandler.java.&lt;/p&gt;

&lt;p&gt;I have another question, Can I delete below code block in function unassign(HRegionInfo region, boolean force) ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (NotServingRegionException nsre) {
      LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Server &quot;&lt;/span&gt; + server + &lt;span class=&quot;code-quote&quot;&gt;&quot; returned &quot;&lt;/span&gt; + nsre + &lt;span class=&quot;code-quote&quot;&gt;&quot; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &quot;&lt;/span&gt; +
        region.getEncodedName());
      &lt;span class=&quot;code-comment&quot;&gt;// Presume that master has stale data.  Presume remote side just split.
&lt;/span&gt;      &lt;span class=&quot;code-comment&quot;&gt;// Presume that the split message when it comes in will fix up the master&apos;s
&lt;/span&gt;      &lt;span class=&quot;code-comment&quot;&gt;// in memory cluster state.
&lt;/span&gt;    }&lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Throwable t)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I think we should use the wrap of RemoteException. &lt;/p&gt;</comment>
                            <comment id="13155166" author="hadoopqa" created="Tue, 22 Nov 2011 14:24:05 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12504734/HBASE-4739_trial6.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12504734/HBASE-4739_trial6.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -162 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 66 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestInstantSchemaChange&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestAdmin&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/331//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/331//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/331//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/331//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/331//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/331//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13155309" author="yuzhihong@gmail.com" created="Tue, 22 Nov 2011 18:06:13 +0000"  >&lt;p&gt;All the test failures were caused by &apos;Too many open files&apos;.&lt;/p&gt;</comment>
                            <comment id="13155320" author="yuzhihong@gmail.com" created="Tue, 22 Nov 2011 18:20:50 +0000"  >&lt;p&gt;Nice work, Jinchao.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-comment&quot;&gt;//RS_ZK_REGION_CLOSING      (1),   // Master adds &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; region as closing in ZK&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We should say that this event is replaced by M_ZK_REGION_CLOSING.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-comment&quot;&gt;// RS is already processing &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; region, only need update the timestamp
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(t &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; RegionAlreadyInTransitionException){          
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I think we should place else in front of if above. The comment should read &apos;need to update&apos;&lt;br/&gt;
Also leave space between if and (, between ) and {.&lt;/p&gt;

&lt;p&gt;Please also prepare patch for 0.90.5&lt;/p&gt;</comment>
                            <comment id="13155328" author="ram_krish" created="Tue, 22 Nov 2011 18:28:00 +0000"  >&lt;p&gt;@Ted&lt;br/&gt;
In 0.90.5 the CLOSING node is created by RS.  Do we need to change that behaviour also? &lt;br/&gt;
Are only forcefully calling unassign() will do ?&lt;/p&gt;</comment>
                            <comment id="13155330" author="yuzhihong@gmail.com" created="Tue, 22 Nov 2011 18:35:00 +0000"  >&lt;p&gt;We will keep RS_ZK_REGION_CLOSING event for 0.90.x&lt;br/&gt;
invokeUnassign() should still be called.&lt;/p&gt;</comment>
                            <comment id="13155600" author="sunnygao" created="Wed, 23 Nov 2011 01:03:06 +0000"  >&lt;p&gt;@Ted&lt;br/&gt;
It seems 0.90.5 logic is ok. &lt;br/&gt;
1. if RS_ZK_REGION_CLOSING is created, It says that RS has received the RPC&lt;br/&gt;
2. When RIT is timeout, There is two case, one RS is slow, in this case we don&apos;t need send RPC again.&lt;br/&gt;
   another case, closing the region has exception, we send rpc can&apos;t solve the problem, it may also fail.&lt;br/&gt;
So I think we don&apos;t need fix anything.&lt;/p&gt;</comment>
                            <comment id="13155641" author="sunnygao" created="Wed, 23 Nov 2011 02:41:07 +0000"  >&lt;p&gt;Fixed Ted&apos;s comment&lt;br/&gt;
@Ted&lt;br/&gt;
Do we need make a patch for 0.90.5 ? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13155689" author="hadoopqa" created="Wed, 23 Nov 2011 05:13:06 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12504843/HBASE-4739_V7.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12504843/HBASE-4739_V7.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -162 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 66 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestAdmin&lt;br/&gt;
                  org.apache.hadoop.hbase.replication.TestReplication&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/343//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/343//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/343//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/343//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/343//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/343//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13156201" author="jdcryans" created="Wed, 23 Nov 2011 19:14:58 +0000"  >&lt;blockquote&gt;&lt;p&gt;Do we need make a patch for 0.90.5 ? &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Like you said earlier:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;In 0.90 version, I think there is no this scenario, The closing zk node is only created by RS.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;So we should be fine without it.&lt;/p&gt;</comment>
                            <comment id="13156463" author="sunnygao" created="Thu, 24 Nov 2011 01:51:55 +0000"  >&lt;p&gt;Patch is in branch 0.92&lt;/p&gt;</comment>
                            <comment id="13156472" author="yuzhihong@gmail.com" created="Thu, 24 Nov 2011 02:10:44 +0000"  >&lt;p&gt;Integrated to 0.92 branch and TRUNK.&lt;/p&gt;

&lt;p&gt;Thanks for the patch Jinchao.&lt;/p&gt;

&lt;p&gt;Thanks for the review Ramkrishna, Stack and J-D.&lt;/p&gt;</comment>
                            <comment id="13156500" author="hadoopqa" created="Thu, 24 Nov 2011 03:51:29 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12504961/HBASE-4739_Branch092.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12504961/HBASE-4739_Branch092.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/360//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/360//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13156503" author="hudson" created="Thu, 24 Nov 2011 04:00:14 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2476 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2476/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2476/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4739&quot; title=&quot;Master dying while going to close a region can leave it in transition forever&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4739&quot;&gt;&lt;del&gt;HBASE-4739&lt;/del&gt;&lt;/a&gt;  Master dying while going to close a region can leave it in transition&lt;br/&gt;
               forever (Gao Jinchao)&lt;/p&gt;

&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/executor/EventHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/executor/RegionTransitionData.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/UnAssignCallable.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/zookeeper/ZKAssign.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/master/TestMasterFailover.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13156546" author="hudson" created="Thu, 24 Nov 2011 05:55:00 +0000"  >&lt;p&gt;Integrated in HBase-0.92-security #11 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92-security/11/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92-security/11/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4739&quot; title=&quot;Master dying while going to close a region can leave it in transition forever&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4739&quot;&gt;&lt;del&gt;HBASE-4739&lt;/del&gt;&lt;/a&gt;  Master dying while going to close a region can leave it in transition forever&lt;br/&gt;
               (Gao Jinchao)&lt;/p&gt;

&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/executor/EventHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/executor/RegionTransitionData.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/UnAssignCallable.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/zookeeper/ZKAssign.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/master/TestMasterFailover.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13156628" author="hudson" created="Thu, 24 Nov 2011 10:18:29 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-security #7 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-security/7/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-security/7/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4739&quot; title=&quot;Master dying while going to close a region can leave it in transition forever&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4739&quot;&gt;&lt;del&gt;HBASE-4739&lt;/del&gt;&lt;/a&gt;  Master dying while going to close a region can leave it in transition&lt;br/&gt;
               forever (Gao Jinchao)&lt;/p&gt;

&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/executor/EventHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/executor/RegionTransitionData.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/UnAssignCallable.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/zookeeper/ZKAssign.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/master/TestMasterFailover.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13159778" author="hudson" created="Wed, 30 Nov 2011 03:48:25 +0000"  >&lt;p&gt;Integrated in HBase-0.92 #163 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92/163/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92/163/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4739&quot; title=&quot;Master dying while going to close a region can leave it in transition forever&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4739&quot;&gt;&lt;del&gt;HBASE-4739&lt;/del&gt;&lt;/a&gt;  Master dying while going to close a region can leave it in transition forever&lt;br/&gt;
               (Gao Jinchao)&lt;/p&gt;

&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/executor/EventHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/executor/RegionTransitionData.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/UnAssignCallable.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/zookeeper/ZKAssign.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/master/TestMasterFailover.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13166695" author="stack" created="Sat, 10 Dec 2011 00:12:45 +0000"  >&lt;p&gt;This was applied a while back.  Will be in 0.92.0&lt;/p&gt;</comment>
                            <comment id="15015769" author="lars_francke" created="Fri, 20 Nov 2015 11:52:32 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12504006" name="4739_trial2.patch" size="12126" author="sunnygao" created="Thu, 17 Nov 2011 01:28:12 +0000"/>
                            <attachment id="12504045" name="4739_trialV3.patch" size="12385" author="sunnygao" created="Thu, 17 Nov 2011 09:09:07 +0000"/>
                            <attachment id="12504961" name="HBASE-4739_Branch092.patch" size="10888" author="sunnygao" created="Thu, 24 Nov 2011 01:51:55 +0000"/>
                            <attachment id="12503590" name="HBASE-4739_Trunk.patch" size="6653" author="sunnygao" created="Mon, 14 Nov 2011 10:14:06 +0000"/>
                            <attachment id="12503708" name="HBASE-4739_Trunk_V2.patch" size="6945" author="sunnygao" created="Tue, 15 Nov 2011 01:53:46 +0000"/>
                            <attachment id="12504843" name="HBASE-4739_V7.patch" size="10888" author="sunnygao" created="Wed, 23 Nov 2011 02:41:07 +0000"/>
                            <attachment id="12504464" name="HBASE-4739_trail5.patch" size="6343" author="sunnygao" created="Mon, 21 Nov 2011 03:55:44 +0000"/>
                            <attachment id="12503873" name="HBASE-4739_trial.patch" size="12330" author="sunnygao" created="Wed, 16 Nov 2011 11:58:50 +0000"/>
                            <attachment id="12504734" name="HBASE-4739_trial6.patch" size="10886" author="sunnygao" created="Tue, 22 Nov 2011 12:23:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 4 Nov 2011 08:40:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>215947</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hs1z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>101807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>