<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:49:16 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-964/HBASE-964.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-964] Startup stuck &quot;waiting for root region&quot;</title>
                <link>https://issues.apache.org/jira/browse/HBASE-964</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Seems easy to reproduce.&lt;/p&gt;

&lt;p&gt;I am trying to start a master then start a regionserver.  I&apos;m using local filesystem.&lt;/p&gt;

&lt;p&gt;I start master like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;./bin/hbase master start
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The regionserver similarly.&lt;/p&gt;

&lt;p&gt;All comes up. Then I try to run sequentialWriter from PE.&lt;/p&gt;

&lt;p&gt;Here is what shows in master log:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;...
08/10/27 15:20:00 DEBUG client.HConnectionManager$TableServers: Sleeping 2000ms, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; root region.
08/10/27 15:20:02 DEBUG client.HConnectionManager$TableServers: Sleeping 2000ms, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; root region.
08/10/27 15:20:04 DEBUG client.HConnectionManager$TableServers: Sleeping 2000ms, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; root region.
08/10/27 15:20:06 DEBUG client.HConnectionManager$TableServers: Sleeping 2000ms, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; root region.
08/10/27 15:20:06 INFO master.BaseScanner: RegionManager.rootScanner scanning meta region {regionname: -ROOT-,,0, startKey: &amp;lt;&amp;gt;, server: 208.84.6.64:60020}
08/10/27 15:20:07 DEBUG master.BaseScanner: RegionManager.rootScanner REGION =&amp;gt; {NAME =&amp;gt; &apos;.META.,,1&apos;, STARTKEY =&amp;gt; &apos;&apos;, ENDKEY =&amp;gt; &apos;&apos;, ENCODED =&amp;gt; 1028785192, TABLE =&amp;gt; {{NAME =&amp;gt; &apos;.META.&apos;, IS_ROOT =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&apos;, IS_META =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&apos;, FAMILIES =&amp;gt; [{NAME =&amp;gt; &apos;info&apos;, BLOOMFILTER =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&apos;, VERSIONS =&amp;gt; &apos;1&apos;, COMPRESSION =&amp;gt; &apos;NONE&apos;, LENGTH =&amp;gt; &apos;2147483647&apos;, TTL =&amp;gt; &apos;-1&apos;, IN_MEMORY =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&apos;, BLOCKCACHE =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&apos;}, {NAME =&amp;gt; &apos;historian&apos;, BLOOMFILTER =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&apos;, VERSIONS =&amp;gt; &apos;2147483647&apos;, COMPRESSION =&amp;gt; &apos;NONE&apos;, LENGTH =&amp;gt; &apos;2147483647&apos;, TTL =&amp;gt; &apos;-1&apos;, IN_MEMORY =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&apos;, BLOCKCACHE =&amp;gt; &apos;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&apos;}]}}}, SERVER =&amp;gt; &apos;208.84.6.64:60020&apos;, STARTCODE =&amp;gt; 1225145942330
08/10/27 15:20:07 INFO master.BaseScanner: RegionManager.rootScanner scan of meta region {regionname: -ROOT-,,0, startKey: &amp;lt;&amp;gt;, server: 208.84.6.64:60020} complete
08/10/27 15:20:08 DEBUG client.HConnectionManager$TableServers: Attempt 0 of 10 failed with &amp;lt;org.apache.hadoop.hbase.client.NoServerForRegionException: Timed out trying to locate root region&amp;gt;. Retrying after sleep of 2000
08/10/27 15:20:08 DEBUG client.HConnectionManager$TableServers: Sleeping 2000ms, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; root region.
08/10/27 15:20:10 DEBUG client.HConnectionManager$TableServers: Sleeping 2000ms, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; root region.
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;Here is the regionserver log:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;....
08/10/27 15:19:09 DEBUG regionserver.CompactSplitThread: Compaction requested &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; region: .META.,,1
08/10/27 15:19:09 INFO regionserver.HRegion: starting compaction on region .META.,,1
08/10/27 15:19:09 INFO regionserver.HRegion: compaction completed on region .META.,,1 in 0sec
08/10/27 15:19:48 INFO regionserver.HRegionServer: MSG_REGION_OPEN: TestTable,,1225145988632
08/10/27 15:19:48 INFO regionserver.HRegionServer: MSG_REGION_OPEN: TestTable,,1225145988632
08/10/27 15:19:48 DEBUG client.HConnectionManager$TableServers: Sleeping 2000ms, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; root region.
08/10/27 15:19:50 DEBUG client.HConnectionManager$TableServers: Sleeping 2000ms, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; root region.
08/10/27 15:19:52 DEBUG client.HConnectionManager$TableServers: Sleeping 2000ms, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; root region.
08/10/27 15:19:54 DEBUG client.HConnectionManager$TableServers: Sleeping 2000ms, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; root region.
08/10/27 15:19:56 DEBUG client.HConnectionManager$TableServers: Sleeping 2000ms, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; root region.
08/10/27 15:19:58 DEBUG client.HConnectionManager$TableServers: Sleeping 2000ms, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; root region.
08/10/27 15:20:00 DEBUG client.HConnectionManager$TableServers: Sleeping 2000ms, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; root region.
08/10/27 15:20:02 DEBUG client.HConnectionManager$TableServers: Sleeping 2000ms, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; root region.
08/10/27 15:20:04 DEBUG client.HConnectionManager$TableServers: Sleeping 2000ms, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; root region.
08/10/27 15:20:07 DEBUG client.HConnectionManager$TableServers: Sleeping 2000ms, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; root region.
08/10/27 15:20:09 DEBUG client.HConnectionManager$TableServers: Attempt 0 of 10 failed with &amp;lt;org.apache.hadoop.hbase.client.NoServerForRegionException: Timed out trying to locate root region&amp;gt;. Retrying after sleep of 2000

...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and so on.&lt;/p&gt;

&lt;p&gt;Giving to Jim since he was hereabouts most recently.&lt;/p&gt;</description>
                <environment>&lt;p&gt;TRUNK&lt;/p&gt;</environment>
        <key id="12407312">HBASE-964</key>
            <summary>Startup stuck &quot;waiting for root region&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jimk">Jim Kellerman</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Oct 2008 22:23:45 +0000</created>
                <updated>Sun, 13 Sep 2009 22:26:30 +0000</updated>
                            <resolved>Mon, 10 Nov 2008 19:04:40 +0000</resolved>
                                                    <fixVersion>0.19.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12643546" author="stack" created="Wed, 29 Oct 2008 17:45:25 +0000"  >&lt;p&gt;Adding to 0.19.0.&lt;/p&gt;</comment>
                            <comment id="12644867" author="jimk" created="Tue, 4 Nov 2008 01:01:22 +0000"  >&lt;p&gt;Works now. Committed.&lt;/p&gt;</comment>
                            <comment id="12644916" author="stack" created="Tue, 4 Nov 2008 08:04:35 +0000"  >&lt;p&gt;Are we sure this is right?&lt;/p&gt;

&lt;p&gt;Testing, I still see this everytime I startup:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2008-11-04 08:01:54,113 INFO org.apache.hadoop.hbase.regionserver.HRegion: compaction completed on region .META.,,1 in 0sec
2008-11-04 08:02:39,320 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: MSG_REGION_OPEN: TestTable,,1225785758336
2008-11-04 08:02:39,320 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: MSG_REGION_OPEN: TestTable,,1225785758336
2008-11-04 08:02:39,334 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$TableServers: Sleeping 2000ms, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; root region.
2008-11-04 08:02:41,336 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$TableServers: Sleeping 2000ms, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; root region.
2008-11-04 08:02:43,339 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$TableServers: Sleeping 2000ms, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; root region.
2008-11-04 08:02:45,341 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$TableServers: Sleeping 2000ms, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; root region.
2008-11-04 08:02:47,344 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$TableServers: Sleeping 2000ms, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; root region.
2008-11-04 08:02:49,347 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$TableServers: Sleeping 2000ms, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; root region.
2008-11-04 08:02:51,348 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$TableServers: Sleeping 2000ms, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; root region.
2008-11-04 08:02:53,351 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$TableServers: Sleeping 2000ms, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; root region.
2008-11-04 08:02:55,353 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$TableServers: Sleeping 2000ms, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; root region.
2008-11-04 08:02:57,356 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$TableServers: Sleeping 2000ms, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; root region.
2008-11-04 08:02:59,358 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$TableServers: Attempt 0 of 10 failed with &amp;lt;org.apache.hadoop.hbase.client.NoServerForRegionException: Timed out trying to locate root region&amp;gt;. Retrying after sleep of 2000
2008-11-04 08:02:59,359 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$TableServers: Sleeping 2000ms, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; root region.
2008-11-04 08:03:01,361 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$TableServers: Sleeping 2000ms, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; root region.
2008-11-04 08:03:03,362 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$TableServers: Sleeping 2000ms, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; root region.
2008-11-04 08:03:05,365 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$TableServers: Sleeping 2000ms, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; root region.
2008-11-04 08:03:07,367 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$TableServers: Sleeping 2000ms, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; root region.
2008-11-04 08:03:09,369 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$TableServers: Sleeping 2000ms, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; root region.
2008-11-04 08:03:11,372 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$TableServers: Sleeping 2000ms, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; root region.
2008-11-04 08:03:13,374 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$TableServers: Sleeping 2000ms, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; root region.
2008-11-04 08:03:15,375 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$TableServers: Sleeping 2000ms, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; root region.
2008-11-04 08:03:17,378 DEBUG org.apache.hadoop.hbase.client.HConnectionManager$TableServers: Sleeping 2000ms, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; root region.
2008-11-04 08:03:19,381 ERROR org.apache.hadoop.hbase.RegionHistorian: Unable to create RegionHistorian
org.apache.hadoop.hbase.client.NoServerForRegionException: Timed out trying to locate root region
        at org.apache.hadoop.hbase.client.HConnectionManager$TableServers.locateRootRegion(HConnectionManager.java:793)
        at org.apache.hadoop.hbase.client.HConnectionManager$TableServers.locateRegion(HConnectionManager.java:439)
        at org.apache.hadoop.hbase.client.HConnectionManager$TableServers.relocateRegion(HConnectionManager.java:421)
        at org.apache.hadoop.hbase.client.HConnectionManager$TableServers.locateRegionInMeta(HConnectionManager.java:557)
        at org.apache.hadoop.hbase.client.HConnectionManager$TableServers.locateRegion(HConnectionManager.java:449)
        at org.apache.hadoop.hbase.client.HConnectionManager$TableServers.locateRegion(HConnectionManager.java:414)
        at org.apache.hadoop.hbase.client.HTable.&amp;lt;init&amp;gt;(HTable.java:113)
        at org.apache.hadoop.hbase.RegionHistorian.online(RegionHistorian.java:310)
        at org.apache.hadoop.hbase.regionserver.HRegionServer.openRegion(HRegionServer.java:970)
        at org.apache.hadoop.hbase.regionserver.HRegionServer$Worker.run(HRegionServer.java:901)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:619)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then it starts to work.&lt;/p&gt;</comment>
                            <comment id="12645117" author="jimk" created="Wed, 5 Nov 2008 00:37:08 +0000"  >&lt;p&gt;Cannot reproduce with hbase-trunk-latest and either hadoop 0.19 rc0 or hadoop 0.19 branch latest&lt;/p&gt;</comment>
                            <comment id="12645130" author="stack" created="Wed, 5 Nov 2008 01:48:03 +0000"  >&lt;p&gt;Any tables in your instance?&lt;/p&gt;</comment>
                            <comment id="12645131" author="jimk" created="Wed, 5 Nov 2008 01:52:37 +0000"  >&lt;p&gt;Just the PE table. It should not matter as other tables do not get deployed until the meta does because they aren&apos;t found until the meta is online.&lt;/p&gt;</comment>
                            <comment id="12645132" author="stack" created="Wed, 5 Nov 2008 01:56:34 +0000"  >&lt;p&gt;I see this exception all over the place &amp;#8211; in eclipse and up in cluster.  I&apos;ll take this issue and try and fix it.&lt;/p&gt;</comment>
                            <comment id="12645272" author="jimk" created="Wed, 5 Nov 2008 18:04:43 +0000"  >&lt;p&gt;Stack still sees this issue, but I cannot reproduce it. Since it is still a problem, reopening issue.&lt;/p&gt;</comment>
                            <comment id="12645282" author="stack" created="Wed, 5 Nov 2008 18:32:35 +0000"  >&lt;p&gt;I see the issue in your workspace too &amp;#8211; its just missing the tell-tale Sleeping messages:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2008-11-05 00:30:15,604 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: MSG_REGION_OPEN: TestTable,,1225845013136
2008-11-05 00:30:15,604 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: MSG_REGION_OPEN: TestTable,,1225845013136
2008-11-05 00:30:55,670 ERROR org.apache.hadoop.hbase.RegionHistorian: Unable to create RegionHistorian
org.apache.hadoop.hbase.client.NoServerForRegionException: Timed out trying to locate root region
        at org.apache.hadoop.hbase.client.HConnectionManager$TableServers.locateRootRegion(HConnectionManager.java:793)
        at org.apache.hadoop.hbase.client.HConnectionManager$TableServers.locateRegion(HConnectionManager.java:439)
        at org.apache.hadoop.hbase.client.HConnectionManager$TableServers.relocateRegion(HConnectionManager.java:421)
        at org.apache.hadoop.hbase.client.HConnectionManager$TableServers.locateRegionInMeta(HConnectionManager.java:557)
        at org.apache.hadoop.hbase.client.HConnectionManager$TableServers.locateRegion(HConnectionManager.java:449)
        at org.apache.hadoop.hbase.client.HConnectionManager$TableServers.locateRegion(HConnectionManager.java:414)
        at org.apache.hadoop.hbase.client.HTable.&amp;lt;init&amp;gt;(HTable.java:113)
        at org.apache.hadoop.hbase.RegionHistorian.online(RegionHistorian.java:310)
        at org.apache.hadoop.hbase.regionserver.HRegionServer.openRegion(HRegionServer.java:970)
        at org.apache.hadoop.hbase.regionserver.HRegionServer$Worker.run(HRegionServer.java:901)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:619)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We&apos;re stuck for 40 seconds trying to open region because we can&apos;t locate root region though its been successfully deployed a good few minutes earlier (Something to do w/ all running on one regionserver?).&lt;/p&gt;

&lt;p&gt;Take the issue back if you want to try and figure it yourself.&lt;/p&gt;</comment>
                            <comment id="12645293" author="apurtell" created="Wed, 5 Nov 2008 18:57:43 +0000"  >&lt;p&gt;I am also seeing this:&lt;/p&gt;

&lt;p&gt;ERROR org.apache.hadoop.hbase.RegionHistorian: Unable to create RegionHistorian&lt;br/&gt;
org.apache.hadoop.hbase.client.NoServerForRegionException: Timed out trying to locate root region&lt;br/&gt;
        at org.apache.hadoop.hbase.client.HConnectionManager$TableServers.locateRootRegion(HConnectionManager.java:793)&lt;br/&gt;
        at org.apache.hadoop.hbase.client.HConnectionManager$TableServers.locateRegion(HConnectionManager.java:439)&lt;br/&gt;
        at org.apache.hadoop.hbase.client.HConnectionManager$TableServers.relocateRegion(HConnectionManager.java:421)&lt;br/&gt;
        at org.apache.hadoop.hbase.client.HConnectionManager$TableServers.locateRegionInMeta(HConnectionManager.java:557)&lt;br/&gt;
        at org.apache.hadoop.hbase.client.HConnectionManager$TableServers.locateRegion(HConnectionManager.java:449)&lt;br/&gt;
        at org.apache.hadoop.hbase.client.HConnectionManager$TableServers.locateRegion(HConnectionManager.java:414)&lt;br/&gt;
        at org.apache.hadoop.hbase.client.HTable.&amp;lt;init&amp;gt;(HTable.java:113)&lt;br/&gt;
        at org.apache.hadoop.hbase.RegionHistorian.online(RegionHistorian.java:310)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegionServer.openRegion(HRegionServer.java:970)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegionServer$Worker.run(HRegionServer.java:901)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:619)&lt;/p&gt;

&lt;p&gt;I have a very small test master/regionserver setup running latest trunk where I can reliably reproduce this every time on start up. DEBUG level logs are attached. The logs are large because I waited until all regions (29) finally came up.&lt;/p&gt;

&lt;p&gt;I can test any patches you&apos;d like. &lt;/p&gt;</comment>
                            <comment id="12646135" author="jdcryans" created="Mon, 10 Nov 2008 00:15:46 +0000"  >&lt;p&gt;I just committed this patch to trunk. I lessens the requirements to get to root region from the master because it was too restrictive. Like in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-919&quot; title=&quot;Master and Region Server need to provide root region location if they are using HTable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-919&quot;&gt;&lt;del&gt;HBASE-919&lt;/del&gt;&lt;/a&gt;, RegionManager.allRegionsAssigned() was preventing something to happen and here it was happening because HRS wanted to initialize the RegionHistorian and it has to do it during the first non-catalog region opening. But because HRS wasn&apos;t able to report it to the master, the region is considered as unassigned and the HTable instantiation inside RegionHistorian couldn&apos;t happen. I also removed the sleep in HBaseClusterTest.&lt;/p&gt;</comment>
                            <comment id="12646300" author="jimk" created="Mon, 10 Nov 2008 17:14:52 +0000"  >&lt;p&gt;This patch works for me and does not generate the errors:&lt;/p&gt;

&lt;p&gt;ERROR org.apache.hadoop.hbase.RegionHistorian: Unable to create RegionHistorian&lt;br/&gt;
org.apache.hadoop.hbase.client.NoServerForRegionException: Timed out trying to locate root region&lt;/p&gt;

&lt;p&gt;and it restores the strictness of HMaster.findRootRegion which is necessary for &apos;safe-mode&apos;&lt;/p&gt;

&lt;p&gt;Please verify that this patch works for you.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="12646314" author="jimk" created="Mon, 10 Nov 2008 18:08:33 +0000"  >&lt;p&gt;This patch &apos;latches&apos; safe-mode so that when a split happens we don&apos;t run a foul of allRegionsAssigned.&lt;/p&gt;</comment>
                            <comment id="12646316" author="jdcryans" created="Mon, 10 Nov 2008 18:27:51 +0000"  >&lt;p&gt;+1 on latest patch.&lt;/p&gt;</comment>
                            <comment id="12646327" author="jimk" created="Mon, 10 Nov 2008 19:04:40 +0000"  >&lt;p&gt;The latest patch seems to have resolved the problem.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12393389" name="964-logs-1.zip" size="279916" author="apurtell" created="Wed, 5 Nov 2008 18:57:43 +0000"/>
                            <attachment id="12393650" name="964-v2.patch" size="6596" author="jimk" created="Mon, 10 Nov 2008 18:08:33 +0000"/>
                            <attachment id="12393647" name="964.patch" size="5013" author="jimk" created="Mon, 10 Nov 2008 17:14:52 +0000"/>
                            <attachment id="12393599" name="hbase-964-v1.patch" size="1219" author="jdcryans" created="Mon, 10 Nov 2008 00:15:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 4 Nov 2008 01:01:22 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25498</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 6 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0haiv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98967</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>