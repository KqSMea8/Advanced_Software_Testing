<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:17:11 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4243/HBASE-4243.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4243] HADOOP_HOME should be auto-detected</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4243</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Now that &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3465&quot; title=&quot;Hbase should use a HADOOP_HOME environment variable if available.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3465&quot;&gt;&lt;del&gt;HBASE-3465&lt;/del&gt;&lt;/a&gt; has been integrated, perhaps we should try to auto-detect the HADOOP_HOME setting if it is not given explicitly. Something along the lines of:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;# check for hadoop in the path
141	HADOOP_IN_PATH=`which hadoop 2&amp;gt;/dev/null`
142	if [ -f ${HADOOP_IN_PATH} ]; then
143	  HADOOP_DIR=`dirname &quot;$HADOOP_IN_PATH&quot;`/..
144	fi
145	# HADOOP_HOME env variable overrides hadoop in the path
146	HADOOP_HOME=${HADOOP_HOME:-$HADOOP_DIR}
147	if [ &quot;$HADOOP_HOME&quot; == &quot;&quot; ]; then
148	  echo &quot;Cannot find hadoop installation: \$HADOOP_HOME must be set or hadoop must be in the path&quot;;
149	  exit 4;
150	fi
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12519864">HBASE-4243</key>
            <summary>HADOOP_HOME should be auto-detected</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rvs">Roman Shaposhnik</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Aug 2011 18:57:52 +0000</created>
                <updated>Sat, 11 Apr 2015 00:14:05 +0000</updated>
                            <resolved>Sat, 11 Apr 2015 00:14:05 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13089746" author="stack" created="Tue, 23 Aug 2011 20:49:41 +0000"  >&lt;p&gt;I like it.&lt;/p&gt;

&lt;p&gt;Should we print out the hadoop we&apos;re using if its not &apos;default&apos;? (Forestall cases of &apos;damn, damn, damn, why is my not bug fix not working!!!!!&apos; because they&apos;ve patched default but they forgot they had hadoop in their path?)&lt;/p&gt;</comment>
                            <comment id="13089831" author="rvs" created="Tue, 23 Aug 2011 22:37:27 +0000"  >&lt;p&gt;Here&apos;s the basic code. I can always add echoing the value that we auto-discover, but wouldn&apos;t it make hbase CLI script too verbose? Please let me know.&lt;/p&gt;</comment>
                            <comment id="13100399" author="stack" created="Thu, 8 Sep 2011 15:43:05 +0000"  >&lt;p&gt;Committed to TRUNK.  Thanks Roman.  We can display version in shell via another JIRA.&lt;/p&gt;</comment>
                            <comment id="13100477" author="stack" created="Thu, 8 Sep 2011 17:26:56 +0000"  >&lt;p&gt;Reverted.  When I tried it I get this (on macosx)&lt;/p&gt;

&lt;p&gt;h45:clean_trunk Stack$ cd ../hbase&lt;br/&gt;
h45:hbase Stack$ ./bin/start-hbase.sh &lt;br/&gt;
readlink: illegal option &amp;#8211; f&lt;br/&gt;
usage: readlink &lt;span class=&quot;error&quot;&gt;&amp;#91;-n&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;file ...&amp;#93;&lt;/span&gt;&lt;br/&gt;
master running as process 39080. Stop it first.&lt;/p&gt;</comment>
                            <comment id="13100518" author="hudson" created="Thu, 8 Sep 2011 18:10:22 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2188 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2188/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2188/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4243&quot; title=&quot;HADOOP_HOME should be auto-detected&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4243&quot;&gt;&lt;del&gt;HBASE-4243&lt;/del&gt;&lt;/a&gt; HADOOP_HOME should be auto-detected&lt;/p&gt;

&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/bin/hbase&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13100646" author="hudson" created="Thu, 8 Sep 2011 19:59:40 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2189 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2189/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2189/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4243&quot; title=&quot;HADOOP_HOME should be auto-detected&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4243&quot;&gt;&lt;del&gt;HBASE-4243&lt;/del&gt;&lt;/a&gt;  HADOOP_HOME should be auto-detected (Roman Shaposhnik) &amp;#8211; revert.. non-portable shell change&lt;/p&gt;

&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/bin/hbase&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13101540" author="rvs" created="Fri, 9 Sep 2011 20:29:01 +0000"  >&lt;p&gt;Sorry about that. I tend to assume Linux these days. What&apos;s the level of UNIX API I can count on? POSIX? Or even less than that? Please let me know and I&apos;ll update the patch.&lt;/p&gt;</comment>
                            <comment id="13101637" author="stack" created="Fri, 9 Sep 2011 23:14:29 +0000"  >&lt;p&gt;np.  Linux is usually a safe bet but then you also have to make sure it works on the desktop machine a bunch of us whiney engineers use.  I saw this hunting around for shell portable readlink: &lt;a href=&quot;http://stackoverflow.com/questions/1055671/how-can-i-get-the-behavior-of-gnus-readlink-f-on-a-mac&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://stackoverflow.com/questions/1055671/how-can-i-get-the-behavior-of-gnus-readlink-f-on-a-mac&lt;/a&gt;  Maybe it&apos;ll help?&lt;/p&gt;</comment>
                            <comment id="13106984" author="rvs" created="Sat, 17 Sep 2011 01:18:24 +0000"  >&lt;p&gt;Hand-crafted implementation of readlink. Not pretty buts seems to work. Please let me know if you want it to be polished some more.&lt;/p&gt;</comment>
                            <comment id="13113262" author="larsgeorge" created="Fri, 23 Sep 2011 08:38:23 +0000"  >&lt;p&gt;Tested on MacOS Lion.&lt;/p&gt;

&lt;p&gt;Patch works fine and actually triggers another bug&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ bin/start-hbase.sh 
ls: /projects/opensource/hadoop-0.20.2-append/hadoop-core*.jar: No such file or directory
Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/hadoop/util/PlatformName
Caused by: java.lang.ClassNotFoundException: org.apache.hadoop.util.PlatformName
	at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
ls: /projects/opensource/hadoop-0.20.2-append/hadoop-core*.jar: No such file or directory
Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/hadoop/util/PlatformName
Caused by: java.lang.ClassNotFoundException: org.apache.hadoop.util.PlatformName
	at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
localhost: starting zookeeper, logging to /projects/opensource/hbase-trunk-rw//logs/hbase-larsgeorge-zookeeper-de1-app-mbp-2.out
localhost: /projects/opensource/hadoop-0.20.2-append
localhost: ls: /projects/opensource/hadoop-0.20.2-append/hadoop-core*.jar: No such file or directory
localhost: Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/hadoop/util/PlatformName
localhost: Caused by: java.lang.ClassNotFoundException: org.apache.hadoop.util.PlatformName
localhost: 	at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
localhost: 	at java.security.AccessController.doPrivileged(Native Method)
localhost: 	at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
localhost: 	at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
localhost: 	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
localhost: 	at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
starting master, logging to /projects/opensource/hbase-trunk-rw/bin/../logs/hbase-larsgeorge-master-de1-app-mbp-2.out
/projects/opensource/hadoop-0.20.2-append
ls: /projects/opensource/hadoop-0.20.2-append/hadoop-core*.jar: No such file or directory
Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/hadoop/util/PlatformName
Caused by: java.lang.ClassNotFoundException: org.apache.hadoop.util.PlatformName
	at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
localhost: starting regionserver, logging to /projects/opensource/hbase-trunk-rw//logs/hbase-larsgeorge-regionserver-de1-app-mbp-2.out
localhost: /projects/opensource/hadoop-0.20.2-append
localhost: ls: /projects/opensource/hadoop-0.20.2-append/hadoop-core*.jar: No such file or directory
localhost: Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/hadoop/util/PlatformName
localhost: Caused by: java.lang.ClassNotFoundException: org.apache.hadoop.util.PlatformName
localhost: 	at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
localhost: 	at java.security.AccessController.doPrivileged(Native Method)
localhost: 	at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
localhost: 	at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
localhost: 	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
localhost: 	at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;because of the tar ball naming of:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ ll /projects/opensource/hadoop-0.20.2-append/
total 14960
drwxr-xr-x@  26 larsgeorge  staff      884 Apr 13 09:09 .
drwxr-xr-x  114 larsgeorge  staff     3876 Sep 22 19:42 ..
-rw-r--r--@   1 larsgeorge  staff   348624 Apr 13 08:58 CHANGES.txt
-rw-r--r--@   1 larsgeorge  staff    13366 Apr 13 08:58 LICENSE.txt
-rw-r--r--@   1 larsgeorge  staff      101 Apr 13 08:58 NOTICE.txt
-rw-r--r--@   1 larsgeorge  staff     1366 Apr 13 08:58 README.txt
drwxr-xr-x@  17 larsgeorge  staff      578 Apr 13 08:58 bin
-rw-r--r--@   1 larsgeorge  staff    74035 Apr 13 08:58 build.xml
drwxr-xr-x@   4 larsgeorge  staff      136 Apr 13 08:58 c++
drwxr-xr-x   18 larsgeorge  staff      612 Aug  9 15:11 conf
drwxr-xr-x@  15 larsgeorge  staff      510 Apr 13 08:58 conf.original
drwxr-xr-x@  13 larsgeorge  staff      442 Apr 13 08:58 contrib
drwxr-xr-x@  63 larsgeorge  staff     2142 Apr 13 08:58 docs
-rw-r--r--@   1 larsgeorge  staff     6839 Apr 13 08:58 hadoop-0.20.2-ant.jar
-rw-r--r--    1 larsgeorge  staff  2707920 Apr 13 09:06 hadoop-0.20.2-core.jar
-rw-r--r--@   1 larsgeorge  staff  2689741 Apr 13 08:58 hadoop-0.20.2-core.jar.original
-rw-r--r--@   1 larsgeorge  staff   142466 Apr 13 08:58 hadoop-0.20.2-examples.jar
-rw-r--r--@   1 larsgeorge  staff  1563859 Apr 13 08:58 hadoop-0.20.2-test.jar
-rw-r--r--@   1 larsgeorge  staff    69940 Apr 13 08:58 hadoop-0.20.2-tools.jar
drwxr-xr-x@   6 larsgeorge  staff      204 Apr 13 08:58 ivy
-rw-r--r--@   1 larsgeorge  staff     8852 Apr 13 08:58 ivy.xml
drwxr-xr-x@  30 larsgeorge  staff     1020 Jul 13 10:20 lib
drwxr-xr-x@   3 larsgeorge  staff      102 Apr 13 08:58 librecordio
drwxr-xr-x    3 larsgeorge  staff      102 May 16 09:56 logs
drwxr-xr-x@  17 larsgeorge  staff      578 Apr 13 08:58 src
drwxr-xr-x@   8 larsgeorge  staff      272 Apr 13 08:58 webapps

$ svn revert bin/hbase
Reverted &apos;bin/hbase&apos;
$ killhbase 
$ bin/start-hbase.sh 
starting master, logging to /projects/opensource/hbase-trunk-rw/bin/../logs/hbase-larsgeorge-master-de1-app-mbp-2.out
$ 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So the revert of the patch fell back to the older behavior of not going through the if branch, which does not trigger the issue. Setting HADOOP_HOME externally does trigger it as expected.&lt;/p&gt;

&lt;p&gt;PS: Please upload the patch in SVN format (i.e. using --no-prefix with git for example), just so that it conforms to standard&lt;/p&gt;

&lt;p&gt;I am +1 applying the patch.&lt;/p&gt;</comment>
                            <comment id="13113268" author="larsgeorge" created="Fri, 23 Sep 2011 08:43:19 +0000"  >&lt;p&gt;Added &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4467&quot; title=&quot;Handle inconsistencies in Hadoop libraries naming in hbase script&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4467&quot;&gt;&lt;del&gt;HBASE-4467&lt;/del&gt;&lt;/a&gt; to handle naming issue.&lt;/p&gt;</comment>
                            <comment id="13113404" author="larsgeorge" created="Fri, 23 Sep 2011 13:07:35 +0000"  >&lt;p&gt;Oh, and I am for adding a prefix to the print out of the HADOOP_HOME, since currently the echo only emits the selected path. In the context of the rest of the console output this might be misleading. Maybe a Tomcat like printout would be OK? For example: &lt;/p&gt;

&lt;p&gt;echo &quot;Using HADOOP_HOME: $HADOOP_HOME&quot;&lt;/p&gt;</comment>
                            <comment id="14490583" author="apurtell" created="Sat, 11 Apr 2015 00:14:05 +0000"  >&lt;p&gt;Elsewhere we removed autodetection for JAVA_HOME on the advice that autodetection in general is fraught and better left to the user/system integrator.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12494896" name="HBASE-4243-2.patch.txt" size="732" author="rvs" created="Sat, 17 Sep 2011 01:18:24 +0000"/>
                            <attachment id="12491398" name="HBASE-4243.patch.txt" size="551" author="rvs" created="Tue, 23 Aug 2011 22:36:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 23 Aug 2011 20:49:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18526</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 35 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hq27:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>101484</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Use HADOOP_HOME if set.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>