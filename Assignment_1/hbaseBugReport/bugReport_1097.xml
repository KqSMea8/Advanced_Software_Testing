<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:50:44 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1097/HBASE-1097.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1097] SequenceFile.Reader keeps around buffer whose size is that of largest item read -&gt; results in lots of dead heap</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1097</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Andrew is OOMEing again.  Looking at some of his heaps, I can count Reader with DataOutputBuffers of ~600MB in a 2G heap.  Testing I see that the DataOutputBuffer allocated at head of Mapfile.Reader is reused when we call next, a reset is called. If I trace, the DataOutputBuffer has in it an internal Buffer class which is based on ByteArrayOutputStream.  Reset of the DOB eventually goes through to the BAOS reset.  This just sets the position.  It keeps the buffer sized to whatever it grew to last time this BAOS was used (Figuring this was a little complicated by the fact that DOB does some fancy footwork in a reset override to avoid copies).&lt;/p&gt;</description>
                <environment>&lt;p&gt;apurtell 25 node TRUNK on hadoop 0.18.1 cluster&lt;/p&gt;</environment>
        <key id="12411439">HBASE-1097</key>
            <summary>SequenceFile.Reader keeps around buffer whose size is that of largest item read -&gt; results in lots of dead heap</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Dec 2008 22:35:00 +0000</created>
                <updated>Sun, 13 Sep 2009 22:26:36 +0000</updated>
                            <resolved>Tue, 30 Dec 2008 18:37:15 +0000</resolved>
                                                    <fixVersion>0.19.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12659675" author="stack" created="Mon, 29 Dec 2008 22:36:17 +0000"  >&lt;p&gt;Bring down MapFile, SequenceFile and DataOutputBuffer.  Fix DOB reset so we put in place initial buffer on invocation.  Fix is like &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-4802&quot; title=&quot;RPC Server send buffer retains size of largest response ever sent &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-4802&quot;&gt;&lt;del&gt;HADOOP-4802&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12659704" author="apurtell" created="Tue, 30 Dec 2008 00:07:14 +0000"  >&lt;p&gt;I&apos;m running with this patch applied now. &lt;/p&gt;</comment>
                            <comment id="12659829" author="apurtell" created="Tue, 30 Dec 2008 15:27:26 +0000"  >&lt;p&gt;+1 for commit.&lt;/p&gt;

&lt;p&gt;As you might expect, heaps on our HRS are running 40-60% smaller than before. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Great work Stack, bringing MapFile and SequenceFile local was a great move.&lt;/p&gt;</comment>
                            <comment id="12659860" author="stack" created="Tue, 30 Dec 2008 17:40:20 +0000"  >&lt;p&gt;Good.  Let me make sure there are no migration implications before committing above patch.&lt;/p&gt;</comment>
                            <comment id="12659882" author="stack" created="Tue, 30 Dec 2008 18:37:15 +0000"  >&lt;p&gt;No apparent migration issues.&lt;/p&gt;
</comment>
                            <comment id="12659883" author="stack" created="Tue, 30 Dec 2008 18:37:41 +0000"  >&lt;p&gt;Thanks for testing Andrew.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12396868" name="mf.patch" size="156631" author="stack" created="Mon, 29 Dec 2008 22:36:17 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 30 Dec 2008 00:07:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25570</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 51 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hbb3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99094</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Address OOMEing in presence of big cells -- MBs -- when there is scanning going on</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>