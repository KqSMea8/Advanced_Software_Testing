<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:46:22 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-7502/HBASE-7502.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-7502] TestScannerTimeout fails on snapshot branch</title>
                <link>https://issues.apache.org/jira/browse/HBASE-7502</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;TestScannerTimeout#test3686a fails consistently on snapshot branch. This is because there is an increase in the number of watches on the rs znode and its deletion takes more time now. The repercussion is that when test3686a starts, it ensures that there are two regionservers and it counts the aborted regionserver as a live one. While processing, it kills one of its server, and also the znode of the previously aborted server expires. Overall effect is there are no regionservers now, and client hangs.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

Error Message

test timed out after 300000 milliseconds
Stacktrace

java.lang.Exception: test timed out after 300000 milliseconds
at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.close(HConnectionManager.java:1769)
at org.apache.hadoop.hbase.client.HTable.close(HTable.java:961)
at org.apache.hadoop.hbase.client.MetaScanner.metaScan(MetaScanner.java:180)
at org.apache.hadoop.hbase.client.MetaScanner.access$000(MetaScanner.java:54)
at org.apache.hadoop.hbase.client.MetaScanner$1.connect(MetaScanner.java:133)
at org.apache.hadoop.hbase.client.MetaScanner$1.connect(MetaScanner.java:130)
at org.apache.hadoop.hbase.client.HConnectionManager.execute(HConnectionManager.java:360)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12626259">HBASE-7502</key>
            <summary>TestScannerTimeout fails on snapshot branch</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="v.himanshu">Himanshu Vashishtha</assignee>
                                    <reporter username="v.himanshu">Himanshu Vashishtha</reporter>
                        <labels>
                    </labels>
                <created>Sun, 6 Jan 2013 20:38:58 +0000</created>
                <updated>Tue, 26 Feb 2013 08:27:14 +0000</updated>
                            <resolved>Fri, 11 Jan 2013 22:25:53 +0000</resolved>
                                    <version>hbase-7290</version>
                                    <fixVersion>0.94.5</fixVersion>
                    <fixVersion>0.95.0</fixVersion>
                                    <component>test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13545487" author="v.himanshu" created="Sun, 6 Jan 2013 20:48:14 +0000"  >&lt;p&gt;TestScannerTimeout passes with this.&lt;/p&gt;</comment>
                            <comment id="13545498" author="mbertozzi" created="Sun, 6 Jan 2013 21:20:42 +0000"  >&lt;p&gt;The extra watchers added are related to the ZKProcedureMemberRpcs, in the RegionSnapshotManager.&lt;/p&gt;

&lt;p&gt;patch looks good to me.&lt;/p&gt;</comment>
                            <comment id="13545503" author="lhofhansl" created="Sun, 6 Jan 2013 21:41:46 +0000"  >&lt;p&gt;test3686a also fails occasionally in 0.94 and trunk. I just increased the scanning timeout to 15000 (from 10000)... But the race you mention might have been the cause there too.&lt;/p&gt;</comment>
                            <comment id="13545505" author="yuzhihong@gmail.com" created="Sun, 6 Jan 2013 21:46:05 +0000"  >&lt;p&gt;Nice finding, Himanshu. Some minor comments:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; List&amp;lt;RegionServerThread&amp;gt; getLiveRegionServers() {
+    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; hbaseCluster.getLiveRegionServerThreads();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Since List of RegionServerThread is returned, I think the new method should be named getLiveRegionServerThreads()&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+          regionServerAlive = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
+          &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(100);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The sleep() is used to wait for rs to be out of live region server list. I think 10 ms can be used instead of 100ms.&lt;/p&gt;</comment>
                            <comment id="13545521" author="lhofhansl" created="Sun, 6 Jan 2013 23:04:07 +0000"  >&lt;p&gt;Another option here is to simply replace the call to ensureSomeRegionServersAvailable with a call to ensureSomeNonStoppedRegionServersAvailable. Would that work too? It seems simpler.&lt;/p&gt;</comment>
                            <comment id="13545580" author="v.himanshu" created="Mon, 7 Jan 2013 02:11:20 +0000"  >&lt;p&gt;@Ted: Thanks for the review. &lt;br/&gt;
@Lars: No, the online snapshot code is not in trunk yet. This is &lt;b&gt;consistently&lt;/b&gt; failing on internal jenkins. Hmm, didn&apos;t look at ensureSomeNonStoppedRegionServersAvailable before; will report back.&lt;/p&gt;</comment>
                            <comment id="13545587" author="v.himanshu" created="Mon, 7 Jan 2013 02:39:04 +0000"  >&lt;p&gt;one liner fix... Thanks Lars.&lt;/p&gt;</comment>
                            <comment id="13545610" author="lhofhansl" created="Mon, 7 Jan 2013 03:33:00 +0000"  >&lt;p&gt;Thanks Himanshu. Re: Snapshot only. What I meant to say was that this test also fails in 0.94 and 0.96 and that it might be a similar issue (asynchronous ZK delay).&lt;br/&gt;
I think we can safely apply the same change to 0.94 and 0.96.&lt;/p&gt;</comment>
                            <comment id="13545621" author="lhofhansl" created="Mon, 7 Jan 2013 04:13:35 +0000"  >&lt;p&gt;+1&lt;br/&gt;
Will commit unless there are objections.&lt;/p&gt;</comment>
                            <comment id="13545645" author="lhofhansl" created="Mon, 7 Jan 2013 05:29:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbertozzi&quot; class=&quot;user-hover&quot; rel=&quot;mbertozzi&quot;&gt;Matteo Bertozzi&lt;/a&gt; Wanna commit to the online snapshot branch? I can do 0.94 and 0.96 unless you want to.&lt;/p&gt;</comment>
                            <comment id="13545646" author="mbertozzi" created="Mon, 7 Jan 2013 05:33:50 +0000"  >&lt;p&gt;sure, I&apos;m running once again the jenkins job and if it still passes I&apos;ll commit it to the snapshot branch. &lt;/p&gt;</comment>
                            <comment id="13545665" author="mbertozzi" created="Mon, 7 Jan 2013 06:31:59 +0000"  >&lt;p&gt;test seems to pass consistently with v2, committing it to the snapshot branch.&lt;/p&gt;</comment>
                            <comment id="13551358" author="yuzhihong@gmail.com" created="Fri, 11 Jan 2013 18:28:41 +0000"  >&lt;p&gt;Integrated patch v2 to trunk.&lt;/p&gt;</comment>
                            <comment id="13551431" author="hudson" created="Fri, 11 Jan 2013 19:24:19 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3732 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3732/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3732/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7502&quot; title=&quot;TestScannerTimeout fails on snapshot branch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7502&quot;&gt;&lt;del&gt;HBASE-7502&lt;/del&gt;&lt;/a&gt; TestScannerTimeout fails on snapshot branch (Himanshu) (Revision 1432211)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestScannerTimeout.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13551591" author="lhofhansl" created="Fri, 11 Jan 2013 22:25:53 +0000"  >&lt;p&gt;Committed to 0.94 as well.&lt;/p&gt;</comment>
                            <comment id="13551668" author="hudson" created="Fri, 11 Jan 2013 23:58:34 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #344 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/344/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/344/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7502&quot; title=&quot;TestScannerTimeout fails on snapshot branch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7502&quot;&gt;&lt;del&gt;HBASE-7502&lt;/del&gt;&lt;/a&gt; TestScannerTimeout fails on snapshot branch (Himanshu) (Revision 1432211)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestScannerTimeout.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13551677" author="hudson" created="Sat, 12 Jan 2013 00:04:36 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #726 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/726/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/726/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7502&quot; title=&quot;TestScannerTimeout fails on snapshot branch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7502&quot;&gt;&lt;del&gt;HBASE-7502&lt;/del&gt;&lt;/a&gt; TestScannerTimeout fails on snapshot branch (Himanshu) (Revision 1432320)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/client/TestScannerTimeout.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13554220" author="hudson" created="Tue, 15 Jan 2013 19:40:17 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #95 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/95/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/95/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7502&quot; title=&quot;TestScannerTimeout fails on snapshot branch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7502&quot;&gt;&lt;del&gt;HBASE-7502&lt;/del&gt;&lt;/a&gt; TestScannerTimeout fails on snapshot branch (Himanshu) (Revision 1432320)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/client/TestScannerTimeout.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13570994" author="hudson" created="Tue, 5 Feb 2013 03:58:29 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security-on-Hadoop-23 #11 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/11/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/11/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7502&quot; title=&quot;TestScannerTimeout fails on snapshot branch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7502&quot;&gt;&lt;del&gt;HBASE-7502&lt;/del&gt;&lt;/a&gt; TestScannerTimeout fails on snapshot branch (Himanshu) (Revision 1432320)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/client/TestScannerTimeout.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12563501" name="HBASE-7502-v1.patch" size="3200" author="v.himanshu" created="Sun, 6 Jan 2013 20:48:14 +0000"/>
                            <attachment id="12563513" name="HBASE-7502-v2.patch" size="565" author="v.himanshu" created="Mon, 7 Jan 2013 02:39:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 6 Jan 2013 21:20:42 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>302845</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 45 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i175w7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>249923</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>