<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:52:58 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1372/HBASE-1372.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1372] TestGetRowVersions doesn&apos;t pass on 0.19 branch</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1372</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Currently TestGetRowVersions doesn&apos;t pass because the region server is too slow to setup root and meta and gets a lease expired.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12424617">HBASE-1372</key>
            <summary>TestGetRowVersions doesn&apos;t pass on 0.19 branch</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jdcryans">Jean-Daniel Cryans</assignee>
                                    <reporter username="jdcryans">Jean-Daniel Cryans</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 May 2009 16:52:31 +0000</created>
                <updated>Sun, 13 Sep 2009 22:31:26 +0000</updated>
                            <resolved>Tue, 5 May 2009 23:25:15 +0000</resolved>
                                    <version>0.19.2</version>
                                    <fixVersion>0.19.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12706098" author="jdcryans" created="Tue, 5 May 2009 16:54:58 +0000"  >&lt;p&gt;This is what happens:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    [junit] 2009-05-05 12:53:43,790 INFO  [IPC Server handler 3 on 60000] master.RegionManager(401): assigning region test,,1241542405273 to the only server 127.0.0.1:57693
    [junit] 2009-05-05 12:53:48,716 DEBUG [main] client.HConnectionManager$TableServers(570): locateRegionInMeta attempt 0 of 10 failed; retrying after sleep of 5000
    [junit] java.net.ConnectException: Call to /127.0.0.1:46252 failed on connection exception: java.net.ConnectException: Connection refused
    [junit] 	at org.apache.hadoop.hbase.ipc.HBaseClient.wrapException(HBaseClient.java:728)
    [junit] 	at org.apache.hadoop.hbase.ipc.HBaseClient.call(HBaseClient.java:704)
...
    [junit] 2009-05-05 12:53:48,717 DEBUG [main] client.HConnectionManager$TableServers(691): Removed .META.,,1 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; tableName=.META. from cache because of test,row,99999999999999
    [junit] 2009-05-05 12:53:49,789 INFO  [ServerManager.leaseChecker] master.ServerManager$ServerExpirer(761): 127.0.0.1:57693 lease expired
    [junit] 2009-05-05 12:53:49,791 DEBUG [HMaster] master.HMaster(438): Processing todo: ProcessServerShutdown of 127.0.0.1:57693
    [junit] 2009-05-05 12:53:49,791 INFO  [HMaster] master.ProcessServerShutdown(235): process shutdown of server 127.0.0.1:57693: logSplit: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, rootRescanned: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, numberOfMetaRegions: 1, onlineMetaRegions.size(): 1
    [junit] 2009-05-05 12:53:49,795 INFO  [HMaster] regionserver.HLog(714): Splitting 1 log(s) in hdfs:&lt;span class=&quot;code-comment&quot;&gt;//localhost.localdomain:56376/user/hadoop/log_127.0.0.1_1241542413670_57693
&lt;/span&gt;    [junit] 2009-05-05 12:53:49,795 DEBUG [HMaster] regionserver.HLog(743): Splitting 1 of 1: hdfs:&lt;span class=&quot;code-comment&quot;&gt;//localhost.localdomain:56376/user/hadoop/log_127.0.0.1_1241542413670_57693/hlog.dat.1241542414746
&lt;/span&gt;    [junit] 2009-05-05 12:53:49,806 INFO  [HMaster] regionserver.HLog(725): log file splitting completed &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; hdfs:&lt;span class=&quot;code-comment&quot;&gt;//localhost.localdomain:56376/user/hadoop/log_127.0.0.1_1241542413670_57693&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12706173" author="jdcryans" created="Tue, 5 May 2009 19:50:15 +0000"  >&lt;p&gt;Digging in the code I saw that the region server was waiting after the master when reporting. What happened is that when the master assigns a region, it writes an entry in the region historian. Problem is, the first time HCM (under the historian) sees a table there is a huge wait.... which was too long for the 6 seconds lease in the tests. I think for 0.19.2 we should just move that waiting time right up when the master starts with something like this in ProcessRegionOpen:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
          server.batchUpdate(metaRegionName, b, -1L);
          &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.historian.isOnline()) {
            &lt;span class=&quot;code-comment&quot;&gt;// This is safest place to &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; the onlining of the historian in
&lt;/span&gt;            &lt;span class=&quot;code-comment&quot;&gt;// the master. When we get to here, we know there is a .META.
&lt;/span&gt;            &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the historian to go against.
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.historian.online(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.master.getConfiguration());
          }
          &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.historian.addRegionOpen(regionInfo, serverAddress);
          &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.historian.getRegionHistory(&lt;span class=&quot;code-quote&quot;&gt;&quot;dummy&quot;&lt;/span&gt;); &amp;lt;&amp;lt;&amp;lt;&amp;lt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For trunk we could work on improving HCM.&lt;/p&gt;</comment>
                            <comment id="12706181" author="jdcryans" created="Tue, 5 May 2009 20:08:20 +0000"  >&lt;p&gt;Patch that passes all tests.&lt;/p&gt;</comment>
                            <comment id="12706202" author="apurtell" created="Tue, 5 May 2009 21:26:06 +0000"  >&lt;p&gt;+1 I think a workaround like this is fine for the branch. &lt;/p&gt;</comment>
                            <comment id="12706245" author="stack" created="Tue, 5 May 2009 23:25:15 +0000"  >&lt;p&gt;Committed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12407275" name="hbase-1372.patch" size="644" author="jdcryans" created="Tue, 5 May 2009 20:08:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 5 May 2009 21:26:06 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25720</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 33 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hcun:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99344</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>