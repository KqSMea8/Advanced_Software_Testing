<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:55:49 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1722/HBASE-1722.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1722] Add support for exporting HBase metrics via JMX</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1722</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Current HBase metrics collection and reporting (for the 0.19 releases at least) doesn&apos;t seem to export any of the metrics as MBeans via JMX.&lt;/p&gt;

&lt;p&gt;This patch adds JMX MBean support for reporting metrics collected in 3 areas:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;org.apache.hadoop.hbase.ipc.HBaseRpcMetrics&lt;/li&gt;
	&lt;li&gt;org.apache.hadoop.hbase.master.metrics.MasterMetrics&lt;/li&gt;
	&lt;li&gt;org.apache.hadoop.hbase.regionserver.metrics.RegionServerMetrics&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This patch is only against the 0.19 branch, as the metrics API seems to have changed a bit in Hadoop 0.20, including adding support for dynamic MBeans.  I&apos;ll add a patch reworked for trunk shortly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12431754">HBASE-1722</key>
            <summary>Add support for exporting HBase metrics via JMX</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ghelmling">Gary Helmling</assignee>
                                    <reporter username="ghelmling">Gary Helmling</reporter>
                        <labels>
                    </labels>
                <created>Thu, 30 Jul 2009 00:39:04 +0000</created>
                <updated>Fri, 20 Nov 2015 13:01:17 +0000</updated>
                            <resolved>Sat, 12 Sep 2009 20:51:54 +0000</resolved>
                                    <version>0.19.3</version>
                                    <fixVersion>0.20.1</fixVersion>
                                    <component>IPC/RPC</component>
                    <component>master</component>
                    <component>regionserver</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="12736941" author="ghelmling" created="Thu, 30 Jul 2009 00:41:56 +0000"  >&lt;p&gt;This patch provide JMX support against the current 0.19 branch, adding a JMX MBean interface and implementing class for each of the 3 metrics areas in the issue.&lt;/p&gt;

&lt;p&gt;Please let me know of any problems, code style issues, etc.&lt;/p&gt;</comment>
                            <comment id="12737211" author="stack" created="Thu, 30 Jul 2009 18:15:53 +0000"  >&lt;p&gt;Thanks for the nice patch Gary.  Any chance of one for hbase TRUNK with maybe a bit of documentation on how to set things up so metrics show in something like jconsole?  Only issue was missing Apache copyright.  In future, just watch line lengths.  Hadoop project is 80 characters generally.&lt;/p&gt;</comment>
                            <comment id="12737237" author="ghelmling" created="Thu, 30 Jul 2009 19:06:41 +0000"  >&lt;p&gt;Here&apos;s a patch against current trunk.  This one was generated with git, but I was able to test apply cleanly with patch -p1.&lt;/p&gt;

&lt;p&gt;This one was even easier thanks to MetricsDynamicMBeanBase in hadoop 0.20!  I was able to drop the need for separate interfaces and pass through accessors for each metric.&lt;/p&gt;

&lt;p&gt;I&apos;ll put up some docs on enable JMX monitoring on the wiki.  For remote monitoring this may require some tweaks to hbase-env.sh and the hbase shell script &amp;#8211; like separating out option vars for master vs. regionservers.&lt;/p&gt;
</comment>
                            <comment id="12737248" author="stack" created="Thu, 30 Jul 2009 19:37:28 +0000"  >&lt;p&gt;Patch looks good.&lt;/p&gt;

&lt;p&gt;On docs, add your comment here, &lt;a href=&quot;http://hadoop.apache.org/hbase/docs/r0.19.3/metrics.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hadoop.apache.org/hbase/docs/r0.19.3/metrics.html&lt;/a&gt;, rather than to wiki.  If its checked in as part of source, doc gets packaged with the version it targets.  To find the page to edit, its at src/docs/src/documentation/content/xdocs/metrics.xml in the repository.&lt;/p&gt;

&lt;p&gt;Thanks Gary.&lt;/p&gt;</comment>
                            <comment id="12737249" author="stack" created="Thu, 30 Jul 2009 19:38:31 +0000"  >&lt;p&gt;Reopen till we do commit against TRUNK&lt;/p&gt;</comment>
                            <comment id="12737300" author="ghelmling" created="Thu, 30 Jul 2009 21:27:13 +0000"  >&lt;p&gt;Ok, I&apos;ll do a write up in metrics.xml instead and post patches for that against 0.19 and trunk.  Thanks for the quick review!&lt;/p&gt;</comment>
                            <comment id="12739232" author="ghelmling" created="Tue, 4 Aug 2009 23:09:12 +0000"  >&lt;p&gt;Here&apos;s a patch for metrics.xml in trunk.&lt;/p&gt;

&lt;p&gt;This is my first time using Forrest, so let me know if anything seems off or missing.&lt;/p&gt;

&lt;p&gt;The last bit about editing bin/hbase is kind of hacky, but is necessary since we currently don&apos;t split out opts for master vs. regionserver vs. shell, etc.&lt;/p&gt;

&lt;p&gt;I&apos;ll attach a separate version for 0.19 &amp;#8211; the only real difference is the domain where the MBeans show up.&lt;/p&gt;</comment>
                            <comment id="12739238" author="ghelmling" created="Tue, 4 Aug 2009 23:15:34 +0000"  >&lt;p&gt;Here is a patch for metrics.xml against 0.19.  The only change is the domain for where the MBeans appear (hadoop.dfs) &amp;#8211; this is controlled by the Hadoop MBeanUtil class.&lt;/p&gt;

&lt;p&gt;Again if anything&apos;s missing or additional information would be useful, let me know.&lt;/p&gt;</comment>
                            <comment id="12751302" author="stack" created="Fri, 4 Sep 2009 04:38:28 +0000"  >&lt;p&gt;@Gary:&lt;/p&gt;

&lt;p&gt;I reviewed patch for TRUNK.  Its great.  I like the addition to monitoring docs particularly.  Before applying, do you want to add in JMX environment variables to hbase-env.sh and include them in bin/hbase.sh rather than have users copy and paste out of the monitoring documentation?  (Default, the JMX env variables can be null).&lt;/p&gt;

&lt;p&gt;Otherwise, was going to apply to TRUNK and branch so would be in 0.20.1.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="12752686" author="ghelmling" created="Tue, 8 Sep 2009 19:19:16 +0000"  >&lt;p&gt;Here&apos;s a patch for the bin/hbase and conf/hbase-env.sh scripts and conf/hadoop-metrics.properties, adding placeholder configurations to ease the process of enabling JMX monitoring.  If the conditional checking in bin/hbase for a &quot;start&quot; action is too weird though, feel free to skip these changes.  The config is documented in the metrics.xml patch.  This just provides a bit more guidance for enabling.&lt;/p&gt;</comment>
                            <comment id="12753420" author="stack" created="Thu, 10 Sep 2009 04:53:40 +0000"  >&lt;p&gt;Thanks for the new patch Gary.  I took a look at it.  I like the addition of HBASE_REGIONSERVER_OPTIONS, etc., only I think itneeds more work; it works for setting jmx options per daemon but would be sweet if could set jvm mx and ms per daemon (and for zookeeper) as per &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1687&quot; title=&quot;bin/hbase script doesn&amp;#39;t allow for different memory settings for each daemon type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1687&quot;&gt;&lt;del&gt;HBASE-1687&lt;/del&gt;&lt;/a&gt;.  Its a little tricky because we have that HBASE_HEAPSIZE thingy.&lt;/p&gt;

&lt;p&gt;But no biggie.  You have done the work documenting how to make jmx run with your additions to the metrics page.  Let me commit.  Folks who want to jmx can just read your metrics additions.  &apos;ll commit to TRUNK.  I won&apos;t add to branch, unless you insist.  Lets fix the above in a new issue or as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1687&quot; title=&quot;bin/hbase script doesn&amp;#39;t allow for different memory settings for each daemon type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1687&quot;&gt;&lt;del&gt;HBASE-1687&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;When we add suggested jmx options to hbase-env.sh, maybe default should be no default?   Its a bit easier than pointing to a file with user login and password for jconsole?&lt;/p&gt;

&lt;p&gt;Good stuff Gary.&lt;/p&gt;</comment>
                            <comment id="12753421" author="stack" created="Thu, 10 Sep 2009 04:54:46 +0000"  >&lt;p&gt;Roll up of Gary&apos;s classes &amp;#8211; Its what I committed to TRUNK.&lt;/p&gt;</comment>
                            <comment id="12753422" author="stack" created="Thu, 10 Sep 2009 04:55:36 +0000"  >&lt;p&gt;Moving to TRUNK&lt;/p&gt;</comment>
                            <comment id="12754383" author="stack" created="Fri, 11 Sep 2009 22:22:01 +0000"  >&lt;p&gt;Update: I committed patch added by Ryan to hbase-1687.  His patch was almost exactly the content of hbase-bin.patch above.  My reasons for omitting hbase-bin.patch didn&apos;t hold up under scrutiny.  The HBASE_HEAPSIZE appears before the HBASE_*_OPTS added by his patch (and by hbase-bin.patch) and because the last -Xmx/-Xms wins, adding -Xmx/-Xms that override HBASE_HEAPSIZE works.&lt;/p&gt;

&lt;p&gt;On commit of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1687&quot; title=&quot;bin/hbase script doesn&amp;#39;t allow for different memory settings for each daemon type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1687&quot;&gt;&lt;del&gt;HBASE-1687&lt;/del&gt;&lt;/a&gt;, I amended the metrics.xml documentation to remove mention of HBASE_*_OPTS addition now its no longer needed.&lt;/p&gt;</comment>
                            <comment id="12754390" author="ghelmling" created="Fri, 11 Sep 2009 22:37:35 +0000"  >&lt;p&gt;Excellent!  Thanks, stack!&lt;/p&gt;</comment>
                            <comment id="12754608" author="stack" created="Sat, 12 Sep 2009 20:51:54 +0000"  >&lt;p&gt;Committed to TRUNK.  Thanks for the nice patch Gary.&lt;/p&gt;</comment>
                            <comment id="12761814" author="stack" created="Sat, 3 Oct 2009 05:22:40 +0000"  >&lt;p&gt;Backport to 0.20 branch.&lt;/p&gt;</comment>
                            <comment id="12762446" author="stack" created="Mon, 5 Oct 2009 23:19:36 +0000"  >&lt;p&gt;I backported this patch and the metrics jmx doc. to 0.20.1.&lt;/p&gt;</comment>
                            <comment id="15017763" author="lars_francke" created="Fri, 20 Nov 2015 13:01:17 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12418950" name="hbase-bin.patch" size="4266" author="ghelmling" created="Tue, 8 Sep 2009 19:19:16 +0000"/>
                            <attachment id="12419136" name="jmx.patch" size="9475" author="stack" created="Thu, 10 Sep 2009 04:54:46 +0000"/>
                            <attachment id="12414971" name="jmx_metrics-0.19.patch" size="19608" author="ghelmling" created="Thu, 30 Jul 2009 00:41:56 +0000"/>
                            <attachment id="12415052" name="jmx_support-trunk.patch" size="9825" author="ghelmling" created="Thu, 30 Jul 2009 19:06:41 +0000"/>
                            <attachment id="12415543" name="metrics_docs_0.19.patch" size="4564" author="ghelmling" created="Tue, 4 Aug 2009 23:15:34 +0000"/>
                            <attachment id="12415541" name="metrics_docs_trunk.patch" size="4554" author="ghelmling" created="Tue, 4 Aug 2009 23:09:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 30 Jul 2009 18:15:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32239</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hewf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99676</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>