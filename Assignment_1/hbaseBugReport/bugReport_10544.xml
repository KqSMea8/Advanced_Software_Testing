<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:14:52 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-10544/HBASE-10544.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-10544] Surface completion state of global administrative actions</title>
                <link>https://issues.apache.org/jira/browse/HBASE-10544</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;When issuing requests for global administrative actions, such as major compaction, users have to look for indirect evidence the action has completed, and cannot really be sure of the final state. &lt;/p&gt;

&lt;p&gt;Hat tip to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdcryans&quot; class=&quot;user-hover&quot; rel=&quot;jdcryans&quot;&gt;Jean-Daniel Cryans&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;We can approach this a couple of ways. We could add a per regionserver metric for percentage of admin requests complete, maybe also aggregated by the master. This would provide a single point of reference. However if we also want to insure 100% completion even in the presence of node failures, or provide separate completion feedback for each request, I think we need to redo flush and compaction requests as Procedures. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12695314">HBASE-10544</key>
            <summary>Surface completion state of global administrative actions</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="apurtell">Andrew Purtell</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Feb 2014 23:09:46 +0000</created>
                <updated>Tue, 28 Apr 2015 04:43:11 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13902126" author="apurtell" created="Fri, 14 Feb 2014 23:33:34 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think we need to redo flush and compaction requests as Procedures.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t relish the thought of the work involved but there are operational and security risks involved with incomplete major compaction after schema changes, such as changing compression settings, enabling encryption, etc. Assigning myself.&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="13904425" author="enis" created="Tue, 18 Feb 2014 19:12:50 +0000"  >&lt;p&gt;This has been discussed in the context of master redesign (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5487&quot; title=&quot;Generic framework for Master-coordinated tasks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5487&quot;&gt;HBASE-5487&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5487?focusedCommentId=13797368&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13797368&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-5487?focusedCommentId=13797368&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13797368&lt;/a&gt;). &lt;/p&gt;

&lt;p&gt;Most of the master RPC requests are &quot;half-async&quot;. Meaning, the request is sent, some processing is done (in some cases it is full sync, some cases half sync), but the client does not get a handle to ask the status of the operation. Instead it looks for the &quot;side effects&quot; of the operation to complete. For example, createTable() is sent to master, some processing is done there (to check for whether there are same named tables, etc), and the client waits for the regions to appear in META. If anything goes wrong, the client is stuck waiting. Also, since the request is only in master&apos;s memory, master failover cannot recover running operations, and the table is left in a weird state. &lt;/p&gt;

&lt;p&gt;I think the way here is to implement persistent operations in master (persistent via zk, WAL, system table, etc). When a client issues a request, it gets a handle which can be used to ask the status later. &lt;/p&gt;</comment>
                            <comment id="14200949" author="apurtell" created="Thu, 6 Nov 2014 21:17:33 +0000"  >&lt;p&gt;Just to tie in related discussion elsewhere.&lt;/p&gt;

&lt;p&gt;If we implemented something like Accumulo&apos;s FATE and had the master use that when creating, modifying, enabling/disabling tables, then a client could track the completion state of the master&apos;s work that way. See &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5459&quot; title=&quot;Provide capability to find the status of Master coordinated tasks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5459&quot;&gt;HBASE-5459&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;We&apos;d still need an answer to track distributed admin actions like compaction and flush requests, probably with a Procedure. &lt;/p&gt;</comment>
                            <comment id="14201001" author="mbertozzi" created="Thu, 6 Nov 2014 21:49:41 +0000"  >&lt;p&gt;I&apos;m working on that right now as part of our hackathon I&apos;ve opened &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12439&quot; title=&quot;Procedure V2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12439&quot;&gt;HBASE-12439&lt;/a&gt; with the current code that I have... but it is still early stage&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12752927">PHOENIX-1408</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12544478">HBASE-5487</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12730571">HBASE-11608</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12543771">HBASE-5459</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12676713">HBASE-9864</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 18 Feb 2014 19:12:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>373822</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 6 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1sf53:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>374122</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>