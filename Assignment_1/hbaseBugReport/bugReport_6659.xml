<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:38:44 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6659/HBASE-6659.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6659] Port HBASE-6508 Filter out edits at log split time</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6659</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6508&quot; title=&quot;[0.89-fb] Filter out edits at log split time&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6508&quot;&gt;&lt;del&gt;HBASE-6508&lt;/del&gt;&lt;/a&gt; is for 0.89-fb branch.&lt;/p&gt;

&lt;p&gt;This JIRA ports the feature to trunk.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12604918">HBASE-6659</key>
            <summary>Port HBASE-6508 Filter out edits at log split time</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yuzhihong@gmail.com">Ted Yu</assignee>
                                    <reporter username="zhihyu@ebaysf.com">Ted Yu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Aug 2012 20:13:05 +0000</created>
                <updated>Tue, 15 Oct 2013 04:46:32 +0000</updated>
                            <resolved>Thu, 6 Sep 2012 20:47:03 +0000</resolved>
                                                    <fixVersion>0.95.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                <comments>
                            <comment id="13441594" author="zhihyu@ebaysf.com" created="Fri, 24 Aug 2012 23:25:27 +0000"  >&lt;p&gt;Review request is published at &lt;a href=&quot;https://reviews.apache.org/r/6768&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/6768&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13441631" author="hadoopqa" created="Fri, 24 Aug 2012 23:54:18 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12542369/6508.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12542369/6508.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 12 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2686//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2686//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13441692" author="hadoopqa" created="Sat, 25 Aug 2012 01:04:29 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12542382/6508-v2.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12542382/6508-v2.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 12 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated 92 warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The applied patch generated 5 javac compiler warnings (more than the trunk&apos;s current 4 warnings).&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 13 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.TestCheckTestClasses&lt;br/&gt;
                  org.apache.hadoop.hbase.io.TestHeapSize&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2687//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2687//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2687//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2687//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2687//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2687//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2687//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2687//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2687//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2687//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2687//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2687//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2687//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2687//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13441924" author="hadoopqa" created="Sat, 25 Aug 2012 17:23:03 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12542417/6508-v4.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12542417/6508-v4.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 12 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated 92 warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The applied patch generated 5 javac compiler warnings (more than the trunk&apos;s current 4 warnings).&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 13 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.TestMultiVersions&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2693//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2693//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2693//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2693//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2693//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2693//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2693//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2693//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2693//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2693//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2693//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2693//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2693//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2693//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13441982" author="zhihyu@ebaysf.com" created="Sat, 25 Aug 2012 23:00:28 +0000"  >&lt;p&gt;TestMultiVersions failure is not related to latest patch.&lt;/p&gt;</comment>
                            <comment id="13442443" author="yuzhihong@gmail.com" created="Mon, 27 Aug 2012 14:44:45 +0000"  >&lt;p&gt;Removed some white spaces.&lt;br/&gt;
Plan to integrate this evening if there is no objection.&lt;/p&gt;</comment>
                            <comment id="13442487" author="hadoopqa" created="Mon, 27 Aug 2012 15:58:10 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12542608/6508-v4.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12542608/6508-v4.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 12 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated 92 warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The applied patch generated 5 javac compiler warnings (more than the trunk&apos;s current 4 warnings).&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 13 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2700//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2700//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2700//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2700//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2700//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2700//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2700//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2700//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2700//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2700//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2700//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2700//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2700//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2700//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13442784" author="hadoopqa" created="Mon, 27 Aug 2012 23:01:40 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12542656/6508-v4.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12542656/6508-v4.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 12 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated 92 warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The applied patch generated 5 javac compiler warnings (more than the trunk&apos;s current 4 warnings).&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 13 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.coprocessor.TestRegionServerCoprocessorExceptionWithAbort&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2708//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2708//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2708//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2708//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2708//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2708//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2708//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2708//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2708//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2708//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2708//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2708//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2708//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2708//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13444160" author="yuzhihong@gmail.com" created="Wed, 29 Aug 2012 16:21:33 +0000"  >&lt;p&gt;Rebase for trunk.&lt;/p&gt;</comment>
                            <comment id="13444166" author="yuzhihong@gmail.com" created="Wed, 29 Aug 2012 16:24:10 +0000"  >&lt;p&gt;Integrated to trunk.&lt;/p&gt;</comment>
                            <comment id="13444218" author="hudson" created="Wed, 29 Aug 2012 17:10:42 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3291 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3291/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3291/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6659&quot; title=&quot;Port HBASE-6508 Filter out edits at log split time&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6659&quot;&gt;&lt;del&gt;HBASE-6659&lt;/del&gt;&lt;/a&gt; Port &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6508&quot; title=&quot;[0.89-fb] Filter out edits at log split time&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6508&quot;&gt;&lt;del&gt;HBASE-6508&lt;/del&gt;&lt;/a&gt; Filter out edits at log split time (Revision 1378631)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
Tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/RegionLoad.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/MasterServices.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/ServerManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/protobuf/ResponseConverter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/protobuf/generated/HBaseProtos.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/protobuf/generated/RegionServerStatusProtos.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/SplitLogWorker.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogSplitter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/protobuf/RegionServerStatus.proto&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/protobuf/hbase.proto&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestCatalogJanitor.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestHLogFiltering.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestHLogSplit.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestWALReplay.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13444440" author="stack" created="Wed, 29 Aug 2012 21:41:16 +0000"  >&lt;p&gt;Sorry.  Meant to review this patch before it went in.&lt;/p&gt;

&lt;p&gt;I have a bit of problem w/ this patch in that it loads up new payloads on top of a channel we&apos;ve been trying to shut down, the regionserver to master heartbeat.&lt;/p&gt;

&lt;p&gt;Here are some other comments:&lt;/p&gt;

&lt;p&gt;Are all the splitLogFile changes to add an extra null arg needed?  Could do an overload for case where arg is non-null? (with default null)&lt;/p&gt;

&lt;p&gt;Do we not have the methods getRegionsByServer in HBaseTestingUtility already &amp;#8211; or at least in the hbase cluster object?&lt;/p&gt;

&lt;p&gt;Could TestHLogFiltering tests not be added to the TestHLog?  Seems related?&lt;/p&gt;

&lt;p&gt;We have to add this new regionserver call getLastFlushedSequenceId even though the regionservers are heartbeating every second (by default)?&lt;/p&gt;

&lt;p&gt;This seems like an ugly entanglement:&lt;/p&gt;

&lt;p&gt;+  // For checking the latest flushed sequence id&lt;br/&gt;
+  protected final RegionServerStatusProtocol master;&lt;/p&gt;

&lt;p&gt;... a master reference down deep inside in HLogSplitter.  Its needed?&lt;/p&gt;

&lt;p&gt;We make a call to the master per region from down inside HLogSplitter to ask for last known sequence id?&lt;/p&gt;

&lt;p&gt;What is difference between:&lt;/p&gt;

&lt;p&gt;  public FlushRegionResponse flushRegion(final RpcController controller,&lt;br/&gt;
      final FlushRegionRequest request) throws ServiceException {&lt;/p&gt;

&lt;p&gt;and&lt;/p&gt;

&lt;p&gt;+  public void flushRegion(byte[] regionName)&lt;br/&gt;
+      throws NotServingRegionException, IOException {&lt;/p&gt;

&lt;p&gt;Can you not do what you want w/ the first method?  Its pb&apos;d?  Not sure how you get at the second (You can pass null to the first IIRC... at least the second should call the first.&lt;/p&gt;

&lt;p&gt;Do we have to add&lt;/p&gt;

&lt;p&gt;+  void updateLastFlushedSequenceIds(ServerName sn, ServerLoad hsl);&lt;/p&gt;

&lt;p&gt;to MasterServices?  I&apos;d like it if we could keep MasterServices curt.  Everytime we add a new method, it makes for a bunch of changes in tests such as the bleow and it also makes mocking that little bit tougher.&lt;/p&gt;

&lt;p&gt;     @Override&lt;br/&gt;
+    public void updateLastFlushedSequenceIds(ServerName sn, ServerLoad hsl) &lt;/p&gt;
{
+      // no-op
+    }

&lt;p&gt;Do we have to add a new map like this:&lt;/p&gt;

&lt;p&gt;+  private final SortedMap&amp;lt;byte[], Long&amp;gt; flushedSequenceIdByRegion =&lt;br/&gt;
+    new ConcurrentSkipListMap&amp;lt;byte[], Long&amp;gt;(Bytes.BYTES_COMPARATOR);&lt;/p&gt;

&lt;p&gt;Isn&apos;t there elsewhere where we keep list of regions out on cluster.  Could we add the sequenceid as an attribute on that  Map rather than introduce a new one?&lt;/p&gt;

&lt;p&gt;Putting sequenceid into serverload doesn&apos;t seem right.  ServerLoad already is a dumping ground.  Now we have pbs, could add as attribute easy enough.&lt;/p&gt;




</comment>
                            <comment id="13444458" author="yuzhihong@gmail.com" created="Wed, 29 Aug 2012 21:56:50 +0000"  >&lt;p&gt;In hbase.proto, sequence Id is added to:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
message RegionLoad {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;ServerLoad.RegionLoad is just another form of representation for the above.&lt;br/&gt;
In regionServerReport(), we have:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      HBaseProtos.ServerLoad sl = request.getLoad();
      &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.serverManager.regionServerReport(ProtobufUtil.toServerName(request.getServer()), &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ServerLoad(sl));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If the regionserver to master heartbeat is not the place to channel sequence Id information, please remind me of the correct channel to use.&lt;/p&gt;

&lt;p&gt;I can revert the patch to facilitate further discussion.&lt;/p&gt;</comment>
                            <comment id="13444460" author="yuzhihong@gmail.com" created="Wed, 29 Aug 2012 22:01:01 +0000"  >&lt;p&gt;w.r.t. updateLastFlushedSequenceIds(), since regionServerReport() is in ServerManager, we need a way to let master know region &amp;lt;-&amp;gt; sequence Id mapping.&lt;/p&gt;

&lt;p&gt;I have reverted the patch.&lt;/p&gt;</comment>
                            <comment id="13444471" author="stack" created="Wed, 29 Aug 2012 22:11:31 +0000"  >&lt;p&gt;Again, sorry w/ my late review.  Thanks for reverting the patch for now.&lt;/p&gt;

&lt;p&gt;Yeah, seems odd adding currentsequenceid to RegionLoad?  Its not part of region load, I don&apos;t think.  Its more a region attribute (this would not be the first parameter that cannot be properly called a &apos;load&apos;).&lt;/p&gt;

&lt;p&gt;High-level, we&apos;d been trying to shrink the heartbeat with the hope that one day it&apos;d be so small we could drown it in a bathtub.  Maybe thats not possible.  Outstanding is the fat serverload object updating the master on each heartbeat.  I don&apos;t have specific issues to hand but we&apos;ve talked about making it so this serverload could be obtained say via metrics/jmx since we are publishing the bulk of it there as well as over here up on the heartbeat; seems silly duplicating info.  ServerLoad updating the master can be a bit lossy... same with this new sequenceid attribute.  We could put it on the heartbeat &amp;#8211; either as is where serverload is a dumping ground of all we want to pass from regionserver to master or we could put it in a data structure apart from serverload &amp;#8211; and then maybe later do refactor of heartbeat to get its info elsewhere (from zk if unchanging post regionserver registration) and out of metrics w/ master pulling the info when its interested in particular?&lt;/p&gt;</comment>
                            <comment id="13444477" author="gchanan" created="Wed, 29 Aug 2012 22:20:13 +0000"  >&lt;p&gt;On Stack&apos;s comments:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;I agree it&apos;s silly to duplicate stats.  I even noticed once the stats weren&apos;t quite duplicated (I think the metrics calculates requestsPerSecond differently than ServerLoad does), which is pointless and confusing&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;On this specific issue: should we put this info into ZK? it&apos;s &quot;transient state&quot; in the sense that we can recover fine if it gets blown away, and it has the added advantage that if both the Master and RS go down (but ZK stays up), we can still run this optimization.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13444484" author="stack" created="Wed, 29 Aug 2012 22:28:30 +0000"  >&lt;p&gt;I thought about putting it into zk.  The good thing is that it&apos;d be persisted so would make it across a master failover.  In general the less footprint in zk, the better.  If we went this route, it&apos;d be a znode per region on the cluster.  We&apos;d write this region znode every time we flush.  During high write times could flush a file per second or so.... If 100k regions on cluster... could be a bunch of zk writes.&lt;/p&gt;

&lt;p&gt;I suppose an rpc to the master to ask it about a long that its keeping in an in-memory map is way cheaper than going to fs, finding the region, and getting the sequenceid out of the hfile metadata.  &lt;/p&gt;</comment>
                            <comment id="13444508" author="yuzhihong@gmail.com" created="Wed, 29 Aug 2012 22:53:18 +0000"  >&lt;blockquote&gt;&lt;p&gt;or we could put it in a data structure apart from serverload&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Do we have a route through which such data structure can be channeled to master nowadays ?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;out of metrics w/ master pulling the info when its interested in particular&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The use case for this feature is that log splitters may request sequence Ids in a short period of time. I am not sure if I understand the above comment enough in this context.&lt;/p&gt;

&lt;p&gt;I agree with Stack&apos;s analysis on using zookeeper. In a large cluster under heavy write load, sufficient experiment / profiling is needed to justify the approach.&lt;/p&gt;

&lt;p&gt;Again, the reason I came with the port was that I found this feature very helpful, even if &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5699&quot; title=&quot;Run with &amp;gt; 1 WAL in HRegionServer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5699&quot;&gt;&lt;del&gt;HBASE-5699&lt;/del&gt;&lt;/a&gt; is implemented.&lt;br/&gt;
I think the patch didn&apos;t introduce fresh design deficiency.&lt;/p&gt;

&lt;p&gt;I can address Stack&apos;s other comments in the next patch.&lt;/p&gt;

&lt;p&gt;When there is good alternative to retiring heartbeat, all the payload can be moved in one shot.&lt;/p&gt;</comment>
                            <comment id="13444521" author="gchanan" created="Wed, 29 Aug 2012 23:16:05 +0000"  >&lt;p&gt;Just so I&apos;m sure I understand &amp;#8211; lower footprint in ZK is better because ZK persists the data (absent &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-866&quot; title=&quot;Adding no disk persistence option in zookeeper.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-866&quot;&gt;ZOOKEEPER-866&lt;/a&gt;) or because of the overhead for consensus (I&apos;m assuming the other costs, e.g. rpc time are equivalent in ZK vs HMaster, but maybe that&apos;s not correct)?  Or both?&lt;/p&gt;</comment>
                            <comment id="13444810" author="hudson" created="Thu, 30 Aug 2012 09:06:16 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #154 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/154/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/154/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6659&quot; title=&quot;Port HBASE-6508 Filter out edits at log split time&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6659&quot;&gt;&lt;del&gt;HBASE-6659&lt;/del&gt;&lt;/a&gt; Port &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6508&quot; title=&quot;[0.89-fb] Filter out edits at log split time&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6508&quot;&gt;&lt;del&gt;HBASE-6508&lt;/del&gt;&lt;/a&gt; Filter out edits at log split time, revert (Revision 1378752)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6659&quot; title=&quot;Port HBASE-6508 Filter out edits at log split time&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6659&quot;&gt;&lt;del&gt;HBASE-6659&lt;/del&gt;&lt;/a&gt; Port &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6508&quot; title=&quot;[0.89-fb] Filter out edits at log split time&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6508&quot;&gt;&lt;del&gt;HBASE-6508&lt;/del&gt;&lt;/a&gt; Filter out edits at log split time (Revision 1378631)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
Tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/RegionLoad.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/MasterServices.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/ServerManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/protobuf/ResponseConverter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/protobuf/generated/HBaseProtos.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/protobuf/generated/RegionServerStatusProtos.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/SplitLogWorker.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogSplitter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/protobuf/RegionServerStatus.proto&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/protobuf/hbase.proto&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestCatalogJanitor.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestHLogFiltering.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestHLogSplit.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestWALReplay.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/RegionLoad.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/MasterServices.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/ServerManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/protobuf/ResponseConverter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/protobuf/generated/HBaseProtos.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/protobuf/generated/RegionServerStatusProtos.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/SplitLogWorker.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogSplitter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/protobuf/RegionServerStatus.proto&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/protobuf/hbase.proto&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestCatalogJanitor.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestHLogFiltering.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestHLogSplit.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestWALReplay.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13445599" author="yuzhihong@gmail.com" created="Fri, 31 Aug 2012 03:31:10 +0000"  >&lt;p&gt;@Stack:&lt;br/&gt;
What should be the next step for this feature ?&lt;/p&gt;</comment>
                            <comment id="13445633" author="stack" created="Fri, 31 Aug 2012 04:18:30 +0000"  >&lt;p&gt;There are a few approaches I think.  We could hold up this patch till we figure alternate channel for metrics and attributes &amp;#8211; e.g. have the master listen to the metrics emitted by regionservers rather than have the regionserver blast load out on a metrics channel and duplicate their compostion putting same info out on the regionserver heartbeat &amp;#8211; or we commit the patch as is (after the non-architectural issues raised in the issue have been addressed) and address the messaging problems later.&lt;/p&gt;

&lt;p&gt;It looks like it could help a bunch with MTTR even though its totally ugly the way we are calling master up out of an HLog (how do you put that facility behind an Interface?)&lt;/p&gt;</comment>
                            <comment id="13445647" author="yuzhihong@gmail.com" created="Fri, 31 Aug 2012 04:31:38 +0000"  >&lt;blockquote&gt;&lt;p&gt;or we commit the patch as is (after the non-architectural issues raised in the issue have been addressed) and address the messaging problems later.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I would choose this route.&lt;/p&gt;</comment>
                            <comment id="13445962" author="yuzhihong@gmail.com" created="Fri, 31 Aug 2012 14:05:58 +0000"  >&lt;p&gt;In HBaseTestingUtility, I don&apos;t see getRegionsByServer().&lt;br/&gt;
TestHLog is a large test. There would be more tests added to TestHLog in the future. According to N&apos;s motto, we should keep runtime for large tests in check. So I keep TestHLogFiltering for now.&lt;br/&gt;
New method getLastFlushedSequenceId() is called by HLogSplitter. The timing of this call is not in sync with region server heartbeat.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;We make a call to the master per region from down inside HLogSplitter to ask for last known sequence id?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;For &apos;protected final RegionServerStatusProtocol master&apos;, I agree there is something to be desired. Previously there was no need for HLogSplitter to know the actual status for any region in the WALs it splits. This feature adds this requirement. We can do buffering of calls to master. But I found that code would get more convoluted that way.&lt;/p&gt;

&lt;p&gt;w.r.t. introduction of void flushRegion(byte[] regionName), you&apos;re right that flushRegion(final RpcController controller, final FlushRegionRequest request) requires the composition of FlushRegionRequest. So that method is called by client.&lt;/p&gt;

&lt;p&gt;Will answer the remaining questions.&lt;/p&gt;</comment>
                            <comment id="13446016" author="yuzhihong@gmail.com" created="Fri, 31 Aug 2012 14:50:22 +0000"  >&lt;p&gt;I mentioned the need for adding updateLastFlushedSequenceIds() @ 29/Aug/12 23:01&lt;br/&gt;
Since 0.96 hasn&apos;t been released, I think adding methods to MasterServices should be acceptable.&lt;/p&gt;

&lt;p&gt;w.r.t. flushedSequenceIdByRegion map, there is no other map in HMaster which is keyed by byte[] (region name).&lt;/p&gt;</comment>
                            <comment id="13446030" author="yuzhihong@gmail.com" created="Fri, 31 Aug 2012 15:01:29 +0000"  >&lt;p&gt;Patch v6 restores splitLogFile() method which doesn&apos;t take RegionServerStatusProtocol parameter.&lt;/p&gt;</comment>
                            <comment id="13446111" author="stack" created="Fri, 31 Aug 2012 16:38:41 +0000"  >&lt;p&gt;Your responses are many and do not cite to what you are responding which makes it tough aligning what your response refers to.   For example, this comment:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;In HBaseTestingUtility, I don&apos;t see getRegionsByServer().&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;To what of my remarks is it in reply to?&lt;/p&gt;

&lt;p&gt;On the keeping TestHLogFiltering, thats fine. You give good rationale.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The timing of this call is not in sync with region server heartbeat.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Nevermind my comment; I had the workings mixed up.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;But I found that code would get more convoluted that way.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes.  Its super ugly rpc&apos;ing the master from down deep in hlogsplitter.  Could we put the rpc behind an Interface at least?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;w.r.t. introduction of void flushRegion(byte[] regionName), you&apos;re right that flushRegion(final RpcController controller, final FlushRegionRequest request) requires the composition of FlushRegionRequest. So that method is called by client.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t follow what you are saying above.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Since 0.96 hasn&apos;t been released, I think adding methods to MasterServices should be acceptable.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;My rationale for not adding methods has nothing to do w/ whether a release has been made or not; its about keeping these Interfaces as basic as possible so mocking does not become burdensome (when mocking is burdensome, fellas will skip on writing tests)&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;w.r.t. flushedSequenceIdByRegion map, there is no other map in HMaster which is keyed by byte[] (region name).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;There is at least AM#regions&lt;/p&gt;

&lt;p&gt;Its use is different but I&apos;d think some effort would be expended trying to make it so we don&apos;t proliferate state keepers per facility added to hbase.  Maybe its not possible.&lt;/p&gt;</comment>
                            <comment id="13446142" author="yuzhihong@gmail.com" created="Fri, 31 Aug 2012 17:20:59 +0000"  >&lt;blockquote&gt;&lt;p&gt;Do we not have the methods getRegionsByServer in HBaseTestingUtility already&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&apos;In HBaseTestingUtility, I don&apos;t see getRegionsByServer()&apos; was for above comment.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;You can pass null to the first IIRC... at least the second should call the first.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;you&apos;re right that flushRegion(final RpcController controller, final FlushRegionRequest request) requires the composition of FlushRegionRequest.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I will remove flushRegion(byte[] regionName) method and replace the call with one to the existing method.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;There is at least AM#regions&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I searched AssignmentManager and don&apos;t see regions field.&lt;/p&gt;

&lt;p&gt;w.r.t. adding updateLastFlushedSequenceIds(), the current formation of the patch is due to the fact that regionServerReport() is in ServerManager. ServerManager is marked @InterfaceAudience.Private, so ServerManager needs to deliver status update to HMaster.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Could we put the rpc behind an Interface at least?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;To my understanding, RegionServerStatusProtocol is an interface:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; RegionServerStatusProtocol &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Will upload new patch.&lt;/p&gt;</comment>
                            <comment id="13446171" author="yuzhihong@gmail.com" created="Fri, 31 Aug 2012 17:46:49 +0000"  >&lt;p&gt;Patch v7 removes flushRegion(byte[] regionName) and uses flushRegion(RpcController, FlushRegionRequest)&lt;/p&gt;

&lt;p&gt;TestHLogFiltering passes.&lt;/p&gt;</comment>
                            <comment id="13446295" author="yuzhihong@gmail.com" created="Fri, 31 Aug 2012 19:47:49 +0000"  >&lt;p&gt;Previous Hadoop QA run was aborted.&lt;/p&gt;</comment>
                            <comment id="13446364" author="hadoopqa" created="Fri, 31 Aug 2012 20:55:18 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12543331/6508-v7.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12543331/6508-v7.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated 108 warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The applied patch generated 5 javac compiler warnings (more than the trunk&apos;s current 4 warnings).&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 11 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2756//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2756//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2756//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2756//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2756//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2756//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2756//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2756//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2756//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2756//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2756//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2756//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2756//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2756//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13446384" author="yuzhihong@gmail.com" created="Fri, 31 Aug 2012 21:15:18 +0000"  >&lt;p&gt;TestReplication was missing in PreCommit build #2756.&lt;/p&gt;

&lt;p&gt;Other tests passed.&lt;/p&gt;

&lt;p&gt;I also updated &lt;a href=&quot;https://reviews.apache.org/r/6768&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/6768&lt;/a&gt; with patch v7.&lt;/p&gt;

&lt;p&gt;Please provide your comments.&lt;/p&gt;</comment>
                            <comment id="13446609" author="stack" created="Sat, 1 Sep 2012 05:34:03 +0000"  >&lt;blockquote&gt;&lt;p&gt;I searched AssignmentManager and don&apos;t see regions field.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;My bad.  It was in 0.94. Its not in trunk (Jimmy removed it recently)&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;w.r.t. adding updateLastFlushedSequenceIds(), the current formation of the patch is due to the fact that regionServerReport() is in ServerManager. ServerManager is marked @InterfaceAudience.Private, so ServerManager needs to deliver status update to HMaster.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I do not follow.  What is the above justifying?&lt;/p&gt;

&lt;p&gt;Should the map of sequenceids to regions be in ServerManager and not in Master so you don&apos;t have to leak it out to the HMaster wrapper class?  (Would this mean you would not have to add updateLastFlushedSequenceIds to MasterServices?  ServerManager deals w/ Load as it is... its tough because this stuff is so messy... load is carrying non-load attributes... keeping the mess confined to SM would be a bit of improvement over having to pass info from HMaster to SM and then back to HMaster)&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;Could we put the rpc behind an Interface at least?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;What I meant is would it make sense making an Interface named LastSequenceId whose content was a method named:&lt;/p&gt;

&lt;p&gt;long getLastSequenceId(regionname);&lt;/p&gt;

&lt;p&gt;Its implementation would have RS invoke method on Master but at least we&apos;d be making it so HLogSplitter didn&apos;t have to be polluted w/ some protocol implementation.  Interface would also make it easier testing HLogSplitter.&lt;/p&gt;

&lt;p&gt;I took a look at v7.  Most of my comments above are informed by a review of it up in rb&lt;/p&gt;</comment>
                            <comment id="13446640" author="yuzhihong@gmail.com" created="Sat, 1 Sep 2012 10:11:47 +0000"  >&lt;blockquote&gt;&lt;p&gt;load is carrying non-load attributes&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I will add javadoc as you suggested on review board.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;a bit of improvement over having to pass info from HMaster to SM and then back to HMaster&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Sequence Id information is passed from region servers to ServerManager, from ServerManager to Master, if that is what you meant.&lt;br/&gt;
I checked a few methods in ServerManager, such as:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Map&amp;lt;ServerName, ServerLoad&amp;gt; getOnlineServers() {
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Set&amp;lt;ServerName&amp;gt; getDeadServers() {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;They are all consumed in org.apache.hadoop.hbase.master namespace. Since ServerManager doesn&apos;t implement interface, currently I don&apos;t see how LastFlushedSequenceIds can be encapsulated within ServerManager.&lt;/p&gt;

&lt;p&gt;w.r.t. creating LastSequenceId interface, currently neither SplitLogWorker nor HLogSplitter has reference to RegionServerServices.&lt;br/&gt;
If I understand your suggestion correctly, &apos;long getLastSequenceId(regionname)&apos; can be added to RegionServerServices. We pass reference of RegionServerServices from region server to SplitLogWorker, then to HLogSplitter.&lt;br/&gt;
HLogSplitter would be able to consume this new method.&lt;/p&gt;

&lt;p&gt;Once I get your confirmation, I would come up with patch v8.&lt;/p&gt;</comment>
                            <comment id="13447995" author="yuzhihong@gmail.com" created="Tue, 4 Sep 2012 19:44:23 +0000"  >&lt;p&gt;@Stack:&lt;br/&gt;
What do you think of my proposal above ?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="13449251" author="yuzhihong@gmail.com" created="Wed, 5 Sep 2012 23:16:14 +0000"  >&lt;p&gt;For last flushed sequence Id, another option is to embed it in HRegionInfo.&lt;br/&gt;
This way, there is no need to modify RegionLoad.&lt;/p&gt;</comment>
                            <comment id="13449453" author="stack" created="Thu, 6 Sep 2012 06:27:47 +0000"  >&lt;blockquote&gt;&lt;p&gt;They are all consumed in org.apache.hadoop.hbase.master namespace. Since ServerManager doesn&apos;t implement interface, currently I don&apos;t see how LastFlushedSequenceIds can be encapsulated within ServerManager.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sorry. I don&apos;t follow what you are saying above.&lt;/p&gt;


&lt;p&gt;updateLastFlushedSequenceIds is implemented in HMaster and used by ServerManager.  So ServerManager can use updateLastFlushedSequenceIds you must add it to MasterServices.  Can you better encapsulate this new sequenceid to region accounting by moving it all into ServerManager so you do not have to do this back and forth between SM and HM and you can avoid adding more facility to the MasterServices Interface?  Looking at updateLastFlushedSequenceIds implementation I do not see an obvious reason why we could not but I may be missing something.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;We pass reference of RegionServerServices from region server to SplitLogWorker, then to HLogSplitter. HLogSplitter would be able to consume this new method.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The above is basically right (We&apos;d pass a reference to a LastSequenceId Interface &amp;#8211; though the actual instance may be a RegionServerServices that implements LastSequenceId).&lt;/p&gt;

&lt;p&gt;Do you think this makes sense?  Would it be a PITA to do?  We&apos;d pass this Interface instead of passing in the crazy RegionServerStatusProtocol masterRef (A LastSequenceId would be easy to mock, a RegionServerStatusProtocol would be a pain)&lt;/p&gt;

</comment>
                            <comment id="13449785" author="yuzhihong@gmail.com" created="Thu, 6 Sep 2012 16:35:20 +0000"  >&lt;p&gt;Patch v8 is also on review board.&lt;/p&gt;

&lt;p&gt;Hopefully I have addressed Stack&apos;s comments.&lt;/p&gt;</comment>
                            <comment id="13449805" author="hadoopqa" created="Thu, 6 Sep 2012 16:53:44 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12544072/6508-v8.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12544072/6508-v8.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated 107 warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The applied patch generated 5 javac compiler warnings (more than the trunk&apos;s current 4 warnings).&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 7 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.regionserver.wal.TestHLogMethods&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2803//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2803//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2803//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2803//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2803//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2803//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2803//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2803//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2803//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2803//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2803//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2803//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2803//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2803//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13449808" author="stack" created="Thu, 6 Sep 2012 16:54:51 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;To me at least, we encapsulate the sequenceid counting inside ServerManager rather than have it spread between SM and HM (also, don&apos;t need to add an esoteric method to the generic MasterServices Interface).  HLogSplitter is passed a specific Interface for getting last sequenceid rather than a protocol implementation.  I think this better.  Thanks for entertaining my reviews.&lt;/p&gt;

&lt;p&gt;On commit remove &apos;+ * Copyright The Apache Software Foundation&apos; and change this &apos;+   * @param master&apos; (param name is different).&lt;/p&gt;

&lt;p&gt;This change seems gratuitous but it is from original patch so its ok:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-        regionInfo.getTableName(), completeSequenceId,
+        regionInfo.getTableName(), completeSeqId,
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Are the imports in MasterServices needed? (they don&apos;t seem to be referred to by this patch).  Remove on commit.&lt;/p&gt;

</comment>
                            <comment id="13449809" author="stack" created="Thu, 6 Sep 2012 16:56:19 +0000"  >&lt;p&gt;Maybe check out the TestHLogMethods failure... unlikely it this change but worth a look I&apos;d say.&lt;/p&gt;</comment>
                            <comment id="13449815" author="yuzhihong@gmail.com" created="Thu, 6 Sep 2012 17:05:30 +0000"  >&lt;p&gt;Patch v9 should be close to the final version - fixed compilation error.&lt;/p&gt;</comment>
                            <comment id="13449817" author="stack" created="Thu, 6 Sep 2012 17:10:53 +0000"  >&lt;p&gt;I took a quick look.  +1.&lt;/p&gt;</comment>
                            <comment id="13449819" author="ram_krish" created="Thu, 6 Sep 2012 17:13:22 +0000"  >&lt;p&gt;@Ted&lt;br/&gt;
Nice useful backport.  Thanks for taking it up.&lt;/p&gt;</comment>
                            <comment id="13449824" author="yuzhihong@gmail.com" created="Thu, 6 Sep 2012 17:17:09 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Running org.apache.hadoop.hbase.mapreduce.TestHLogRecordReader
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 5.17 sec
Running org.apache.hadoop.hbase.regionserver.wal.TestHLog
Tests run: 11, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 77.567 sec
Running org.apache.hadoop.hbase.regionserver.wal.TestHLogFiltering
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 40.173 sec
Running org.apache.hadoop.hbase.regionserver.wal.TestHLogMethods
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.719 sec
Running org.apache.hadoop.hbase.regionserver.wal.TestHLogSplit
Tests run: 30, Failures: 0, Errors: 0, Skipped: 1, Time elapsed: 234.204 sec

Results :

Tests run: 47, Failures: 0, Errors: 0, Skipped: 1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Going to commit.&lt;/p&gt;</comment>
                            <comment id="13449828" author="yuzhihong@gmail.com" created="Thu, 6 Sep 2012 17:23:21 +0000"  >&lt;p&gt;Integrated to trunk.&lt;/p&gt;

&lt;p&gt;Thanks for the review, Stack and Ram.&lt;/p&gt;</comment>
                            <comment id="13449887" author="hudson" created="Thu, 6 Sep 2012 18:15:15 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3310 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3310/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3310/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6659&quot; title=&quot;Port HBASE-6508 Filter out edits at log split time&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6659&quot;&gt;&lt;del&gt;HBASE-6659&lt;/del&gt;&lt;/a&gt; Port &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6508&quot; title=&quot;[0.89-fb] Filter out edits at log split time&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6508&quot;&gt;&lt;del&gt;HBASE-6508&lt;/del&gt;&lt;/a&gt; Filter out edits at log split time (Revision 1381684)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/RegionLoad.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/ServerManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/protobuf/ResponseConverter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/protobuf/generated/HBaseProtos.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/protobuf/generated/RegionServerStatusProtos.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/LastSequenceId.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/SplitLogWorker.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogSplitter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/protobuf/RegionServerStatus.proto&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/protobuf/hbase.proto&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestHLogFiltering.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestHLogSplit.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13450188" author="hudson" created="Thu, 6 Sep 2012 23:57:46 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #163 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/163/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/163/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6659&quot; title=&quot;Port HBASE-6508 Filter out edits at log split time&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6659&quot;&gt;&lt;del&gt;HBASE-6659&lt;/del&gt;&lt;/a&gt; Port &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6508&quot; title=&quot;[0.89-fb] Filter out edits at log split time&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6508&quot;&gt;&lt;del&gt;HBASE-6508&lt;/del&gt;&lt;/a&gt; Filter out edits at log split time (Revision 1381684)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/RegionLoad.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/ServerManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/protobuf/RequestConverter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/protobuf/ResponseConverter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/protobuf/generated/HBaseProtos.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/protobuf/generated/RegionServerStatusProtos.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/LastSequenceId.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/SplitLogWorker.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogSplitter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/protobuf/RegionServerStatus.proto&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/protobuf/hbase.proto&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestHLogFiltering.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestHLogSplit.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13775109" author="stack" created="Mon, 23 Sep 2013 18:30:45 +0000"  >&lt;p&gt;Marking closed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12542382" name="6508-v2.txt" size="47642" author="zhihyu@ebaysf.com" created="Sat, 25 Aug 2012 00:50:50 +0000"/>
                            <attachment id="12542392" name="6508-v3.txt" size="47927" author="zhihyu@ebaysf.com" created="Sat, 25 Aug 2012 02:51:53 +0000"/>
                            <attachment id="12542656" name="6508-v4.txt" size="97854" author="yuzhihong@gmail.com" created="Mon, 27 Aug 2012 19:52:33 +0000"/>
                            <attachment id="12542936" name="6508-v5.txt" size="96025" author="yuzhihong@gmail.com" created="Wed, 29 Aug 2012 16:21:33 +0000"/>
                            <attachment id="12543331" name="6508-v7.txt" size="94378" author="yuzhihong@gmail.com" created="Fri, 31 Aug 2012 19:47:49 +0000"/>
                            <attachment id="12544072" name="6508-v8.txt" size="98025" author="yuzhihong@gmail.com" created="Thu, 6 Sep 2012 16:35:20 +0000"/>
                            <attachment id="12544075" name="6508-v9.txt" size="96490" author="yuzhihong@gmail.com" created="Thu, 6 Sep 2012 17:05:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 24 Aug 2012 23:54:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>242502</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02vbb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14674</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.96notable</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>