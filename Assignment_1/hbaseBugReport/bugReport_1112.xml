<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:50:51 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1112/HBASE-1112.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1112] we will lose data if the table name happens to be the logs&apos; dir name</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1112</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;If the tablename happens to equal with the logs&apos; dir name of a certain regionserver, the table will store table&apos;s data into the same dir in HDFS shared with the regionserver&apos;s log dir. If the specified region server fails, the dir may be removed after the logs are replayed. And here, we lose the data.&lt;/p&gt;

&lt;p&gt;I suggest that a special char like &apos;_&apos; could be added before the logdir&apos;s name, just as what root region and meta region have done. So we can prevent the user table&apos;s data from being stored in a log dir. for example, &apos;log_10.132.15.1_1231465024534_60020&apos; will be changed to &apos;_log_10.132.15.1_1231465024534_60020&apos;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12411990">HBASE-1112</key>
            <summary>we will lose data if the table name happens to be the logs&apos; dir name</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hustlmsp">Sijie Guo</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Jan 2009 02:55:05 +0000</created>
                <updated>Sun, 13 Sep 2009 22:24:17 +0000</updated>
                            <resolved>Wed, 29 Apr 2009 23:44:59 +0000</resolved>
                                                    <fixVersion>0.20.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12662253" author="stack" created="Fri, 9 Jan 2009 06:06:48 +0000"  >&lt;p&gt;Agreed.&lt;/p&gt;

&lt;p&gt;Or keep logs in a subdir that has a name made with characters disallowed for table names (See HTableDescriptor#isLegalTableName).&lt;/p&gt;</comment>
                            <comment id="12662865" author="hustlmsp" created="Mon, 12 Jan 2009 03:25:43 +0000"  >&lt;p&gt;attach a simple patch.&lt;br/&gt;
now store the HRS logs in the dir &apos;@LOG@&apos;. &lt;/p&gt;</comment>
                            <comment id="12665986" author="stack" created="Wed, 21 Jan 2009 22:18:17 +0000"  >&lt;p&gt;Lets fix in 0.20.&lt;/p&gt;</comment>
                            <comment id="12667432" author="jimk" created="Mon, 26 Jan 2009 21:18:44 +0000"  >&lt;p&gt;How likely is this really?&lt;/p&gt;

&lt;p&gt;The HLog directory name is:&lt;/p&gt;

&lt;p&gt;&quot;log_&quot; + ipaddress-of-server + &quot;&lt;em&gt;&quot; + server-start-code + &quot;&lt;/em&gt;&quot; + server-port-number&lt;/p&gt;

&lt;p&gt;Whereas region region directories are just the region name. For example, region directory names:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
drwxr-xr-x   - jim supergroup          0 2009-01-26 19:26 /hbase/-ROOT-
drwxr-xr-x   - jim supergroup          0 2009-01-26 19:26 /hbase/.META.
drwxr-xr-x   - jim supergroup          0 2009-01-26 19:53 /hbase/TestTable
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Examples of log directory names:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
drwxr-xr-x   - jim supergroup          0 2009-01-26 21:15 /hbase/log_208.76.44.139_1233004558648_8020
drwxr-xr-x   - jim supergroup          0 2009-01-26 21:15 /hbase/log_208.76.44.140_1233004558283_8020
drwxr-xr-x   - jim supergroup          0 2009-01-26 21:15 /hbase/log_208.76.44.141_1233004558140_8020
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Seems to me the chance for collision is pretty small.&lt;/p&gt;</comment>
                            <comment id="12667436" author="stack" created="Mon, 26 Jan 2009 21:22:51 +0000"  >&lt;p&gt;I like this change also because it cleans up our root dir moving the logs into a subdir &amp;#8211; a cluster of 100 could have 64 max each &amp;#8211; thats 6400 logs at toplevel  (We&apos;ll need to have a migration that screams if logs exist at rootdir)&lt;/p&gt;</comment>
                            <comment id="12667441" author="jimk" created="Mon, 26 Jan 2009 21:30:24 +0000"  >&lt;p&gt;@Stack&lt;/p&gt;

&lt;p&gt;The logs are in subdirectories. Note in the above that /hbase/log_208.76.44.139_1233004558648_8020, etc are all&lt;br/&gt;
directories (one per region server) and the individual log files are contained in those directories.&lt;/p&gt;</comment>
                            <comment id="12667444" author="stack" created="Mon, 26 Jan 2009 21:40:04 +0000"  >&lt;p&gt;oh... .didn&apos;t realize.  Thats good.  One dir per server.   No harm moving all these into a subdir though I&apos;d say, named @LOG@ or @LOGS@ as Samuel suggests.&lt;/p&gt;

&lt;p&gt;Also, yes, highly unlikely that there&apos;d be a table with a clashing name but I suppose no harm doing the little work to ensure it doesn&apos;t happen.&lt;/p&gt;</comment>
                            <comment id="12704412" author="stack" created="Wed, 29 Apr 2009 23:44:59 +0000"  >&lt;p&gt;Committed.  Thanks for the patch Samuel.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12397667" name="HBASE-1112.patch" size="1390" author="hustlmsp" created="Mon, 12 Jan 2009 03:25:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 9 Jan 2009 06:06:48 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25577</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 34 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hbef:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99109</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>