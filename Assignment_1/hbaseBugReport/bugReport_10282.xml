<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:12:17 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-10282/HBASE-10282.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-10282] We can&apos;t assure that the first ZK server is active server in MiniZooKeeperCluster</title>
                <link>https://issues.apache.org/jira/browse/HBASE-10282</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Thanks to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3052&quot; title=&quot;Add ability to have multiple ZK servers in a quorum in MiniZooKeeperCluster for test writing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3052&quot;&gt;&lt;del&gt;HBASE-3052&lt;/del&gt;&lt;/a&gt;, we&apos;re able to run multiple zk servers in minicluster. However, It&apos;s confusing to keep the variable activeZKServerIndex as zero and assure the first zk server is always the active one. I think returning the first sever&apos;s client port is for testing and it seems that we can directly return the first item of the list. Anyway, the concept of &quot;active&quot; here is not the same as zk&apos;s. &lt;/p&gt;

&lt;p&gt;It&apos;s confusing when I read the code so I think we should fix it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12687381">HBASE-10282</key>
            <summary>We can&apos;t assure that the first ZK server is active server in MiniZooKeeperCluster</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="tobe">chendihao</assignee>
                                    <reporter username="tobe">chendihao</reporter>
                        <labels>
                    </labels>
                <created>Mon, 6 Jan 2014 02:15:28 +0000</created>
                <updated>Wed, 15 Jan 2014 11:42:59 +0000</updated>
                                            <version>0.94.3</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13862720" author="tobe" created="Mon, 6 Jan 2014 02:18:34 +0000"  >&lt;p&gt;Looking for your replay. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=liyin&quot; class=&quot;user-hover&quot; rel=&quot;liyin&quot;&gt;Liyin Tang&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=streamy&quot; class=&quot;user-hover&quot; rel=&quot;streamy&quot;&gt;Jonathan Gray&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13867427" author="hudson" created="Fri, 10 Jan 2014 02:06:18 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.94-security #385 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/385/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/385/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10282&quot; title=&quot;We can&amp;#39;t assure that the first ZK server is active server in MiniZooKeeperCluster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10282&quot;&gt;HBASE-10282&lt;/a&gt; TestMultiParallel.testFlushCommitsNoAbort fails frequently in 0.94 (larsh: rev 1557003)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/client/TestMultiParallel.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13867438" author="hudson" created="Fri, 10 Jan 2014 02:31:13 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.94-JDK7 #24 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-JDK7/24/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-JDK7/24/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10282&quot; title=&quot;We can&amp;#39;t assure that the first ZK server is active server in MiniZooKeeperCluster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10282&quot;&gt;HBASE-10282&lt;/a&gt; TestMultiParallel.testFlushCommitsNoAbort fails frequently in 0.94 (larsh: rev 1557003)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/client/TestMultiParallel.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13867439" author="hudson" created="Fri, 10 Jan 2014 02:35:06 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.94 #1257 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/1257/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/1257/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10282&quot; title=&quot;We can&amp;#39;t assure that the first ZK server is active server in MiniZooKeeperCluster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10282&quot;&gt;HBASE-10282&lt;/a&gt; TestMultiParallel.testFlushCommitsNoAbort fails frequently in 0.94 (larsh: rev 1557003)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/client/TestMultiParallel.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13869370" author="tobe" created="Mon, 13 Jan 2014 09:10:24 +0000"  >&lt;p&gt;The function &lt;tt&gt;killCurrentActiveZooKeeperServer()&lt;/tt&gt; and &lt;tt&gt;killOneBackupZooKeeperServer()&lt;/tt&gt; are nonsense because of this. I think &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=liyin&quot; class=&quot;user-hover&quot; rel=&quot;liyin&quot;&gt;Liyin Tang&lt;/a&gt; treated the first zk server as the leader but we can&apos;t make sure of that. So should we rename &lt;tt&gt;activeZKServerIndex&lt;/tt&gt; into &lt;tt&gt;firstZKServerIndex&lt;/tt&gt; and combining these two functions into &lt;tt&gt;killFirstZooKeeperServer()&lt;/tt&gt;(hard to know which one is actual leader)?&lt;/p&gt;

&lt;p&gt;Need more people to discuss it. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13871479" author="stack" created="Wed, 15 Jan 2014 01:14:59 +0000"  >&lt;p&gt;What you say makes sense &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tobe&quot; class=&quot;user-hover&quot; rel=&quot;tobe&quot;&gt;chendihao&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13871513" author="tobe" created="Wed, 15 Jan 2014 01:52:24 +0000"  >&lt;p&gt;Thank &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; and we(Xiaomi) will make a patch to eliminate the confusion. Can we reduce those two function into a killRandomZooKeeperServer() because they seem to have the same effect? Before doing that, we have to fix &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10283&quot; title=&quot;Client can&amp;#39;t connect with all the running zk servers in MiniZooKeeperCluster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10283&quot;&gt;HBASE-10283&lt;/a&gt; otherwise killing the first one will occur other problems.&lt;/p&gt;</comment>
                            <comment id="13871674" author="stack" created="Wed, 15 Jan 2014 05:40:20 +0000"  >&lt;p&gt;Do as you see fit &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tobe&quot; class=&quot;user-hover&quot; rel=&quot;tobe&quot;&gt;chendihao&lt;/a&gt;.  Thanks for working on this.&lt;/p&gt;</comment>
                            <comment id="13871953" author="tobe" created="Wed, 15 Jan 2014 11:42:59 +0000"  >&lt;p&gt;patch for 0.94&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12623112" name="HBASE-10282-0.94-v1.patch" size="8481" author="tobe" created="Wed, 15 Jan 2014 11:42:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 10 Jan 2014 02:06:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366382</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 48 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1r5kn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366693</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>