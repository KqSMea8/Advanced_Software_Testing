<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:55:48 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-8497/HBASE-8497.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-8497] Protobuf WAL also needs a trailer </title>
                <link>https://issues.apache.org/jira/browse/HBASE-8497</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;New Protobuf WAL has a header, but we will probably need a trailer as well, reserved for later usage. &lt;/p&gt;

&lt;p&gt;Right now, we can we just serialize an empty trailer, but putting more metadata there, like range of sequence_id&apos;s, region names, table names etc might be needed in the future. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12646267">HBASE-8497</key>
            <summary>Protobuf WAL also needs a trailer </summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12540505">HBASE-5305</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="v.himanshu">Himanshu Vashishtha</assignee>
                                    <reporter username="enis">Enis Soztutar</reporter>
                        <labels>
                    </labels>
                <created>Mon, 6 May 2013 18:38:51 +0000</created>
                <updated>Mon, 23 Sep 2013 19:08:15 +0000</updated>
                            <resolved>Fri, 24 May 2013 20:50:51 +0000</resolved>
                                    <version>0.95.1</version>
                                    <fixVersion>0.98.0</fixVersion>
                    <fixVersion>0.95.1</fixVersion>
                                    <component>Protobufs</component>
                    <component>wal</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                <comments>
                            <comment id="13649979" author="v.himanshu" created="Mon, 6 May 2013 18:50:22 +0000"  >&lt;p&gt;+1. &lt;br/&gt;
Enis, thanks for filing this.&lt;/p&gt;

&lt;p&gt;As we discussed in the meeting last Friday, 6774 is a potential use case of this approach, where part of the RegionServer Load (sequenceId, list of region names, their associated dirty bit (as mentioned in 6774 approach), etc) can be added to the end of a WAL.&lt;/p&gt;

&lt;p&gt;I would definitely like to work on this and 6774.&lt;/p&gt;</comment>
                            <comment id="13650056" author="sershe" created="Mon, 6 May 2013 20:13:18 +0000"  >&lt;p&gt;We need to be very careful with this, because WAL is not guaranteed to be finished. &lt;br/&gt;
There needs to be some magic at the end of the file, to indicate that WAL is finished, then trailer size; and around that there needs to be sanity checks in case if magic appears by coincidence.&lt;br/&gt;
And nothing should depend on the trailer necessarily being there, WAL should be replayable without it.&lt;/p&gt;

&lt;p&gt;Also it needs to be done fast, before PB WAL ships, or one would also have to care about backward compat &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13650091" author="enis" created="Mon, 6 May 2013 20:36:46 +0000"  >&lt;blockquote&gt;&lt;p&gt;We need to be very careful with this, because WAL is not guaranteed to be finished. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Agreed. It seems that we have to do some heuristics to decide whether the trailer is valid. We can use something like the following format:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;walEdits&amp;gt;&amp;lt;PB Trailer&amp;gt;&amp;lt;Size of trailer&amp;gt;&amp;lt;PBMagic&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Then, if we can read the magic, and size, we apply some validation on the size (like it should not be negative, and should not be larger than XXX bytes), we try to read the PB&apos;ed object. If successful, we will declare success at reading the trailer. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Also it needs to be done fast, before PB WAL ships, or one would also have to care about backward compat&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;That is why I suggest putting an empty trailer in this issue for 0.95.1 or 0.95.2. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;And nothing should depend on the trailer necessarily being there, WAL should be replayable without it&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;yes, this should be optional. &lt;/p&gt;</comment>
                            <comment id="13650420" author="v.himanshu" created="Tue, 7 May 2013 02:42:19 +0000"  >&lt;p&gt;Agreed to the trailer format and need to ship it in 0.96; will update this jira soon. Thanks.&lt;/p&gt;</comment>
                            <comment id="13652535" author="v.himanshu" created="Wed, 8 May 2013 23:53:11 +0000"  >&lt;p&gt;Attached is a patch for adding trailer at the end of a WAL file.&lt;br/&gt;
Currently, it is a empty trailer. Additional fields can be added to the WALTrailer message in WAL.proto. I tested it by running a patched cluster on my local system; ran TestHLog* tests.&lt;/p&gt;

&lt;p&gt;Some considerations while working on the patch:&lt;br/&gt;
1) Trailer is optional. WAL should be readable if it&apos;s not present. If it is present, then WAL is read to the point just before trailer starts.&lt;br/&gt;
2) WAL is structured as: &amp;lt;WALHeader&amp;gt;&amp;lt;WALEdits&amp;gt;...&amp;lt;WALEdits&amp;gt;&amp;lt;Trailer&amp;gt;&amp;lt;Trailer_Size&amp;gt;&amp;lt;WAL_COMPLETE_MAGIC&amp;gt;&lt;br/&gt;
3) Trailer is set only at the close call. There are APIs in HLog to set/get trailer.&lt;/p&gt;

&lt;p&gt;4) Files under recovery/incorrect length/reading files when they are not closed:&lt;br/&gt;
There may be case when a reader is opened even when the log file is not closed: ReplicationLogReader, for example. Or,&lt;br/&gt;
If there is trailer but we couldn&apos;t get correct Wal size due to some HDFS issue (under recovery, etc) while opening.&lt;br/&gt;
In such cases, the trailer is not read by the reader. While reading the wal, if ProtobufLogReader encounters the trailer in the next() call, it returns false, which is a legit behavior. I added unit tests to simulate this behavior.&lt;/p&gt;</comment>
                            <comment id="13652575" author="enis" created="Thu, 9 May 2013 00:21:46 +0000"  >&lt;p&gt;looks good. Do you mind putting this in RB, I have a couple of comments. &lt;/p&gt;</comment>
                            <comment id="13652590" author="v.himanshu" created="Thu, 9 May 2013 00:34:58 +0000"  >&lt;p&gt;RB request: &lt;a href=&quot;https://reviews.apache.org/r/11015/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/11015/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13652602" author="sershe" created="Thu, 9 May 2013 00:53:28 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+message WALTrailer {
+}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Nit: please put above the custom messages section.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;+     * returns the WALTrailer of the current HLog. It may be null in case of legacy WAL files.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Or failures?&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;+    LOG.info(&quot;After reading the trailer,: &quot;+this.positionToRead +&quot;, &quot;+this.fileLength);&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Nit: spaces; &quot;,:&quot;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;+    if (trailerPresent &amp;amp;&amp;amp; this.inputStream.getPos() &amp;gt;= this.positionToRead) return false;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;It would be very suspicious if it was &quot;&amp;gt;&quot;, I think we need to error out in this case.&lt;br/&gt;
In fact probably error out at the end of the read if we read into trailer?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;+      entry.getKey().readFieldsFromPb(walKey, this.byteStringUncompressor);&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Spurious whitespace change.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;+  private boolean trailerWritten;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Nit: initialize explicitly?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;+  WALTrailer trailer;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;private&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void writeWALTrailer() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
+    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (trailer == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) trailer = WALTrailer.newBuilder().build();
+    trailer.writeTo(output);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This usage pattern is not very clean, either external user can set the trailer or writer can create it.&lt;br/&gt;
Perhaps it should be mandatory and passed as parameter in ctor? That way HLog stuff can pass in trailer with necessary values, and writer can augment it with more fields and write it out.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.output.writeInt(trailer.getSerializedSize());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Are you sure bytebuffer&apos;s readInt and this writeInt will always be compatible with regard to format and endian-ness? Just checking, I have no idea. Perhaps Bytes stuff can be used in both places.&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        out.write(corrupted_bytes, 0, fileSize
+          - (32 + ProtobufLogReader.PB_WAL_COMPLETE_MAGIC.length + Bytes.SIZEOF_INT));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Is another test for corrupt trailer needed?&lt;/p&gt;</comment>
                            <comment id="13652645" author="v.himanshu" created="Thu, 9 May 2013 01:35:31 +0000"  >&lt;p&gt;Thanks for the review.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;In fact probably error out at the end of the read if we read into trailer?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Agree.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;This usage pattern is not very clean, either external user can set the trailer or writer can create it.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;What use case you are thinking about for adding trailer and let Writer augmenting fields to it. The use case I was thinking is adding RegionLoad level data (completeSequenceNumbers of regions, etc) which is present at the RegionServer (6774). You don&apos;t know such details while opening a new log, therefore I didn&apos;t add it in ctr, and rather, exposed these setters/getters for it. Does this help?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Using Bytes stuff in both places. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Agree, lets be safe &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Is another test for corrupt trailer needed?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Not sure. You mean some incomplete trailer or something like that?&lt;/p&gt;

&lt;p&gt;will fix those Spacing Nits.&lt;/p&gt;</comment>
                            <comment id="13652663" author="yuzhihong@gmail.com" created="Thu, 9 May 2013 02:00:38 +0000"  >&lt;p&gt;w.r.t. setter for WALTrailer, it would be clearer if we add one entry in WALTrailer so that we exercise the code path along which the entry is passed.&lt;/p&gt;</comment>
                            <comment id="13653218" author="v.himanshu" created="Thu, 9 May 2013 21:14:12 +0000"  >&lt;p&gt;@Ted: Sorry, it&apos;s not clear what you are suggesting.&lt;/p&gt;</comment>
                            <comment id="13653230" author="yuzhihong@gmail.com" created="Thu, 9 May 2013 21:20:45 +0000"  >&lt;p&gt;My suggestion was in accordance with your description:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;The use case I was thinking is adding RegionLoad level data&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;We can add one entry in WALTrailer to make it non-empty.&lt;/p&gt;</comment>
                            <comment id="13653243" author="v.himanshu" created="Thu, 9 May 2013 21:30:50 +0000"  >&lt;p&gt;I was having a ByteString earlier in WALTrailer, but then removed it as one can add additional entries later on... He needs to add it in the proto file. So, I can add an optional message for 6774 when I will work on it, for example. Does this help?&lt;/p&gt;</comment>
                            <comment id="13653251" author="yuzhihong@gmail.com" created="Thu, 9 May 2013 21:36:30 +0000"  >&lt;p&gt;That should be fine.&lt;/p&gt;</comment>
                            <comment id="13653261" author="sershe" created="Thu, 9 May 2013 21:42:37 +0000"  >&lt;blockquote&gt;&lt;p&gt;What use case you are thinking about for adding trailer and let Writer augmenting fields to it. The use case I was thinking is adding RegionLoad level data (completeSequenceNumbers of regions, etc) which is present at the RegionServer (6774). You don&apos;t know such details while opening a new log, therefore I didn&apos;t add it in ctr, and rather, exposed these setters/getters for it. Does this help?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;In that case the log close should expect trailer to be there and not create it imho...&lt;/p&gt;

&lt;blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Is another test for corrupt trailer needed?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Not sure. You mean some incomplete trailer or something like that?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;What I meant was writing corrupt/partial magic after correct size, for example.&lt;/p&gt;</comment>
                            <comment id="13655164" author="v.himanshu" created="Sat, 11 May 2013 05:22:54 +0000"  >&lt;p&gt;Incorporated feedback on the initial version. &lt;br/&gt;
Apart from the nits that are fixed:&lt;br/&gt;
a) Modified exception handling as suggested.&lt;br/&gt;
b) Added sanity checks on the trailer size. Currently, this patch makes trailer_max_size to 1MB, and didn&apos;t make it configurable; This is to avoid cases where a user lowers the max size and a reader tries to read old logs. Moreover, I see 1MB size a good enough size for the use case (6774). If there is any requirement to increase it, it could be done in some other jira. Please suggest if you think differently.&lt;br/&gt;
c) Trailer is instantiated in the init() method. While writing the trailer, a check is made in case trailer is set to null or its size exceeds max_size. In this case, a default trailer is written rather with a WARN message.&lt;br/&gt;
d) Added test case for  corrupt trailer.&lt;/p&gt;

&lt;p&gt;Test: I tested it on my local by killing the RS and doing the split, etc. Ran unit tests for classes HLog* many times.&lt;/p&gt;</comment>
                            <comment id="13655176" author="hadoopqa" created="Sat, 11 May 2013 06:36:33 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12582770/HBASE-8497-v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12582770/HBASE-8497-v2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5639//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5639//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5639//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5639//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5639//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5639//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5639//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5639//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5639//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5639//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5639//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5639//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5639//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5639//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5639//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5639//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5639//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5639//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5639//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5639//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13656677" author="v.himanshu" created="Tue, 14 May 2013 03:23:54 +0000"  >&lt;p&gt;Edited the 100 char long lines; rest is same.&lt;/p&gt;</comment>
                            <comment id="13657269" author="sershe" created="Tue, 14 May 2013 17:45:56 +0000"  >&lt;p&gt;some feedback on r&lt;/p&gt;</comment>
                            <comment id="13658408" author="v.himanshu" created="Wed, 15 May 2013 14:45:47 +0000"  >&lt;p&gt;addressed rb comments. Thanks.&lt;/p&gt;</comment>
                            <comment id="13658410" author="hadoopqa" created="Wed, 15 May 2013 14:52:30 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12583328/HBASE-8497-v4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12583328/HBASE-8497-v4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5700//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5700//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13658525" author="v.himanshu" created="Wed, 15 May 2013 16:40:46 +0000"  >&lt;p&gt;Rebased with latest trunk&lt;/p&gt;</comment>
                            <comment id="13658576" author="hadoopqa" created="Wed, 15 May 2013 17:47:22 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12583336/HBASE-8497-v4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12583336/HBASE-8497-v4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5702//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5702//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5702//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5702//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5702//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5702//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5702//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5702//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5702//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5702//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5702//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5702//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5702//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5702//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5702//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5702//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5702//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5702//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5702//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5702//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13662396" author="v.himanshu" created="Mon, 20 May 2013 22:09:28 +0000"  >&lt;p&gt;I did the following changes in this patch:&lt;br/&gt;
1) Renamed WALTrailerOffset to lastPositionToRead (as I commented on the rb). This is the last byte position of WALEdits, so, the next() method should read up to this point.&lt;br/&gt;
2) Make the maximum trailer size configurable. To &lt;b&gt;avoid any surprise&lt;/b&gt; for user, if the trailer size &amp;gt; configured_max_allow_size, a WARN message is printed in the log, but the trailer is respected (it is written/read). &lt;br/&gt;
3) Incorporated the style nits suggested by jon.&lt;/p&gt;

&lt;p&gt;mvn test TestHLog* pass.&lt;/p&gt;</comment>
                            <comment id="13662446" author="hadoopqa" created="Mon, 20 May 2013 23:16:06 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12583896/HBASE-8497-v5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12583896/HBASE-8497-v5.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestFromClientSide&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5757//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5757//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5757//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5757//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5757//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5757//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5757//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5757//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5757//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5757//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5757//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5757//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5757//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5757//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5757//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5757//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5757//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5757//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5757//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5757//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13662458" author="v.himanshu" created="Mon, 20 May 2013 23:32:22 +0000"  >&lt;p&gt;org.apache.hadoop.hbase.client.TestFromClientSide passes for me at local; also, its cousin org.apache.hadoop.hbase.client.TestFromClientSideWithCP passes on this qa run. So, it looks more of the test run issue here.&lt;/p&gt;</comment>
                            <comment id="13662479" author="sershe" created="Tue, 21 May 2013 00:01:00 +0000"  >&lt;p&gt;left some comments. Main things - I had left a comment before about some discrepancy (&quot;Hmm... trailerSizeOffset points to the first byte of size 4-byte buffer&quot;).&lt;br/&gt;
Also, the size limit was added as safety check. Making it a config parameter whose only effect is to output a warning that user has no idea what to do with is not helpful imho. There&apos;s no safety check. There&apos;s nothing for user to do really - he can ignore the warnings, or bump the config which basically means ignore the warning. Might as well remove the entire limit thing &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13662505" author="v.himanshu" created="Tue, 21 May 2013 00:26:18 +0000"  >&lt;p&gt;Thanks Sergey.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I had left a comment before about some discrepancy (&quot;Hmm... trailerSizeOffset points to the first byte of size 4-byte buffer&quot;)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I explained it in the previous rb comment. Please let me know if you have any follow up question on that. Basically, I removed that trailerOffset as it was adding some confusion (at least for me). Now, lastPositionToRead points to the last byte of WALEdit which a reader should read up to in the next method (inclusive). The trailer starts after this position.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;size limit.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;You are right that client can very well ignore it, or bump the config. I think it is good to have some kind of information on its size.&lt;br/&gt;
In the initial version, I used the size in order to skip the trailer if it is larger than configured and rather used a default one. This could have result in some erroneous state and made the trailer itself unreliable.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Might as well remove the entire limit thing &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;That is another option (there was no limit in v1 &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;) I am okay with this too. &lt;br/&gt;
But yeah, as mentioned above, I am not okay with using a default trailer in case its size is more than configured.&lt;/p&gt;</comment>
                            <comment id="13662507" author="sershe" created="Tue, 21 May 2013 00:30:20 +0000"  >&lt;blockquote&gt;&lt;p&gt;I explained it in the previous rb comment. Please let me know if you have any follow up question on that. Basically, I removed that trailerOffset as it was adding some confusion (at least for me). Now, lastPositionToRead points to the last byte of WALEdit which a reader should read up to in the next method (inclusive). The trailer starts after this position.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I responded to your response, it seems if the trailer size is 0 with magic/size present it would point to one byte beyond.&lt;/p&gt;

&lt;p&gt;Wrt warning, should it be a constant then? &lt;/p&gt;</comment>
                            <comment id="13662508" author="jmhsieh" created="Tue, 21 May 2013 00:30:32 +0000"  >&lt;p&gt;Would it make sense to warn on writing a trailer that is larger than the limit and fail fast when trying to read it if it too big with a warning saying how big it supposedly was and a pointer to bumping the value larger if it is legit?&lt;/p&gt;</comment>
                            <comment id="13662626" author="sershe" created="Tue, 21 May 2013 03:17:11 +0000"  >&lt;p&gt;Are you sure the limit value should be configurable though? It&lt;/p&gt;</comment>
                            <comment id="13664813" author="v.himanshu" created="Thu, 23 May 2013 02:56:39 +0000"  >&lt;blockquote&gt;&lt;p&gt;I responded to your response, it seems if the trailer size is 0 with magic/size present it would point to one byte beyond.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No it will not; with the latest patch, lastPositionToRead points to the last byte of the WALEdit.&lt;br/&gt;
I ran a patched rs and read a hlog:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2013-05-22 17:11:23,400 DEBUG wal.ProtobufLogReader (ProtobufLogReader.java:initInternal(118)) - After reading the trailer: lastPositionToRead: 372, fileLength: 380, trailerPresent: &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note, magic is 4 bytes &lt;span class=&quot;error&quot;&gt;&amp;#91;397-380&amp;#93;&lt;/span&gt;, trailer size is 4 bytes &lt;span class=&quot;error&quot;&gt;&amp;#91;393-396&amp;#93;&lt;/span&gt;. The trailer size is 0; so last byte of the WALEdit is at 392, and lastPositionToRead is pointing to 392 only.&lt;/p&gt;

&lt;p&gt;Re making it configurable vs constant: I set the default value to 1MB. Currently, the one use case I have is adding Region level stats at the end. It shouldn&apos;t be more than 150 bytes per region (region name + long value). If we store CF level flush sequence Ids also, then it would be about 500-600 bytes. This means a scope of about 2000 regions on one server without showing the warning message. I think it is pretty decent number (usually we tend to advice not more than 100 or so regions).&lt;/p&gt;

&lt;p&gt;Left some comments on rb too. Thanks for the reviews.&lt;/p&gt;</comment>
                            <comment id="13664843" author="v.himanshu" created="Thu, 23 May 2013 04:34:56 +0000"  >&lt;p&gt;Having said that, I am +0 on removing the conf property and using just the default constant. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13665411" author="sershe" created="Thu, 23 May 2013 17:50:06 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13665417" author="yuzhihong@gmail.com" created="Thu, 23 May 2013 17:53:17 +0000"  >&lt;blockquote&gt;&lt;p&gt;lastPositionToRead is pointing to 392 &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;From the log:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;After reading the trailer: lastPositionToRead: 372&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Should the two numbers be the same ?&lt;/p&gt;</comment>
                            <comment id="13665436" author="v.himanshu" created="Thu, 23 May 2013 18:08:38 +0000"  >&lt;p&gt;Oh I messed up with numbers&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2013-05-22 17:11:23,400 DEBUG wal.ProtobufLogReader (ProtobufLogReader.java:initInternal(118)) - After reading the trailer: lastPositionToRead: 372, fileLength: 380, trailerPresent: &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So, it should read: &lt;br/&gt;
Note, magic is 4 bytes &lt;span class=&quot;error&quot;&gt;&amp;#91;377-380&amp;#93;&lt;/span&gt;, trailer size is 4 bytes &lt;span class=&quot;error&quot;&gt;&amp;#91;373-376&amp;#93;&lt;/span&gt;. The trailer size is 0; so last byte of the WALEdit is at 372, and lastPositionToRead is pointing to 372 only.&lt;/p&gt;

&lt;p&gt;Also note the lastPositionToRead variable is changed to walEditsStopOffset, but that&apos;s a different point.&lt;/p&gt;</comment>
                            <comment id="13665543" author="yuzhihong@gmail.com" created="Thu, 23 May 2013 19:41:26 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13665590" author="v.himanshu" created="Thu, 23 May 2013 20:05:05 +0000"  >&lt;p&gt;attaching the last one from rb here. Thanks for the reviews.&lt;/p&gt;</comment>
                            <comment id="13665693" author="jmhsieh" created="Thu, 23 May 2013 21:29:16 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13665706" author="hadoopqa" created="Thu, 23 May 2013 21:37:11 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12584568/HBASE-8497-v6.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12584568/HBASE-8497-v6.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.security.access.TestAccessController&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5802//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5802//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5802//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5802//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5802//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5802//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5802//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5802//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5802//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5802//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5802//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5802//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5802//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5802//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5802//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5802//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5802//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5802//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5802//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5802//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13665737" author="yuzhihong@gmail.com" created="Thu, 23 May 2013 22:00:28 +0000"  >&lt;p&gt;Integrated to 0.95 and trunk.&lt;/p&gt;

&lt;p&gt;Thanks for the patch, Himanshu.&lt;/p&gt;

&lt;p&gt;Thanks for the reviews, Sergey and Jon.&lt;/p&gt;</comment>
                            <comment id="13665980" author="hudson" created="Fri, 24 May 2013 03:56:45 +0000"  >&lt;p&gt;Integrated in hbase-0.95 #212 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95/212/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95/212/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8497&quot; title=&quot;Protobuf WAL also needs a trailer &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8497&quot;&gt;&lt;del&gt;HBASE-8497&lt;/del&gt;&lt;/a&gt; Protobuf WAL also needs a trailer (Himanshu) (Revision 1485865)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/WALProtos.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-protocol/src/main/protobuf/WAL.proto&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLog.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/ProtobufLogReader.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/ProtobufLogWriter.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/ReaderBase.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/SequenceFileLogReader.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/SequenceFileLogWriter.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestHLog.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestHLogSplit.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13666080" author="hudson" created="Fri, 24 May 2013 07:54:30 +0000"  >&lt;p&gt;Integrated in hbase-0.95-on-hadoop2 #110 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95-on-hadoop2/110/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95-on-hadoop2/110/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8497&quot; title=&quot;Protobuf WAL also needs a trailer &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8497&quot;&gt;&lt;del&gt;HBASE-8497&lt;/del&gt;&lt;/a&gt; Protobuf WAL also needs a trailer (Himanshu) (Revision 1485865)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/WALProtos.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-protocol/src/main/protobuf/WAL.proto&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLog.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/ProtobufLogReader.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/ProtobufLogWriter.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/ReaderBase.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/SequenceFileLogReader.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/SequenceFileLogWriter.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestHLog.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestHLogSplit.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13666138" author="hudson" created="Fri, 24 May 2013 09:19:52 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #541 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/541/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/541/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8497&quot; title=&quot;Protobuf WAL also needs a trailer &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8497&quot;&gt;&lt;del&gt;HBASE-8497&lt;/del&gt;&lt;/a&gt; Protobuf WAL also needs a trailer (Himanshu) (Revision 1485866)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/WALProtos.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-protocol/src/main/protobuf/WAL.proto&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLog.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/ProtobufLogReader.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/ProtobufLogWriter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/ReaderBase.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/SequenceFileLogReader.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/SequenceFileLogWriter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestHLog.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestHLogSplit.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13666151" author="hudson" created="Fri, 24 May 2013 09:28:59 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #4141 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4141/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4141/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8497&quot; title=&quot;Protobuf WAL also needs a trailer &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8497&quot;&gt;&lt;del&gt;HBASE-8497&lt;/del&gt;&lt;/a&gt; Protobuf WAL also needs a trailer (Himanshu) (Revision 1485866)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/WALProtos.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-protocol/src/main/protobuf/WAL.proto&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLog.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/ProtobufLogReader.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/ProtobufLogWriter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/ReaderBase.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/SequenceFileLogReader.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/SequenceFileLogWriter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestHLog.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestHLogSplit.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13666659" author="stack" created="Fri, 24 May 2013 20:50:51 +0000"  >&lt;p&gt;This was committed a while back.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12607467">HBASE-6774</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12582386" name="HBASE-8497-v0.patch" size="32620" author="v.himanshu" created="Wed, 8 May 2013 23:53:11 +0000"/>
                            <attachment id="12582770" name="HBASE-8497-v2.patch" size="36241" author="v.himanshu" created="Sat, 11 May 2013 05:22:54 +0000"/>
                            <attachment id="12583069" name="HBASE-8497-v3.patch" size="36324" author="v.himanshu" created="Tue, 14 May 2013 03:23:54 +0000"/>
                            <attachment id="12583336" name="HBASE-8497-v4.patch" size="36017" author="v.himanshu" created="Wed, 15 May 2013 16:40:46 +0000"/>
                            <attachment id="12583896" name="HBASE-8497-v5.patch" size="39746" author="v.himanshu" created="Mon, 20 May 2013 22:09:28 +0000"/>
                            <attachment id="12584568" name="HBASE-8497-v6.patch" size="38979" author="v.himanshu" created="Thu, 23 May 2013 20:05:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 6 May 2013 18:50:22 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>326625</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 29 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1kckv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>326970</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>