<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:10:11 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-3436/HBASE-3436.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-3436] HBase start scripts should not include maven repos jars if they exist in lib</title>
                <link>https://issues.apache.org/jira/browse/HBASE-3436</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;When starting the master, the jars of the users maven repos get injected into the classpath as a convenience to developers. This can cause quite a debugging headache when hadoop jars don&apos;t match what&apos;s on the cluster.&lt;/p&gt;

&lt;p&gt;We should change the start scripts to not do this if the jars exist in the lib dir. Or better yet, we would only include maven repos jars if an optional param exists in hbase-env.sh.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12495213">HBASE-3436</key>
            <summary>HBase start scripts should not include maven repos jars if they exist in lib</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="billgraham">Bill Graham</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Jan 2011 07:23:11 +0000</created>
                <updated>Fri, 20 Nov 2015 12:41:53 +0000</updated>
                            <resolved>Wed, 26 Jan 2011 18:47:49 +0000</resolved>
                                                    <fixVersion>0.90.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12980198" author="stack" created="Tue, 11 Jan 2011 17:31:55 +0000"  >&lt;p&gt;I think this issue will manufacture support requests up on list so I made it critical fix for 0.90.1.&lt;/p&gt;</comment>
                            <comment id="12980230" author="tlipcon" created="Tue, 11 Jan 2011 18:24:02 +0000"  >&lt;p&gt;I thought we only injected the maven jars if we saw a &quot;target&quot; directory &amp;#8211; ie that it&apos;s a build/dev environment instead of an installed one?&lt;/p&gt;</comment>
                            <comment id="12980258" author="stack" created="Tue, 11 Jan 2011 18:59:52 +0000"  >&lt;p&gt;Yeah, I suppose.  That check is there:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
# Detect &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; we are in hbase sources dir
in_dev_env=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; [ -d &lt;span class=&quot;code-quote&quot;&gt;&quot;${HBASE_HOME}/target&quot;&lt;/span&gt; ]; then
  in_dev_env=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
fi
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Bill, anything else particular about your environment.  e.g. did you download a built package and then inside in it do a new build?&lt;/p&gt;</comment>
                            <comment id="12980259" author="stack" created="Tue, 11 Jan 2011 19:00:40 +0000"  >&lt;p&gt;Bill, that is, did you change your hbase download from a clean binary install into a &apos;dev environment&apos; by doing &apos;mvn install&apos; or something.  Thanks.&lt;/p&gt;</comment>
                            <comment id="12980273" author="billgraham" created="Tue, 11 Jan 2011 19:22:01 +0000"  >&lt;p&gt;I&apos;m don&apos;t recall running mvn install, but I do see this jar in my maven repos:&lt;/p&gt;

&lt;p&gt;~/.m2/repository/org/apache/hadoop/hadoop-core/0.20-append-r1042285/hadoop-core-0.20-append-r1042285.jar&lt;/p&gt;

&lt;p&gt;Which is the same one that is packaged the HBase lib/ dir. What I recall is doing the following:&lt;/p&gt;

&lt;p&gt;1. Downloading the HBase tar and extracting it&lt;br/&gt;
2. Modifying some configs and running it from by home dir&lt;br/&gt;
3. Copying the distro with custom configs to /var/opt/habase, where we now run it.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure how the append jar got to my maven repo, but maybe I ran some target within HBase that put it there? I suspect my target/cached_classpath.txt file came along for the ride in step 3 above.&lt;/p&gt;

&lt;p&gt;Either way, I&apos;ve deleted the cached_classpath file and I can no longer reproduce, meaning I can&apos;t manage to get the maven jars into my classpath when starting/stoping the master. This is a good thing.&lt;/p&gt;

&lt;p&gt;Feel free to mark this issue as invalid if it seems like something I might have done. We should try to make this maven/classpath functionality more obvious though, since I was hung up on this for a long time. Maybe better log messaging that these classes are being inserted into the cp would help. &lt;/p&gt;</comment>
                            <comment id="12986786" author="tdunning" created="Wed, 26 Jan 2011 00:15:49 +0000"  >&lt;p&gt;An approach that I am experimenting with is to mark hadoop and similar dependencies as being in the &quot;provided&quot; scope.  My experimental platform right now is ycsb which is one step further down the food chain than hbase, but it has the same problem (but substitute hbase for hadoop in the discussion).&lt;/p&gt;

&lt;p&gt;So far, this approach seems to work well.  It creates a jar-with-dependencies that lacks the provided dependencies and their dependencies.  At runtime, I simply inject hbase/lib/*.jar into the class path and all is good.  Executing with a class path provided by maven should work just as well but I haven&apos;t tried it.&lt;/p&gt;

&lt;p&gt;Based on my still formative success, it seems that  this might be a reasonable path forward for hbase as well.&lt;/p&gt;</comment>
                            <comment id="12986800" author="billgraham" created="Wed, 26 Jan 2011 01:08:39 +0000"  >&lt;p&gt;Looking more closely at bin/hbase it seems the maven deps are added if the pom.xml file is found under $HBASE_HOME. That seems to imply to the script that this is a developer setup.&lt;/p&gt;

&lt;p&gt;The issue with this approach is that the pom.xml file is included in the distro though, so by default this will be the case if someone untars and starts. In a production RPM we&apos;d probably rebuild and not include the pom.xml, but this might not be the case for others.&lt;/p&gt;

&lt;p&gt;Instead I think injecting jars into what would be the &quot;obvious&quot; classpath should only be done when a developer takes an action, like setting a config or creating a target/ dir.&lt;/p&gt;
</comment>
                            <comment id="12986908" author="ryanobjc" created="Wed, 26 Jan 2011 09:10:43 +0000"  >&lt;p&gt;we&apos;ve enjoyed shipping &apos;build in place&apos; tar.gz in the past, and i&apos;d&lt;br/&gt;
like to keep that going if at all possible, so going with the [ -x&lt;br/&gt;
&apos;target&apos; ] kind of logic seems good to me.&lt;/p&gt;</comment>
                            <comment id="12987158" author="billgraham" created="Wed, 26 Jan 2011 18:47:49 +0000"  >&lt;p&gt;Sorry for the unnecessary churn on this guys, but this was fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3383&quot; title=&quot;[0.90RC1] bin/hbase script displays &amp;quot;no such file&amp;quot; warning on target/cached_classpath.txt&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3383&quot;&gt;&lt;del&gt;HBASE-3383&lt;/del&gt;&lt;/a&gt;, which was after 0.90.0-rc1, which I&apos;m still on (yes, I will upgrade &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;). &lt;/p&gt;</comment>
                            <comment id="15017099" author="lars_francke" created="Fri, 20 Nov 2015 12:41:53 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 11 Jan 2011 17:31:55 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26859</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hm9r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>100870</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>