<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:21:27 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4722/HBASE-4722.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4722] TestGlobalMemStoreSize has started failing</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4722</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;I&apos;m digging in.  It fails occasionally for me locally to.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12529780">HBASE-4722</key>
            <summary>TestGlobalMemStoreSize has started failing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Nov 2011 00:01:20 +0000</created>
                <updated>Wed, 23 Nov 2011 21:10:22 +0000</updated>
                            <resolved>Wed, 23 Nov 2011 21:10:22 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13141784" author="stack" created="Wed, 2 Nov 2011 00:02:14 +0000"  >&lt;p&gt;A bit of logging to help debug whats going on.&lt;/p&gt;</comment>
                            <comment id="13141947" author="stack" created="Wed, 2 Nov 2011 06:11:57 +0000"  >&lt;p&gt;Bit more logging. Since I added this, I can&apos;t make it fail locally.  Its like a timing issue seemingly where we skip flushing seemingly.  Still digging.&lt;/p&gt;</comment>
                            <comment id="13141948" author="stack" created="Wed, 2 Nov 2011 06:13:07 +0000"  >&lt;p&gt;I committed logging-v2 so can get more info when fails on jenkins since can&apos;t make it fail local (and I&apos;m going to bed...)&lt;/p&gt;</comment>
                            <comment id="13142034" author="hudson" created="Wed, 2 Nov 2011 09:55:24 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2399 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2399/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2399/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4722&quot; title=&quot;TestGlobalMemStoreSize has started failing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4722&quot;&gt;&lt;del&gt;HBASE-4722&lt;/del&gt;&lt;/a&gt; TestGlobalMemStoreSize has started failing; commit some extra logging to help debug whats going on up on jenkins&lt;/p&gt;

&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/TestGlobalMemStoreSize.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13143616" author="stack" created="Thu, 3 Nov 2011 23:38:48 +0000"  >&lt;p&gt;Possible fix.  This test would fail for me pretty regularly but with this closing of gap between when we measure  memstore size and actually then use it to decrement the memstore size, I can run the test 50 times w/o failure. Let me try committing it to see if it helps.&lt;/p&gt;</comment>
                            <comment id="13143785" author="hudson" created="Fri, 4 Nov 2011 06:42:06 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2409 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2409/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2409/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4722&quot; title=&quot;TestGlobalMemStoreSize has started failing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4722&quot;&gt;&lt;del&gt;HBASE-4722&lt;/del&gt;&lt;/a&gt; TestGlobalMemStoreSize has started failing; ADDENDUM&lt;/p&gt;

&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/TestGlobalMemStoreSize.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13144080" author="stack" created="Fri, 4 Nov 2011 15:51:33 +0000"  >&lt;p&gt;I think this fix should work.  When I go back to the pre-patch code and insert an assert that will fail if memstore size changes between our getting of its size and our actual use of it, it fails after a few runs:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: java.io.IOException: currentMemStoreSize=17000, actual=17608
        at org.apache.hadoop.hbase.regionserver.HRegion.internalFlushcache(HRegion.java:1284)
        ... 32 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;ll leave this issue open another while in case the fix not complete.&lt;/p&gt;</comment>
                            <comment id="13144081" author="stack" created="Fri, 4 Nov 2011 15:52:10 +0000"  >&lt;p&gt;I think this fix should work.  When I go back to the pre-patch code and insert an assert that will fail if memstore size changes between our getting of its size and our actual use of it, it fails after a few runs:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: java.io.IOException: currentMemStoreSize=17000, actual=17608
        at org.apache.hadoop.hbase.regionserver.HRegion.internalFlushcache(HRegion.java:1284)
        ... 32 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;ll leave this issue open another while in case the fix not complete.&lt;/p&gt;</comment>
                            <comment id="13156281" author="stack" created="Wed, 23 Nov 2011 21:10:22 +0000"  >&lt;p&gt;This committed fix has done damage.  See &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4853&quot; title=&quot;HBASE-4789 does overzealous pruning of seqids&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4853&quot;&gt;&lt;del&gt;HBASE-4853&lt;/del&gt;&lt;/a&gt;.  Closing as won&apos;t fix.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12502235" name="4722.txt" size="2538" author="stack" created="Thu, 3 Nov 2011 23:38:48 +0000"/>
                            <attachment id="12501914" name="logging-v2.txt" size="2867" author="stack" created="Wed, 2 Nov 2011 06:11:56 +0000"/>
                            <attachment id="12501878" name="logging.txt" size="2042" author="stack" created="Wed, 2 Nov 2011 00:02:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 2 Nov 2011 09:55:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>215639</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 4 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hrz3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>101794</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>