<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:51:52 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1238/HBASE-1238.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1238] Under upload, region servers are unable to compact when loaded with hundreds of regions</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1238</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;We have a situation where each region server is loaded with 100+ regions, most of them in the same table. During a long upload of webpages, each memcache gets filled near equally fast so that the global memcache limit is usually triggered before the max memcache size. Since that emergency flush does not trigger compactions, the number of store files just keeps growing until it fails on all kinds of errors.&lt;/p&gt;

&lt;p&gt;We need a better story for this as this is a &quot;normal&quot; situation.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12416128">HBASE-1238</key>
            <summary>Under upload, region servers are unable to compact when loaded with hundreds of regions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jdcryans">Jean-Daniel Cryans</reporter>
                        <labels>
                    </labels>
                <created>Wed, 4 Mar 2009 18:56:55 +0000</created>
                <updated>Sun, 13 Sep 2009 22:24:27 +0000</updated>
                            <resolved>Fri, 6 Mar 2009 20:01:40 +0000</resolved>
                                    <version>0.19.0</version>
                                    <fixVersion>0.19.1</fixVersion>
                    <fixVersion>0.20.0</fixVersion>
                                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12678919" author="jdcryans" created="Wed, 4 Mar 2009 20:53:36 +0000"  >&lt;p&gt;I&apos;m going to try if this helps our job.&lt;/p&gt;</comment>
                            <comment id="12679439" author="jdcryans" created="Fri, 6 Mar 2009 00:34:04 +0000"  >&lt;p&gt;Turns out the patch works well :&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2009-03-05 00:37:54,348 INFO org.apache.hadoop.hbase.regionserver.MemcacheFlusher: Forced flushing of web_pages,http:&lt;span class=&quot;code-comment&quot;&gt;//camanomade.wordpress.com/,1236183697332 because global memcache limit of 676.7m exceeded; currently 646.4m and flushing till 422.9m
&lt;/span&gt;2009-03-05 00:38:01,738 INFO org.apache.hadoop.hbase.regionserver.MemcacheFlusher: Forced flushing of web_pages,http:&lt;span class=&quot;code-comment&quot;&gt;//astore.amazon.com/blogcarnival23-20/detail/0761104844/178-5338054-2231726,1235269774078 because global memcache limit of 676.7m exceeded; currently 622.2m and flushing till 422.9m
&lt;/span&gt;2009-03-05 00:38:02,556 INFO org.apache.hadoop.hbase.regionserver.MemcacheFlusher: Forced flushing of web_pages,http:&lt;span class=&quot;code-comment&quot;&gt;//www.fsprostab.com/english/index.htm,1235943861247 because global memcache limit of 676.7m exceeded; currently 600.9m and flushing till 422.9m
&lt;/span&gt;2009-03-05 00:38:48,789 INFO org.apache.hadoop.hbase.regionserver.MemcacheFlusher: Forced flushing of web_pages,http:&lt;span class=&quot;code-comment&quot;&gt;//blackbamboohawaii.com/infinity/index.html,1236182065945 because global memcache limit of 676.7m exceeded; currently 580.9m and flushing till 422.9m
&lt;/span&gt;2009-03-05 00:38:49,271 INFO org.apache.hadoop.hbase.regionserver.MemcacheFlusher: Forced flushing of web_pages,http:&lt;span class=&quot;code-comment&quot;&gt;//ask.metafilter.com/60882/MidSouth-vacation,1235821461371 because global memcache limit of 676.7m exceeded; currently 563.1m and flushing till 422.9m
&lt;/span&gt;2009-03-05 00:38:49,865 INFO org.apache.hadoop.hbase.regionserver.MemcacheFlusher: Forced flushing of web_pages,http:&lt;span class=&quot;code-comment&quot;&gt;//www.galapagosisland.net/travel_insurance.html,1236106016987 because global memcache limit of 676.7m exceeded; currently 545.2m and flushing till 422.9m
&lt;/span&gt;2009-03-05 00:38:50,449 INFO org.apache.hadoop.hbase.regionserver.MemcacheFlusher: Forced flushing of web_pages,http:&lt;span class=&quot;code-comment&quot;&gt;//backcountryblog.blogspot.com/2006/10/hucking-cliffs-is-soooo-last-week.html,1236167469547 because global memcache limit of 676.7m exceeded; currently 528.2m and flushing till 422.9m
&lt;/span&gt;2009-03-05 00:38:50,985 INFO org.apache.hadoop.hbase.regionserver.MemcacheFlusher: Forced flushing of web_pages,http:&lt;span class=&quot;code-comment&quot;&gt;//www.fletcherlake.com/index.htm,1236166974226 because global memcache limit of 676.7m exceeded; currently 511.3m and flushing till 422.9m
&lt;/span&gt;2009-03-05 00:38:51,803 INFO org.apache.hadoop.hbase.regionserver.MemcacheFlusher: Forced flushing of web_pages,http:&lt;span class=&quot;code-comment&quot;&gt;//www.eurailblog.com/archives/cat_wales.shtml,1235786159128 because global memcache limit of 676.7m exceeded; currently 495.4m and flushing till 422.9m
&lt;/span&gt;2009-03-05 00:38:52,242 INFO org.apache.hadoop.hbase.regionserver.MemcacheFlusher: Forced flushing of web_pages,http:&lt;span class=&quot;code-comment&quot;&gt;//www.island.net/~sointula/accom.html,1236183944276 because global memcache limit of 676.7m exceeded; currently 479.8m and flushing till 422.9m
&lt;/span&gt;2009-03-05 00:38:52,774 INFO org.apache.hadoop.hbase.regionserver.MemcacheFlusher: Forced flushing of web_pages,http:&lt;span class=&quot;code-comment&quot;&gt;//www.manukapoint.com/Contact__20Us/__;window.mm_menu_b25ee76db7ed98b94e5945a386e8b470_2.addMenuItem__,1235779612713 because global memcache limit of 676.7m exceeded; currently 465.8m and flushing till 422.9m
&lt;/span&gt;2009-03-05 00:38:53,252 INFO org.apache.hadoop.hbase.regionserver.MemcacheFlusher: Forced flushing of web_pages,http:&lt;span class=&quot;code-comment&quot;&gt;//wellsbeachme.com/wc/index.htm,1236106056942 because global memcache limit of 676.7m exceeded; currently 452.4m and flushing till 422.9m
&lt;/span&gt;2009-03-05 00:38:55,239 INFO org.apache.hadoop.hbase.regionserver.MemcacheFlusher: Forced flushing of web_pages,http:&lt;span class=&quot;code-comment&quot;&gt;//www.greeka.com/saronic/agistri/hotels/agistri-rosys-little-village/index.html,1236104694918 because global memcache limit of 676.7m exceeded; currently 439.3m and flushing till 422.9m
&lt;/span&gt;2009-03-05 00:38:55,525 INFO org.apache.hadoop.hbase.regionserver.MemcacheFlusher: Forced flushing of web_pages,http:&lt;span class=&quot;code-comment&quot;&gt;//www.manukapoint.com/Contact__20Us/__;window.mm_menu_09fa2b8abdc5d7b0d6a4fd2cb2877ef1_2.addMenuItem__,1236219657625 because global memcache limit of 676.7m exceeded; currently 426.4m and flushing till 422.9m
&lt;/span&gt;2009-03-05 00:39:04,436 INFO org.apache.hadoop.hbase.regionserver.HRegion: starting  compaction on region web_pages,http:&lt;span class=&quot;code-comment&quot;&gt;//camanomade.wordpress.com/,1236183697332
&lt;/span&gt;2009-03-05 00:39:08,996 INFO org.apache.hadoop.hbase.regionserver.HRegion: compaction completed on region web_pages,http:&lt;span class=&quot;code-comment&quot;&gt;//camanomade.wordpress.com/,1236183697332 in 4sec
&lt;/span&gt;2009-03-05 00:39:08,997 INFO org.apache.hadoop.hbase.regionserver.HRegion: starting  compaction on region web_pages,http:&lt;span class=&quot;code-comment&quot;&gt;//astore.amazon.com/blogcarnival23-20/detail/0761104844/178-5338054-2231726,1235269774078
&lt;/span&gt;2009-03-05 00:39:13,673 INFO org.apache.hadoop.hbase.regionserver.HRegion: compaction completed on region web_pages,http:&lt;span class=&quot;code-comment&quot;&gt;//astore.amazon.com/blogcarnival23-20/detail/0761104844/178-5338054-2231726,1235269774078 in 4sec
&lt;/span&gt;...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I suggest we commit this for 0.19.1, maybe even for 0.20.0 until a better solution is found.&lt;/p&gt;</comment>
                            <comment id="12679504" author="stack" created="Fri, 6 Mar 2009 06:00:09 +0000"  >&lt;p&gt;+1 on patch.&lt;/p&gt;

&lt;p&gt;When committing, please add profuse comments that this is a hack and a better way needs to be figured.  That as is, compactions may be run prematurely.&lt;/p&gt;

&lt;p&gt;We need to figure some means of bubbling up the result of HRegion#flushCache up out of MemcacheFlusher#flushRegion in emergencies.  If true, compaction is wanted.  If this came up out of MemcacheFlusher#flushRegion call, then we add to the flush-later queue you just added.&lt;/p&gt;

&lt;p&gt;Good stuff J-D.&lt;/p&gt;</comment>
                            <comment id="12679621" author="jdcryans" created="Fri, 6 Mar 2009 15:44:44 +0000"  >&lt;p&gt;This is committed to branch, +1 also for trunk?&lt;/p&gt;</comment>
                            <comment id="12679641" author="stack" created="Fri, 6 Mar 2009 16:49:48 +0000"  >&lt;p&gt;Yes.  As you say, until we do something better...&lt;/p&gt;</comment>
                            <comment id="12679681" author="jdcryans" created="Fri, 6 Mar 2009 18:26:37 +0000"  >&lt;p&gt;Committed to trunk.&lt;/p&gt;</comment>
                            <comment id="12679704" author="stack" created="Fri, 6 Mar 2009 20:01:40 +0000"  >&lt;p&gt;Resolving. Committed to TRUNK and branch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12401462" name="hbase-1238.patch" size="1206" author="jdcryans" created="Wed, 4 Mar 2009 20:53:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 6 Mar 2009 06:00:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25640</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 41 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hc4v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99228</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>