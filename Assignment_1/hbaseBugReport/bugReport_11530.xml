<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:24:04 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-11530/HBASE-11530.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-11530] RegionStates adds regions to wrong servers</title>
                <link>https://issues.apache.org/jira/browse/HBASE-11530</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;In RegionStates.java, we have (line 332)&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;addToServerHoldings(serverName, hri);&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It should be&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;addToServerHoldings(lastHost, hri);&lt;/p&gt;&lt;/blockquote&gt;</description>
                <environment></environment>
        <key id="12727785">HBASE-11530</key>
            <summary>RegionStates adds regions to wrong servers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jxiang">Jimmy Xiang</assignee>
                                    <reporter username="jxiang">Jimmy Xiang</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 Jul 2014 22:17:06 +0000</created>
                <updated>Sat, 21 Feb 2015 23:30:55 +0000</updated>
                            <resolved>Thu, 17 Jul 2014 16:01:01 +0000</resolved>
                                                    <fixVersion>0.99.0</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="14064256" author="mantonov" created="Wed, 16 Jul 2014 22:27:53 +0000"  >&lt;p&gt;Could you explain a bit on that, just want to make sure I understand? This line corresponds to the case when we move one move region to another one, so I would imagine we need to mark lastHost to be equal to server name, and this server name to be kept in the serverHoldings?&lt;/p&gt;</comment>
                            <comment id="14064270" author="jxiang" created="Wed, 16 Jul 2014 22:39:41 +0000"  >&lt;p&gt;At first, you can check the history of RegionStates.java. Patch &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10350&quot; title=&quot;Master/AM/RegionStates changes to create and assign region replicas&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10350&quot;&gt;&lt;del&gt;HBASE-10350&lt;/del&gt;&lt;/a&gt; changed the logic a little bit. My understanding is that it&apos;s a copy-n-paste error. Originally, we add this region to the serverHoldings of lastHost.&lt;/p&gt;

&lt;p&gt;The reason we use lastHost instead of serverName, is that those regions not assigned have serverName which may be different from lastHost. Here serverName is the server where the region is transitioning, for example, opening; while lastHost is the server the the region is assigned to previously. The purpose here is to make sure the in-mem state is consistent with meta.&lt;/p&gt;</comment>
                            <comment id="14064292" author="hadoopqa" created="Wed, 16 Jul 2014 23:01:41 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12656160/hbase-11530.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12656160/hbase-11530.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12656160&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.io.hfile.TestCacheConfig&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10100//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10100//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10100//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10100//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10100//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10100//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10100//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10100//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10100//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10100//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10100//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10100//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10100//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10100//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10100//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10100//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10100//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10100//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10100//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10100//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10100//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10100//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14064363" author="jxiang" created="Wed, 16 Jul 2014 23:56:44 +0000"  >&lt;p&gt;The test failure is not related.&lt;/p&gt;</comment>
                            <comment id="14064417" author="mantonov" created="Thu, 17 Jul 2014 00:40:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jxiang&quot; class=&quot;user-hover&quot; rel=&quot;jxiang&quot;&gt;Jimmy Xiang&lt;/a&gt; you mean, that if the regions isn&apos;t yet assigned to the new server it&apos;s being transitioned to, serverHoldings must keep the last assignment? I see, thanks for clarification.&lt;/p&gt;</comment>
                            <comment id="14064422" author="mantonov" created="Thu, 17 Jul 2014 00:46:00 +0000"  >&lt;p&gt;Btw, looking at the diff you mentioned, indeed looks like sort of copy-n-paste issue to me (&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=devaraj&quot; class=&quot;user-hover&quot; rel=&quot;devaraj&quot;&gt;Devaraj Das&lt;/a&gt; am I missing something?).&lt;/p&gt;

&lt;p&gt;Patch lgtm.&lt;/p&gt;</comment>
                            <comment id="14064424" author="jxiang" created="Thu, 17 Jul 2014 00:46:31 +0000"  >&lt;p&gt;Yes, that&apos;s right. So that server shutdown handler doesn&apos;t have to scan meta again. &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11525&quot; title=&quot;Region server holding in region states is out of sync with meta&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11525&quot;&gt;&lt;del&gt;HBASE-11525&lt;/del&gt;&lt;/a&gt; is the same idea.&lt;/p&gt;</comment>
                            <comment id="14064437" author="devaraj" created="Thu, 17 Jul 2014 00:55:26 +0000"  >&lt;p&gt;That seems like a copy-paste error indeed. Thanks for fixing this, Jimmy.&lt;/p&gt;</comment>
                            <comment id="14065051" author="jxiang" created="Thu, 17 Jul 2014 16:01:01 +0000"  >&lt;p&gt;Integrated into master and branch 1. Thanks.&lt;/p&gt;</comment>
                            <comment id="14065289" author="hudson" created="Thu, 17 Jul 2014 18:20:20 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-TRUNK #5317 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/5317/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/5317/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11530&quot; title=&quot;RegionStates adds regions to wrong servers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11530&quot;&gt;&lt;del&gt;HBASE-11530&lt;/del&gt;&lt;/a&gt; RegionStates adds regions to wrong servers (jxiang: rev d6c5e5f3749b265bd1ec44bb4683a63e9d058ed7)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/RegionStates.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14065327" author="stack" created="Thu, 17 Jul 2014 18:36:19 +0000"  >&lt;p&gt;The TestCacheConfig is unrelated for sure.  All tests in this class failed with block cache not enabled.  Will keep an eye on it.&lt;/p&gt;</comment>
                            <comment id="14065355" author="hudson" created="Thu, 17 Jul 2014 18:50:23 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.0 #52 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/52/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.0/52/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11530&quot; title=&quot;RegionStates adds regions to wrong servers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11530&quot;&gt;&lt;del&gt;HBASE-11530&lt;/del&gt;&lt;/a&gt; RegionStates adds regions to wrong servers (jxiang: rev 3896210026ade35a671aec56f55001c28923abc4)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/RegionStates.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14330755" author="enis" created="Sat, 21 Feb 2015 23:30:55 +0000"  >&lt;p&gt;Closing this issue after 0.99.0 release. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12656160" name="hbase-11530.patch" size="669" author="jxiang" created="Wed, 16 Jul 2014 22:18:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 16 Jul 2014 22:27:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>405890</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1xujz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>405910</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>