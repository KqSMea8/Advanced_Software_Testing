<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:31:30 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5848/HBASE-5848.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5848] Create table with EMPTY_START_ROW passed as splitKey causes the HMaster to abort</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5848</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;A coworker of mine just had this scenario. It does not make sense the EMPTY_START_ROW as splitKey (since the region with the empty start key is implicit), but it should not cause the HMaster to abort.&lt;br/&gt;
The abort happens because it tries to bulk assign the same region twice and then runs into race conditions with ZK.&lt;/p&gt;

&lt;p&gt;The same would (presumably) happen when two identical split keys are passed, but the client blocks that. The simplest solution here is to also block passed null or EMPTY_START_ROW as split key by the client.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12551951">HBASE-5848</key>
            <summary>Create table with EMPTY_START_ROW passed as splitKey causes the HMaster to abort</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ram_krish">ramkrishna.s.vasudevan</assignee>
                                    <reporter username="lhofhansl">Lars Hofhansl</reporter>
                        <labels>
                    </labels>
                <created>Sat, 21 Apr 2012 00:06:55 +0000</created>
                <updated>Tue, 26 Feb 2013 08:12:47 +0000</updated>
                            <resolved>Wed, 25 Apr 2012 05:07:40 +0000</resolved>
                                                    <fixVersion>0.94.0</fixVersion>
                    <fixVersion>0.95.0</fixVersion>
                                    <component>Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13258740" author="lhofhansl" created="Sat, 21 Apr 2012 02:04:18 +0000"  >&lt;p&gt;Specifically&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
admin.createTable(htd, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[][] {HConstants.EMPTY_START_ROW})
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Will cause the HMaster to abort.&lt;/p&gt;</comment>
                            <comment id="13258779" author="ram_krish" created="Sat, 21 Apr 2012 05:59:00 +0000"  >&lt;p&gt;@Lars&lt;br/&gt;
Oh....we were using these options in one of our scenarios in 0.94. We found no issues, may be this some other case which is causing the problem. Thanks for bringing in this Lars.  &lt;/p&gt;</comment>
                            <comment id="13258784" author="lhofhansl" created="Sat, 21 Apr 2012 06:23:06 +0000"  >&lt;p&gt;@Ram: Are you sure?&lt;br/&gt;
This one liner caused the HMaster to abort in every cluster I tried:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HBaseAdmin(HBaseConfiguration.create()).createTable(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HTableDescriptor(&lt;span class=&quot;code-quote&quot;&gt;&quot;x&quot;&lt;/span&gt;), &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[][] {HConstants.EMPTY_START_ROW});
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13258787" author="ram_krish" created="Sat, 21 Apr 2012 06:40:22 +0000"  >&lt;p&gt;@Lars&lt;br/&gt;
No Lars, what i meant was we were trying different other options while creating tables but may not be this way.  Once i go to office on monday i can tell you what are the other options that we have tried. (including duplicate keys, empty keys, etc.)&lt;/p&gt;</comment>
                            <comment id="13259392" author="lhofhansl" created="Mon, 23 Apr 2012 05:37:01 +0000"  >&lt;p&gt;Interestingly, I cannot reproduce this in a test. MiniCluster seems to be different enough to not have this problem.&lt;/p&gt;</comment>
                            <comment id="13259411" author="ram_krish" created="Mon, 23 Apr 2012 06:26:14 +0000"  >&lt;p&gt;@Lars&lt;br/&gt;
I have analysed this problem.&lt;br/&gt;
First thing is if we pass an empty byte array it is trying to form two regions with empty start and end keys.&lt;br/&gt;
But the reason for it to abort is when it tries to form the two regions it so happens that the region id generated from the System.currenttimeInMillis becomes same and it tries to create the same node twice. And hence we get that aborting from the asyncSetOfflineInZooKeeper&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
CreateUnassignedAsyncCallback cb =
      &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CreateUnassignedAsyncCallback(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.watcher, destination, counter);
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (RegionState state: states) {
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!asyncSetOfflineInZooKeeper(state, cb, state)) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
      }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The region Id is formed from&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; HRegionInfo(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] tableName, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] startKey,
                     &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] endKey, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; split)
  &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IllegalArgumentException {
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;(tableName, startKey, endKey, split, &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.currentTimeMillis());
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So there is always a chance that we get same region id but just because the start key and end key changes we were not encountering this problem.&lt;br/&gt;
I suggest we add a logic explicitly to avoid 2 regions from getting formed and also the main thing is can we take System.nanoTime for the region id.?&lt;/p&gt;

&lt;p&gt;Even i was not able to get this repeatedly in testcases but a real cluster gives you the problem.&lt;/p&gt;</comment>
                            <comment id="13259721" author="ram_krish" created="Mon, 23 Apr 2012 17:02:09 +0000"  >&lt;p&gt;@Lars&lt;br/&gt;
Are you working on this? If not i will take up this?&lt;/p&gt;</comment>
                            <comment id="13259740" author="zhihyu@ebaysf.com" created="Mon, 23 Apr 2012 17:17:36 +0000"  >&lt;p&gt;According to &lt;a href=&quot;http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#nanoTime%28%29:&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#nanoTime%28%29:&lt;/a&gt;&lt;br/&gt;
This method can only be used to measure elapsed time and is not related to any other notion of system or wall-clock time&lt;/p&gt;

&lt;p&gt;So we shouldn&apos;t use nanoTime().&lt;/p&gt;</comment>
                            <comment id="13259829" author="zhihyu@ebaysf.com" created="Mon, 23 Apr 2012 18:47:01 +0000"  >&lt;p&gt;+1 on patch.&lt;/p&gt;</comment>
                            <comment id="13259935" author="stack" created="Mon, 23 Apr 2012 20:46:12 +0000"  >&lt;p&gt;@Ram This is a nit comment for future patches, not for this one.&lt;/p&gt;

&lt;p&gt;I would suggest you avoid changes like below going forward:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-      hRegionInfos = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HRegionInfo[]{
-          &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HRegionInfo(hTableDescriptor.getName(), &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)};
+      hRegionInfos = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HRegionInfo[] { &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HRegionInfo(hTableDescriptor
+          .getName(), &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) };
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The replacement is harder to read w/ its break in the middle of a phrase.&lt;/p&gt;

&lt;p&gt;Patch lgtm.&lt;/p&gt;

&lt;p&gt;Lars, does this fix the issue you saw?&lt;/p&gt;</comment>
                            <comment id="13260016" author="lhofhansl" created="Mon, 23 Apr 2012 22:18:18 +0000"  >&lt;p&gt;Thanks for the patch Ram.&lt;/p&gt;

&lt;p&gt;The problem also occurs with &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
createTable(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HTableDescriptor(&lt;span class=&quot;code-quote&quot;&gt;&quot;x&quot;&lt;/span&gt;), &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[][] {HConstants.EMPTY_START_ROW, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] {1,2,3}});
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I do not think the patch would address that.&lt;/p&gt;</comment>
                            <comment id="13260040" author="lhofhansl" created="Mon, 23 Apr 2012 22:40:09 +0000"  >&lt;p&gt;The client already checks for duplicate keys in splitKeys, we could just check for the empty key as well (no sense passing the empty key to createTable anyway), and throw an error as well.&lt;br/&gt;
Obviously that does not guard against rogue clients and it would be extremely simple to DOS an HBase cluster.&lt;/p&gt;</comment>
                            <comment id="13260184" author="ram_krish" created="Tue, 24 Apr 2012 03:48:41 +0000"  >&lt;p&gt;@Lars&lt;br/&gt;
Yes, i was just checking that part of the issue that you have said.&lt;br/&gt;
I was first thinking not to throw an error if empty key is passed but considering the other case where an empty key is passed along with other keys then ideally that should be the choice. I will update my patch with tat.&lt;/p&gt;</comment>
                            <comment id="13260229" author="ram_krish" created="Tue, 24 Apr 2012 05:22:23 +0000"  >&lt;p&gt;Latest patch tries to avoid empty split keys from the HBaseAdmin side itself.&lt;/p&gt;</comment>
                            <comment id="13260235" author="lhofhansl" created="Tue, 24 Apr 2012 05:32:01 +0000"  >&lt;p&gt;Should also check for null (which is interpreted as empty key at the server).&lt;br/&gt;
+1 otherwise.&lt;/p&gt;</comment>
                            <comment id="13260242" author="ram_krish" created="Tue, 24 Apr 2012 05:48:46 +0000"  >&lt;p&gt;@Lars&lt;br/&gt;
Passing null is same as not passing any splitkey in which one region is created with empty start and end row.  I think that should be the expected one right? Please correct me if I got you wrong. Thanks for your review.&lt;/p&gt;</comment>
                            <comment id="13260254" author="lhofhansl" created="Tue, 24 Apr 2012 05:59:29 +0000"  >&lt;p&gt;@Ram: What I meant was doing this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
createTable(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HTableDescriptor(&lt;span class=&quot;code-quote&quot;&gt;&quot;x&quot;&lt;/span&gt;), &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[][] {&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;});
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;splitKeys is not null, but one of the contained keys is.&lt;/p&gt;</comment>
                            <comment id="13260257" author="ram_krish" created="Tue, 24 Apr 2012 06:03:15 +0000"  >&lt;p&gt;@Lars&lt;br/&gt;
I tried that.  It fails here throwing NPE in HBaseAdmin.createTableAsync&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Arrays.sort(splitKeys, Bytes.BYTES_COMPARATOR);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Then there should be a prevalidator to check if the splitkeys has a null element in it.&lt;br/&gt;
Ok i will add that validation also. &lt;/p&gt;</comment>
                            <comment id="13260269" author="lhofhansl" created="Tue, 24 Apr 2012 06:06:19 +0000"  >&lt;p&gt;@Ram: That is probably overkill, means another loop over the splitKeys before they are sorted. As long as it fails on the client (even with an NPE) and does not cause the master to abort it&apos;s fine I think.&lt;/p&gt;

&lt;p&gt;If you like to add the extra check now, that fine too.&lt;/p&gt;

&lt;p&gt;+1 in either case. Going to bed now, feel free to commit &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13260667" author="ram_krish" created="Tue, 24 Apr 2012 15:39:25 +0000"  >&lt;p&gt;@Lars&lt;br/&gt;
I will commit the version as it is.&lt;/p&gt;</comment>
                            <comment id="13260681" author="ram_krish" created="Tue, 24 Apr 2012 16:19:01 +0000"  >&lt;p&gt;Patch for 0.94 similar to trunk patch.&lt;/p&gt;</comment>
                            <comment id="13260683" author="ram_krish" created="Tue, 24 Apr 2012 16:21:30 +0000"  >&lt;p&gt;Committed to trunk and 0.94.&lt;br/&gt;
Thanks for the review Ted, Stack and Lars.&lt;/p&gt;</comment>
                            <comment id="13260719" author="hudson" created="Tue, 24 Apr 2012 17:18:03 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #143 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/143/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/143/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5848&quot; title=&quot;Create table with EMPTY_START_ROW passed as splitKey causes the HMaster to abort&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5848&quot;&gt;&lt;del&gt;HBASE-5848&lt;/del&gt;&lt;/a&gt; Create table with EMPTY_START_ROW passed as splitKey causes the HMaster to abort (Ram) (Revision 1329827)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
ramkrishna : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/client/HBaseAdmin.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13260729" author="ramkrishna.vasudevan@huawei.com" created="Tue, 24 Apr 2012 17:29:33 +0000"  >&lt;p&gt;The reason is because of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5848&quot; title=&quot;Create table with EMPTY_START_ROW passed as splitKey causes the HMaster to abort&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5848&quot;&gt;&lt;del&gt;HBASE-5848&lt;/del&gt;&lt;/a&gt;.  I forgot to do the submit patch option, so the hadoop QA did not run.&lt;br/&gt;
I will rectify the failures . Sorry for breaking the build.&lt;/p&gt;

&lt;p&gt;Regards&lt;br/&gt;
Ram&lt;/p&gt;</comment>
                            <comment id="13260737" author="ram_krish" created="Tue, 24 Apr 2012 17:39:59 +0000"  >&lt;p&gt;Addendum to pass the failed testcase &lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/143/testReport/junit/org.apache.hadoop.hbase/TestRegionRebalancing/testRebalanceOnRegionServerNumberChange/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/143/testReport/junit/org.apache.hadoop.hbase/TestRegionRebalancing/testRebalanceOnRegionServerNumberChange/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13260784" author="hadoopqa" created="Tue, 24 Apr 2012 18:24:21 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12524013/HBASE-5848_addendum.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12524013/HBASE-5848_addendum.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 5 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.mapreduce.TestMultithreadedTableMapper&lt;br/&gt;
                  org.apache.hadoop.hbase.master.TestMasterTransitions&lt;br/&gt;
                  org.apache.hadoop.hbase.coprocessor.TestRegionServerCoprocessorExceptionWithRemove&lt;br/&gt;
                  org.apache.hadoop.hbase.TestFullLogReconstruction&lt;br/&gt;
                  org.apache.hadoop.hbase.coprocessor.TestRegionServerCoprocessorExceptionWithAbort&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestFromClientSide&lt;br/&gt;
                  org.apache.hadoop.hbase.replication.TestReplication&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestTableInputFormatScan&lt;br/&gt;
                  org.apache.hadoop.hbase.mapred.TestTableMapReduce&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestMultiParallel&lt;br/&gt;
                  org.apache.hadoop.hbase.master.TestZKBasedOpenCloseRegion&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestTableMapReduce&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1628//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1628//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1628//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1628//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1628//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1628//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13260787" author="hudson" created="Tue, 24 Apr 2012 18:25:28 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2807 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2807/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2807/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5848&quot; title=&quot;Create table with EMPTY_START_ROW passed as splitKey causes the HMaster to abort&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5848&quot;&gt;&lt;del&gt;HBASE-5848&lt;/del&gt;&lt;/a&gt; Create table with EMPTY_START_ROW passed as splitKey causes the HMaster to abort (Ram) (Revision 1329819)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
ramkrishna : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HBaseAdmin.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13260809" author="zhihyu@ebaysf.com" created="Tue, 24 Apr 2012 18:39:06 +0000"  >&lt;p&gt;TestFullLogReconstruction#testReconstruction gave the following based on addendum:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
012-04-24 11:35:48,409 WARN  [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-189] client.HConnectionManager$HConnectionImplementation(1020): Encountered problems when prefetch META table:
org.apache.hadoop.hbase.TableNotFoundException: Cannot find row in .META. &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; table: tabletest, row=tabletest,aaa,99999999999999
  at org.apache.hadoop.hbase.client.MetaScanner.metaScan(MetaScanner.java:158)
  at org.apache.hadoop.hbase.client.MetaScanner.access$000(MetaScanner.java:52)
  at org.apache.hadoop.hbase.client.MetaScanner$1.connect(MetaScanner.java:130)
  at org.apache.hadoop.hbase.client.MetaScanner$1.connect(MetaScanner.java:127)
  at org.apache.hadoop.hbase.client.HConnectionManager.execute(HConnectionManager.java:385)
  at org.apache.hadoop.hbase.client.MetaScanner.metaScan(MetaScanner.java:127)
  at org.apache.hadoop.hbase.client.MetaScanner.metaScan(MetaScanner.java:103)
  at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.prefetchRegionCache(HConnectionManager.java:1017)
  at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegionInMeta(HConnectionManager.java:1071)
  at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegion(HConnectionManager.java:959)
  at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.processBatchCallback(HConnectionManager.java:1849)
  at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.processBatch(HConnectionManager.java:1733)
  at org.apache.hadoop.hbase.client.HTable.flushCommits(HTable.java:1020)
  at org.apache.hadoop.hbase.client.HTable.doPut(HTable.java:832)
  at org.apache.hadoop.hbase.client.HTable.put(HTable.java:807)
  at org.apache.hadoop.hbase.HBaseTestingUtility.loadTable(HBaseTestingUtility.java:992)
  at org.apache.hadoop.hbase.TestFullLogReconstruction.testReconstruction(TestFullLogReconstruction.java:102)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Will try to come up with new addendum.&lt;/p&gt;</comment>
                            <comment id="13260817" author="zhihyu@ebaysf.com" created="Tue, 24 Apr 2012 18:50:53 +0000"  >&lt;p&gt;Addendum v2 passes the following tests:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  889  mt -Dtest=TestFullLogReconstruction#testReconstruction
  890  mt -Dtest=TestRegionRebalancing#testRebalanceOnRegionServerNumberChange
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13260861" author="zhihyu@ebaysf.com" created="Tue, 24 Apr 2012 19:25:21 +0000"  >&lt;p&gt;Addendum v2 didn&apos;t address the root cause of this issue.&lt;/p&gt;

&lt;p&gt;Addendum v3 treats NodeExistsException specially in asyncSetOfflineInZooKeeper().&lt;/p&gt;</comment>
                            <comment id="13260985" author="hadoopqa" created="Tue, 24 Apr 2012 20:32:55 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12524036/5848-addendum-v3.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12524036/5848-addendum-v3.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 5 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestAdmin&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1631//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1631//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1631//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1631//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1631//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1631//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13261002" author="lhofhansl" created="Tue, 24 Apr 2012 20:50:10 +0000"  >&lt;p&gt;As I said above, I can kill the HMaster by issuing.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
createTable(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HTableDescriptor(&lt;span class=&quot;code-quote&quot;&gt;&quot;x&quot;&lt;/span&gt;), &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[][] {HConstants.EMPTY_START_ROW, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] {1,2,3}});
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So it happens also when HConstants.EMPTY_START_ROW is passed along with other split keys.&lt;/p&gt;</comment>
                            <comment id="13261068" author="zhihyu@ebaysf.com" created="Tue, 24 Apr 2012 22:02:41 +0000"  >&lt;p&gt;I modified testCreateTableWithEmptyRowInTheSplitKeys using the above pattern and master didn&apos;t crash (with addendum):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Index: src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java
===================================================================
--- src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java	(revision 1330037)
+++ src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java	(working copy)
@@ -733,15 +733,13 @@
   @Test
   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testCreateTableWithEmptyRowInTheSplitKeys() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException{
     &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] tableName = Bytes.toBytes(&lt;span class=&quot;code-quote&quot;&gt;&quot;testCreateTableWithEmptyRowInTheSplitKeys&quot;&lt;/span&gt;);
-    &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[][] splitKeys = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[3][];
-    splitKeys[0] = &lt;span class=&quot;code-quote&quot;&gt;&quot;region1&quot;&lt;/span&gt;.getBytes();
-    splitKeys[1] = HConstants.EMPTY_BYTE_ARRAY;
-    splitKeys[2] = &lt;span class=&quot;code-quote&quot;&gt;&quot;region2&quot;&lt;/span&gt;.getBytes();
+    &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[][] splitKeys = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[2][];
+    splitKeys[0] = HConstants.EMPTY_BYTE_ARRAY;
+    splitKeys[1] = &lt;span class=&quot;code-quote&quot;&gt;&quot;region2&quot;&lt;/span&gt;.getBytes();
     HTableDescriptor desc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HTableDescriptor(tableName);
     desc.addFamily(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HColumnDescriptor(&lt;span class=&quot;code-quote&quot;&gt;&quot;col&quot;&lt;/span&gt;));
     &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
       admin.createTable(desc, splitKeys);
-      fail(&lt;span class=&quot;code-quote&quot;&gt;&quot;Test &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; should fail as empty split key is passed.&quot;&lt;/span&gt;);
     } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IllegalArgumentException e) {
     }
   }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13261083" author="zhihyu@ebaysf.com" created="Tue, 24 Apr 2012 22:16:56 +0000"  >&lt;p&gt;Addendum v4 passes TestAdmin&lt;/p&gt;

&lt;p&gt;testCreateTableWithEmptyRowInTheSplitKeys is removed since IllegalArgumentException wouldn&apos;t be thrown.&lt;/p&gt;</comment>
                            <comment id="13261093" author="lhofhansl" created="Tue, 24 Apr 2012 22:29:12 +0000"  >&lt;p&gt;The problem is that HBaseTestUtil.KEYS is used to two different things in the Tests: in HBaseAdmin.createTable* and in HBaseTestUtility.createMultiRegionsInMeta.&lt;br/&gt;
Ideally createMultiRegionsInMeta would be similar to HMaster.getHRegionInfos, but it is not. At this point it is too risky to change createMultiRegionsInMeta and createMultiRegions, so we should have to versions of HBaseTestUtil.KEYS - one that has the EMPTY_ROW for the test methods, and one that doesn&apos;t for the call to HMaster.createTable.&lt;/p&gt;</comment>
                            <comment id="13261108" author="lhofhansl" created="Tue, 24 Apr 2012 22:50:10 +0000"  >&lt;p&gt;@Ted: The minicluster (or timing in tests) is sufficiently different so that we cannot write a test that crashes the master (see my and Ram&apos;s comment above).&lt;/p&gt;</comment>
                            <comment id="13261120" author="hadoopqa" created="Tue, 24 Apr 2012 23:08:40 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12524069/5848-addendum-v4.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12524069/5848-addendum-v4.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 5 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.coprocessor.TestRegionServerCoprocessorExceptionWithAbort&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1632//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1632//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1632//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1632//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1632//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1632//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13261143" author="lhofhansl" created="Tue, 24 Apr 2012 23:36:01 +0000"  >&lt;p&gt;New addendum for HadoopQA. Introduces different KEYS and TEST_KEYS in HBaseTestingUtility.&lt;/p&gt;</comment>
                            <comment id="13261153" author="zhihyu@ebaysf.com" created="Tue, 24 Apr 2012 23:54:00 +0000"  >&lt;p&gt;What about the root cause Ram identified: &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5848?focusedCommentId=13259411&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13259411&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-5848?focusedCommentId=13259411&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13259411&lt;/a&gt; ?&lt;/p&gt;

&lt;p&gt;A hacker can call master.createTable(desc, splitKeys) directly, bypassing HBaseAdmin. Right ?&lt;/p&gt;</comment>
                            <comment id="13261174" author="lhofhansl" created="Wed, 25 Apr 2012 00:31:25 +0000"  >&lt;p&gt;Yes, that&apos;s also what I said above &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
There&apos;re more DOS attacks against HBase (like passing a doctored RPC with a size of 4GB, etc), though.&lt;/p&gt;

&lt;p&gt;+1 on fixing the root cause too, of course.&lt;/p&gt;

&lt;p&gt;Lemme do a combined patch quickly... &lt;/p&gt;</comment>
                            <comment id="13261176" author="hadoopqa" created="Wed, 25 Apr 2012 00:34:14 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12524082/5848-addendum-v5.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12524082/5848-addendum-v5.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 12 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 5 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.coprocessor.TestRowProcessorEndpoint&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1634//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1634//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1634//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1634//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1634//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1634//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13261178" author="lhofhansl" created="Wed, 25 Apr 2012 00:35:47 +0000"  >&lt;p&gt;How about this one.&lt;br/&gt;
Addresses the root cause and uses the right set of split keys when used in TestRegionRebalancing.&lt;/p&gt;</comment>
                            <comment id="13261182" author="zhihyu@ebaysf.com" created="Wed, 25 Apr 2012 00:39:57 +0000"  >&lt;p&gt;Addendum v6 looks good.&lt;br/&gt;
BTW this is the highest numbered addendum I have ever worked with &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13261187" author="lhofhansl" created="Wed, 25 Apr 2012 00:51:35 +0000"  >&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Yes, was thinking that too.&lt;/p&gt;</comment>
                            <comment id="13261194" author="lhofhansl" created="Wed, 25 Apr 2012 01:02:19 +0000"  >&lt;p&gt;Will wait for HadoopQA, and commit if all is good.&lt;/p&gt;</comment>
                            <comment id="13261225" author="hudson" created="Wed, 25 Apr 2012 01:50:43 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #20 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/20/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/20/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5848&quot; title=&quot;Create table with EMPTY_START_ROW passed as splitKey causes the HMaster to abort&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5848&quot;&gt;&lt;del&gt;HBASE-5848&lt;/del&gt;&lt;/a&gt; Create table with EMPTY_START_ROW passed as splitKey causes the HMaster to abort (Ram) (Revision 1329827)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
ramkrishna : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/client/HBaseAdmin.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13261274" author="ram_krish" created="Wed, 25 Apr 2012 03:51:56 +0000"  >&lt;p&gt;Sorry guys... &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
I was the reason for this trouble.  I should have been very careful before doing this.&lt;/p&gt;</comment>
                            <comment id="13261278" author="lhofhansl" created="Wed, 25 Apr 2012 03:57:01 +0000"  >&lt;p&gt;@Ram: No worries. I looked at the patch too. This is part of doing development. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13261282" author="lhofhansl" created="Wed, 25 Apr 2012 04:04:04 +0000"  >&lt;p&gt;Arrghhh... Off by one. Now fixed in TestRegionBalancing&lt;/p&gt;</comment>
                            <comment id="13261287" author="lhofhansl" created="Wed, 25 Apr 2012 04:18:42 +0000"  >&lt;p&gt;Trying again for HadoopQA&lt;/p&gt;</comment>
                            <comment id="13261298" author="hadoopqa" created="Wed, 25 Apr 2012 04:57:23 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12524107/5848-addendum-v7.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12524107/5848-addendum-v7.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 5 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1640//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1640//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1640//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1640//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1640//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1640//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13261299" author="lhofhansl" created="Wed, 25 Apr 2012 05:07:41 +0000"  >&lt;p&gt;Addendum committed to 0.94 and 0.96.&lt;/p&gt;</comment>
                            <comment id="13261304" author="hadoopqa" created="Wed, 25 Apr 2012 05:09:50 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12524110/5848-addendum-v7.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12524110/5848-addendum-v7.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 5 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestFromClientSide&lt;br/&gt;
                  org.apache.hadoop.hbase.replication.TestReplication&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestSplitTransactionOnCluster&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1641//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1641//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1641//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1641//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1641//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1641//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13261306" author="ram_krish" created="Wed, 25 Apr 2012 05:14:30 +0000"  >&lt;p&gt;@Lars and @Ted&lt;br/&gt;
Thank you very much.&lt;/p&gt;</comment>
                            <comment id="13261332" author="hudson" created="Wed, 25 Apr 2012 06:16:35 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2810 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2810/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2810/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5848&quot; title=&quot;Create table with EMPTY_START_ROW passed as splitKey causes the HMaster to abort&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5848&quot;&gt;&lt;del&gt;HBASE-5848&lt;/del&gt;&lt;/a&gt; Addendum (Revision 1330105)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/mapreduce/MapreduceTestingShim.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13261340" author="hudson" created="Wed, 25 Apr 2012 06:20:43 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-security #183 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-security/183/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-security/183/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5848&quot; title=&quot;Create table with EMPTY_START_ROW passed as splitKey causes the HMaster to abort&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5848&quot;&gt;&lt;del&gt;HBASE-5848&lt;/del&gt;&lt;/a&gt; Addendum (Revision 1330105)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5848&quot; title=&quot;Create table with EMPTY_START_ROW passed as splitKey causes the HMaster to abort&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5848&quot;&gt;&lt;del&gt;HBASE-5848&lt;/del&gt;&lt;/a&gt; Create table with EMPTY_START_ROW passed as splitKey causes the HMaster to abort (Ram) (Revision 1329819)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/mapreduce/MapreduceTestingShim.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;ramkrishna : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/HBaseAdmin.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13261342" author="hudson" created="Wed, 25 Apr 2012 06:27:10 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #147 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/147/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/147/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5848&quot; title=&quot;Create table with EMPTY_START_ROW passed as splitKey causes the HMaster to abort&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5848&quot;&gt;&lt;del&gt;HBASE-5848&lt;/del&gt;&lt;/a&gt; Addendum (Revision 1330106)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/TestRegionRebalancing.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13261648" author="zhihyu@ebaysf.com" created="Wed, 25 Apr 2012 13:53:30 +0000"  >&lt;p&gt;Looks like the addendum wasn&apos;t applied to trunk.&lt;/p&gt;</comment>
                            <comment id="13261721" author="lhofhansl" created="Wed, 25 Apr 2012 15:36:40 +0000"  >&lt;p&gt;Yep, I committed the wrong the patch.&lt;br/&gt;
Reverted over in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5870&quot; title=&quot;Hadoop 23 compilation broken because JobTrackerRunner#getJobTracker() method is not found&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5870&quot;&gt;&lt;del&gt;HBASE-5870&lt;/del&gt;&lt;/a&gt;, and committed the right patch. Sorry about that.&lt;/p&gt;</comment>
                            <comment id="13261724" author="lhofhansl" created="Wed, 25 Apr 2012 15:39:20 +0000"  >&lt;p&gt;Also double checked 0.94. All&apos;s good now.&lt;/p&gt;</comment>
                            <comment id="13261796" author="hudson" created="Wed, 25 Apr 2012 16:47:47 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2812 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2812/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2812/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5848&quot; title=&quot;Create table with EMPTY_START_ROW passed as splitKey causes the HMaster to abort&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5848&quot;&gt;&lt;del&gt;HBASE-5848&lt;/del&gt;&lt;/a&gt; Addendum, try 2 (Revision 1330349)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/TestRegionRebalancing.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13261897" author="hudson" created="Wed, 25 Apr 2012 18:24:23 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #21 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/21/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/21/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5848&quot; title=&quot;Create table with EMPTY_START_ROW passed as splitKey causes the HMaster to abort&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5848&quot;&gt;&lt;del&gt;HBASE-5848&lt;/del&gt;&lt;/a&gt; Addendum (Revision 1330106)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/TestRegionRebalancing.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13262277" author="hudson" created="Thu, 26 Apr 2012 00:21:57 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-security #184 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-security/184/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-security/184/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5848&quot; title=&quot;Create table with EMPTY_START_ROW passed as splitKey causes the HMaster to abort&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5848&quot;&gt;&lt;del&gt;HBASE-5848&lt;/del&gt;&lt;/a&gt; Addendum, try 2 (Revision 1330349)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/TestRegionRebalancing.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12524027" name="5848-addendum-v2.txt" size="1169" author="zhihyu@ebaysf.com" created="Tue, 24 Apr 2012 18:50:52 +0000"/>
                            <attachment id="12524036" name="5848-addendum-v3.txt" size="2018" author="zhihyu@ebaysf.com" created="Tue, 24 Apr 2012 19:25:21 +0000"/>
                            <attachment id="12524069" name="5848-addendum-v4.txt" size="3134" author="zhihyu@ebaysf.com" created="Tue, 24 Apr 2012 22:16:56 +0000"/>
                            <attachment id="12524082" name="5848-addendum-v5.txt" size="4285" author="lhofhansl" created="Tue, 24 Apr 2012 23:36:00 +0000"/>
                            <attachment id="12524091" name="5848-addendum-v6.txt" size="1881" author="lhofhansl" created="Wed, 25 Apr 2012 00:35:47 +0000"/>
                            <attachment id="12524110" name="5848-addendum-v7.txt" size="2232" author="lhofhansl" created="Wed, 25 Apr 2012 04:18:41 +0000"/>
                            <attachment id="12524107" name="5848-addendum-v7.txt" size="2232" author="lhofhansl" created="Wed, 25 Apr 2012 04:04:04 +0000"/>
                            <attachment id="12523924" name="HBASE-5848.patch" size="4353" author="ram_krish" created="Tue, 24 Apr 2012 05:21:01 +0000"/>
                            <attachment id="12523837" name="HBASE-5848.patch" size="2032" author="ram_krish" created="Mon, 23 Apr 2012 18:38:34 +0000"/>
                            <attachment id="12524003" name="HBASE-5848_0.94.patch" size="4387" author="ram_krish" created="Tue, 24 Apr 2012 16:19:01 +0000"/>
                            <attachment id="12524013" name="HBASE-5848_addendum.patch" size="677" author="ram_krish" created="Tue, 24 Apr 2012 17:39:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 21 Apr 2012 05:59:00 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>236763</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 34 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i068rb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34350</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>