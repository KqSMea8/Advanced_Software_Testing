<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:01:32 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-9117/HBASE-9117.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-9117] Remove HTablePool and all HConnection pooling related APIs</title>
                <link>https://issues.apache.org/jira/browse/HBASE-9117</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The recommended way is now:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Create an HConnection: HConnectionManager.createConnection(...)&lt;/li&gt;
	&lt;li&gt;Create a light HTable: HConnection.getTable(...)&lt;/li&gt;
	&lt;li&gt;table.close()&lt;/li&gt;
	&lt;li&gt;connection.close()&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;All other API and pooling will be removed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12661440">HBASE-9117</key>
            <summary>Remove HTablePool and all HConnection pooling related APIs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ndimiduk">Nick Dimiduk</assignee>
                                    <reporter username="lhofhansl">Lars Hofhansl</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Aug 2013 17:49:30 +0000</created>
                <updated>Mon, 16 Mar 2015 20:28:46 +0000</updated>
                            <resolved>Wed, 26 Nov 2014 18:48:46 +0000</resolved>
                                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>0.99.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>14</watches>
                                                                                                            <comments>
                            <comment id="13727872" author="lhofhansl" created="Fri, 2 Aug 2013 17:49:58 +0000"  >&lt;p&gt;More info in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6580&quot; title=&quot;Deprecate HTablePool in favor of HConnection.getTable(...)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6580&quot;&gt;&lt;del&gt;HBASE-6580&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13817040" author="ndimiduk" created="Fri, 8 Nov 2013 06:25:36 +0000"  >&lt;p&gt;Taking a crack at deleting some code. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt;, please pick apart my decisions regarding what to delete.&lt;/p&gt;</comment>
                            <comment id="13817172" author="hadoopqa" created="Fri, 8 Nov 2013 10:49:59 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12612789/HBASE-9117.00.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12612789/HBASE-9117.00.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 90 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn site goal to fail.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 1 zombie test(s): 	at org.apache.hadoop.hbase.client.TestHBaseAdminNoCluster.testMasterMonitorCollableRetries(TestHBaseAdminNoCluster.java:80)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7793//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7793//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7793//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7793//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7793//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7793//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7793//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7793//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7793//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7793//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7793//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7793//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7793//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7793//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7793//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7793//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7793//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7793//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7793//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7793//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7793//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7793//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13817405" author="stack" created="Fri, 8 Nov 2013 16:24:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nkeywal&quot; class=&quot;user-hover&quot; rel=&quot;nkeywal&quot;&gt;Nicolas Liochon&lt;/a&gt; Do the createConnections have a corresponding close?&lt;/p&gt;

&lt;p&gt;I suppose this a pretty radical change making it so every time we create a scanner, even if a short scanner, we make a new connection; that is more heavyweight? &lt;/p&gt;

&lt;p&gt;I love the cleanup.&lt;/p&gt;

&lt;p&gt;We going to break clients?  I suppose we&apos;ve deprecated for a long time now AND what we have is really messy to make sense of.&lt;/p&gt;</comment>
                            <comment id="13817599" author="lhofhansl" created="Fri, 8 Nov 2013 19:25:53 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt;, I&apos;ll take a look (probably tomorrow, busy with meeting all day today).&lt;/p&gt;</comment>
                            <comment id="13820270" author="nkeywal" created="Tue, 12 Nov 2013 17:25:17 +0000"  >&lt;blockquote&gt;&lt;p&gt;the createConnections have a corresponding close?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes. Creating/Closing a connection is supposed to be expensive. It holds a connection to ZooKeeper, the region cache, this kind of stuff. I will need to look at the patch in details, but I&apos;m not sure this part have been removed.&lt;/p&gt;</comment>
                            <comment id="13824335" author="ndimiduk" created="Sat, 16 Nov 2013 02:13:48 +0000"  >&lt;p&gt;Rebased onto this week&apos;s activities. Conflicts were primarily around the nonces patch but nothing major. Going back through the tests.&lt;/p&gt;</comment>
                            <comment id="13824393" author="hadoopqa" created="Sat, 16 Nov 2013 05:03:28 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12614187/HBASE-9117.01.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12614187/HBASE-9117.01.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 90 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 9 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn site goal to fail.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 1 zombie test(s): 	at org.apache.hadoop.hbase.client.TestHBaseAdminNoCluster.testMasterMonitorCollableRetries(TestHBaseAdminNoCluster.java:80)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7895//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7895//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7895//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7895//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7895//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7895//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7895//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7895//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7895//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7895//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7895//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7895//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7895//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7895//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7895//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7895//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7895//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7895//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7895//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7895//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7895//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7895//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13846624" author="ndimiduk" created="Thu, 12 Dec 2013 19:20:43 +0000"  >&lt;p&gt;Backburnered but not forgotten. I&apos;ve rebased onto trunk and fixed a handful of hanging tests. I think there&apos;s about four remaining to fix. Notable change here over the last patch are changes to HBaseTestingUtility and the introduction of HConnectionImplForTests. Let me know if you can think of a better way to handle this for the test harness. Once I have tests passing I&apos;ll have another look at some of the short scan performance implications the change addresses.&lt;/p&gt;</comment>
                            <comment id="13846629" author="ndimiduk" created="Thu, 12 Dec 2013 19:24:10 +0000"  >&lt;p&gt;Moved out of 0.98 for now. Once the patch stabilizes, we can work how what changes we want on which branches.&lt;/p&gt;</comment>
                            <comment id="13846683" author="hadoopqa" created="Thu, 12 Dec 2013 20:07:19 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12618457/HBASE-9117.02.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12618457/HBASE-9117.02.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 104 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 hadoop1.0&lt;/font&gt;.  The patch failed to compile against the hadoop 1.0 profile.&lt;br/&gt;
    Here is snippet of errors:&lt;/p&gt;
    &lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.5.1:compile (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-compile) on project hbase-common: Compilation failure: Compilation failure:
[ERROR] /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/trunk/hbase-common/src/main/java/org/apache/hadoop/hbase/util/Bytes.java:[51,15] sun.misc.Unsafe is Sun proprietary API and may be removed in a &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; release
[ERROR] /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/trunk/hbase-common/src/main/java/org/apache/hadoop/hbase/util/ReflectionUtils.java:[23,20] &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; java.nio.file does not exist
[ERROR] /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/trunk/hbase-common/src/main/java/org/apache/hadoop/hbase/util/Bytes.java:[1110,19] sun.misc.Unsafe is Sun proprietary API and may be removed in a &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; release
[ERROR] /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/trunk/hbase-common/src/main/java/org/apache/hadoop/hbase/util/Bytes.java:[1116,21] sun.misc.Unsafe is Sun proprietary API and may be removed in a &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; release
[ERROR] /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/trunk/hbase-common/src/main/java/org/apache/hadoop/hbase/util/Bytes.java:[1121,28] sun.misc.Unsafe is Sun proprietary API and may be removed in a &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; release
--
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.5.1:compile (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-compile) on project hbase-common: Compilation failure
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:213)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
	at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
	at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
--
Caused by: org.apache.maven.plugin.CompilationFailureException: Compilation failure
	at org.apache.maven.plugin.AbstractCompilerMojo.execute(AbstractCompilerMojo.java:729)
	at org.apache.maven.plugin.CompilerMojo.execute(CompilerMojo.java:128)
	at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
	... 19 more&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8143//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8143//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13862788" author="ndimiduk" created="Mon, 6 Jan 2014 06:19:44 +0000"  >&lt;p&gt;Rebased to trunk. Fixed a handful of hanging tests. Not sure what was up with the hadoop-1.0 profile build, works fine locally.&lt;/p&gt;

&lt;p&gt;I&apos;d like to start a conversation about deprecating the HTable(Configuration) constructors in favor of the externally managed HConnection constructors. IMHO, in the absence of thorough documentation, the former provide too much rope.&lt;/p&gt;</comment>
                            <comment id="13862791" author="hadoopqa" created="Mon, 6 Jan 2014 06:23:29 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12621562/HBASE-9117.03.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12621562/HBASE-9117.03.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12621562&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 120 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 hadoop1.0&lt;/font&gt;.  The patch failed to compile against the hadoop 1.0 profile.&lt;br/&gt;
    Here is snippet of errors:&lt;/p&gt;
    &lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.5.1:compile (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-compile) on project hbase-common: Compilation failure: Compilation failure:
[ERROR] /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/trunk/hbase-common/src/main/java/org/apache/hadoop/hbase/util/Bytes.java:[51,15] sun.misc.Unsafe is Sun proprietary API and may be removed in a &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; release
[ERROR] /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/trunk/hbase-common/src/main/java/org/apache/hadoop/hbase/util/ReflectionUtils.java:[23,20] &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; java.nio.file does not exist
[ERROR] /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/trunk/hbase-common/src/main/java/org/apache/hadoop/hbase/util/Bytes.java:[1110,19] sun.misc.Unsafe is Sun proprietary API and may be removed in a &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; release
[ERROR] /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/trunk/hbase-common/src/main/java/org/apache/hadoop/hbase/util/Bytes.java:[1116,21] sun.misc.Unsafe is Sun proprietary API and may be removed in a &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; release
[ERROR] /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/trunk/hbase-common/src/main/java/org/apache/hadoop/hbase/util/Bytes.java:[1121,28] sun.misc.Unsafe is Sun proprietary API and may be removed in a &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; release
--
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.5.1:compile (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-compile) on project hbase-common: Compilation failure
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:213)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
	at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
	at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
--
Caused by: org.apache.maven.plugin.CompilationFailureException: Compilation failure
	at org.apache.maven.plugin.AbstractCompilerMojo.execute(AbstractCompilerMojo.java:729)
	at org.apache.maven.plugin.CompilerMojo.execute(CompilerMojo.java:128)
	at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
	... 19 more&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8345//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8345//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13862800" author="ndimiduk" created="Mon, 6 Jan 2014 06:33:44 +0000"  >&lt;p&gt;I haven&apos;t touched Bytes.java in this patch... I think it&apos;s not me, Jenkins; it&apos;s you. Would one of you fine karmic Jenkins fellows (&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yuzhihong%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;yuzhihong@gmail.com&quot;&gt;Ted Yu&lt;/a&gt;) mind providing some insight into the state of this precommit build? This &quot;java not found&quot; business doesn&apos;t look healthy.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[PreCommit-HBASE-Build] $ /bin/bash /tmp/hudson5672971179045787159.sh
asf002.sp2.ygridcore.net
Linux asf002.sp2.ygridcore.net 2.6.32-33-server #71-Ubuntu SMP Wed Jul 20 17:42:25 UTC 2011 x86_64 GNU/Linux
/tmp/hudson5672971179045787159.sh: line 6: java: command not found
/home/hudson/tools/java/latest1.7
/tmp/hudson5672971179045787159.sh: line 8: /home/hudson/tools/java/latest1.7/bin/java: No such file or directory
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13863225" author="yuzhihong@gmail.com" created="Mon, 6 Jan 2014 18:47:14 +0000"  >&lt;p&gt;@Nick:&lt;br/&gt;
This was the real error compiling against hadoop 1.0 :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[ERROR] /Users/tyu/trunk/hbase-common/src/main/java/org/apache/hadoop/hbase/util/ReflectionUtils.java:[23,20] &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; java.nio.file does not exist
[INFO] 1 error
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13863272" author="ndimiduk" created="Mon, 6 Jan 2014 19:15:33 +0000"  >&lt;p&gt;Looks like a Java7 API. Let me correct the patch. Thanks for the pointer, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yuzhihong%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;yuzhihong@gmail.com&quot;&gt;Ted Yu&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13863327" author="ndimiduk" created="Mon, 6 Jan 2014 19:47:37 +0000"  >&lt;p&gt;Here&apos;s an updated patch that compiles on Java6.&lt;/p&gt;</comment>
                            <comment id="13863354" author="apurtell" created="Mon, 6 Jan 2014 20:14:20 +0000"  >&lt;p&gt;Why the hell are some precommit builds are apparently using Java 7 while others are using Java 6?&lt;/p&gt;</comment>
                            <comment id="13863456" author="hadoopqa" created="Mon, 6 Jan 2014 21:36:41 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12621655/HBASE-9117.04.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12621655/HBASE-9117.04.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12621655&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 120 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.1&lt;/font&gt;.  The patch compiles against the hadoop 1.1 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 release audit&lt;/font&gt;.  The applied patch generated 4 release audit warnings (more than the trunk&apos;s current 0 warnings).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +    // HBaseAdmin only waits for regions to appear in hbase:meta we should wait until they are assigned&lt;br/&gt;
+    LOG.warn(&quot;close() called on HConnection instance returned from HBaseTestingUtility.getConnection()&quot;);&lt;br/&gt;
+  public static THBaseService.Iface newInstance(Configuration conf, ThriftMetrics metrics) throws IOException {&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn site goal to fail.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.security.visibility.TestVisibilityLabelsWithACL&lt;br/&gt;
                  org.apache.hadoop.hbase.security.access.TestTablePermissions&lt;br/&gt;
                  org.apache.hadoop.hbase.TestZooKeeper&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestMultiParallel&lt;br/&gt;
                  org.apache.hadoop.hbase.security.access.TestAccessControlFilter&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestHCM&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestFromClientSide&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestFromClientSideWithCoprocessor&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestEndToEndSplitTransaction&lt;br/&gt;
                  org.apache.hadoop.hbase.master.TestAssignmentManager&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 7 zombie test(s): 	at org.apache.hadoop.hbase.master.TestMasterNoCluster.testNotPullingDeadRegionServerFromZK(TestMasterNoCluster.java:408)&lt;br/&gt;
	at org.apache.hadoop.hbase.mapreduce.TestLoadIncrementalHFiles.testNonexistentColumnFamilyLoad(TestLoadIncrementalHFiles.java:200)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.TestMetaScanner.testConcurrentMetaScannerAndCatalogJanitor(TestMetaScanner.java:239)&lt;br/&gt;
	at org.apache.hadoop.hbase.util.TestHBaseFsck.testHBaseFsck(TestHBaseFsck.java:151)&lt;br/&gt;
	at org.apache.hadoop.hbase.io.encoding.TestChangingEncoding.testCrazyRandomChanges(TestChangingEncoding.java:252)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8349//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8349//testReport/&lt;/a&gt;&lt;br/&gt;
Release audit warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8349//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8349//artifact/trunk/patchprocess/patchReleaseAuditProblems.txt&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8349//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8349//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8349//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8349//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8349//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8349//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8349//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8349//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8349//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8349//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8349//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8349//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8349//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8349//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8349//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8349//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8349//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8349//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8349//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8349//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13908948" author="ndimiduk" created="Fri, 21 Feb 2014 22:49:54 +0000"  >&lt;p&gt;Rebasing onto &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10479&quot; title=&quot;HConnection interface is public but is used internally, and contains a bunch of methods&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10479&quot;&gt;&lt;del&gt;HBASE-10479&lt;/del&gt;&lt;/a&gt;. Ouch.&lt;/p&gt;</comment>
                            <comment id="13909000" author="enis" created="Fri, 21 Feb 2014 23:44:08 +0000"  >&lt;p&gt;Thanks Nick for rekindling this jira. This looks pretty important for 1.0. Let me mark this as critical. &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10479&quot; title=&quot;HConnection interface is public but is used internally, and contains a bunch of methods&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10479&quot;&gt;&lt;del&gt;HBASE-10479&lt;/del&gt;&lt;/a&gt; did some cleanup around this, but more might be needed. I think we should still deprecate stuff rather than removing those for 1.0&lt;/p&gt;</comment>
                            <comment id="13909080" author="ndimiduk" created="Sat, 22 Feb 2014 01:01:11 +0000"  >&lt;p&gt;Rebased to HEAD of trunk. Compiles at least, probably lots of broken behavior and even more broken tests.&lt;/p&gt;

&lt;p&gt;As for deprecating vs removing, the biggest change that will be painful to deprecate is the Configuration-instance-based automagical connection management.&lt;/p&gt;</comment>
                            <comment id="13909211" author="hadoopqa" created="Sat, 22 Feb 2014 03:42:39 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12630431/HBASE-9117.05.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12630431/HBASE-9117.05.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12630431&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 116 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.1&lt;/font&gt;.  The patch compiles against the hadoop 1.1 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +    // HBaseAdmin only waits for regions to appear in hbase:meta we should wait until they are assigned&lt;br/&gt;
+    LOG.warn(&quot;close() called on HConnection instance returned from HBaseTestingUtility.getConnection()&quot;);&lt;br/&gt;
+  public static THBaseService.Iface newInstance(Configuration conf, ThriftMetrics metrics) throws IOException {&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestClientNoCluster&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8773//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8773//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8773//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8773//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8773//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8773//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8773//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8773//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8773//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8773//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8773//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8773//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8773//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8773//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8773//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8773//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8773//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8773//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8773//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8773//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8773//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8773//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13911829" author="ndimiduk" created="Tue, 25 Feb 2014 18:19:01 +0000"  >&lt;p&gt;Another WIP patch, I&apos;m still working through failing/hanging tests in the small and med categories.&lt;/p&gt;</comment>
                            <comment id="13911843" author="ndimiduk" created="Tue, 25 Feb 2014 18:25:49 +0000"  >&lt;p&gt;Now up on review board &lt;a href=&quot;https://reviews.apache.org/r/18479/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/18479/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This is becoming quite a beast. Because it changes the semantics of passing around a Configuration object, it&apos;s hard to break down into pieces. I could probably do a series of structural changes, but the tests would fail/hang until all of them are applied.&lt;/p&gt;</comment>
                            <comment id="13911861" author="ndimiduk" created="Tue, 25 Feb 2014 18:36:20 +0000"  >&lt;p&gt;RB isn&apos;t behaving at all. I&apos;m not sure if it&apos;s actually posted.&lt;/p&gt;</comment>
                            <comment id="13912008" author="stack" created="Tue, 25 Feb 2014 20:21:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I&apos;m not sure if it&apos;s actually posted.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It is up.  I&apos;ve been reviewing.&lt;/p&gt;</comment>
                            <comment id="13912011" author="stack" created="Tue, 25 Feb 2014 20:25:18 +0000"  >&lt;p&gt;I like what is up on rb.  It is really great cleanup.  Only question is what do we break when this goes in and when should it go in?  For 1.0?  Or post 1.0?  We are removing deprecated public methods and we are rationalizing our &apos;awkward&apos; API so all should be good right?&lt;/p&gt;</comment>
                            <comment id="13912184" author="enis" created="Tue, 25 Feb 2014 22:44:32 +0000"  >&lt;blockquote&gt;&lt;p&gt;Only question is what do we break when this goes in and when should it go in? For 1.0? Or post 1.0? We are removing deprecated public methods and we are rationalizing our &apos;awkward&apos; API so all should be good right?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Some of them have only been deprecated in 0.99, not in 0.98 though. &lt;br/&gt;
I am a +1 for doing this, but if there is a way to keep BC by implementing connection as a different layer so that we don&apos;t break clients relying on this that would be good. &lt;/p&gt;</comment>
                            <comment id="13912218" author="hadoopqa" created="Tue, 25 Feb 2014 23:08:39 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12630995/HBASE-9117.06.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12630995/HBASE-9117.06.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12630995&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 150 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.1&lt;/font&gt;.  The patch compiles against the hadoop 1.1 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javac&lt;/font&gt;.  The applied patch generated 5 javac compiler warnings (more than the trunk&apos;s current 4 warnings).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 1 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +    // HBaseAdmin only waits for regions to appear in hbase:meta we should wait until they are assigned&lt;br/&gt;
+    LOG.warn(&quot;close() called on HConnection instance returned from HBaseTestingUtility.getConnection()&quot;);&lt;br/&gt;
+  public static THBaseService.Iface newInstance(Configuration conf, ThriftMetrics metrics) throws IOException {&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.util.TestMergeTable&lt;br/&gt;
                  org.apache.hadoop.hbase.master.TestMasterRestartAfterDisablingTable&lt;br/&gt;
                  org.apache.hadoop.hbase.io.encoding.TestLoadAndSwitchEncodeOnDisk&lt;br/&gt;
                  org.apache.hadoop.hbase.util.TestMiniClusterLoadSequential&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestMultiParallel&lt;br/&gt;
                  org.apache.hadoop.hbase.replication.TestReplicationKillMasterRSCompressed&lt;br/&gt;
                  org.apache.hadoop.hbase.io.encoding.TestChangingEncoding&lt;br/&gt;
                  org.apache.hadoop.hbase.master.TestRegionPlacement&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat2&lt;br/&gt;
                  org.apache.hadoop.hbase.replication.TestReplicationKillMasterRS&lt;br/&gt;
                  org.apache.hadoop.hbase.replication.TestPerTableCFReplication&lt;br/&gt;
                  org.apache.hadoop.hbase.replication.TestReplicationKillSlaveRS&lt;br/&gt;
                  org.apache.hadoop.hbase.TestMultiVersions&lt;br/&gt;
                  org.apache.hadoop.hbase.coprocessor.TestCoprocessorEndpoint&lt;br/&gt;
                  org.apache.hadoop.hbase.security.visibility.TestVisibilityLabels&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestCompactionState&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestTimeRangeMapRed&lt;br/&gt;
                  org.apache.hadoop.hbase.rest.TestScannersWithLabels&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestImportTSVWithVisibilityLabels&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestAdmin&lt;br/&gt;
                  org.apache.hadoop.hbase.coprocessor.TestRegionServerObserver&lt;br/&gt;
                  org.apache.hadoop.hbase.replication.TestReplicationSmallTests&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestSplitTransactionOnCluster&lt;br/&gt;
                  org.apache.hadoop.hbase.TestZooKeeper&lt;br/&gt;
                  org.apache.hadoop.hbase.replication.TestMultiSlaveReplication&lt;br/&gt;
                  org.apache.hadoop.hbase.filter.TestFilterWrapper&lt;br/&gt;
                  org.apache.hadoop.hbase.util.TestMiniClusterLoadParallel&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestHCM&lt;br/&gt;
                  org.apache.hadoop.hbase.replication.TestReplicationDisableInactivePeer&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestFromClientSide3&lt;br/&gt;
                  org.apache.hadoop.hbase.replication.TestReplicationChangingPeerRegionservers&lt;br/&gt;
                  org.apache.hadoop.hbase.security.access.TestAccessControlFilter&lt;br/&gt;
                  org.apache.hadoop.hbase.replication.TestMasterReplication&lt;br/&gt;
                  org.apache.hadoop.hbase.util.TestMiniClusterLoadEncoded&lt;br/&gt;
                  org.apache.hadoop.hbase.security.visibility.TestVisibilityLabelsOpWithDifferentUsersNoACL&lt;br/&gt;
                  org.apache.hadoop.hbase.TestAcidGuarantees&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestClientOperationInterrupt&lt;br/&gt;
                  org.apache.hadoop.hbase.security.access.TestTablePermissions&lt;br/&gt;
                  org.apache.hadoop.hbase.filter.TestFilterWithScanLimits&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestFSErrorsExposed&lt;br/&gt;
                  org.apache.hadoop.hbase.util.TestRegionSplitter&lt;br/&gt;
                  org.apache.hadoop.hbase.replication.TestReplicationSyncUpTool&lt;br/&gt;
                  org.apache.hadoop.hbase.security.visibility.TestVisibilityLabelsWithDistributedLogReplay&lt;br/&gt;
                  org.apache.hadoop.hbase.replication.TestReplicationWithTags&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 6 zombie test(s): 	at org.apache.hadoop.hbase.mapreduce.TestLoadIncrementalHFiles.testLoadTooMayHFiles(TestLoadIncrementalHFiles.java:380)&lt;br/&gt;
	at org.apache.hadoop.hbase.util.TestHBaseFsck.testMissingRegionInfoQualifier(TestHBaseFsck.java:1943)&lt;br/&gt;
	at org.apache.hadoop.hbase.master.TestMasterNoCluster.testNotPullingDeadRegionServerFromZK(TestMasterNoCluster.java:408)&lt;br/&gt;
	at org.apache.hadoop.hbase.rest.TestSchemaResource.testTableCreateAndDeletePB(TestSchemaResource.java:151)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8803//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8803//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8803//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8803//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8803//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8803//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8803//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8803//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8803//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8803//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8803//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8803//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8803//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8803//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8803//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8803//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8803//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8803//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8803//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8803//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8803//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8803//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13912266" author="apurtell" created="Tue, 25 Feb 2014 23:41:58 +0000"  >&lt;blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Only question is what do we break when this goes in and when should it go in? For 1.0? Or post 1.0? We are removing deprecated public methods and we are rationalizing our &apos;awkward&apos; API so all should be good right?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Some of them have only been deprecated in 0.99, not in 0.98 though.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If you don&apos;t want to deprecate in 0.99 and remove in 1.0 (maybe you do), 0.98 is accepting deprecations for things to be removed in 0.99. &lt;/p&gt;</comment>
                            <comment id="13919710" author="ndimiduk" created="Tue, 4 Mar 2014 18:01:01 +0000"  >&lt;p&gt;This patch is becoming unwieldy. Canceling patch and moving to independent subtasks.&lt;/p&gt;</comment>
                            <comment id="13919716" author="ndimiduk" created="Tue, 4 Mar 2014 18:07:36 +0000"  >&lt;p&gt;Here&apos;s what I have in mind in terms of breakdown of work.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; 1. warn on connection cache hit (configurable, off by default. 0.98)
 2. deprecate all public HTable constructors (0.98)
 3. deprecate ConnectionManager#{delete,get}Connection (0.98)
 4. replace internal ConnectionManager#{delete,get}Connection use with #close, #createConnection (0.98, 0.99)
 5. replace internal HTable constructor use with HConnection#getTable (0.98, 0.99)
 6. delete all public HTable constructors (0.99)
 7. delete ConnectionManager#{delete,get}Connection (0.99)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;There&apos;s some other tasks mixed in there as well that will be required to replace internal usage patterns. Thinks like MetaReader#getRegionCount accepting an HConnection instance instead of a Configuration. Will tease those out as I go.&lt;/p&gt;

&lt;p&gt;Does this plan make sense? I don&apos;t want to create a bunch of JIRA noise without reasonable consensus. I&apos;ll push a pile of patches to a github branch so you can see what things are looking like.&lt;/p&gt;

&lt;p&gt;Formatting edited for legibility.&lt;/p&gt;</comment>
                            <comment id="13919733" author="ndimiduk" created="Tue, 4 Mar 2014 18:22:24 +0000"  >&lt;p&gt;Actually, #3 above has already been done.&lt;/p&gt;</comment>
                            <comment id="13919741" author="ndimiduk" created="Tue, 4 Mar 2014 18:33:51 +0000"  >&lt;p&gt;Given that connections will no longer be cached, HConnectionManager is really only a factory. We should evaluate whether this is necessary in a 1.0 API.&lt;/p&gt;</comment>
                            <comment id="13919745" author="ndimiduk" created="Tue, 4 Mar 2014 18:39:43 +0000"  >&lt;p&gt;I take that back, there are some get/deleteConnection components that need deprecating.&lt;/p&gt;

&lt;p&gt;Should also remove HTablePool as it&apos;s own item.&lt;/p&gt;</comment>
                            <comment id="13920112" author="ndimiduk" created="Tue, 4 Mar 2014 22:17:30 +0000"  >&lt;p&gt;MetaScanner methods are all static and accept some variation of configuration and/or connection instance as parameters. We need to convert these all over to require an externally managed HConnection.&lt;/p&gt;</comment>
                            <comment id="13920120" author="enis" created="Tue, 4 Mar 2014 22:26:19 +0000"  >&lt;blockquote&gt;&lt;p&gt;Here&apos;s what I have in mind in terms of breakdown of work.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I think it makes a lot of sense to break it down. &lt;br/&gt;
From your plan, it seems that you are suggesting we get rid of &quot;managed&quot; connections from HTable completely. I don&apos;t think we can do 4 and 5 in 0.98 that would be a big change. &lt;/p&gt;

&lt;p&gt;I am less in favor of 6 and 7, because it would imply that we break most of the clients, and the transition period is not enough. &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Given that connections will no longer be cached, HConnectionManager is really only a factory. We should evaluate whether this is necessary in a 1.0 API.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I think it is good to keep it. We can just replace this with HConnection constructors, but since we already have it, we can keep it as the main factory. We can also do a clean ConnectionFactory class as well to replace it as a fresh start. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Should also remove HTablePool as it&apos;s own item.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I say deprecate instead of remove in 1.0&lt;/p&gt;</comment>
                            <comment id="13920144" author="ndimiduk" created="Tue, 4 Mar 2014 22:46:01 +0000"  >&lt;p&gt;Same with VisibilityClient, AccessControlClient, AggregationClient, MetaReader#getRegionCount.&lt;/p&gt;</comment>
                            <comment id="13920147" author="ndimiduk" created="Tue, 4 Mar 2014 22:47:27 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think it is good to keep it. We can just replace this with HConnection constructors, but since we already have it, we can keep it as the main factory.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Actually, we have to keep it. HConnection is an interface.&lt;/p&gt;</comment>
                            <comment id="13920158" author="ndimiduk" created="Tue, 4 Mar 2014 22:53:11 +0000"  >&lt;blockquote&gt;&lt;p&gt;From your plan, it seems that you are suggesting we get rid of &quot;managed&quot; connections from HTable completely.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That&apos;s correct. I believe this is inline with this ticket&apos;s scope.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I don&apos;t think we can do 4 and 5 in 0.98 that would be a big change.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It&apos;s internal only. Is it too large a change to consider for 0.98? The risk of destabilization too high?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I am less in favor of 6 and 7, because it would imply that we break most of the clients, and the transition period is not enough.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That&apos;s true, but then we&apos;re left with an API that isn&apos;t exercised internally and thus confidence in test coverage decreases.&lt;/p&gt;

&lt;p&gt;I wonder if it&apos;s better to implement the new APIs and replace this effort with a ticket to cut over to those APIs internally?&lt;/p&gt;</comment>
                            <comment id="13920176" author="enis" created="Tue, 4 Mar 2014 23:07:30 +0000"  >&lt;blockquote&gt;&lt;p&gt;It&apos;s internal only. Is it too large a change to consider for 0.98? The risk of destabilization too high?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I think it is. &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;I wonder if it&apos;s better to implement the new APIs and replace this effort with a ticket to cut over to those APIs internally?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;It makes sense to first agree on the final version of the API&apos;s that we would like to keep and support, then deprecate the ones that are not recommended anymore, then move the internals to use the new APIs. &lt;/p&gt;</comment>
                            <comment id="13920998" author="ndimiduk" created="Wed, 5 Mar 2014 16:08:54 +0000"  >&lt;p&gt;Here&apos;s a pile of commits, unwound from the above patches: &lt;a href=&quot;https://github.com/ndimiduk/hbase/commits/HBASE-9117&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/ndimiduk/hbase/commits/HBASE-9117&lt;/a&gt; It&apos;s not perfect, there&apos;s still more tests to clean up, but it&apos;s a start.&lt;/p&gt;</comment>
                            <comment id="13924634" author="stack" created="Sat, 8 Mar 2014 01:30:50 +0000"  >&lt;blockquote&gt;&lt;p&gt;1. warn on connection cache hit (configurable, off by default. 0.98)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;What is the above &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt;?  Because we are going to undo caching connections?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;2. deprecate all public HTable constructors (0.98)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;3. deprecate ConnectionManager#{delete,get}Connection (0.98)&lt;br/&gt;
&lt;br/&gt;
These should not be public, right, so +1&lt;br/&gt;
&lt;br/&gt;
bq.  4. replace internal ConnectionManager#{delete,get}Connection use with #close, #createConnection (0.98, 0.99)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Might be a bit radical for 0.98 since it is out but since internal, might be ok.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;5. replace internal HTable constructor use with HConnection#getTable (0.98, 0.99)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;ditto.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;6. delete all public HTable constructors (0.99)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Ugh.  Going by the rule book, there is not be enough deprecation time &amp;#8211; given 0.98.0 has shipped.  Putting on vendor hat, if 1.0 APIs stray from what is in 0.96, we&apos;ll not be able to ship hbase 1.0 any time soon.&lt;/p&gt;

&lt;p&gt;Ditto on #7.&lt;/p&gt;

&lt;p&gt;So, I&apos;d be good w/ deprecations on APIs and doing internal moves....&lt;/p&gt;

&lt;p&gt;MetaReader stuff, the classes in catalog package are all bogus and should be private inside client.  Just FYI if you get urge to rip them apart.&lt;/p&gt;

&lt;p&gt;I think HTablePool has to stay for 1.0 even though broke.&lt;/p&gt;

&lt;p&gt;On managed connections going away, where is the decision or is just the logical endpoint we&apos;ve been coming to over years (the start was sometime after &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt; showed up first and started going on about HTablePool being rubbish?)  The Connection setup is heavy, right?  To ZK, and then to RS.  If a Connection per, is there sharing?&lt;/p&gt;

&lt;p&gt;Good on you Nick.  Can we get some of the work in at least?  The first few items in your list?&lt;/p&gt;</comment>
                            <comment id="13925335" author="ndimiduk" created="Sun, 9 Mar 2014 21:35:07 +0000"  >&lt;blockquote&gt;&lt;p&gt;What is the above Nick Dimiduk? Because we are going to undo caching connections?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Unless I&apos;m mistaken, that&apos;s the meaning of &quot;HConnection pooling related APIs&quot;. With no way to have a &quot;managed&quot; connection, the user must explicitly create and destroy their own. This warning will notify when this deprecated behavior is invoked.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Might be a bit radical for 0.98 since it is out but since internal, might be ok.&lt;br/&gt;
ditto.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;These are invasive yes. See WIP patches WIP.04, WIP.05, WIP.06 in the github branch.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Going by the rule book, there is not be enough deprecation time &#8211; given 0.98.0 has shipped.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, that&apos;s true.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I think HTablePool has to stay for 1.0 even though broke.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I wish very much to at least get rid of this for 1.0 (even if the connection cache remains). It&apos;s difficult to use correctly and HConnection has been around long enough that people are using it mostly, I think. Further, if we introduce the new API as we&apos;ve discussed with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt;, 1.0 will ship with no fewer than 5 ways to acquire a handle on a cluster table (HTablePool#getTable, HTableFactory#createHTableInterface, &quot;managed&quot; HTables via constructor, HConnection#getTable, and whatever our new 1.0 API looks like). Surely we can drop &lt;b&gt;something&lt;/b&gt;. The pool and the factory are my preference.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The Connection setup is heavy, right? To ZK, and then to RS. If a Connection per, is there sharing?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;As I understand it, yes, it is heavy weight. That why the patch is large, I unwind placed were an implicitly cached connection is (hopefully) retrieved via Configuration and instead explicitly hold an HConnection and thread it through where a Configuration once went. That way, the connection is explicitly shared instead of implicitly via the cache. Easier to reason about, simpler to trace.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Can we get some of the work in at least? The first few items in your list?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I hope we can take it as far as removing use of the connection cache in our internal implementation for 1.0 (through WIP.06). Leave it around for users if we must, though by our rules, we won&apos;t be able to drop it until 2.0 at the earliest.&lt;/p&gt;</comment>
                            <comment id="13932537" author="stack" created="Wed, 12 Mar 2014 22:22:55 +0000"  >&lt;blockquote&gt;&lt;p&gt;Further, if we introduce the new API as we&apos;ve discussed with Enis Soztutar, 1.0 will ship with no fewer than 5 ways to acquire a handle on a cluster table ... Surely we can drop something. The pool and the factory are my preference.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;You have a point (smile).  HTablePool has been deprecated with a while now, &lt;a href=&quot;https://github.com/apache/hbase/commit/e4c01dac6bb9cb06a4319a5b2328163911f3aef4&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hbase/commit/e4c01dac6bb9cb06a4319a5b2328163911f3aef4&lt;/a&gt;, since 0.96 by my reading so it should be safe to drop.&lt;/p&gt;</comment>
                            <comment id="13932555" author="ndimiduk" created="Wed, 12 Mar 2014 22:31:09 +0000"  >&lt;p&gt;The rub is, HTableFactory uses HTablePool, which is used by thrift2 (&lt;a href=&quot;https://github.com/ndimiduk/hbase/commit/985dbad5119348245d6d5ebff4d8a68a2d4b2263&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/ndimiduk/hbase/commit/985dbad5119348245d6d5ebff4d8a68a2d4b2263&lt;/a&gt;). I could probably change it to use HConnection instead (and depend on connection cache).&lt;/p&gt;</comment>
                            <comment id="13932563" author="stack" created="Wed, 12 Mar 2014 22:36:11 +0000"  >&lt;p&gt;Sounds reasonable.&lt;/p&gt;</comment>
                            <comment id="14140097" author="stack" created="Fri, 19 Sep 2014 06:47:33 +0000"  >&lt;p&gt;How to proceed with this issue &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt; given the lay of the land has changed under us w/ all the Table/Connection/Admin changes?  Should I go through the patch as is and see what can be salvaged?&lt;/p&gt;</comment>
                            <comment id="14168460" author="enis" created="Sun, 12 Oct 2014 01:41:31 +0000"  >&lt;p&gt;The patch here was a bit more aggressive in replacing most of the &quot;managed&quot; connection usage  which I guess turned out very hard to proceed the review process. &lt;/p&gt;

&lt;p&gt;Shall we break this into more bitable pieces? Some stuff has already went in around these. Should we close this and open smaller jiras? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt; wdyt? &lt;/p&gt;</comment>
                            <comment id="14170166" author="ndimiduk" created="Mon, 13 Oct 2014 22:57:54 +0000"  >&lt;p&gt;Probably the patch attached is not salvageable. Agreed, I bit off more than was reasonable for a single patch.&lt;/p&gt;

&lt;p&gt;Moving off the managed connection (whichever API) is still an important part of this refactor. Maybe it can be done module by module? It&apos;ll probably mean HBaseTestingUtility has loads of extra method signatures for a while.&lt;/p&gt;</comment>
                            <comment id="14191360" author="stack" created="Fri, 31 Oct 2014 05:03:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt; Can you write out prescription of what you think needs doing?  We can make this umbrella issue and then I can help do pieces.&lt;/p&gt;</comment>
                            <comment id="14191398" author="stack" created="Fri, 31 Oct 2014 05:34:33 +0000"  >&lt;p&gt;Going through the patch, there is no CatalogTracker nor MetaReader any more.  The &apos;managed&apos; connections are still possible if you go by deprecated HTable constructors but we want to keep those for 1.0 (don&apos;t want to break folks rolling upgrade).&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;Dropping t&amp;#93;&lt;/span&gt;he pool and the factory are my preference.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Pool was smartly moved out and over to thrfit2, the only package that needed it.  HTableFactory is deprecated.  Doesn&apos;t use pool anymore anyways.&lt;/p&gt;

&lt;p&gt;#2 and #3 in your list are done (for 0.99).  We won&apos;t do #6 and #7 for 0.99.  #1 is a nice-to-have.  Should I do it?&lt;/p&gt;

&lt;p&gt;Will I start in on #4 and #5?&lt;/p&gt;
</comment>
                            <comment id="14192786" author="stack" created="Sat, 1 Nov 2014 00:03:12 +0000"  >&lt;p&gt;I started #5 in a subtask purging &apos;new HTable&apos; and &apos;new HBaseAdmin&apos; from internals.  Its a massive job.  Doing it for Tests too will be total pain.  May skip some.&lt;/p&gt;</comment>
                            <comment id="14226623" author="stack" created="Wed, 26 Nov 2014 18:44:28 +0000"  >&lt;p&gt;Work described herein that is not needed for 1.0 has been punted out to post 1.0 in this linked issue.&lt;/p&gt;</comment>
                            <comment id="14226630" author="stack" created="Wed, 26 Nov 2014 18:48:46 +0000"  >&lt;p&gt;I am resolving this issue as done &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt;. Hopefully you are good with that.  Reopen if I have missed a detail but going over your patch and the above comments, I think we got the bulk covered.&lt;/p&gt;

&lt;p&gt;On your task list in particular:&lt;/p&gt;

&lt;p&gt;There is &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12585&quot; title=&quot;Fix refguide so it does hbase 1.0 style API everywhere with callout on how we used to do it in pre-1.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12585&quot;&gt;&lt;del&gt;HBASE-12585&lt;/del&gt;&lt;/a&gt;, the doc, that has to be done still in a thorough manner but that should not get in the way of our resovling this (some doc has been applied to match then new mode &amp;#8211; see linked doc JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12400&quot; title=&quot;Fix refguide so it does connection#getTable rather than new HTable everywhere: first cut!&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12400&quot;&gt;&lt;del&gt;HBASE-12400&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Task 1 &apos;warn on connection cache hit (configurable, off by default. 0.98)&apos; in your list &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9117?focusedCommentId=13919716&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13919716&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-9117?focusedCommentId=13919716&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13919716&lt;/a&gt; would be easy, see patch below, but I think we are just going to piss folks off if we add a log every time a managed connection is made use of so I don&apos;t think we should do it; let the doc and deprecated API be sufficient.&lt;/p&gt;

&lt;p&gt;Task 2. &apos;deprecate all public HTable constructors (0.98)&apos;, from your list is done in 0.99. All but a constructor used internally marked InterfaceAudience Private have been deprecated.  Ditto for HBaseAdmin.&lt;/p&gt;

&lt;p&gt;On Task 3. &apos;deprecate ConnectionManager#&lt;/p&gt;
{delete,get}
&lt;p&gt;Connection (0.98)&apos;, has been done. There is no use of deleteConnection internally at least; all usage has been purged but for tests that verify &apos;managed&apos; connections continue to work.&lt;/p&gt;

&lt;p&gt;Task 4 and 5 were done as subtasks of this one.&lt;/p&gt;

&lt;p&gt;Task 6, &apos;delete all public HTable constructors (0.99)&apos;, and task 7, &apos;&apos;, are for post 1.0. They are a load of work converting all tests to use new API.  I filed &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12586&quot; title=&quot;Task 6 &amp;amp; 7 from HBASE-9117,  delete all public HTable constructors and delete ConnectionManager#{delete,get}Connection&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12586&quot;&gt;&lt;del&gt;HBASE-12586&lt;/del&gt;&lt;/a&gt; for these. They are not needed for 1.0 so have not made this new issue a subtask.&lt;/p&gt;



&lt;p&gt;More on task 1., I added below patch and then ran TestFromClientSide... there are many, many instances of the message in the logs:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
diff --git a/hbase-client/src/main/java/org/apache/hadoop/hbase/client/ConnectionManager.java b/hbase-client/src/main/java/org/apache/hadoop/hbase/client/ConnectionManager.java
index 9d38549..b06f1e6 100644
--- a/hbase-client/src/main/java/org/apache/hadoop/hbase/client/ConnectionManager.java
+++ b/hbase-client/src/main/java/org/apache/hadoop/hbase/client/ConnectionManager.java
@@ -284,6 +284,11 @@ class ConnectionManager {
         ConnectionManager.deleteConnection(connectionKey, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
         connection = (HConnectionImplementation)createConnection(conf, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
         CONNECTION_INSTANCES.put(connectionKey, connection);
+      } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
+        LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;\&quot;&lt;/span&gt;Managed\&lt;span class=&quot;code-quote&quot;&gt;&quot; connections are deprecated. Create and manage your own &quot;&lt;/span&gt; +
+          &lt;span class=&quot;code-quote&quot;&gt;&quot;Connection instance explicitly. See &quot;&lt;/span&gt; +
+          &lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//hbase.apache.org/apidocs/org/apache/hadoop/hbase/client/&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;-summary.html#client_example &quot;&lt;/span&gt; +
&lt;/span&gt;+          &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; guidance&quot;&lt;/span&gt;);
       }
       connection.incCount();
       &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; connection;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
257 2014-11-26 10:15:42,357 WARN  [main] client.ConnectionManager(288): &lt;span class=&quot;code-quote&quot;&gt;&quot;Managed&quot;&lt;/span&gt; connections are deprecated. Create and manage your own Connection instance explicitly. See http:&lt;span class=&quot;code-comment&quot;&gt;//hbase.apache.org/apidocs    /org/apache/hadoop/hbase/client/&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;-summary.html#client_example &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; guidance&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


</comment>
                            <comment id="14264983" author="mantonov" created="Mon, 5 Jan 2015 19:44:09 +0000"  >&lt;p&gt;So this issue says &quot;remove HTablePool&quot;, but this class hasn&apos;t been actually removed from the codebase (and technically not annotated as Deprecated). Is it supposed to be removed now?&lt;/p&gt;</comment>
                            <comment id="14265190" author="ndimiduk" created="Mon, 5 Jan 2015 22:05:46 +0000"  >&lt;p&gt;This ticket was more about &quot;managed&quot; vs &quot;unmanaged&quot; connections. HTablePool is indeed intended for removal, I guess that piece slipped through the cracks on this JIRA. There&apos;s more conversation over on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12728&quot; title=&quot;buffered writes substantially less useful after removal of HTablePool&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12728&quot;&gt;&lt;del&gt;HBASE-12728&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14331664" author="enis" created="Sat, 21 Feb 2015 23:45:44 +0000"  >&lt;p&gt;Closing this issue after 0.99.2 release.&lt;/p&gt;</comment>
                            <comment id="14363853" author="hudson" created="Mon, 16 Mar 2015 20:28:46 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #6265 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/6265/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/6265/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12586&quot; title=&quot;Task 6 &amp;amp; 7 from HBASE-9117,  delete all public HTable constructors and delete ConnectionManager#{delete,get}Connection&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12586&quot;&gt;&lt;del&gt;HBASE-12586&lt;/del&gt;&lt;/a&gt; Task 6 &amp;amp; 7 from &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9117&quot; title=&quot;Remove HTablePool and all HConnection pooling related APIs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9117&quot;&gt;&lt;del&gt;HBASE-9117&lt;/del&gt;&lt;/a&gt;, delete all public HTable constructors and delete ConnectionManager#&lt;/p&gt;
{delete,get}
&lt;p&gt;Connection (Mikhail Antonov) (stack: rev c5aca1919d774d2145005b748b3430a4b569922c)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/mapred/TableInputFormatBase.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/HTableFactory.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestMasterReplication.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/HTableInterfaceFactory.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/CoprocessorEnvironment.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/HTable.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/coprocessor/TestHTableWrapper.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestHCM.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/client/HTableWrapper.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/mapreduce/TestTableInputFormat.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/security/visibility/ExpAsStringVisibilityLabelServiceImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/client/HConnectionTestingUtility.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/mapred/TestTableInputFormat.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/util/TestHBaseFsck.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/client/ConnectionManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestSplitTransactionOnCluster.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/MetaTableAccessor.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/coprocessor/CoprocessorHost.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/util/ConnectionCache.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12697038">HBASE-10602</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12758034">HBASE-12586</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12702998">HBASE-10810</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12603384">HBASE-6580</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12704125">HBASE-10856</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12612789" name="HBASE-9117.00.patch" size="140129" author="ndimiduk" created="Fri, 8 Nov 2013 06:25:36 +0000"/>
                            <attachment id="12614187" name="HBASE-9117.01.patch" size="140516" author="ndimiduk" created="Sat, 16 Nov 2013 02:13:48 +0000"/>
                            <attachment id="12618457" name="HBASE-9117.02.patch" size="169242" author="ndimiduk" created="Thu, 12 Dec 2013 19:20:43 +0000"/>
                            <attachment id="12621562" name="HBASE-9117.03.patch" size="173819" author="ndimiduk" created="Mon, 6 Jan 2014 06:19:44 +0000"/>
                            <attachment id="12621655" name="HBASE-9117.04.patch" size="173773" author="ndimiduk" created="Mon, 6 Jan 2014 19:47:37 +0000"/>
                            <attachment id="12630431" name="HBASE-9117.05.patch" size="171769" author="ndimiduk" created="Sat, 22 Feb 2014 01:01:11 +0000"/>
                            <attachment id="12630995" name="HBASE-9117.06.patch" size="314239" author="ndimiduk" created="Tue, 25 Feb 2014 18:19:01 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12701350">HBASE-10741</subtask>
                            <subtask id="12752079">HBASE-12400</subtask>
                            <subtask id="12752120">HBASE-12404</subtask>
                            <subtask id="12755189">HBASE-12471</subtask>
                            <subtask id="12756178">HBASE-12518</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 8 Nov 2013 06:25:36 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>341629</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 39 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1mx2n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>341936</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>