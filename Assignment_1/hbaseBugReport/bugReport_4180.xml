<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:16:36 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4180/HBASE-4180.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4180] HBase should check the isSecurityEnabled flag</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4180</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Hadoop 0.21.0&apos;s UserGroupInfomation support the security check flag and always returns false.&lt;br/&gt;
HBase should check both the method existence and the return value.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12518274">HBASE-4180</key>
            <summary>HBase should check the isSecurityEnabled flag</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ghelmling">Gary Helmling</assignee>
                                    <reporter username="sinofool">Bochun Bai</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Aug 2011 02:12:46 +0000</created>
                <updated>Fri, 20 Nov 2015 11:54:36 +0000</updated>
                            <resolved>Mon, 12 Sep 2011 20:04:05 +0000</resolved>
                                                    <fixVersion>0.90.5</fixVersion>
                                    <component>security</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13081373" author="sinofool" created="Tue, 9 Aug 2011 02:16:40 +0000"  >&lt;p&gt;adds only one line after check the isSecurityCheckEnabled.&lt;br/&gt;
Call and assign it.&lt;/p&gt;</comment>
                            <comment id="13081376" author="yuzhihong@gmail.com" created="Tue, 9 Aug 2011 02:24:59 +0000"  >&lt;p&gt;+1 on patch.&lt;/p&gt;</comment>
                            <comment id="13081392" author="ghelmling" created="Tue, 9 Aug 2011 03:10:25 +0000"  >&lt;p&gt;-1 on the patch&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;User.IS_SECURE_HADOOP&lt;/tt&gt; is a private variable used to differentiate between the API incompatible changes to &lt;tt&gt;UserGroupInformation&lt;/tt&gt; between Hadoop 0.20 and 0.21+.  The API-incompatible methods are accommodated using reflection so that we&apos;re not compile-time bound to Hadoop 0.21+.  Whether hadoop.security.authentication is set to &quot;simple&quot; or &quot;kerberos&quot; (which is what &lt;tt&gt;isSecurityEnabled()&lt;/tt&gt; returns) makes no difference to accounting for the API changes.&lt;/p&gt;

&lt;p&gt;Can you describe more of the underlying problem that you&apos;re observing that this patch is intended to fix?&lt;/p&gt;
</comment>
                            <comment id="13081397" author="ghelmling" created="Tue, 9 Aug 2011 03:18:30 +0000"  >&lt;p&gt;So is the issue here that we&apos;re not correctly accounting for &lt;tt&gt;UserGroupInformation&lt;/tt&gt; API changes between Hadoop 0.21 and 0.22+?&lt;/p&gt;</comment>
                            <comment id="13081403" author="sinofool" created="Tue, 9 Aug 2011 03:36:09 +0000"  >&lt;p&gt;0.20 doesn&apos;t have isSecurityEnabled,&lt;br/&gt;
0.20-SEC does have isSecurityEnabled,&lt;br/&gt;
0.21 does have isSecurityEnabled but not means it must configured to use it.&lt;/p&gt;

&lt;p&gt;If we need HBase work with a non-security hadoop, I think we need find another way to identify it.&lt;/p&gt;</comment>
                            <comment id="13081408" author="sinofool" created="Tue, 9 Aug 2011 03:43:03 +0000"  >&lt;p&gt;0.21 API incompatible is problem for downstream projects.&lt;br/&gt;
Hive extracts a shims components for this. &lt;br/&gt;
Will HBase consider some similar changes?&lt;/p&gt;</comment>
                            <comment id="13081414" author="stack" created="Tue, 9 Aug 2011 04:00:41 +0000"  >&lt;p&gt;@Bochun&lt;/p&gt;

&lt;p&gt;Can you rephrase this &apos;0.21 does have isSecurityEnabled but not means it must configured to use it.&apos;?  What is the difference between 0.20-SEC and 0.21?&lt;/p&gt;

&lt;p&gt;HBase does not run on raw (non-secure) 0.21.  It needs a few small patches to do so.  It will run on 0.22 and 0.23 non-secure.  Until we figure otherwise, we&apos;d like to have it so the same hbase binary will run on 0.20-append, CDH3, 0.22, 0.23, MapR, etc.  I&apos;ve not looked at whats involved making hbase run secure on all these versions (Gary is our man when it comes to that).  Hopefully we can make it so same hbase binary can run on all secure hadoop combos (Will this be possible Gary?)&lt;/p&gt;</comment>
                            <comment id="13081415" author="ghelmling" created="Tue, 9 Aug 2011 04:00:53 +0000"  >&lt;p&gt;As I said before, the presence of &lt;tt&gt;isSecurityEnabled&lt;/tt&gt; is used to identify &lt;b&gt;API&lt;/b&gt; changes, not whether Hadoop is configured for Kerberos authentication.  We really don&apos;t care about the return value of &lt;tt&gt;isSecurityEnabled&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;HBase does work with non-secure Hadoop, both 0.20 (pre-security) and 0.20-security (with hadoop.security.authentication=simple).&lt;/p&gt;

&lt;p&gt;If there are API differences between &lt;tt&gt;UserGroupInformation&lt;/tt&gt; in Hadoop 0.21 and 0.22+, we should account for those.  Otherwise I still don&apos;t see what exactly the issue is here.  Are you encountering problems running on Hadoop 0.21 (which is not supported) that this is intended to solve?&lt;/p&gt;</comment>
                            <comment id="13081417" author="ghelmling" created="Tue, 9 Aug 2011 04:08:39 +0000"  >&lt;p&gt;@Bochun&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;0.21 API incompatible is problem for downstream projects.&lt;br/&gt;
Hive extracts a shims components for this.&lt;br/&gt;
Will HBase consider some similar changes?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is the purpose of the &lt;tt&gt;User&lt;/tt&gt; class &amp;#8211; to isolate the UGI changes.  See &lt;tt&gt;User.HadoopUser&lt;/tt&gt; and &lt;tt&gt;User.SecureHadoopUser&lt;/tt&gt;.  If we need to add a separate version for Hadoop 0.21, we can do that, but as Stack mentions there are other, non-related problems with running on Hadoop 0.21.&lt;/p&gt;</comment>
                            <comment id="13081420" author="sinofool" created="Tue, 9 Aug 2011 04:12:21 +0000"  >&lt;p&gt;@Gray, yes.&lt;br/&gt;
I am trying run hbase on Hadoop 0.21 and it throws ClassNotFoundException.&lt;/p&gt;

&lt;p&gt;org.apache.hadoop.hbase.User.login() thinks it is a secure version and invoke SecureHadoopUser.login.&lt;/p&gt;

&lt;p&gt;The SecureHadoopUser.login() needs org.apache.hadoop.security.SecurityUtil class exist.&lt;/p&gt;</comment>
                            <comment id="13081422" author="sinofool" created="Tue, 9 Aug 2011 04:17:06 +0000"  >&lt;p&gt;@stack, It is cleared, Thanks!&lt;br/&gt;
0.21 is still not a stable version in Hadoop so it is reasonable not supporting it for hbase.&lt;br/&gt;
I will close this with &quot;won&apos;t fix&quot; later.&lt;br/&gt;
Would you please kindly give me some hits finding out &quot;HBase does not run on raw (non-secure) 0.21. It needs a few small patches to do so&quot;? How can I find these small patches?&lt;/p&gt;</comment>
                            <comment id="13081427" author="ghelmling" created="Tue, 9 Aug 2011 04:25:09 +0000"  >&lt;p&gt;@Bochun&lt;/p&gt;

&lt;p&gt;I&apos;ll add a patch that checks the return value of isSecurityEnabled() in User.login().  This should avert the ClassNotFoundException.&lt;/p&gt;</comment>
                            <comment id="13081429" author="stack" created="Tue, 9 Aug 2011 04:27:32 +0000"  >&lt;p&gt;@Bochun See comment here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2233?focusedCommentId=13046828&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13046828&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-2233?focusedCommentId=13046828&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13046828&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You could take the patches from the hadoop issues referenced and they should apply to 0.21&lt;/p&gt;</comment>
                            <comment id="13081433" author="sinofool" created="Tue, 9 Aug 2011 04:37:26 +0000"  >&lt;p&gt;Thanks @stack.&lt;br/&gt;
@Gray, do you mean changes like this?&lt;br/&gt;
if (IS_SECURE_HADOOP &amp;amp;&amp;amp; UserGroupInfomation.isSecurityEnabed()) &lt;/p&gt;
{
  SecurityHadoopUser.login......
}
&lt;p&gt; else &lt;/p&gt;
{
  HadoopUser.login......
}
</comment>
                            <comment id="13081449" author="ghelmling" created="Tue, 9 Aug 2011 05:34:08 +0000"  >&lt;p&gt;Patch against 0.90 branch adding check for isSecurityEnabled() within User.login()&lt;/p&gt;</comment>
                            <comment id="13081450" author="ghelmling" created="Tue, 9 Aug 2011 05:34:45 +0000"  >&lt;p&gt;Patch against trunk adding check for isSecurityEnabled() within User.login()&lt;/p&gt;</comment>
                            <comment id="13081452" author="ghelmling" created="Tue, 9 Aug 2011 05:36:43 +0000"  >&lt;p&gt;@Bochun&lt;/p&gt;

&lt;p&gt;No, unfortunately that would break the ability to compile (or run) HBase against non-secure Hadoop.&lt;/p&gt;

&lt;p&gt;See the two attached patches (one for branch 0.90, one for trunk).  I assume you are running a 0.90 release?  Please try applying the 0.90 version of the patch and see if that fixes the problem for you.&lt;/p&gt;

&lt;p&gt;I will be testing the patch as well against Hadoop 0.20.2, and a 0.20-security version.&lt;/p&gt;</comment>
                            <comment id="13081453" author="stack" created="Tue, 9 Aug 2011 05:39:27 +0000"  >&lt;p&gt;Patch looks good to me Gary.&lt;/p&gt;</comment>
                            <comment id="13102829" author="ghelmling" created="Mon, 12 Sep 2011 17:35:21 +0000"  >&lt;p&gt;Updated patch against trunk with some added javadoc.&lt;/p&gt;</comment>
                            <comment id="13102830" author="ghelmling" created="Mon, 12 Sep 2011 17:36:01 +0000"  >&lt;p&gt;Updated patch against 0.90 with added javadoc.&lt;/p&gt;</comment>
                            <comment id="13102884" author="yuzhihong@gmail.com" created="Mon, 12 Sep 2011 18:30:08 +0000"  >&lt;p&gt;One minor comment: year should be removed from header.&lt;br/&gt;
+1 on patch.&lt;/p&gt;</comment>
                            <comment id="13102980" author="ghelmling" created="Mon, 12 Sep 2011 20:02:09 +0000"  >&lt;p&gt;Patch committed to 0.90&lt;/p&gt;</comment>
                            <comment id="13102981" author="ghelmling" created="Mon, 12 Sep 2011 20:02:44 +0000"  >&lt;p&gt;Patch committed to trunk&lt;/p&gt;</comment>
                            <comment id="13102983" author="ghelmling" created="Mon, 12 Sep 2011 20:04:05 +0000"  >&lt;p&gt;Committed patch to 0.90 branch and trunk.  User.login() now checks isSecurityEnabled() before attempting to call SecurityUtil.login().&lt;/p&gt;</comment>
                            <comment id="13103116" author="hudson" created="Mon, 12 Sep 2011 22:07:29 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2200 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2200/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2200/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4180&quot; title=&quot;HBase should check the isSecurityEnabled flag&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4180&quot;&gt;&lt;del&gt;HBASE-4180&lt;/del&gt;&lt;/a&gt;  Check isSecurityEnabled before User.login for 0.21 compatibility&lt;/p&gt;

&lt;p&gt;garyh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/security/User.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/Classes.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/util/Methods.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15016272" author="lars_francke" created="Fri, 20 Nov 2015 11:54:36 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12489798" name="HBASE-4180.patch" size="547" author="sinofool" created="Tue, 9 Aug 2011 02:15:36 +0000"/>
                            <attachment id="12489810" name="HBASE-4180_0.90.patch" size="10152" author="ghelmling" created="Tue, 9 Aug 2011 05:34:07 +0000"/>
                            <attachment id="12494075" name="HBASE-4180_0.90_2.patch" size="12543" author="ghelmling" created="Mon, 12 Sep 2011 17:36:01 +0000"/>
                            <attachment id="12494106" name="HBASE-4180_0.90_final.patch" size="13710" author="ghelmling" created="Mon, 12 Sep 2011 20:02:09 +0000"/>
                            <attachment id="12489811" name="HBASE-4180_trunk.patch" size="10342" author="ghelmling" created="Tue, 9 Aug 2011 05:34:45 +0000"/>
                            <attachment id="12494074" name="HBASE-4180_trunk_2.patch" size="12517" author="ghelmling" created="Mon, 12 Sep 2011 17:35:21 +0000"/>
                            <attachment id="12494107" name="HBASE-4180_trunk_final.patch" size="13691" author="ghelmling" created="Mon, 12 Sep 2011 20:02:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 9 Aug 2011 02:24:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19189</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0d37b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>74295</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>