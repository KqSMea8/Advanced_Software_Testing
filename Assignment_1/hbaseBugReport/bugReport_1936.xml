<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:57:36 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1936/HBASE-1936.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1936] ClassLoader that loads from hdfs; useful adding filters to classpath without having to restart services</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1936</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description></description>
                <environment></environment>
        <key id="12439050">HBASE-1936</key>
            <summary>ClassLoader that loads from hdfs; useful adding filters to classpath without having to restart services</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jxiang">Jimmy Xiang</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Mon, 26 Oct 2009 06:18:51 +0000</created>
                <updated>Tue, 5 Aug 2014 20:11:44 +0000</updated>
                            <resolved>Sun, 14 Apr 2013 15:19:34 +0000</resolved>
                                                    <fixVersion>0.98.0</fixVersion>
                    <fixVersion>0.94.7</fixVersion>
                    <fixVersion>0.95.1</fixVersion>
                                        <due></due>
                            <votes>2</votes>
                                    <watches>22</watches>
                                                                <comments>
                            <comment id="12769906" author="stack" created="Mon, 26 Oct 2009 06:19:50 +0000"  >&lt;p&gt;Here is start on a classloader that will add to local classpath the content of a folder up in hdfs.&lt;/p&gt;</comment>
                            <comment id="13247180" author="jeason" created="Thu, 5 Apr 2012 12:11:54 +0000"  >&lt;p&gt;@stack,&lt;br/&gt;
can you look back to this new feature again? I think it&apos;s very useful either for hot deployment of Filter or dynamic coprocessor. Any potential reasons for hanging this task up?&lt;/p&gt;

&lt;p&gt;Thank you.&lt;/p&gt;</comment>
                            <comment id="13247309" author="ram_krish" created="Thu, 5 Apr 2012 15:49:08 +0000"  >&lt;p&gt;@Jieshan&lt;br/&gt;
Thanks for bringing this up.&lt;/p&gt;</comment>
                            <comment id="13247695" author="stack" created="Thu, 5 Apr 2012 21:27:18 +0000"  >&lt;p&gt;@Jieshan Does this patch even apply any more?&lt;/p&gt;</comment>
                            <comment id="13248335" author="jeason" created="Fri, 6 Apr 2012 13:23:09 +0000"  >&lt;p&gt;Yes.&lt;br/&gt;
Regarding on how to add the new class into HDFS seems not mentioned in this patch. Should we also take care of this?&lt;/p&gt;</comment>
                            <comment id="13248394" author="stack" created="Fri, 6 Apr 2012 14:34:19 +0000"  >&lt;p&gt;Jieshan This patch is really old.  Do whatever you want with it to make it work.&lt;/p&gt;</comment>
                            <comment id="13249655" author="jeason" created="Mon, 9 Apr 2012 03:23:42 +0000"  >&lt;p&gt;Thank you, stack.&lt;br/&gt;
I will make a patch based on this one.&lt;/p&gt;</comment>
                            <comment id="13249656" author="lhofhansl" created="Mon, 9 Apr 2012 03:29:16 +0000"  >&lt;p&gt;We have since solved this problem with coprocessors, right?&lt;br/&gt;
It might make sense to look at how coprocessors handle loading from HDFS and (hopefully) reuse the bits.&lt;/p&gt;

&lt;p&gt;Thanks for picking this up again Jieshan.&lt;/p&gt;</comment>
                            <comment id="13249674" author="jeason" created="Mon, 9 Apr 2012 04:40:59 +0000"  >&lt;p&gt;Thank you Lars. I will check&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13253313" author="jeason" created="Fri, 13 Apr 2012 12:10:49 +0000"  >&lt;p&gt;This patch is just for review.&lt;/p&gt;

&lt;p&gt;I have checked the code in coprocessor, it can&apos;t support the dynamic class during running, though I can refer to the code of how to load jars from HDFS.&lt;br/&gt;
Plz correct me if I&apos;m wrong.&lt;/p&gt;

&lt;p&gt;In current approach, will use this classloader as the default one(Plz share your comment if you think different.). &lt;/p&gt;

&lt;p&gt;I&apos;m still doing more tests for this patch.&lt;/p&gt;

&lt;p&gt;(I will upload the introductive document next monday. Thank you)&lt;/p&gt;
</comment>
                            <comment id="13253564" author="zhihyu@ebaysf.com" created="Fri, 13 Apr 2012 17:33:11 +0000"  >&lt;p&gt;The patch is of decent size. Please upload to review board.&lt;/p&gt;

&lt;p&gt;Why does callIsATriggeringClass() use reflection to call isATriggeringClass() ?&lt;/p&gt;

&lt;p&gt;Can you add some tests ?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="13253828" author="apurtell" created="Fri, 13 Apr 2012 22:40:58 +0000"  >&lt;blockquote&gt;&lt;p&gt;I have checked the code in coprocessor, it can&apos;t support the dynamic class during running, though I can refer to the code of how to load jars from HDFS.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Can you rephrase this?&lt;/p&gt;

&lt;p&gt;Ideally we should have one classloader that can load from HDFS, not more than one only slightly different from each other.&lt;/p&gt;</comment>
                            <comment id="13254268" author="jeason" created="Sun, 15 Apr 2012 05:19:51 +0000"  >&lt;p&gt;I will upload the patch to review board after more tests.&lt;br/&gt;
Based on stack&apos;s original design, ClassPathLocalizer is a configurable class, that&apos;s why we use the refrection to call the method. I think I can change this. @stack, what do you think?&lt;br/&gt;
I&apos;m also thinking about how to add test case. Thank you, Ted.&lt;/p&gt;

&lt;p&gt;@Andrew, thank you. I will try to reuse the code.  I agree with we should use one classloader. The classloader in CP is not a general one.&lt;/p&gt;</comment>
                            <comment id="13259364" author="jeason" created="Mon, 23 Apr 2012 04:13:41 +0000"  >&lt;p&gt;I&apos;m trying to unify the classLoader used in CP and Filter, it will take a few days. Sorry for the delay.&lt;/p&gt;</comment>
                            <comment id="13259395" author="lhofhansl" created="Mon, 23 Apr 2012 05:42:20 +0000"  >&lt;p&gt;Thank Jieshan. Yes, I think you should be able to reuse most of the CP classloading code. In the end you &quot;only&quot; need a classloader which can load a jar from HDFS. Filters (like coprocessors) then would be packed into a jar (together with any supporting classes needed).&lt;/p&gt;</comment>
                            <comment id="13442965" author="lhofhansl" created="Tue, 28 Aug 2012 05:23:47 +0000"  >&lt;p&gt;Any update on this, Jieshan?&lt;/p&gt;</comment>
                            <comment id="13447150" author="jeason" created="Mon, 3 Sep 2012 07:33:37 +0000"  >&lt;p&gt;Sorry, some other higher priority tasks delayed my plan on this feature. I will do it at this weekend, how about that?&lt;/p&gt;</comment>
                            <comment id="13489619" author="lhofhansl" created="Fri, 2 Nov 2012 18:17:12 +0000"  >&lt;p&gt;Hey Jieshan, you&apos;re taking long weekends &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13617679" author="jxiang" created="Fri, 29 Mar 2013 20:18:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jeason&quot; class=&quot;user-hover&quot; rel=&quot;jeason&quot;&gt;Jieshan Bean&lt;/a&gt;, are you still working on this issue?&lt;/p&gt;</comment>
                            <comment id="13618019" author="jeason" created="Sat, 30 Mar 2013 08:34:31 +0000"  >&lt;p&gt;Sorry, I don&#8217;t have enough time to finish it currently. Please feel free to take it over if you interest on it&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#61514;&lt;/p&gt;</comment>
                            <comment id="13618156" author="jxiang" created="Sat, 30 Mar 2013 21:20:19 +0000"  >&lt;p&gt;No problem.  I will take a look when I get a chance.&lt;/p&gt;</comment>
                            <comment id="13618162" author="lhofhansl" created="Sat, 30 Mar 2013 21:32:58 +0000"  >&lt;p&gt;I think this is an important improvement (for things like Phoenix for example &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=giacomotaylor&quot; class=&quot;user-hover&quot; rel=&quot;giacomotaylor&quot;&gt;James Taylor&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="13618565" author="giacomotaylor" created="Mon, 1 Apr 2013 02:19:33 +0000"  >&lt;p&gt;Yes, this is definitely important for Phoenix. If we could run without requiring any server-side jar installation, that would definitely remove one hurdle. It&apos;s not that big a deal for a dev environment, but as soon as it&apos;s production, getting a new jar installed on all region servers is like rolling a 1 ton rock up hill for a few miles.&lt;/p&gt;</comment>
                            <comment id="13618907" author="jxiang" created="Mon, 1 Apr 2013 16:51:26 +0000"  >&lt;p&gt;I agree.  I will take a look.  I was thinking to reuse some logic in the coprocessor framework.  The new class loader (most likely the existing one in coprocessor framework, with some refactory), will be used to load some non-exempt classes (not system classes) from a configurable location, which could be a local folder, or a HDFS folder.  Ideally, this loader will be used only for get/scan calls in region server side (besides coprocessor related). &lt;/p&gt;</comment>
                            <comment id="13625979" author="jxiang" created="Mon, 8 Apr 2013 23:33:29 +0000"  >&lt;p&gt;A patch was posted on RB: &lt;a href=&quot;https://reviews.apache.org/r/10356/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/10356/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13628002" author="yuzhihong@gmail.com" created="Wed, 10 Apr 2013 17:19:36 +0000"  >&lt;p&gt;From &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5242/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5242/console&lt;/a&gt; , looks like there was compilation error (on hadoop 2.0).&lt;/p&gt;</comment>
                            <comment id="13628026" author="jxiang" created="Wed, 10 Apr 2013 17:40:08 +0000"  >&lt;p&gt;hbase-common must be installed so that hbase-client can be compiled.  How does the pre-commit handle this?&lt;/p&gt;</comment>
                            <comment id="13628029" author="yuzhihong@gmail.com" created="Wed, 10 Apr 2013 17:42:36 +0000"  >&lt;p&gt;protobuf has been upgraded to 2.5.0 &lt;/p&gt;

&lt;p&gt;Looks like patch needs update:&lt;/p&gt;

&lt;p&gt;1 out of 6 hunks FAILED &amp;#8211; saving rejects to file hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java.rej&lt;/p&gt;</comment>
                            <comment id="13628063" author="jxiang" created="Wed, 10 Apr 2013 18:21:41 +0000"  >&lt;p&gt;Rebased to trunk latest.&lt;/p&gt;</comment>
                            <comment id="13629132" author="yuzhihong@gmail.com" created="Thu, 11 Apr 2013 17:20:36 +0000"  >&lt;p&gt;Applying 1936_v2.1.patch, I got:&lt;/p&gt;

&lt;p&gt;1 out of 6 hunks FAILED &amp;#8211; saving rejects to file hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java.rej&lt;/p&gt;

&lt;p&gt;Please rebase.&lt;/p&gt;</comment>
                            <comment id="13629144" author="jxiang" created="Thu, 11 Apr 2013 17:35:41 +0000"  >&lt;p&gt;Trunk moves fast. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yuzhihong%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;yuzhihong@gmail.com&quot;&gt;Ted Yu&lt;/a&gt;, could you please try this one?  Thanks.&lt;/p&gt;</comment>
                            <comment id="13629167" author="hadoopqa" created="Thu, 11 Apr 2013 17:51:44 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12578243/trunk-1936_v2.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12578243/trunk-1936_v2.2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 5 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 hadoop2.0&lt;/font&gt;.  The patch failed to compile against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5269//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5269//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13629177" author="yuzhihong@gmail.com" created="Thu, 11 Apr 2013 18:01:14 +0000"  >&lt;p&gt;I was able to compile based on hadoop 1.0 and 2.0 without error.&lt;br/&gt;
The following tests passed locally:&lt;/p&gt;

&lt;p&gt;mt -Dtest=TestGet,TestDynamicClassLoader&lt;/p&gt;</comment>
                            <comment id="13629220" author="jxiang" created="Thu, 11 Apr 2013 18:48:18 +0000"  >&lt;p&gt;Attached v3.  Moved Base64 from hbase-server to hbase-common. Changed TestGet to use our version of Base64.&lt;/p&gt;</comment>
                            <comment id="13629222" author="jxiang" created="Thu, 11 Apr 2013 18:50:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;, are you ok with v3? We can file a follow-up jira to consolidate/refactory the class loaders when we are ready to fix it.&lt;/p&gt;</comment>
                            <comment id="13629280" author="hadoopqa" created="Thu, 11 Apr 2013 19:56:55 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12578254/trunk-1936_v3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12578254/trunk-1936_v3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5271//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5271//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5271//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5271//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5271//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5271//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5271//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5271//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5271//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5271//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5271//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5271//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5271//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5271//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5271//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5271//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5271//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5271//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/5271//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/5271//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13629320" author="apurtell" created="Thu, 11 Apr 2013 20:26:02 +0000"  >&lt;p&gt;+1 on v3 patch and notion of followon jira&lt;/p&gt;</comment>
                            <comment id="13629322" author="yuzhihong@gmail.com" created="Thu, 11 Apr 2013 20:29:28 +0000"  >&lt;p&gt;@Jimmy:&lt;br/&gt;
Can you fill out description and release notes ?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="13629420" author="jxiang" created="Thu, 11 Apr 2013 21:29:52 +0000"  >&lt;p&gt;Integrated into trunk and 0.95.  Thanks Andy and Ted for the review.&lt;/p&gt;</comment>
                            <comment id="13629464" author="lhofhansl" created="Thu, 11 Apr 2013 22:10:06 +0000"  >&lt;p&gt;This would be a great improvement for 0.94 (thinking Phoenix). Thoughts? Risk seems moderate.&lt;/p&gt;</comment>
                            <comment id="13629477" author="jxiang" created="Thu, 11 Apr 2013 22:19:07 +0000"  >&lt;p&gt;I am working on a backport patch for 0.94 now. Let me re-open it.&lt;/p&gt;</comment>
                            <comment id="13629478" author="jxiang" created="Thu, 11 Apr 2013 22:19:32 +0000"  >&lt;p&gt;Will post a patch for 0.94 soon.&lt;/p&gt;</comment>
                            <comment id="13629567" author="jxiang" created="Thu, 11 Apr 2013 23:28:27 +0000"  >&lt;p&gt;Attached is the patch backported to 0.94. Due to Filter class changes (because of protobuf), the patch is a little different (trunk version, the class loader is used in ProtobufUtil; this version, it is used in Get/Scan and a couple filters). However the class loader remains the same.&lt;/p&gt;</comment>
                            <comment id="13629582" author="lhofhansl" created="Thu, 11 Apr 2013 23:40:19 +0000"  >&lt;p&gt;Looks good to me. I&apos;ll do some more testing too.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=giacomotaylor&quot; class=&quot;user-hover&quot; rel=&quot;giacomotaylor&quot;&gt;James Taylor&lt;/a&gt; Do you guys want to have a look?&lt;/p&gt;</comment>
                            <comment id="13629584" author="yuzhihong@gmail.com" created="Thu, 11 Apr 2013 23:44:27 +0000"  >&lt;p&gt;Minor comments for 0.94 patch :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (InstantiationException e) {
+      &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RuntimeException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Failed deserialize.&quot;&lt;/span&gt;, e);
+    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IllegalAccessException e) {
+      &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RuntimeException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Failed deserialize.&quot;&lt;/span&gt;, e);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Can we have better error message above ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+   * Dynamic class loader to load filter/comparators
+   */
+  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt; CLASS_LOADER;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;What if class loader for other purpose is introduced in the future ? Should the above variable name be more specific ?&lt;/p&gt;</comment>
                            <comment id="13629602" author="jxiang" created="Fri, 12 Apr 2013 00:01:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yuzhihong%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;yuzhihong@gmail.com&quot;&gt;Ted Yu&lt;/a&gt;, the error message is from the original readFilelds method of the filters. How do you want the error message changed?&lt;br/&gt;
As to the variable name, we can change if a new one is introduced in the future? I agree it is better to be specific, but not sure what use cases we will have in the future.&lt;/p&gt;</comment>
                            <comment id="13629614" author="yuzhihong@gmail.com" created="Fri, 12 Apr 2013 00:09:55 +0000"  >&lt;p&gt;For error messages, how about the following ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (InstantiationException e) {
+      &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RuntimeException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Couldn&apos;t instantiate &quot;&lt;/span&gt; + className, e);
+    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IllegalAccessException e) {
+      &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RuntimeException(&lt;span class=&quot;code-quote&quot;&gt;&quot;No access to &quot;&lt;/span&gt; + className, e);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I am fine with keeping class loader variable name.&lt;/p&gt;</comment>
                            <comment id="13629617" author="jxiang" created="Fri, 12 Apr 2013 00:13:18 +0000"  >&lt;p&gt;Cool, will change the error messages as suggested. Thanks.&lt;/p&gt;</comment>
                            <comment id="13629626" author="hudson" created="Fri, 12 Apr 2013 00:22:12 +0000"  >&lt;p&gt;Integrated in hbase-0.95-on-hadoop2 #66 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95-on-hadoop2/66/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95-on-hadoop2/66/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1936&quot; title=&quot;ClassLoader that loads from hdfs; useful adding filters to classpath without having to restart services&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1936&quot;&gt;&lt;del&gt;HBASE-1936&lt;/del&gt;&lt;/a&gt; ClassLoader that loads from hdfs; useful adding filters to classpath without having to restart services (Revision 1467094)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
jxiang : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-client/src/test/java/org/apache/hadoop/hbase/client/TestGet.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-common/src/main/java/org/apache/hadoop/hbase/util/Base64.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-common/src/main/java/org/apache/hadoop/hbase/util/DynamicClassLoader.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-common/src/test/java/org/apache/hadoop/hbase/util/TestBase64.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-common/src/test/java/org/apache/hadoop/hbase/util/TestDynamicClassLoader.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/util/Base64.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/util/TestBase64.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13629649" author="hudson" created="Fri, 12 Apr 2013 00:57:08 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #4054 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4054/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4054/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1936&quot; title=&quot;ClassLoader that loads from hdfs; useful adding filters to classpath without having to restart services&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1936&quot;&gt;&lt;del&gt;HBASE-1936&lt;/del&gt;&lt;/a&gt; ClassLoader that loads from hdfs; useful adding filters to classpath without having to restart services (Revision 1467092)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
jxiang : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-client/src/test/java/org/apache/hadoop/hbase/client/TestGet.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-common/src/main/java/org/apache/hadoop/hbase/util/Base64.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-common/src/main/java/org/apache/hadoop/hbase/util/DynamicClassLoader.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-common/src/test/java/org/apache/hadoop/hbase/util/TestBase64.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-common/src/test/java/org/apache/hadoop/hbase/util/TestDynamicClassLoader.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/util/Base64.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/util/TestBase64.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13629669" author="hudson" created="Fri, 12 Apr 2013 01:37:29 +0000"  >&lt;p&gt;Integrated in hbase-0.95 #141 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95/141/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95/141/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1936&quot; title=&quot;ClassLoader that loads from hdfs; useful adding filters to classpath without having to restart services&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1936&quot;&gt;&lt;del&gt;HBASE-1936&lt;/del&gt;&lt;/a&gt; ClassLoader that loads from hdfs; useful adding filters to classpath without having to restart services (Revision 1467094)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
jxiang : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-client/src/test/java/org/apache/hadoop/hbase/client/TestGet.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-common/src/main/java/org/apache/hadoop/hbase/util/Base64.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-common/src/main/java/org/apache/hadoop/hbase/util/DynamicClassLoader.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-common/src/test/java/org/apache/hadoop/hbase/util/TestBase64.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-common/src/test/java/org/apache/hadoop/hbase/util/TestDynamicClassLoader.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/util/Base64.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/util/TestBase64.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13629709" author="hudson" created="Fri, 12 Apr 2013 02:25:20 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #494 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/494/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/494/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1936&quot; title=&quot;ClassLoader that loads from hdfs; useful adding filters to classpath without having to restart services&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1936&quot;&gt;&lt;del&gt;HBASE-1936&lt;/del&gt;&lt;/a&gt; ClassLoader that loads from hdfs; useful adding filters to classpath without having to restart services (Revision 1467092)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
jxiang : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-client/src/test/java/org/apache/hadoop/hbase/client/TestGet.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-common/src/main/java/org/apache/hadoop/hbase/util/Base64.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-common/src/main/java/org/apache/hadoop/hbase/util/DynamicClassLoader.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-common/src/test/java/org/apache/hadoop/hbase/util/TestBase64.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-common/src/test/java/org/apache/hadoop/hbase/util/TestDynamicClassLoader.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/util/Base64.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/util/TestBase64.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13629888" author="enis" created="Fri, 12 Apr 2013 07:38:35 +0000"  >&lt;p&gt;This looks cool. Can we please document this feature in the book? &lt;/p&gt;</comment>
                            <comment id="13630212" author="jxiang" created="Fri, 12 Apr 2013 15:52:00 +0000"  >&lt;p&gt;Sure. Will do that.  Probably after the 0.94 version is verified by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=giacomotaylor&quot; class=&quot;user-hover&quot; rel=&quot;giacomotaylor&quot;&gt;James Taylor&lt;/a&gt; and committed.&lt;/p&gt;</comment>
                            <comment id="13630707" author="giacomotaylor" created="Fri, 12 Apr 2013 22:40:28 +0000"  >&lt;p&gt;Thanks for the back port, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jxiang&quot; class=&quot;user-hover&quot; rel=&quot;jxiang&quot;&gt;Jimmy Xiang&lt;/a&gt;. I&apos;m thinking Phoenix will primary leverage this to make it easier for folks to get up and running. Currently, we require the phoenix jar to manually be copied to every region server and placed on the HBase classpath. Instead, if I understand this enhancement correctly, at install time we can:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;copy the phoenix-&amp;lt;major&amp;gt;.&amp;lt;minor version&amp;gt;.jar into HDFS&lt;/li&gt;
	&lt;li&gt;create/replace an HDFS symlink of &apos;phoenix-latest.jar&apos; at a known location to point to the new jar&lt;/li&gt;
	&lt;li&gt;use this path as the jar path for both coprocessors and filters (THIS PART WASN&apos;T POSSIBLE BEFORE)&lt;/li&gt;
	&lt;li&gt;do a rolling restart of the cluster to start using the new jar&lt;br/&gt;
We&apos;d still need the rolling restart, because we&apos;d need the classes from the old version unloaded and the classes from the new version loaded.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Does this sound accurate? Thanks&lt;/p&gt;</comment>
                            <comment id="13630724" author="jxiang" created="Fri, 12 Apr 2013 22:59:06 +0000"  >&lt;p&gt;Yes, that&apos;s right. The reason for the rolling restart is to unload the old version. If you just add some new filters to the existing jar file even the jar file name is the same, you don&apos;t need rolling restart.&lt;/p&gt;

&lt;p&gt;It will be helpful if we can unload an old version class. However, this means we need to track where the class is loaded, and when the jar file is changed, to avoid performance issue. We also need to come up a way to unload a class in this scenario, which is not trivial.&lt;/p&gt;</comment>
                            <comment id="13630726" author="apurtell" created="Fri, 12 Apr 2013 23:01:57 +0000"  >&lt;p&gt;As soon as we start talking about unloading, we might as well move to an OSGi runtime, otherwise we will make all of the mistakes that went into development of same in new ways here, so let&apos;s avoid that until really necessary.&lt;/p&gt;</comment>
                            <comment id="13630737" author="lhofhansl" created="Fri, 12 Apr 2013 23:08:46 +0000"  >&lt;p&gt;Agreed. Class unloading scares me. Servlet containers had that forever, and they all recommend disabling that feature in production (although that might have changed, has been a while since I worked with Servlets last).&lt;/p&gt;

&lt;p&gt;As far as this patch goes, are we fine committing to 0.94? +1 from me.&lt;br/&gt;
We can discuss more options in further jiras.&lt;/p&gt;</comment>
                            <comment id="13630752" author="jxiang" created="Fri, 12 Apr 2013 23:25:44 +0000"  >&lt;p&gt;Cool. I already committed the patch for trunk/0.95.  For the 0.94 version, I will commit it tomorrow if no objection.&lt;/p&gt;</comment>
                            <comment id="13630755" author="apurtell" created="Fri, 12 Apr 2013 23:29:24 +0000"  >&lt;p&gt;+1 for 0.94&lt;/p&gt;</comment>
                            <comment id="13631330" author="jxiang" created="Sun, 14 Apr 2013 15:19:34 +0000"  >&lt;p&gt;Integrated into 0.94 as well. Thanks all for the nice review and discussion.&lt;/p&gt;</comment>
                            <comment id="13631350" author="hudson" created="Sun, 14 Apr 2013 17:09:47 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #960 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/960/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/960/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1936&quot; title=&quot;ClassLoader that loads from hdfs; useful adding filters to classpath without having to restart services&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1936&quot;&gt;&lt;del&gt;HBASE-1936&lt;/del&gt;&lt;/a&gt; ClassLoader that loads from hdfs; useful adding filters to classpath without having to restart services - ADDENDUM (Revision 1467793)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1936&quot; title=&quot;ClassLoader that loads from hdfs; useful adding filters to classpath without having to restart services&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1936&quot;&gt;&lt;del&gt;HBASE-1936&lt;/del&gt;&lt;/a&gt; ClassLoader that loads from hdfs; useful adding filters to classpath without having to restart services (Revision 1467789)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
jxiang : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/client/TestGet.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;jxiang : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/client/Get.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/client/Scan.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/filter/SkipFilter.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/filter/WhileMatchFilter.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/util/Classes.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/util/DynamicClassLoader.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/client/TestGet.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/util/TestDynamicClassLoader.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13632706" author="hudson" created="Tue, 16 Apr 2013 09:44:43 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #137 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/137/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/137/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1936&quot; title=&quot;ClassLoader that loads from hdfs; useful adding filters to classpath without having to restart services&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1936&quot;&gt;&lt;del&gt;HBASE-1936&lt;/del&gt;&lt;/a&gt; ClassLoader that loads from hdfs; useful adding filters to classpath without having to restart services - ADDENDUM (Revision 1467793)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1936&quot; title=&quot;ClassLoader that loads from hdfs; useful adding filters to classpath without having to restart services&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1936&quot;&gt;&lt;del&gt;HBASE-1936&lt;/del&gt;&lt;/a&gt; ClassLoader that loads from hdfs; useful adding filters to classpath without having to restart services (Revision 1467789)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
jxiang : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/client/TestGet.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;jxiang : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/client/Get.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/client/Scan.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/filter/SkipFilter.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/filter/WhileMatchFilter.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/util/Classes.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/util/DynamicClassLoader.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/client/TestGet.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/util/TestDynamicClassLoader.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13671912" author="giacomotaylor" created="Sat, 1 Jun 2013 00:04:12 +0000"  >&lt;p&gt;We&apos;re looking into leveraging this new feature to ease the installation of Phoenix (&lt;a href=&quot;https://github.com/forcedotcom/phoenix&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/forcedotcom/phoenix&lt;/a&gt;). Currently we require that the phoenix jar be copied into the HBase lib dir of every region server, followed by a restart. For some background, Phoenix uses both coprocessors and custom filters. These are just the tip of the iceberg, so to speak. There&apos;s a ton of shared/foundational phoenix code being used by these coprocessors and filters - our type system, expression evaluation, schema interpretation, throttling code, memory management, etc. So when we say we&apos;d like to upgrade our coprocessor and custom filters to a new version, that means all the foundational classes under it have changed as well.&lt;/p&gt;

&lt;p&gt;If we use this new feature, we&apos;re not sure we&apos;re easing the burden on our users, since users will still need to:&lt;br/&gt;
1) update the hbase-sites.xml on each region server to set the hbase.dynamics.jar.dir path of the jar&lt;br/&gt;
2) copy the phoenix jar to hdfs&lt;br/&gt;
3) make a sym link to the new phoenix jar&lt;br/&gt;
4) get a rolling restart to be done on the cluster&lt;/p&gt;

&lt;p&gt;My fear would be that (1) would be error prone, and for (2) &amp;amp; (3) the user wouldn&apos;t have the necessary perms. And (4), we&apos;ll probably just have to live with, but in a utopia, we could just have the new jar be used for new coprocessor/filter invocations.&lt;/p&gt;

&lt;p&gt;My question: how close can we come to automating all of this to the point where we could have a phoenix install script that looks like this:&lt;/p&gt;

&lt;p&gt;hbase install phoenix-1.2.jar&lt;/p&gt;

&lt;p&gt;Is &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8400&quot; title=&quot;Load coprocessor jar from various protocols (HTTP, HTTPS, FTP, etc.)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8400&quot;&gt;HBASE-8400&lt;/a&gt; a prerequisite? Any other missing pieces? We&apos;d be happy to be a guinea pig/test case for how to solve this problem from a real application/platform standpoint.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="13701119" author="stack" created="Fri, 5 Jul 2013 21:03:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jxiang&quot; class=&quot;user-hover&quot; rel=&quot;jxiang&quot;&gt;Jimmy Xiang&lt;/a&gt; Hey Jimmy, what is this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; WRITABLE_GET =
+    &lt;span class=&quot;code-quote&quot;&gt;&quot;AgD&lt;span class=&quot;code-comment&quot;&gt;//////////wAAAAEBD3Rlc3QuTW9ja0ZpbHRlcgEAAAAAAAAAAH//////////AQAAAAAAAAAA&quot;&lt;/span&gt;;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It seems to be a class named test.MockFilter.&lt;/p&gt;

&lt;p&gt;When Get goes to read into an instance of this class, it is failing with an AbstractMethodException in 0.94 when it looks like you were expecting a fail on can&apos;t find class test.MockFilter...&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/1040/testReport/org.apache.hadoop.hbase.client/TestGet/testDynamicFilter/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/1040/testReport/org.apache.hadoop.hbase.client/TestGet/testDynamicFilter/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It has been happening over the last few builds both in 0.94 and in security.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure what changed and it is hard to track (it was failing locally regardless of what version of 0.94 I checked out and now it is passing again &amp;#8211; as though it were a library issue or something stuck in my repo).&lt;/p&gt;

&lt;p&gt;Let me add catching this exception for now so tests pass again...hbsae-8881&lt;/p&gt;</comment>
                            <comment id="13701168" author="stack" created="Fri, 5 Jul 2013 23:08:22 +0000"  >&lt;p&gt;See over in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8881&quot; title=&quot;TestGet failing in testDynamicFilter with AbstractMethodException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8881&quot;&gt;&lt;del&gt;HBASE-8881&lt;/del&gt;&lt;/a&gt;.  I catch the new AbstractMethodException but then it fails later when we try load again later in the test method.  What is this serialized Get &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jxiang&quot; class=&quot;user-hover&quot; rel=&quot;jxiang&quot;&gt;Jimmy Xiang&lt;/a&gt;?  What does its contained filter implement.  Looking at commits I do not see anything that recently changed Filter classes making them abstract.  What you reckin?  Thanks.&lt;/p&gt;</comment>
                            <comment id="13701363" author="jxiang" created="Sat, 6 Jul 2013 15:05:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=saint.ack%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;saint.ack@gmail.com&quot;&gt;Stack&lt;/a&gt;, yes, it is a jar file with a test class. At first, the test expects a fail on can&apos;t find the class. Then we put the jar in place so it can find the class dynamically.&lt;/p&gt;

&lt;p&gt;Not sure what has changed recently.  I will take a look.&lt;/p&gt;</comment>
                            <comment id="13763304" author="kiranch" created="Tue, 10 Sep 2013 18:04:18 +0000"  >&lt;p&gt;Is this issue related (&lt;a href=&quot;http://article.gmane.org/gmane.comp.java.hadoop.hbase.user/37652/match=0.94.7&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://article.gmane.org/gmane.comp.java.hadoop.hbase.user/37652/match=0.94.7&lt;/a&gt;) to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1936&quot; title=&quot;ClassLoader that loads from hdfs; useful adding filters to classpath without having to restart services&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1936&quot;&gt;&lt;del&gt;HBASE-1936&lt;/del&gt;&lt;/a&gt; ? If so, how can the classes loaded from hdfs read the configurations and their values ?&lt;/p&gt;</comment>
                            <comment id="13763447" author="jxiang" created="Tue, 10 Sep 2013 20:18:24 +0000"  >&lt;p&gt;Most likely it is not related.  Have you change the code here a little to pin point which one is NULL?&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;props.put(&quot;zk.connect&quot;, env.getConfiguration().get(&quot;a.zk.connect&quot;));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13763650" author="kiranch" created="Tue, 10 Sep 2013 22:50:40 +0000"  >&lt;p&gt;Actually, I did not change anything except the variable name &apos;a.zk.connect&apos;. The real variable name is &apos;kafka.zk.connect&apos;. I don&apos;t get why the configuration defined in &apos;hbase-site.xml&apos; is not being read by the coprocessor. When I get time, I will test this with 0.94.6 and check if 0.94.7 is the real cause for error.&lt;/p&gt;</comment>
                            <comment id="13766824" author="kiranch" created="Fri, 13 Sep 2013 19:07:02 +0000"  >&lt;p&gt;I tested same code on HBase 0.94.6 and it ran successfully. Looks like the issue is related to 0.94.7 but I am not sure if &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1936&quot; title=&quot;ClassLoader that loads from hdfs; useful adding filters to classpath without having to restart services&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1936&quot;&gt;&lt;del&gt;HBASE-1936&lt;/del&gt;&lt;/a&gt; is the reason.&lt;/p&gt;</comment>
                            <comment id="13767125" author="lhofhansl" created="Fri, 13 Sep 2013 23:04:48 +0000"  >&lt;p&gt;Hmm... So you&apos;re saying the configuration is not loaded when the coprocessors are loaded via HDFS?&lt;/p&gt;</comment>
                            <comment id="13767135" author="kiranch" created="Fri, 13 Sep 2013 23:10:13 +0000"  >&lt;p&gt;Yes. I observed it with 0.94.7 but not with 0.94.6&lt;/p&gt;</comment>
                            <comment id="13767140" author="jxiang" created="Fri, 13 Sep 2013 23:14:02 +0000"  >&lt;p&gt;Can we create a jira to track this issue? I can do that if you don&apos;t mind. We can create a test case to confirm the issue.&lt;/p&gt;</comment>
                            <comment id="13767143" author="kiranch" created="Fri, 13 Sep 2013 23:17:17 +0000"  >&lt;p&gt;Please go ahead. I just wanted to check with you before creating another issue. Thank you.&lt;/p&gt;</comment>
                            <comment id="13767156" author="jxiang" created="Fri, 13 Sep 2013 23:25:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9532&quot; title=&quot;Dynamic class loader for coprocessor may skip hbase-site.xml&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9532&quot;&gt;&lt;del&gt;HBASE-9532&lt;/del&gt;&lt;/a&gt;.  I will take a look. Thanks for reporting it, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kiran&quot; class=&quot;user-hover&quot; rel=&quot;kiran&quot;&gt;Kiran&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12682668">HBASE-10078</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12668588">HBASE-9532</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12642139">HBASE-8327</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12602116">HBASE-6527</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12419387">HBASE-1288</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12578315" name="0.94-1936.patch" size="30010" author="jxiang" created="Thu, 11 Apr 2013 23:28:27 +0000"/>
                            <attachment id="12522562" name="HBASE-1936-trunk(forReview).patch" size="32396" author="jeason" created="Fri, 13 Apr 2012 12:23:16 +0000"/>
                            <attachment id="12423167" name="cp_from_hdfs.patch" size="29030" author="stack" created="Mon, 26 Oct 2009 06:19:50 +0000"/>
                            <attachment id="12577652" name="trunk-1936.patch" size="24484" author="jxiang" created="Mon, 8 Apr 2013 23:29:25 +0000"/>
                            <attachment id="12578048" name="trunk-1936_v2.1.patch" size="25224" author="jxiang" created="Wed, 10 Apr 2013 18:20:57 +0000"/>
                            <attachment id="12578243" name="trunk-1936_v2.2.patch" size="23495" author="jxiang" created="Thu, 11 Apr 2013 17:35:41 +0000"/>
                            <attachment id="12578014" name="trunk-1936_v2.patch" size="25152" author="jxiang" created="Wed, 10 Apr 2013 14:32:55 +0000"/>
                            <attachment id="12578254" name="trunk-1936_v3.patch" size="150294" author="jxiang" created="Thu, 11 Apr 2013 18:48:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 5 Apr 2012 12:11:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32318</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 13 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ei67:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>82706</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>With this patch, customer filters can be dropped into a pre-configured folder (hbase.dynamic.jars.dir), which can be in hdfs. Region servers can pick them up dynamically, no need to restart the cluster for the new filters to take effect.&lt;br/&gt;
&lt;br/&gt;
However, if a filter class is already loaded, it won&amp;#39;t be un-loaded. Therefore, we can&amp;#39;t load a new version of an existing class.  Users have to have a proper way to do filter class versioning.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>