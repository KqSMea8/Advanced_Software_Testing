<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:57:28 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-8675/HBASE-8675.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-8675] Two active Hmasters for AUTH_FAILED in secure hbase cluster</title>
                <link>https://issues.apache.org/jira/browse/HBASE-8675</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;In our product cluster, because of the net problem to kerberos server, the ZooKeeperWatcher in active hmaster fails to Auth , gets a connection Event of AUTH_FAILED  and loose the master lock. But the zookeeper watcher ignores the event, so the old active hmaster keeps to be active. After the net problem is fixed, the backup hmaster gets the master lock and becomes active. There are two two active hmasters in the cluster.&lt;/p&gt;

&lt;p&gt;2013-05-30 09:44:21,004 ERROR org.apache.zookeeper.client.ZooKeeperSaslClient: An error: (java.security.PrivilegedActionException: javax.security.sasl.SaslException: GSS initiate failed &lt;span class=&quot;error&quot;&gt;&amp;#91;Caused by GSSException: No valid credentials provided (Mechanism level: krb1.xiaomi.net)&amp;#93;&lt;/span&gt;) occurred when evaluating Zookeeper Quorum Member&apos;s  received SASL token. Zookeeper Client will go to AUTH_FAILED state.&lt;/p&gt;

&lt;p&gt;2013-05-30 09:54:07,755 WARN org.apache.hadoop.hbase.zookeeper.ZKUtil: hconnection-0x3e10d98be405bc Unable to set watcher on znode /hbase/master&lt;br/&gt;
org.apache.zookeeper.KeeperException$AuthFailedException: KeeperErrorCode = AuthFailed for /hbase/master&lt;br/&gt;
        at org.apache.zookeeper.KeeperException.create(KeeperException.java:123)&lt;br/&gt;
        at org.apache.zookeeper.KeeperException.create(KeeperException.java:51)&lt;br/&gt;
        at org.apache.zookeeper.ZooKeeper.exists(ZooKeeper.java:1036)&lt;br/&gt;
        at org.apache.hadoop.hbase.zookeeper.RecoverableZooKeeper.exists(RecoverableZooKeeper.java:166)&lt;br/&gt;
        at org.apache.hadoop.hbase.zookeeper.ZKUtil.watchAndCheckExists(ZKUtil.java:231)&lt;br/&gt;
        at org.apache.hadoop.hbase.zookeeper.ZooKeeperNodeTracker.start(ZooKeeperNodeTracker.java:76)&lt;br/&gt;
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.ensureZookeeperTrackers(HConnectionManager.java:595)&lt;br/&gt;
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegion(HConnectionManager.java:850)&lt;br/&gt;
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegion(HConnectionManager.java:825)&lt;br/&gt;
        at org.apache.hadoop.hbase.client.HTable.finishSetup(HTable.java:286)&lt;br/&gt;
        at org.apache.hadoop.hbase.client.HTable.&amp;lt;init&amp;gt;(HTable.java:201)&lt;br/&gt;
        at org.apache.hadoop.hbase.catalog.MetaReader.getHTable(MetaReader.java:200)&lt;br/&gt;
        at org.apache.hadoop.hbase.catalog.MetaReader.getMetaHTable(MetaReader.java:226)&lt;br/&gt;
        at org.apache.hadoop.hbase.catalog.MetaReader.fullScan(MetaReader.java:705)&lt;br/&gt;
        at org.apache.hadoop.hbase.catalog.MetaReader.fullScan(MetaReader.java:183)&lt;br/&gt;
        at org.apache.hadoop.hbase.catalog.MetaReader.fullScan(MetaReader.java:168)&lt;br/&gt;
        at org.apache.hadoop.hbase.master.CatalogJanitor.getSplitParents(CatalogJanitor.java:123)&lt;br/&gt;
        at org.apache.hadoop.hbase.master.CatalogJanitor.scan(CatalogJanitor.java:134)&lt;br/&gt;
        at org.apache.hadoop.hbase.master.CatalogJanitor.chore(CatalogJanitor.java:92)&lt;br/&gt;
        at org.apache.hadoop.hbase.Chore.run(Chore.java:67)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:662)&lt;/p&gt;


&lt;p&gt;I want to just abort the hmaster server if AuthFailed or SaslAuthenticated. Any better idea about this issue? &lt;br/&gt;
For ZookeeperWatcher is used in many classes, will the aborting will bring more problems? Any more problems we need consider? &lt;/p&gt;</description>
                <environment></environment>
        <key id="12650556">HBASE-8675</key>
            <summary>Two active Hmasters for AUTH_FAILED in secure hbase cluster</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="liushaohui">Liu Shaohui</reporter>
                        <labels>
                    </labels>
                <created>Mon, 3 Jun 2013 04:25:44 +0000</created>
                <updated>Mon, 23 Nov 2015 05:13:57 +0000</updated>
                                                                            <component>master</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13675676" author="liushaohui" created="Wed, 5 Jun 2013 07:51:22 +0000"  >&lt;p&gt;It&apos;s a little trick. Any other better solution?&lt;/p&gt;</comment>
                            <comment id="13678732" author="liushaohui" created="Sat, 8 Jun 2013 11:48:58 +0000"  >&lt;p&gt;Any suggestion about this patch?&lt;/p&gt;</comment>
                            <comment id="15021535" author="sumit.nigam" created="Mon, 23 Nov 2015 05:13:57 +0000"  >&lt;p&gt;I&apos;d like to understand that is it guaranteed to be Kerberos being unreachable issue? I have similar problem but my error message is:&lt;/p&gt;

&lt;p&gt;15/11/15 15:46:53 ERROR client.ZooKeeperSaslClient: An error: (java.security.PrivilegedActionException: javax.security.sasl.SaslException: GSS initiate failed &lt;span class=&quot;error&quot;&gt;&amp;#91;Caused by GSSException: No valid credentials provided (Mechanism level: Connection reset)&amp;#93;&lt;/span&gt;) occurred when evaluating Zookeeper Quorum Member&apos;s  received SASL token. Zookeeper Client will go to AUTH_FAILED state.&lt;br/&gt;
15/11/15 15:46:53 ERROR zookeeper.ClientCnxn: SASL authentication with Zookeeper Quorum member failed: javax.security.sasl.SaslException: An error: (java.security.PrivilegedActionException: javax.security.sasl.SaslException: GSS initiate failed &lt;span class=&quot;error&quot;&gt;&amp;#91;Caused by GSSException: No valid credentials provided (Mechanism level: Connection reset)&amp;#93;&lt;/span&gt;) occurred when evaluating Zookeeper Quorum Member&apos;s  received SASL token. Zookeeper Client will go to AUTH_FAILED state.&lt;/p&gt;


&lt;p&gt;The mechanism level points to connection reset. Is that error being reported for kerberos server or for zookeeper client&apos;s inability to connect with zookeeper quorum?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12586264" name="HBASE-8675-0.94-v1.patch" size="1686" author="liushaohui" created="Wed, 5 Jun 2013 07:51:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 23 Nov 2015 05:13:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>330883</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 3 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1l31b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>331216</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>