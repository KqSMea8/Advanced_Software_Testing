<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:34:17 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6158/HBASE-6158.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6158] Data loss if the words &apos;merges&apos; or &apos;splits&apos; are used as Column Family name</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6158</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;If a table is creates with either &apos;merges&apos; or &apos;splits&apos; as one of the Column Family name it can never be flushed to the disk even though the table creation (and data population) succeeds.&lt;/p&gt;

&lt;p&gt;The reason for this is that these two are used as temporary directory names inside the region folder or merge and splits respectively and hence conflicts with the directories created for CF with same name.&lt;/p&gt;

&lt;p&gt;A simple fix would be to uses &quot;.merges&apos; and &quot;.splits&quot; as the working folder (patch attached). This will also be consistent with other work folder names. An alternate fix would be to declare these words (and other similar) as reserve words and throw exception when they are used. However, I do find the alternate approach as unnecessarily restrictive.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12559239">HBASE-6158</key>
            <summary>Data loss if the words &apos;merges&apos; or &apos;splits&apos; are used as Column Family name</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="adityakishore">Aditya Kishore</assignee>
                                    <reporter username="adityakishore">Aditya Kishore</reporter>
                        <labels>
                    </labels>
                <created>Mon, 4 Jun 2012 18:11:49 +0000</created>
                <updated>Fri, 12 Oct 2012 05:36:25 +0000</updated>
                            <resolved>Mon, 4 Jun 2012 19:17:37 +0000</resolved>
                                    <version>0.94.0</version>
                                    <fixVersion>0.92.2</fixVersion>
                    <fixVersion>0.94.1</fixVersion>
                                    <component>master</component>
                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                <comments>
                            <comment id="13288764" author="adityakishore" created="Mon, 4 Jun 2012 18:13:54 +0000"  >&lt;p&gt;Rename the merge and split work folder names by prefixing &apos;.&apos;&lt;/p&gt;</comment>
                            <comment id="13288769" author="zhihyu@ebaysf.com" created="Mon, 4 Jun 2012 18:18:41 +0000"  >&lt;p&gt;Can you generate patch for trunk ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-  &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; MERGEDIR = &lt;span class=&quot;code-quote&quot;&gt;&quot;merges&quot;&lt;/span&gt;;
+  &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; MERGEDIR = &lt;span class=&quot;code-quote&quot;&gt;&quot;.merges&quot;&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above constant is only used in HRegion. We can make it private, right ?&lt;/p&gt;</comment>
                            <comment id="13288780" author="adityakishore" created="Mon, 4 Jun 2012 18:29:47 +0000"  >&lt;p&gt;Sure, we could. Here are patches for both 0.94 and trunk.&lt;/p&gt;

&lt;p&gt;Please remove the first patch &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6158&quot; title=&quot;Data loss if the words &amp;#39;merges&amp;#39; or &amp;#39;splits&amp;#39; are used as Column Family name&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6158&quot;&gt;&lt;del&gt;HBASE-6158&lt;/del&gt;&lt;/a&gt;.patch&quot;.&lt;/p&gt;</comment>
                            <comment id="13288792" author="stack" created="Mon, 4 Jun 2012 18:42:26 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13288829" author="stack" created="Mon, 4 Jun 2012 19:17:37 +0000"  >&lt;p&gt;Applied trunk and 0.94 branch.  Thanks for the patch Aditya.&lt;/p&gt;</comment>
                            <comment id="13288832" author="stack" created="Mon, 4 Jun 2012 19:19:13 +0000"  >&lt;p&gt;Applied to 0.92 too (data loss)&lt;/p&gt;</comment>
                            <comment id="13288836" author="hadoopqa" created="Mon, 4 Jun 2012 19:23:50 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12530831/HBASE-6158_trunk.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12530831/HBASE-6158_trunk.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 3 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.coprocessor.TestClassLoading&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2101//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2101//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2101//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2101//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2101//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2101//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2101//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2101//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13288843" author="adityakishore" created="Mon, 4 Jun 2012 19:43:15 +0000"  >&lt;p&gt;The warnings from QA are unrelated to the changes made for this bug.&lt;/p&gt;</comment>
                            <comment id="13288853" author="hudson" created="Mon, 4 Jun 2012 20:06:12 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2986 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2986/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2986/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6158&quot; title=&quot;Data loss if the words &amp;#39;merges&amp;#39; or &amp;#39;splits&amp;#39; are used as Column Family name&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6158&quot;&gt;&lt;del&gt;HBASE-6158&lt;/del&gt;&lt;/a&gt; Data loss if the words &apos;merges&apos; or &apos;splits&apos; are used as Column Family name (Revision 1346095)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/SplitTransaction.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13288862" author="tlipcon" created="Mon, 4 Jun 2012 20:16:30 +0000"  >&lt;p&gt;Is this change incompatible for rolling upgrade?&lt;/p&gt;</comment>
                            <comment id="13288890" author="adityakishore" created="Mon, 4 Jun 2012 20:41:50 +0000"  >&lt;p&gt;&amp;gt; Is this change incompatible for rolling upgrade?&lt;/p&gt;

&lt;p&gt;I don&apos;t think so. These are temporary work folders which get cleaned up routinely and particularly at Region Server (re)start for each region through HRegion.initialize().&lt;/p&gt;

&lt;p&gt;However, a possible side effect could be that &quot;merges&quot; and &quot;splits&quot; folders created by pre-upgrade code (which somehow did not get cleaned up during a shutdown) may continue to exist on the file system as the cleanup code would no longer be looking for them. But this is better fixed in the upgrade scripts by deleting these folders if they are found to be a work folder instead of a CF container folder.&lt;/p&gt;</comment>
                            <comment id="13288904" author="hudson" created="Mon, 4 Jun 2012 21:08:59 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #246 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/246/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/246/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6158&quot; title=&quot;Data loss if the words &amp;#39;merges&amp;#39; or &amp;#39;splits&amp;#39; are used as Column Family name&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6158&quot;&gt;&lt;del&gt;HBASE-6158&lt;/del&gt;&lt;/a&gt; Data loss if the words &apos;merges&apos; or &apos;splits&apos; are used as Column Family name (Revision 1346096)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/SplitTransaction.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13288995" author="hudson" created="Mon, 4 Jun 2012 23:44:14 +0000"  >&lt;p&gt;Integrated in HBase-0.92 #446 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92/446/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92/446/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6158&quot; title=&quot;Data loss if the words &amp;#39;merges&amp;#39; or &amp;#39;splits&amp;#39; are used as Column Family name&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6158&quot;&gt;&lt;del&gt;HBASE-6158&lt;/del&gt;&lt;/a&gt; Data loss if the words &apos;merges&apos; or &apos;splits&apos; are used as Column Family name (Revision 1346097)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/regionserver/SplitTransaction.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13289011" author="hudson" created="Tue, 5 Jun 2012 00:07:37 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #40 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/40/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/40/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6158&quot; title=&quot;Data loss if the words &amp;#39;merges&amp;#39; or &amp;#39;splits&amp;#39; are used as Column Family name&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6158&quot;&gt;&lt;del&gt;HBASE-6158&lt;/del&gt;&lt;/a&gt; Data loss if the words &apos;merges&apos; or &apos;splits&apos; are used as Column Family name (Revision 1346095)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/SplitTransaction.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13289037" author="hudson" created="Tue, 5 Jun 2012 00:59:54 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #34 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/34/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/34/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6158&quot; title=&quot;Data loss if the words &amp;#39;merges&amp;#39; or &amp;#39;splits&amp;#39; are used as Column Family name&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6158&quot;&gt;&lt;del&gt;HBASE-6158&lt;/del&gt;&lt;/a&gt; Data loss if the words &apos;merges&apos; or &apos;splits&apos; are used as Column Family name (Revision 1346096)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/SplitTransaction.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13289081" author="hudson" created="Tue, 5 Jun 2012 01:48:36 +0000"  >&lt;p&gt;Integrated in HBase-0.92-security #111 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92-security/111/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92-security/111/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6158&quot; title=&quot;Data loss if the words &amp;#39;merges&amp;#39; or &amp;#39;splits&amp;#39; are used as Column Family name&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6158&quot;&gt;&lt;del&gt;HBASE-6158&lt;/del&gt;&lt;/a&gt; Data loss if the words &apos;merges&apos; or &apos;splits&apos; are used as Column Family name (Revision 1346097)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/regionserver/SplitTransaction.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13399949" author="dsw" created="Sat, 23 Jun 2012 13:20:59 +0000"  >&lt;p&gt;This change does make upgrade scripts more complex as noted earlier in this JIRA.  Having to change the scripts to detect this condition is potentially problematic: if &quot;splits&quot; or &quot;merges&quot; was an actual user table before the upgrade, what does the script do in that case?&lt;/p&gt;

&lt;p&gt;Also, is &quot;merges&quot;/MERGEDIR actually created anywhere?  I don&apos;t see any such call in the code in trunk or in earlier releases.&lt;/p&gt;</comment>
                            <comment id="13400884" author="adityakishore" created="Mon, 25 Jun 2012 20:53:05 +0000"  >&lt;p&gt;1. Would like to clarify that this change affects CF names and not user tables names.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
\-&amp;lt;HBase Root&amp;gt;
 +-\&amp;lt;user_table&amp;gt;
   +-\&amp;lt;region_name&amp;gt;
     +-\merges

and

\-&amp;lt;HBase Root&amp;gt;
 +-\&amp;lt;user_table&amp;gt;
   +-\&amp;lt;region_name&amp;gt;
     +-\splits
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;2. Prior to this fix, it was impossible for any table to have a column family with name &quot;merges&quot; or &quot;splits&quot; &lt;b&gt;ON DISK&lt;/b&gt; since these folders get deleted whenever a region is opened. If a table has a defined schema with &quot;merges&quot; or &quot;splits&quot; as CF name, it will continue to accept puts until they are to be flushed to disk at which point the flush fails with the following exception&lt;/p&gt;

&lt;p&gt;ERROR: org.apache.hadoop.ipc.RemoteException: org.apache.hadoop.hbase.DroppedSnapshotException: region: &amp;lt;region_name&amp;gt;&lt;br/&gt;
at org.apache.hadoop.hbase.regionserver.HRegion.internalFlushcache(HRegion.java:999)&lt;br/&gt;
at org.apache.hadoop.hbase.regionserver.HRegion.internalFlushcache(HRegion.java:904)&lt;br/&gt;
at org.apache.hadoop.hbase.regionserver.HRegion.flushcache(HRegion.java:856)&lt;br/&gt;
at org.apache.hadoop.hbase.regionserver.HRegionServer.flushRegion(HRegionServer.java:2192)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
at org.apache.hadoop.hbase.ipc.HBaseRPC$Server.call(HBaseRPC.java:570)&lt;br/&gt;
at org.apache.hadoop.hbase.ipc.HBaseServer$Handler.run(HBaseServer.java:1039)&lt;br/&gt;
Caused by: java.io.FileNotFoundException: File does not exist: hdfs://&amp;lt;server&amp;gt;:&amp;lt;port&amp;gt;/&amp;lt;path_to_region&amp;gt;/merges&lt;br/&gt;
at org.apache.hadoop.hdfs.DistributedFileSystem(DistributedFileSystem.java:519)&lt;br/&gt;
at org.apache.hadoop.hdfs.DistributedFileSystem(DistributedFileSystem.java:504)&lt;br/&gt;
at org.apache.hadoop.hbase.regionserver.StoreFile.getUniqueFile(StoreFile.java:580)&lt;br/&gt;
at org.apache.hadoop.hbase.regionserver.Store.internalFlushCache(Store.java:493)&lt;br/&gt;
at org.apache.hadoop.hbase.regionserver.Store.flushCache(Store.java:448)&lt;br/&gt;
at org.apache.hadoop.hbase.regionserver.Store.access$100(Store.java:81)&lt;br/&gt;
at org.apache.hadoop.hbase.regionserver.Store$StoreFlusherImpl.flushCache(Store.java:1519)&lt;br/&gt;
at org.apache.hadoop.hbase.regionserver.HRegion.internalFlushcache(HRegion.java:977)&lt;br/&gt;
... 9 more&lt;/p&gt;

&lt;p&gt;3. You are right about the &quot;merges&quot;/MERGEDIR not being created anymore. Looks like this is a leftover code from original region merge code which was &lt;a href=&quot;http://svn.apache.org/viewvc/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java?r1=638612&amp;amp;r2=639775&amp;amp;pathrev=1342855&amp;amp;diff_format=h&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;modified&lt;/a&gt; as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-483&quot; title=&quot;Merge tool won&amp;#39;t merge two overlapping regions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-483&quot;&gt;&lt;del&gt;HBASE-483&lt;/del&gt;&lt;/a&gt;. However the delete code still exist. I think the constant along with the code which deletes the MERGEDIR folder can be safely removed.&lt;/p&gt;

&lt;p&gt;4. Which means that the only folder that we may even need to consider during upgrade is &quot;splits&quot;. However, it is a transient folder which should exist only until the parent region is clean up. And this does get cleaned up when the corresponding region is opened.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12530830" name="HBASE-6158_94.patch" size="1303" author="adityakishore" created="Mon, 4 Jun 2012 18:29:47 +0000"/>
                            <attachment id="12530831" name="HBASE-6158_trunk.patch" size="1427" author="adityakishore" created="Mon, 4 Jun 2012 18:29:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 4 Jun 2012 18:18:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245389</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 25 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0687z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34263</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>