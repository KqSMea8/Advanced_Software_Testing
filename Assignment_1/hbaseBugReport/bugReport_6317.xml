<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:35:42 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6317/HBASE-6317.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6317] Master clean start up and Partially enabled tables make region assignment inconsistent.</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6317</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;If we have a  table in partially enabled state (ENABLING) then on HMaster restart we treat it as a clean cluster start up and do a bulk assign.  Currently in 0.94 bulk assign will not handle ALREADY_OPENED scenarios and it leads to region assignment problems.  Analysing more on this we found that we have better way to handle these scenarios.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; == checkIfRegionBelongsToDisabled(regionInfo)
            &amp;amp;&amp;amp; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; == checkIfRegionsBelongsToEnabling(regionInfo)) {
          &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.regions) {
            regions.put(regionInfo, regionLocation);
            addToServers(regionLocation, regionInfo);
          }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We dont add to regions map so that enable table handler can handle it.  But as nothing is added to regions map we think it as a clean cluster start up.&lt;br/&gt;
Will come up with a patch tomorrow.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12597250">HBASE-6317</key>
            <summary>Master clean start up and Partially enabled tables make region assignment inconsistent.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rajesh23">rajeshbabu</assignee>
                                    <reporter username="ram_krish">ramkrishna.s.vasudevan</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Jul 2012 18:08:52 +0000</created>
                <updated>Tue, 26 Feb 2013 08:23:05 +0000</updated>
                            <resolved>Mon, 10 Dec 2012 20:34:56 +0000</resolved>
                                                    <fixVersion>0.94.4</fixVersion>
                    <fixVersion>0.95.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>11</watches>
                                                                <comments>
                            <comment id="13409043" author="lhofhansl" created="Sun, 8 Jul 2012 19:32:12 +0000"  >&lt;p&gt;@Ram: Are you planning to work on this?&lt;/p&gt;</comment>
                            <comment id="13409173" author="ram_krish" created="Mon, 9 Jul 2012 04:30:01 +0000"  >&lt;p&gt;@Lars&lt;br/&gt;
Yes, we are having a patch for this.  Will submit it today Lars.  But we can review it and then see if it can be moved to 94.1 or 94.2.&lt;/p&gt;</comment>
                            <comment id="13409176" author="lhofhansl" created="Mon, 9 Jul 2012 04:40:44 +0000"  >&lt;p&gt;Awesome. Thanks Ram.&lt;/p&gt;</comment>
                            <comment id="13409503" author="rajesh23" created="Mon, 9 Jul 2012 14:16:08 +0000"  >&lt;p&gt;Patch for 94.&lt;br/&gt;
As per the current code two scenarios may cause assignment incosistent.&lt;/p&gt;

&lt;p&gt;1)in EnableTableHandler we dont assign regions if they are present in regions map.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; List&amp;lt;HRegionInfo&amp;gt; onlineRegions =
      &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.assignmentManager.getRegionsOfTable(tableName);
    regionsInMeta.removeAll(onlineRegions);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;But in case of enabling table regions during master start up we are not adding them to regions map in rebuldUseRegions even the regions in/transition to onlineServers.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; == checkIfRegionBelongsToDisabled(regionInfo)
            &amp;amp;&amp;amp; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; == checkIfRegionsBelongsToEnabling(regionInfo)) {
          &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.regions) {
            regions.put(regionInfo, regionLocation);
            addToServers(regionLocation, regionInfo);
          }
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So we will call assign to all the regions even they are in transition/already assigned  to online servers which may cause double assignment.&lt;/p&gt;

&lt;p&gt;2) If all the tables are in ENABLING we may consider as clean cluster startup(because regions map is empty) and again call assignment for all the regions.(Which may again cause double assignment)&lt;/p&gt;

&lt;p&gt;This patch solves these problems. Please review and provide comments or suggestions.&lt;/p&gt;</comment>
                            <comment id="13409634" author="ram_krish" created="Mon, 9 Jul 2012 16:57:37 +0000"  >&lt;p&gt;Just to add on to Rajesh&lt;br/&gt;
If we are in a masterrestart scenario, even if roundrobin is set to true we still go with single assignment just to avoid the problems of bulk assignment that may lead to region assignment inconsistency.&lt;/p&gt;</comment>
                            <comment id="13409822" author="stack" created="Mon, 9 Jul 2012 20:36:48 +0000"  >

&lt;p&gt;Does this need to be public?  Can it be package private?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; List&amp;lt;HRegionInfo&amp;gt; getEnablingTableRegions(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; tableName) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;What does this protect against?  Concurrent assignment by another thread?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; addPlanIfNotPresent(HRegionInfo hri, RegionPlan plan) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Can we not ask if regionInTransition rather than add this new method?&lt;/p&gt;

&lt;p&gt;How can we get this better noticed?  The table will be offline right?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (InterruptedException e) {
+      LOG.error(&lt;span class=&quot;code-quote&quot;&gt;&quot;Error trying to enable the table &quot;&lt;/span&gt; + &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.tableNameStr, e);
     }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Why is this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.failover == &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; &amp;amp;&amp;amp; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.enablingTables.size() &amp;gt; 0){
+      &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.failover = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
+    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We are testing if failover is necessary and if there are tables in an enabling state when new master comes up, then that is good enough reason to run the failover code?  A comment would be good here I&apos;d say (especially if I have it wrong).&lt;/p&gt;

&lt;p&gt;Should we at least look at the RegionState before we remove the item from the list below (or do you think it would never be other than OPENING or something?)&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    List&amp;lt;HRegionInfo&amp;gt; hris = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.enablingTables.get(regionInfo.getTableNameAsString());
+    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(hris != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; !hris.isEmpty()){
+      hris.remove(regionInfo);
+    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Why do we do tests like if (false == checkIfRegionBelongsToDisabled(regionInfo)... instead of if (!checkIfRegionBelongsToDisabled(regionInfo)...?  (Its not you but it looks weird your replicating this oddity).&lt;/p&gt;

&lt;p&gt;I&apos;m not I follow all that is going on in here but it looks right... I can try a review again later.  Too hard to write a test I suppose lads?  Its difficult state to reproduce, this master startup stuff?&lt;/p&gt;</comment>
                            <comment id="13412390" author="lhofhansl" created="Thu, 12 Jul 2012 00:10:49 +0000"  >&lt;p&gt;@rajeshbabu: could you reply to Stacks comments?&lt;br/&gt;
Need to push 0.94.1.&lt;/p&gt;</comment>
                            <comment id="13412437" author="rajesh23" created="Thu, 12 Jul 2012 01:26:14 +0000"  >&lt;p&gt;@Lars&lt;br/&gt;
I will upload patch addressing some of his comments and writing test case for that. Upload by afternoon. &lt;/p&gt;</comment>
                            <comment id="13412572" author="rajesh23" created="Thu, 12 Jul 2012 07:04:54 +0000"  >&lt;p&gt;@Stack&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 +  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; List&amp;lt;HRegionInfo&amp;gt; getEnablingTableRegions(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; tableName) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This is needed bacause we need to get enabling table regions in EnableTableHandler which is in &lt;br/&gt;
org.apache.hadoop.hbase.master.handler package.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; addPlanIfNotPresent(HRegionInfo hri, RegionPlan plan) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;blockquote&gt;&lt;p&gt;What does this protect against? Concurrent assignment by another thread?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Can we not ask if regionInTransition rather than add this new method?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;In master restart case this region may not be in RIT.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (InterruptedException e) {
+      LOG.error(&lt;span class=&quot;code-quote&quot;&gt;&quot;Error trying to enable the table &quot;&lt;/span&gt; + &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.tableNameStr, e);
     }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Not Sure how to handle this.  Just used the way how KeeperException and IOException where handled.  It is an issue here.  But if throw out the exception EventHandler will eat it.  So better we can abort master i think?&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;A comment would be good here I&apos;d say (especially if I have it wrong).&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Comment added.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    List&amp;lt;HRegionInfo&amp;gt; hris = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.enablingTables.get(regionInfo.getTableNameAsString());
+    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(hris != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; !hris.isEmpty()){
+      hris.remove(regionInfo);
+    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We are removing just before taking action based on the znode state on master restart.  As we only populated all the regions for this table, it is ok to remove it because processRIT will take appropriate action. and RIT also will not be available here as mentioned for the other comment.&lt;br/&gt;
This is for 0.94.  We have a patch for trunk but testcase is not added for that.  If not would have moved this to RB? May be by today we can move it to RB.&lt;/p&gt;


</comment>
                            <comment id="13412772" author="stack" created="Thu, 12 Jul 2012 13:28:32 +0000"  >&lt;p&gt;I think we have more rounds of review on this to be done yet (Yes please put up on RB).  I&apos;d say Lars, you shouldn&apos;t wait on this one.  My reviews above were on half the patch only.&lt;/p&gt;</comment>
                            <comment id="13412949" author="lhofhansl" created="Thu, 12 Jul 2012 17:10:28 +0000"  >&lt;p&gt;Moving to 0.94.2 for now.&lt;/p&gt;</comment>
                            <comment id="13416326" author="rajesh23" created="Tue, 17 Jul 2012 16:11:09 +0000"  >&lt;p&gt;Patch was uploaded to RB: &lt;a href=&quot;https://reviews.apache.org/r/6011/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/6011/&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13423758" author="ram_krish" created="Fri, 27 Jul 2012 09:11:56 +0000"  >&lt;p&gt;Could some one review this?..Infact if &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6272&quot; title=&quot;In-memory region state is inconsistent&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6272&quot;&gt;&lt;del&gt;HBASE-6272&lt;/del&gt;&lt;/a&gt; goes in we have to do some rebase here.  Based on the reviews we can prepare update once.&lt;br/&gt;
@Stack,@Jimmy&lt;br/&gt;
Your comments welcome.&lt;/p&gt;
</comment>
                            <comment id="13424000" author="jxiang" created="Fri, 27 Jul 2012 17:40:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6272&quot; title=&quot;In-memory region state is inconsistent&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6272&quot;&gt;&lt;del&gt;HBASE-6272&lt;/del&gt;&lt;/a&gt; went in trunk, &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;The inconsistent we are trying to fix here is about the possible double-assignment, right?  Any other inconsistency?&lt;/p&gt;

&lt;p&gt;If it is just for double-assignment, I think it is better to prevent it from AssignmentManager (or the new RegionStates introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6272&quot; title=&quot;In-memory region state is inconsistent&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6272&quot;&gt;&lt;del&gt;HBASE-6272&lt;/del&gt;&lt;/a&gt;).&lt;br/&gt;
Whenever a new region is online, if it is assigned to a server different from that in RegionStates, we can put the corresponding info to a queue&lt;br/&gt;
and make sure it is not still assigned there, without going through zookeeper.&lt;/p&gt;

&lt;p&gt;The point is that it&apos;s hard to prevent the double-asignment from the source, like this issue. The reason is racing and distributed issues.&lt;br/&gt;
Of course, it is great if we can prevent it from the source.&lt;/p&gt;

&lt;p&gt;Based on a consistent, central place, for example, RegionStates, I think it is easier to prevent from some bad things.&lt;/p&gt;
</comment>
                            <comment id="13424584" author="rajesh23" created="Sun, 29 Jul 2012 16:37:36 +0000"  >&lt;p&gt;@Jimmy,&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The inconsistent we are trying to fix here is about the possible double-assignment, right? Any other inconsistency?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes double assignments only. But it may not like calling assign twice for a region at a time(one region available as online region on two region servers)&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;If it is just for double-assignment, I think it is better to prevent it from AssignmentManager (or the new RegionStates introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6272&quot; title=&quot;In-memory region state is inconsistent&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6272&quot;&gt;&lt;del&gt;HBASE-6272&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;But region state information for all regions may not be available during master start up. If regions are in transition only we will update region state and put into rit in processRIT. We may not have region state info for the ENABLING table regions which are already assigned or assign not yet started.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Whenever a new region is online, if it is assigned to a server different from that in RegionStates, we can put the corresponding info to a queue&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Let&apos;s suppose partially enabled regions are going to assign to a RS in the middle master restarted then the regions may be assigned to other region server also. We can avoid double assignments happening at a time by region states introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6272&quot; title=&quot;In-memory region state is inconsistent&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6272&quot;&gt;&lt;del&gt;HBASE-6272&lt;/del&gt;&lt;/a&gt;. But here we may call assign(which may assign region to RS1) for a region only once after master restart but before restart the region may be available as online region on other region server(RS2).&lt;/p&gt;

&lt;p&gt;Please correct me if i am wrong. &lt;/p&gt;</comment>
                            <comment id="13424646" author="jxiang" created="Mon, 30 Jul 2012 00:21:43 +0000"  >&lt;p&gt;You are right. Another thing, you said ALREADY_OPENED is not handled by bulk assigned, is that true?&lt;br/&gt;
Your patch may still not cover all scenarios, for example, if the deadServers is not empty:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    if (this.failover == false &amp;amp;&amp;amp; this.enablingTables.size() &amp;gt; 0 &amp;amp;&amp;amp; deadServers.isEmpty()) {
      this.failover = true;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Why not make sure the bulk assigner handle ALREADY_OPENED properly, if not already?&lt;/p&gt;</comment>
                            <comment id="13424659" author="rajesh23" created="Mon, 30 Jul 2012 01:51:46 +0000"  >&lt;blockquote&gt;&lt;p&gt;ALREADY_OPENED is not handled by bulk assigned, is that true?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;It has handled in trunk as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6012&quot; title=&quot;Handling RegionOpeningState for bulk assign&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6012&quot;&gt;&lt;del&gt;HBASE-6012&lt;/del&gt;&lt;/a&gt; but not in 94. We can back port to 94.&lt;/p&gt;

&lt;p&gt;But this itself may not solve the problem because &lt;br/&gt;
-&amp;gt;during clean cluster start up if we set &quot;hbase.master.startup.retainassign&quot; to true we will call retainAssignment the regions may be assigned to same region servers before master restart other wise we will get bulk plan by round robin assignment and we may get different RS than RS before master restart( which will cause double assignment).&lt;br/&gt;
-&amp;gt; in case of failover also while recovering ENABLING tables&lt;br/&gt;
if &quot;hbase.master.enabletable.roundrobin&quot; set to true we will get different RS in bulk plan than RS before restart(double assignment again)&lt;br/&gt;
-&amp;gt; lets suppose some of ENABLING table regions are in transition during master startup they are not added to regionAssignments in regionStates then we will consider the regions also for assignment in EnableTableHandler which may cause double assignments.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.failover == &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; &amp;amp;&amp;amp; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.enablingTables.size() &amp;gt; 0 &amp;amp;&amp;amp; deadServers.isEmpty()) {
      &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.failover = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;blockquote&gt;&lt;p&gt;Your patch may still not cover all scenarios, for example, if the deadServers is not empty&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;failover is false and deadServers not empty means its really clean cluster startup considering as failover will slow down master startup. If whole cluster is down then no need to worry about double assignments. &lt;br/&gt;
If all the tables are in ENABLING state then failover is false and deadServers is empty then we can consider as failover and proceed startup.&lt;/p&gt;</comment>
                            <comment id="13428846" author="rajesh23" created="Sun, 5 Aug 2012 13:08:45 +0000"  >&lt;p&gt;@Jimmy,&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Your patch may still not cover all scenarios, for example, if the deadServers is not empty&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;You are correct in one scenario. If all the tables are in ENABLING state(partially enabled) and one or more region servers holding regions of those tables went down and master restarted. &lt;/p&gt;

&lt;p&gt;@Jimmy/@Stack&lt;br/&gt;
Updated the patch addressing above scenario and posted on RB:&lt;a href=&quot;https://reviews.apache.org/r/6011/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/6011/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please review and provide your comments/suggestions.&lt;/p&gt;</comment>
                            <comment id="13429643" author="rajesh23" created="Tue, 7 Aug 2012 01:20:08 +0000"  >&lt;p&gt;Same patch on RB.&lt;/p&gt;</comment>
                            <comment id="13429978" author="hadoopqa" created="Tue, 7 Aug 2012 06:57:29 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12539396/HBASE-6317_trunk_2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12539396/HBASE-6317_trunk_2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The applied patch generated 5 javac compiler warnings (more than the trunk&apos;s current 4 warnings).&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 9 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.backup.example.TestZooKeeperTableArchiveClient&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.TestAtomicOperation&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2526//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2526//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2526//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2526//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2526//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2526//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2526//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2526//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2526//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2526//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2526//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2526//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2526//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2526//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13432004" author="ram_krish" created="Thu, 9 Aug 2012 17:24:26 +0000"  >&lt;p&gt;Pls review the patch and provide your comments.&lt;/p&gt;</comment>
                            <comment id="13432024" author="jxiang" created="Thu, 9 Aug 2012 17:54:07 +0000"  >&lt;p&gt;I was thinking about the issue. In rebuilding the user region, if a region is already assigned, why shouldn&apos;t we put them in the map if the table is disabled or enabling? We can&apos;t pretend they are not assigned, right? So, if they are in the map, when bulk-assignment happens, they are already online.&lt;/p&gt;

&lt;p&gt;In forceRegionStateToOffline, currently, we just check the region transition state.  We need to check the current region state too if not in transition.&lt;br/&gt;
If not in transition, but assigned, we don&apos;t need to assign it any more.  Will this solve the issue?&lt;/p&gt;</comment>
                            <comment id="13432081" author="rajesh23" created="Thu, 9 Aug 2012 19:11:27 +0000"  >&lt;p&gt;@Jimmy&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;why shouldn&apos;t we put them in the map if the table is disabled or enabling?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;In case of disabled we are sure that all the regions of table are offline so we should not add to regionAssignments. May be we can add to region states with state as CLOSED.&lt;br/&gt;
In case of enabling adding ENABLING table regions to regionAssignments cause data loss(regions never assigned until master restarted).&lt;br/&gt;
Consider a scenario:-&lt;br/&gt;
1)Lets take a table T with regions A,B,C and after table creation A,B,C are in RS1.&lt;br/&gt;
2)now disabled table.(All regions are in offline as for META A,B,C are in RS1)&lt;br/&gt;
3)enable table and lets suppose its partially enabled.(A is in transition,B is assigned to RS2,C assignment not yet started)&lt;br/&gt;
4)now only master restarted(All region servers are in online)&lt;br/&gt;
5)during rebuildUserRegions if we add ENABLING table regions on onlineServer to regionAssignments means A,B,C are online regions(In case of B its correct but A and B not because not yet assigned to any region server).&lt;br/&gt;
6)Any way B will be handled as part of processRIT&lt;br/&gt;
7)Now while recovering enabling table we will check for the regions not in regionAssignments and assign those through bulk assign.(C wont be served by any region server but available as online region) which is unexpected.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;If not in transition, but assigned, we don&apos;t need to assign it any more. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This will helpful to avoid double assignments for regions already in transtion during EnableTableHandler but may not solve problem fully.&lt;/p&gt;</comment>
                            <comment id="13432111" author="jxiang" created="Thu, 9 Aug 2012 20:19:20 +0000"  >&lt;p&gt;The point is that if a table is in enabling state, its regions could be assigned, could be not. It is not good to assume they are online, or offline.&lt;br/&gt;
Currently we assume they are offline.  Your patch is to change the EnableTableHandler to make sure assign them to the same region server to avoid&lt;br/&gt;
possible double-assignments. Am I right?&lt;/p&gt;</comment>
                            <comment id="13432487" author="rajesh23" created="Fri, 10 Aug 2012 02:15:29 +0000"  >&lt;p&gt;@Jimmy&lt;br/&gt;
Yes absolutely correct.&lt;/p&gt;</comment>
                            <comment id="13432680" author="ram_krish" created="Fri, 10 Aug 2012 10:04:45 +0000"  >&lt;p&gt;@Jimmy&lt;br/&gt;
This patch tries to make the partially enabled tables to go back to the same location so that double assignment can be avoided and also making it to go thro bulk assigner will again lead to double assignment.  So on master restart we avoid bulk assigner from getting used if there are some table in Enabling state and the regions of those that should be assigned. Thanks for your time Jimmy.&lt;/p&gt;</comment>
                            <comment id="13434382" author="ram_krish" created="Tue, 14 Aug 2012 18:50:27 +0000"  >&lt;p&gt;@Jimmy/@Stack&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6060&quot; title=&quot;Regions&amp;#39;s in OPENING state from failed regionservers takes a long time to recover&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6060&quot;&gt;&lt;del&gt;HBASE-6060&lt;/del&gt;&lt;/a&gt; also i have rebased.  Pls review and provide your comments.&lt;/p&gt;</comment>
                            <comment id="13442001" author="lhofhansl" created="Sun, 26 Aug 2012 01:19:45 +0000"  >&lt;p&gt;I assume that won&apos;t be ready for 0.94.2. Pushing out.&lt;/p&gt;</comment>
                            <comment id="13456300" author="jxiang" created="Sat, 15 Sep 2012 03:39:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6776&quot; title=&quot;Opened region of disabled table is not added to online region list&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6776&quot;&gt;&lt;del&gt;HBASE-6776&lt;/del&gt;&lt;/a&gt; should fix this issue.  I prefer &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6776&quot; title=&quot;Opened region of disabled table is not added to online region list&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6776&quot;&gt;&lt;del&gt;HBASE-6776&lt;/del&gt;&lt;/a&gt;, which is simple and the right way to fix this problem, isn&apos;t it?&lt;/p&gt;</comment>
                            <comment id="13456311" author="yuzhihong@gmail.com" created="Sat, 15 Sep 2012 04:35:42 +0000"  >&lt;p&gt;The trunk patch for this issue adds testMasterRestartWhenTableInEnabling.&lt;br/&gt;
When I concatenate that test onto Jimmy&apos;s patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6776&quot; title=&quot;Opened region of disabled table is not added to online region list&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6776&quot;&gt;&lt;del&gt;HBASE-6776&lt;/del&gt;&lt;/a&gt;, the test seems to hang:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; prio=10 tid=0x0000000042063800 nid=0x7b4 runnable [0x00007f1033837000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: RUNNABLE
	at org.apache.hadoop.conf.Configuration.getProps(Configuration.java:1061)
	- locked &amp;lt;0x000000008a2a8190&amp;gt; (a org.apache.hadoop.conf.Configuration)
	at org.apache.hadoop.conf.Configuration.get(Configuration.java:416)
	at org.apache.hadoop.conf.Configuration.getLong(Configuration.java:521)
	at org.apache.hadoop.hbase.client.ServerCallable.withRetries(ServerCallable.java:158)
	at org.apache.hadoop.hbase.client.ClientScanner.next(ClientScanner.java:281)
	at org.apache.hadoop.hbase.catalog.MetaReader.fullScan(MetaReader.java:570)
	at org.apache.hadoop.hbase.catalog.MetaReader.getTableRegionsAndLocations(MetaReader.java:491)
	at org.apache.hadoop.hbase.catalog.MetaReader.getTableRegions(MetaReader.java:369)
	at org.apache.hadoop.hbase.master.handler.EnableTableHandler.handleEnableTable(EnableTableHandler.java:127)
	at org.apache.hadoop.hbase.master.handler.EnableTableHandler.process(EnableTableHandler.java:106)
	at org.apache.hadoop.hbase.master.AssignmentManager.recoverTableInEnablingState(AssignmentManager.java:2558)
	at org.apache.hadoop.hbase.master.AssignmentManager.joinCluster(AssignmentManager.java:340)
	at org.apache.hadoop.hbase.master.TestAssignmentManager.testMasterRestartWhenTableInEnabling(TestAssignmentManager.java:888)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So this issue is not entirely covered by &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6776&quot; title=&quot;Opened region of disabled table is not added to online region list&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6776&quot;&gt;&lt;del&gt;HBASE-6776&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13456430" author="jxiang" created="Sat, 15 Sep 2012 15:30:26 +0000"  >&lt;p&gt;One scenario is not covered by &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6776&quot; title=&quot;Opened region of disabled table is not added to online region list&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6776&quot;&gt;&lt;del&gt;HBASE-6776&lt;/del&gt;&lt;/a&gt;.  I will update the patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6776&quot; title=&quot;Opened region of disabled table is not added to online region list&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6776&quot;&gt;&lt;del&gt;HBASE-6776&lt;/del&gt;&lt;/a&gt; to handle disabled table only.  For enabling table, let this patch handle it.&lt;/p&gt;</comment>
                            <comment id="13456434" author="yuzhihong@gmail.com" created="Sat, 15 Sep 2012 15:49:27 +0000"  >&lt;p&gt;@Rajesh:&lt;br/&gt;
Can you rebase patch on trunk ?&lt;br/&gt;
I encountered some compilation issue with your change to TestAssignmentManager.java&lt;/p&gt;</comment>
                            <comment id="13457143" author="jxiang" created="Mon, 17 Sep 2012 16:49:51 +0000"  >&lt;p&gt;I think the idea of the patch is great. However, I prefer to isolate the change in EnableTableHandler and don&apos;t touch AssignmentManager.&lt;br/&gt;
Even roundrobinassignment is set, if there is a server entry in meta for a region of an enabling table, I think we can just ignore it and assign to the server if the server is online.  So we don&apos;t need to pass masterrestart around. We can update the region plan only in EnableTableHandler. The assumption is that if the server entry is already in meta, we should obey it and it is there because of a previous roundrobinassignment.  What do you think?&lt;/p&gt;</comment>
                            <comment id="13457543" author="rajesh23" created="Tue, 18 Sep 2012 02:09:49 +0000"  >&lt;p&gt;@Jimmy,&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;I prefer to isolate the change in EnableTableHandler and don&apos;t touch AssignmentManager.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Ok.&lt;br/&gt;
One scenario need to handle in AssignmentManager,any way its done in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6381&quot; title=&quot;AssignmentManager should use the same logic for clean startup and failover&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6381&quot;&gt;&lt;del&gt;HBASE-6381&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
If all the tables are in ENABLING or ENABLING+DISABLED, we are considering it as a clean cluster startup and assigning all ENABLING table regions again(which may cause inconsistency). This has handled in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6381&quot; title=&quot;AssignmentManager should use the same logic for clean startup and failover&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6381&quot;&gt;&lt;del&gt;HBASE-6381&lt;/del&gt;&lt;/a&gt; by delegating ENABLING table regions assignment to EnableTableHanler.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;So we don&apos;t need to pass masterrestart around. We can update the region plan only in EnableTableHandler.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Select the regions not assigned and not in transition, we can update their plans in EnableTableHandler only, But in BulkEnabler we dont know whether its roundroblinassignment or normal assignment. Instead of passing masterrestart around, can we do like below in ETH to ignore roundrobinassignment? (master restart flag is there in EnableTableHandler only)&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; roundRobinAssignment = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.masterRestart){
      roundRobinAssignment = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.server.getConfiguration().getBoolean(
          &lt;span class=&quot;code-quote&quot;&gt;&quot;hbase.master.enabletable.roundrobin&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
      &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.server.getConfiguration().setBoolean(&lt;span class=&quot;code-quote&quot;&gt;&quot;hbase.master.enabletable.roundrobin&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
    }
    BulkEnabler bd = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BulkEnabler(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.server, regions,
        countOfRegionsInTable);
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (bd.bulkAssign()) {
        done = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
      }
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (InterruptedException e) {
      LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Enable operation was interrupted when enabling table &apos;&quot;&lt;/span&gt;
        + &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.tableNameStr + &lt;span class=&quot;code-quote&quot;&gt;&quot;&apos;&quot;&lt;/span&gt;);
      &lt;span class=&quot;code-comment&quot;&gt;// Preserve the interrupt.
&lt;/span&gt;      &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.currentThread().interrupt();
    } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
      &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.server.getConfiguration().setBoolean(&lt;span class=&quot;code-quote&quot;&gt;&quot;hbase.master.enabletable.roundrobin&quot;&lt;/span&gt;,
          roundRobinAssignment);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="13457576" author="jxiang" created="Tue, 18 Sep 2012 03:29:51 +0000"  >&lt;p&gt;Can we pass masterRestart to BulkEnabler, either function or constructor?&lt;/p&gt;</comment>
                            <comment id="13457855" author="rajesh23" created="Tue, 18 Sep 2012 14:32:05 +0000"  >&lt;p&gt;Patch for trunk. Please review and provide comments/suggestions.&lt;/p&gt;</comment>
                            <comment id="13457973" author="jxiang" created="Tue, 18 Sep 2012 17:30:50 +0000"  >&lt;p&gt;+1 for the trunk version. nit, probably it is better to call it retainAssignment instead of masterRestart.&lt;/p&gt;</comment>
                            <comment id="13458011" author="ram_krish" created="Tue, 18 Sep 2012 18:08:46 +0000"  >&lt;p&gt;Can we commit this after &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6381&quot; title=&quot;AssignmentManager should use the same logic for clean startup and failover&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6381&quot;&gt;&lt;del&gt;HBASE-6381&lt;/del&gt;&lt;/a&gt; goes in? &lt;/p&gt;</comment>
                            <comment id="13458021" author="jxiang" created="Tue, 18 Sep 2012 18:20:48 +0000"  >&lt;p&gt;It is ok with me.&lt;/p&gt;</comment>
                            <comment id="13466693" author="yuzhihong@gmail.com" created="Mon, 1 Oct 2012 08:34:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6381&quot; title=&quot;AssignmentManager should use the same logic for clean startup and failover&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6381&quot;&gt;&lt;del&gt;HBASE-6381&lt;/del&gt;&lt;/a&gt; has gone in.&lt;br/&gt;
Shall we consider checking in this patch ?&lt;/p&gt;</comment>
                            <comment id="13466729" author="rajesh23" created="Mon, 1 Oct 2012 10:35:59 +0000"  >&lt;p&gt;Rebased patch after &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6381&quot; title=&quot;AssignmentManager should use the same logic for clean startup and failover&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6381&quot;&gt;&lt;del&gt;HBASE-6381&lt;/del&gt;&lt;/a&gt; addressing Jimmy&apos;s comment. Uploaded same to RB: &lt;a href=&quot;https://reviews.apache.org/r/6011/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/6011/&lt;/a&gt;&lt;br/&gt;
Please review and provide comments/suggestions.&lt;/p&gt;</comment>
                            <comment id="13466740" author="hadoopqa" created="Mon, 1 Oct 2012 11:38:00 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12547206/HBASE-6317_trunk_4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12547206/HBASE-6317_trunk_4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 149 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 7 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestMultiParallel&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2974//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2974//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2974//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2974//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2974//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2974//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2974//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2974//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2974//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2974//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2974//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2974//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2974//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2974//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13467036" author="ram_krish" created="Mon, 1 Oct 2012 18:15:30 +0000"  >&lt;p&gt;@Jimmy/@Stack&lt;br/&gt;
Pls review the patch.  If it is ok i shall commit it before other AM related stuff goes in. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13467045" author="yuzhihong@gmail.com" created="Mon, 1 Oct 2012 18:20:43 +0000"  >&lt;p&gt;I ran TestMultiParallel locally based on the latest trunk patch and it passed.&lt;br/&gt;
@Rajesh:&lt;br/&gt;
You may want to run through Hadoop QA again.&lt;/p&gt;</comment>
                            <comment id="13467053" author="ram_krish" created="Mon, 1 Oct 2012 18:25:04 +0000"  >&lt;p&gt;@Ted&lt;br/&gt;
As i know about this patch very well the testcase change should not be related.  Thanks Ted.&lt;/p&gt;</comment>
                            <comment id="13467075" author="jxiang" created="Mon, 1 Oct 2012 18:41:22 +0000"  >&lt;p&gt;I posted some comment in the RB.  I am +1 to get it in with the minor issue fixed when you commit it.&lt;/p&gt;</comment>
                            <comment id="13467153" author="stack" created="Mon, 1 Oct 2012 20:27:57 +0000"  >&lt;p&gt;I posted on rb too.. +1 on commit after addressing Jimmys&apos; comment&lt;/p&gt;</comment>
                            <comment id="13467449" author="rajesh23" created="Tue, 2 Oct 2012 03:42:02 +0000"  >&lt;p&gt;Patch addressing Jimmy&apos;s,Stack&apos;s comments. &lt;br/&gt;
Thanks Stack,Jimmy,Ram,Ted for review. &lt;/p&gt;</comment>
                            <comment id="13467473" author="hadoopqa" created="Tue, 2 Oct 2012 04:34:51 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12547333/HBASE-6317_trunk_5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12547333/HBASE-6317_trunk_5.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 149 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 7 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2981//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2981//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2981//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2981//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2981//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2981//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2981//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2981//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2981//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2981//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2981//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2981//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2981//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2981//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13467588" author="ram_krish" created="Tue, 2 Oct 2012 09:20:40 +0000"  >&lt;p&gt;Thanks for the patch Rajesh&lt;br/&gt;
Thanks for the review Stack, Jimmy and Ted.&lt;/p&gt;</comment>
                            <comment id="13467601" author="hudson" created="Tue, 2 Oct 2012 10:09:04 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3405 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3405/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3405/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6317&quot; title=&quot;Master clean start up and Partially enabled tables make region assignment inconsistent.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6317&quot;&gt;&lt;del&gt;HBASE-6317&lt;/del&gt;&lt;/a&gt; Master clean start up and Partially enabled tables make region assignment inconsistent (RajeshBabu) (Revision 1392802)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
ramkrishna : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/handler/EnableTableHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestAssignmentManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13467624" author="hudson" created="Tue, 2 Oct 2012 11:42:44 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #203 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/203/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/203/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6317&quot; title=&quot;Master clean start up and Partially enabled tables make region assignment inconsistent.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6317&quot;&gt;&lt;del&gt;HBASE-6317&lt;/del&gt;&lt;/a&gt; Master clean start up and Partially enabled tables make region assignment inconsistent (RajeshBabu) (Revision 1392802)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
ramkrishna : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/handler/EnableTableHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestAssignmentManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13467765" author="ram_krish" created="Tue, 2 Oct 2012 14:47:22 +0000"  >&lt;p&gt;Not committed to other branches other than trunk.. Will resolve commiting in other branches also.&lt;/p&gt;</comment>
                            <comment id="13488493" author="lhofhansl" created="Thu, 1 Nov 2012 05:48:16 +0000"  >&lt;p&gt;So should we commit this 0.92/0.94?&lt;/p&gt;</comment>
                            <comment id="13488522" author="ram_krish" created="Thu, 1 Nov 2012 07:16:29 +0000"  >&lt;p&gt;Yes Lars.  I can ask Rajesh to prepare this if he is free.  I am not available for next few days otherwise i would have a given a go at this.&lt;/p&gt;</comment>
                            <comment id="13490787" author="lhofhansl" created="Mon, 5 Nov 2012 18:14:00 +0000"  >&lt;p&gt;Moving to 0.94.4, we can pull it back if it gets done in time.&lt;/p&gt;</comment>
                            <comment id="13493914" author="rajesh23" created="Fri, 9 Nov 2012 11:02:02 +0000"  >&lt;p&gt;Patch for 94. Please review and provide comments/suggestions.&lt;br/&gt;
@Lars,@Ram&lt;br/&gt;
Sorry for delay.&lt;/p&gt;</comment>
                            <comment id="13527322" author="lhofhansl" created="Sun, 9 Dec 2012 02:32:03 +0000"  >&lt;p&gt;Can&apos;t say I fully grok the patch (this is not really my area of expertise).&lt;br/&gt;
Upon cursory inspection it looks good.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ram_krish&quot; class=&quot;user-hover&quot; rel=&quot;ram_krish&quot;&gt;ramkrishna.s.vasudevan&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rajesh23&quot; class=&quot;user-hover&quot; rel=&quot;rajesh23&quot;&gt;rajeshbabu&lt;/a&gt; Do you have this deployed in a real cluster somewhere?&lt;/p&gt;</comment>
                            <comment id="13527377" author="ram_krish" created="Sun, 9 Dec 2012 09:10:28 +0000"  >&lt;p&gt;ya Lars...this patch is running in the code base as i remember.  Rajesh you would want to comment on this?&lt;/p&gt;</comment>
                            <comment id="13527428" author="rajesh23" created="Sun, 9 Dec 2012 12:42:14 +0000"  >&lt;p&gt;@Lars,&lt;br/&gt;
We have merged this into our version long back and its running in real cluster testing everyday.&lt;/p&gt;</comment>
                            <comment id="13527632" author="lhofhansl" created="Sun, 9 Dec 2012 20:54:06 +0000"  >&lt;p&gt;Cool... +1 on commit then. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
I&apos;m happy happy to do that, unless you guys would like to.&lt;/p&gt;</comment>
                            <comment id="13527633" author="lhofhansl" created="Sun, 9 Dec 2012 20:54:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tedyu@apache.org&quot;&gt;Ted Yu&lt;/a&gt; Your call on 0.92.&lt;/p&gt;</comment>
                            <comment id="13527644" author="yuzhihong@gmail.com" created="Sun, 9 Dec 2012 22:14:24 +0000"  >&lt;p&gt;Integrated to 0.94 branch.&lt;/p&gt;

&lt;p&gt;Thanks for the patch, Rajesh.&lt;/p&gt;

&lt;p&gt;0.94 patch doesn&apos;t apply to 0.92:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
6 out of 10 hunks FAILED -- saving rejects to file src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java.rej
(Stripping trailing CRs from patch.)
patching file src/main/java/org/apache/hadoop/hbase/master/handler/EnableTableHandler.java
Hunk #10 FAILED at 202.
Hunk #11 FAILED at 210.
2 out of 11 hunks FAILED -- saving rejects to file src/main/java/org/apache/hadoop/hbase/master/handler/EnableTableHandler.java.rej
(Stripping trailing CRs from patch.)
patching file src/test/java/org/apache/hadoop/hbase/master/TestAssignmentManager.java
Hunk #1 succeeded at 63 with fuzz 2 (offset -11 lines).
Hunk #2 FAILED at 81.
Hunk #3 FAILED at 762.
Hunk #4 succeeded at 337 with fuzz 2 (offset -573 lines).
Hunk #5 succeeded at 452 (offset -573 lines).
2 out of 5 hunks FAILED -- saving rejects to file src/test/java/org/apache/hadoop/hbase/master/TestAssignmentManager.java.rej
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13527649" author="hudson" created="Sun, 9 Dec 2012 23:10:29 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #616 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/616/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/616/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6317&quot; title=&quot;Master clean start up and Partially enabled tables make region assignment inconsistent.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6317&quot;&gt;&lt;del&gt;HBASE-6317&lt;/del&gt;&lt;/a&gt; Master clean start up and Partially enabled tables make region assignment inconsistent (Rajesh) (Revision 1419174)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/handler/EnableTableHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/master/TestAssignmentManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13527698" author="lhofhansl" created="Mon, 10 Dec 2012 03:04:21 +0000"  >&lt;p&gt;Try to make a 0.92 patch, Ted? Or should we file a separate backporting issue, so that we can close this one?&lt;/p&gt;</comment>
                            <comment id="13527699" author="yuzhihong@gmail.com" created="Mon, 10 Dec 2012 03:21:03 +0000"  >&lt;p&gt;I think we can create another JIRA when 0.92 backport is ready.&lt;br/&gt;
Currently I have several JIRAs to work on.&lt;/p&gt;</comment>
                            <comment id="13527712" author="yuzhihong@gmail.com" created="Mon, 10 Dec 2012 04:39:15 +0000"  >&lt;p&gt;Rajesh informed me offline that he would prepare patch for 0.92 branch.&lt;/p&gt;</comment>
                            <comment id="13528134" author="rajesh23" created="Mon, 10 Dec 2012 18:25:46 +0000"  >&lt;p&gt;Patch for 92.&lt;/p&gt;</comment>
                            <comment id="13528252" author="yuzhihong@gmail.com" created="Mon, 10 Dec 2012 20:34:56 +0000"  >&lt;p&gt;Integrated to 0.92 as well.&lt;/p&gt;

&lt;p&gt;Thanks Rajesh for the backport.&lt;/p&gt;</comment>
                            <comment id="13528468" author="hudson" created="Tue, 11 Dec 2012 00:03:47 +0000"  >&lt;p&gt;Integrated in HBase-0.92 #607 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92/607/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92/607/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6317&quot; title=&quot;Master clean start up and Partially enabled tables make region assignment inconsistent.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6317&quot;&gt;&lt;del&gt;HBASE-6317&lt;/del&gt;&lt;/a&gt; Master clean start up and Partially enabled tables make region assignment inconsistent (Rajesh) (Revision 1419736)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/handler/EnableTableHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/master/TestAssignmentManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13529433" author="hudson" created="Tue, 11 Dec 2012 23:08:24 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #86 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/86/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/86/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6317&quot; title=&quot;Master clean start up and Partially enabled tables make region assignment inconsistent.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6317&quot;&gt;&lt;del&gt;HBASE-6317&lt;/del&gt;&lt;/a&gt; Master clean start up and Partially enabled tables make region assignment inconsistent (Rajesh) (Revision 1419174)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/handler/EnableTableHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/master/TestAssignmentManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13544442" author="hudson" created="Sat, 5 Jan 2013 00:42:34 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security-on-Hadoop-23 #10 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/10/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/10/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6317&quot; title=&quot;Master clean start up and Partially enabled tables make region assignment inconsistent.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6317&quot;&gt;&lt;del&gt;HBASE-6317&lt;/del&gt;&lt;/a&gt; Master clean start up and Partially enabled tables make region assignment inconsistent (Rajesh) (Revision 1419174)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/handler/EnableTableHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/master/TestAssignmentManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13544558" author="hudson" created="Sat, 5 Jan 2013 03:25:35 +0000"  >&lt;p&gt;Integrated in HBase-0.92-security #147 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92-security/147/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92-security/147/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6317&quot; title=&quot;Master clean start up and Partially enabled tables make region assignment inconsistent.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6317&quot;&gt;&lt;del&gt;HBASE-6317&lt;/del&gt;&lt;/a&gt; Master clean start up and Partially enabled tables make region assignment inconsistent (Rajesh) (Revision 1419736)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/handler/EnableTableHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/master/TestAssignmentManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12607523">HBASE-6776</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12560230" name="HBASE-6317_92.patch" size="19366" author="rajesh23" created="Mon, 10 Dec 2012 18:25:46 +0000"/>
                            <attachment id="12535672" name="HBASE-6317_94.patch" size="13591" author="rajesh23" created="Mon, 9 Jul 2012 13:56:23 +0000"/>
                            <attachment id="12536182" name="HBASE-6317_94_3.patch" size="22468" author="rajesh23" created="Thu, 12 Jul 2012 06:53:18 +0000"/>
                            <attachment id="12552812" name="HBASE-6317_94_4.patch" size="20890" author="rajesh23" created="Fri, 9 Nov 2012 11:02:02 +0000"/>
                            <attachment id="12539396" name="HBASE-6317_trunk_2.patch" size="26050" author="rajesh23" created="Tue, 7 Aug 2012 01:20:08 +0000"/>
                            <attachment id="12545569" name="HBASE-6317_trunk_3.patch" size="12489" author="rajesh23" created="Tue, 18 Sep 2012 14:32:05 +0000"/>
                            <attachment id="12547206" name="HBASE-6317_trunk_4.patch" size="14028" author="rajesh23" created="Mon, 1 Oct 2012 10:29:31 +0000"/>
                            <attachment id="12547333" name="HBASE-6317_trunk_5.patch" size="12859" author="rajesh23" created="Tue, 2 Oct 2012 03:39:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 8 Jul 2012 19:32:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>241800</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 49 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02d47:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11726</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>