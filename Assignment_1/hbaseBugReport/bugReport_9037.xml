<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:00:49 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-9037/HBASE-9037.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-9037] LruBlockCache is too verbose at Debug level</title>
                <link>https://issues.apache.org/jira/browse/HBASE-9037</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;From Stack on the mailing list:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I see this every 4ms or so when reading.&lt;/p&gt;

&lt;p&gt;21 2013-07-24 10:55:24,594 DEBUG&lt;br/&gt;
org.apache.hadoop.hbase.io.hfile.LruBlockCache: Block cache LRU eviction&lt;br/&gt;
completed; freed=24.78 MB, total=185.13 MB, single=0 KB, multi=207.88 MB,&lt;br/&gt;
memory=0.64 KB&lt;br/&gt;
20 2013-07-24 10:55:28,975 DEBUG&lt;br/&gt;
org.apache.hadoop.hbase.io.hfile.LruBlockCache: Block cache LRU eviction&lt;br/&gt;
started; Attempting to free 24.75 MB of total=209.91 MB&lt;/p&gt;

&lt;p&gt;Loads of it.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Should either limit the log frequency of this, or change to trace.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12659682">HBASE-9037</key>
            <summary>LruBlockCache is too verbose at Debug level</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="lhofhansl">Lars Hofhansl</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Jul 2013 23:13:41 +0000</created>
                <updated>Fri, 26 Jul 2013 22:22:32 +0000</updated>
                            <resolved>Thu, 25 Jul 2013 05:25:49 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13719101" author="lhofhansl" created="Thu, 25 Jul 2013 00:36:00 +0000"  >&lt;p&gt;So a couple of questions:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;This happened with a fairly small cache (~200mb). And it evicts the difference between this.maxSize * this.acceptableFactor and this.maxSize * this.minFactor. In this case this would be 10% of 200mb = 20mb. So each 20mb of new cached data we&apos;d see an eviction run.&lt;br/&gt;
This difference is larger with a larger cache, so we would see fewer of these messages.&lt;/li&gt;
	&lt;li&gt;Should we increase the default differences between min_factor (0.75) and max_factor (0.85)?&lt;/li&gt;
	&lt;li&gt;Does anyone want to see these messages at all?&lt;/li&gt;
	&lt;li&gt;Should we just trace these?&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="13719113" author="jdcryans" created="Thu, 25 Jul 2013 00:46:51 +0000"  >&lt;p&gt;I&apos;ve always found them useful and they only tend to annoy devs testing loads of reads on small heaps. On live systems you don&apos;t see it as often, and if you do then you got a pretty bad churn problem.&lt;/p&gt;

&lt;p&gt;Also on trunk those factors are different:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt; DEFAULT_MIN_FACTOR = 0.95f;
  &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt; DEFAULT_ACCEPTABLE_FACTOR = 0.99f;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13719227" author="lhofhansl" created="Thu, 25 Jul 2013 04:56:26 +0000"  >&lt;p&gt;So in trunk we&apos;d see &lt;b&gt;more&lt;/b&gt; of these messages as the difference between min and max is smaller.&lt;/p&gt;

&lt;p&gt;I think I should just mark this as invalid.&lt;/p&gt;</comment>
                            <comment id="13719232" author="stack" created="Thu, 25 Jul 2013 05:01:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt; ok.&lt;/p&gt;</comment>
                            <comment id="13721289" author="sershe" created="Fri, 26 Jul 2013 22:11:55 +0000"  >&lt;p&gt;I would actually +1 this, I thought it was already moved to trace layer... I see these things when I run perf tests all the time, it is unreasonable to expect for all data to be in cache in real-world scenarios imho&lt;/p&gt;</comment>
                            <comment id="13721299" author="jdcryans" created="Fri, 26 Jul 2013 22:22:32 +0000"  >&lt;p&gt;From a real world, read-heavy, in-production region server:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ grep &quot;Block cache LRU eviction completed&quot; /path/to/logs/hbase-hadoop-regionserver-host.log.2013-07-25 | wc -l
49
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here&apos;s one example:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2013-07-25 00:13:36,934 DEBUG org.apache.hadoop.hbase.io.hfile.LruBlockCache: Block cache LRU eviction completed; freed=1.69 GB, total=12.69 GB, single=5 GB, multi=9.24 GB, memory=0 KB
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;&lt;p&gt;I see these things when I run perf tests all the time&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Like I said previously, this is the only time it&apos;s going to annoy you.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;it is unreasonable to expect for all data to be in cache in real-world scenarios imho&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Real-world scenarios usually retain most of the working data set in cache.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 25 Jul 2013 00:46:51 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>339874</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 20 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1mmbr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>340192</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>