<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:09:18 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-3329/HBASE-3329.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-3329] HLog splitting after RS/cluster death should directly create HFiles</title>
                <link>https://issues.apache.org/jira/browse/HBASE-3329</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;After a RS dies or the cluster goes down and we are recovering, we first split HLogs into the logs for the regions. Then the region servers that host the regions replay the logs and open the regions.&lt;/p&gt;

&lt;p&gt;This can be made more efficient by directly creating HFiles from the HLogs (instead of producing a split HLogs file).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12492903">HBASE-3329</key>
            <summary>HLog splitting after RS/cluster death should directly create HFiles</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="karthik.ranga">Karthik Ranganathan</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Dec 2010 02:10:51 +0000</created>
                <updated>Sat, 19 Jul 2014 00:37:30 +0000</updated>
                            <resolved>Sat, 19 Jul 2014 00:37:30 +0000</resolved>
                                                                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12970056" author="tlipcon" created="Fri, 10 Dec 2010 02:23:17 +0000"  >&lt;p&gt;I was thinking about this a bit, but we have to be cognizant of memory usage on the master. In order to limit master memory usage during splitting, we may need to &quot;spill&quot; the reassembled edits multiple times, which would end up creating several potentially small storefiles. This is probably not the worst thing, assuming our compaction heuristics are good, but something to be wary of.&lt;/p&gt;</comment>
                            <comment id="12970073" author="stack" created="Fri, 10 Dec 2010 05:23:40 +0000"  >&lt;p&gt;This is fine if one family per region but if ten families per region and 1k regions on the server, could be a bunch of juggling of files by master process&lt;/p&gt;</comment>
                            <comment id="12970288" author="karthik.ranga" created="Fri, 10 Dec 2010 19:30:39 +0000"  >&lt;p&gt;Yes, true. This is much more useful in the distributed log splitting context. My fault - forgot to add that...&lt;/p&gt;</comment>
                            <comment id="12970301" author="ryanobjc" created="Fri, 10 Dec 2010 20:13:03 +0000"  >&lt;p&gt;How would this work in a distributed scenario? File creation is already an&lt;br/&gt;
extremely slow hdfs operation!&lt;/p&gt;

&lt;p&gt;On Dec 10, 2010 11:31 AM, &quot;Karthik Ranganathan (JIRA)&quot; &amp;lt;jira@apache.org&amp;gt;&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3329?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&amp;amp;focusedCommentId=12970288#action_12970288&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-3329?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&amp;amp;focusedCommentId=12970288#action_12970288&lt;/a&gt;]&lt;br/&gt;
context. My fault - forgot to add that...&lt;br/&gt;
split HLogs into the logs for the regions. Then the region servers that host&lt;br/&gt;
the regions replay the logs and open the regions.&lt;br/&gt;
HLogs (instead of producing a split HLogs file).&lt;/p&gt;</comment>
                            <comment id="12970325" author="karthik.ranga" created="Fri, 10 Dec 2010 22:23:22 +0000"  >&lt;p&gt;@Ryan - didnt get that... At a higher level, I was thinking that the current steps are:&lt;br/&gt;
1. Open and read hlogs&lt;br/&gt;
2. Split them and create edits per region files&lt;br/&gt;
3. RS that opens the regions reads the split edits files and then dumps them into hfiles&lt;/p&gt;

&lt;p&gt;I was thinking we could change this sequence to something like:&lt;br/&gt;
1. Open hlogs&lt;br/&gt;
2. Create hfiles for the regions&lt;/p&gt;

&lt;p&gt;And that would give us a big gain in not writing and reading the HLogs once each.&lt;/p&gt;</comment>
                            <comment id="12970328" author="ryanobjc" created="Fri, 10 Dec 2010 22:35:01 +0000"  >&lt;p&gt;When we split hlog we can just stream and do a straightforward split&lt;br/&gt;
into multiple output files.&lt;/p&gt;

&lt;p&gt;To turn those hlogs into hfiles we will need to &lt;em&gt;sort&lt;/em&gt;, and typically&lt;br/&gt;
this is done in memory.  There is a bunch of code about memory&lt;br/&gt;
accounting in the regionserver to make this not fail.&lt;/p&gt;

&lt;p&gt;Wouldn&apos;t we just be centralizing and possibly bottlenecking the sort&lt;br/&gt;
of the hlog to 1 machine when previously it was done by all machines?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 10 Dec 2010 02:23:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26786</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 1 week, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02cbb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11596</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>