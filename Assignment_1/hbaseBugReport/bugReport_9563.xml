<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:05:36 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-9563/HBASE-9563.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-9563] Autorestart doesn&apos;t work if zkcleaner fails</title>
                <link>https://issues.apache.org/jira/browse/HBASE-9563</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;I&apos;ve seen this several times where a master didn&apos;t autorestart because zk cleaner failed.  We should still restart the daemon even if it&apos;s not possible to clean the zk nodes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12669139">HBASE-9563</key>
            <summary>Autorestart doesn&apos;t work if zkcleaner fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="eclark">Elliott Clark</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Sep 2013 22:06:31 +0000</created>
                <updated>Mon, 16 Dec 2013 18:46:50 +0000</updated>
                            <resolved>Tue, 12 Nov 2013 04:50:42 +0000</resolved>
                                                    <fixVersion>0.98.0</fixVersion>
                    <fixVersion>0.96.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13788685" author="stack" created="Mon, 7 Oct 2013 23:12:35 +0000"  >&lt;p&gt;Just ran into this.  Looks like this.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 24 2013-10-07 05:07:00,009 INFO  [main] zookeeper.ZooKeeper: Client environment:java.compiler=&amp;lt;NA&amp;gt;
 23 2013-10-07 05:07:00,009 INFO  [main] zookeeper.ZooKeeper: Client environment:os.name=Linux
 22 2013-10-07 05:07:00,009 INFO  [main] zookeeper.ZooKeeper: Client environment:os.arch=amd64
 21 2013-10-07 05:07:00,009 INFO  [main] zookeeper.ZooKeeper: Client environment:os.version=3.2.0-43-&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;
 20 2013-10-07 05:07:00,010 INFO  [main] zookeeper.ZooKeeper: Client environment:user.name=hbase
 19 2013-10-07 05:07:00,010 INFO  [main] zookeeper.ZooKeeper: Client environment:user.home=/home/hbase
 18 2013-10-07 05:07:00,010 INFO  [main] zookeeper.ZooKeeper: Client environment:user.dir=/home/hbase
 17 2013-10-07 05:07:00,011 INFO  [main] zookeeper.ZooKeeper: Initiating client connection, connectString=a1805.halxg.cloudera.com:2181 sessionTimeout=90000 watcher=clean znode &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; master
 16 2013-10-07 05:07:00,042 INFO  [main] zookeeper.RecoverableZooKeeper: &lt;span class=&quot;code-object&quot;&gt;Process&lt;/span&gt; identifier=clean znode &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; master connecting to ZooKeeper ensemble=a1805.halxg.cloudera.com:2181
 15 2013-10-07 05:07:00,043 WARN  [main] hbase.ZNodeClearer: Can&apos;t read the content of the znode file
 14 java.io.FileNotFoundException: /tmp/hbase-hbase-master.znode (No such file or directory)
 13 ,...at java.io.FileInputStream.open(Native Method)
 12 ,...at java.io.FileInputStream.&amp;lt;init&amp;gt;(FileInputStream.java:138)
 11 ,...at java.io.FileInputStream.&amp;lt;init&amp;gt;(FileInputStream.java:97)
 10 ,...at java.io.FileReader.&amp;lt;init&amp;gt;(FileReader.java:58)
  9 ,...at org.apache.hadoop.hbase.ZNodeClearer.readMyEphemeralNodeOnDisk(ZNodeClearer.java:95)
  8 ,...at org.apache.hadoop.hbase.ZNodeClearer.clear(ZNodeClearer.java:143)
  7 ,...at org.apache.hadoop.hbase.master.HMasterCommandLine.run(HMasterCommandLine.java:138)
  6 ,...at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:70)
  5 ,...at org.apache.hadoop.hbase.util.ServerCommandLine.doMain(ServerCommandLine.java:126)
  4 ,...at org.apache.hadoop.hbase.master.HMaster.main(HMaster.java:2787)
  3 2013-10-07 05:07:00,046 INFO  [main-SendThread(a1805.halxg.cloudera.com:2181)] zookeeper.ClientCnxn: Opening socket connection to server a1805.halxg.cloudera.com/10.20.200.105:2181. Will not attempt to authenticate using SASL (unknown error)
  2 Mon Oct  7 10:54:01 PDT 2013 Starting master on a1805.halxg.cloudera.com
  1 core file size          (blocks, -c) 0
  0 data seg size           (kbytes, -d) unlimited
  1 scheduling priority             (-e) 0
  2 file size               (blocks, -f) unlimited
  3 pending signals                 (-i) 386225
  4 max locked memory       (kbytes, -l) 64
  5 max memory size         (kbytes, -m) unlimited
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13788686" author="stack" created="Mon, 7 Oct 2013 23:13:27 +0000"  >&lt;p&gt;This is messy because makes it so Master does not come back up &amp;#8211; been happening during hbase-it runs.&lt;/p&gt;</comment>
                            <comment id="13789763" author="stack" created="Tue, 8 Oct 2013 21:59:54 +0000"  >&lt;p&gt;Have this in the .out:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  4 rm: cannot remove `/tmp/hbase-hbase-master.znode&apos;: No such file or directory
  3 already in use: 10101; nested exception is:.
  2 ,...java.net.BindException: Address already in use
  1 To enable GC log rotation, use -Xloggc:&amp;lt;filename&amp;gt; -XX:+UseGCLogFileRotation -XX:NumberOfGCLogFiles=&amp;lt;num_of_files&amp;gt; -XX:GCLogFileSize=&amp;lt;num_of_size&amp;gt;
  0 where num_of_file &amp;gt; 0 and num_of_size &amp;gt; 0
  1 GC log rotation is turned off
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;10101 is jmx port (from Elliott).&lt;/p&gt;</comment>
                            <comment id="13789822" author="stack" created="Tue, 8 Oct 2013 23:03:09 +0000"  >&lt;p&gt;Make it so we do not return non-zero if file w/ master znode is not specified or found.&lt;/p&gt;

&lt;p&gt;Was going to try this first but likely needs more.  What we see is that master is killed but it is sticking around.  30seconds later, we go to start a master but if fails because JMX port is occupied.  This new master on its way out tries to clear the master znode.   Its clearing znode seems to make the stuck master fail so we have two znode cleaners running about same time.  Here is log:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2013-10-07 05:06:29,713 INFO  [AM.ZK.Worker-pool2-t559] master.RegionStates: Offlined d2ff3ce62dacd333d98feee91f620f8a from a1806.halxg.cloudera.com,60020,1381147238190
  3 2013-10-07 05:06:57,313 INFO  [main] util.VersionInfo: HBase 0.96.0
  4 2013-10-07 05:06:57,313 INFO  [main] util.VersionInfo: Subversion git:&lt;span class=&quot;code-comment&quot;&gt;//hbase-jenkins.ent.cloudera.com/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/jenkins/jobs/hbase-096/workspace -r 06a2800d3faf83aec482c210c61d453ce8e759bc
&lt;/span&gt;  5 2013-10-07 05:06:57,313 INFO  [main] util.VersionInfo: Compiled by jenkins on Mon Oct  7 00:11:57 PDT 2013
  6 Mon Oct  7 05:06:57 PDT 2013 Starting master on a1805.halxg.cloudera.com
  7 core file size          (blocks, -c) 0
  8 data seg size           (kbytes, -d) unlimited
  9 scheduling priority             (-e) 0
 10 file size               (blocks, -f) unlimited
 11 pending signals                 (-i) 386225
 12 max locked memory       (kbytes, -l) 64
 13 max memory size         (kbytes, -m) unlimited
 14 open files                      (-n) 32768
 15 pipe size            (512 bytes, -p) 8
 16 POSIX message queues     (bytes, -q) 819200
 17 real-time priority              (-r) 0
 18 stack size              (kbytes, -s) 8192
 19 cpu time               (seconds, -t) unlimited
 20 max user processes              (-u) 32768
 21 virtual memory          (kbytes, -v) unlimited
 22 file locks                      (-x) unlimited
 23 2013-10-07 05:06:57,616 INFO  [main] zookeeper.ZooKeeper: Client environment:zookeeper.version=3.4.5-1392090, built on 09/30/2012 17:52 GMT
 24 2013-10-07 05:06:57,616 INFO  [main] zookeeper.ZooKeeper: Client environment:host.name=a1805.halxg.cloudera.com
 25 2013-10-07 05:06:57,616 INFO  [main] zookeeper.ZooKeeper: Client environment:java.version=1.7.0_25
 26 2013-10-07 05:06:57,616 INFO  [main] zookeeper.ZooKeeper: Client environment:java.vendor=Oracle Corporation
 27 2013-10-07 05:06:57,616 INFO  [main] zookeeper.ZooKeeper: Client environment:java.home=/opt/toolchain/sun-jdk-64bit-1.7.0.25/jre
 28 2013-10-07 05:06:57,616 INFO  [main] zookeeper.ZooKeeper: Client environment:java.class.path=/opt/hbase/current/bin/../conf:/opt/toolchain/sun-jdk-64bit-1.7.0.25/lib/tools.jar:/opt/hbase/current/bin/#
 29 2013-10-07 05:06:57,617 INFO  [main] zookeeper.ZooKeeper: Client environment:java.library.path=/opt/hadoop/hadoop-2.1.0-beta/lib/&lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;
 30 2013-10-07 05:06:57,617 INFO  [main] zookeeper.ZooKeeper: Client environment:java.io.tmpdir=/tmp
 31 2013-10-07 05:06:57,617 INFO  [main] zookeeper.ZooKeeper: Client environment:java.compiler=&amp;lt;NA&amp;gt;
 32 2013-10-07 05:06:57,617 INFO  [main] zookeeper.ZooKeeper: Client environment:os.name=Linux
 33 2013-10-07 05:06:57,617 INFO  [main] zookeeper.ZooKeeper: Client environment:os.arch=amd64
 34 2013-10-07 05:06:57,618 INFO  [main] zookeeper.ZooKeeper: Client environment:os.version=3.2.0-43-&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;
 35 2013-10-07 05:06:57,618 INFO  [main] zookeeper.ZooKeeper: Client environment:user.name=hbase
 36 2013-10-07 05:06:57,618 INFO  [main] zookeeper.ZooKeeper: Client environment:user.home=/home/hbase
 37 2013-10-07 05:06:57,618 INFO  [main] zookeeper.ZooKeeper: Client environment:user.dir=/home/hbase
 38 2013-10-07 05:06:57,619 INFO  [main] zookeeper.ZooKeeper: Initiating client connection, connectString=a1805.halxg.cloudera.com:2181 sessionTimeout=90000 watcher=clean znode &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; master
 39 2013-10-07 05:06:57,651 INFO  [main] zookeeper.RecoverableZooKeeper: &lt;span class=&quot;code-object&quot;&gt;Process&lt;/span&gt; identifier=clean znode &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; master connecting to ZooKeeper ensemble=a1805.halxg.cloudera.com:2181
 40 2013-10-07 05:06:57,655 INFO  [main-SendThread(a1805.halxg.cloudera.com:2181)] zookeeper.ClientCnxn: Opening socket connection to server a1805.halxg.cloudera.com/10.20.200.105:2181. Will not attempt #
 41 2013-10-07 05:06:57,661 INFO  [main-SendThread(a1805.halxg.cloudera.com:2181)] zookeeper.ClientCnxn: Socket connection established to a1805.halxg.cloudera.com/10.20.200.105:2181, initiating session
 42 2013-10-07 05:06:57,685 INFO  [main-SendThread(a1805.halxg.cloudera.com:2181)] zookeeper.ClientCnxn: Session establishment complete on server a1805.halxg.cloudera.com/10.20.200.105:2181, sessionid = #
 43 2013-10-07 05:06:59,677 INFO  [main] util.VersionInfo: HBase 0.96.0
1 2013-10-07 05:06:59,677 INFO  [main] util.VersionInfo: Subversion git:&lt;span class=&quot;code-comment&quot;&gt;//hbase-jenkins.ent.cloudera.com/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/lib/jenkins/jobs/hbase-096/workspace -r 06a2800d3faf83aec482c210c61d453ce8e759bc
&lt;/span&gt;  2 2013-10-07 05:06:59,678 INFO  [main] util.VersionInfo: Compiled by jenkins on Mon Oct  7 00:11:57 PDT 2013
  3 2013-10-07 05:06:59,971 INFO  [main] zookeeper.ZooKeeper: Client environment:zookeeper.version=3.4.5-1392090, built on 09/30/2012 17:52 GMT
  4 2013-10-07 05:06:59,971 INFO  [main] zookeeper.ZooKeeper: Client environment:host.name=a1805.halxg.cloudera.com
  5 2013-10-07 05:06:59,971 INFO  [main] zookeeper.ZooKeeper: Client environment:java.version=1.7.0_25
  6 2013-10-07 05:07:00,008 INFO  [main] zookeeper.ZooKeeper: Client environment:java.vendor=Oracle Corporation
  7 2013-10-07 05:07:00,008 INFO  [main] zookeeper.ZooKeeper: Client environment:java.home=/opt/toolchain/sun-jdk-64bit-1.7.0.25/jre
  8 2013-10-07 05:07:00,008 INFO  [main] zookeeper.ZooKeeper: Client environment:java.class.path=/opt/hbase/current/bin/../conf:/opt/toolchain/sun-jdk-64bit-1.7.0.25/lib/tools.jar:/opt/hbase/current/bin/#
  9 2013-10-07 05:07:00,009 INFO  [main] zookeeper.ZooKeeper: Client environment:java.library.path=/opt/hadoop/hadoop-2.1.0-beta/lib/&lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;
 10 2013-10-07 05:07:00,009 INFO  [main] zookeeper.ZooKeeper: Client environment:java.io.tmpdir=/tmp
 11 2013-10-07 05:07:00,009 INFO  [main] zookeeper.ZooKeeper: Client environment:java.compiler=&amp;lt;NA&amp;gt;
 12 2013-10-07 05:07:00,009 INFO  [main] zookeeper.ZooKeeper: Client environment:os.name=Linux
 13 2013-10-07 05:07:00,009 INFO  [main] zookeeper.ZooKeeper: Client environment:os.arch=amd64
 14 2013-10-07 05:07:00,009 INFO  [main] zookeeper.ZooKeeper: Client environment:os.version=3.2.0-43-&lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt;
 15 2013-10-07 05:07:00,010 INFO  [main] zookeeper.ZooKeeper: Client environment:user.name=hbase
 16 2013-10-07 05:07:00,010 INFO  [main] zookeeper.ZooKeeper: Client environment:user.home=/home/hbase
 17 2013-10-07 05:07:00,010 INFO  [main] zookeeper.ZooKeeper: Client environment:user.dir=/home/hbase
 18 2013-10-07 05:07:00,011 INFO  [main] zookeeper.ZooKeeper: Initiating client connection, connectString=a1805.halxg.cloudera.com:2181 sessionTimeout=90000 watcher=clean znode &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; master
 19 2013-10-07 05:07:00,042 INFO  [main] zookeeper.RecoverableZooKeeper: &lt;span class=&quot;code-object&quot;&gt;Process&lt;/span&gt; identifier=clean znode &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; master connecting to ZooKeeper ensemble=a1805.halxg.cloudera.com:2181
 20 2013-10-07 05:07:00,043 WARN  [main] hbase.ZNodeClearer: Can&apos;t read the content of the znode file
 21 java.io.FileNotFoundException: /tmp/hbase-hbase-master.znode (No such file or directory)
 22 ,...at java.io.FileInputStream.open(Native Method)
 23 ,...at java.io.FileInputStream.&amp;lt;init&amp;gt;(FileInputStream.java:138)
 24 ,...at java.io.FileInputStream.&amp;lt;init&amp;gt;(FileInputStream.java:97)
 25 ,...at java.io.FileReader.&amp;lt;init&amp;gt;(FileReader.java:58)
 26 ,...at org.apache.hadoop.hbase.ZNodeClearer.readMyEphemeralNodeOnDisk(ZNodeClearer.java:95)
 27 ,...at org.apache.hadoop.hbase.ZNodeClearer.clear(ZNodeClearer.java:143)
 28 ,...at org.apache.hadoop.hbase.master.HMasterCommandLine.run(HMasterCommandLine.java:138)
 29 ,...at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:70)
 30 ,...at org.apache.hadoop.hbase.util.ServerCommandLine.doMain(ServerCommandLine.java:126)
 31 ,...at org.apache.hadoop.hbase.master.HMaster.main(HMaster.java:2787)
 32 2013-10-07 05:07:00,046 INFO  [main-SendThread(a1805.halxg.cloudera.com:2181)] zookeeper.ClientCnxn: Opening socket connection to server a1805.halxg.cloudera.com/10.20.200.105:2181. Will not attempt #
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Elliott suggests setting master in autorestart mode or beyond that, having master restart retry (doesn&apos;t seem to be easy facility for this in the ClusterManager interface at the mo).&lt;/p&gt;</comment>
                            <comment id="13789998" author="stack" created="Wed, 9 Oct 2013 03:52:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt; Shall I commit this see if it helps?&lt;/p&gt;</comment>
                            <comment id="13790048" author="eclark" created="Wed, 9 Oct 2013 05:39:05 +0000"  >&lt;p&gt;+1 I think it&apos;s an improvement even if it doesn&apos;t 100% fix the master issue.&lt;/p&gt;</comment>
                            <comment id="13790052" author="stack" created="Wed, 9 Oct 2013 05:53:50 +0000"  >&lt;p&gt;What I committed.  Includes little test.&lt;/p&gt;</comment>
                            <comment id="13790053" author="stack" created="Wed, 9 Oct 2013 05:54:16 +0000"  >&lt;p&gt;Leaving open in case need more.&lt;/p&gt;</comment>
                            <comment id="13790077" author="hudson" created="Wed, 9 Oct 2013 06:33:18 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #4599 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4599/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4599/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9563&quot; title=&quot;Autorestart doesn&amp;#39;t work if zkcleaner fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9563&quot;&gt;&lt;del&gt;HBASE-9563&lt;/del&gt;&lt;/a&gt; Autorestart doesn&apos;t work if zkcleaner fails (stack: rev 1530498)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/ZNodeClearer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestHMasterCommandLine.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13790126" author="hudson" created="Wed, 9 Oct 2013 07:33:00 +0000"  >&lt;p&gt;FAILURE: Integrated in hbase-0.96 #128 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.96/128/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.96/128/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9563&quot; title=&quot;Autorestart doesn&amp;#39;t work if zkcleaner fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9563&quot;&gt;&lt;del&gt;HBASE-9563&lt;/del&gt;&lt;/a&gt; Autorestart doesn&apos;t work if zkcleaner fails (stack: rev 1530499)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/main/java/org/apache/hadoop/hbase/ZNodeClearer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestHMasterCommandLine.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13790261" author="hudson" created="Wed, 9 Oct 2013 11:24:24 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #784 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/784/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/784/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9563&quot; title=&quot;Autorestart doesn&amp;#39;t work if zkcleaner fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9563&quot;&gt;&lt;del&gt;HBASE-9563&lt;/del&gt;&lt;/a&gt; Autorestart doesn&apos;t work if zkcleaner fails (stack: rev 1530498)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/ZNodeClearer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestHMasterCommandLine.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13790269" author="hudson" created="Wed, 9 Oct 2013 11:48:32 +0000"  >&lt;p&gt;FAILURE: Integrated in hbase-0.96-hadoop2 #81 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.96-hadoop2/81/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.96-hadoop2/81/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9563&quot; title=&quot;Autorestart doesn&amp;#39;t work if zkcleaner fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9563&quot;&gt;&lt;del&gt;HBASE-9563&lt;/del&gt;&lt;/a&gt; Autorestart doesn&apos;t work if zkcleaner fails (stack: rev 1530499)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/main/java/org/apache/hadoop/hbase/ZNodeClearer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestHMasterCommandLine.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13790465" author="stack" created="Wed, 9 Oct 2013 15:24:40 +0000"  >&lt;p&gt;Addendum.  Categorize test.  Fixes failing TestCheckTestClasses.&lt;/p&gt;</comment>
                            <comment id="13790691" author="hudson" created="Wed, 9 Oct 2013 18:32:50 +0000"  >&lt;p&gt;SUCCESS: Integrated in hbase-0.96 #129 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.96/129/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.96/129/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9563&quot; title=&quot;Autorestart doesn&amp;#39;t work if zkcleaner fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9563&quot;&gt;&lt;del&gt;HBASE-9563&lt;/del&gt;&lt;/a&gt; Autorestart doesn&apos;t work if zkcleaner fails (stack: rev 1530676)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestHMasterCommandLine.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13790725" author="hudson" created="Wed, 9 Oct 2013 19:04:09 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-TRUNK #4602 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4602/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4602/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9563&quot; title=&quot;Autorestart doesn&amp;#39;t work if zkcleaner fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9563&quot;&gt;&lt;del&gt;HBASE-9563&lt;/del&gt;&lt;/a&gt; Autorestart doesn&apos;t work if zkcleaner fails (stack: rev 1530675)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestHMasterCommandLine.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13791032" author="stack" created="Thu, 10 Oct 2013 00:19:17 +0000"  >&lt;p&gt;I marked this a blocker because it is what is causing our rigs to fail.  When our rigs fail to complete, it is hard for us to have confidence in the bits.  Surprised this not seen elsewhere.  Maybe its our setup.  Trying actively to find root issue.&lt;/p&gt;</comment>
                            <comment id="13791074" author="hudson" created="Thu, 10 Oct 2013 01:18:34 +0000"  >&lt;p&gt;SUCCESS: Integrated in hbase-0.96-hadoop2 #82 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.96-hadoop2/82/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.96-hadoop2/82/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9563&quot; title=&quot;Autorestart doesn&amp;#39;t work if zkcleaner fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9563&quot;&gt;&lt;del&gt;HBASE-9563&lt;/del&gt;&lt;/a&gt; Autorestart doesn&apos;t work if zkcleaner fails (stack: rev 1530676)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestHMasterCommandLine.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13791109" author="hudson" created="Thu, 10 Oct 2013 02:09:43 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #785 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/785/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/785/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9563&quot; title=&quot;Autorestart doesn&amp;#39;t work if zkcleaner fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9563&quot;&gt;&lt;del&gt;HBASE-9563&lt;/del&gt;&lt;/a&gt; Autorestart doesn&apos;t work if zkcleaner fails (stack: rev 1530675)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestHMasterCommandLine.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13791808" author="stack" created="Thu, 10 Oct 2013 18:24:12 +0000"  >&lt;p&gt;In overnight runs, I am not seeing this failure any more.  I see others that fail the tests &amp;#8211; Master comes up but cluster can&apos;t find it &amp;#8211; but not this one.  This current run is almost done.  Will remove as blocker if I don&apos;t see it after run complietes (it failed all runs up to the commit of this patch &amp;#8211; though I don&apos;t think the patch is the fix...  I&apos;m now thinking it environmental).&lt;/p&gt;</comment>
                            <comment id="13792053" author="enis" created="Thu, 10 Oct 2013 22:29:55 +0000"  >&lt;p&gt;Today, we also saw a related thing in one of the tests. &lt;/p&gt;

&lt;p&gt;CM killed the active master, but was not able to start that back again:  &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2013-10-09 11:27:11,911|beaver.machine|INFO|2013-10-09 11:27:11,910 INFO  [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6] actions.Action: Performing action: Restart active master
2013-10-09 11:27:11,918|beaver.machine|INFO|2013-10-09 11:27:11,918 INFO  [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6] actions.Action: Killing master:ambari-unsec-1381298460-hbase-1.cs1cloud.internal,60000,1381340537392
2013-10-09 11:27:11,919|beaver.machine|INFO|2013-10-09 11:27:11,918 INFO  [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6] hbase.HBaseCluster: Aborting Master: ambari-unsec-1381298460-hbase-1.cs1cloud.internal,60000,1381340537392
2013-10-09 11:27:11,919|beaver.machine|INFO|2013-10-09 11:27:11,918 INFO  [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6] hbase.ClusterManager: Executing remote command: ps aux | grep proc_master | grep -v grep | tr -s &apos; &apos; | cut -d &apos; &apos; -f2 | xargs kill -s SIGKILL , hostname:ambari-unsec-1381298460-hbase-1.cs1cloud.internal
2013-10-09 11:27:11,919|beaver.machine|INFO|2013-10-09 11:27:11,918 INFO  [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6] util.Shell: Executing full command [/usr/bin/ssh  -o StrictHostKeyChecking=no ambari-unsec-1381298460-hbase-1.cs1cloud.internal &lt;span class=&quot;code-quote&quot;&gt;&quot;sudo su - hbase -c \&quot;&lt;/span&gt;ps aux | grep proc_master | grep -v grep | tr -s &apos; &apos; | cut -d &apos; &apos; -f2 | xargs kill -s SIGKILL\&quot;&quot;]
2013-10-09 11:27:16,684|beaver.machine|INFO|2013-10-09 11:27:16,683 INFO  [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6] hbase.ClusterManager: Executed remote command, exit code:0 , output:
2013-10-09 11:27:16,685|beaver.machine|INFO|2013-10-09 11:27:16,683 INFO  [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6] hbase.HBaseCluster: Waiting service:master to stop: ambari-unsec-1381298460-hbase-1.cs1cloud.internal,60000,1381340537392
2013-10-09 11:27:16,685|beaver.machine|INFO|2013-10-09 11:27:16,683 INFO  [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6] hbase.ClusterManager: Executing remote command: ps aux | grep proc_master | grep -v grep | tr -s &apos; &apos; | cut -d &apos; &apos; -f2 , hostname:ambari-unsec-1381298460-hbase-1.cs1cloud.internal
2013-10-09 11:27:16,685|beaver.machine|INFO|2013-10-09 11:27:16,684 INFO  [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6] util.Shell: Executing full command [/usr/bin/ssh  -o StrictHostKeyChecking=no ambari-unsec-1381298460-hbase-1.cs1cloud.internal &lt;span class=&quot;code-quote&quot;&gt;&quot;sudo su - hbase -c \&quot;&lt;/span&gt;ps aux | grep proc_master | grep -v grep | tr -s &apos; &apos; | cut -d &apos; &apos; -f2\&quot;&quot;]
2013-10-09 11:27:17,183|beaver.machine|INFO|2013-10-09 11:27:17,183 INFO  [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6] hbase.ClusterManager: Executed remote command, exit code:0 , output:
2013-10-09 11:27:17,184|beaver.machine|INFO|2013-10-09 11:27:17,183 INFO  [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6] actions.Action: Killed master server:ambari-unsec-1381298460-hbase-1.cs1cloud.internal,60000,1381340537392
2013-10-09 11:27:17,184|beaver.machine|INFO|2013-10-09 11:27:17,183 INFO  [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6] actions.Action: Sleeping &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;:5000

2013-10-09 11:27:22,184|beaver.machine|INFO|2013-10-09 11:27:22,183 INFO  [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6] actions.Action: Starting master:ambari-unsec-1381298460-hbase-1.cs1cloud.internal
2013-10-09 11:27:22,184|beaver.machine|INFO|2013-10-09 11:27:22,183 INFO  [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6] hbase.HBaseCluster: Starting Master on: ambari-unsec-1381298460-hbase-1.cs1cloud.internal
2013-10-09 11:27:22,185|beaver.machine|INFO|2013-10-09 11:27:22,184 INFO  [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6] hbase.ClusterManager: Executing remote command: /usr/lib/hbase/bin/../bin/hbase-daemon.sh --config /tmp/hbaseConf start master , hostname:ambari-unsec-1381298460-hbase-1.cs1cloud.internal
2013-10-09 11:27:22,185|beaver.machine|INFO|2013-10-09 11:27:22,184 INFO  [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6] util.Shell: Executing full command [/usr/bin/ssh  -o StrictHostKeyChecking=no ambari-unsec-1381298460-hbase-1.cs1cloud.internal &lt;span class=&quot;code-quote&quot;&gt;&quot;sudo su - hbase -c \&quot;&lt;/span&gt;/usr/lib/hbase/bin/../bin/hbase-daemon.sh --config /tmp/hbaseConf start master\&quot;&quot;]
2013-10-09 11:27:23,006|beaver.machine|INFO|2013-10-09 11:27:23,006 WARN  [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6] policies.Policy: Exception occured during performing action: org.apache.hadoop.util.Shell$ExitCodeException:
2013-10-09 11:27:23,007|beaver.machine|INFO|at org.apache.hadoop.util.Shell.runCommand(Shell.java:464)
2013-10-09 11:27:23,007|beaver.machine|INFO|at org.apache.hadoop.util.Shell.run(Shell.java:379)
2013-10-09 11:27:23,007|beaver.machine|INFO|at org.apache.hadoop.util.Shell$ShellCommandExecutor.execute(Shell.java:589)
2013-10-09 11:27:23,007|beaver.machine|INFO|at org.apache.hadoop.hbase.HBaseClusterManager$RemoteShell.execute(HBaseClusterManager.java:111)
2013-10-09 11:27:23,007|beaver.machine|INFO|at org.apache.hadoop.hbase.HBaseClusterManager.exec(HBaseClusterManager.java:187)
2013-10-09 11:27:23,008|beaver.machine|INFO|at org.apache.hadoop.hbase.HBaseClusterManager.exec(HBaseClusterManager.java:196)
2013-10-09 11:27:23,008|beaver.machine|INFO|at org.apache.hadoop.hbase.HBaseClusterManager.start(HBaseClusterManager.java:201)
2013-10-09 11:27:23,008|beaver.machine|INFO|at org.apache.hadoop.hbase.DistributedHBaseCluster.startMaster(DistributedHBaseCluster.java:148)
2013-10-09 11:27:23,008|beaver.machine|INFO|at org.apache.hadoop.hbase.chaos.actions.Action.startMaster(Action.java:77)
2013-10-09 11:27:23,008|beaver.machine|INFO|at org.apache.hadoop.hbase.chaos.actions.RestartActionBaseAction.restartMaster(RestartActionBaseAction.java:45)
2013-10-09 11:27:23,009|beaver.machine|INFO|at org.apache.hadoop.hbase.chaos.actions.RestartActiveMasterAction.perform(RestartActiveMasterAction.java:35)
2013-10-09 11:27:23,009|beaver.machine|INFO|at org.apache.hadoop.hbase.chaos.policies.PeriodicRandomActionPolicy.runOneIteration(PeriodicRandomActionPolicy.java:59)
2013-10-09 11:27:23,009|beaver.machine|INFO|at org.apache.hadoop.hbase.chaos.policies.PeriodicPolicy.run(PeriodicPolicy.java:41)
2013-10-09 11:27:23,009|beaver.machine|INFO|at org.apache.hadoop.hbase.chaos.policies.CompositeSequentialPolicy.run(CompositeSequentialPolicy.java:42)
2013-10-09 11:27:23,009|beaver.machine|INFO|at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:722)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;From the master logs you can see that it is not started at all: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2013-10-09 11:26:33,458 INFO  [AM.ZK.Worker-pool2-t365] master.RegionStates: Onlined 5ec605643a410b2f38dfb5e9806b0f87 on ambari-unsec-1381298460-hbase-7.cs1cloud.internal,60020,1381342526428
2013-10-09 11:26:33,458 INFO  [AM.ZK.Worker-pool2-t365] master.RegionStates: Offlined 5ec605643a410b2f38dfb5e9806b0f87 from ambari-unsec-1381298460-hbase-3.cs1cloud.internal,60020,1381342212884
2013-10-09 11:26:51,906 DEBUG [RpcServer.handler=4,port=60000] master.HMaster: Skipping move of region IntegrationTestBigLinkedList,\xEF\xF0\xB0\xED\xBC\xA4\xB8\x88\xB6\x18\x8C\xD7nd%\x9B,1381339413686.61ee6a62bd598c8d3846b2348a48bee2. because region already assigned to the same server ambari-unsec-1381298460-hbase-4.cs1cloud.internal,60020,1381342368480.
2013-10-09 11:27:41,642 INFO  [main] util.VersionInfo: HBase 0.96.0.2.0.6.0-67-hadoop2
&amp;lt;removed&amp;gt;
2013-10-09 11:27:47,950 INFO  [main] zookeeper.RecoverableZooKeeper: &lt;span class=&quot;code-object&quot;&gt;Process&lt;/span&gt; identifier=clean znode &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; master connecting to ZooKeeper ensemble=ambari-unsec-1381298460-hbase-3.cs1cloud.internal:2181,ambari-unsec-1381298460-hbase-1.cs1cloud.internal:2181,ambari-unsec-1381298460-hbase-4.cs1cloud.internal:2181
2013-10-09 11:27:48,117 INFO  [main-SendThread(ambari-unsec-1381298460-hbase-1.cs1cloud.internal:2181)] zookeeper.ClientCnxn: Opening socket connection to server ambari-unsec-1381298460-hbase-1.cs1cloud.internal/172.18.145.170:2181. Will not attempt to authenticate using SASL (unknown error)
2013-10-09 11:27:48,241 INFO  [main-SendThread(ambari-unsec-1381298460-hbase-1.cs1cloud.internal:2181)] zookeeper.ClientCnxn: Socket connection established to ambari-unsec-1381298460-hbase-1.cs1cloud.internal/172.18.145.170:2181, initiating session
2013-10-09 11:27:48,408 INFO  [main-SendThread(ambari-unsec-1381298460-hbase-1.cs1cloud.internal:2181)] zookeeper.ClientCnxn: Session establishment complete on server ambari-unsec-1381298460-hbase-1.cs1cloud.internal/172.18.145.170:2181, sessionid = 0x1419d4bb0cb0138, negotiated timeout = 30000
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In hbase-daemon.sh, we wait for the process to exit, then call clean for znode: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
(internal_start)
    # Add to the command log file vital stats on our environment.
    echo &lt;span class=&quot;code-quote&quot;&gt;&quot;`date` Starting $command on `hostname`&quot;&lt;/span&gt; &amp;gt;&amp;gt; $loglog
    echo &lt;span class=&quot;code-quote&quot;&gt;&quot;`ulimit -a`&quot;&lt;/span&gt; &amp;gt;&amp;gt; $loglog 2&amp;gt;&amp;amp;1
    nice -n $HBASE_NICENESS &lt;span class=&quot;code-quote&quot;&gt;&quot;$HBASE_HOME&quot;&lt;/span&gt;/bin/hbase \
        --config &lt;span class=&quot;code-quote&quot;&gt;&quot;${HBASE_CONF_DIR}&quot;&lt;/span&gt; \
        $command &lt;span class=&quot;code-quote&quot;&gt;&quot;$@&quot;&lt;/span&gt; start &amp;gt;&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;$logout&quot;&lt;/span&gt; 2&amp;gt;&amp;amp;1 &amp;amp;
    echo $! &amp;gt; $pid
    wait
    cleanZNode
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you notice the timings for last log from master, and the first log from master znode task, you would see that former is at 11:26:51,906, and the latter is at 11:27:41,642 which is like 50 sec. In the CM logs, you can see that CM tried to start the master at 11:27:22,184. It seems that we kill -9 the master process, and ps does not show it when we connect for waitForMasterToStop(), but indeed the pid lingers on, and the master start on the next run will fail. We do not print out the process stdout in case of an error. &lt;/p&gt;</comment>
                            <comment id="13792068" author="stack" created="Thu, 10 Oct 2013 22:41:53 +0000"  >&lt;p&gt;That looks like what we saw Enis.  Anything in your .out?  What would suggest to add more info?  We&apos;re running here w/ thread dumping every 15 seconds trying to catch the lingering master to see what it is stuck on.&lt;/p&gt;</comment>
                            <comment id="13792074" author="enis" created="Thu, 10 Oct 2013 22:48:37 +0000"  >&lt;p&gt;Only this in .out:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/usr/lib/hbase/bin/../bin/hbase-daemon.sh: line 197: 29354 Killed                  nice -n $HBASE_NICENESS &lt;span class=&quot;code-quote&quot;&gt;&quot;$HBASE_HOME&quot;&lt;/span&gt;/bin/hbase --config &lt;span class=&quot;code-quote&quot;&gt;&quot;${HBASE_CONF_DIR}&quot;&lt;/span&gt; $command &lt;span class=&quot;code-quote&quot;&gt;&quot;$@&quot;&lt;/span&gt; start &amp;gt;&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;$logout&quot;&lt;/span&gt; 2&amp;gt;&amp;amp;1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I guess if we got &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
echo $command running as process `cat $pid`.  Stop it first.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;it should only be there in the CM shell output, which is not logged. I&apos;ll try to add logging there as well. &lt;/p&gt;</comment>
                            <comment id="13792109" author="stack" created="Thu, 10 Oct 2013 23:33:19 +0000"  >&lt;p&gt;I was asking about the master .out file.  I had complaint about jmx port clash noted above.&lt;/p&gt;</comment>
                            <comment id="13792980" author="stack" created="Fri, 11 Oct 2013 19:32:36 +0000"  >&lt;p&gt;We just got a clean run of our rig (takes 18 hours).  This is a bad issue but no longer a blocker.&lt;/p&gt;</comment>
                            <comment id="13808524" author="enis" created="Tue, 29 Oct 2013 22:13:56 +0000"  >&lt;p&gt;What should we do with this since &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9750&quot; title=&quot;Add retries around Action server stop/start&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9750&quot;&gt;&lt;del&gt;HBASE-9750&lt;/del&gt;&lt;/a&gt; is in? &lt;/p&gt;</comment>
                            <comment id="13808537" author="eclark" created="Tue, 29 Oct 2013 22:22:30 +0000"  >&lt;p&gt;I would bump the priority down again.  It&apos;s still an issue that the zkCleaner which should only be an optimization is getting in the way of starting but it doesn&apos;t hamper testing.&lt;/p&gt;</comment>
                            <comment id="13808539" author="stack" created="Tue, 29 Oct 2013 22:22:39 +0000"  >&lt;p&gt;What is your thinking mighty &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt;?  That the retry will have us ride over this condition?  That we&apos;ll just fail the disable?  I was hoping to understand the sequencing that had us lose the .tableinfo file.&lt;/p&gt;</comment>
                            <comment id="13809673" author="enis" created="Wed, 30 Oct 2013 21:54:43 +0000"  >&lt;blockquote&gt;&lt;p&gt;It&apos;s still an issue that the zkCleaner which should only be an optimization is getting in the way of starting but it doesn&apos;t hamper testing.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;That is already fixed with the committed patch. no? &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;That we&apos;ll just fail the disable? I was hoping to understand the sequencing that had us lose the .tableinfo file.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Sorry, I did not get the full context. This issue is about master not starting due to failing to clean znode right? Is there a related issue for .tableinfo loss? &lt;/p&gt;</comment>
                            <comment id="13809757" author="stack" created="Wed, 30 Oct 2013 23:37:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; Wrong issue.  Ignore my comment.  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt; What you think of Enis remark above?&lt;/p&gt;</comment>
                            <comment id="13819823" author="stack" created="Tue, 12 Nov 2013 04:50:42 +0000"  >&lt;p&gt;Resovling fixed by what was committed against this patch and by &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9750&quot; title=&quot;Add retries around Action server stop/start&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9750&quot;&gt;&lt;del&gt;HBASE-9750&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13849518" author="stack" created="Mon, 16 Dec 2013 18:46:50 +0000"  >&lt;p&gt;Released in 0.96.1.  Issue closed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12673516">HBASE-9750</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12607464" name="9563.txt" size="1664" author="stack" created="Tue, 8 Oct 2013 23:03:09 +0000"/>
                            <attachment id="12607517" name="9563v2.txt" size="3433" author="stack" created="Wed, 9 Oct 2013 05:53:50 +0000"/>
                            <attachment id="12607582" name="categorization.txt" size="1067" author="stack" created="Wed, 9 Oct 2013 15:26:04 +0000"/>
                            <attachment id="12607581" name="categorization.txt" size="1823" author="stack" created="Wed, 9 Oct 2013 15:24:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 7 Oct 2013 23:12:35 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>349071</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1o6un:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>349369</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>