<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:42:42 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-13378/HBASE-13378.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-13378] RegionScannerImpl synchronized for READ_UNCOMMITTED Isolation Levels</title>
                <link>https://issues.apache.org/jira/browse/HBASE-13378</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;This block of code below coupled with the close method could be changed so that READ_UNCOMMITTED does not synchronize.  &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      &lt;span class=&quot;code-comment&quot;&gt;// synchronize on scannerReadPoints so that nobody calculates
&lt;/span&gt;      &lt;span class=&quot;code-comment&quot;&gt;// getSmallestReadPoint, before scannerReadPoints is updated.
&lt;/span&gt;      IsolationLevel isolationLevel = scan.getIsolationLevel();
      &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt;(scannerReadPoints) {
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.readPt = getReadpoint(isolationLevel);
        scannerReadPoints.put(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.readPt);
      }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This hotspots for me under heavy get requests.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12787367">HBASE-13378</key>
            <summary>RegionScannerImpl synchronized for READ_UNCOMMITTED Isolation Levels</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="jleach">John Leach</assignee>
                                    <reporter username="jleach">John Leach</reporter>
                        <labels>
                    </labels>
                <created>Wed, 1 Apr 2015 15:12:58 +0000</created>
                <updated>Fri, 12 Jun 2015 00:43:30 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                    <timeoriginalestimate seconds="7200">2h</timeoriginalestimate>
                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="7200">2h</timespent>
                                <comments>
                            <comment id="14391089" author="jleach" created="Wed, 1 Apr 2015 17:57:04 +0000"  >&lt;p&gt;Added patch &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13378&quot; title=&quot;RegionScannerImpl synchronized for READ_UNCOMMITTED Isolation Levels&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13378&quot;&gt;HBASE-13378&lt;/a&gt;.txt that removes scans with IsolationLevel.READ_UNCOMMITED from synchronization block and from placement and removal from the readPoints ConcurrentHashMap.  &lt;/p&gt;

&lt;p&gt;Hotspot is removed from our profiling. &lt;/p&gt;</comment>
                            <comment id="14391193" author="jleach" created="Wed, 1 Apr 2015 18:39:33 +0000"  >&lt;p&gt;Patch Submitted&lt;/p&gt;</comment>
                            <comment id="14391488" author="hadoopqa" created="Wed, 1 Apr 2015 21:21:55 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12708755/HBASE-13378.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12708755/HBASE-13378.txt&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 485800830a58da1af31beaac859d99b56d823f99.&lt;br/&gt;
  ATTACHMENT ID: 12708755&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.1 2.5.2 2.6.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 4 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 release audit&lt;/font&gt;.  The applied patch generated 1 release audit warnings (more than the master&apos;s current 0 warnings).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 1 zombie test(s): 	at org.apache.hadoop.hbase.coprocessor.TestRegionServerObserver.testCoprocessorHooksInRegionsMerge(TestRegionServerObserver.java:100)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13524//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13524//testReport/&lt;/a&gt;&lt;br/&gt;
Release audit warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13524//artifact/patchprocess/patchReleaseAuditWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13524//artifact/patchprocess/patchReleaseAuditWarnings.txt&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13524//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13524//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13524//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13524//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Javadoc warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13524//artifact/patchprocess/patchJavadocWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13524//artifact/patchprocess/patchJavadocWarnings.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13524//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13524//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14391513" author="stack" created="Wed, 1 Apr 2015 21:35:55 +0000"  >&lt;p&gt;Patch LGTM. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt; this your area... you good with it?&lt;/p&gt;</comment>
                            <comment id="14391532" author="lhofhansl" created="Wed, 1 Apr 2015 21:45:10 +0000"  >&lt;p&gt;Looks fine to me.&lt;/p&gt;

&lt;p&gt;One interesting bit is: Now we won&apos;t hold on versions of Cells read by an READ_UNCOMMITTED scanner (i.e. even while the scanner is active those cells can be removed by a flush or a compaction).&lt;/p&gt;

&lt;p&gt;Up to this point READ_UNCOMMITED meant: You might see partially finished rows.&lt;br/&gt;
Now it means: You might see partially finished rows, and you may not see cells that have existed when the scanner started.&lt;/p&gt;

&lt;p&gt;Not sure how important the 2nd part is, but up to now we guarantee that &lt;em&gt;all&lt;/em&gt; scanners see &lt;em&gt;all&lt;/em&gt; data that existed when the scanner started. That would no longer be the case.&lt;/p&gt;

&lt;p&gt;I do think for READ_UNCOMMITTED that&apos;s OK... I.e. all bets are off in that case, but it is a change in behavior.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt;, Kannan and Karthik from Facebook added this back in the days, do you have an opinion?&lt;/p&gt;</comment>
                            <comment id="14547055" author="apurtell" created="Sun, 17 May 2015 06:06:36 +0000"  >&lt;p&gt;Looks like this already has two +1s. &lt;/p&gt;

&lt;p&gt;Attaching an updated patch for trunk to see about another precommit run. I also applied this to 0.98 and ran the full suite, everything passed. &lt;/p&gt;</comment>
                            <comment id="14547060" author="lhofhansl" created="Sun, 17 May 2015 06:20:27 +0000"  >&lt;p&gt;Hmm... Read mine as a -1 as I&apos;m not sure the change in semantic is correct or expected.&lt;/p&gt;</comment>
                            <comment id="14547062" author="apurtell" created="Sun, 17 May 2015 06:29:40 +0000"  >&lt;p&gt;&quot;looks fine to me&quot; is the oddest -1 I&apos;ve ever seen. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;

&lt;p&gt;Anyway, ok&lt;/p&gt;</comment>
                            <comment id="14547063" author="apurtell" created="Sun, 17 May 2015 06:30:51 +0000"  >&lt;p&gt;Canceling patch. &lt;/p&gt;</comment>
                            <comment id="14547090" author="hadoopqa" created="Sun, 17 May 2015 08:45:51 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12733365/HBASE-13378.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12733365/HBASE-13378.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit f49111e5f8a2db8f3065188f03c7ad6d4411bd10.&lt;br/&gt;
  ATTACHMENT ID: 12733365&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.1 2.5.2 2.6.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14069//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14069//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14069//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14069//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14069//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14069//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14069//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14069//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14547291" author="lhofhansl" created="Sun, 17 May 2015 19:21:04 +0000"  >&lt;blockquote&gt;&lt;p&gt;&quot;looks fine to me&quot; is the oddest -1 I&apos;ve ever seen.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Touch&#233; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;It&apos;s only a -1 until we all agree that the change in behavior is acceptable. Namely:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Up to this point READ_UNCOMMITED meant: You might see partially finished rows. Now it means: You might see partially finished rows, and you may not see cells that have existed when the scanner started.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We never had the case before that a scanner could not see Cells that existed when it started.&lt;/p&gt;</comment>
                            <comment id="14570992" author="jleach" created="Wed, 3 Jun 2015 15:17:02 +0000"  >&lt;p&gt;Seems like a nit IMO when you are comparing it to synchronizing all gets/scans in HBase...  &lt;/p&gt;</comment>
                            <comment id="14572024" author="apurtell" created="Thu, 4 Jun 2015 03:03:05 +0000"  >&lt;blockquote&gt;&lt;p&gt;Up to this point READ_UNCOMMITED meant: You might see partially finished rows. Now it means: You might see partially finished rows, and you may not see cells that have existed when the scanner started.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;d be ok with this change in 0.98 with a release note describing the change in semantics. In either case the user is asking for increased possible concurrency in exchange for &apos;dirty&apos; reads. What this patch does is alter a bit how dirty is dirty, depending. (smile) I&apos;m not sure what &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; or &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt; would want to do wrt. 1.0 and 1.1, or &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=busbey&quot; class=&quot;user-hover&quot; rel=&quot;busbey&quot;&gt;Sean Busbey&lt;/a&gt; for 1.2.&lt;/p&gt;</comment>
                            <comment id="14572165" author="lhofhansl" created="Thu, 4 Jun 2015 05:09:51 +0000"  >&lt;p&gt;+0 on this change, but if it helps SpliceMachine and we&apos;re OK with the semantic change, let&apos;s get it in.&lt;/p&gt;</comment>
                            <comment id="14573464" author="enis" created="Thu, 4 Jun 2015 19:47:41 +0000"  >&lt;blockquote&gt;&lt;p&gt;I&apos;d be ok with this change in 0.98 with a release note describing the change in semantics. In either case the user is asking for increased possible concurrency in exchange for &apos;dirty&apos; reads. What this patch does is alter a bit how dirty is dirty, depending. (smile) I&apos;m not sure what Enis Soztutar or Nick Dimiduk would want to do wrt. 1.0 and 1.1, or Sean Busbey for 1.2.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I would put this in the &quot;not a bug fix&quot; bucket, and would not include in 1.0 and 1.1 release lines. &lt;/p&gt;</comment>
                            <comment id="14573477" author="jleach" created="Thu, 4 Jun 2015 19:56:58 +0000"  >&lt;p&gt;Lars do you have a codeline where the decision on the flush and compaction is made?  Maybe I can use a different mechanism there?&lt;/p&gt;</comment>
                            <comment id="14574733" author="busbey" created="Fri, 5 Jun 2015 15:59:42 +0000"  >&lt;p&gt;I agree that it should not go into the 1.0 and 1.1 lines. I&apos;d be fine with a release noted change in behavior on 1.2. (though perhaps we should ask on user@ how surprising this will be?)&lt;/p&gt;</comment>
                            <comment id="14574735" author="jleach" created="Fri, 5 Jun 2015 16:01:36 +0000"  >&lt;p&gt;I will take a closer look this weekend and see if I can get it to not change the guarantee while removing the synchronization.&lt;/p&gt;</comment>
                            <comment id="14577851" author="ndimiduk" created="Mon, 8 Jun 2015 21:03:57 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Up to this point READ_UNCOMMITED meant: You might see partially finished rows.&lt;br/&gt;
Now it means: You might see partially finished rows, and you may not see cells that have existed when the scanner started.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This sounds to me like an incompatible change for a patch release. No good for 1.0 or 1.1, I think.&lt;/p&gt;

&lt;p&gt;Ah, but &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=busbey&quot; class=&quot;user-hover&quot; rel=&quot;busbey&quot;&gt;Sean Busbey&lt;/a&gt; have already said as much.&lt;/p&gt;</comment>
                            <comment id="14577884" author="jleach" created="Mon, 8 Jun 2015 21:31:47 +0000"  >&lt;p&gt;Can someone explain this one to me?&lt;/p&gt;

&lt;p&gt;&quot;One interesting bit is: Now we won&apos;t hold on versions of Cells read by an READ_UNCOMMITTED scanner (i.e. even while the scanner is active those cells can be removed by a flush or a compaction).&quot;&lt;/p&gt;

&lt;p&gt;The only bit I changed is whether you are in the scannerReadPts map and unless my IDE is acting goofy, I do not see usages outside of RegionScannerImpl.&lt;/p&gt;

&lt;p&gt;Lars?&lt;/p&gt;</comment>
                            <comment id="14579309" author="apurtell" created="Tue, 9 Jun 2015 17:53:01 +0000"  >&lt;blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Up to this point READ_UNCOMMITED meant: You might see partially finished rows.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Now it means: You might see partially finished rows, and you may not see cells that have existed when the scanner started.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This sounds to me like an incompatible change for a patch release&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Precisely, why does this sound like an &lt;b&gt;incompatible&lt;/b&gt; change?&lt;/p&gt;</comment>
                            <comment id="14581259" author="lhofhansl" created="Wed, 10 Jun 2015 23:55:25 +0000"  >&lt;blockquote&gt;&lt;p&gt;Can someone explain this one to me?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The effect is on the READ_UNCOMMITTED scanner, this patch won&apos;t record it&apos;s readpoint in scannerReadPoints, and flushes and compactions might let go of Cells that are older than the scanner&apos;s readpoint.&lt;/p&gt;

&lt;p&gt;I actually think that is &lt;em&gt;OK&lt;/em&gt;, I just wanted to consensus, it seems &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt; are not OK with it.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt;, the behavior I described above would &lt;em&gt;only&lt;/em&gt; effect the scanner declared with READ_UNCOMMITTED. Do you still think this is a compatibility issue?&lt;/p&gt;</comment>
                            <comment id="14581312" author="ndimiduk" created="Thu, 11 Jun 2015 01:08:10 +0000"  >&lt;p&gt;From server.org&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;3. PATCH version when you make backwards-compatible bug fixes&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;and&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;6. Patch version Z (x.y.Z | x &amp;gt; 0) MUST be incremented if only backwards compatible bug fixes are introduced. A bug fix is defined as an internal change that fixes incorrect behavior.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Was the pervious behavior incorrect? I think this is a performance enhancement that changes behavior in a backward-incompatible way. Someone depending on READ_UNCOMMITTED scanners to record the readpoint will need to deploy different versions of their code to run on, say 1.1.0 and 1.1.1. I think that means it&apos;s not compatible for a patch release. For instance, if Phoenix was depending on this behavior, we would reject this change as a patch release, but I think it would be accepted for for a minor release.&lt;/p&gt;

&lt;p&gt;READ_UNCOMMITTED is probably not a widely used feature, but it is a publicly available feature. I think the semantics of our operations are just as precious as our APIs. To be on the safe side, I&apos;d prefer this go into branch-1 but not branch-1.0 or branch-1.1.&lt;/p&gt;</comment>
                            <comment id="14582545" author="lhofhansl" created="Thu, 11 Jun 2015 21:33:54 +0000"  >&lt;p&gt;Fair enough. Also... Now that I think about it again. Maybe this isn&apos;t so benign after all.&lt;/p&gt;

&lt;p&gt;Is that even what you want &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jleach&quot; class=&quot;user-hover&quot; rel=&quot;jleach&quot;&gt;John Leach&lt;/a&gt;? It means that as you use this scanner HBase can at any point flush or compact the data away that the scanner should see based in MVCC.&lt;/p&gt;</comment>
                            <comment id="14582547" author="jleach" created="Thu, 11 Jun 2015 21:37:40 +0000"  >&lt;p&gt;Can you point me to the line of code that uses the scannerReadPoints for determining whether to flush or compact the data?&lt;/p&gt;</comment>
                            <comment id="14582744" author="lhofhansl" created="Fri, 12 Jun 2015 00:43:30 +0000"  >&lt;p&gt;Follow the Money... Or &lt;tt&gt;HRegion.getSmallestReadPoint()&lt;/tt&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12733365" name="HBASE-13378.patch" size="2637" author="apurtell" created="Sun, 17 May 2015 06:06:36 +0000"/>
                            <attachment id="12708755" name="HBASE-13378.txt" size="2179" author="jleach" created="Wed, 1 Apr 2015 17:57:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 1 Apr 2015 21:21:55 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 27 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i27ncv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>