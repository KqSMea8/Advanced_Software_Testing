<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:25:39 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5200/HBASE-5200.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5200] AM.ProcessRegionInTransition() and AM.handleRegion() race thus leaving the region assignment inconsistent</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5200</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;This is the scenario&lt;br/&gt;
Consider a case where the balancer is going on thus trying to close regions in a RS.&lt;br/&gt;
Before we could close a master switch happens.  &lt;br/&gt;
On Master switch the set of nodes that are in RIT is collected and we first get Data and start watching the node&lt;br/&gt;
After that the node data is added into RIT.&lt;br/&gt;
Now by this time (before adding to RIT) if the RS to which close was called does a transition in AM.handleRegion() we miss the handling saying RIT state was null.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2012-01-13 10:50:46,358 WARN org.apache.hadoop.hbase.master.AssignmentManager: Received CLOSED &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; region a66d281d231dfcaea97c270698b26b6f from server HOST-192-168-47-205,20020,1326363111288 but region was in  the state &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; and not in expected PENDING_CLOSE or CLOSING states
2012-01-13 10:50:46,358 WARN org.apache.hadoop.hbase.master.AssignmentManager: Received CLOSED &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; region c12e53bfd48ddc5eec507d66821c4d23 from server HOST-192-168-47-205,20020,1326363111288 but region was in  the state &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; and not in expected PENDING_CLOSE or CLOSING states
2012-01-13 10:50:46,358 WARN org.apache.hadoop.hbase.master.AssignmentManager: Received CLOSED &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; region 59ae13de8c1eb325a0dd51f4902d2052 from server HOST-192-168-47-205,20020,1326363111288 but region was in  the state &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; and not in expected PENDING_CLOSE or CLOSING states
2012-01-13 10:50:46,359 WARN org.apache.hadoop.hbase.master.AssignmentManager: Received CLOSED &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; region f45bc9614d7575f35244849af85aa078 from server HOST-192-168-47-205,20020,1326363111288 but region was in  the state &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; and not in expected PENDING_CLOSE or CLOSING states
2012-01-13 10:50:46,359 WARN org.apache.hadoop.hbase.master.AssignmentManager: Received CLOSED &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; region cc3ecd7054fe6cd4a1159ed92fd62641 from server HOST-192-168-47-204,20020,1326342744518 but region was in  the state &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; and not in expected PENDING_CLOSE or CLOSING states
2012-01-13 10:50:46,359 WARN org.apache.hadoop.hbase.master.AssignmentManager: Received CLOSED &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; region 3af40478a17fee96b4a192b22c90d5a2 from server HOST-192-168-47-205,20020,1326363111288 but region was in  the state &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; and not in expected PENDING_CLOSE or CLOSING states
2012-01-13 10:50:46,359 WARN org.apache.hadoop.hbase.master.AssignmentManager: Received CLOSED &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; region e6096a8466e730463e10d3d61f809b92 from server HOST-192-168-47-204,20020,1326342744518 but region was in  the state &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; and not in expected PENDING_CLOSE or CLOSING states
2012-01-13 10:50:46,359 WARN org.apache.hadoop.hbase.master.AssignmentManager: Received CLOSED &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; region 4806781a1a23066f7baed22b4d237e24 from server HOST-192-168-47-204,20020,1326342744518 but region was in  the state &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; and not in expected PENDING_CLOSE or CLOSING states
2012-01-13 10:50:46,359 WARN org.apache.hadoop.hbase.master.AssignmentManager: Received CLOSED &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; region d69e104131accaefe21dcc01fddc7629 from server HOST-192-168-47-205,20020,1326363111288 but region was in  the state &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; and not in expected PENDING_CLOSE or CLOSING states

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In branch the CLOSING node is created by RS thus leading to more inconsistency.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12538389">HBASE-5200</key>
            <summary>AM.ProcessRegionInTransition() and AM.handleRegion() race thus leaving the region assignment inconsistent</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ram_krish">ramkrishna.s.vasudevan</assignee>
                                    <reporter username="ram_krish">ramkrishna.s.vasudevan</reporter>
                        <labels>
                    </labels>
                <created>Sat, 14 Jan 2012 10:07:59 +0000</created>
                <updated>Fri, 12 Oct 2012 05:35:06 +0000</updated>
                            <resolved>Sat, 18 Feb 2012 20:21:31 +0000</resolved>
                                    <version>0.90.5</version>
                                    <fixVersion>0.92.1</fixVersion>
                    <fixVersion>0.94.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13187672" author="ram_krish" created="Tue, 17 Jan 2012 13:28:41 +0000"  >&lt;p&gt;This issue is applicable in trunk also.&lt;/p&gt;</comment>
                            <comment id="13196060" author="ram_krish" created="Mon, 30 Jan 2012 11:34:23 +0000"  >&lt;p&gt;Patch for trunk.&lt;/p&gt;</comment>
                            <comment id="13196062" author="ram_krish" created="Mon, 30 Jan 2012 11:35:23 +0000"  >&lt;p&gt;For 0.90 we need to change the behaviour of creating the CLOSING node by master.  currently in 0.90 it is done by RS.&lt;br/&gt;
If we don&apos;t do that then we can&apos;t fully solve the problem in 0.90.&lt;br/&gt;
Please suggest.&lt;/p&gt;</comment>
                            <comment id="13196103" author="zhihyu@ebaysf.com" created="Mon, 30 Jan 2012 13:20:12 +0000"  >&lt;p&gt;+1 on creating node in master in 0.90&lt;/p&gt;</comment>
                            <comment id="13196110" author="hadoopqa" created="Mon, 30 Jan 2012 13:33:46 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12512403/HBASE-5200.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12512403/HBASE-5200.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -140 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 161 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat&lt;br/&gt;
                  org.apache.hadoop.hbase.mapred.TestTableMapReduce&lt;br/&gt;
                  org.apache.hadoop.hbase.io.hfile.TestHFileBlock&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestImportTsv&lt;br/&gt;
                  org.apache.hadoop.hbase.master.TestRestartCluster&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/870//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/870//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/870//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/870//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/870//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/870//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13196116" author="ram_krish" created="Mon, 30 Jan 2012 13:40:07 +0000"  >&lt;p&gt;Checking the reason for the failure of org.apache.hadoop.hbase.master.TestRestartCluster.&lt;/p&gt;</comment>
                            <comment id="13196187" author="ram_krish" created="Mon, 30 Jan 2012 15:51:41 +0000"  >&lt;p&gt;The test case failure does not seem to be related.&lt;/p&gt;</comment>
                            <comment id="13196245" author="zhihyu@ebaysf.com" created="Mon, 30 Jan 2012 17:51:29 +0000"  >&lt;p&gt;The test failure is reproducible on MacBook:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
testRestartClusterAfterKill(org.apache.hadoop.hbase.master.TestRestartCluster)  Time elapsed: 208.669 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.io.IOException: Shutting down
  at org.apache.hadoop.hbase.MiniHBaseCluster.init(MiniHBaseCluster.java:203)
  at org.apache.hadoop.hbase.MiniHBaseCluster.&amp;lt;init&amp;gt;(MiniHBaseCluster.java:76)
  at org.apache.hadoop.hbase.HBaseTestingUtility.startMiniHBaseCluster(HBaseTestingUtility.java:629)
  at org.apache.hadoop.hbase.HBaseTestingUtility.startMiniCluster(HBaseTestingUtility.java:603)
  at org.apache.hadoop.hbase.HBaseTestingUtility.startMiniCluster(HBaseTestingUtility.java:551)
  at org.apache.hadoop.hbase.HBaseTestingUtility.startMiniCluster(HBaseTestingUtility.java:538)
  at org.apache.hadoop.hbase.master.TestRestartCluster.testRestartClusterAfterKill(TestRestartCluster.java:82)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;See attached test output.&lt;/p&gt;</comment>
                            <comment id="13196258" author="hadoopqa" created="Mon, 30 Jan 2012 18:04:59 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12512432/TEST-org.apache.hadoop.hbase.master.TestRestartCluster.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12512432/TEST-org.apache.hadoop.hbase.master.TestRestartCluster.xml&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 5 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/872//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/872//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13196730" author="ram_krish" created="Tue, 31 Jan 2012 06:18:46 +0000"  >&lt;p&gt;The failure reason we have identified.. Sorry for saying not the reason for failure.&lt;br/&gt;
Will fix and update&lt;/p&gt;</comment>
                            <comment id="13196900" author="ram_krish" created="Tue, 31 Jan 2012 13:23:37 +0000"  >&lt;p&gt;Updated patch.  Test case passes with this.&lt;/p&gt;</comment>
                            <comment id="13196921" author="hadoopqa" created="Tue, 31 Jan 2012 14:09:26 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12512560/HBASE-5200_1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12512560/HBASE-5200_1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -140 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 161 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/880//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/880//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/880//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/880//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/880//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/880//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13197036" author="zhihyu@ebaysf.com" created="Tue, 31 Jan 2012 17:51:53 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-comment&quot;&gt;//Map holding all the regions which got processed &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; RIT is not&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above should read &apos;while RIT was not&apos;.&lt;br/&gt;
Please also explain what Boolean represents in the Map. As far as I can tell, true is always put into Map. So a Set seems more appropriate.&lt;/p&gt;

&lt;p&gt;I see a lot of reformatting, such as the following:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+          &lt;span class=&quot;code-comment&quot;&gt;// could&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Unnecessary reformatting should be excluded from the patch.&lt;/p&gt;
</comment>
                            <comment id="13197049" author="zhihyu@ebaysf.com" created="Tue, 31 Jan 2012 18:00:17 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; HRegionInfo handleRegionWhileFailOverInProgress(
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Should add javadoc for the new method.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IOException e) {
+      master.abort(&lt;span class=&quot;code-quote&quot;&gt;&quot;Aborting because error occoured &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; reading META.&quot;&lt;/span&gt;, e);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;data.getRegionName() should be included in the error message.&lt;/p&gt;</comment>
                            <comment id="13199915" author="zhihyu@ebaysf.com" created="Fri, 3 Feb 2012 18:15:48 +0000"  >&lt;p&gt;Patch v2 incorporates review comments&lt;/p&gt;</comment>
                            <comment id="13200051" author="zhihyu@ebaysf.com" created="Fri, 3 Feb 2012 21:17:58 +0000"  >&lt;p&gt;Re-attach patch v2 for Hadoop QA.&lt;/p&gt;</comment>
                            <comment id="13200088" author="hadoopqa" created="Fri, 3 Feb 2012 22:04:04 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12513176/5200-v2.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12513176/5200-v2.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -136 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 157 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.replication.TestReplicationPeer&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestImportTsv&lt;br/&gt;
                  org.apache.hadoop.hbase.mapred.TestTableMapReduce&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/900//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/900//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/900//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/900//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/900//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/900//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13200334" author="ram_krish" created="Sat, 4 Feb 2012 05:13:12 +0000"  >&lt;p&gt;+1 on v2 patch. &lt;/p&gt;</comment>
                            <comment id="13206118" author="sunnygao" created="Sat, 11 Feb 2012 13:44:30 +0000"  >&lt;p&gt;It seems we need consider issue &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4739&quot; title=&quot;Master dying while going to close a region can leave it in transition forever&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4739&quot;&gt;&lt;del&gt;HBASE-4739&lt;/del&gt;&lt;/a&gt;&quot;&lt;/p&gt;</comment>
                            <comment id="13206128" author="sunnygao" created="Sat, 11 Feb 2012 14:17:37 +0000"  >&lt;p&gt;other issues , &lt;br/&gt;
1. comments said &quot;If ROOT or .META. table is waiting for timeout...&quot;, But the code &quot;isMetaTable&quot; is only Meta table . it seems we should use &quot;isMetaRegion&quot;.&lt;br/&gt;
2. In branch 90 &quot;getRegion&quot; only get region from meta table? It is any problem when root region server crashed? we reassign the root region?&lt;/p&gt;</comment>
                            <comment id="13206143" author="zhihyu@ebaysf.com" created="Sat, 11 Feb 2012 15:11:25 +0000"  >&lt;p&gt;For #1 above, the change is only needed in 0.90&lt;br/&gt;
In 0.92 and TRUNK, we have:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isMetaTable() {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; isRootRegion() || isMetaRegion();
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So patch v2 should be good for 0.92 and TRUNK.&lt;/p&gt;</comment>
                            <comment id="13206834" author="sunnygao" created="Mon, 13 Feb 2012 12:24:24 +0000"  >&lt;p&gt;+1 for 0.92 and trunk&lt;/p&gt;</comment>
                            <comment id="13206950" author="ram_krish" created="Mon, 13 Feb 2012 15:58:15 +0000"  >&lt;p&gt;Patch for 0.90&lt;/p&gt;</comment>
                            <comment id="13206954" author="hadoopqa" created="Mon, 13 Feb 2012 16:06:05 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12514367/hbase-5200_90_latest.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12514367/hbase-5200_90_latest.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/951//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/951//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13207017" author="stack" created="Mon, 13 Feb 2012 18:01:45 +0000"  >&lt;p&gt;Can we do a test for this before it goes into 0.92 and trunk?&lt;/p&gt;</comment>
                            <comment id="13207289" author="stack" created="Mon, 13 Feb 2012 22:34:55 +0000"  >&lt;p&gt;A unit test for this condition.&lt;/p&gt;</comment>
                            <comment id="13207295" author="hadoopqa" created="Mon, 13 Feb 2012 22:41:41 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12514407/5200-test.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12514407/5200-test.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/953//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/953//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13207340" author="stack" created="Mon, 13 Feb 2012 23:32:43 +0000"  >&lt;p&gt;Attached unit test stands up an AssignmentManager and then manufactures the condition that Ram describes.  The test gets stuck and timesout after five seconds because the znode is not cleared on master failover (as per Ram description).&lt;/p&gt;

&lt;p&gt;Ram, your patch no longer applies to TRUNK seemingly.&lt;/p&gt;

&lt;p&gt;Why you make a hash w/ preset size of 1?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; Set&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; regionsProcessed = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashSet&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;(1);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Is this the right name for this hash?  Should it be regionsProcessedJoiningCluster or some such?&lt;/p&gt;

&lt;p&gt;The regionsProcessed hash is of a String.  I see in handleRegionWhileFailOverInProgress that we always get the regioninfo from meta.  Isn&apos;t possible that in processRegionInTransition we may have done this already?  That it may be non-null?  If so, shouldn&apos;t we keep it around so we don&apos;t have to go to the .META. every time but only for those cases where regioninfo is indeed null?  Would that mean changing regionsProcessed to be a Map of String to HRI?&lt;/p&gt;

&lt;p&gt;Isn&apos;t getHRegionInfo repeating code from earlier up in processRegionInTransition?&lt;/p&gt;

&lt;p&gt;If so, change it so that there is only one place where we go to meta... have both places call your new getRegionInfo method.&lt;/p&gt;

&lt;p&gt;Why do this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      hri = p.getFirst();
+      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; hri;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Why not just do return p.getFirst();?&lt;/p&gt;

&lt;p&gt;Is everything shifted right because of this test?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (regionState == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
+          &amp;amp;&amp;amp; !regionsProcessed.contains(encodedRegionName)) {

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If so, shouldn&apos;t we just take the opposite of the above and return immediately if regionState is non-null and in regionsProcesed as in:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (regionsState != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; regionsProcessed.contains(encodedRegionName)) &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This would make your change less substantial.&lt;/p&gt;

&lt;p&gt;It seems wrong that we are putting stuff into RIT in two places; in processRegionsInTransition and in handlRegion if we happen to be fielding a call back before failover has had a chance to run.&lt;/p&gt;

&lt;p&gt;Would the fb trick of NOT processing callbacks during master failover help here?  At least for the scope of the AM.joinCluster?&lt;/p&gt;

&lt;p&gt;Is this a good name for this  method?  handleRegionWhileFailOverInProgress  Should it be checkFailover or some such?&lt;/p&gt;

&lt;p&gt;The test I attached only checks the CLOSING state.  We should extend it to do the other states OPENING, etc.?&lt;/p&gt;

&lt;p&gt;I can help with this.&lt;/p&gt;

&lt;p&gt;Also, how did you figure out this bug.  It must have taken a bunch of head banging to figure that this was indeed what was going on.  Good stuff Ram.&lt;/p&gt;


</comment>
                            <comment id="13207387" author="zhihyu@ebaysf.com" created="Tue, 14 Feb 2012 00:24:13 +0000"  >&lt;p&gt;5200-v2.txt applied to TRUNK.&lt;/p&gt;

&lt;p&gt;However, TestAssignmentManager#testBalanceOnMasterFailover fails with or without the patch.&lt;/p&gt;</comment>
                            <comment id="13207403" author="stack" created="Tue, 14 Feb 2012 00:44:16 +0000"  >&lt;blockquote&gt;&lt;p&gt;However, TestAssignmentManager#testBalanceOnMasterFailover fails with or without the patch.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Then the patch doesn&apos;t fix the issue?&lt;/p&gt;</comment>
                            <comment id="13207785" author="ram_krish" created="Tue, 14 Feb 2012 15:46:57 +0000"  >&lt;p&gt;@Stack&lt;br/&gt;
First of all thanks for the testcase.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Would the fb trick of NOT processing callbacks during master failover help here? At least &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the scope of the AM.joinCluster?
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This part i did not go through as i did  not find time.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
. Isn&apos;t possible that in processRegionInTransition we may have done &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; already? 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The check in handleRegion or in processRegionInTransition will be exclusive.  It will be done only in one place.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
It seems wrong that we are putting stuff into RIT in two places; in processRegionsInTransition and in handlRegion &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; we happen to be fielding a call back before failover has had a chance to run.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Though we do this in two places either procesRIIT or handleREgion only will execute thus the RIT population is neeeded to help process the current flow.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 applied to TRUNK.

However, TestAssignmentManager#testBalanceOnMasterFailover fails with or without the patch.

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The test case had few problems.&lt;br/&gt;
-&amp;gt; The region was not transitioned after the CLOSED transition got a call back for assigning it.  So there was no RS to process the assign.&lt;br/&gt;
-&amp;gt; the gate variable was not getting reset.&lt;br/&gt;
-&amp;gt; One more thing is we will get a call back only after we do the ZKAssign.getDataandWatch.&lt;br/&gt;
But in testcase we were getting a call back just after am.joinCluster.  So i have done some modifications.  &lt;/p&gt;

&lt;p&gt;Once again thanks for the test case which helped to verify the scenarios.  Please provide your suggestions.  &lt;br/&gt;
The FB approach i need some time if we have to check that and implement here.&lt;/p&gt;</comment>
                            <comment id="13207788" author="ram_krish" created="Tue, 14 Feb 2012 15:48:46 +0000"  >&lt;p&gt;0.90 will submit tomorrow.&lt;/p&gt;</comment>
                            <comment id="13207813" author="hadoopqa" created="Tue, 14 Feb 2012 16:35:33 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12514497/HBASE-5200_trunk_latest_with_test_2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12514497/HBASE-5200_trunk_latest_with_test_2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -136 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 158 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.replication.TestReplicationPeer&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat&lt;br/&gt;
                  org.apache.hadoop.hbase.mapred.TestTableMapReduce&lt;br/&gt;
                  org.apache.hadoop.hbase.io.hfile.TestForceCacheImportantBlocks&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestImportTsv&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/958//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/958//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/958//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/958//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/958//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/958//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13207842" author="stack" created="Tue, 14 Feb 2012 17:22:38 +0000"  >&lt;blockquote&gt;&lt;p&gt;-&amp;gt; The region was not transitioned after the CLOSED transition got a call back for assigning it. So there was no RS to process the assign.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I did not think this needed since I&apos;d reproduced your scenario.&lt;/p&gt;

&lt;p&gt;Let me look at your changes.  Thanks.&lt;/p&gt;</comment>
                            <comment id="13207984" author="stack" created="Tue, 14 Feb 2012 20:18:27 +0000"  >&lt;p&gt;I like your test additions.  I refactored the tests so less state kept between tests.&lt;/p&gt;

&lt;p&gt;I also added Map of failover regions w/ HRI as value so if present we don&apos;t have to go to .META.&lt;/p&gt;

&lt;p&gt;I&apos;m thinking though that we can avoid a bunch of the issues we&apos;re seeing here if we go the fb route of not handling events during failover.   Not doing this simplifies failover considerably.  Without it, all kinds of events can be triggered when we&apos;re not ready to handle them.  Let me have a go at the forward port of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5344&quot; title=&quot;[89-fb] Scan unassigned region directory on master failover&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5344&quot;&gt;&lt;del&gt;HBASE-5344&lt;/del&gt;&lt;/a&gt; and then run these unit tests to see  how we do w/ it in place.&lt;/p&gt;</comment>
                            <comment id="13207999" author="zhihyu@ebaysf.com" created="Tue, 14 Feb 2012 20:40:24 +0000"  >&lt;blockquote&gt;&lt;p&gt;if we go the fb route of not handling events during failover&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;How should &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5270&quot; title=&quot;Handle potential data loss due to concurrent processing of processFaileOver and ServerShutdownHandler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5270&quot;&gt;&lt;del&gt;HBASE-5270&lt;/del&gt;&lt;/a&gt; be solved using the above approach ?&lt;/p&gt;</comment>
                            <comment id="13208040" author="stack" created="Tue, 14 Feb 2012 21:43:19 +0000"  >&lt;blockquote&gt;&lt;p&gt;How should &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5270&quot; title=&quot;Handle potential data loss due to concurrent processing of processFaileOver and ServerShutdownHandler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5270&quot;&gt;&lt;del&gt;HBASE-5270&lt;/del&gt;&lt;/a&gt; be solved using the above approach ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;There would be no concurrent servershutdownhandler running.  For the specialization, hbase-4748, in the current version hbase-5344 there&apos;d be no need to get .META. on line to complete failover (but it looks like Mikhail is revisiting this aspect in his last comments up on hbase-5344).&lt;/p&gt;</comment>
                            <comment id="13208151" author="zhihyu@ebaysf.com" created="Wed, 15 Feb 2012 00:22:50 +0000"  >&lt;p&gt;A little confused about the following code in patch v3:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (regionState == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.failover &amp;amp;&amp;amp;
+        failoverProcessedRegions.containsKey(encodedName) == &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;) {
+      HRegionInfo hri = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.failoverProcessedRegions.get(encodedName);
+      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (hri == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) hri = getHRegionInfo(data);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If failoverProcessedRegions.containsKey() returns false, hri would be null initially, right ?&lt;/p&gt;</comment>
                            <comment id="13208173" author="stack" created="Wed, 15 Feb 2012 01:08:19 +0000"  >&lt;p&gt;You are right Ted.&lt;/p&gt;</comment>
                            <comment id="13208175" author="zhihyu@ebaysf.com" created="Wed, 15 Feb 2012 01:10:09 +0000"  >&lt;p&gt;w.r.t. porting &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5344&quot; title=&quot;[89-fb] Scan unassigned region directory on master failover&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5344&quot;&gt;&lt;del&gt;HBASE-5344&lt;/del&gt;&lt;/a&gt;, I think it is a good effort to move region states to zookeeper.&lt;br/&gt;
However, that should be for HBase trunk. I expect a lot of information to be stored in zookeeper, more and more as time goes by.&lt;br/&gt;
Do we know which zookeeper release supports storage of large amount of data ?&lt;/p&gt;

&lt;p&gt;I think the solution provided by Ramkrishna should be integrated.&lt;br/&gt;
Once &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5344&quot; title=&quot;[89-fb] Scan unassigned region directory on master failover&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5344&quot;&gt;&lt;del&gt;HBASE-5344&lt;/del&gt;&lt;/a&gt; gets tested and reviewed, we can consider porting it to TRUNK.&lt;/p&gt;</comment>
                            <comment id="13208183" author="stack" created="Wed, 15 Feb 2012 02:01:14 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think the solution provided by Ramkrishna should be integrated.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Into TRUNK?&lt;/p&gt;

&lt;p&gt;Its an improvement but I feel that there are loads of holes in here trying to process callbacks at the same time as trying to bring the new master online w/ a coherent picture of cluster state; it strikes me as a task w/o end &amp;#8211; hard to test too (witness the test added here).  We need a refactor of master failover.  Holding up all callback processing strikes me as a basic simplification that we should take on.&lt;/p&gt;</comment>
                            <comment id="13208187" author="stack" created="Wed, 15 Feb 2012 02:09:56 +0000"  >&lt;p&gt;Fix issue Zhihong found.   Lookup HRI if no entry for encoded regionname in map OR if the value is null.&lt;/p&gt;</comment>
                            <comment id="13208224" author="ram_krish" created="Wed, 15 Feb 2012 04:51:41 +0000"  >&lt;p&gt;Can i submit an updated patch for 0.90 ?&lt;/p&gt;</comment>
                            <comment id="13208230" author="stack" created="Wed, 15 Feb 2012 05:18:09 +0000"  >&lt;p&gt;Make a new issue Ram since we&apos;ve already committed a patch to 0.90 on this issue?&lt;/p&gt;</comment>
                            <comment id="13208235" author="zhihyu@ebaysf.com" created="Wed, 15 Feb 2012 05:24:54 +0000"  >&lt;p&gt;No patch for this issue has ever been integrated to source repository.&lt;/p&gt;</comment>
                            <comment id="13208238" author="stack" created="Wed, 15 Feb 2012 05:29:36 +0000"  >&lt;p&gt;Sorry.  I misread hadoopqa output.&lt;/p&gt;</comment>
                            <comment id="13208366" author="hadoopqa" created="Wed, 15 Feb 2012 11:04:36 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12514589/5200-v4.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12514589/5200-v4.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -136 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 158 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.io.hfile.TestForceCacheImportantBlocks&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestImportTsv&lt;br/&gt;
                  org.apache.hadoop.hbase.mapred.TestTableMapReduce&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/965//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/965//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/965//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/965//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/965//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/965//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13208487" author="ram_krish" created="Wed, 15 Feb 2012 14:02:44 +0000"  >&lt;p&gt;Updated Patch for 0.90&lt;/p&gt;</comment>
                            <comment id="13208492" author="hadoopqa" created="Wed, 15 Feb 2012 14:12:13 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12514640/hbase-5200_90_latest_new.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12514640/hbase-5200_90_latest_new.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/967//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/967//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13208529" author="ram_krish" created="Wed, 15 Feb 2012 15:11:44 +0000"  >&lt;p&gt;@Stack&lt;/p&gt;

&lt;p&gt;If you feel this patch is good can we take this into trunk or as you said we need to wait for FB patch?&lt;/p&gt;</comment>
                            <comment id="13208575" author="stack" created="Wed, 15 Feb 2012 16:46:16 +0000"  >&lt;p&gt;I&apos;m fine w/ it going into 0.90 (it has a test for the various possible failures).  For TRUNK, I think we should work on a more substantial fix, one that would minimize the moving state while the master is coming up on a failover trying to figure what state the cluster is in.  FB are working on this problem too over in 0.89fb branch.  We can help get it fixed there and then work up a patch for trunk based off the 0.89fb soln &amp;#8211; if it makes sense for trunk.&lt;/p&gt;</comment>
                            <comment id="13208585" author="zhihyu@ebaysf.com" created="Wed, 15 Feb 2012 17:05:37 +0000"  >&lt;p&gt;What about 0.92 ?&lt;br/&gt;
The substantial fix wouldn&apos;t make it to 0.92, I suppose.&lt;/p&gt;</comment>
                            <comment id="13208655" author="stack" created="Wed, 15 Feb 2012 18:38:42 +0000"  >&lt;p&gt;It would make sense that it get committed to 0.92 also.&lt;/p&gt;</comment>
                            <comment id="13208740" author="zhihyu@ebaysf.com" created="Wed, 15 Feb 2012 19:57:31 +0000"  >&lt;p&gt;By Feb. 29th, I am not sure &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5344&quot; title=&quot;[89-fb] Scan unassigned region directory on master failover&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5344&quot;&gt;&lt;del&gt;HBASE-5344&lt;/del&gt;&lt;/a&gt; would make it to 0.89-fb&lt;br/&gt;
I think we should apply patch v4 toward 0.94 branch in early March.&lt;/p&gt;

&lt;p&gt;We should also consider factors that FB may not consider. Namely:&lt;br/&gt;
1. the dynamics of region rebalancing scheduled by load balancer which this JIRA tried to tackle&lt;br/&gt;
2. the dynamics of region splitting&lt;/p&gt;

&lt;p&gt;A perfect solution for 0.89-fb may not be applicable toward HBase TRUNK.&lt;/p&gt;</comment>
                            <comment id="13209373" author="zhihyu@ebaysf.com" created="Thu, 16 Feb 2012 14:07:37 +0000"  >&lt;p&gt;+1 on hbase-5200_90_latest_new.patch, if tests pass.&lt;/p&gt;</comment>
                            <comment id="13209376" author="ram_krish" created="Thu, 16 Feb 2012 14:12:14 +0000"  >&lt;p&gt;@Ted&lt;/p&gt;

&lt;p&gt;Thanks for the review.  The test cases are passing.  &lt;/p&gt;</comment>
                            <comment id="13209535" author="ram_krish" created="Thu, 16 Feb 2012 17:46:50 +0000"  >&lt;p&gt;Tomorrow will integrate this patch to 0.90 and 0.92.&lt;br/&gt;
Please provide your comments and suggestions.&lt;/p&gt;</comment>
                            <comment id="13209561" author="stack" created="Thu, 16 Feb 2012 18:11:04 +0000"  >&lt;p&gt;Ram You should add it to trunk too going by Ted&apos;s reasoning above.  You reviewed my last version?  Its ok w/ you?&lt;/p&gt;</comment>
                            <comment id="13210059" author="ram_krish" created="Fri, 17 Feb 2012 05:05:18 +0000"  >&lt;p&gt;@Stack&lt;br/&gt;
v4 is good. +1&lt;/p&gt;</comment>
                            <comment id="13210093" author="stack" created="Fri, 17 Feb 2012 06:13:09 +0000"  >&lt;p&gt;Ok.  Go ahead commit Ram?&lt;/p&gt;</comment>
                            <comment id="13210460" author="stack" created="Fri, 17 Feb 2012 19:20:42 +0000"  >&lt;p&gt;Ram wants me to apply the patches here but the version for 0.90 is very different to the version for 0.92.  This is removed:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;RS_ZK_REGION_CLOSING      (1),   // RS is in process of closing a region&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;And this is added:&lt;/p&gt;

&lt;p&gt;+    M_ZK_REGION_CLOSING       (51),  // Master adds this region as closing in ZK&lt;/p&gt;

&lt;p&gt;This looks like a port from 0.92?&lt;/p&gt;
</comment>
                            <comment id="13210463" author="stack" created="Fri, 17 Feb 2012 19:22:46 +0000"  >&lt;p&gt;v4 for hadoopqa&lt;/p&gt;</comment>
                            <comment id="13210505" author="hadoopqa" created="Fri, 17 Feb 2012 20:13:21 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12515010/5200-v4no-prefix.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12515010/5200-v4no-prefix.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -136 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 158 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.coprocessor.TestMasterObserver&lt;br/&gt;
                  org.apache.hadoop.hbase.io.hfile.TestForceCacheImportantBlocks&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestImportTsv&lt;br/&gt;
                  org.apache.hadoop.hbase.mapred.TestTableMapReduce&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/981//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/981//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/981//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/981//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/981//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/981//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13210804" author="ram_krish" created="Sat, 18 Feb 2012 04:35:15 +0000"  >&lt;p&gt;@Stack&lt;br/&gt;
yes the closing node is created by master now.&lt;br/&gt;
As I had mentioned in my previous comments&lt;br/&gt;
in 0.90 the closing node if created by RS then on master  failover first we set watch on list children on unassigned node. So RS creates the node just after setting children watch we will start getting callback which will be missed. If we make only the master to create nodes then thisproblem Can be avoided.&lt;/p&gt;</comment>
                            <comment id="13210851" author="ram_krish" created="Sat, 18 Feb 2012 06:50:48 +0000"  >&lt;p&gt;@Stack and @Ted&lt;br/&gt;
I suggest we commit this to 0.92 and trunk.&lt;/p&gt;

&lt;p&gt;The creating of closing node is created in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3789&quot; title=&quot;Cleanup the locking contention in the master&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3789&quot;&gt;&lt;del&gt;HBASE-3789&lt;/del&gt;&lt;/a&gt; and even there the 0.90 patch was left uncommitted as it may affect rolling restarts.&lt;/p&gt;
</comment>
                            <comment id="13211058" author="stack" created="Sat, 18 Feb 2012 20:21:03 +0000"  >&lt;p&gt;What I applied to 0.92.  There is no TestAssignmentManager in 0.92 and there was a little bit of an issue fixing a reject.&lt;/p&gt;</comment>
                            <comment id="13211059" author="stack" created="Sat, 18 Feb 2012 20:21:31 +0000"  >&lt;p&gt;Committed trunk and 0.92 branch.&lt;/p&gt;</comment>
                            <comment id="13211126" author="hudson" created="Sat, 18 Feb 2012 22:08:46 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-security #115 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-security/115/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-security/115/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5200&quot; title=&quot;AM.ProcessRegionInTransition() and AM.handleRegion() race thus leaving the region assignment inconsistent&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5200&quot;&gt;&lt;del&gt;HBASE-5200&lt;/del&gt;&lt;/a&gt; AM.ProcessRegionInTransition() and AM.handleRegion() race thus leaving the region assignment inconsistent (Revision 1290854)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/master/TestAssignmentManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13211139" author="hudson" created="Sat, 18 Feb 2012 22:11:59 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2665 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2665/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2665/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5200&quot; title=&quot;AM.ProcessRegionInTransition() and AM.handleRegion() race thus leaving the region assignment inconsistent&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5200&quot;&gt;&lt;del&gt;HBASE-5200&lt;/del&gt;&lt;/a&gt; AM.ProcessRegionInTransition() and AM.handleRegion() race thus leaving the region assignment inconsistent (Revision 1290854)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/master/TestAssignmentManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13211160" author="hudson" created="Sat, 18 Feb 2012 23:32:57 +0000"  >&lt;p&gt;Integrated in HBase-0.92 #291 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92/291/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92/291/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5200&quot; title=&quot;AM.ProcessRegionInTransition() and AM.handleRegion() race thus leaving the region assignment inconsistent&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5200&quot;&gt;&lt;del&gt;HBASE-5200&lt;/del&gt;&lt;/a&gt; AM.ProcessRegionInTransition() and AM.handleRegion() race thus leaving the region assignment inconsistent (Revision 1290855)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13211390" author="ram_krish" created="Sun, 19 Feb 2012 15:49:10 +0000"  >&lt;p&gt;Thanks for the commit Stack.  I was just thought of committing if it had not been.&lt;/p&gt;</comment>
                            <comment id="13212158" author="hudson" created="Mon, 20 Feb 2012 22:19:14 +0000"  >&lt;p&gt;Integrated in HBase-0.92-security #91 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92-security/91/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92-security/91/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5200&quot; title=&quot;AM.ProcessRegionInTransition() and AM.handleRegion() race thus leaving the region assignment inconsistent&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5200&quot;&gt;&lt;del&gt;HBASE-5200&lt;/del&gt;&lt;/a&gt; AM.ProcessRegionInTransition() and AM.handleRegion() race thus leaving the region assignment inconsistent (Revision 1290855)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12514407" name="5200-test.txt" size="7237" author="stack" created="Mon, 13 Feb 2012 22:34:55 +0000"/>
                            <attachment id="12513176" name="5200-v2.txt" size="15597" author="zhihyu@ebaysf.com" created="Fri, 3 Feb 2012 21:17:58 +0000"/>
                            <attachment id="12514543" name="5200-v3.txt" size="27086" author="stack" created="Tue, 14 Feb 2012 20:18:27 +0000"/>
                            <attachment id="12515100" name="5200-v4-092.txt" size="11666" author="stack" created="Sat, 18 Feb 2012 20:21:03 +0000"/>
                            <attachment id="12514589" name="5200-v4.txt" size="26975" author="stack" created="Wed, 15 Feb 2012 02:09:56 +0000"/>
                            <attachment id="12515010" name="5200-v4no-prefix.txt" size="26008" author="stack" created="Fri, 17 Feb 2012 19:22:46 +0000"/>
                            <attachment id="12512403" name="HBASE-5200.patch" size="15255" author="ram_krish" created="Mon, 30 Jan 2012 11:34:23 +0000"/>
                            <attachment id="12512560" name="HBASE-5200_1.patch" size="15570" author="ram_krish" created="Tue, 31 Jan 2012 13:23:37 +0000"/>
                            <attachment id="12514497" name="HBASE-5200_trunk_latest_with_test_2.patch" size="23274" author="ram_krish" created="Tue, 14 Feb 2012 15:37:29 +0000"/>
                            <attachment id="12512432" name="TEST-org.apache.hadoop.hbase.master.TestRestartCluster.xml" size="91789" author="zhihyu@ebaysf.com" created="Mon, 30 Jan 2012 17:57:30 +0000"/>
                            <attachment id="12514367" name="hbase-5200_90_latest.patch" size="23719" author="ram_krish" created="Mon, 13 Feb 2012 15:58:15 +0000"/>
                            <attachment id="12514640" name="hbase-5200_90_latest_new.patch" size="19711" author="ram_krish" created="Wed, 15 Feb 2012 14:02:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 30 Jan 2012 13:20:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>223895</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 43 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i069mv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34492</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>