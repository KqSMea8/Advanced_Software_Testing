<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:23:58 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5013/HBASE-5013.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5013] NPE in HBaseClient$Connection.receiveResponse</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5013</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;We have the following NPE&lt;/p&gt;

&lt;p&gt;java.io.IOException: Call to hbasedev003.snc3.facebook.com/10.26.1.198:60020 failed on local exception: java.io.IOException: Unexpected exception receiving call responses&lt;br/&gt;
	at org.apache.hadoop.hbase.ipc.HBaseClient.wrapException(HBaseClient.java:916)&lt;br/&gt;
	at org.apache.hadoop.hbase.ipc.HBaseClient.call(HBaseClient.java:885)&lt;br/&gt;
	at org.apache.hadoop.hbase.ipc.WritableRpcEngine$Invoker.invoke(WritableRpcEngine.java:149)&lt;br/&gt;
	at $Proxy6.getProtocolVersion(Unknown Source)&lt;br/&gt;
	at org.apache.hadoop.hbase.ipc.WritableRpcEngine.getProxy(WritableRpcEngine.java:182)&lt;br/&gt;
	at org.apache.hadoop.hbase.ipc.HBaseRPC.getProxy(HBaseRPC.java:295)&lt;br/&gt;
	at org.apache.hadoop.hbase.ipc.HBaseRPC.getProxy(HBaseRPC.java:272)&lt;br/&gt;
	at org.apache.hadoop.hbase.ipc.HBaseRPC.getProxy(HBaseRPC.java:324)&lt;br/&gt;
	at org.apache.hadoop.hbase.ipc.HBaseRPC.waitForProxy(HBaseRPC.java:228)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.getHRegionConnection(HConnectionManager.java:1197)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.getHRegionConnection(HConnectionManager.java:1154)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.getHRegionConnection(HConnectionManager.java:1141)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegionInMeta(HConnectionManager.java:872)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegion(HConnectionManager.java:768)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.relocateRegion(HConnectionManager.java:742)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegionInMeta(HConnectionManager.java:978)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegion(HConnectionManager.java:772)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegion(HConnectionManager.java:736)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.HTable.(HTable.java:207)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.HTable.(HTable.java:177)&lt;br/&gt;
	at com.facebook.BulkImporter.VerifyAssocs.(VerifyAssocs.java:248)&lt;br/&gt;
	at com.facebook.BulkImporter.VerifyAssocs$AssocVerifierMapper.setup(VerifyAssocs.java:138)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:142)&lt;br/&gt;
	at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:624)&lt;br/&gt;
	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:305)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child.main(Child.java:159)&lt;br/&gt;
Caused by: java.io.IOException: Unexpected exception receiving call responses&lt;br/&gt;
	at org.apache.hadoop.hbase.ipc.HBaseClient$Connection.run(HBaseClient.java:494)&lt;br/&gt;
Caused by: java.lang.NullPointerException&lt;br/&gt;
	at org.apache.hadoop.hbase.ipc.HBaseClient$Connection.receiveResponse(HBaseClient.java:571)&lt;br/&gt;
	at org.apache.hadoop.hbase.ipc.HBaseClient$Connection.run(HBaseClient.java:490)&lt;/p&gt;


&lt;p&gt;===&lt;/p&gt;


&lt;p&gt;Just by looking at code the NPE shouldn&apos;t have happened&lt;/p&gt;

&lt;p&gt;HBaseClient$Connection.setUpIOstreams() sets up in and out.&lt;br/&gt;
Then it starts the Connection thread.&lt;br/&gt;
The Connection in its run method calls receiveResponse()&lt;br/&gt;
In receiveResponse() NPE happens in &lt;br/&gt;
            int id = in.readInt();&lt;/p&gt;

&lt;p&gt;As per java.util.concurrent docs the the initialization of in should have been visible in the Connection thread&apos;s run() method. So I don&apos;t know how in ended up being NULL.&lt;/p&gt;

&lt;p&gt;===&lt;/p&gt;

&lt;p&gt;While looking into this issue I noticed a small problem in the closeConnection() method. I will soon upload a diff.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12534907">HBASE-5013</key>
            <summary>NPE in HBaseClient$Connection.receiveResponse</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="khemani">Prakash Khemani</assignee>
                                    <reporter username="khemani">Prakash Khemani</reporter>
                        <labels>
                    </labels>
                <created>Tue, 13 Dec 2011 06:14:44 +0000</created>
                <updated>Tue, 13 Dec 2011 16:54:31 +0000</updated>
                            <resolved>Tue, 13 Dec 2011 16:54:31 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13168159" author="stack" created="Tue, 13 Dec 2011 06:30:45 +0000"  >&lt;p&gt;Hard to tell if its &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4980&quot; title=&quot;Null pointer exception in HBaseClient receiveResponse&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4980&quot;&gt;&lt;del&gt;HBASE-4980&lt;/del&gt;&lt;/a&gt; since it doesn&apos;t have full stack trace.  See what you think though Prakash... see what you think of the rationale over there?&lt;/p&gt;</comment>
                            <comment id="13168168" author="khemani" created="Tue, 13 Dec 2011 06:41:31 +0000"  >
&lt;p&gt;It could be &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4980&quot; title=&quot;Null pointer exception in HBaseClient receiveResponse&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4980&quot;&gt;&lt;del&gt;HBASE-4980&lt;/del&gt;&lt;/a&gt;. &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4980&quot; title=&quot;Null pointer exception in HBaseClient receiveResponse&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4980&quot;&gt;&lt;del&gt;HBASE-4980&lt;/del&gt;&lt;/a&gt; is not synced-into the internal fb&lt;br/&gt;
branch. My analysis could be wring because I might be trying to match the&lt;br/&gt;
stack trace against the wrong build. I will cross check.&lt;/p&gt;



</comment>
                            <comment id="13168504" author="khemani" created="Tue, 13 Dec 2011 16:54:31 +0000"  >&lt;p&gt;Most likely a dup of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4980&quot; title=&quot;Null pointer exception in HBaseClient receiveResponse&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4980&quot;&gt;&lt;del&gt;HBASE-4980&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 13 Dec 2011 06:30:45 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>220591</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 1 week, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i069zz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34551</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>