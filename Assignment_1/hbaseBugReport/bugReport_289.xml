<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:42:52 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-289/HBASE-289.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-289] [hbase] Add a LocalHBaseCluster</title>
                <link>https://issues.apache.org/jira/browse/HBASE-289</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Make a MiniHBaseCluster-like class named LocalHBaseCluster.  Key difference would be purge of MiniDFSCluster and FileSystem references/management and removal of utility that only makes sense in a unit testing context (Perhaps have MHBC inherit from LHBC).  Make a new class rather than move MHBC from src/test to src/java to allow for later having master and regionserver do direct method invocation rather than invocation via RPC.  LHRC would be used when hbase.master is set to the value &apos;local&apos;.&lt;/p&gt;

&lt;p&gt;LHRC would have a shutdown method to shutdown the cluster.  MHBC brings up the cluster on construction.  Perhaps LHRC should do different and not start the cluster until invocation of startup method.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12380832">HBASE-289</key>
            <summary>[hbase] Add a LocalHBaseCluster</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Sat, 20 Oct 2007 19:22:11 +0000</created>
                <updated>Fri, 22 Aug 2008 21:34:58 +0000</updated>
                            <resolved>Thu, 25 Oct 2007 16:31:15 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12536903" author="stack" created="Tue, 23 Oct 2007 04:24:57 +0000"  >&lt;p&gt;Here&apos;s a patch w/ commit message below.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
HADOOP-2084 Add a LocalHBaseCluster
Add &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; LocalHBaseCluster class, a derivative of the test class
MiniHBaseCluster.  It runs a master and region server in same process.
Make &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; mini-cluster the &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; to mimic standalone mode in hadoop and nutch.
M  src/contrib/hbase/conf/hbase-&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;.xml
    Make &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; be &apos;local&apos; rather than &apos;0.0.0.0:60000&apos;.
M src/contrib/hbase/src/test/org/apache/hadoop/hbase/TestInfoServers.java
M  src/contrib/hbase/src/test/org/apache/hadoop/hbase/HBaseClusterTestCase.java
M src/contrib/hbase/src/test/org/apache/hadoop/hbase/MultiRegionTable.java
M  src/contrib/hbase/src/test/org/apache/hadoop/hbase/TestLogRolling.java
    MiniHBaseCluster API changed.
M  src/contrib/hbase/src/test/org/apache/hadoop/hbase/OOMEHMaster.java
    HMaster doMain &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; an exception now.
M  src/contrib/hbase/src/test/org/apache/hadoop/hbase/MiniHBaseCluster.java
    Delegate hbase cluster management to &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; LocalHBaseCluster.
    Moved good bit of &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; classes&apos; code up into &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; LHBC so available
    beyond testing.  Some cleanup &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; moving the code (no need of the
    old MasterThread &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; instance).
M  src/contrib/hbase/src/java/org/apache/hadoop/hbase/HRegionServer.java
    Moved setup of RPC server into reportForDuty method from Constructor so could
    construct a RegionServer without need of a master being up and running.
    Also made a significant change in the way we go down.  Master was just
    waiting on the lease &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; all region servers to time out even &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; region
    servers had actual gone down earlier.  I (I believe it was I) had reasoned
    that region server shouldn&apos;t send the EXIT message to the master &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the
    master had ordained the shutdown because master might not be there to
    receive the shutdown... but master is waiting on all region server 
    leases to expire.  If a region server does send the EXIT message,
    the master will clean up its references and in general cluster shutdown
    runs faster.  Putting &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; facility back &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; now.
    (doMain): Do not run a region server &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; hbase.master is &apos;local&apos;.
M  src/contrib/hbase/src/java/org/apache/hadoop/hbase/HConstants.java
    DEFAULT_MASTER_PORT: Added.
A src/contrib/hbase/src/java/org/apache/hadoop/hbase/LocalHBaseCluster.java
    Added.
M  src/contrib/hbase/src/java/org/apache/hadoop/hbase/HMaster.java
    (doMain): Run LocalHBaseCluster &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; hbase.master is &apos;local&apos;.
M src/contrib/hbase/src/java/org/apache/hadoop/hbase/HConnectionManager.java
    Handle &apos;local&apos; mode.
M src/contrib/hbase/src/java/org/apache/hadoop/hbase/HBaseConnection.java
    Expose cloning.
M src/contrib/hbase/src/java/org/apache/hadoop/hbase/&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;.html
   Update doc. to accomodate &apos;local&apos; mode.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12536904" author="stack" created="Tue, 23 Oct 2007 04:26:54 +0000"  >&lt;p&gt;Previous patch had hadoop-2088 patch mistakenly mixed in.&lt;/p&gt;</comment>
                            <comment id="12536926" author="stack" created="Tue, 23 Oct 2007 06:51:01 +0000"  >&lt;p&gt;Passes locally.  Trying hudson.&lt;/p&gt;</comment>
                            <comment id="12537464" author="stack" created="Thu, 25 Oct 2007 00:16:30 +0000"  >&lt;p&gt;v3 includes benefit of a Jim review (Added some javadoc and removed unused imports).&lt;/p&gt;</comment>
                            <comment id="12537493" author="hadoopqa" created="Thu, 25 Oct 2007 04:40:05 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
&lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12368336/localhbasecluster-v3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12368336/localhbasecluster-v3.patch&lt;/a&gt;&lt;br/&gt;
against trunk revision r588083.&lt;/p&gt;

&lt;p&gt;    @author +1.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    javadoc +1.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    javac +1.  The applied patch does not generate any new compiler warnings.&lt;/p&gt;

&lt;p&gt;    findbugs +1.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    core tests +1.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    contrib tests +1.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/978/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/978/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/978/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/978/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle results: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/978/artifact/trunk/build/test/checkstyle-errors.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/978/artifact/trunk/build/test/checkstyle-errors.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/978/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/978/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12537649" author="stack" created="Thu, 25 Oct 2007 16:31:15 +0000"  >&lt;p&gt;Committed.  Resolving.&lt;/p&gt;</comment>
                            <comment id="12537686" author="hudson" created="Thu, 25 Oct 2007 18:22:14 +0000"  >&lt;p&gt;Integrated in Hadoop-Nightly #282 (See &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Nightly/282/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Nightly/282/&lt;/a&gt;)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12368187" name="localhbasecluster-v2.patch" size="39855" author="stack" created="Tue, 23 Oct 2007 04:26:54 +0000"/>
                            <attachment id="12368336" name="localhbasecluster-v3.patch" size="39736" author="stack" created="Thu, 25 Oct 2007 00:16:30 +0000"/>
                            <attachment id="12368186" name="localhbasecluster.patch" size="40989" author="stack" created="Tue, 23 Oct 2007 04:24:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 25 Oct 2007 04:40:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25073</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 9 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h69z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98279</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>