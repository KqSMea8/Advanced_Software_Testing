<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:43:19 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-13437/HBASE-13437.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-13437] ThriftServer leaks ZooKeeper connections</title>
                <link>https://issues.apache.org/jira/browse/HBASE-13437</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;HBase ThriftServer will cache Zookeeper connection in memory using org.apache.hadoop.hbase.util.ConnectionCache. This class has a mechanism called chore to clean up connections idle for too long(default is 10 min). But method timedOut for testing whether idle exceed for maxIdleTime always return false which leads to never release the Zookeeper connection. If we send request to ThriftServer every maxIdleTime then ThriftServer will keep thousands of Zookeeper Connection soon.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12819584">HBASE-13437</key>
            <summary>ThriftServer leaks ZooKeeper connections</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fullung">Albert Strasheim</assignee>
                                    <reporter username="punwinger">Winger Pun</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Apr 2015 06:53:15 +0000</created>
                <updated>Thu, 28 Jan 2016 15:14:32 +0000</updated>
                            <resolved>Wed, 22 Apr 2015 16:01:16 +0000</resolved>
                                    <version>0.98.8</version>
                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>1.1.0</fixVersion>
                    <fixVersion>0.98.13</fixVersion>
                    <fixVersion>1.0.2</fixVersion>
                                    <component>Thrift</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>11</watches>
                                                                <comments>
                            <comment id="14486896" author="punwinger" created="Thu, 9 Apr 2015 07:29:31 +0000"  >&lt;p&gt;just a litte fix.&lt;/p&gt;</comment>
                            <comment id="14486957" author="hadoopqa" created="Thu, 9 Apr 2015 08:20:04 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12724174/hbase-13437-fix.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12724174/hbase-13437-fix.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 80dbf06651e527ec0421ce51e4712ffb2f1d078b.&lt;br/&gt;
  ATTACHMENT ID: 12724174&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.1 2.5.2 2.6.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13642//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13642//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13642//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13642//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13642//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13642//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13642//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13642//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14487471" author="yuzhihong@gmail.com" created="Thu, 9 Apr 2015 15:02:44 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14488042" author="ndimiduk" created="Thu, 9 Apr 2015 19:17:26 +0000"  >&lt;p&gt;I think this is no longer a problem in master and branch-1, as HTablePool has been replaced by the new Connection interface. However, it may still be there in branch-1.0. Mind having a look?&lt;/p&gt;</comment>
                            <comment id="14489485" author="punwinger" created="Fri, 10 Apr 2015 11:57:08 +0000"  >&lt;p&gt;I test master and branch-1.0 in my test cluster and the problem still exist. So I read their codebase and as &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt; said master and branch-1 use the new interface ClusterConnection to getTable directly. But the problem is ConnectionCache doesn&apos;t close the connection as it manager ClusterConnection to do the cache thing. And I also test branch-1.0 which also leaks connection. So I suggest this patch should apply to all these branches.&lt;/p&gt;</comment>
                            <comment id="14489486" author="punwinger" created="Fri, 10 Apr 2015 11:57:12 +0000"  >&lt;p&gt;I test master and branch-1.0 in my test cluster and the problem still exist. So I read their codebase and as &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt; said master and branch-1 use the new interface ClusterConnection to getTable directly. But the problem is ConnectionCache doesn&apos;t close the connection as it manager ClusterConnection to do the cache thing. And I also test branch-1.0 which also leaks connection. So I suggest this patch should apply to all these branches.&lt;/p&gt;</comment>
                            <comment id="14489498" author="punwinger" created="Fri, 10 Apr 2015 12:03:17 +0000"  >&lt;p&gt;Sorry for my double reply. Page doesn&apos;t react when I first add comment though.&lt;/p&gt;</comment>
                            <comment id="14492742" author="ndimiduk" created="Mon, 13 Apr 2015 17:55:37 +0000"  >&lt;p&gt;Okay, yes. Makes sense. +1.&lt;/p&gt;

&lt;p&gt;We have no test coverage for connection expiration?&lt;/p&gt;</comment>
                            <comment id="14504584" author="punwinger" created="Tue, 21 Apr 2015 08:25:33 +0000"  >&lt;p&gt;Seems like no related test. I will have a try.&lt;/p&gt;</comment>
                            <comment id="14506496" author="punwinger" created="Wed, 22 Apr 2015 06:10:32 +0000"  >&lt;p&gt;Done now. Just a simple test. Please suggest me if there are problems &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu&quot; class=&quot;user-hover&quot; rel=&quot;tedyu&quot;&gt;Ted Yu&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14506506" author="hadoopqa" created="Wed, 22 Apr 2015 06:20:35 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12727136/HBASE-13437_1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12727136/HBASE-13437_1.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 23960207527b685609cd01259efbeb98f077b209.&lt;br/&gt;
  ATTACHMENT ID: 12727136&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 2 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javac&lt;/font&gt;.  The patch appears to cause mvn compile goal to fail with Hadoop version 2.4.1.&lt;/p&gt;

&lt;p&gt;    Compilation errors resume:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; COMPILATION ERROR : &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build@2/hbase-server/src/test/java/org/apache/hadoop/hbase/util/TestConnectionCache.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;23,31&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build@2/hbase-server/src/test/java/org/apache/hadoop/hbase/util/TestConnectionCache.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;28,11&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.2:testCompile (default-testCompile) on project hbase-server: Compilation failure: Compilation failure:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build@2/hbase-server/src/test/java/org/apache/hadoop/hbase/util/TestConnectionCache.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;23,31&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; symbol:   class MediumTests&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; location: package org.apache.hadoop.hbase&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build@2/hbase-server/src/test/java/org/apache/hadoop/hbase/util/TestConnectionCache.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;28,11&amp;#93;&lt;/span&gt; cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; symbol: class MediumTests&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; To see the full stack trace of the errors, re-run Maven with the -e switch.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Re-run Maven using the -X switch to enable full debug logging.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; For more information about the errors and possible solutions, please read the following articles:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; After correcting the problems, you can resume the build with the command&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt;   mvn &amp;lt;goals&amp;gt; -rf :hbase-server&lt;/p&gt;


&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13770//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13770//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14506686" author="punwinger" created="Wed, 22 Apr 2015 09:01:45 +0000"  >&lt;p&gt;fix compile error&lt;/p&gt;</comment>
                            <comment id="14506911" author="hadoopqa" created="Wed, 22 Apr 2015 11:41:24 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12727161/HBASE-13437_1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12727161/HBASE-13437_1.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 23960207527b685609cd01259efbeb98f077b209.&lt;br/&gt;
  ATTACHMENT ID: 12727161&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.1 2.5.2 2.6.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13772//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13772//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13772//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13772//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13772//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13772//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/13772//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/13772//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14507054" author="yuzhihong@gmail.com" created="Wed, 22 Apr 2015 13:22:11 +0000"  >&lt;p&gt;Lgtm&lt;/p&gt;</comment>
                            <comment id="14507312" author="yuzhihong@gmail.com" created="Wed, 22 Apr 2015 16:01:16 +0000"  >&lt;p&gt;Thanks for the patch, Winger.&lt;/p&gt;

&lt;p&gt;Thanks for the review, Nick.&lt;/p&gt;</comment>
                            <comment id="14507349" author="hudson" created="Wed, 22 Apr 2015 16:26:55 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.2 #15 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2/15/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2/15/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13437&quot; title=&quot;ThriftServer leaks ZooKeeper connections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13437&quot;&gt;&lt;del&gt;HBASE-13437&lt;/del&gt;&lt;/a&gt; ThriftServer leaks ZooKeeper connections (Winger Pun) (tedyu: rev 71b77555848445f0c6e8b26f4ea512302d41e469)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/util/TestConnectionCache.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/util/ConnectionCache.java&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13437&quot; title=&quot;ThriftServer leaks ZooKeeper connections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13437&quot;&gt;&lt;del&gt;HBASE-13437&lt;/del&gt;&lt;/a&gt; Addendum removes MiscTests (tedyu: rev 30880bca556542c1043fba5d81fc167cef2df270)&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/util/TestConnectionCache.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14507397" author="hudson" created="Wed, 22 Apr 2015 16:53:55 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.0 #873 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/873/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.0/873/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13437&quot; title=&quot;ThriftServer leaks ZooKeeper connections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13437&quot;&gt;&lt;del&gt;HBASE-13437&lt;/del&gt;&lt;/a&gt; ThriftServer leaks ZooKeeper connections (Winger Pun) (tedyu: rev f67b0beadd7b730d6265b13b7fe0462ece864fe8)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/util/TestConnectionCache.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/util/ConnectionCache.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14507435" author="hudson" created="Wed, 22 Apr 2015 17:11:19 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #6401 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/6401/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/6401/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13437&quot; title=&quot;ThriftServer leaks ZooKeeper connections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13437&quot;&gt;&lt;del&gt;HBASE-13437&lt;/del&gt;&lt;/a&gt; ThriftServer leaks ZooKeeper connections (Winger Pun) (tedyu: rev 2bf8cda4f68940909e9bcfdf8ae41cc751a49c7d)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/util/ConnectionCache.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/util/TestConnectionCache.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14507485" author="hudson" created="Wed, 22 Apr 2015 17:28:22 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.1 #421 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.1/421/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.1/421/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13437&quot; title=&quot;ThriftServer leaks ZooKeeper connections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13437&quot;&gt;&lt;del&gt;HBASE-13437&lt;/del&gt;&lt;/a&gt; ThriftServer leaks ZooKeeper connections (Winger Pun) (tedyu: rev 0f77121235f66cd9c1695086e566e2e66be7f6d5)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/util/TestConnectionCache.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/util/ConnectionCache.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14507688" author="hudson" created="Wed, 22 Apr 2015 19:06:42 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.98 #958 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/958/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/958/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13437&quot; title=&quot;ThriftServer leaks ZooKeeper connections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13437&quot;&gt;&lt;del&gt;HBASE-13437&lt;/del&gt;&lt;/a&gt; ThriftServer leaks ZooKeeper connections (Winger Pun) (tedyu: rev 5e38ffe6f43193e6cbb1211feff95c85d05d577c)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/util/ConnectionCache.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/util/TestConnectionCache.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14507792" author="hudson" created="Wed, 22 Apr 2015 20:10:15 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98-on-Hadoop-1.1 #911 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/911/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/911/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13437&quot; title=&quot;ThriftServer leaks ZooKeeper connections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13437&quot;&gt;&lt;del&gt;HBASE-13437&lt;/del&gt;&lt;/a&gt; ThriftServer leaks ZooKeeper connections (Winger Pun) (tedyu: rev 5e38ffe6f43193e6cbb1211feff95c85d05d577c)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/util/TestConnectionCache.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/util/ConnectionCache.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14571150" author="ndimiduk" created="Wed, 3 Jun 2015 15:29:18 +0000"  >&lt;p&gt;Closing issues released in 1.1.0.&lt;/p&gt;</comment>
                            <comment id="14606914" author="jyf2100" created="Tue, 30 Jun 2015 03:16:02 +0000"  >&lt;p&gt;after this bug fixed&#65292;find a new bug, thrift call will throws a exception&#65306;&lt;br/&gt;
org.apache.thrift.transport.TTransportException: java.net.SocketTimeoutException: Read timed out&lt;br/&gt;
	at org.apache.thrift.transport.TIOStreamTransport.read(TIOStreamTransport.java:129)&lt;br/&gt;
	at org.apache.thrift.transport.TTransport.readAll(TTransport.java:84)&lt;br/&gt;
	at org.apache.thrift.protocol.TBinaryProtocol.readAll(TBinaryProtocol.java:378)&lt;br/&gt;
	at org.apache.thrift.protocol.TBinaryProtocol.readI32(TBinaryProtocol.java:297)&lt;br/&gt;
	at org.apache.thrift.protocol.TBinaryProtocol.readMessageBegin(TBinaryProtocol.java:204)&lt;br/&gt;
	at org.apache.thrift.TServiceClient.receiveBase(TServiceClient.java:69)&lt;br/&gt;
	at org.apache.hadoop.hbase.thrift2.generated.THBaseService$Client.recv_getScannerResults(THBaseService.java:703)&lt;br/&gt;
	at org.apache.hadoop.hbase.thrift2.generated.THBaseService$Client.getScannerResults(THBaseService.java:688)&lt;br/&gt;
	at com.nl.test.ScanTask.run(ScanTask.java:47)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:745)&lt;br/&gt;
Caused by: java.net.SocketTimeoutException: Read timed out&lt;br/&gt;
	at java.net.SocketInputStream.socketRead0(Native Method)&lt;br/&gt;
	at java.net.SocketInputStream.read(SocketInputStream.java:152)&lt;br/&gt;
	at java.net.SocketInputStream.read(SocketInputStream.java:122)&lt;br/&gt;
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:235)&lt;br/&gt;
	at java.io.BufferedInputStream.read1(BufferedInputStream.java:275)&lt;br/&gt;
	at java.io.BufferedInputStream.read(BufferedInputStream.java:334)&lt;br/&gt;
	at org.apache.thrift.transport.TIOStreamTransport.read(TIOStreamTransport.java:127)&lt;br/&gt;
	... 9 more&lt;br/&gt;
=================================================================&lt;br/&gt;
I found  org.apache.hadoop.hbase.util.ConnectionCache&apos;s InnerClass  connInfo.updateAccessTime() won&apos;t be called,&lt;br/&gt;
till maxIdleTime it close the connection,because of org.apache.hadoop.hbase.client.HTablePool&apos;s method findOrCreateTable&lt;br/&gt;
will use its HTableInterface table = tables.get(tableName) and this won&apos;t renew connection time.&lt;br/&gt;
so  I modified org.apache.hadoop.hbase.client.HTablePool.java&lt;br/&gt;
private HTableInterface findOrCreateTable(String tableName) {&lt;br/&gt;
    //HTableInterface table = tables.get(tableName);&lt;br/&gt;
    //if (table == null) &lt;/p&gt;
{
    //  table = createHTable(tableName);
    //}
&lt;p&gt;    //return table;&lt;br/&gt;
    return createHTable(tableName);&lt;br/&gt;
  }&lt;/p&gt;</comment>
                            <comment id="14985473" author="pkucharski" created="Mon, 2 Nov 2015 16:22:35 +0000"  >&lt;p&gt;workaround is to disable HTablePoll by&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;property&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;hbase.thrift.htablepool.size.max&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;value&amp;gt;&lt;/span&gt;0&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/value&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/property&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15121659" author="khaledh" created="Thu, 28 Jan 2016 15:14:32 +0000"  >&lt;p&gt;For reference, this bug impacts the REST server as well, since it also uses the `ConnectionCache` class.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12727161" name="HBASE-13437_1.patch" size="3481" author="punwinger" created="Wed, 22 Apr 2015 09:01:45 +0000"/>
                            <attachment id="12727136" name="HBASE-13437_1.patch" size="2865" author="punwinger" created="Wed, 22 Apr 2015 06:05:07 +0000"/>
                            <attachment id="12724174" name="hbase-13437-fix.patch" size="603" author="punwinger" created="Thu, 9 Apr 2015 07:30:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 9 Apr 2015 08:20:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            46 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2d0n3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>