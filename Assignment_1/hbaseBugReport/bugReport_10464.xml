<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:14:02 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-10464/HBASE-10464.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-10464] Race condition during RS shutdown that could cause data loss</title>
                <link>https://issues.apache.org/jira/browse/HBASE-10464</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Bug scenario (T* are timestamps, say T1 &amp;lt; T2 &amp;lt; ... &amp;lt; Tn):&lt;br/&gt;
1. Master assigns a region to RS at T1&lt;br/&gt;
2. RS works on opening the region during T1 to T3&lt;br/&gt;
3. In the mean time of opening the region, RS starts to shut down at T2, and dfs client is closed at T5.&lt;br/&gt;
4. Regions owned by the RS get closed as a step of RS shutdown except that the newly opened region is online during T3 to T5 and holds some mutations in memory after possible last flush T4.&lt;br/&gt;
5. Since master thinks RS has a clean shutdown, there is no log splitting. The HLog was moved to old logs directory naturally.&lt;br/&gt;
6. Mutations in memory between T4 to T5 (if T4 does not exist, T3 to T5) are not flushed. They only exist in WAL if it is turned on.&lt;/p&gt;

&lt;p&gt;Fix is to prevent region opening from succeeding when the RS is shutting down.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12693232">HBASE-10464</key>
            <summary>Race condition during RS shutdown that could cause data loss</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="fantasist">Yunfan Zhong</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Feb 2014 21:45:06 +0000</created>
                <updated>Thu, 13 Feb 2014 20:46:38 +0000</updated>
                            <resolved>Tue, 4 Feb 2014 21:54:44 +0000</resolved>
                                    <version>0.89-fb</version>
                                    <fixVersion>0.89-fb</fixVersion>
                                    <component>regionserver</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13900690" author="stack" created="Thu, 13 Feb 2014 20:15:56 +0000"  >&lt;p&gt;Thanks for posting the patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fantasist&quot; class=&quot;user-hover&quot; rel=&quot;fantasist&quot;&gt;Yunfan Zhong&lt;/a&gt; I&apos;m forward porting it over in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10514&quot; title=&quot;Forward port HBASE-10466, possible data loss when failed flushes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10514&quot;&gt;&lt;del&gt;HBASE-10514&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13900713" author="stack" created="Thu, 13 Feb 2014 20:46:38 +0000"  >&lt;p&gt;I took a look and we don&apos;t have this issue.  We spawn a thread to open regions.  The open handler already has this check for stopping or stopped regionserver host before we add region to online regions list.  We should be good.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12694852">HBASE-10514</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12626987" name="D1120497.diff" size="10985" author="fantasist" created="Tue, 4 Feb 2014 21:54:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 13 Feb 2014 20:15:56 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>371818</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 44 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1s2uv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>372122</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>