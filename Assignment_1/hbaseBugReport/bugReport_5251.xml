<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:26:06 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5251/HBASE-5251.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5251] Some commands return &quot;0 rows&quot; when &gt; 0 rows were processed successfully</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5251</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;From the hbase shell, I see this:&lt;/p&gt;

&lt;p&gt;hbase(main):049:0&amp;gt; scan &apos;t1&apos;                    &lt;br/&gt;
ROW                   COLUMN+CELL                                               &lt;br/&gt;
 r1                   column=f1:c1, timestamp=1327104295560, value=value        &lt;br/&gt;
 r1                   column=f1:c2, timestamp=1327104330625, value=value        &lt;br/&gt;
1 row(s) in 0.0300 seconds&lt;/p&gt;

&lt;p&gt;hbase(main):050:0&amp;gt; deleteall &apos;t1&apos;, &apos;r1&apos;&lt;br/&gt;
0 row(s) in 0.0080 seconds                  &amp;lt;====== I expected this to read &quot;2 row(s)&quot;&lt;/p&gt;

&lt;p&gt;hbase(main):051:0&amp;gt; scan &apos;t1&apos;           &lt;br/&gt;
ROW                   COLUMN+CELL                                               &lt;br/&gt;
0 row(s) in 0.0090 seconds&lt;/p&gt;

&lt;p&gt;I expected the deleteall command to return &quot;1 row(s)&quot; instead of 0, because 1 row was deleted.  Similar behavior for delete and some other commands.  Some commands such as &quot;put&quot; work fine.&lt;/p&gt;

&lt;p&gt;Looking at the ruby shell code, it seems that formatter.footer() is called even for commands that will not actually increment the number of rows reported, such as deletes.  Perhaps there should be another similar function to formatter.footer(), but that will not print out @row_count.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12539364">HBASE-5251</key>
            <summary>Some commands return &quot;0 rows&quot; when &gt; 0 rows were processed successfully</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="10002" iconUrl="https://issues.apache.org/jira/images/icons/statuses/document.png" description="A patch for this issue has been uploaded to JIRA by a contributor.">Patch Available</status>
                    <statusCategory id="4" key="indeterminate" colorName="yellow"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="samspost@gmail.com">Sameer Vaishampayan</assignee>
                                    <reporter username="dsw">David S. Wang</reporter>
                        <labels>
                            <label>beginner</label>
                    </labels>
                <created>Sun, 22 Jan 2012 23:21:17 +0000</created>
                <updated>Wed, 13 Aug 2014 14:16:55 +0000</updated>
                                            <version>0.90.5</version>
                                                    <component>shell</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="13287631" author="sameerv" created="Fri, 1 Jun 2012 20:01:24 +0000"  >&lt;p&gt;I am working on fixing this issue. Will have a patch soon.&lt;/p&gt;</comment>
                            <comment id="13434390" author="sameerv" created="Tue, 14 Aug 2012 18:59:58 +0000"  >&lt;p&gt;Patch for fixing the shell return messages.&lt;/p&gt;</comment>
                            <comment id="13434400" author="sameerv" created="Tue, 14 Aug 2012 19:10:39 +0000"  >&lt;p&gt;Patch to fix shell commands return message.&lt;/p&gt;</comment>
                            <comment id="13434420" author="sameerv" created="Tue, 14 Aug 2012 19:33:29 +0000"  >&lt;p&gt;Patch is ready and uploaded to the Jira. Committers please take a look at it.&lt;/p&gt;</comment>
                            <comment id="13434485" author="hadoopqa" created="Tue, 14 Aug 2012 20:39:34 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12540925/patch7.diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12540925/patch7.diff&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 1 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The applied patch generated 5 javac compiler warnings (more than the trunk&apos;s current 4 warnings).&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 9 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.coprocessor.TestRegionServerCoprocessorExceptionWithAbort&lt;br/&gt;
                  org.apache.hadoop.hbase.client.TestShell&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2567//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2567//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2567//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2567//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2567//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2567//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2567//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2567//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2567//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2567//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2567//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2567//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2567//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2567//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13434489" author="jesse_yates" created="Tue, 14 Aug 2012 20:40:43 +0000"  >&lt;p&gt;@Sameer: TestShell looks like an issue with this patch. Want to take a look?&lt;/p&gt;</comment>
                            <comment id="13437427" author="sameerv" created="Sat, 18 Aug 2012 22:35:36 +0000"  >&lt;p&gt;Patch with test fixes&lt;/p&gt;</comment>
                            <comment id="13437439" author="hadoopqa" created="Sat, 18 Aug 2012 23:53:50 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12541509/patch8.diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12541509/patch8.diff&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 16 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 hadoop2.0.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The applied patch generated 5 javac compiler warnings (more than the trunk&apos;s current 4 warnings).&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 8 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2615//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2615//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2615//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2615//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2615//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2615//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2615//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2615//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2615//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2615//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2615//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2615//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2615//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2615//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13437453" author="stack" created="Sun, 19 Aug 2012 04:21:12 +0000"  >&lt;p&gt;Sameer.  Patch looks good.  Now we do not pass a formatter?  There is a default instead?  (Looks like it is RowFormatter?)&lt;/p&gt;

&lt;p&gt;When we do this:&lt;/p&gt;

&lt;p&gt;+    rowFormatter = Shell::Formatter::RowFormatter.new(:output_stream =&amp;gt; STDOUT)&lt;/p&gt;

&lt;p&gt;Is this saying STDOUT is default or is it saying use STDOUT?&lt;/p&gt;

&lt;p&gt;Do RowFormatter and AdminFormatter need comments explaining when they are used?&lt;/p&gt;

&lt;p&gt;+1 on removing the XHTMLFooter.&lt;/p&gt;


</comment>
                            <comment id="13438017" author="sameerv" created="Mon, 20 Aug 2012 17:34:48 +0000"  >&lt;p&gt;Stack, reply to your questions:&lt;/p&gt;

&lt;p&gt;1. Its a map with key/val pair and thereby will always use STDOUT.&lt;br/&gt;
2. Yes and I will add comments.&lt;/p&gt;
</comment>
                            <comment id="13438025" author="sameerv" created="Mon, 20 Aug 2012 17:47:36 +0000"  >&lt;p&gt;Added comments to formatters. No code change from last patch uploaded.&lt;/p&gt;</comment>
                            <comment id="13438096" author="jesse_yates" created="Mon, 20 Aug 2012 19:01:35 +0000"  >&lt;p&gt;A couple of comments.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;+    #Formatter is now defined at command group level.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is extraneous - comments in the Shell.rb or HIRB should make this clear. Instead, this serves to just reference old code that is no longer present, making it more confusing than helpful. Something better would be a link to the method in Shell that takes a formmatter.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;AdminFormatter is used for all non row specific operations (command groups) such as version, status etc.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;What does it actually output for these operations? &lt;/p&gt;

&lt;p&gt;Otherwise, looks good Sameer.&lt;/p&gt;</comment>
                            <comment id="13460919" author="lhofhansl" created="Fri, 21 Sep 2012 23:06:32 +0000"  >&lt;p&gt;Looks good to me (with my limited ruby knowledge). Any objections to committing this?&lt;/p&gt;</comment>
                            <comment id="13465029" author="stack" created="Thu, 27 Sep 2012 20:07:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sameerv&quot; class=&quot;user-hover&quot; rel=&quot;sameerv&quot;&gt;Sameer Vaishampayan&lt;/a&gt; I took another look.  Does this patch not pervert the original intent of formatter?  Formatter was about how to format the results for a particular output whether console, html for a webpage, or in some distant future, some fancy gui.  This patch changes formatter to instead hold the outputting context: i.e. admin or row output.  Maybe thats fine since we&apos;re not exploiting the original intent.  But maybe rather than remove formatter, we should introduce introduce context beyond what we currently have &amp;#8211; footer, row, header &amp;#8211; to include whatever you need outputting count of rows.&lt;/p&gt;

&lt;p&gt;Otherwise, nice patch.&lt;/p&gt;</comment>
                            <comment id="13475904" author="sameerv" created="Sun, 14 Oct 2012 21:24:09 +0000"  >&lt;p&gt;That was the thinking around cleanup, that some of the code with different kinds of formatters were not even used. &lt;/p&gt;</comment>
                            <comment id="14086684" author="hadoopqa" created="Tue, 5 Aug 2014 20:13:24 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12541615/patch9.diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12541615/patch9.diff&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12541615&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 16 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10301//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10301//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14095517" author="busbey" created="Wed, 13 Aug 2014 14:16:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sameerv&quot; class=&quot;user-hover&quot; rel=&quot;sameerv&quot;&gt;Sameer Vaishampayan&lt;/a&gt; are you still interested in working on this issue? Could you update the patch to work with current master and refactor things to not repurpose formatter?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12540925" name="patch7.diff" size="7945" author="sameerv" created="Tue, 14 Aug 2012 19:10:39 +0000"/>
                            <attachment id="12541509" name="patch8.diff" size="12383" author="sameerv" created="Sat, 18 Aug 2012 22:35:36 +0000"/>
                            <attachment id="12541615" name="patch9.diff" size="12791" author="sameerv" created="Mon, 20 Aug 2012 17:47:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 1 Jun 2012 20:01:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>224866</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 18 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i00rjj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2394</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Adding specific formatters for shell operations that return either (1) row counts - e.g. put, delete, count, etc. - and (2) admin functionality - e.g. create - to ensure we get correct return values in the shell.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>