<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:07:47 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-9812/HBASE-9812.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-9812] Intermittent TestSplitLogManager#testMultipleResubmits failure</title>
                <link>https://issues.apache.org/jira/browse/HBASE-9812</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;From &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/801/testReport/org.apache.hadoop.hbase.master/TestSplitLogManager/testMultipleResubmits/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/801/testReport/org.apache.hadoop.hbase.master/TestSplitLogManager/testMultipleResubmits/&lt;/a&gt; :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
junit.framework.AssertionFailedError: Waiting timed out after [9,600] msec
	at junit.framework.Assert.fail(Assert.java:57)
	at org.apache.hadoop.hbase.Waiter.waitFor(Waiter.java:193)
	at org.apache.hadoop.hbase.Waiter.waitFor(Waiter.java:146)
	at org.apache.hadoop.hbase.HBaseTestingUtility.waitFor(HBaseTestingUtility.java:3220)
	at org.apache.hadoop.hbase.master.TestSplitLogManager.waitForCounter(TestSplitLogManager.java:164)
	at org.apache.hadoop.hbase.master.TestSplitLogManager.waitForCounter(TestSplitLogManager.java:157)
	at org.apache.hadoop.hbase.master.TestSplitLogManager.testMultipleResubmits(TestSplitLogManager.java:280)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
...
2013-10-21 11:52:15,148 DEBUG [pool-1-thread-1] zookeeper.ZKUtil(430): split-log-manager-tests145fa180-5cc5-4165-9d67-4073ab3f921b-0x141dadbb9320000 Set watcher on znode that does not yet exist, /hbase/splitWAL/foo%2F1
2013-10-21 11:52:15,148 DEBUG [pool-1-thread-1] master.TestSplitLogManager(186): waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; task node creation
2013-10-21 11:52:15,164 DEBUG [pool-1-thread-1-EventThread] zookeeper.ZooKeeperWatcher(310): split-log-manager-tests145fa180-5cc5-4165-9d67-4073ab3f921b-0x141dadbb9320000 Received ZooKeeper Event, type=NodeCreated, state=SyncConnected, path=/hbase/splitWAL/foo%2F1
2013-10-21 11:52:15,164 DEBUG [pool-1-thread-1-EventThread] regionserver.TestMasterAddressManager$NodeCreationListener(107): nodeCreated(/hbase/splitWAL/foo%2F1)
2013-10-21 11:52:15,164 DEBUG [pool-1-thread-1] master.TestSplitLogManager(188): task created
2013-10-21 11:52:15,164 DEBUG [pool-1-thread-1-EventThread] master.SplitLogManager(711): put up splitlog task at znode /hbase/splitWAL/foo%2F1
2013-10-21 11:52:15,166 DEBUG [pool-1-thread-1-EventThread] master.SplitLogManager(753): task not yet acquired /hbase/splitWAL/foo%2F1 ver = 0
2013-10-21 11:52:15,193 DEBUG [pool-1-thread-1-EventThread] zookeeper.ZooKeeperWatcher(310): split-log-manager-tests145fa180-5cc5-4165-9d67-4073ab3f921b-0x141dadbb9320000 Received ZooKeeper Event, type=NodeDataChanged, state=SyncConnected, path=/hbase/splitWAL/foo%2F1
2013-10-21 11:52:15,194 INFO  [pool-1-thread-1] hbase.Waiter(174): Waiting up to [3,200] milli-secs(wait.&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;.ratio=[1])
2013-10-21 11:52:15,194 INFO  [pool-1-thread-1-EventThread] master.SplitLogManager(826): task /hbase/splitWAL/foo%2F1 acquired by worker1,1,1
2013-10-21 11:52:15,204 INFO  [pool-1-thread-1] hbase.Waiter(174): Waiting up to [9,600] milli-secs(wait.&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;.ratio=[1])
2013-10-21 11:52:15,247 INFO  [dummy-master,1,1.splitLogManagerTimeoutMonitor] master.SplitLogManager$TimeoutMonitor(1408): total tasks = 1 unassigned = 0 tasks={/hbase/splitWAL/foo%2F1=last_update = 1382356335195 last_version = 1 cur_worker_name = worker1,1,1 status = in_progress incarnation = 0 resubmits = 0 batch = installed = 1 done = 0 error = 0}
2013-10-21 11:52:20,250 INFO  [dummy-master,1,1.splitLogManagerTimeoutMonitor] master.SplitLogManager$TimeoutMonitor(1408): total tasks = 1 unassigned = 0 tasks={/hbase/splitWAL/foo%2F1=last_update = 1382356335195 last_version = 1 cur_worker_name = worker1,1,1 status = in_progress incarnation = 0 resubmits = 0 batch = installed = 1 done = 0 error = 0}
2013-10-21 11:52:21,251 INFO  [dummy-master,1,1.splitLogManagerTimeoutMonitor] master.SplitLogManager(875): resubmitting task /hbase/splitWAL/foo%2F1
2013-10-21 11:52:24,808 DEBUG [dummy-master,1,1.splitLogManagerTimeoutMonitor] zookeeper.ZooKeeperWatcher(458): split-log-manager-tests145fa180-5cc5-4165-9d67-4073ab3f921b-0x141dadbb9320000 Received InterruptedException, doing nothing here
java.lang.InterruptedException
  at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(Native Method)
  at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.java:485)
  at org.apache.zookeeper.ClientCnxn.submitRequest(ClientCnxn.java:1309)
  at org.apache.zookeeper.ZooKeeper.setData(ZooKeeper.java:1264)
  at org.apache.hadoop.hbase.zookeeper.RecoverableZooKeeper.setData(RecoverableZooKeeper.java:414)
  at org.apache.hadoop.hbase.zookeeper.ZKUtil.setData(ZKUtil.java:881)
  at org.apache.hadoop.hbase.master.SplitLogManager.resubmit(SplitLogManager.java:880)
  at org.apache.hadoop.hbase.master.SplitLogManager.access$400(SplitLogManager.java:107)
  at org.apache.hadoop.hbase.master.SplitLogManager$TimeoutMonitor.chore(SplitLogManager.java:1400)
  at org.apache.hadoop.hbase.Chore.run(Chore.java:80)
  at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:662)
2013-10-21 11:52:24,809 DEBUG [dummy-master,1,1.splitLogManagerTimeoutMonitor] master.SplitLogManager(881): failed to resubmit task /hbase/splitWAL/foo%2F1 version changed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Looks like the version change caused some resubmission to fail.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12674858">HBASE-9812</key>
            <summary>Intermittent TestSplitLogManager#testMultipleResubmits failure</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="yuzhihong@gmail.com">Ted Yu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 21 Oct 2013 18:17:01 +0000</created>
                <updated>Mon, 18 Nov 2013 22:39:36 +0000</updated>
                            <resolved>Mon, 18 Nov 2013 22:39:35 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13803097" author="stack" created="Wed, 23 Oct 2013 18:18:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ted_yu&quot; class=&quot;user-hover&quot; rel=&quot;ted_yu&quot;&gt;Ted Yu&lt;/a&gt; You just filing these or you going to add a fix?&lt;/p&gt;</comment>
                            <comment id="13803120" author="yuzhihong@gmail.com" created="Wed, 23 Oct 2013 18:37:35 +0000"  >&lt;p&gt;Working on a patch now.&lt;/p&gt;</comment>
                            <comment id="13803498" author="yuzhihong@gmail.com" created="Wed, 23 Oct 2013 22:52:23 +0000"  >&lt;p&gt;Looks like there was some issue with zookeeper. Following the above log I saw:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2013-10-21 11:52:24,809 INFO  [dummy-master,1,1.splitLogManagerTimeoutMonitor] hbase.Chore(93): dummy-master,1,1.splitLogManagerTimeoutMonitor exiting
2013-10-21 11:52:24,908 DEBUG [pool-1-thread-1-EventThread] zookeeper.ZooKeeperWatcher(310): split-log-manager-tests145fa180-5cc5-4165-9d67-4073ab3f921b-0x141dadbb9320000 Received ZooKeeper Event, type=None, state=Disconnected, path=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
2013-10-21 11:52:24,908 DEBUG [pool-1-thread-1-EventThread] zookeeper.ZooKeeperWatcher(392): split-log-manager-tests145fa180-5cc5-4165-9d67-4073ab3f921b-0x141dadbb9320000 Received Disconnected from ZooKeeper, ignoring
2013-10-21 11:52:33,628 ERROR [SyncThread:0] server.NIOServerCnxn(180): Unexpected Exception: 
java.nio.channels.CancelledKeyException
	at sun.nio.ch.SelectionKeyImpl.ensureValid(SelectionKeyImpl.java:55)
	at sun.nio.ch.SelectionKeyImpl.interestOps(SelectionKeyImpl.java:59)
	at org.apache.zookeeper.server.NIOServerCnxn.sendBuffer(NIOServerCnxn.java:153)
	at org.apache.zookeeper.server.NIOServerCnxn.sendResponse(NIOServerCnxn.java:1076)
	at org.apache.zookeeper.server.FinalRequestProcessor.processRequest(FinalRequestProcessor.java:404)
	at org.apache.zookeeper.server.SyncRequestProcessor.flush(SyncRequestProcessor.java:167)
	at org.apache.zookeeper.server.SyncRequestProcessor.run(SyncRequestProcessor.java:101)
2013-10-21 11:52:33,629 INFO  [pool-1-thread-1] zookeeper.MiniZooKeeperCluster(249): Shutdown MiniZK cluster with all ZK servers
2013-10-21 11:52:33,641 INFO  [pool-1-thread-1] hbase.ResourceChecker(171): after: master.TestSplitLogManager#testMultipleResubmits &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;=9 (was 8)
Potentially hanging thread: pool-1-thread-1-SendThread(localhost:64465)
	java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(Native Method)
	org.apache.zookeeper.client.StaticHostProvider.next(StaticHostProvider.java:86)
	org.apache.zookeeper.ClientCnxn$SendThread.startConnect(ClientCnxn.java:937)
	org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:993)
 - &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; LEAK? -, OpenFileDescriptor=143 (was 137) - OpenFileDescriptor LEAK? -, MaxFileDescriptor=4096 (was 4096), SystemLoadAverage=595 (was 572) - SystemLoadAverage LEAK? -, ProcessCount=124 (was 124), AvailableMemoryMB=641 (was 751), ConnectionCount=0 (was 0)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I wonder if SplitLogManager should utilize RecoverableZooKeeper#setData():&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Stat setData(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; path, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] data, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; version)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 23 Oct 2013 18:18:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>354480</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 8 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1p42f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>354770</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>