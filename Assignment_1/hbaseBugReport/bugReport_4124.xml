<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:16:07 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4124/HBASE-4124.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4124] ZK restarted while a region is being assigned, new active HM re-assigns it but the RS warns &apos;already online on this server&apos;.</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4124</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;ZK restarted while assigning a region, new active HM re-assign it but the RS warned &apos;already online on this server&apos;.&lt;/p&gt;

&lt;p&gt;Issue:&lt;br/&gt;
The RS failed besause of &apos;already online on this server&apos; and return; The HM can not receive the message and report &apos;Regions in transition timed out&apos;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12515012">HBASE-4124</key>
            <summary>ZK restarted while a region is being assigned, new active HM re-assigns it but the RS warns &apos;already online on this server&apos;.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sunnygao">gaojinchao</assignee>
                                    <reporter username="fulin">fulin wang</reporter>
                        <labels>
                    </labels>
                <created>Fri, 22 Jul 2011 10:07:57 +0000</created>
                <updated>Fri, 20 Nov 2015 11:52:10 +0000</updated>
                            <resolved>Mon, 29 Aug 2011 17:52:07 +0000</resolved>
                                                    <fixVersion>0.90.5</fixVersion>
                                    <component>master</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                    <timeoriginalestimate seconds="1440">0.4h</timeoriginalestimate>
                            <timeestimate seconds="1440">0.4h</timeestimate>
                                        <comments>
                            <comment id="13069485" author="fulin" created="Fri, 22 Jul 2011 10:09:31 +0000"  >&lt;p&gt;The error log.&lt;/p&gt;</comment>
                            <comment id="13070103" author="stack" created="Sun, 24 Jul 2011 04:53:40 +0000"  >&lt;p&gt;hbase-3741 changes the behavior here in that now we notice if we are asked to open a region that is already open and we&apos;ll throw an exception back to the master.  I think the master will now reassign it elsewhere which is not what we want if its a RegionAlreadyInTransitionException.  This will make it so we&apos;ll not keep retrying but I think there is more to do.&lt;/p&gt;</comment>
                            <comment id="13070342" author="fulin" created="Mon, 25 Jul 2011 07:08:10 +0000"  >&lt;p&gt;I can&apos;t find where does it call getRegionsInTransitionInRS().add()? So I do not understand why add this function.&lt;br/&gt;
About &apos;already online on this server&apos; of error, I want that the region should be closed or reassinged. I am trying to make a patch.&lt;/p&gt;</comment>
                            <comment id="13084780" author="fulin" created="Sun, 14 Aug 2011 03:28:14 +0000"  >&lt;p&gt;Please gaojinchao fix the issues, Thanks.&lt;/p&gt;</comment>
                            <comment id="13086243" author="sunnygao" created="Wed, 17 Aug 2011 11:11:08 +0000"  >&lt;p&gt;I try to make a patch and fix this issue.&lt;br/&gt;
But I only run the UT test. Please review it firstly and give me some suggestion. I will test it tomorrow. Thanks.&lt;/p&gt;</comment>
                            <comment id="13088146" author="sunnygao" created="Sat, 20 Aug 2011 06:33:10 +0000"  >&lt;p&gt;I have finished the test. I discribe the scene:&lt;br/&gt;
step 1: startup cluster &lt;br/&gt;
step 2: abort the master when finish call &quot;sendRegionOpen(destination, regions)&quot;&lt;br/&gt;
step 3: startup cluster again.&lt;/p&gt;

&lt;p&gt;above steps will reproduce the issue. &lt;br/&gt;
when master is failover. the meta records the dead server,but the region is processing for a living region server.&lt;/p&gt;</comment>
                            <comment id="13088147" author="sunnygao" created="Sat, 20 Aug 2011 06:39:47 +0000"  >&lt;p&gt;sorry.step 3: startup master again .&lt;/p&gt;</comment>
                            <comment id="13088173" author="sunnygao" created="Sat, 20 Aug 2011 09:33:07 +0000"  >&lt;p&gt;I have added a test case for opening a region.&lt;/p&gt;</comment>
                            <comment id="13089261" author="ram_krish" created="Tue, 23 Aug 2011 04:42:47 +0000"  >&lt;p&gt;@Gao&lt;/p&gt;
{bq}
&lt;p&gt;step 3: startup master again .&lt;/p&gt;

&lt;p&gt;As per the scenario you have described when the master restarted the RS has it opened the region? I think the scenario here is RS is also dead.&lt;br/&gt;
If so the assignment manager will try assigning it to a new RS.  Do you think any problem here? &lt;br/&gt;
If the RS is alive then the znode status will be OPENED state and the processRIT will take care of clearing the node as it is already opened.  Could be be more clear on the state of RS after you killed the master and also on the state of znode in zookeeper for that region.&lt;/p&gt;</comment>
                            <comment id="13089890" author="sunnygao" created="Wed, 24 Aug 2011 00:18:52 +0000"  >&lt;p&gt;RS isn&apos;t dead. I can reproduce and verify it.&lt;/p&gt;

&lt;p&gt;ZK status has changed before adding to RIT set. You can look the function processDeadServers.&lt;br/&gt;
That is the reason why a region is assigned twice. &lt;/p&gt;

&lt;p&gt;        // If region was in transition (was in zk) force it offline for reassign&lt;br/&gt;
        try {&lt;br/&gt;
          //Process with existing RS shutdown code  &lt;br/&gt;
          boolean assign =&lt;br/&gt;
            ServerShutdownHandler.processDeadRegion(regionInfo, result, this,&lt;br/&gt;
              this.catalogTracker);&lt;br/&gt;
          if (assign) &lt;/p&gt;
{
            ZKAssign.createOrForceNodeOffline(watcher, regionInfo,
              master.getServerName()); 
          }
</comment>
                            <comment id="13089987" author="yuzhihong@gmail.com" created="Wed, 24 Aug 2011 03:55:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4124&quot; title=&quot;ZK restarted while a region is being assigned, new active HM re-assigns it but the RS warns &amp;#39;already online on this server&amp;#39;.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4124&quot;&gt;&lt;del&gt;HBASE-4124&lt;/del&gt;&lt;/a&gt;_Branch90V2.patch makes sense.&lt;br/&gt;
Please correct grammar in javadocs.&lt;/p&gt;</comment>
                            <comment id="13090141" author="sunnygao" created="Wed, 24 Aug 2011 11:20:47 +0000"  >&lt;p&gt;@Ted&lt;br/&gt;
Does it need a patch for Trunk? &lt;br/&gt;
There is a big change, I need some time to study it.&lt;/p&gt;</comment>
                            <comment id="13090250" author="yuzhihong@gmail.com" created="Wed, 24 Aug 2011 14:25:11 +0000"  >&lt;p&gt;Once patch v3 receives +1 vote, a patch for TRUNK should be made.&lt;br/&gt;
Thanks for the effort.&lt;/p&gt;</comment>
                            <comment id="13090298" author="ram_krish" created="Wed, 24 Aug 2011 15:40:37 +0000"  >&lt;p&gt;@Gao&lt;br/&gt;
Correct me if am wrong.  I can understand the intention behind the logic. &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+          RegionTransitionData data = ZKAssign.getData(watcher, regionInfo.getEncodedName()); 
+          
+          &lt;span class=&quot;code-comment&quot;&gt;//When zk node has been updated by a living server, we consider that &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; region server is handling it. 
&lt;/span&gt;+          &lt;span class=&quot;code-comment&quot;&gt;//So we should skip it and process it in processRegionsInTransition.
&lt;/span&gt;+          &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (data != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; data.getServerName() != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp;
+            serverManager.isServerOnline(data.getServerName())){
+              LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;The region &quot;&lt;/span&gt; + regionInfo.getEncodedName() +
+                &lt;span class=&quot;code-quote&quot;&gt;&quot;is processing by &quot;&lt;/span&gt; + data.getServerName());
+            &lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;;
+          }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;But if as part of rebuildUserRegions() the master finds a server to be dead and adds those RS to dead servers and also u said the master was killed.&lt;br/&gt;
How come we have a dead RS if we dont kill the RS and if the master is also killed how can the regions be assigned to some other RS (how can the state change in ZK for that region node).&lt;br/&gt;
May be am not understanding something.  If you can explain this it will help me in Timeoutmonitor. &lt;br/&gt;
Rest looks fine.  &lt;/p&gt;</comment>
                            <comment id="13090330" author="yuzhihong@gmail.com" created="Wed, 24 Aug 2011 16:21:54 +0000"  >&lt;p&gt;All tests passed with patch v3 for 0.90 branch.&lt;/p&gt;</comment>
                            <comment id="13090677" author="sunnygao" created="Thu, 25 Aug 2011 01:39:06 +0000"  >&lt;p&gt;@Ted &lt;br/&gt;
I have run all the tests. Thanks for your work.&lt;/p&gt;</comment>
                            <comment id="13090698" author="sunnygao" created="Thu, 25 Aug 2011 02:06:07 +0000"  >&lt;p&gt;@ram&lt;br/&gt;
How come we have a dead RS if we dont kill the RS&lt;/p&gt;

&lt;p&gt;gao: If you stop the cluster, The meta will handle the server information.&lt;/p&gt;

&lt;p&gt;if the master is also killed how can the regions be assigned to some other RS &lt;/p&gt;

&lt;p&gt;gao: When master startup, it collects the regions on a same region server and &lt;br/&gt;
     call sendRegionOpen(destination, regions).&lt;br/&gt;
     If the region is relatively large number, when region server opens the reigons needs a long time.&lt;br/&gt;
     when master crash, the new master may reopen the regions on another region server.&lt;/p&gt;
</comment>
                            <comment id="13090752" author="yuzhihong@gmail.com" created="Thu, 25 Aug 2011 03:59:37 +0000"  >&lt;p&gt;+1 on patch version 3.&lt;/p&gt;</comment>
                            <comment id="13090759" author="ram_krish" created="Thu, 25 Aug 2011 04:26:27 +0000"  >{bq}
&lt;p&gt;.sorry.step 3: startup master again .&lt;br/&gt;
This statement confused me a bit.&lt;br/&gt;
Thanks for your explanation. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13090797" author="sunnygao" created="Thu, 25 Aug 2011 06:09:39 +0000"  >&lt;p&gt;According to review, modified the comments.&lt;br/&gt;
Thanks for Ted&apos;s careful review.&lt;/p&gt;</comment>
                            <comment id="13090931" author="yuzhihong@gmail.com" created="Thu, 25 Aug 2011 11:01:24 +0000"  >&lt;p&gt;+1 on patch v4.&lt;br/&gt;
Minor comment:&lt;br/&gt;
A few lines such as the following are longer than 80 characters:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+            (&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; == data.getServerName() || !serverManager.isServerOnline(data.getServerName()))) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13091329" author="yuzhihong@gmail.com" created="Thu, 25 Aug 2011 21:13:44 +0000"  >&lt;p&gt;@Jinchao:&lt;br/&gt;
Can you prepare patch for TRUNK as well ?&lt;/p&gt;</comment>
                            <comment id="13091387" author="yuzhihong@gmail.com" created="Thu, 25 Aug 2011 22:38:49 +0000"  >&lt;p&gt;Patch integrated to 0.90 branch after wrapping long lines.&lt;/p&gt;

&lt;p&gt;Thanks for the patch Jinchao.&lt;/p&gt;</comment>
                            <comment id="13091474" author="sunnygao" created="Fri, 26 Aug 2011 00:54:26 +0000"  >&lt;p&gt;@ Ted&lt;br/&gt;
I am making a patch for TRUNK. But I have some questions about TRUNK.&lt;br/&gt;
It seems a bug.&lt;br/&gt;
In function assign, when we get the return value &quot;ALREADY_OPENED&quot; .&lt;br/&gt;
should we update the meta table ?  or we do this on region server.&lt;/p&gt;

&lt;p&gt;hmaster code:&lt;br/&gt;
  RegionOpeningState regionOpenState = serverManager.sendRegionOpen(plan&lt;br/&gt;
            .getDestination(), state.getRegion());&lt;br/&gt;
        if (regionOpenState == RegionOpeningState.ALREADY_OPENED) {&lt;/p&gt;

&lt;p&gt;region server code: if we don&apos;t update the meta ,the client may access to the old server.&lt;/p&gt;

&lt;p&gt; HRegion onlineRegion = this.getFromOnlineRegions(region.getEncodedName());&lt;br/&gt;
    if (null != onlineRegion) &lt;/p&gt;
{
      LOG.warn(&quot;Attempted open of &quot; + region.getEncodedName()
          + &quot; but already online on this server&quot;);
      return RegionOpeningState.ALREADY_OPENED;
    }</comment>
                            <comment id="13091499" author="yuzhihong@gmail.com" created="Fri, 26 Aug 2011 01:25:49 +0000"  >&lt;p&gt;The code you looked at came from &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4083&quot; title=&quot;If Enable table is not completed and is partial, then scanning of the table is not working &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4083&quot;&gt;&lt;del&gt;HBASE-4083&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
I don&apos;t think it is a bug.&lt;/p&gt;

&lt;p&gt;Please provide the patch for TRUNK.&lt;/p&gt;</comment>
                            <comment id="13092144" author="sunnygao" created="Sat, 27 Aug 2011 00:16:11 +0000"  >&lt;p&gt;I have made a patch. I found two test case(TestAdmin and RollLoging) can&apos;t pass. I use the raw trunk as well&lt;/p&gt;</comment>
                            <comment id="13092183" author="sunnygao" created="Sat, 27 Aug 2011 03:44:49 +0000"  >&lt;p&gt;Thanks for Ted. &lt;br/&gt;
Test case has passed.&lt;/p&gt;

&lt;p&gt;-------------------------------------------------------&lt;br/&gt;
 T E S T S&lt;br/&gt;
-------------------------------------------------------&lt;/p&gt;

&lt;p&gt;-------------------------------------------------------&lt;br/&gt;
 T E S T S&lt;br/&gt;
-------------------------------------------------------&lt;br/&gt;
Running org.apache.hadoop.hbase.client.TestAdmin&lt;/p&gt;


&lt;p&gt;Tests run: 28, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 358.001 sec&lt;/p&gt;

&lt;p&gt;Results :&lt;/p&gt;

&lt;p&gt;Tests run: 28, Failures: 0, Errors: 0, Skipped: 0&lt;/p&gt;</comment>
                            <comment id="13092187" author="stack" created="Sat, 27 Aug 2011 04:00:44 +0000"  >&lt;p&gt;Patch is basically good but a bunch of code is repeated.  Can we refactor the repeating code out to method and call that?&lt;/p&gt;

&lt;p&gt;For example:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (isOnDeadServer(regionInfo, deadServers)
+            &amp;amp;&amp;amp; (&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; == data.getOrigin() || !serverManager.isServerOnline(data
+                .getOrigin()))) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is repeated three times.  One of the repeats does not check for null and it seems like it should.&lt;/p&gt;

&lt;p&gt;Also, I&apos;d write the above as to make it more readable (just saying...)&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (isOnDeadServer(regionInfo, deadServers) &amp;amp;&amp;amp;
    (data.getOrigin() == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ||
      !serverManager.isServerOnline(data.getOrigin()))) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Otherwise patch makes sense.  Nice one Gao&lt;/p&gt;</comment>
                            <comment id="13092191" author="sunnygao" created="Sat, 27 Aug 2011 04:25:31 +0000"  >&lt;p&gt;@Stack. Thanks for your review.&lt;br/&gt;
I&apos;ll be ready to catch a plane, I will modify according to your opinion back to Shenzhen.&lt;/p&gt;</comment>
                            <comment id="13092489" author="yuzhihong@gmail.com" created="Sun, 28 Aug 2011 14:20:33 +0000"  >&lt;blockquote&gt;&lt;p&gt;Can we refactor the repeating code out to method and call that?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This would produce a difference between the 0.90 branch and TRUNK, right ?&lt;br/&gt;
Should we defer this refactoring to another JIRA ?&lt;/p&gt;

&lt;p&gt;I agree with the comment about null pointer check.&lt;/p&gt;</comment>
                            <comment id="13092491" author="yuzhihong@gmail.com" created="Sun, 28 Aug 2011 14:31:12 +0000"  >&lt;p&gt;This patch added null check for sn.&lt;/p&gt;

&lt;p&gt;According to &lt;a href=&quot;http://download.oracle.com/javase/1,5.0/docs/api/java/util/concurrent/ConcurrentHashMap.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://download.oracle.com/javase/1,5.0/docs/api/java/util/concurrent/ConcurrentHashMap.html&lt;/a&gt;, null cannot be used as key.&lt;/p&gt;</comment>
                            <comment id="13092508" author="yuzhihong@gmail.com" created="Sun, 28 Aug 2011 16:03:34 +0000"  >&lt;p&gt;Ran through all tests based on 4124-trunk.v2, there was only one test failure:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Failed tests:   testWritesWhileGetting(org.apache.hadoop.hbase.regionserver.TestHRegion): expected:&amp;lt;\x00\x00\x00\xE0&amp;gt; but was:&amp;lt;\x00\x00\x00\xDE&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I think the above should be due to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3855&quot; title=&quot;Performance degradation of memstore because reseek is linear&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3855&quot;&gt;&lt;del&gt;HBASE-3855&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13092583" author="sunnygao" created="Mon, 29 Aug 2011 00:37:23 +0000"  >&lt;p&gt;@Ted thanks for your work. &lt;br/&gt;
sn has checked about null above statement.&lt;/p&gt;

&lt;p&gt;        if (sn == null) &lt;/p&gt;
{
          LOG.warn(&quot;Region in transition &quot; + regionInfo.getEncodedName() +
            &quot; references a null server; letting RIT timeout so will be &quot; +
            &quot;assigned elsewhere&quot;);
          break;
        }</comment>
                            <comment id="13092586" author="yuzhihong@gmail.com" created="Mon, 29 Aug 2011 00:48:11 +0000"  >&lt;p&gt;That&apos;s right.&lt;br/&gt;
Waiting for decision on refactoring before committing.&lt;/p&gt;</comment>
                            <comment id="13092590" author="sunnygao" created="Mon, 29 Aug 2011 01:36:03 +0000"  >&lt;p&gt;I am runing all the test cases. My new modification is more clear. &lt;/p&gt;</comment>
                            <comment id="13092618" author="sunnygao" created="Mon, 29 Aug 2011 03:40:27 +0000"  >&lt;p&gt;All test cases passed. Thanks.&lt;/p&gt;</comment>
                            <comment id="13093011" author="stack" created="Mon, 29 Aug 2011 17:52:07 +0000"  >&lt;p&gt;Committed to TRUNK.  Thank you for the patch Gaojinchao.&lt;/p&gt;</comment>
                            <comment id="13093173" author="hudson" created="Mon, 29 Aug 2011 20:35:00 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2158 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2158/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2158/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4124&quot; title=&quot;ZK restarted while a region is being assigned, new active HM re-assigns it but the RS warns &amp;#39;already online on this server&amp;#39;.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4124&quot;&gt;&lt;del&gt;HBASE-4124&lt;/del&gt;&lt;/a&gt; ZK restarted while a region is being assigned, new active HM re-assigns it but the RS warns &apos;already online on this server&apos;&lt;/p&gt;

&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15015684" author="lars_francke" created="Fri, 20 Nov 2015 11:52:10 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12490635" name="HBASE-4124_Branch90V1_trial.patch" size="2762" author="sunnygao" created="Wed, 17 Aug 2011 11:11:08 +0000"/>
                            <attachment id="12491043" name="HBASE-4124_Branch90V2.patch" size="5845" author="sunnygao" created="Sat, 20 Aug 2011 09:30:23 +0000"/>
                            <attachment id="12491459" name="HBASE-4124_Branch90V3.patch" size="5842" author="sunnygao" created="Wed, 24 Aug 2011 10:25:40 +0000"/>
                            <attachment id="12491597" name="HBASE-4124_Branch90V4.patch" size="5905" author="sunnygao" created="Thu, 25 Aug 2011 06:09:39 +0000"/>
                            <attachment id="12491863" name="HBASE-4124_TrunkV1.patch" size="2599" author="sunnygao" created="Sat, 27 Aug 2011 00:16:11 +0000"/>
                            <attachment id="12492026" name="HBASE-4124_TrunkV2.patch" size="2757" author="sunnygao" created="Mon, 29 Aug 2011 01:36:03 +0000"/>
                            <attachment id="12487417" name="log.txt" size="16160" author="fulin" created="Fri, 22 Jul 2011 10:09:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 24 Jul 2011 04:53:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>27180</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hphj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>101391</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>