<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:46:40 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-696/HBASE-696.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-696] Make bloomfilter true/false and self-sizing</title>
                <link>https://issues.apache.org/jira/browse/HBASE-696</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Remove bloomfilter options.  Only one bloomfilter type makes sense in hbase context.  Also, make bloomfilter self-sizing; you know size when flushing.&lt;/p&gt;

&lt;p&gt;Putting in 0.2 for now because its API change (for the simpler).  We can punt later.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12398535">HBASE-696</key>
            <summary>Make bloomfilter true/false and self-sizing</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="irubin">Izaak Rubin</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Jun 2008 20:18:04 +0000</created>
                <updated>Fri, 22 Aug 2008 21:13:18 +0000</updated>
                            <resolved>Fri, 11 Jul 2008 23:07:57 +0000</resolved>
                                                    <fixVersion>0.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12609357" author="jimk" created="Mon, 30 Jun 2008 20:32:19 +0000"  >&lt;p&gt;stack wrote:&lt;br/&gt;
&amp;gt; Remove bloomfilter options. Only one bloomfilter type makes sense in hbase context.&lt;/p&gt;

&lt;p&gt;True.&lt;/p&gt;

&lt;p&gt;&amp;gt; Also, make bloomfilter self-sizing; you know size when flushing.&lt;/p&gt;

&lt;p&gt;However, you can&apos;t easily know the size when doing a compaction.&lt;/p&gt;

&lt;p&gt;Question: Is the bloomfilter based on the row key; row and column; row, column and timestamp; row and timestamp?&lt;/p&gt;

&lt;p&gt;It seems as if basing the bloomfilter solely on the row key would be the most useful. If you are doing a get or scan with LATEST_TIMESTAMP, that won&apos;t match anything in the bloomfilter if the timestamp is included. Similarly row/family:member doesn&apos;t make sense if you are fetching by column wildcard (family: ).&lt;/p&gt;

&lt;p&gt;Using row/family: might be another option.&lt;/p&gt;

&lt;p&gt;&amp;gt;Putting in 0.2 for now because its API change (for the simpler). We can punt later.&lt;/p&gt;

&lt;p&gt;With respect to the API change, would it be sufficient to change HColumnDescriptor so that bloomFilter is a boolean ? That would require a migration step. &lt;/p&gt;

&lt;p&gt;BloomFilterDescriptor could then be moved to org.apache.hadoop.hbase.regionserver and become package private.&lt;/p&gt;</comment>
                            <comment id="12609363" author="stack" created="Mon, 30 Jun 2008 20:48:21 +0000"  >&lt;p&gt;On size for compaction, we could add count of elements to the info file (or as first field to persisted filter)?&lt;/p&gt;

&lt;p&gt;(After chatting w/ Jim), current filters were for full key &amp;#8211; row/column/timestamp &amp;#8211; which as Jim points out, is pretty useless when most of the time we&apos;re trying to get the &apos;latest&apos;.  +1 on doing the row only for now.&lt;/p&gt;

&lt;p&gt;Yeah, would need to change HCD so filters were on or off.  No chance of self-migrating?&lt;/p&gt;
</comment>
                            <comment id="12609380" author="bryanduxbury" created="Mon, 30 Jun 2008 21:56:42 +0000"  >&lt;p&gt;I thought it might be useful to point out that the bloom filter wouldn&apos;t really be used for scanning, either, since you&apos;re already going to have locality proceeding through the file as you scan. There wouldn&apos;t be much point in checking if a storefile has the next row or not.&lt;/p&gt;</comment>
                            <comment id="12609421" author="jimk" created="Tue, 1 Jul 2008 01:40:36 +0000"  >&lt;p&gt;&amp;gt; Bryan Duxbury - 30/Jun/08 02:56 PM&lt;br/&gt;
&amp;gt; I thought it might be useful to point out that the bloom filter wouldn&apos;t really be used for&lt;br/&gt;
&amp;gt; scanning, either, since you&apos;re already going to have locality proceeding through the file&lt;br/&gt;
&amp;gt; as you scan. There wouldn&apos;t be much point in checking if a storefile has the next row or&lt;br/&gt;
&amp;gt; not. &lt;/p&gt;

&lt;p&gt;You are quite right. bloomfilters have little to do with scanners. Their primary use is for get&lt;/p&gt;</comment>
                            <comment id="12609432" author="stack" created="Tue, 1 Jul 2008 03:46:34 +0000"  >&lt;p&gt;Do you think we should let users choose whether they want bloom filters to be row or row+column or row+column+ts?  Its not hard to imagine access scenarios that would benefit from any of the former.&lt;/p&gt;

&lt;p&gt;But maybe this option can just be added later, post 0.2?&lt;/p&gt;</comment>
                            <comment id="12609613" author="bryanduxbury" created="Tue, 1 Jul 2008 14:56:23 +0000"  >&lt;p&gt;I&apos;m not sure that there would be much benefit to putting the timestamp in the filter. It&apos;d only be useful in the case where you&apos;re always looking for EXACT matches on row/col/ts, since you can&apos;t do any &quot;less-than&quot; behavior there. Likewise, I think the column is of dubious value. It&apos;s only really handy if you have a lot of columns and the one you are looking for is somewhere in the middle of the range, which would require a lot of seeking.&lt;/p&gt;

&lt;p&gt;I think that we should go with a fewer-options approach and just make the row-only bloom filter. If someone can make the case for more things going in the filter down the road, then we&apos;ll tackle it at that point.&lt;/p&gt;</comment>
                            <comment id="12611846" author="jimk" created="Tue, 8 Jul 2008 23:36:08 +0000"  >&lt;p&gt;&amp;gt; ----&lt;del&gt;Original Message&lt;/del&gt;----&lt;br/&gt;
&amp;gt; From: Jim Kellerman &lt;br/&gt;
&amp;gt; Sent: Tuesday, July 08, 2008 4:31 PM&lt;br/&gt;
&amp;gt; To: hbase-user&lt;br/&gt;
&amp;gt; Subject: RE: &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-696&quot; title=&quot;Make bloomfilter true/false and self-sizing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-696&quot;&gt;&lt;del&gt;HBASE-696&lt;/del&gt;&lt;/a&gt; Make bloomfilter true/false and self-sizing&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; Unless there is significant feedback to the contrary, making &lt;br/&gt;
&amp;gt; bloom filters true/false and self sizing will be an &lt;br/&gt;
&amp;gt; incompatible change.&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; During migration, columns which have bloom filters enabled &lt;br/&gt;
&amp;gt; currently will have the bloom filter erased and disabled.&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; Columns may bloom filters only if they are enabled when the &lt;br/&gt;
&amp;gt; column is created.&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; If a column is later modified to disable the bloom filter, it &lt;br/&gt;
&amp;gt; will be erased and cannot be re-enabled.&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; There is one short term (0.2.0) option for migration and &lt;br/&gt;
&amp;gt; enabling bloom filters which will be very expensive: reading &lt;br/&gt;
&amp;gt; the column twice, first to establish the number of entries &lt;br/&gt;
&amp;gt; that are needed and second, to create the bloom filter.&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; There is one long term option: convince Hadoop that MapFile &lt;br/&gt;
&amp;gt; should be subclassable which would entail changing private &lt;br/&gt;
&amp;gt; members to protected members, or to provide accessors to the &lt;br/&gt;
&amp;gt; private members in MapFile. Because hadoop-0.18.0 is in &lt;br/&gt;
&amp;gt; feature freeze, any change of this sort would have to wait &lt;br/&gt;
&amp;gt; for hadoop-0.19.0. hbase-0.3.0 will target hadoop-0.18.x, so &lt;br/&gt;
&amp;gt; this change would have to wait until hbase-0.4.0.&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; The question is how many people use bloom filters today? It &lt;br/&gt;
&amp;gt; is our belief that they are not particularly useful as &lt;br/&gt;
&amp;gt; implemented. If you do use bloom filters today, would you &lt;br/&gt;
&amp;gt; object to a process by which you would create a new bloom &lt;br/&gt;
&amp;gt; filter enabled column and copy your data to the new column?&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; &amp;#8212;&lt;br/&gt;
&amp;gt; Jim Kellerman, Senior Engineer; Powerset&lt;/p&gt;</comment>
                            <comment id="12612982" author="jimk" created="Fri, 11 Jul 2008 20:10:58 +0000"  >&lt;p&gt;Passes all regression tests, and PerformanceEvaluation&lt;/p&gt;

&lt;p&gt;Please review.&lt;/p&gt;</comment>
                            <comment id="12612997" author="stack" created="Fri, 11 Jul 2008 21:27:40 +0000"  >&lt;p&gt;+1.  Nice cleanup.&lt;/p&gt;

&lt;p&gt;Would suggest that after application, you give this issue to Izaak so he makes sure the shell aligns with this change.&lt;/p&gt;</comment>
                            <comment id="12613001" author="jimk" created="Fri, 11 Jul 2008 21:42:39 +0000"  >&lt;p&gt;Committed.&lt;/p&gt;</comment>
                            <comment id="12613003" author="jimk" created="Fri, 11 Jul 2008 21:44:17 +0000"  >&lt;p&gt;Izaak,&lt;/p&gt;

&lt;p&gt;Please ensure that the shell works with this change. It has been committed, so just SVN up and test out/fix the shell.&lt;/p&gt;</comment>
                            <comment id="12613014" author="irubin" created="Fri, 11 Jul 2008 22:53:05 +0000"  >&lt;p&gt;The patch I&apos;ve attached (hbase-696-shellfix.patch) fixes the one problem I could find in the shell resulting from the bloomfilter changes.  There was no DEFAULT_BLOOMFILTER constant in HColumnDescriptor, so I added one (set to false).&lt;/p&gt;</comment>
                            <comment id="12613015" author="stack" created="Fri, 11 Jul 2008 23:07:57 +0000"  >&lt;p&gt;Resolving issue.  Thanks for the patch Izaak.  Nice cleanup Jim.&lt;/p&gt;</comment>
                            <comment id="12613447" author="jimk" created="Mon, 14 Jul 2008 20:49:14 +0000"  >&lt;p&gt;As it turns out bloom filters were broken anyway (see &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-744&quot; title=&quot;BloomFilter serialization/deserialization broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-744&quot;&gt;&lt;del&gt;HBASE-744&lt;/del&gt;&lt;/a&gt;), so erasing them during migration might have fixed problems.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12385909" name="hbase-696-shellfix.patch" size="624" author="irubin" created="Fri, 11 Jul 2008 22:53:05 +0000"/>
                            <attachment id="12385898" name="patch.txt" size="56643" author="jimk" created="Fri, 11 Jul 2008 20:09:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 30 Jun 2008 20:32:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31818</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 23 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h8vz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98702</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>