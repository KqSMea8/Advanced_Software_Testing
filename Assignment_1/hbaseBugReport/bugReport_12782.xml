<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:36:24 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-12782/HBASE-12782.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-12782] ITBLL fails for me if generator does anything but 5M per maptask</title>
                <link>https://issues.apache.org/jira/browse/HBASE-12782</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Anyone else seeing this?  If I do an ITBLL with generator doing 5M rows per maptask, all is good &amp;#8211; verify passes. I&apos;ve been running 5 servers and had one splot per server.  So below works:&lt;/p&gt;


&lt;p&gt;HADOOP_CLASSPATH=&quot;/home/stack/conf_hbase:`/home/stack/hbase/bin/hbase classpath`&quot; ./hadoop/bin/hadoop --config ~/conf_hadoop org.apache.hadoop.hbase.test.IntegrationTestBigLinkedList --monkey serverKilling Generator 5 5000000 g1.tmp&lt;/p&gt;

&lt;p&gt;or if I double the map tasks, it works:&lt;/p&gt;

&lt;p&gt;HADOOP_CLASSPATH=&quot;/home/stack/conf_hbase:`/home/stack/hbase/bin/hbase classpath`&quot; ./hadoop/bin/hadoop --config ~/conf_hadoop org.apache.hadoop.hbase.test.IntegrationTestBigLinkedList --monkey serverKilling Generator 10 5000000 g2.tmp&lt;/p&gt;

&lt;p&gt;...but if I change the 5M to 50M or 25M, Verify fails.&lt;/p&gt;

&lt;p&gt;Looking into it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12764150">HBASE-12782</key>
            <summary>ITBLL fails for me if generator does anything but 5M per maptask</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Dec 2014 07:27:51 +0000</created>
                <updated>Sat, 31 Oct 2015 17:12:29 +0000</updated>
                            <resolved>Sat, 31 Jan 2015 03:39:30 +0000</resolved>
                                    <version>1.0.0</version>
                    <version>0.98.9</version>
                                    <fixVersion>1.0.0</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>0.98.10</fixVersion>
                    <fixVersion>1.1.0</fixVersion>
                                    <component>integration tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>14</watches>
                                                                <comments>
                            <comment id="14261989" author="stack" created="Wed, 31 Dec 2014 06:45:38 +0000"  >&lt;p&gt;Tried various combos (disabled speculative execution, confirmed that no monkey has us pass). Looks like data loss; unreferenced and undefined keys (oddly can&apos;t find the unref&apos;d in the table &amp;#8211; should be able to?). No obvious complaint processing servers. Current suspect is master joining running cluster post-kill. Let me try no-master-killing monkey. Need a clue.&lt;/p&gt;</comment>
                            <comment id="14262415" author="stack" created="Wed, 31 Dec 2014 20:31:48 +0000"  >&lt;p&gt;Turned off master killing and cleaned out all WALs so no chance we replay old stuff polluting our run but still fails (I noticed we are not killing the RS with meta).  Seems like basic dataloss when monkey&apos;s running.  Will keep digging.&lt;/p&gt;</comment>
                            <comment id="14268766" author="stack" created="Thu, 8 Jan 2015 03:06:53 +0000"  >&lt;p&gt;Sorry. This one is taking me a while. Nothing obviously wrong in the processing but definetly missing rows. Trying to figure if writing or WAL replay.&lt;/p&gt;</comment>
                            <comment id="14269730" author="stack" created="Thu, 8 Jan 2015 17:42:10 +0000"  >&lt;p&gt;Script running MR job. 25M per slot. 5 servers/slots. 125M per map task seems to bring on the failure pretty reliably.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;stack@c2020 ~&amp;#93;&lt;/span&gt;$ more bin/generator.sh&lt;br/&gt;
export HOME=/home/stack&lt;br/&gt;
export JAVA_HOME=$&lt;/p&gt;
{HOME}/bin/jdk1.7.0_67/&lt;br/&gt;
export HBASE_HOME=${HOME}
&lt;p&gt;/hbase&lt;br/&gt;
echo &apos;disable &quot;IntegrationTestBigLinkedList&quot;; drop &quot;IntegrationTestBigLinkedList&quot;&apos;| $&lt;/p&gt;
{HOME}/hbase/bin/hbase --config ${HOME}
&lt;p&gt;/conf_hbase shell&lt;br/&gt;
date=`date -u +&quot;%Y%m%dT%H%M%SZ&quot;`&lt;br/&gt;
export HADOOP_CLASSPATH=&quot;$&lt;/p&gt;
{HOME}/conf_hbase:`${HOME}
&lt;p&gt;/hbase/bin/hbase classpath`&quot;&lt;br/&gt;
$&lt;/p&gt;
{HOME}/hadoop/bin/hadoop --config ${HOME}
&lt;p&gt;/conf_hadoop org.apache.hadoop.hbase.test.IntegrationTestBigLinkedList --monkey serverKilling Generator 5 25000000 g.$date&lt;/p&gt;

&lt;p&gt;Here is how I run verify:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;stack@c2020 ~&amp;#93;&lt;/span&gt;$ more bin/verify.sh&lt;br/&gt;
export HOME=/home/stack&lt;br/&gt;
export JAVA_HOME=$&lt;/p&gt;
{HOME}/bin/jdk1.7.0_67/&lt;br/&gt;
export HBASE_HOME=${HOME}
&lt;p&gt;/hbase&lt;br/&gt;
date=`date -u +&quot;%Y%m%dT%H%M%SZ&quot;`&lt;br/&gt;
export HADOOP_CLASSPATH=&quot;$&lt;/p&gt;
{HOME}/conf_hbase:`${HOME}
&lt;p&gt;/hbase/bin/hbase classpath`&quot;&lt;br/&gt;
$&lt;/p&gt;
{HOME}/hadoop/bin/hadoop --config ${HOME}
&lt;p&gt;/conf_hadoop org.apache.hadoop.hbase.test.IntegrationTestBigLinkedList Verify v.$date 5&lt;/p&gt;

&lt;p&gt;Bits of shell I&apos;ve been using debugging:&lt;/p&gt;

&lt;p&gt;hbase(main):021:0&amp;gt; java.util.Date.new(1420593779581).toString()&lt;/p&gt;

&lt;p&gt;hbase(main):051:0&amp;gt; c = org.apache.hadoop.hbase.HBaseConfiguration.create&lt;br/&gt;
=&amp;gt; #&amp;lt;Java::OrgApacheHadoopConf::Configuration:0x3905ee13&amp;gt;&lt;/p&gt;

&lt;p&gt;hbase(main):054:0&amp;gt; t = org.apache.hadoop.hbase.client.HTable.new(c, &quot;IntegrationTestBigLinkedList&quot;)&lt;br/&gt;
=&amp;gt; #&amp;lt;Java::OrgApacheHadoopHbaseClient::HTable:0x787ce7d9&amp;gt;&lt;/p&gt;

&lt;p&gt;hbase(main):056:0&amp;gt; t.getRegionLocation(&quot;\xC0AqA\xEC\xF6\xFEd\xE6\xB3\xD6\xABs\xD9!w&quot;)&lt;br/&gt;
=&amp;gt; #&amp;lt;Java::OrgApacheHadoopHbase::HRegionLocation:0x5b12e5ff&amp;gt;&lt;/p&gt;

&lt;p&gt;hbase(main):057:0&amp;gt; rl = t.getRegionLocation(&quot;\xC0AqA\xEC\xF6\xFEd\xE6\xB3\xD6\xABs\xD9!w&quot;)&lt;br/&gt;
=&amp;gt; #&amp;lt;Java::OrgApacheHadoopHbase::HRegionLocation:0x5b12e5ff&amp;gt;&lt;br/&gt;
hbase(main):058:0&amp;gt; print rl&lt;br/&gt;
region=IntegrationTestBigLinkedList,\xE6ffffffX,1420593356701.20d5b9a6b5c4855ce61cb6db4f766767., hostname=c2025.halxg.cloudera.com,16020,1420590827340, seqNum=9928hbase(main):059:0&amp;gt;&lt;/p&gt;

&lt;p&gt;hbase(main):002:0* org.apache.hadoop.hbase.util.Bytes.toLong(&quot;\x00\x00\x00\x00\x00\xED\xAB\xE6&quot;.to_java_bytes)&lt;br/&gt;
=&amp;gt; 15576038&lt;/p&gt;
</comment>
                            <comment id="14269750" author="eclark" created="Thu, 8 Jan 2015 17:52:43 +0000"  >&lt;p&gt;Does this happen in 0.98 and before?&lt;br/&gt;
Do any of the map tasks of the ITBLL fail?&lt;br/&gt;
Does it reproduce with the no-kill monkey?&lt;/p&gt;</comment>
                            <comment id="14269781" author="stack" created="Thu, 8 Jan 2015 18:08:44 +0000"  >&lt;blockquote&gt;&lt;p&gt;Does this happen in 0.98 and before?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I have not tried. IT tests seem a bit broke until lately so assumed no one really running them and if they did, did it at small scale (25M or so) which seems to work.&lt;/p&gt;

&lt;p&gt;Let me try this since easy enough to bring on the breakage.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Do any of the map tasks of the ITBLL fail?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Does it reproduce with the no-kill monkey?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No. Can&apos;t repro w/o the killers. It is the monkey&apos;s fault.&lt;/p&gt;

&lt;p&gt;Thanks for keeping eye out &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eclark&quot; class=&quot;user-hover&quot; rel=&quot;eclark&quot;&gt;Elliott Clark&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14270139" author="stack" created="Thu, 8 Jan 2015 22:21:47 +0000"  >&lt;p&gt;Seems harder getting 0.98 to fail. Ran twice at 125M/5slots and it passed.  Upped to 250M and 40 missing references which is also less than I normally see on 1.0.  Trying some more.  Will go back to 1.0 since easier repro there and hopefully same issue.  Will be back to 0.98 after to make sure any fix covers it too.&lt;/p&gt;</comment>
                            <comment id="14270196" author="stack" created="Thu, 8 Jan 2015 23:16:44 +0000"  >&lt;p&gt;Fourth run failed at 125M on 0.98 so 50% failure rate.&lt;/p&gt;</comment>
                            <comment id="14272678" author="stack" created="Sat, 10 Jan 2015 20:20:35 +0000"  >&lt;p&gt;Focusing on write side first.&lt;/p&gt;

&lt;p&gt;Debugging, the emission on end of verify step is of no use. I find that I have to go into the reduce logging to find these log lines from ITBLL:&lt;/p&gt;

&lt;p&gt;          LOG.error(&quot;Linked List error: Key = &quot; + keyString + &quot; References = &quot; + refsSb.toString());&lt;/p&gt;

&lt;p&gt;I then take the &apos;References&apos; record, do a get on it.  It is the &apos;meta:previous&apos; that is &apos;missing&apos;.  This missing record will have been &apos;written&apos; as part of the previous 1M writes at &apos;count&apos; - 1M. The time on this record will be a timestamp that is &apos;1M&apos; ahead of when the &apos;missing&apos; record would have been written (usually about 15seconds per 1M but if server down, can be minutes writing the 1M).&lt;/p&gt;

&lt;p&gt;The ITBLL rows have too many unprintable characters &amp;#8211; quotes, single ticks, left braces, etc. &amp;#8211; to make for easy scripting.  Tried but its kinda tough bridging &apos;text&apos; output &amp;#8211; escaped bytes &amp;#8211; jruby and java.  Spent some time trying to write rows with printable records but seems to make for more failures; need to spend time on this... as is its hard to script ITBLL failures so can get a &apos;bigger picture&apos; on failure profile.  Another issue.&lt;/p&gt;

&lt;p&gt;I&apos;ve disabled killing master and splits to make things easier for myself. We still fail reliably.&lt;/p&gt;

&lt;p&gt;I can triangulate a little looking at a few failed records and have identified suspicious-looking write periods as asyncprocess tries to cross over a failed regionserver.  The attached test reproduces the same logging sequence in a unit test (was trying to narrow the moving parts around a failure) that I see up in cluster but it looks like the asyncprocess is not the issue; it&apos;s accounting doesn&apos;t seem to be hiccuping.&lt;/p&gt;

&lt;p&gt;Let me redo this test as an integrationtest to run against the cluster to be sure &amp;#8211; perhaps it a timing thing hard to repro in the one JVM &amp;#8211; but it doesn&apos;t look like write side is the issue.  Dang.&lt;/p&gt;</comment>
                            <comment id="14272786" author="stack" created="Sun, 11 Jan 2015 03:29:47 +0000"  >&lt;p&gt;Added IT version and ran it against the cluster.  Fails if numbers are large &amp;#8211; 100M.&lt;/p&gt;</comment>
                            <comment id="14272799" author="stack" created="Sun, 11 Jan 2015 03:57:03 +0000"  >&lt;p&gt;Let me write a WAL searching tool for the missing keys. If in WAL, server lost them (i&apos;ll have seqid from WAL which will help reason how server-side dropped the edits).  If not in WAL, it is back to asyncprocess.&lt;/p&gt;</comment>
                            <comment id="14274467" author="enis" created="Tue, 13 Jan 2015 00:19:08 +0000"  >&lt;p&gt;yeah, debugging ITBLL has proven to be very hard. What I had done previously was to keep all the files and WAL&apos;s and do custom search on top of that. &lt;/p&gt;</comment>
                            <comment id="14274693" author="stack" created="Tue, 13 Jan 2015 04:33:31 +0000"  >&lt;blockquote&gt;&lt;p&gt;yeah, debugging ITBLL has proven to be very hard. What I had done previously was to keep all the files and WAL&apos;s and do custom search on top of that.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Let me try and make some tools.  The failure only seems to come at scale which is pain debugging.&lt;/p&gt;

&lt;p&gt;On my weekend messings, I was hoping my pointed replication of the set of failures during a &apos;suspicious&apos; section of client retries would narrow the debug surface especially if I was able to do it in a unit test.  What I found was that a high fidelity reproduction of the exceptions thrown and with retries in extremis, in a unit test environment, it was still insufficient for dataloss. Taking my unit test and redoing as an IT test to get real cluster timings in the mix, again, no cigar, not unless the numbers large (100M+) &amp;#8211; but then I was back into the big original ITBLL space trying to trace the ghost of missing rows.&lt;/p&gt;

&lt;p&gt;Let me do the WAL search tool.&lt;/p&gt;</comment>
                            <comment id="14279304" author="apurtell" created="Thu, 15 Jan 2015 21:25:46 +0000"  >&lt;p&gt;Stack, Lars, and I discussed this for a bit today, some debugging suggestions:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Build the WAL search tool to determine if there&apos;s loss prior to WAL commit or after&lt;/li&gt;
	&lt;li&gt;Change the code so log replay will replay all WALs we have, will determine if there&apos;s a bug deciding what WALs can be skipped.&lt;/li&gt;
	&lt;li&gt;If it turns out there is missing data in the WAL, the client is suspect but possibly also the new WAL write threading model introduced in 0.98. Check if the problem is reproducible with the head of 0.96 branch.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14290252" author="stack" created="Sat, 24 Jan 2015 00:16:41 +0000"  >&lt;p&gt;I added this to the conf files to keep around old WALs:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
diff --git a/conf/hbase-site.xml b/conf/hbase-site.xml
index c516ac7..860324f 100644
--- a/conf/hbase-site.xml
+++ b/conf/hbase-site.xml
@@ -21,4 +21,16 @@
  */
 --&amp;gt;
 &amp;lt;configuration&amp;gt;
+&amp;lt;property&amp;gt;
+&amp;lt;name&amp;gt;hbase.master.logcleaner.ttl&amp;lt;/name&amp;gt;
+&amp;lt;value&amp;gt;600000000&amp;lt;/value&amp;gt;
+&amp;lt;description&amp;gt;Maximum time a WAL can stay in the .oldlogdir directory,
+after which it will be cleaned by a Master thread.&amp;lt;/description&amp;gt;
+&amp;lt;/property&amp;gt;
+&amp;lt;property&amp;gt;
+&amp;lt;name&amp;gt;hbase.master.logcleaner.ttl&amp;lt;/name&amp;gt;
+&amp;lt;value&amp;gt;600000000&amp;lt;/value&amp;gt;
+&amp;lt;description&amp;gt;Maximum time a WAL can stay in the .oldlogdir directory,
+after which it will be cleaned by a Master thread.&amp;lt;/description&amp;gt;
+&amp;lt;/property&amp;gt;
 &amp;lt;/configuration&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14290266" author="stack" created="Sat, 24 Jan 2015 00:29:43 +0000"  >&lt;p&gt;Here is my little search tool. It searches WALs first and then oldWALs so it is two jobs. You run it like you run generate or verify, as an option to ITBLL.  All it takes is an input that is the verify stage output dir (it reads the verify output to find the missing keys now saved into a sequencefile as by product of verify).&lt;/p&gt;

&lt;p&gt;I ran it after a verify said there were 252 UNREFERENCED rows after generate uploaded 125M with CM doing its best.&lt;/p&gt;

&lt;p&gt;The tool found the 252 rows in the WALs.&lt;/p&gt;

&lt;p&gt;Let me try and search the hfiles next.&lt;/p&gt;</comment>
                            <comment id="14290457" author="lhofhansl" created="Sat, 24 Jan 2015 06:02:55 +0000"  >&lt;p&gt;So looks like replay is at issue. So maybe switch off the logic to only replay the logs after a certain sequence number, and replay all logs, to see if that is at fault?&lt;/p&gt;</comment>
                            <comment id="14290491" author="stack" created="Sat, 24 Jan 2015 07:23:45 +0000"  >&lt;p&gt;All lost edits show in three WALs on three different machines and all come in during the same 40ms period. None of these three logs are replayed to recover edits for crashes on these machines. They are instead archived off. I think this means WAL replay is not the culprit.  Looking at where the missing edits lie in one of the WALs using WALPrettyPrinter, they are not clumped together but spread out over the log.&lt;/p&gt;</comment>
                            <comment id="14290492" author="stack" created="Sat, 24 Jan 2015 07:24:35 +0000"  >&lt;p&gt;I&apos;ll try your suggestion &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt; but going by above findings, it doesn&apos;t seem to be the issue. Will try .&lt;/p&gt;</comment>
                            <comment id="14291362" author="enis" created="Mon, 26 Jan 2015 01:42:56 +0000"  >&lt;p&gt;Moving to 1.0.1 for now. We can bring this back, if we can find the root cause. &lt;/p&gt;</comment>
                            <comment id="14295958" author="stack" created="Wed, 28 Jan 2015 22:18:31 +0000"  >&lt;p&gt;There was a bug in my little search tool such that I was finding &apos;references&apos; rather than the keys that were missing. It sent me on false trail.&lt;/p&gt;

&lt;p&gt;After fixing bug, the &apos;good&apos; news is that the &apos;lost&apos; keys can still be found in WALs.&lt;/p&gt;

&lt;p&gt;Following one trail, I can see &amp;#8211; using WALPrettyPrinter &amp;#8211; that a good clump of missing edits are contiguous in a particular WAL. I can also see that they are the bulk of a single WALEdit of 800+ cells.  All cells in this batch have the same sequenceid.  A portion of this WALEdit&apos;s edits made it in.&lt;/p&gt;

&lt;p&gt;The server that received the missing edits soon after crashed. The edits are in the WAL. The server had not had a chance to flush.&lt;/p&gt;

&lt;p&gt;On replay, I can see a recovered edits file that should have the edits that cover the missing block but while I can preserve hfiles and WALs with properties like those below, recovered.edits files are deleted when we are done.  Let me try and keep them around.&lt;/p&gt;

&lt;p&gt;&amp;lt;property&amp;gt;&lt;br/&gt;
&amp;lt;name&amp;gt;hbase.master.logcleaner.ttl&amp;lt;/name&amp;gt;&lt;br/&gt;
&amp;lt;value&amp;gt;600000000&amp;lt;/value&amp;gt;&lt;br/&gt;
&amp;lt;description&amp;gt;Maximum time a WAL can stay in the .oldlogdir directory,&lt;br/&gt;
after which it will be cleaned by a Master thread.&amp;lt;/description&amp;gt;&lt;br/&gt;
&amp;lt;/property&amp;gt;&lt;br/&gt;
&amp;lt;property&amp;gt;&lt;br/&gt;
&amp;lt;name&amp;gt;hbase.master.hfilecleaner.ttl&amp;lt;/name&amp;gt;&lt;br/&gt;
&amp;lt;value&amp;gt;600000000&amp;lt;/value&amp;gt;&lt;br/&gt;
&amp;lt;description&amp;gt;Maximum time a WAL can stay in the .oldlogdir directory,&lt;br/&gt;
after which it will be cleaned by a Master thread.&amp;lt;/description&amp;gt;&lt;br/&gt;
&amp;lt;/property&amp;gt;&lt;/p&gt;

&lt;p&gt;Other notes:&lt;br/&gt;
+ The next WAL entry in the WAL makes it in fine. Its like we dropped the bulk of a WAL entry in middle of the WAL.&lt;br/&gt;
+ 4 seconds to recover lease. We need to fix.&lt;br/&gt;
+ We report length on a log file before we recover lease. The length is &amp;lt; that final length. Might be worth trip to nn to find new length post lease recovery.&lt;/p&gt;


&lt;p&gt;Patch is my search tool and other cleanup of logs and fixup for WALPrettyPrinter.&lt;/p&gt;


</comment>
                            <comment id="14296024" author="enis" created="Wed, 28 Jan 2015 23:11:37 +0000"  >&lt;p&gt;This is great finding. &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;+ 4 seconds to recover lease. We need to fix.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Expected recover lease time is at least 1 or 2 secs, due to the DN heartbeat interval I think. I think we should add NN -&amp;gt; DN direct communication for improving on this which is a major change in hdfs. &lt;/p&gt;</comment>
                            <comment id="14296143" author="stack" created="Thu, 29 Jan 2015 00:29:46 +0000"  >&lt;blockquote&gt;&lt;p&gt;Expected recover lease time is at least 1 or 2 secs, due to the DN heartbeat interval I think. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yeah remember from old days. 4s is way too long.  I&apos;d forgotten about it and seeing it here again was shocked anew.&lt;/p&gt;</comment>
                            <comment id="14297348" author="stack" created="Thu, 29 Jan 2015 19:03:21 +0000"  >&lt;p&gt;Patch that adds means of archiving recovered.edits files rather than delete them (does it by faking out the archiving mechanism that &apos;recovered.edits&apos; is a column family name).&lt;/p&gt;

&lt;p&gt;Did a new run with the flag to keep recovered.edits in archive.  Looking at the first incidence of loss, the missing edits are present in the recovered.edits file.  We are dropping them on replay somehow.&lt;/p&gt;

&lt;p&gt;Will be back.&lt;/p&gt;</comment>
                            <comment id="14298268" author="stack" created="Fri, 30 Jan 2015 06:28:22 +0000"  >&lt;p&gt;This seems to be the fix:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
diff --git a/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java b/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java
index 87ebebb..bddb5f5 100644
--- a/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java
+++ b/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java
@@ -3793,9 +3796,7 @@ &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; class HRegion &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; HeapSize, PropagatingConfigurationObserver { &lt;span class=&quot;code-comment&quot;&gt;//
&lt;/span&gt;             &lt;span class=&quot;code-comment&quot;&gt;// Once we are over the limit, restoreEdit will keep returning &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; to
&lt;/span&gt;             &lt;span class=&quot;code-comment&quot;&gt;// flush -- but don&apos;t flush until we&apos;ve played all the kvs that make up
&lt;/span&gt;             &lt;span class=&quot;code-comment&quot;&gt;// the WALEdit.
&lt;/span&gt;-            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!flush) {
-              flush = restoreEdit(store, cell);
-            }
+            flush = restoreEdit(store, cell);

             editsCount++;
           }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Would match what I am seeing where the first few cells of a big edit make it in but the tail of the edit does not.  Whenever we came up to the flushing limit replaying recovered edits, we&apos;d start skipping the application of edits though comment says we&apos;re adding them.&lt;/p&gt;

&lt;p&gt;Let me get some runs in in the morning to try and get confirmation this is it.&lt;/p&gt;</comment>
                            <comment id="14298270" author="lhofhansl" created="Fri, 30 Jan 2015 06:33:47 +0000"  >&lt;p&gt;Wow!&lt;/p&gt;</comment>
                            <comment id="14298271" author="lhofhansl" created="Fri, 30 Jan 2015 06:35:34 +0000"  >&lt;p&gt;&lt;tt&gt;flush |= restoreEdit(store, cell);&lt;/tt&gt;?&lt;/p&gt;

&lt;p&gt;I guess once a memstore is over the size limit it won&apos;t be under the limit in subsequent calls, so it probably does not matter.&lt;/p&gt;</comment>
                            <comment id="14298273" author="enis" created="Fri, 30 Jan 2015 06:36:46 +0000"  >&lt;p&gt;How does this even worked ? &lt;br/&gt;
Even in 0.98, the code is similar. &lt;/p&gt;</comment>
                            <comment id="14298274" author="ram_krish" created="Fri, 30 Jan 2015 06:38:20 +0000"  >&lt;p&gt;Great !!!&lt;/p&gt;</comment>
                            <comment id="14298282" author="lhofhansl" created="Fri, 30 Jan 2015 06:46:16 +0000"  >&lt;p&gt;I guess it worked as long the replay does not fill a memstore past the flush size. When we reach it they are just ignored. Scary stuff!&lt;/p&gt;</comment>
                            <comment id="14299201" author="stack" created="Fri, 30 Jan 2015 20:44:35 +0000"  >&lt;p&gt;Looks like this fix helps alot. I ran my rig and it passed (9 times out of ten it does not).  I then doubled up the counts so we did 250M instead of 125M and again it passed.  Will run some bigger tests over w/e.&lt;/p&gt;

&lt;p&gt;Here is the patch I&apos;d like to apply. It has the fix, an obnoxious unit test to verify the fix, and then the tooling I used to find the issue.  That patch is fat because it includes a big data file of recovered.edits to replay in the unit test.&lt;/p&gt;

&lt;p&gt;Patch changes ITBLL to add better logging with more data around missing rows. It also amends the verify step in ITBLL to emit the binary missing along w/ the type of the missing data. This output is then useable by a new tool, a search, which takes the missing rows from verify and then goes off to search WALs and oldWALs. This latter tool was good for figuring where the edits had gone missing (ante- or post-WAL).&lt;/p&gt;

&lt;p&gt;The search tool emits each time it finds a key.  This was useful narrowing in on the WALs that had the rows that  were missing.&lt;/p&gt;

&lt;p&gt;I&apos;d then take the name of the WAL that had the edits and then go look at its provenance.  In this case, the WALs were opened just before a crash and no flush had happened.  The WALs would then be split to produce recovered.edits.&lt;/p&gt;

&lt;p&gt;The patch includes a means of having recovered.edits files moved to archive when done rather than delete (This is a change in HRegion).  This was useful for checking if the WAL split had actually moved the missing edits from WAL to recovered.edits. It had in this case, so then the replay of edits was suspect (of note, the recovered.edits files can be viewed with the WALPrettyPrinter &amp;#8211; which also has some improvements courtesy of this patch).&lt;/p&gt;

&lt;p&gt;WALPlayer is used by the search tool in ITBLL.  Added a filter method so I could use the WALPlayer near directly when searching.&lt;/p&gt;

&lt;p&gt;Made removing of files from archive or wherever DEBUG level rather than TRACE.&lt;/p&gt;

&lt;p&gt;Made a minor improvement to recovered edits replay checking at the WALEdit level if the edit is for THIS region rather than doing the check per Cell. It will help some with the likes of the recovered.edits files I was seeing in my cluster testing where a single WALEdit had hundreds of Cells in it.&lt;/p&gt;

&lt;p&gt;The actual fix in HRegion was a simple one-liner (see above).&lt;/p&gt;










</comment>
                            <comment id="14299219" author="stack" created="Fri, 30 Jan 2015 20:58:47 +0000"  >&lt;p&gt;Good news is that this change is recent.  It is not in 0.94.  It came in here:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  43 commit 1c856e0774afd8e09ef68436cf57fc0aa61e974e
  44 Author: Enis Soztutar &amp;lt;enis@apache.org&amp;gt;
  45 Date:   Tue Dec 2 20:16:45 2014 -0800
  46
  47     HBASE-11099 Two situations where we could open a region with smaller sequence number (Stephen Jiang)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and here&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
3b4688f HBASE-11099 Two situations where we could open a region with smaller sequence number (Stephen Jiang)
kalashnikov-20:hbase.git.commit stack$ git show 3b4688f
commit 3b4688f9ee0fca0f3a65e245f3caa7e47699cad1
Author: tedyu &amp;lt;yuzhihong@gmail.com&amp;gt;
Date:   Thu Nov 20 14:44:08 2014 -0800

    HBASE-11099 Two situations where we could open a region with smaller sequence number (Stephen Jiang)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I think it an innocent attempt at adding brackets around what was a one-liner only it changed the evaluation.&lt;/p&gt;

&lt;p&gt;It is in current 0.98 and in 1.0+&lt;/p&gt;</comment>
                            <comment id="14299256" author="lhofhansl" created="Fri, 30 Jan 2015 21:45:30 +0000"  >&lt;p&gt;Cool... Was just about to check 0.94.&lt;br/&gt;
Any value in doing the fix the tooling in separate patches?&lt;/p&gt;</comment>
                            <comment id="14299261" author="stack" created="Fri, 30 Jan 2015 21:50:15 +0000"  >&lt;blockquote&gt;&lt;p&gt;Any value in doing the fix the tooling in separate patches?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;ll make a fix-only patch for 0.98.&lt;/p&gt;</comment>
                            <comment id="14299262" author="stack" created="Fri, 30 Jan 2015 21:50:36 +0000"  >&lt;p&gt;0.98 fix-only patch.&lt;/p&gt;</comment>
                            <comment id="14299308" author="enis" created="Fri, 30 Jan 2015 22:40:36 +0000"  >&lt;p&gt;Should we do &lt;tt&gt;|=&lt;/tt&gt; as Lars says above. Once flush is set, we do not want to unset it.  &lt;/p&gt;</comment>
                            <comment id="14299310" author="enis" created="Fri, 30 Jan 2015 22:42:10 +0000"  >&lt;p&gt;I think that&apos;s what we wanted to do in the &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11099&quot; title=&quot;Two situations where we could open a region with smaller sequence number&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11099&quot;&gt;&lt;del&gt;HBASE-11099&lt;/del&gt;&lt;/a&gt; patch, but messed up. &lt;/p&gt;</comment>
                            <comment id="14299316" author="stack" created="Fri, 30 Jan 2015 22:48:20 +0000"  >&lt;p&gt;I missed that &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt; remark. Let me address.&lt;/p&gt;</comment>
                            <comment id="14299325" author="jeffreyz" created="Fri, 30 Jan 2015 22:54:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=saint.ack%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;saint.ack@gmail.com&quot;&gt;Stack&lt;/a&gt; Great findings! I previously reviewed the patch. The intention was good and should do &quot;flush |=  restoreEdit(store, cell);&quot; as &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt; mentioned above but it apparently that the fix did more than that. Thanks.&lt;/p&gt;</comment>
                            <comment id="14299335" author="stack" created="Fri, 30 Jan 2015 23:01:31 +0000"  >&lt;p&gt;Address &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt; suggestion.&lt;/p&gt;</comment>
                            <comment id="14299337" author="enis" created="Fri, 30 Jan 2015 23:02:59 +0000"  >&lt;p&gt;+1. Thanks Stack for taking on this. &lt;/p&gt;</comment>
                            <comment id="14299347" author="stack" created="Fri, 30 Jan 2015 23:06:30 +0000"  >&lt;p&gt;Let me try an hadoopqa run.  Thanks for +1 &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14299419" author="lhofhansl" created="Sat, 31 Jan 2015 00:11:46 +0000"  >&lt;p&gt;+1 (both the fix-only 0.98 and the full patch)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;, this might warrant to sink the RC. What do you think?&lt;/p&gt;</comment>
                            <comment id="14299489" author="hadoopqa" created="Sat, 31 Jan 2015 00:58:08 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12695639/12782v3.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12695639/12782v3.txt&lt;/a&gt;&lt;br/&gt;
  against master branch at commit b08802a3e8e522f84519415b83455870b49bf8da.&lt;br/&gt;
  ATTACHMENT ID: 12695639&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 13 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +      protected void setup(Reducer&amp;lt;BytesWritable, BytesWritable, BytesWritable, BytesWritable&amp;gt;.Context context)&lt;br/&gt;
+      protected void cleanup(Reducer&amp;lt;BytesWritable, BytesWritable, BytesWritable, BytesWritable&amp;gt;.Context context)&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.regionserver.TestRecoveredEdits&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestWALPlayer&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12652//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12652//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12652//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12652//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12652//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12652//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12652//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12652//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12652//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12652//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12652//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12652//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12652//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12652//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12652//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12652//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12652//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12652//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12652//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12652//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12652//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12652//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12652//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12652//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12652//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12652//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12652//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12652//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14299500" author="stack" created="Sat, 31 Jan 2015 01:06:49 +0000"  >&lt;p&gt;Had default filter return false in WALPlayer rather than true to include.&lt;/p&gt;</comment>
                            <comment id="14299507" author="stack" created="Sat, 31 Jan 2015 01:09:37 +0000"  >&lt;p&gt;Pushed the fix-only to 0.98 as 1bb55d8.&lt;/p&gt;</comment>
                            <comment id="14299512" author="stack" created="Sat, 31 Jan 2015 01:13:38 +0000"  >&lt;p&gt;TestRecoveredEdits failed because the data file is not in place. Might have to commit that separately.&lt;/p&gt;</comment>
                            <comment id="14299520" author="hudson" created="Sat, 31 Jan 2015 01:20:48 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98-on-Hadoop-1.1 #786 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/786/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/786/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12782&quot; title=&quot;ITBLL fails for me if generator does anything but 5M per maptask&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12782&quot;&gt;&lt;del&gt;HBASE-12782&lt;/del&gt;&lt;/a&gt; ITBLL fails for me if generator does anything but 5M per maptask (stack: rev 1bb55d86ecbb4523e5ac5f08dc7ad7b2fbec68ac)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14299532" author="hudson" created="Sat, 31 Jan 2015 01:30:16 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98 #827 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/827/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/827/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12782&quot; title=&quot;ITBLL fails for me if generator does anything but 5M per maptask&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12782&quot;&gt;&lt;del&gt;HBASE-12782&lt;/del&gt;&lt;/a&gt; ITBLL fails for me if generator does anything but 5M per maptask (stack: rev 1bb55d86ecbb4523e5ac5f08dc7ad7b2fbec68ac)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14299557" author="yuzhihong@gmail.com" created="Sat, 31 Jan 2015 01:51:54 +0000"  >&lt;p&gt;Addendum fixes 0.98 build&lt;/p&gt;

&lt;p&gt;Hopefully I get this right.&lt;/p&gt;</comment>
                            <comment id="14299565" author="hadoopqa" created="Sat, 31 Jan 2015 02:01:48 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12695713/12782-0.98-addendum.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12695713/12782-0.98-addendum.txt&lt;/a&gt;&lt;br/&gt;
  against 0.98 branch at commit b08802a3e8e522f84519415b83455870b49bf8da.&lt;br/&gt;
  ATTACHMENT ID: 12695713&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12657//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12657//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14299589" author="hudson" created="Sat, 31 Jan 2015 02:39:57 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98 #828 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/828/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/828/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12782&quot; title=&quot;ITBLL fails for me if generator does anything but 5M per maptask&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12782&quot;&gt;&lt;del&gt;HBASE-12782&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;0.98&amp;#93;&lt;/span&gt; Addendum fixes variable name (tedyu: rev fd498f18548b5dd37f45c2f3cdc46b11b11ecbd6)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14299607" author="hadoopqa" created="Sat, 31 Jan 2015 03:01:42 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12695694/12782v4.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12695694/12782v4.txt&lt;/a&gt;&lt;br/&gt;
  against master branch at commit b08802a3e8e522f84519415b83455870b49bf8da.&lt;br/&gt;
  ATTACHMENT ID: 12695694&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 13 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +      protected void setup(Reducer&amp;lt;BytesWritable, BytesWritable, BytesWritable, BytesWritable&amp;gt;.Context context)&lt;br/&gt;
+      protected void cleanup(Reducer&amp;lt;BytesWritable, BytesWritable, BytesWritable, BytesWritable&amp;gt;.Context context)&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.regionserver.TestRecoveredEdits&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12654//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12654//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12654//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12654//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12654//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12654//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12654//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12654//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12654//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12654//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12654//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12654//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12654//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12654//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12654//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12654//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12654//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12654//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12654//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12654//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12654//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12654//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12654//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12654//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12654//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12654//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/12654//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/12654//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14299614" author="stack" created="Sat, 31 Jan 2015 03:10:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yuzhihong%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;yuzhihong@gmail.com&quot;&gt;Ted Yu&lt;/a&gt; Usually the fellow who fucked it up, is the one who has to fix it.. you could just leave it for them to fix their mess. But thanks.&lt;/p&gt;</comment>
                            <comment id="14299632" author="stack" created="Sat, 31 Jan 2015 03:38:52 +0000"  >&lt;p&gt;This fix helps. The 125M and 250M tests pass where before they always failed. Looks like the 500M failed so some more stuff to fix it seems. Will open new issue for that.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jeffreyz&quot; class=&quot;user-hover&quot; rel=&quot;jeffreyz&quot;&gt;Jeffrey Zhong&lt;/a&gt; I should turn on DLR. I think I have tooling to figure any dataloss.  Should use it while it fresh.&lt;/p&gt;

&lt;p&gt;We need to have IT tests running with regularity (stating the obvious).  Might have caught this bug at commit-time.&lt;/p&gt;</comment>
                            <comment id="14299634" author="stack" created="Sat, 31 Jan 2015 03:39:30 +0000"  >&lt;p&gt;Committed to 0.98, branch-1, branch-1.0, and to master branches. Thanks for reviews lads.&lt;/p&gt;</comment>
                            <comment id="14299645" author="lhofhansl" created="Sat, 31 Jan 2015 03:54:49 +0000"  >&lt;p&gt;You the man, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="14299669" author="hudson" created="Sat, 31 Jan 2015 04:45:13 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.1 #128 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.1/128/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.1/128/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12782&quot; title=&quot;ITBLL fails for me if generator does anything but 5M per maptask&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12782&quot;&gt;&lt;del&gt;HBASE-12782&lt;/del&gt;&lt;/a&gt; ITBLL fails for me if generator does anything but 5M per maptask (stack: rev e06be2060cf8449a732c7a8b024d6fcf0c5e3ef6)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/util/FSUtils.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/data/0000000000000016310&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestRecoveredEdits.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/backup/HFileArchiver.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/WALPlayer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/SplitLogManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/cleaner/CleanerChore.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/FSHLog.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/wal/WALSplitter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/wal/WALPrettyPrinter.java&lt;/li&gt;
	&lt;li&gt;hbase-it/src/test/java/org/apache/hadoop/hbase/test/IntegrationTestBigLinkedList.java&lt;/li&gt;
	&lt;li&gt;hbase-it/src/test/java/org/apache/hadoop/hbase/DistributedHBaseCluster.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14299674" author="hudson" created="Sat, 31 Jan 2015 04:51:43 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.0 #700 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/700/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.0/700/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12782&quot; title=&quot;ITBLL fails for me if generator does anything but 5M per maptask&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12782&quot;&gt;&lt;del&gt;HBASE-12782&lt;/del&gt;&lt;/a&gt; ITBLL fails for me if generator does anything but 5M per maptask (stack: rev fbbbf7e6d809c5c83c042ec5741a3d9b2fd712c6)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-it/src/test/java/org/apache/hadoop/hbase/test/IntegrationTestBigLinkedList.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/FSHLog.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/wal/WALPrettyPrinter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/backup/HFileArchiver.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/wal/WALSplitter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/util/FSUtils.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/WALPlayer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestRecoveredEdits.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/SplitLogManager.java&lt;/li&gt;
	&lt;li&gt;hbase-it/src/test/java/org/apache/hadoop/hbase/DistributedHBaseCluster.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/data/0000000000000016310&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/cleaner/CleanerChore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14299679" author="hudson" created="Sat, 31 Jan 2015 05:19:20 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #6075 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/6075/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/6075/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12782&quot; title=&quot;ITBLL fails for me if generator does anything but 5M per maptask&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12782&quot;&gt;&lt;del&gt;HBASE-12782&lt;/del&gt;&lt;/a&gt; ITBLL fails for me if generator does anything but 5M per maptask (stack: rev 825871431ec48036fd3e3cd9625c451b50cbe308)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/cleaner/CleanerChore.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/FSHLog.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/util/FSUtils.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/wal/WALSplitter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/data/0000000000000016310&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestRecoveredEdits.java&lt;/li&gt;
	&lt;li&gt;hbase-it/src/test/java/org/apache/hadoop/hbase/DistributedHBaseCluster.java&lt;/li&gt;
	&lt;li&gt;hbase-it/src/test/java/org/apache/hadoop/hbase/test/IntegrationTestBigLinkedList.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/WALPlayer.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/SplitLogManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/backup/HFileArchiver.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/wal/WALPrettyPrinter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14299698" author="hudson" created="Sat, 31 Jan 2015 06:48:12 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98-on-Hadoop-1.1 #787 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/787/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/787/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12782&quot; title=&quot;ITBLL fails for me if generator does anything but 5M per maptask&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12782&quot;&gt;&lt;del&gt;HBASE-12782&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;0.98&amp;#93;&lt;/span&gt; Addendum fixes variable name (tedyu: rev fd498f18548b5dd37f45c2f3cdc46b11b11ecbd6)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14299704" author="stack" created="Sat, 31 Jan 2015 07:02:36 +0000"  >&lt;p&gt;Hmm. No the 500M test actually passed:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
	org.apache.hadoop.hbase.test.IntegrationTestBigLinkedList$Verify$Counts
		REFERENCED=500000000
	File Input Format Counters
		Bytes Read=0
	File Output Format Counters
		Bytes Written=96
...

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14299742" author="enis" created="Sat, 31 Jan 2015 10:08:03 +0000"  >&lt;p&gt;Wow, 500M! but seriously, thanks for the work.  &lt;/p&gt;</comment>
                            <comment id="14299925" author="hudson" created="Sat, 31 Jan 2015 18:26:38 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #6076 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/6076/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/6076/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12782&quot; title=&quot;ITBLL fails for me if generator does anything but 5M per maptask&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12782&quot;&gt;&lt;del&gt;HBASE-12782&lt;/del&gt;&lt;/a&gt; ITBLL fails for me if generator does anything but 5M per maptask: ADDENDUM &amp;#8211; ADD DATA FILE TO RAT EXCLUDES (noticed by Ted Yu) (stack: rev 86b8b8da0082bea9e8b9c43df917acd67a680cd1)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14299945" author="hudson" created="Sat, 31 Jan 2015 19:09:06 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.1 #131 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.1/131/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.1/131/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12782&quot; title=&quot;ITBLL fails for me if generator does anything but 5M per maptask&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12782&quot;&gt;&lt;del&gt;HBASE-12782&lt;/del&gt;&lt;/a&gt; ITBLL fails for me if generator does anything but 5M per maptask: ADDENDUM &amp;#8211; ADD DATA FILE TO RAT EXCLUDES (noticed by Ted Yu) (stack: rev a69e1b67334e165658caa1c36dd368cc3dff32e6)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14299946" author="hudson" created="Sat, 31 Jan 2015 19:10:01 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.0 #703 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/703/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.0/703/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12782&quot; title=&quot;ITBLL fails for me if generator does anything but 5M per maptask&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12782&quot;&gt;&lt;del&gt;HBASE-12782&lt;/del&gt;&lt;/a&gt; ITBLL fails for me if generator does anything but 5M per maptask: ADDENDUM &amp;#8211; ADD DATA FILE TO RAT EXCLUDES (noticed by Ted Yu) (stack: rev b0ea2fba424e5dba97b9ec1659000dcedc76ec4d)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;pom.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14300040" author="stack" created="Sun, 1 Feb 2015 00:39:41 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.hadoop.hbase.test.IntegrationTestBigLinkedList$Verify$Counts
		REFERENCED=1000000000
	File Input Format Counters
		Bytes Read=0
	File Output Format Counters
		Bytes Written=480
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Generating 1B links takes just over two hours. Verification 3.&lt;/p&gt;

&lt;p&gt;I&apos;m done w/ this issue now.  Will move to testing what happens when chaos monkey also kills server carrying meta.  If that works, will move to enable splits and killing of master.&lt;/p&gt;</comment>
                            <comment id="14300062" author="apurtell" created="Sun, 1 Feb 2015 02:19:47 +0000"  >&lt;p&gt;Thanks Stack&lt;/p&gt;</comment>
                            <comment id="14300074" author="apurtell" created="Sun, 1 Feb 2015 04:37:40 +0000"  >&lt;p&gt;I think this issue was introduced into 0.98 with &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11099&quot; title=&quot;Two situations where we could open a region with smaller sequence number&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11099&quot;&gt;&lt;del&gt;HBASE-11099&lt;/del&gt;&lt;/a&gt;, so has been present since 0.98.9&lt;/p&gt;</comment>
                            <comment id="14331765" author="enis" created="Sat, 21 Feb 2015 23:48:56 +0000"  >&lt;p&gt;Closing this issue after 1.0.0 release.&lt;/p&gt;</comment>
                            <comment id="14984021" author="stack" created="Sat, 31 Oct 2015 15:31:51 +0000"  >&lt;p&gt;Here is a doc I wrote up a while ago on how to debug ITBLL, the tooling available, and examples on how to track problems. Might be of use to others.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12909434">HBASE-14736</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12711364">HBASE-11099</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12695713" name="12782-0.98-addendum.txt" size="978" author="yuzhihong@gmail.com" created="Sat, 31 Jan 2015 01:51:54 +0000"/>
                            <attachment id="12695461" name="12782.fix.txt" size="844" author="stack" created="Fri, 30 Jan 2015 06:28:47 +0000"/>
                            <attachment id="12695329" name="12782.search.plus.archive.recovered.edits.txt" size="51580" author="stack" created="Thu, 29 Jan 2015 19:03:21 +0000"/>
                            <attachment id="12695101" name="12782.search.plus.txt" size="45128" author="stack" created="Wed, 28 Jan 2015 22:18:31 +0000"/>
                            <attachment id="12694301" name="12782.search.txt" size="35700" author="stack" created="Sat, 24 Jan 2015 00:29:43 +0000"/>
                            <attachment id="12691537" name="12782.unit.test.and.it.test.txt" size="19510" author="stack" created="Sun, 11 Jan 2015 03:29:47 +0000"/>
                            <attachment id="12691516" name="12782.unit.test.writing.txt" size="8129" author="stack" created="Sat, 10 Jan 2015 20:20:35 +0000"/>
                            <attachment id="12695618" name="12782v2.0.98.txt" size="870" author="stack" created="Fri, 30 Jan 2015 21:50:36 +0000"/>
                            <attachment id="12695611" name="12782v2.txt" size="62244" author="stack" created="Fri, 30 Jan 2015 20:44:35 +0000"/>
                            <attachment id="12695638" name="12782v3.0.98.txt" size="871" author="stack" created="Fri, 30 Jan 2015 23:01:31 +0000"/>
                            <attachment id="12695639" name="12782v3.txt" size="62205" author="stack" created="Fri, 30 Jan 2015 23:01:31 +0000"/>
                            <attachment id="12695694" name="12782v4.txt" size="62204" author="stack" created="Sat, 31 Jan 2015 01:06:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 8 Jan 2015 17:52:43 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 6 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i23u9j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>