<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:18:05 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4345/HBASE-4345.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4345] Ensure that Scanners that read from the storefiles respect MVCC</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4345</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Currently, the key-values written to the disk do not include the MVCC (RWCC) version information. Once we add that&lt;br/&gt;
information, and make it persistent to disk; let us make the scanners respect the MVCC mechanism by ignoring &lt;br/&gt;
&quot;newer&quot; writes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12521638">HBASE-4345</key>
            <summary>Ensure that Scanners that read from the storefiles respect MVCC</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12469746">HBASE-2856</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="amitanand">Amitanand Aiyer</assignee>
                                    <reporter username="amitanand">Amitanand Aiyer</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Sep 2011 18:10:26 +0000</created>
                <updated>Fri, 12 Oct 2012 05:34:54 +0000</updated>
                            <resolved>Thu, 17 Nov 2011 23:32:47 +0000</resolved>
                                                    <fixVersion>0.89.20100924</fixVersion>
                    <fixVersion>0.94.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13099193" author="amitanand" created="Wed, 7 Sep 2011 18:44:19 +0000"  >&lt;p&gt;To enforce the read-write consistency mechanism, we need to ignore all key-values that have a memstoreTS greater than the read point for the get/scan operation.&lt;/p&gt;

&lt;p&gt;Filters provide an excellent mechanism to ignore values based on any desired condition. We implement the RWCC mechanism for the key-values read from the disk by including a filter for the scan object that ignores &quot;newer&quot; reads.&lt;/p&gt;</comment>
                            <comment id="13099249" author="stack" created="Wed, 7 Sep 2011 19:31:27 +0000"  >&lt;p&gt;Interesting take, enforcing we only read at the read point or before by doing the functionality as a filter that is always used.  Intellectually I&apos;d say that this should be core and not be done via a filter but if filter gets the job done, lets go for it.  Nice.&lt;/p&gt;</comment>
                            <comment id="13099290" author="yuzhihong@gmail.com" created="Wed, 7 Sep 2011 20:28:47 +0000"  >&lt;p&gt;Minor comment:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    @Override
+    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; hasFilterRow() {
+      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (existingFilter == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
+        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
+      &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
+        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; existingFilter.hasFilterRow();
+    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;else is not needed above.&lt;/p&gt;

&lt;p&gt;What&apos;s the plan for all the sub-tasks of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2856&quot; title=&quot;TestAcidGuarantee broken on trunk &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2856&quot;&gt;&lt;del&gt;HBASE-2856&lt;/del&gt;&lt;/a&gt; ?&lt;/p&gt;</comment>
                            <comment id="13104134" author="stack" created="Wed, 14 Sep 2011 01:14:15 +0000"  >&lt;p&gt;@Amit You have any revisions on this patch since you wrote it?  Should we commit?&lt;/p&gt;</comment>
                            <comment id="13112693" author="amitanand" created="Thu, 22 Sep 2011 16:35:45 +0000"  >&lt;p&gt;@stack: I&apos;m going to redo this patch.  I gave walk through of this code last week, internally, and one of the &lt;br/&gt;
comments I got was that doing the filter approach is &lt;b&gt;not&lt;/b&gt; going to ignore delete-markers that occur after&lt;br/&gt;
the read point.  i.e. they will take effect, even though they should not.&lt;/p&gt;

&lt;p&gt;I&apos;ve been in austin for a recruiting trip, so don&apos;t have the patch ready. Will try to get it and update asap.&lt;/p&gt;</comment>
                            <comment id="13113408" author="amitanand" created="Fri, 23 Sep 2011 13:11:32 +0000"  >&lt;p&gt;I have modified the ScanQueryMatcher to take care of ignoring &quot;newer&quot; KV&apos;s. If done by the&lt;br/&gt;
Scan query matcher, it is also going to disregard the deletes so it will help us with other&lt;br/&gt;
issues.&lt;/p&gt;

&lt;p&gt;4344-v8 includes this change. &lt;/p&gt;</comment>
                            <comment id="13152455" author="amitanand" created="Thu, 17 Nov 2011 23:32:47 +0000"  >&lt;p&gt;fix included in 2856-v6.txt&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12496269" name="4345-v2.txt" size="1818" author="amitanand" created="Fri, 23 Sep 2011 13:33:57 +0000"/>
                            <attachment id="12493360" name="patch-3" size="7985" author="amitanand" created="Wed, 7 Sep 2011 18:44:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 7 Sep 2011 19:31:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33503</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 5 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08rf3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>49042</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>