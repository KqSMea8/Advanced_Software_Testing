<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 21:01:33 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-15260/HBASE-15260.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-15260] Should we check zero length value in checkAndMutate when null is passes as expected value?</title>
                <link>https://issues.apache.org/jira/browse/HBASE-15260</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Should we check zero length value in checkAndMutate when null is passes as expected value?&lt;br/&gt;
If yes, then I think we should update the documentation for checkAndPut with the same as sometimes column are used for marker with empty byte array.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
If the passed value is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, the check
   * is &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the lack of column (ie: non-existance)
&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; checkAndPut(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] row, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] family, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] qualifier,
    &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] value, Put put) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;otherwise , we should remove this check.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
HRegion.class

@Override
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; checkAndMutate(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; [] row, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; [] family, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; [] qualifier,
      CompareOp compareOp, ByteArrayComparable comparator, Mutation w,
      &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; writeToWAL)
  &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException{
...
&lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (result.size() &amp;gt; 0 &amp;amp;&amp;amp; result.get(0).getValueLength() == 0 &amp;amp;&amp;amp;
            valueIsNull) {
          matches = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
        }

 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12938859">HBASE-15260</key>
            <summary>Should we check zero length value in checkAndMutate when null is passes as expected value?</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ankit.singhal">Ankit Singhal</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Feb 2016 17:35:38 +0000</created>
                <updated>Thu, 25 Feb 2016 08:50:36 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="15144932" author="anoop.hbase" created="Fri, 12 Feb 2016 17:40:38 +0000"  >&lt;p&gt;null should be checked for the lack of column IMO.  The doc seems correct.&lt;/p&gt;</comment>
                            <comment id="15145019" author="ankit.singhal" created="Fri, 12 Feb 2016 18:34:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoopsamjohn&quot; class=&quot;user-hover&quot; rel=&quot;anoopsamjohn&quot;&gt;Anoop Sam John&lt;/a&gt;, but there is also a  zero length check on column value in checkAndMutate() when null is passed as expected value. &lt;br/&gt;
So checkAndPut will still succeed even when column is present but value of column is empty byte array. WDYT about this case?&lt;/p&gt;</comment>
                            <comment id="15145332" author="stack" created="Fri, 12 Feb 2016 21:26:13 +0000"  >&lt;p&gt;What you seeing &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ankit.singhal&quot; class=&quot;user-hover&quot; rel=&quot;ankit.singhal&quot;&gt;Ankit Singhal&lt;/a&gt;? Yeah, a no value is supposed to be legit as means of getting current value of the Cell when doing checkAnd* (or Increment or Append) without modification. You getting a NPE when you try to do this on checkAnd*?&lt;/p&gt;</comment>
                            <comment id="15145416" author="enis" created="Fri, 12 Feb 2016 22:20:11 +0000"  >&lt;p&gt;We should differentiate in checkAndXX between byte&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; and null as the value to check I think. Having a column value of byte&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; is different than not having the cell. However the confusion arises because KV treats null value and byte&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; as the same thing. ie &lt;tt&gt;Put.addColumn(cf, q, null)&lt;/tt&gt; is the same thing as &lt;tt&gt;Put.addColumn(cf, q, new byte&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;)&lt;/tt&gt;. &lt;/p&gt;</comment>
                            <comment id="15166937" author="ankit.singhal" created="Thu, 25 Feb 2016 08:50:36 +0000"  >&lt;p&gt;so WDYT, should we just update the documentation from&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
If the passed value is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, the check
   * is &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the lack of column (ie: non-existance)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
If the passed value is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, the check
   * is &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the lack of column (ie: non-existance) or zero-length column value.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Or , if it seems invalid ,let&apos;s close the ticket as invalid?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 12 Feb 2016 17:40:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            42 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ss5z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>