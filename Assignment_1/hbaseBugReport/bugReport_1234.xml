<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:51:50 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1234/HBASE-1234.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1234] Change HBase StoreKey format</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1234</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-859&quot; title=&quot;HStoreKey needs a reworking&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-859&quot;&gt;&lt;del&gt;HBASE-859&lt;/del&gt;&lt;/a&gt; cleaned up keys removing the need of HRegionInfo being in the context comparing keys.  This issue is about changing the format.  Work done in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-859&quot; title=&quot;HStoreKey needs a reworking&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-859&quot;&gt;&lt;del&gt;HBASE-859&lt;/del&gt;&lt;/a&gt; means changes have been localized to HStoreKey, in particular to comparators and parse routines.  We should do this now since 0.20.0 will require rewriting all data.&lt;/p&gt;

&lt;p&gt;Things to consider:&lt;/p&gt;

&lt;p&gt;&amp;lt;row&amp;gt; &amp;lt;columnfamily&amp;gt; &amp;lt;columnqualifier&amp;gt; &amp;lt;timestamp&amp;gt; &amp;lt;keytype&amp;gt;&lt;/p&gt;

&lt;p&gt;Or leave off columnfamily altogether and just write it once into the hfile metadata (All key compares are done in the Store context so columnfamily can be safely left out of the equation; its only when the key rises above Store that the columnfamily needs appending).&lt;/p&gt;

&lt;p&gt;keytype is probably a byte. Types are delete cell, delete row, delete family, delete column?  What else?  Where should we put it?  At the end?  How should type sort?  Or should it not be part of sort so its just the order at which we encounter the key?&lt;/p&gt;

&lt;p&gt;How are we going to support keys that go in out of chronological order?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12415977">HBASE-1234</key>
            <summary>Change HBase StoreKey format</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Mar 2009 06:13:46 +0000</created>
                <updated>Sun, 13 Sep 2009 22:24:26 +0000</updated>
                            <resolved>Sun, 12 Apr 2009 10:41:41 +0000</resolved>
                                                    <fixVersion>0.20.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12678592" author="stack" created="Wed, 4 Mar 2009 05:41:40 +0000"  >&lt;p&gt;Chatting w/ lads at HUG6 &amp;#8211; in particular jgray, holstad, jimk, ryan, travis &amp;#8211; we came up w/ following proposed format:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;int1&amp;gt;&amp;lt;int2&amp;gt;&amp;lt;int3&amp;gt;&amp;lt;row&amp;gt;&amp;lt;columnfamily&amp;gt;&amp;lt;columnqualifier&amp;gt;&amp;lt;timestamp&amp;gt;&amp;lt;type&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;int1 is the length of row,  2 bytes&lt;br/&gt;
int2 is length of columnfamily, 1 byte&lt;br/&gt;
int3 is length of columnqualifier, 2 bytes&lt;/p&gt;

&lt;p&gt;The ints above are plain ints, not vints&lt;/p&gt;

&lt;p&gt;The type is a single byte.  Types are update, cell delete, column delete, column family delete, row delete and possibly counter.&lt;/p&gt;

</comment>
                            <comment id="12679782" author="stack" created="Sat, 7 Mar 2009 00:31:31 +0000"  >&lt;p&gt;Doing new key format as part of the move from HStoreKey to KeyValue (Need to make an issue).  Being done over on github in the stack branch on hbase.&lt;/p&gt;</comment>
                            <comment id="12679784" author="stack" created="Sat, 7 Mar 2009 00:32:47 +0000"  >&lt;p&gt;Here is URL for github: &lt;a href=&quot;http://github.com/ryanobjc/hbase/tree/stack&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://github.com/ryanobjc/hbase/tree/stack&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12680949" author="erikholstad@gmail.com" created="Wed, 11 Mar 2009 17:53:56 +0000"  >&lt;p&gt;Looking at the implementation of the KeyValue.java , we are not using any of the ByteBuffer specific features that &lt;br/&gt;
comes with the overhead of that object. Following the discussion on the IRC I&apos;ve seen that other people share&lt;br/&gt;
the same view. &lt;br/&gt;
Would really just want to have the byte[] and an offset to it that would be passed around, that would mean going&lt;br/&gt;
from 56 to 12 B of overhead. Taking into consideration that we need an object to be able to store in the the cache&lt;br/&gt;
if we want to use maps, which seems reasonable, I think that having a smaller custom object that would include:&lt;br/&gt;
ArrayPtr(8B) + offset+length(8B) + object overhead(16B) = 32B is the best way to go at this point.&lt;/p&gt;</comment>
                            <comment id="12680951" author="stack" created="Wed, 11 Mar 2009 17:56:51 +0000"  >&lt;p&gt;I agree.  Let me make KeyValue into a class.  Will talk to ryan about whats involved getting a KeyValue instance up out of hfile.&lt;/p&gt;</comment>
                            <comment id="12682567" author="stack" created="Tue, 17 Mar 2009 06:02:51 +0000"  >&lt;p&gt;First cut at a patch.  Still has issues and tests don&apos;t pass yet.  Ryan Rawson and Jon Gray contributed to this patch.&lt;/p&gt;

&lt;p&gt;Here are notes on whats there so far:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Removing HStoreKey (Still present but will be deprecated).  Added in its stead,
KeyValue.  KeyValue is a wrapper around a &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; array, offset and length.
KeyValue has comparators that &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; array compares cognizant of our whacky
meta and root key formats.

M b/src/java/org/apache/hadoop/hbase/HRegionInfo.java
    (getComparator): Added.  Returns the comparator to use switching off
    the HRegionInfo type.

M b/src/java/org/apache/hadoop/hbase/HTableDescriptor.java
    Use &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; families comparator.  Should save us on getting of family
    delimiter, then comparing up to the family delimiter only.

A b/src/java/org/apache/hadoop/hbase/KeyValue.java
    Effectively the &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Key.  Key format has changed too to introduce
    Key Type.  See class comment &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; detail on &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; format.
    Mostly a bunch of &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; creates and utility making KeyValues.
    Comparators have stuff like compareRow, matchingRow, etc. Use
    the comparator to &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; stuff we used to &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; on the fly in past.
    Has stuf &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; getting row, column and timestamp offsets and lengths
    so we don&apos;t have to copy.  Comparators also take offset and lengths
    so can compare without copying.
M b/src/java/org/apache/hadoop/hbase/filter/RowFilterInterface.java
    Added overrides that take offset and length and deprecated old methods.
M b/src/java/org/apache/hadoop/hbase/io/Cell.java
M b/src/java/org/apache/hadoop/hbase/io/RowResult.java
    Added utility methods to go from KeyValue Lists, etc., to Maps of
    column to Cells.  This is the stuff we&apos;d remove when the client/server
    API changes.  These will be hotspots when we profile.  Did it &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Cells
    and RowResults.
M b/src/java/org/apache/hadoop/hbase/io/HalfHFileReader.java
    Bring over HalfHFileReader to use KeyValue.
M b/src/java/org/apache/hadoop/hbase/io/hfile/HFile.java
M b/src/java/org/apache/hadoop/hbase/io/hfile/HFileScanner.java
    Changes by Ryan to bring hfile over to KeyValue.
M b/src/java/org/apache/hadoop/hbase/regionserver/HAbstractScanner.java
    Convert to KeyValue. Make column match take a KeyValue so don&apos;t have
    to copy column out to compare it.
M b/src/java/org/apache/hadoop/hbase/regionserver/HLog.java
    Convert HLog over to KeyValue.
M b/src/java/org/apache/hadoop/hbase/regionserver/HLogEdit.java
    Redo an edit.  Make the value a KeyValue.  Move row out of key.
    We should redo log file so its hfile.
M b/src/java/org/apache/hadoop/hbase/regionserver/HLogKey.java
    Format has changed.  Moved out row.
M b/src/java/org/apache/hadoop/hbase/regionserver/HRegion.java
    Use KeyValue.  Return lists of them rather than MapWritables and
    Cell [].  Use comparators.  Added &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Counter class.  Needed in
    getFull to keep up running list of versions (fixed bugs in here,
    particularly in memcache where we were doing the count all wrong).
    Added utility function to help with getFull; okToAddResult, addResult,
    hasEnoughVersions.  Cleanup.  We were doing things like checking
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; read only in two methods; parent check was enough.
    Removed all of that localput stuff -- it was weird.  May have made
    sense once (prompted by jgray).
M b/src/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java
    Bring over to &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; regime.  In here we &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; some of the conversions from
    &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; style list of KeyValue to old style RowResult.
M b/src/java/org/apache/hadoop/hbase/regionserver/InternalScanner.java
    Comvert to KeyValue.
M b/src/java/org/apache/hadoop/hbase/regionserver/Memcache.java
    Redo as a Set of KeyValues.  Use ConcurrentSkipListSet so can
    undo all synchronization.  Means that iterators no longer fail
    fast but I think thats fine -- you get view on data at time
    Iterator was taken out.
M b/src/java/org/apache/hadoop/hbase/regionserver/Store.java
    Move over to KeyValue.  Bunch of refactoring to make it work.
M b/src/java/org/apache/hadoop/hbase/regionserver/StoreFile.java
    Move over to KeyValue.
M b/src/java/org/apache/hadoop/hbase/regionserver/StoreFileScanner.java
    Move over to KeyValue.  Removed ViableRow class.  Not needed any
    more it looks like.
M b/src/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java
    Move over to KeyValue.
M b/src/java/org/apache/hadoop/hbase/util/Bytes.java
    Fix SIZEOF_BYTES. Added facility.  Most in here was done by jgray,
    in particular the stuff that provides ByteBuffer facility such as
    putInt, putLong, etc.  Ryan added the binarySearch of &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; array,
    offset, and length tuples.
M b/src/java/org/apache/hadoop/hbase/util/MetaUtils.java
M b/src/java/org/apache/hadoop/hbase/util/Merge.java
    Still to &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt;.
A b/src/test/org/apache/hadoop/hbase/TestKeyValue.java
    Test &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; keyvalue.
M b/src/test/org/apache/hadoop/hbase/io/hfile/TestSeekTo.java
    Mods &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; changes in HFile.
M b/src/test/org/apache/hadoop/hbase/regionserver/TestHMemcache.java
    Fixup of tests &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Memcache.
M b/src/test/org/apache/hadoop/hbase/util/TestBytes.java
    Tests &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Bytes.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12683224" author="stack" created="Wed, 18 Mar 2009 23:02:15 +0000"  >&lt;p&gt;In v2, all compiles now.  Next, I need to do tests.&lt;/p&gt;

&lt;p&gt;This patch actually deprecates HSK.&lt;/p&gt;

&lt;p&gt;KeyValue.KVComparators now have a RawComparator&amp;lt;byte []&amp;gt; that can do the Key portion only.  We needed these mostly so we could talk about RawComparator only in hfile without having to have it know all about KeyValue Comparators.&lt;/p&gt;

&lt;p&gt;I cleaned up KeyValue some.  Removes all the KV.create and made constructors instead.  Seemed cleaner than sometimes static create and others a constructor.&lt;/p&gt;

&lt;p&gt;Filter interface has changed to you pass byte array, offset, and row tuples instead of just a byte array.&lt;/p&gt;


</comment>
                            <comment id="12683225" author="stack" created="Wed, 18 Mar 2009 23:07:24 +0000"  >&lt;p&gt;Things to do other than make all tests run:&lt;/p&gt;

&lt;p&gt;Sizes for memory have to be redone for things like KV and Memcache (but should be easier now with things like the sizeof tool).&lt;/p&gt;

&lt;p&gt;revisit how deletes work &amp;#8211; this is in-process at the moment (I removed the DeleteRow in last patch because as Erik Holstad pointed out, at least inside in a StoreFile or in Memcache, it means nothing).&lt;/p&gt;

&lt;p&gt;Need to talk to Clint Morgan.  He might want to change his transactional types to use the new Key Type field.&lt;/p&gt;</comment>
                            <comment id="12688054" author="erikholstad@gmail.com" created="Sat, 21 Mar 2009 16:21:07 +0000"  >&lt;p&gt;Hey Stack!&lt;br/&gt;
Just want to ask how much work it would be to change the format to r/f/type/col/ts? Since it seems to be the best way to use it over at the server.&lt;br/&gt;
I also want to let you know how we are going to use KeyValue in the new get implementations. We are most likely only going to use the standard&lt;br/&gt;
byte comparator from Bytes and some constructors to create KeyValue, so no fancy gets and stuff are needed over at this end.&lt;/p&gt;</comment>
                            <comment id="12689075" author="stack" created="Wed, 25 Mar 2009 11:07:09 +0000"  >&lt;p&gt;On, change of the key format, not hard.  Not at the moment anyways before commit.&lt;/p&gt;

&lt;p&gt;Why you think your suggested key format better?  Seems like timestamp sort should prevail in all cases except maybe in case where we&apos;re doing a family delete (family deletes could have a zero qualifier so they sort first rather than change key format?)&lt;/p&gt;

&lt;p&gt;Regards comparators, you&apos;ll need to use the right one dependent on context.  Byte comparator won&apos;t work if its a catalog table key.&lt;/p&gt;

&lt;p&gt;I already changed KV to use Constructors rather than static creator methods (this I did I think after you wrote above comment).&lt;/p&gt;

&lt;p&gt;Thanks Erik&lt;/p&gt;</comment>
                            <comment id="12695308" author="stack" created="Fri, 3 Apr 2009 09:43:34 +0000"  >&lt;p&gt;Latest version.  Patch made against latest up on git://jukka.zitting.name/hbase.git.  Pushed to &lt;a href=&quot;http://github.com/ryanobjc/hbase/tree/stack&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://github.com/ryanobjc/hbase/tree/stack&lt;/a&gt;.  More tests pass; e.g. TestHRegion.  Redid guts of Scanners so we only get # of versions wanted and so we deal with KeyValue (deletes were not crossing over from Memcache to Storefiles as it used work).&lt;/p&gt;</comment>
                            <comment id="12696910" author="stack" created="Wed, 8 Apr 2009 06:50:01 +0000"  >&lt;p&gt;About two unit tests left to pass.&lt;/p&gt;

&lt;p&gt;This patch removes getKeys &amp;#8211; mechanism we used to have for getting all keys so we could add deletes.  Uses getFull instead (getKeys was doing effectively what getFull does anyways).  Bunch of work also  making memcache gets and getFulls and storefile gets and getFulls use same code.&lt;/p&gt;</comment>
                            <comment id="12698034" author="stack" created="Sat, 11 Apr 2009 00:46:15 +0000"  >&lt;p&gt;v7 fixes most tests but also disables filter tests, compaction, thrift, and atomic increment unit tests because these do not pass yet.&lt;/p&gt;

&lt;p&gt;Here are notes on changes.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Disabled the filter tests.  Filter interface has changed.  Filters need&lt;br/&gt;
to be updated.  Will do in separate issue.&lt;/p&gt;

&lt;p&gt;Disabled TestAtomicIncrement.  Will fix in separate issue.&lt;/p&gt;

&lt;p&gt;Disabled TestCompaction and the thrift unit tests.&lt;/p&gt;

&lt;p&gt;M b/src/java/org/apache/hadoop/hbase/HMerge.java&lt;br/&gt;
  Update to deal with results that are List&amp;lt;KeyValue&amp;gt;&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/HRegionInfo.java&lt;br/&gt;
  (getComparator) Added.&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/HStoreKey.java&lt;br/&gt;
   Deprecated.&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/HTableDescriptor.java&lt;br/&gt;
  Changed map of families.  No longer do we do encoding of&lt;br/&gt;
  family name.  Instead we do a special comparator, one&lt;br/&gt;
  that compares only the family portion of the column&lt;br/&gt;
  name.&lt;br/&gt;
A b/src/java/org/apache/hadoop/hbase/KeyValue.java&lt;br/&gt;
  KeyValue does what HStoreKey used to.&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/client/HConnectionManager.java&lt;br/&gt;
  Fixed comments.&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/client/MetaScanner.java&lt;br/&gt;
  Formatting.&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/filter/ColumnValueFilter.java&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/filter/PageRowFilter.java&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/filter/PrefixRowFilter.java&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/filter/RegExpRowFilter.java&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/filter/RowFilterInterface.java&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/filter/RowFilterSet.java&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/filter/StopRowFilter.java&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/filter/WhileMatchRowFilter.java&lt;br/&gt;
  Filter interface changed; now we take buffer with offset and&lt;br/&gt;
  length.  Deprecated the old.  Filters not finished.  Need work.&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/io/Cell.java&lt;br/&gt;
  (createCells): Added. Method that converts List&amp;lt;KeyValue&amp;gt; to Cells.&lt;br/&gt;
  This method should be temporary... should go away eventually.&lt;br/&gt;
  (createSingleCellArray): Added.  Temporary method.&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/io/HalfHFileReader.java&lt;br/&gt;
  Updated to deal with KeyValue keys.&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/io/HbaseMapWritable.java&lt;br/&gt;
  Formatting.&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/io/Reference.java&lt;br/&gt;
  Deal with KeyValue keys.&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/io/RowResult.java&lt;br/&gt;
  (createRowResultArray, createRowResult): Temporary convertion&lt;br/&gt;
  methods to go from List&amp;lt;KeyValue&amp;gt; to RowResult.&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/io/hfile/HFile.java&lt;br/&gt;
  Add method that takes a KeyValue.  Add methods that&lt;br/&gt;
  take buffer + offset + length (rather than just buffer).&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/io/hfile/HFileScanner.java&lt;br/&gt;
  Add methods that take buffer + offset + length (rather than just buffer).&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/master/BaseScanner.java&lt;br/&gt;
  Redo.  Deal with KeyValue.&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/regionserver/HLog.java&lt;br/&gt;
  Deal with KeyValue.  Move the row component from Key to edit value.&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/regionserver/HLogEdit.java&lt;br/&gt;
  Removed extaneous isDeleted stuff &amp;#8211; stuff that no longer applies&lt;br/&gt;
  now delete is attribute of key rather than special cell value.&lt;br/&gt;
  Add handling of KeyValue.&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/regionserver/HLogKey.java&lt;br/&gt;
  HLK no longer has row in it.&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;br/&gt;
  Use skip list for Set of stores.  No need of sync when iterating.&lt;br/&gt;
  Use new comparators checking row and row+column matches.&lt;br/&gt;
  Add in new methods to check version count and to not add values&lt;br/&gt;
  Add in new methods to check version count and to not add values&lt;br/&gt;
  already present in results. Add handling of KeyValue.&lt;br/&gt;
  (getKeys): Removed.  Doesn&apos;t make sense now key and value&lt;br/&gt;
  bundled up together.&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;br/&gt;
  Use new comparators.  Deal with KeyValue.&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/regionserver/InternalScanner.java&lt;br/&gt;
  Change interface to take KeyValue.&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/regionserver/Memcache.java&lt;br/&gt;
  Deal in KeyValue.  Use SkipList so don&apos;t have to lock to iterate tailsets.&lt;br/&gt;
  Renamed internalGetFull as getFull.  Removed getKeys.  Use getFull&lt;br/&gt;
  instead.&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/regionserver/Store.java&lt;br/&gt;
  Deal with KeyValue. Use new comparators.&lt;br/&gt;
  Use skip lists for reconstruction cache, etc.&lt;br/&gt;
  Make body of getFull and get agree with whats in Memcache &amp;#8211; call same&lt;br/&gt;
  methods. Remove getKeys. Do getFull instead (Did same thing).&lt;br/&gt;
  Remove methods like rowMatches and matching columns and use&lt;br/&gt;
  comparators instead.&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/regionserver/StoreFile.java&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/regionserver/StoreFileScanner.java&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/regionserver/StoreScanner.java&lt;br/&gt;
  Removed HSK.  Use KV instead.&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/regionserver/tableindexed/IndexedRegion.java&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/regionserver/transactional/TransactionalHLogManager.java&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/regionserver/transactional/TransactionalRegion.java&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/regionserver/transactional/TransactionalRegionServer.java&lt;br/&gt;
  Use KeyValue instead.  Changes to agree with base class changes.&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/util/Bytes.java&lt;br/&gt;
  Add license.  Some bug fixes and added methods (By Jon Gray), methods to&lt;br/&gt;
  do ByteBuffer stuff.&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/util/Merge.java&lt;br/&gt;
M b/src/java/org/apache/hadoop/hbase/util/MetaUtils.java&lt;br/&gt;
  Update to KeyValue.&lt;br/&gt;
D b/src/java/org/apache/hadoop/hbase/util/TestBytes.java&lt;br/&gt;
  Removed.&lt;br/&gt;
M b/src/test/org/apache/hadoop/hbase/HBaseTestCase.java&lt;br/&gt;
  Updates to deal with KeyValue changes.&lt;br/&gt;
A b/src/test/org/apache/hadoop/hbase/TestKeyValue.java&lt;br/&gt;
  New test for KeyValue.&lt;/p&gt;

</comment>
                            <comment id="12698205" author="stack" created="Sun, 12 Apr 2009 10:41:41 +0000"  >&lt;p&gt;Committed v7.&lt;/p&gt;

&lt;p&gt;Made issues to address outstanding unit tests broken (disabled) as part of v7 commit.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12416456">HBASE-1249</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12402530" name="1234-v2.patch" size="404440" author="stack" created="Wed, 18 Mar 2009 23:02:15 +0000"/>
                            <attachment id="12404518" name="1234-v5.patch" size="447963" author="stack" created="Fri, 3 Apr 2009 09:43:34 +0000"/>
                            <attachment id="12402351" name="1234.patch" size="308229" author="stack" created="Tue, 17 Mar 2009 06:02:51 +0000"/>
                            <attachment id="12404933" name="hbase-1234-v6.patch" size="471117" author="stack" created="Wed, 8 Apr 2009 06:50:01 +0000"/>
                            <attachment id="12405215" name="hbase-1234-v7.patch" size="648814" author="stack" created="Sat, 11 Apr 2009 00:46:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 11 Mar 2009 17:53:56 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32054</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 36 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hc3z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99224</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>