<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 21:10:17 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-16099/HBASE-16099.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-16099] Procedures tests timing out for RPC not dispatched or stuck into the queue</title>
                <link>https://issues.apache.org/jira/browse/HBASE-16099</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Just triaging some tests failures upstream:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/view/All/job/HBase-Trunk_matrix/jdk=latest1.8,label=yahoo-not-h2/1101/testReport/junit/org.apache.hadoop.hbase.master.procedure/TestDeleteColumnFamilyProcedure/testDeleteColumnFamily/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/view/All/job/HBase-Trunk_matrix/jdk=latest1.8,label=yahoo-not-h2/1101/testReport/junit/org.apache.hadoop.hbase.master.procedure/TestDeleteColumnFamilyProcedure/testDeleteColumnFamily/&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12982545">HBASE-16099</key>
            <summary>Procedures tests timing out for RPC not dispatched or stuck into the queue</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="appy">Appy</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Jun 2016 02:26:28 +0000</created>
                <updated>Fri, 24 Jun 2016 08:20:03 +0000</updated>
                                                                            <component>test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15347886" author="mbertozzi" created="Fri, 24 Jun 2016 07:15:33 +0000"  >&lt;p&gt;for the DeleteFamily test or the client or the master were in some &quot;sleeping&quot; state.&lt;br/&gt;
the client sent the operation to the master and the master quickly completed it. &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2016-06-23 18:47:22,522 INFO  [Time-limited test] client.HBaseAdmin$10(774): Started disable of testDeleteColumnFamily
2016-06-23 18:47:22,523 INFO  [RpcServer.FifoWFPBQ.default.handler=4,queue=0,port=60885] master.HMaster(2023): Client=jenkins//67.195.81.145 disable testDeleteColumnFamily
2016-06-23 18:47:22,525 DEBUG [RpcServer.FifoWFPBQ.default.handler=4,queue=0,port=60885] procedure2.ProcedureExecutor(669): Procedure DisableTableProcedure (table=testDeleteColumnFamily) id=26 owner=jenkins state=RUNNABLE:DISABLE_TABLE_PREPARE added to the store.
...
2016-06-23 18:47:22,614 DEBUG [ProcedureExecutor-0] procedure2.ProcedureExecutor(870): Procedure completed in 87msec: DisableTableProcedure (table=testDeleteColumnFamily) id=26 owner=jenkins state=FINISHED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;but the client didn&apos;t ask for the state or the master was not able to process the request, &lt;br/&gt;
because the request got to the master a minute later and the client quickly got the response. &lt;br/&gt;
but the test at that point was already timing out&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2016-06-23 18:48:21,508 DEBUG [RpcServer.FifoWFPBQ.default.handler=4,queue=0,port=60885] master.MasterRpcServices(949): Checking to see if procedure is done procId=26
2016-06-23 18:48:21,509 INFO  [Time-limited test] client.HBaseAdmin$TableFuture(3454): Operation: DISABLE, Table Name: default:testDeleteColumnFamily completed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;from a working test you can see the client asking for disable and checking the state quickly.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2016-06-23 18:47:14,457 INFO  [Time-limited test] client.HBaseAdmin$10(774): Started disable of testDeleteColumnFamilyTwice
2016-06-23 18:47:14,463 INFO  [RpcServer.FifoWFPBQ.default.handler=4,queue=0,port=60885] master.HMaster(2023): Client=jenkins//67.195.81.145 disable testDeleteColumnFamilyTwice
2016-06-23 18:47:14,473 DEBUG [RpcServer.FifoWFPBQ.default.handler=4,queue=0,port=60885] procedure2.ProcedureExecutor(669): Procedure DisableTableProcedure (table=testDeleteColumnFamilyTwice) id=7 owner=jenkins state=RUNNABLE:DISABLE_TABLE_PREPARE added to the store.
2016-06-23 18:47:14,477 DEBUG [ProcedureExecutor-0] lock.ZKInterProcessLockBase(226): Acquired a lock for /hbase/table-lock/testDeleteColumnFamilyTwice/write-master:608850000000004
2016-06-23 18:47:14,484 DEBUG [ProcedureExecutor-0] hbase.MetaTableAccessor(1355): Put{&quot;totalColumns&quot;:1,&quot;row&quot;:&quot;testDeleteColumnFamilyTwice&quot;,&quot;families&quot;:{&quot;table&quot;:[{&quot;qualifier&quot;:&quot;state&quot;,&quot;vlen&quot;:2,&quot;tag&quot;:[],&quot;timestamp&quot;:1466707634484}]}}
2016-06-23 18:47:14,490 INFO  [ProcedureExecutor-0] hbase.MetaTableAccessor(1700): Updated table testDeleteColumnFamilyTwice state to DISABLING in META
2016-06-23 18:47:14,492 DEBUG [RpcServer.FifoWFPBQ.default.handler=4,queue=0,port=60885] master.MasterRpcServices(949): Checking to see if procedure is done procId=7
...
2016-06-23 18:47:14,559 DEBUG [ProcedureExecutor-0] procedure2.ProcedureExecutor(870): Procedure completed in 90msec: DisableTableProcedure (table=testDeleteColumnFamilyTwice) id=7 owner=jenkins state=FINISHED
2016-06-23 18:47:14,603 DEBUG [RpcServer.FifoWFPBQ.default.handler=4,queue=0,port=60885] master.MasterRpcServices(949): Checking to see if procedure is done procId=7
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 24 Jun 2016 07:15:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            25 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i300d3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>