<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 21:00:18 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-15155/HBASE-15155.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-15155] Show All RPC handler tasks stops working after cluster is under heavy load for a while</title>
                <link>https://issues.apache.org/jira/browse/HBASE-15155</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;After we upgrade from 94.7 to 94.26 and 1.0, we found that &quot;Show All RPC handler status&quot; link on RS webUI stops working after running in production cluster with relatively high load for several days.  &lt;/p&gt;

&lt;p&gt;Turn out to be it is a bug introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10312&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-10312&lt;/a&gt; The BoundedFIFOBuffer cause RPCHandler Status overriden/removed permanently when there is a spike of non-RPC tasks status that is over the MAX_SIZE (1000).  So as long as the RS experienced &quot;high&quot; load once, the RPC status monitoring is gone forever, until RS is restarted. &lt;/p&gt;

&lt;p&gt; We added a unit test that can repro this. And the fix can pass the test.  &lt;/p&gt;</description>
                <environment></environment>
        <key id="12933203">HBASE-15155</key>
            <summary>Show All RPC handler tasks stops working after cluster is under heavy load for a while</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="3" iconUrl="https://issues.apache.org/jira/images/icons/statuses/inprogress.png" description="This issue is being actively worked on at the moment by the assignee.">In Progress</status>
                    <statusCategory id="4" key="indeterminate" colorName="yellow"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="tychang">Tianying Chang</assignee>
                                    <reporter username="tychang">Tianying Chang</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 Jan 2016 23:04:58 +0000</created>
                <updated>Thu, 17 Mar 2016 20:00:53 +0000</updated>
                                            <version>0.98.0</version>
                    <version>1.0.0</version>
                    <version>0.94.19</version>
                                                    <component>monitoring</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="15111606" author="yuzhihong@gmail.com" created="Thu, 21 Jan 2016 23:32:00 +0000"  >&lt;p&gt;Consider naming tasks variable nonRpcHandlerTasks - it would be easier to distinguish from rpcHandlerTasks&lt;/p&gt;

&lt;p&gt;Naming convention for patch is HBASE-XXX.patch&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="15111667" author="tychang" created="Fri, 22 Jan 2016 00:17:19 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ted_yu&quot; class=&quot;user-hover&quot; rel=&quot;ted_yu&quot;&gt;Ted Yu&lt;/a&gt; will make a new patch. &lt;/p&gt;</comment>
                            <comment id="15111923" author="anoop.hbase" created="Fri, 22 Jan 2016 05:05:36 +0000"  >&lt;blockquote&gt;&lt;p&gt;private List&amp;lt;TaskAndWeakRefPair&amp;gt; rpcHandlerTasks = Lists.newArrayList();&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;We add tasks to this List. Who will remove it?&lt;br/&gt;
The other one is CircularFifoBuffer.&lt;/p&gt;</comment>
                            <comment id="15111992" author="tychang" created="Fri, 22 Jan 2016 06:19:10 +0000"  >&lt;p&gt; RPC handler status is inserted when RPC handle is started, not like the non-RPC monitored task, it is long running thread that never exit, so only transition between waiting and running state while RS is up running. &lt;/p&gt;</comment>
                            <comment id="15130776" author="tychang" created="Wed, 3 Feb 2016 17:59:19 +0000"  >&lt;p&gt;We deployed at our production cluster running 94.26, it is working fine with heavy traffic for over a week now. &lt;/p&gt;</comment>
                            <comment id="15131245" author="yuzhihong@gmail.com" created="Wed, 3 Feb 2016 22:14:36 +0000"  >&lt;p&gt;Tianying:&lt;br/&gt;
Can you submit patch for QA run ?&lt;/p&gt;</comment>
                            <comment id="15200261" author="yuzhihong@gmail.com" created="Thu, 17 Mar 2016 20:00:53 +0000"  >&lt;p&gt;Tianying:&lt;br/&gt;
I assume cluster testing has been done for this change ?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12783698" name="hbase-15155.patch" size="3907" author="tychang" created="Thu, 21 Jan 2016 23:10:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 21 Jan 2016 23:32:00 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2rtkf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>