<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:02:36 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-2522/HBASE-2522.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-2522] Disabling a table during a split (tricky) can leave the daughter regions assigned and marked offline in .META.</title>
                <link>https://issues.apache.org/jira/browse/HBASE-2522</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;If for any reason the master takes too much time to process a MSG_REPORT_SPLIT_INCLUDES_DAUGHTERS, and that a user successfully disables the table, then the daughter regions will still be assigned and marked as offline in .META.&lt;/p&gt;

&lt;p&gt;A test case I&apos;m uploading to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2515&quot; title=&quot;ChangeTableState considers split&amp;amp;&amp;amp;offline regions as being served&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2515&quot;&gt;&lt;del&gt;HBASE-2515&lt;/del&gt;&lt;/a&gt; shows the issue.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12464033">HBASE-2522</key>
            <summary>Disabling a table during a split (tricky) can leave the daughter regions assigned and marked offline in .META.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jdcryans">Jean-Daniel Cryans</reporter>
                        <labels>
                            <label>moved_from_0_20_5</label>
                    </labels>
                <created>Fri, 7 May 2010 23:40:48 +0000</created>
                <updated>Tue, 7 May 2013 22:30:24 +0000</updated>
                            <resolved>Tue, 7 May 2013 22:30:24 +0000</resolved>
                                                                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12865991" author="jdcryans" created="Tue, 11 May 2010 00:01:21 +0000"  >&lt;p&gt;Need to add this to show the bug in TestMasterWithDisabling.testDisableBetweenSplit after the other assert:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
assertEquals(2, cluster.getMaster().getClusterStatus().getRegionsCount());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12866805" author="stack" created="Wed, 12 May 2010 23:48:18 +0000"  >&lt;p&gt;Bulk move of 0.20.5 issues into 0.21.0 after vote that we merge branch into TRUNK up on list.&lt;/p&gt;</comment>
                            <comment id="12899678" author="jdcryans" created="Wed, 18 Aug 2010 00:58:08 +0000"  >&lt;p&gt;One of our in-house users tripped into this issue, had to wait for the daughter regions to finish compacting to get them to close. I&apos;m thinking that until we resolve this issue that we should first inspect a table for SPLIT =&amp;gt; &apos;true&apos; regions and refuse disabling if there&apos;s any.&lt;/p&gt;</comment>
                            <comment id="12902256" author="jdcryans" created="Wed, 25 Aug 2010 01:11:47 +0000"  >&lt;p&gt;I&apos;m making a priority of this issue. It needs to be fixed in the new master as this is something that 1) isn&apos;t easy to figure and 2) new users always hit it (saw that recently here).&lt;/p&gt;</comment>
                            <comment id="12904915" author="stack" created="Wed, 1 Sep 2010 05:21:43 +0000"  >&lt;p&gt;This should not be possible in new master.  Disable/enable of a table is a flag in zk, not state of region online/offline flag.  Leaving open till we write a unit test to prove that this no longer possible under new master.&lt;/p&gt;</comment>
                            <comment id="12930304" author="stack" created="Tue, 9 Nov 2010 21:57:08 +0000"  >&lt;p&gt;Downgrading priority and moving out of 0.90.0.  &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3112&quot; title=&quot;Enable and disable of table needs a bit of loving in new master&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3112&quot;&gt;&lt;del&gt;HBASE-3112&lt;/del&gt;&lt;/a&gt; changed the way disable worked; e.g. we don&apos;t set &apos;offline&apos; in meta any more when disabling a table. Also  we&apos;ll cycle until all regions of a table are disabled.  If a split while disabling, the second time around our disabling loop, we should pick up the daughters and give them the disable treatment.   One thing we could add is check of table state before opening daughters on split.  If is disabling or is disabled, that would prevent daughters being opened (Should be after they have added themselves to .META.).&lt;/p&gt;

&lt;p&gt;Leaving this issue open since could do w/ unit test and we could implement the latter suggestion in the above.&lt;/p&gt;</comment>
                            <comment id="12930309" author="stack" created="Tue, 9 Nov 2010 22:01:00 +0000"  >&lt;p&gt;Actually do it.&lt;/p&gt;</comment>
                            <comment id="13047614" author="stack" created="Fri, 10 Jun 2011 22:46:05 +0000"  >&lt;p&gt;Moving out of 0.92.0. Pull it back in if you think different.&lt;/p&gt;</comment>
                            <comment id="13651383" author="jdcryans" created="Tue, 7 May 2013 22:30:24 +0000"  >&lt;p&gt;Closing, it&apos;s so old.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12475703">HBASE-3075</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 12 May 2010 23:48:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26348</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02di7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11789</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>