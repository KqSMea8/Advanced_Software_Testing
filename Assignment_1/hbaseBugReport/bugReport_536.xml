<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:45:11 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-536/HBASE-536.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-536] Remove MiniDFS startup from MiniHBaseCluster</title>
                <link>https://issues.apache.org/jira/browse/HBASE-536</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Change MiniHBaseCluster to always require a MiniDfs started elsewhere. It will decide where to read and write based on the config passed in to its constructor. &lt;/p&gt;

&lt;p&gt;HBaseClusterTestCase will be updated to do the MiniDFS spinup and shutdown as part of its normal process.&lt;/p&gt;

&lt;p&gt;Completing this issue will prime us for solving the truly external DFS issue for making the test suite faster. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12392019">HBASE-536</key>
            <summary>Remove MiniDFS startup from MiniHBaseCluster</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bryanduxbury">Bryan Duxbury</assignee>
                                    <reporter username="bryanduxbury">Bryan Duxbury</reporter>
                        <labels>
                    </labels>
                <created>Fri, 21 Mar 2008 00:09:44 +0000</created>
                <updated>Fri, 22 Aug 2008 21:13:12 +0000</updated>
                            <resolved>Mon, 24 Mar 2008 19:12:51 +0000</resolved>
                                                    <fixVersion>0.2.0</fixVersion>
                                    <component>test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12581224" author="bryanduxbury" created="Fri, 21 Mar 2008 23:58:49 +0000"  >&lt;p&gt;Here&apos;s a patch that reorders things somewhat. &lt;/p&gt;

&lt;p&gt;Of note is that HBaseClusterTestCase is much changed. Check out the *Setup methods to get a sense of how things work. MiniHBaseCluster has been left alone for the moment, but there&apos;s a parallel class called MiniHBaseCluster2 that works exactly the same way, except it lets HBaseClusterTestCase do the MiniDFS work. &lt;/p&gt;

&lt;p&gt;The plan is to remove the original MiniHBase and replace it with the version 2. The only thing that is holding me back at the moment is PerformanceEvaluation.java, which throws some weird error for me pertaining to MiniDFS trying to find its web apps. Every other test has been ported to correctly use HBaseTestCase instead of managing its own MiniDFS and MiniHBase. &lt;/p&gt;

&lt;p&gt;If someone could take a look at the problems with PE (when running with --miniCluster, of course), then we can commit this. &lt;/p&gt;</comment>
                            <comment id="12581607" author="stack" created="Mon, 24 Mar 2008 17:10:34 +0000"  >&lt;p&gt;What is happening here:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@@ -38,5 +38,8 @@
   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testMergeMeta() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
     assertNotNull(dfsCluster);
     HMerge.merge(conf, dfsCluster.getFileSystem(), HConstants.META_TABLE_NAME);
+    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
+      &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(10000);
+    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Why the wait without an assert that awatied condition actually occurred?&lt;/p&gt;

&lt;p&gt;Convention is that method names start with lower case letters: +  protected void HBaseClusterSetup() throws Exception {&lt;/p&gt;

&lt;p&gt;+1 on replacing MiniHBaseCluster(1) w/ version 2.&lt;/p&gt;

&lt;p&gt;Remove below&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-comment&quot;&gt;// /** {@inheritDoc} */
&lt;/span&gt;+  &lt;span class=&quot;code-comment&quot;&gt;// @Override
&lt;/span&gt;+  &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setUp() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
&lt;/span&gt;+  &lt;span class=&quot;code-comment&quot;&gt;//   &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.setUp();
&lt;/span&gt;+  &lt;span class=&quot;code-comment&quot;&gt;// }&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &apos;\n&apos;s in the log message are silly: +    LOG.debug(&quot;\n\n\n\n\t\t\tSetup Complete\n\n\n\n&quot;);  If we start to allow them, I see a degeneration adding bolding, blinking lights, etc., to make today&apos;s log message favorite the loudest&lt;/p&gt;

&lt;p&gt;I&apos;m going to take a look at PE exception now.&lt;/p&gt;</comment>
                            <comment id="12581608" author="stack" created="Mon, 24 Mar 2008 17:24:09 +0000"  >&lt;p&gt;Patch applies for me against TRUNK.&lt;/p&gt;

&lt;p&gt;How are you running PE?  Hadoop jar needs to come first in the CLASSPATH or complaint about not being able to find webapps.  Is that the exception you are seeing?  PE works for me if I do following: $ ./bin/hbase org.apache.hadoop.hbase.PerformanceEvaluation sequentialWrite 1 (After starting up cluster)&lt;/p&gt;

&lt;p&gt;Otherwise, go for it; apply the patch.&lt;/p&gt;</comment>
                            <comment id="12581613" author="bryanduxbury" created="Mon, 24 Mar 2008 17:30:33 +0000"  >&lt;p&gt;I&apos;ll make the suggested changes.&lt;/p&gt;

&lt;p&gt;Regarding PE, my particular problem was when running bin/hbase org.apache.hadoop.hbase.PerformanceEvaluation --miniCluster randomWrite 1. I presume that the --miniCluster part is what makes my attempt different.&lt;/p&gt;</comment>
                            <comment id="12581625" author="stack" created="Mon, 24 Mar 2008 17:58:38 +0000"  >&lt;p&gt;Patch to add to 536 patch that fixes the miniCluster flag on PE broken since we became a subproject&lt;/p&gt;</comment>
                            <comment id="12581644" author="bryanduxbury" created="Mon, 24 Mar 2008 19:12:51 +0000"  >&lt;p&gt;I just committed a version of this patch that incorporated stack&apos;s suggestions and hadoop-first patch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12378423" name="536.patch" size="65760" author="bryanduxbury" created="Fri, 21 Mar 2008 23:58:49 +0000"/>
                            <attachment id="12378497" name="hadoop_first.patch" size="1248" author="stack" created="Mon, 24 Mar 2008 17:58:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 24 Mar 2008 17:10:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31748</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 39 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h7wf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98542</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>