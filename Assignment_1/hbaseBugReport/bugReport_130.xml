<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:41:19 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-130/HBASE-130.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-130] hbase will split on row when the start and end row is the same cause data loss</title>
                <link>https://issues.apache.org/jira/browse/HBASE-130</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;While testing hbase splits with my code I was loading a table to become a inverted index on some links&lt;/p&gt;

&lt;p&gt;I was using the anchor text as the row key &lt;/p&gt;

&lt;p&gt;and the column parent:child as&lt;br/&gt;
url:(siteurl) and the data is the count of the links pointing to the siteurl with row key anchor text.&lt;/p&gt;

&lt;p&gt;but a lot of sites have image links and I use &quot;image&quot; as the anchor text for my testing code so there is a lot of image links. &lt;br/&gt;
I changed the max file size of hbase to 16mb for testing and have been able to recreate the same error.&lt;/p&gt;

&lt;p&gt;When the table get big it splits on the column image as the end key for one table and the start of the next table later it splits to where the start key and end key was image for one of the splits. After that it keep spiting the region with start key as &quot;image&quot; and the end key the same. So I have multi splits with start key and end key as &quot;image&quot; unless the master keeps track of the row key and partend:child data on the splits I do not thank all the data will get returned when querying it.&lt;/p&gt;

&lt;p&gt;I have attached a screen shot of my regions i thank there should be some logic to where if the start and end row key is the same the region does not split or we need to start keeping track of the start key, column data on the master of each split so we can know where each row is in the database.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12385255">HBASE-130</key>
            <summary>hbase will split on row when the start and end row is the same cause data loss</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="viper799">Billy Pearson</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 Dec 2007 19:19:12 +0000</created>
                <updated>Fri, 22 Aug 2008 21:34:50 +0000</updated>
                            <resolved>Wed, 16 Jan 2008 16:26:41 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12555126" author="bryanduxbury" created="Mon, 31 Dec 2007 19:04:25 +0000"  >&lt;p&gt;If I understand correctly, this problem only really manifests when the size of an individual row is bigger than the size of a region. Does that make sense? If so, a solution would be to check the row count of a region when splitting, and if it&apos;s 1, don&apos;t split. That way, you wouldn&apos;t end up with two regions with the same start/end info. &lt;/p&gt;</comment>
                            <comment id="12555133" author="jimk" created="Mon, 31 Dec 2007 20:16:38 +0000"  >&lt;p&gt;Even simpler, during the split when the midkey is computed, if it is the same as either the start key of the lower half or the end key of the upper half, don&apos;t split.&lt;/p&gt;</comment>
                            <comment id="12555134" author="viper799" created="Mon, 31 Dec 2007 20:27:25 +0000"  >&lt;p&gt;yes one of the two would work but something needed to keep it from spiting or the master needs to start keeping track of the column parent:child in the Meta so it can track the splits correctly.&lt;/p&gt;</comment>
                            <comment id="12558900" author="bryanduxbury" created="Tue, 15 Jan 2008 02:44:38 +0000"  >&lt;p&gt;This patch adds a new test, TestSplit2, that makes sure a region of all the same row key will not be split.&lt;/p&gt;</comment>
                            <comment id="12558901" author="bryanduxbury" created="Tue, 15 Jan 2008 02:44:59 +0000"  >&lt;p&gt;Passes locally, sending to Hudson.&lt;/p&gt;</comment>
                            <comment id="12559181" author="hadoopqa" created="Tue, 15 Jan 2008 19:14:00 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
&lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12373141/2493.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12373141/2493.patch&lt;/a&gt;&lt;br/&gt;
against trunk revision r612161.&lt;/p&gt;

&lt;p&gt;    @author +1.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    javadoc +1.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    javac +1.  The applied patch does not generate any new compiler warnings.&lt;/p&gt;

&lt;p&gt;    findbugs +1.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    core tests +1.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    contrib tests +1.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1598/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1598/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1598/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1598/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle results: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1598/artifact/trunk/build/test/checkstyle-errors.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1598/artifact/trunk/build/test/checkstyle-errors.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1598/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1598/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12559223" author="bryanduxbury" created="Tue, 15 Jan 2008 20:46:50 +0000"  >&lt;p&gt;Despite the fact that the tests pass, stack is right about the busted logic. I will fix that. I will also take the opportunity to convert that method to use the new MapFile.Reader getClosest (before) method to make the lookup more efficient.&lt;/p&gt;</comment>
                            <comment id="12559224" author="bryanduxbury" created="Tue, 15 Jan 2008 20:48:47 +0000"  >&lt;p&gt;I&apos;ve enacted the needed changes in this patch. Tests pass locally.&lt;/p&gt;</comment>
                            <comment id="12559225" author="bryanduxbury" created="Tue, 15 Jan 2008 20:49:07 +0000"  >&lt;p&gt;Back to Hudson.&lt;/p&gt;</comment>
                            <comment id="12559227" author="bryanduxbury" created="Tue, 15 Jan 2008 20:54:54 +0000"  >&lt;p&gt;Forgot to include my new TestSplit2 in the patch&lt;/p&gt;</comment>
                            <comment id="12559228" author="bryanduxbury" created="Tue, 15 Jan 2008 20:55:16 +0000"  >&lt;p&gt;Here&apos;s the forgotten test.&lt;/p&gt;</comment>
                            <comment id="12559229" author="bryanduxbury" created="Tue, 15 Jan 2008 20:55:32 +0000"  >&lt;p&gt;Trying Hudson.&lt;/p&gt;</comment>
                            <comment id="12559230" author="stack" created="Tue, 15 Jan 2008 20:56:30 +0000"  >&lt;p&gt;Patch is missing test. Otherwise +1.  Looks good.&lt;/p&gt;</comment>
                            <comment id="12559432" author="hadoopqa" created="Wed, 16 Jan 2008 10:35:31 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
&lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12373202/2493-v3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12373202/2493-v3.patch&lt;/a&gt;&lt;br/&gt;
against trunk revision r612314.&lt;/p&gt;

&lt;p&gt;    @author +1.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    javadoc +1.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    javac +1.  The applied patch does not generate any new compiler warnings.&lt;/p&gt;

&lt;p&gt;    findbugs +1.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    core tests +1.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    contrib tests +1.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1608/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1608/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1608/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1608/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle results: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1608/artifact/trunk/build/test/checkstyle-errors.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1608/artifact/trunk/build/test/checkstyle-errors.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1608/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://lucene.zones.apache.org:8080/hudson/job/Hadoop-Patch/1608/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12559559" author="stack" created="Wed, 16 Jan 2008 16:26:41 +0000"  >&lt;p&gt;Committed.  Thanks for the patch Bryan.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12373201" name="2493-v2.patch" size="2938" author="bryanduxbury" created="Tue, 15 Jan 2008 20:48:47 +0000"/>
                            <attachment id="12373202" name="2493-v3.patch" size="8652" author="bryanduxbury" created="Tue, 15 Jan 2008 20:55:14 +0000"/>
                            <attachment id="12373141" name="2493.patch" size="8833" author="bryanduxbury" created="Tue, 15 Jan 2008 02:44:37 +0000"/>
                            <attachment id="12372266" name="regions_shot.JPG" size="144934" author="viper799" created="Thu, 27 Dec 2007 19:20:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 31 Dec 2007 19:04:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24914</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 49 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h4nb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98015</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>