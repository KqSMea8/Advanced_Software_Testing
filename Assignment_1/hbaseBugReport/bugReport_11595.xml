<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:24:44 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-11595/HBASE-11595.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-11595] WAL files with encryption not flushed properly</title>
                <link>https://issues.apache.org/jira/browse/HBASE-11595</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Reported using HBase 0.98.3 and HDFS 2.4.1&lt;/p&gt;

&lt;p&gt;All data before failure has not yet been flushed so only exists in the WAL files. During distributed splitting, the WAL has either not been written out and synced in the same way as an unencrypted WAL or is unreadable:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2014-07-26 19:29:16,160 ERROR [RS_LOG_REPLAY_OPS-host1:60020-0] codec.BaseDecoder: Partial cell read caused by EOF: java.io.IOException: Premature EOF from inputStream
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This file is still moved to oldWALs even though splitting failed. &lt;/p&gt;

&lt;p&gt;Setting &apos;hbase.regionserver.wal.encryption&apos; to false allows data recovery.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12730038">HBASE-11595</key>
            <summary>WAL files with encryption not flushed properly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="apurtell">Andrew Purtell</reporter>
                        <labels>
                    </labels>
                <created>Sat, 26 Jul 2014 15:52:52 +0000</created>
                <updated>Tue, 29 Jul 2014 02:40:36 +0000</updated>
                            <resolved>Tue, 29 Jul 2014 02:39:14 +0000</resolved>
                                    <version>0.98.3</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="14075441" author="apurtell" created="Sat, 26 Jul 2014 17:45:39 +0000"  >&lt;p&gt;My attempt to reproduce this issue:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Set up Hadoop 2.4.1 namenode, secondarynamenode, and datanode on a dev box.&lt;/li&gt;
	&lt;li&gt;Set up HBase 0.98.5-SNAPSHOT hosted zk, master, and regionserver also on this dev box. Set dfs.replication and hbase.regionserver.hlog.tolerable.lowreplication to 1. Set up a keystore and enabled  WAL encryption.&lt;/li&gt;
	&lt;li&gt;Created a test table.&lt;/li&gt;
	&lt;li&gt;Used YCSB to write 1000 rows to the test table. No flushes observed.&lt;/li&gt;
	&lt;li&gt;Used the shell to count the number of records in the test table. Count = 1000 rows&lt;/li&gt;
	&lt;li&gt;kill -9 the regionserver process.&lt;/li&gt;
	&lt;li&gt;Started a new regionserver process. Observed log splitting and replay in the regionserver log, no errors.&lt;/li&gt;
	&lt;li&gt;Used the shell to count the number of records in the test table. Count = 1000 rows&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="14075450" author="apurtell" created="Sat, 26 Jul 2014 18:06:16 +0000"  >&lt;p&gt;Tried the above procedure a few times. Not able to reproduce. Replied to the reporter on user@hbase with a request to run through the above and provide more information. &lt;/p&gt;</comment>
                            <comment id="14077312" author="apurtell" created="Tue, 29 Jul 2014 02:40:36 +0000"  >&lt;p&gt;Further discussion on dev@ revealed the reporter changed the WAL reader class in the site configuration back to default between crash and restart. Therefore, the encrypted WAL could not be read. There might still be an issue here with a &quot;corrupt&quot; WAL being improperly moved to oldWALs/ but let&apos;s follow up on another issue. Resolving as invalid.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>408111</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 20 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1y833:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>408117</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>