<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:33:08 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6028/HBASE-6028.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6028] Implement a cancel for in-progress compactions</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6028</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Depending on current server load, it can be extremely expensive to run periodic minor / major compactions.  It would be helpful to have a feature where a user could use the shell or a client tool to explicitly cancel an in-progress compactions.  This would allow a system to recover when too many regions became eligible for compactions at once&lt;/p&gt;</description>
                <environment></environment>
        <key id="12556167">HBASE-6028</key>
            <summary>Implement a cancel for in-progress compactions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="esteban">Esteban Gutierrez</assignee>
                                    <reporter username="dwollen">Derek Wollenstein</reporter>
                        <labels>
                            <label>beginner</label>
                    </labels>
                <created>Thu, 17 May 2012 01:59:09 +0000</created>
                <updated>Wed, 14 Sep 2016 08:10:00 +0000</updated>
                                                                            <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>14</watches>
                                                                <comments>
                            <comment id="13277584" author="stack" created="Thu, 17 May 2012 05:28:30 +0000"  >&lt;p&gt;IIRC, there already is a cancel facility that is used on region close; if an ongoing compaction, its interrupted.  If such is the case, this issue would hopefully just be about exposing this functionality in hbase admin (Sorry D, should have remembered today that we do this).&lt;/p&gt;</comment>
                            <comment id="13279277" author="dwollen" created="Fri, 18 May 2012 22:45:32 +0000"  >&lt;p&gt;@Stack &amp;#8211; &lt;br/&gt;
   I just looked at the current version &amp;#8211; it looks like the current check for this is in StoreFile.Writer.compactStore(final Collection&amp;lt;StoreFile&amp;gt; filesToCompact,&lt;br/&gt;
                               final boolean majorCompaction, final long maxId).&lt;/p&gt;

&lt;p&gt;              // check periodically to see if a system stop is requested&lt;br/&gt;
              if (Store.closeCheckInterval &amp;gt; 0) {&lt;br/&gt;
                bytesWritten += kv.getLength();&lt;br/&gt;
                if (bytesWritten &amp;gt; Store.closeCheckInterval) {&lt;br/&gt;
                  bytesWritten = 0;&lt;br/&gt;
                  if (!this.region.areWritesEnabled()) &lt;/p&gt;
{
                    writer.close();
                    fs.delete(writer.getPath(), false);
                    throw new InterruptedIOException(
                        &quot;Aborting compaction of store &quot; + this +
                        &quot; in region &quot; + this.region +
                        &quot; because user requested stop.&quot;);
                  }
&lt;p&gt;                }&lt;br/&gt;
              }&lt;/p&gt;

&lt;p&gt;So we could go ahead and actually put an explicit &quot;compactions enabled&quot; feature.  This would also help if I wanted to later on add a feature to put in a time window for compactions.&lt;/p&gt;</comment>
                            <comment id="13294619" author="nspiegelberg" created="Wed, 13 Jun 2012 18:57:11 +0000"  >&lt;p&gt;this should be trivial to implement.  just remember that canceling a compaction also requires manually freeing the files under compaction.&lt;/p&gt;</comment>
                            <comment id="14072212" author="esteban" created="Wed, 23 Jul 2014 19:39:42 +0000"  >&lt;p&gt;I will to take this one, we ran into an issue when a customer accidentally triggered a major compaction and that impacted the performance during regular business hours. &lt;/p&gt;</comment>
                            <comment id="14206039" author="syuanjiang" created="Tue, 11 Nov 2014 06:43:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=esteban&quot; class=&quot;user-hover&quot; rel=&quot;esteban&quot;&gt;Esteban Gutierrez&lt;/a&gt; are you actively working on this?  If not, I can take over the investigation.&lt;/p&gt;</comment>
                            <comment id="14206048" author="esteban" created="Tue, 11 Nov 2014 06:57:02 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=syuanjiang&quot; class=&quot;user-hover&quot; rel=&quot;syuanjiang&quot;&gt;Stephen Yuan Jiang&lt;/a&gt;, yes I&apos;m working on this I have a prototype for trunk and only needs some clean up and expose this functionality via the hbase shell.&lt;/p&gt;</comment>
                            <comment id="14617698" author="ishanc" created="Wed, 8 Jul 2015 00:08:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=esteban&quot; class=&quot;user-hover&quot; rel=&quot;esteban&quot;&gt;Esteban Gutierrez&lt;/a&gt;, are you working on this?&lt;/p&gt;</comment>
                            <comment id="14730078" author="ndimiduk" created="Fri, 4 Sep 2015 00:11:08 +0000"  >&lt;p&gt;I think having a way to interrupt active compactions would allow implementing a reasonable short-term solution to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11368&quot; title=&quot;Multi-column family BulkLoad fails if compactions go on too long&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11368&quot;&gt;&lt;del&gt;HBASE-11368&lt;/del&gt;&lt;/a&gt;. Any chance you have a patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=esteban&quot; class=&quot;user-hover&quot; rel=&quot;esteban&quot;&gt;Esteban Gutierrez&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="15489762" author="harisekhon" created="Wed, 14 Sep 2016 08:10:00 +0000"  >&lt;p&gt;I&apos;m on site with a client that also wants this ability to cancel compactions, any chance this will get resolved soon?&lt;/p&gt;

&lt;p&gt;If there is something in the API (and preferably also exposed in the HBase Shell) to allow it a &apos;cancel_compaction&apos; command then that would be really, really useful.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 17 May 2012 05:28:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>241758</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02cdz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11608</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>beginner</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>