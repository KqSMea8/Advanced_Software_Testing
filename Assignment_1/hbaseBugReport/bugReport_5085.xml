<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:24:38 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5085/HBASE-5085.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5085] fix test-patch script from setting the ulimit</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5085</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;test-patch.sh script sets the ulimit -n 1024 just after triggering the patch setting this overrides the underlying systems ulimit and hence failing the hbase tests.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12536088">HBASE-5085</key>
            <summary>fix test-patch script from setting the ulimit</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gkesavan">Giridharan Kesavan</assignee>
                                    <reporter username="gkesavan">Giridharan Kesavan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Dec 2011 21:32:24 +0000</created>
                <updated>Fri, 12 Oct 2012 05:35:06 +0000</updated>
                            <resolved>Thu, 22 Dec 2011 21:52:57 +0000</resolved>
                                                    <fixVersion>0.94.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13174426" author="gkesavan" created="Wed, 21 Dec 2011 21:35:04 +0000"  >&lt;p&gt;patch removes the ulimit setting in the test-patch script&lt;/p&gt;</comment>
                            <comment id="13174431" author="zhihyu@ebaysf.com" created="Wed, 21 Dec 2011 21:40:22 +0000"  >&lt;p&gt;+1 on patch.&lt;br/&gt;
Let&apos;s see what result Hadoop QA would give us based on this patch.&lt;/p&gt;</comment>
                            <comment id="13174457" author="nkeywal" created="Wed, 21 Dec 2011 22:13:55 +0000"  >&lt;p&gt;Would it be possible to change &quot;max user processes (-u) 2048&quot; as well? This limit is used for java native threads as well, and HBase uses a lot of them.&lt;/p&gt;</comment>
                            <comment id="13174516" author="hadoopqa" created="Thu, 22 Dec 2011 00:04:59 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12508303/hbase-5085.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12508303/hbase-5085.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -152 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 76 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestInstantSchemaChange&lt;br/&gt;
                  org.apache.hadoop.hbase.mapred.TestTableMapReduce&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/574//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/574//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/574//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/574//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/574//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/574//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13174526" author="stack" created="Thu, 22 Dec 2011 00:27:13 +0000"  >&lt;p&gt;Experiment.... try setting the ulimits higher in script in the runTest method&lt;/p&gt;</comment>
                            <comment id="13174583" author="hadoopqa" created="Thu, 22 Dec 2011 02:50:14 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12508326/5085-v2-experiment.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12508326/5085-v2-experiment.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -152 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 76 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.mapred.TestTableMapReduce&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/576//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/576//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/576//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/576//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/576//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/576//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13174632" author="stack" created="Thu, 22 Dec 2011 05:49:51 +0000"  >&lt;p&gt;The previous run did not use my patch.  Retrying.&lt;/p&gt;</comment>
                            <comment id="13174638" author="zhihyu@ebaysf.com" created="Thu, 22 Dec 2011 06:06:23 +0000"  >&lt;p&gt;Looking at &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/579/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/579/console&lt;/a&gt;, it seems patch v3 wasn&apos;t effective either.&lt;/p&gt;

&lt;p&gt;We should check in either v2 or v3 and observe other PreCommit builds.&lt;/p&gt;</comment>
                            <comment id="13174649" author="stack" created="Thu, 22 Dec 2011 06:38:14 +0000"  >&lt;p&gt;Good idea.  I checked in 5085-v3-experiment.txt.  Let me retrigger this hadoop-qa build and see if it does anything.&lt;/p&gt;</comment>
                            <comment id="13174650" author="stack" created="Thu, 22 Dec 2011 06:38:52 +0000"  >&lt;p&gt;This v3 is same as old v3.&lt;/p&gt;</comment>
                            <comment id="13174677" author="hadoopqa" created="Thu, 22 Dec 2011 07:46:29 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12508348/5085-v3-experiment.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12508348/5085-v3-experiment.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -152 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 76 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestInstantSchemaChange&lt;br/&gt;
                  org.apache.hadoop.hbase.regionserver.wal.TestLogRolling&lt;br/&gt;
                  org.apache.hadoop.hbase.mapred.TestTableMapReduce&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/579//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/579//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/579//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/579//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/579//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/579//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13174822" author="hudson" created="Thu, 22 Dec 2011 14:31:02 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2568 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2568/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2568/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5085&quot; title=&quot;fix test-patch script from setting the ulimit&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5085&quot;&gt;&lt;del&gt;HBASE-5085&lt;/del&gt;&lt;/a&gt; fix test-patch script from setting the ulimit &amp;#8211; EXPERIMENT&lt;/p&gt;

&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/dev-support/test-patch.sh&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13174828" author="stack" created="Thu, 22 Dec 2011 14:49:05 +0000"  >&lt;p&gt;So, my script changes have still not been noticed.  Maybe the script has to be checked out by Giri for changes to take effect.&lt;/p&gt;</comment>
                            <comment id="13174932" author="gkesavan" created="Thu, 22 Dec 2011 18:00:43 +0000"  >&lt;p&gt;this patch cannot be submitted to test-patch as we are patching test-patch script itself. Only option is to review and commit or manually run the test-patch after applying the patch.&lt;/p&gt;</comment>
                            <comment id="13174941" author="zhihyu@ebaysf.com" created="Thu, 22 Dec 2011 18:12:17 +0000"  >&lt;p&gt;I suggest adding call to whoami or id in test-patch.sh so that we can know the effective user running the tests.&lt;/p&gt;</comment>
                            <comment id="13174960" author="gkesavan" created="Thu, 22 Dec 2011 18:39:03 +0000"  >&lt;p&gt;The effective user is jenkins as the jenkins slave is launched to run as jenkins user. This should not matter much b&apos;coz the ulimit is set to all the users system wide except root. Also Im very sure that the system wide ulimit would come into effect when we remove the override set in the test-patch.sh. (which is my initial patch). &lt;/p&gt;</comment>
                            <comment id="13175005" author="stack" created="Thu, 22 Dec 2011 19:44:17 +0000"  >&lt;p&gt;I applied the patch last night but it seems to have no effect when this issue was submitted to hadoop-qa again (I&apos;ll retry just to be sure to be sure).&lt;/p&gt;</comment>
                            <comment id="13175006" author="stack" created="Thu, 22 Dec 2011 19:45:48 +0000"  >&lt;p&gt;v4 is same as v3&lt;/p&gt;</comment>
                            <comment id="13175011" author="hadoopqa" created="Thu, 22 Dec 2011 19:53:26 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12508423/5085-v4-experiment.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12508423/5085-v4-experiment.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/581//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/581//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13175093" author="stack" created="Thu, 22 Dec 2011 21:51:57 +0000"  >&lt;p&gt;It looks like my committing of patch last night did the trick.  My patch had Giri&apos;s removal of setting the ulimit down to 1024 for open files.  Giri says he just upped the max processes per user to 10240 on all hadoop-qa machines.  This patch cleans the &apos;experimental&apos; part of last nights patch.  I committed it to trunk.&lt;/p&gt;</comment>
                            <comment id="13175095" author="stack" created="Thu, 22 Dec 2011 21:52:57 +0000"  >&lt;p&gt;Closing.  In console for hadoop-qa can see that file descriptors are indeed now at 60k rather than at 1024.  If max processes is not north of 2k, will go bug Giri offline again.&lt;/p&gt;</comment>
                            <comment id="13175374" author="nkeywal" created="Fri, 23 Dec 2011 10:46:52 +0000"  >&lt;p&gt;On prebuild #584, we have:&lt;br/&gt;
open files                      (-n) 60000&lt;br/&gt;
max user processes              (-u) 10240&lt;br/&gt;
This should be ok, trying immediately.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12508326" name="5085-v2-experiment.txt" size="896" author="stack" created="Thu, 22 Dec 2011 00:29:22 +0000"/>
                            <attachment id="12508324" name="5085-v2-experiment.txt" size="756" author="stack" created="Thu, 22 Dec 2011 00:27:13 +0000"/>
                            <attachment id="12508349" name="5085-v3-experiment.txt" size="896" author="stack" created="Thu, 22 Dec 2011 06:38:52 +0000"/>
                            <attachment id="12508348" name="5085-v3-experiment.txt" size="896" author="stack" created="Thu, 22 Dec 2011 05:49:51 +0000"/>
                            <attachment id="12508423" name="5085-v4-experiment.txt" size="896" author="stack" created="Thu, 22 Dec 2011 19:45:48 +0000"/>
                            <attachment id="12508453" name="5085-v5.txt" size="880" author="stack" created="Thu, 22 Dec 2011 21:51:57 +0000"/>
                            <attachment id="12508303" name="hbase-5085.patch" size="499" author="gkesavan" created="Wed, 21 Dec 2011 21:35:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 21 Dec 2011 21:40:22 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>221771</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i069uf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34526</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>