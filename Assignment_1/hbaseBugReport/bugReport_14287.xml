<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:51:35 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-14287/HBASE-14287.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-14287] Bootstrapping a cluster leaves temporary WAL directory laying around</title>
                <link>https://issues.apache.org/jira/browse/HBASE-14287</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;When a new cluster is started, it creates a temporary WAL as &lt;tt&gt;hbase:meta&lt;/tt&gt; is created during bootstrapping the system. Then this log is closed before properly opened on a region server. The temp WAL file is scheduled for removal, moved to oldWALs and eventually claimed. Issue is that the WAL directory with the temp region is not removed. For example:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;drwxr-xr-x   - hadoop hadoop          0 2015-05-28 10:21 /hbase/WALs/hregion-65589555
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The directory is empty and does not harm, but on the other hand it is not needed anymore and should be removed. Cosmetic and good housekeeping.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12857948">HBASE-14287</key>
            <summary>Bootstrapping a cluster leaves temporary WAL directory laying around</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yuzhihong@gmail.com">Ted Yu</assignee>
                                    <reporter username="larsgeorge">Lars George</reporter>
                        <labels>
                    </labels>
                <created>Fri, 21 Aug 2015 19:29:33 +0000</created>
                <updated>Wed, 27 Jan 2016 15:28:47 +0000</updated>
                            <resolved>Tue, 15 Sep 2015 23:49:42 +0000</resolved>
                                    <version>1.0.2</version>
                    <version>1.1.1</version>
                                    <fixVersion>1.2.0</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                    <fixVersion>1.0.3</fixVersion>
                    <fixVersion>1.1.3</fixVersion>
                                    <component>master</component>
                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="14732132" author="jinghe" created="Sat, 5 Sep 2015 22:54:48 +0000"  >&lt;p&gt;I have seen the same problem on HBase 1.1.1.  Strangely, there was an issue that fixed the problem.&lt;/p&gt;</comment>
                            <comment id="14732134" author="jinghe" created="Sat, 5 Sep 2015 23:03:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11982&quot; title=&quot;Bootstraping hbase:meta table creates a WAL file in region dir&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11982&quot;&gt;&lt;del&gt;HBASE-11982&lt;/del&gt;&lt;/a&gt;, a regression?&lt;/p&gt;</comment>
                            <comment id="14742411" author="larsgeorge" created="Sun, 13 Sep 2015 09:01:49 +0000"  >&lt;p&gt;Indeed! &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12204&quot; title=&quot;Backport HBASE-12016 &amp;#39;Reduce number of versions in Meta table. Make it configurable&amp;#39; to branch-1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12204&quot;&gt;&lt;del&gt;HBASE-12204&lt;/del&gt;&lt;/a&gt; misses the updated line from &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11982&quot; title=&quot;Bootstraping hbase:meta table creates a WAL file in region dir&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11982&quot;&gt;&lt;del&gt;HBASE-11982&lt;/del&gt;&lt;/a&gt; and reverts it back. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu&quot; class=&quot;user-hover&quot; rel=&quot;tedyu&quot;&gt;Ted Yu&lt;/a&gt; mind to fix this with an addendum?&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;-      setInfoFamilyCachingForMeta(false);
-      HRegion meta = HRegion.createHRegion(metaHRI, rd, c,
-          HTableDescriptor.META_TABLEDESC, null, true, true);
-      setInfoFamilyCachingForMeta(true);
+      HTableDescriptor metaDescriptor = new FSTableDescriptors(c).get(TableName.META_TABLE_NAME);
+      setInfoFamilyCachingForMeta(metaDescriptor, false);
+      HRegion meta = HRegion.createHRegion(metaHRI, rd, c, metaDescriptor);
+      setInfoFamilyCachingForMeta(metaDescriptor, true)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14742414" author="larsgeorge" created="Sun, 13 Sep 2015 09:06:01 +0000"  >&lt;p&gt;For quick reference, the missing change is this:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;       HRegion meta = HRegion.createHRegion(metaHRI, rd, c,
-          HTableDescriptor.META_TABLEDESC);
+          HTableDescriptor.META_TABLEDESC, null, true, true);
       setInfoFamilyCachingForMeta(true);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So the patch should be something like this:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;diff --git a/hbase-server/src/main/java/org/apache/hadoop/hbase/master/MasterFileSystem.java b/hbase-server/src/main/java/org/apache/hadoop/hbase/master/MasterFileSystem.java
index bcf9ba0..e8b26e6 100644
--- a/hbase-server/src/main/java/org/apache/hadoop/hbase/master/MasterFileSystem.java
+++ b/hbase-server/src/main/java/org/apache/hadoop/hbase/master/MasterFileSystem.java
@@ -537,7 +537,8 @@ public class MasterFileSystem {
       HRegionInfo metaHRI = new HRegionInfo(HRegionInfo.FIRST_META_REGIONINFO);
       HTableDescriptor metaDescriptor = new FSTableDescriptors(c).get(TableName.META_TABLE_NAME);
       setInfoFamilyCachingForMeta(metaDescriptor, false);
-      HRegion meta = HRegion.createHRegion(metaHRI, rd, c, metaDescriptor);
+      HRegion meta = HRegion.createHRegion(metaHRI, rd, c, metaDescriptor,
+        null, true, true);
       setInfoFamilyCachingForMeta(metaDescriptor, true);
       HRegion.closeHRegion(meta);
     } catch (IOException e) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14742539" author="hudson" created="Sun, 13 Sep 2015 16:38:23 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.2-IT #141 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2-IT/141/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2-IT/141/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14287&quot; title=&quot;Bootstrapping a cluster leaves temporary WAL directory laying around&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14287&quot;&gt;&lt;del&gt;HBASE-14287&lt;/del&gt;&lt;/a&gt; Bootstrapping a cluster leaves temporary WAL directory laying around (tedyu: rev 5c9631944dd5c90fa4a760eb98428c7546493542)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/MasterFileSystem.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14742547" author="hadoopqa" created="Sun, 13 Sep 2015 16:54:27 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12755601/14287-branch-1.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12755601/14287-branch-1.txt&lt;/a&gt;&lt;br/&gt;
  against branch-1 branch at commit a9157379a3046a9d4c377675c932257c4ecb6597.&lt;br/&gt;
  ATTACHMENT ID: 12755601&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15577//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15577//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15577//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15577//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15577//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15577//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15577//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15577//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14742556" author="hudson" created="Sun, 13 Sep 2015 17:14:21 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.3-IT #150 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3-IT/150/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3-IT/150/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14287&quot; title=&quot;Bootstrapping a cluster leaves temporary WAL directory laying around&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14287&quot;&gt;&lt;del&gt;HBASE-14287&lt;/del&gt;&lt;/a&gt; Bootstrapping a cluster leaves temporary WAL directory laying around (tedyu: rev d98ea9bb4e43f587f7e273555ae772c73fa38621)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/MasterFileSystem.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14742585" author="hudson" created="Sun, 13 Sep 2015 18:01:45 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.0 #1047 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/1047/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.0/1047/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14287&quot; title=&quot;Bootstrapping a cluster leaves temporary WAL directory laying around&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14287&quot;&gt;&lt;del&gt;HBASE-14287&lt;/del&gt;&lt;/a&gt; Bootstrapping a cluster leaves temporary WAL directory laying around (tedyu: rev f67e771dc8b47128df50b203ae1afd01f97b515c)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/MasterFileSystem.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14742595" author="hudson" created="Sun, 13 Sep 2015 18:27:53 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.2 #166 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2/166/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2/166/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14287&quot; title=&quot;Bootstrapping a cluster leaves temporary WAL directory laying around&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14287&quot;&gt;&lt;del&gt;HBASE-14287&lt;/del&gt;&lt;/a&gt; Bootstrapping a cluster leaves temporary WAL directory laying around (tedyu: rev 5c9631944dd5c90fa4a760eb98428c7546493542)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/MasterFileSystem.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14742598" author="hudson" created="Sun, 13 Sep 2015 18:36:28 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.1 #658 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.1/658/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.1/658/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14287&quot; title=&quot;Bootstrapping a cluster leaves temporary WAL directory laying around&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14287&quot;&gt;&lt;del&gt;HBASE-14287&lt;/del&gt;&lt;/a&gt; Bootstrapping a cluster leaves temporary WAL directory laying around (tedyu: rev a5ba35084f70a128d6eae0479705b8ba83043042)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/MasterFileSystem.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14742625" author="hudson" created="Sun, 13 Sep 2015 19:59:55 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.3 #169 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3/169/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3/169/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14287&quot; title=&quot;Bootstrapping a cluster leaves temporary WAL directory laying around&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14287&quot;&gt;&lt;del&gt;HBASE-14287&lt;/del&gt;&lt;/a&gt; Bootstrapping a cluster leaves temporary WAL directory laying around (tedyu: rev d98ea9bb4e43f587f7e273555ae772c73fa38621)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/master/MasterFileSystem.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15119540" author="ndimiduk" created="Wed, 27 Jan 2016 15:28:47 +0000"  >&lt;p&gt;Bulk closing 1.1.3 issues.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12741661">HBASE-11982</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12755601" name="14287-branch-1.txt" size="964" author="yuzhihong@gmail.com" created="Sun, 13 Sep 2015 14:13:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 5 Sep 2015 22:54:48 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            46 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2j87b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>