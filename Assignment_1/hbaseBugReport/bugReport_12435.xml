<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:33:01 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-12435/HBASE-12435.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-12435] The exists method on the HTable-class changes the passed-in Get-instance</title>
                <link>https://issues.apache.org/jira/browse/HBASE-12435</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Running an HTable.get right after using HTable.exists using the same instance of a Get-object yields no results.&lt;/p&gt;

&lt;p&gt;Up on inspection of the code we found that the HTable.exists changes the passed-in Get-object. It changes the property &apos;checkExistenceOnly&apos; to true which makes the passed-in Get-object useless for subsequent HTable.get calls.&lt;/p&gt;

&lt;p&gt;My suggestion is either:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;indicate this behaviour in the documentation/javadoc&lt;/li&gt;
	&lt;li&gt;store the old value of the &apos;checkExistenceOnly&apos; and restore it using try-finally.&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment>&lt;p&gt;Cloudera Hadoop HBase 5.2.0: 0.98.6.?&lt;/p&gt;</environment>
        <key id="12753326">HBASE-12435</key>
            <summary>The exists method on the HTable-class changes the passed-in Get-instance</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="gkephorus">GK Ephorus</reporter>
                        <labels>
                            <label>easyfix</label>
                    </labels>
                <created>Thu, 6 Nov 2014 07:46:38 +0000</created>
                <updated>Thu, 6 Nov 2014 11:43:04 +0000</updated>
                                            <version>0.98.6.1</version>
                                                    <component>Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14199965" author="anoop.hbase" created="Thu, 6 Nov 2014 07:54:57 +0000"  >&lt;p&gt;The user passed Get object to exist() method can be cloned and used.  We do same for Scan object. You want to give a patch?&lt;/p&gt;</comment>
                            <comment id="14200020" author="gkephorus" created="Thu, 6 Nov 2014 09:23:16 +0000"  >&lt;p&gt;Can you point me to the cloning of the Scan object? How would this work in case of the batch?&lt;/p&gt;

&lt;p&gt;Or better still: add a real exists-call to the protocol. This gives you a &apos;clone&apos; automatically.&lt;/p&gt;

&lt;p&gt;The quick-and-dirty fix would be to add the try-finally to both exists-calls and restore the old value(s) of checkExistenceOnly. I&apos;d be happy to provide a patch for that.&lt;/p&gt;</comment>
                            <comment id="14200041" author="anoop.hbase" created="Thu, 6 Nov 2014 09:58:22 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; exists(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Get get) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    get.setCheckExistenceOnly(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
    Result r = get(get);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Here before set clone the passed in Get object and set on the clonned object and use that. Same way in other bulk API as well.&lt;br/&gt;
See the constructor public Get(Get get) {&lt;/p&gt;</comment>
                            <comment id="14200097" author="gkephorus" created="Thu, 6 Nov 2014 11:41:58 +0000"  >&lt;p&gt;Store the old value of the checkExistenceOnly-property and restore after the call in a finally.&lt;/p&gt;</comment>
                            <comment id="14200098" author="gkephorus" created="Thu, 6 Nov 2014 11:43:04 +0000"  >&lt;p&gt;The cloning is not really deep. And if it was deep, it would be slow/expensive. I attached a patch to store and restore the old value of the checkExistenceOnly-property.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12679829" name="HBASE-12435.take-1.patch" size="2432" author="gkephorus" created="Thu, 6 Nov 2014 11:41:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 6 Nov 2014 07:54:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10342"><![CDATA[Incompatible change]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 6 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i221nj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>