<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:21:21 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-11234/HBASE-11234.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-11234] FastDiffDeltaEncoder#getFirstKeyInBlock returns wrong result</title>
                <link>https://issues.apache.org/jira/browse/HBASE-11234</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;As Ted found, &lt;/p&gt;

&lt;p&gt;With this change:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Index: hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestReversibleScanners.java
===================================================================
--- hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestReversibleScanners.java	(revision 1596579)
+++ hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestReversibleScanners.java	(working copy)
@@ -51,6 +51,7 @@
 import org.apache.hadoop.hbase.filter.FilterList.Operator;
 import org.apache.hadoop.hbase.filter.PageFilter;
 import org.apache.hadoop.hbase.filter.SingleColumnValueFilter;
+import org.apache.hadoop.hbase.io.encoding.DataBlockEncoding;
 import org.apache.hadoop.hbase.io.hfile.CacheConfig;
 import org.apache.hadoop.hbase.io.hfile.HFileContext;
 import org.apache.hadoop.hbase.io.hfile.HFileContextBuilder;
@@ -90,6 +91,7 @@
     CacheConfig cacheConf = new CacheConfig(TEST_UTIL.getConfiguration());
     HFileContextBuilder hcBuilder = new HFileContextBuilder();
     hcBuilder.withBlockSize(2 * 1024);
+    hcBuilder.withDataBlockEncoding(DataBlockEncoding.FAST_DIFF);
     HFileContext hFileContext = hcBuilder.build();
     StoreFile.Writer writer = new StoreFile.WriterBuilder(
         TEST_UTIL.getConfiguration(), cacheConf, fs).withOutputDir(
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I got:&lt;/p&gt;

&lt;p&gt;java.lang.AssertionError: expected:&amp;lt;testRow0197/testCf:testQual0000/1400712260004/Put/vlen=13/mvcc=5&amp;gt; but was:&amp;lt;testRow0198/testCf:testQual0000/1400712260004/   Put/vlen=13/mvcc=0&amp;gt;&lt;br/&gt;
  at org.junit.Assert.fail(Assert.java:88)&lt;br/&gt;
  at org.junit.Assert.failNotEquals(Assert.java:743)&lt;br/&gt;
  at org.junit.Assert.assertEquals(Assert.java:118)&lt;br/&gt;
  at org.junit.Assert.assertEquals(Assert.java:144)&lt;br/&gt;
  at org.apache.hadoop.hbase.regionserver.TestReversibleScanners.seekTestOfReversibleKeyValueScanner(TestReversibleScanners.java:533)&lt;br/&gt;
  at org.apache.hadoop.hbase.regionserver.TestReversibleScanners.testReversibleStoreFileScanner(TestReversibleScanners.java:108)&lt;/p&gt;



&lt;p&gt;After debugging, it seems the method of FastDiffDeltaEncoder#getFirstKeyInBlock become broken. And it will cause hfilescanner#seekBefore returns wrong result.&lt;/p&gt;


&lt;p&gt;The solution is simple, see the patch.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12715944">HBASE-11234</key>
            <summary>FastDiffDeltaEncoder#getFirstKeyInBlock returns wrong result</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zjushch">chunhui shen</assignee>
                                    <reporter username="zjushch">chunhui shen</reporter>
                        <labels>
                    </labels>
                <created>Thu, 22 May 2014 08:48:02 +0000</created>
                <updated>Fri, 11 Jul 2014 06:26:07 +0000</updated>
                            <resolved>Tue, 27 May 2014 14:52:15 +0000</resolved>
                                                    <fixVersion>0.99.0</fixVersion>
                    <fixVersion>0.96.3</fixVersion>
                    <fixVersion>0.98.3</fixVersion>
                    <fixVersion>0.94.21</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>11</watches>
                                                                <comments>
                            <comment id="14005734" author="ram_krish" created="Thu, 22 May 2014 08:52:04 +0000"  >&lt;p&gt;Patch looks good to me.&lt;/p&gt;</comment>
                            <comment id="14005748" author="anoop.hbase" created="Thu, 22 May 2014 09:04:07 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14006065" author="hadoopqa" created="Thu, 22 May 2014 16:04:00 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12646203/HBASE-11234.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12646203/HBASE-11234.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12646203&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestHCM&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9566//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9566//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9566//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9566//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9566//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9566//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9566//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9566//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9566//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9566//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9566//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9566//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9566//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9566//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9566//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9566//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9566//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9566//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9566//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9566//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9566//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9566//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14006144" author="apurtell" created="Thu, 22 May 2014 17:12:08 +0000"  >&lt;p&gt;+1 for 0.98&lt;/p&gt;</comment>
                            <comment id="14006840" author="zjushch" created="Fri, 23 May 2014 05:54:40 +0000"  >&lt;p&gt;Committed to trunk and 0.98&lt;/p&gt;</comment>
                            <comment id="14006909" author="anoop.hbase" created="Fri, 23 May 2014 06:31:37 +0000"  >&lt;p&gt;Consider committing to 0.94 and 0.96 too?  (Even if reverse scan is not there, the problematic code is present)&lt;/p&gt;</comment>
                            <comment id="14006926" author="zjushch" created="Fri, 23 May 2014 06:49:54 +0000"  >&lt;p&gt;Committed to 0.96 and 0.94 also&lt;/p&gt;</comment>
                            <comment id="14006927" author="lhofhansl" created="Fri, 23 May 2014 06:51:43 +0000"  >&lt;p&gt;It goes without saying that this should be fixed in 0.94 as well, as it is clearly a bug lurking.&lt;/p&gt;</comment>
                            <comment id="14007021" author="mbertozzi" created="Fri, 23 May 2014 10:14:21 +0000"  >&lt;p&gt;In 98 TestReversibleScanners seems to always fail&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$ mvn clean test -Dtest=TestReversibleScanners
Running org.apache.hadoop.hbase.regionserver.TestReversibleScanners
Tests run: 5, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 3.679 sec &amp;lt;&amp;lt;&amp;lt; FAILURE!

Results :
Failed tests:   testReversibleStoreFileScanner(org.apache.hadoop.hbase.regionserver.TestReversibleScanners): expected:&amp;lt;testRow0198/testCf:testQual0003/1400839977912/Put/vlen=13/mvcc=1&amp;gt; but was:&amp;lt;testRow0198/testCf:testQual0004/1400839977912/Put/vlen=13/mvcc=0&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14007123" author="hudson" created="Fri, 23 May 2014 12:51:31 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #5138 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/5138/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/5138/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11234&quot; title=&quot;FastDiffDeltaEncoder#getFirstKeyInBlock returns wrong result&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11234&quot;&gt;&lt;del&gt;HBASE-11234&lt;/del&gt;&lt;/a&gt; FastDiffDeltaEncoder#getFirstKeyInBlock returns wrong result (zjusch: rev edae564856b8aefbede64fd3eb73c30aba30372a)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/io/encoding/FastDiffDeltaEncoder.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/io/encoding/PrefixKeyDeltaEncoder.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestReversibleScanners.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14007173" author="hudson" created="Fri, 23 May 2014 13:54:12 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98 #312 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/312/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/312/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11234&quot; title=&quot;FastDiffDeltaEncoder#getFirstKeyInBlock returns wrong result&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11234&quot;&gt;&lt;del&gt;HBASE-11234&lt;/del&gt;&lt;/a&gt; FastDiffDeltaEncoder#getFirstKeyInBlock returns wrong result (zjusch: rev 494e0b50e9f57245ecfbb6be5a61e2630a119fa6)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/io/encoding/FastDiffDeltaEncoder.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestReversibleScanners.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/io/encoding/PrefixKeyDeltaEncoder.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14007309" author="hudson" created="Fri, 23 May 2014 16:17:02 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98-on-Hadoop-1.1 #294 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/294/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/294/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11234&quot; title=&quot;FastDiffDeltaEncoder#getFirstKeyInBlock returns wrong result&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11234&quot;&gt;&lt;del&gt;HBASE-11234&lt;/del&gt;&lt;/a&gt; FastDiffDeltaEncoder#getFirstKeyInBlock returns wrong result (zjusch: rev 494e0b50e9f57245ecfbb6be5a61e2630a119fa6)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/io/encoding/FastDiffDeltaEncoder.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestReversibleScanners.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/io/encoding/PrefixKeyDeltaEncoder.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14007333" author="anoop.hbase" created="Fri, 23 May 2014 16:36:16 +0000"  >&lt;blockquote&gt;&lt;p&gt;In 98 TestReversibleScanners seems to always fail&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;It is failing with PREFIX_TREE. All other algos, the test passes.  Some fix for prefix tree went into trunk alone ?&lt;/p&gt;
</comment>
                            <comment id="14007368" author="apurtell" created="Fri, 23 May 2014 17:05:03 +0000"  >&lt;p&gt;I will need to revert this change from 0.98 if the test isn&apos;t fixed by this afternoon.&lt;/p&gt;</comment>
                            <comment id="14007375" author="apurtell" created="Fri, 23 May 2014 17:06:27 +0000"  >&lt;p&gt;Let me look at the trunk history for prefix tree also.&lt;/p&gt;</comment>
                            <comment id="14007402" author="anoop.hbase" created="Fri, 23 May 2014 17:17:34 +0000"  >&lt;p&gt;I am also doing some investigation. Will report back Andy.&lt;/p&gt;</comment>
                            <comment id="14007448" author="anoop.hbase" created="Fri, 23 May 2014 17:47:30 +0000"  >&lt;p&gt;I can see on debug that PrefixTreeSeeker#seekToOrBeforeUsingPositionAtOrAfter() is behaving different ways in 98 and master.&lt;br/&gt;
Exactly at this point the diff comes&lt;br/&gt;
CellScannerPosition position = ptSearcher.seekForwardToOrAfter(kv);&lt;/p&gt;</comment>
                            <comment id="14007492" author="apurtell" created="Fri, 23 May 2014 18:16:43 +0000"  >&lt;p&gt;Reopening because of the issue on 0.98 branch&lt;/p&gt;</comment>
                            <comment id="14007499" author="apurtell" created="Fri, 23 May 2014 18:20:12 +0000"  >&lt;p&gt;I did &apos;git log master ^0.98&apos; for hbase-prefix-tree/ and hbase-common/src/main/java/org/apache/hadoop/hbase/io/encoding and found &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10438&quot; title=&quot;NPE from LRUDictionary when size reaches the max init value&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10438&quot;&gt;&lt;del&gt;HBASE-10438&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10451&quot; title=&quot;Enable back Tag compression on HFiles&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10451&quot;&gt;&lt;del&gt;HBASE-10451&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10531&quot; title=&quot;Revisit how the key byte[] is passed to HFileScanner.seekTo and reseekTo&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10531&quot;&gt;&lt;del&gt;HBASE-10531&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7319&quot; title=&quot;Extend Cell usage through read path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7319&quot;&gt;&lt;del&gt;HBASE-7319&lt;/del&gt;&lt;/a&gt;, and &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10835&quot; title=&quot;DBE encode path improvements&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10835&quot;&gt;&lt;del&gt;HBASE-10835&lt;/del&gt;&lt;/a&gt; as relevant differences before the commit of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11234&quot; title=&quot;FastDiffDeltaEncoder#getFirstKeyInBlock returns wrong result&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11234&quot;&gt;&lt;del&gt;HBASE-11234&lt;/del&gt;&lt;/a&gt;. &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10801&quot; title=&quot;Ensure DBE interfaces can work with Cell&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10801&quot;&gt;&lt;del&gt;HBASE-10801&lt;/del&gt;&lt;/a&gt; was also committed to trunk shortly after 11234.&lt;/p&gt;</comment>
                            <comment id="14007561" author="yuzhihong@gmail.com" created="Fri, 23 May 2014 19:16:24 +0000"  >&lt;p&gt;Figuring out which of the above JIRAs fixes prefix tree encoding would take some time.&lt;/p&gt;

&lt;p&gt;How about leaving out prefix tree encoding in TestReversibleScanners#testReversibleStoreFileScanner so that 0.98.3 RC can be cut ?&lt;/p&gt;</comment>
                            <comment id="14007579" author="lhofhansl" created="Fri, 23 May 2014 19:34:09 +0000"  >&lt;p&gt;Hmm... But the existing code is obviously wrong. OK, I&apos;ll revert from 0.94 as well.&lt;/p&gt;</comment>
                            <comment id="14007583" author="apurtell" created="Fri, 23 May 2014 19:38:03 +0000"  >&lt;p&gt;Ok I will revert from 0.98 as well.&lt;/p&gt;</comment>
                            <comment id="14007591" author="apurtell" created="Fri, 23 May 2014 19:44:59 +0000"  >&lt;p&gt;Reverted from 0.98 branch. Moved to 0.98.4. &lt;/p&gt;</comment>
                            <comment id="14007594" author="yuzhihong@gmail.com" created="Fri, 23 May 2014 19:47:03 +0000"  >&lt;p&gt;Created &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11246&quot; title=&quot;Backport HBASE-11234 &amp;#39;FastDiffDeltaEncoder#getFirstKeyInBlock returns wrong result&amp;#39;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11246&quot;&gt;&lt;del&gt;HBASE-11246&lt;/del&gt;&lt;/a&gt; for backport.&lt;/p&gt;</comment>
                            <comment id="14008100" author="anoop.hbase" created="Sat, 24 May 2014 10:53:38 +0000"  >&lt;p&gt;This issue is reopened. So we dont need a backport Jira I think.  Can we close that Ted?&lt;/p&gt;</comment>
                            <comment id="14008101" author="anoop.hbase" created="Sat, 24 May 2014 10:54:12 +0000"  >&lt;p&gt;After debugging both 98 and trunk, I got the issue&lt;/p&gt;

&lt;p&gt;In PrefixTreeArrayScanner.populateNonRowFieldsAndCompareTo() it calls CellComparator.compareStatic(this, key). This comparison compares even mvcc also. In 98 version HFileScanner.seekTo() takes key byte[] to be seeked. So this will contain the key part alone.&lt;br/&gt;
Later in PrefixTreeSeeker#seekToOrBeforeUsingPositionAtOrAfter  KV is created from key &lt;br/&gt;
KeyValue kv = KeyValue.createKeyValueFromKey(keyOnlyBytes, offset, length);&lt;br/&gt;
So this kv will have an mvcc 0.&lt;br/&gt;
The seek operation is seeking to the kv that we are looking for (rk, cf, q, ts, type) But then the mvcc compare says the seeked kv is less than the seek key and so we go ahead one more cell.&lt;/p&gt;

&lt;p&gt;In trunk Ram&apos;s patch changed the HFileScanner.seekTo() signature to take a KV.  As per the test what we pass is the actual KVs written to file (means it will contain mvcc also.) So we will use that kv only in the code also and so it works.&lt;/p&gt;

&lt;p&gt;But in actual execution scenario what we get is key alone and we will create KVs (KeyOnlyKeyValue). So this will create same issue what we see in 98 test, even in trunk also.&lt;/p&gt;

&lt;p&gt;To fix we need to make sure the cell compare compares key alone as part of PrefixTreeArrayScanner.populateNonRowFieldsAndCompareTo()&lt;/p&gt;

&lt;p&gt;Also we need to change the test case to pass a seekKey which will not contain mvcc. (mvcc = 0)&lt;/p&gt;

&lt;p&gt;Ping &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mcorgan&quot; class=&quot;user-hover&quot; rel=&quot;mcorgan&quot;&gt;Matt Corgan&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14008129" author="yuzhihong@gmail.com" created="Sat, 24 May 2014 13:56:23 +0000"  >&lt;p&gt;Thanks for the analysis, Anoop.&lt;/p&gt;

&lt;p&gt;11234-98-with-prefix-tree.txt is based on Chunhui&apos;s patch. It includes necessary changes to prefix tree such that TestReversibleScanners passes.&lt;/p&gt;

&lt;p&gt;Tests under hbase-prefix-tree module also pass.&lt;/p&gt;</comment>
                            <comment id="14008151" author="yuzhihong@gmail.com" created="Sat, 24 May 2014 15:51:28 +0000"  >&lt;p&gt;0.98 test suite passed based on patch:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[INFO] HBase - Prefix Tree ............................... SUCCESS [2.580s]
[INFO] HBase - Server .................................... SUCCESS [1:07:55.691s]
[INFO] HBase - Testing Util .............................. SUCCESS [1.361s]
[INFO] HBase - Thrift .................................... SUCCESS [1:56.374s]
[INFO] HBase - Shell ..................................... SUCCESS [1:35.282s]
[INFO] HBase - Integration Tests ......................... SUCCESS [0.923s]
[INFO] HBase - Examples .................................. SUCCESS [5.548s]
[INFO] HBase - Assembly .................................. SUCCESS [0.886s]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1:12:43.726s
[INFO] Finished at: Sat May 24 15:13:42 UTC 2014
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14008289" author="anoop.hbase" created="Sun, 25 May 2014 07:24:38 +0000"  >&lt;p&gt;prefix-tree part of fix is required in Trunk also.&lt;br/&gt;
For 94 and 96 patches no changes are needed. 94 is reverted I think. (Which we can commit again)&lt;/p&gt;

&lt;p&gt;I am fine with attached fix. Would like to get Matt Corgan&apos;s opinion also.&lt;/p&gt;</comment>
                            <comment id="14008365" author="yuzhihong@gmail.com" created="Sun, 25 May 2014 15:51:16 +0000"  >&lt;p&gt;Addendum for trunk which touches PrefixTreeArrayScanner.java&lt;/p&gt;</comment>
                            <comment id="14008446" author="hudson" created="Sun, 25 May 2014 21:21:07 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.98 #314 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/314/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/314/&lt;/a&gt;)&lt;br/&gt;
Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11234&quot; title=&quot;FastDiffDeltaEncoder#getFirstKeyInBlock returns wrong result&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11234&quot;&gt;&lt;del&gt;HBASE-11234&lt;/del&gt;&lt;/a&gt; FastDiffDeltaEncoder#getFirstKeyInBlock returns wrong result&quot; (apurtell: rev b985e4fd0ebdd920b5c3b33dd5549713d82fa16a)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestReversibleScanners.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/io/encoding/PrefixKeyDeltaEncoder.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/io/encoding/FastDiffDeltaEncoder.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14008470" author="hudson" created="Sun, 25 May 2014 22:49:02 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.98-on-Hadoop-1.1 #295 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/295/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/295/&lt;/a&gt;)&lt;br/&gt;
Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11234&quot; title=&quot;FastDiffDeltaEncoder#getFirstKeyInBlock returns wrong result&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11234&quot;&gt;&lt;del&gt;HBASE-11234&lt;/del&gt;&lt;/a&gt; FastDiffDeltaEncoder#getFirstKeyInBlock returns wrong result&quot; (apurtell: rev b985e4fd0ebdd920b5c3b33dd5549713d82fa16a)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/io/encoding/FastDiffDeltaEncoder.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestReversibleScanners.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/io/encoding/PrefixKeyDeltaEncoder.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14008667" author="ram_krish" created="Mon, 26 May 2014 08:28:43 +0000"  >&lt;p&gt;+1  on patch.  Good analysis &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14008937" author="anoop.hbase" created="Mon, 26 May 2014 16:10:32 +0000"  >&lt;p&gt;+1 for 11234-98-with-prefix-tree.txt  and 11234-trunk.addendum.&lt;br/&gt;
The fix is already in place in 96 branch&lt;br/&gt;
I believe it was reverted from 94 also. +1 for initial 94 patch itself. (No change needed as 94 is not having prefix tree)&lt;/p&gt;</comment>
                            <comment id="14009198" author="zjushch" created="Tue, 27 May 2014 01:37:50 +0000"  >&lt;p&gt;+1 on patch&lt;/p&gt;</comment>
                            <comment id="14009233" author="mcorgan" created="Tue, 27 May 2014 03:04:02 +0000"  >&lt;p&gt;Great analysis Anoop.  I have no concerns with the change given your explanation.  Prefix-tree isn&apos;t trying to do anything special in this area, just conform to hbase&apos;s expectations of where a scanner will advance to, etc, which are sometimes hard to decipher.&lt;/p&gt;</comment>
                            <comment id="14009236" author="anoop.hbase" created="Tue, 27 May 2014 03:07:12 +0000"  >&lt;p&gt;The prefix tree part of the patch should be committed to 96 branch as well. &lt;/p&gt;</comment>
                            <comment id="14009272" author="lhofhansl" created="Tue, 27 May 2014 04:52:24 +0000"  >&lt;p&gt;+1 on recommitting to 0.94. I missed the prefix-tree-only issue.&lt;/p&gt;</comment>
                            <comment id="14009736" author="yuzhihong@gmail.com" created="Tue, 27 May 2014 14:52:03 +0000"  >&lt;p&gt;Integrated addendum to trunk and 0.96.&lt;/p&gt;

&lt;p&gt;Integrated to 0.94 and 0.98&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="14009848" author="hudson" created="Tue, 27 May 2014 16:14:18 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.94-security #486 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/486/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/486/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11234&quot; title=&quot;FastDiffDeltaEncoder#getFirstKeyInBlock returns wrong result&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11234&quot;&gt;&lt;del&gt;HBASE-11234&lt;/del&gt;&lt;/a&gt; FastDiffDeltaEncoder#getFirstKeyInBlock returns wrong result (Chunhui) (tedyu: rev a616bb42c651ed7ab79f25c55d8f6baaea585676)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;src/main/java/org/apache/hadoop/hbase/io/encoding/PrefixKeyDeltaEncoder.java&lt;/li&gt;
	&lt;li&gt;src/main/java/org/apache/hadoop/hbase/io/encoding/FastDiffDeltaEncoder.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14009874" author="hudson" created="Tue, 27 May 2014 16:38:31 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.94-JDK7 #138 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-JDK7/138/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-JDK7/138/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11234&quot; title=&quot;FastDiffDeltaEncoder#getFirstKeyInBlock returns wrong result&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11234&quot;&gt;&lt;del&gt;HBASE-11234&lt;/del&gt;&lt;/a&gt; FastDiffDeltaEncoder#getFirstKeyInBlock returns wrong result (Chunhui) (tedyu: rev a616bb42c651ed7ab79f25c55d8f6baaea585676)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;src/main/java/org/apache/hadoop/hbase/io/encoding/PrefixKeyDeltaEncoder.java&lt;/li&gt;
	&lt;li&gt;src/main/java/org/apache/hadoop/hbase/io/encoding/FastDiffDeltaEncoder.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14009907" author="hudson" created="Tue, 27 May 2014 17:10:24 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.94 #1370 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/1370/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/1370/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11234&quot; title=&quot;FastDiffDeltaEncoder#getFirstKeyInBlock returns wrong result&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11234&quot;&gt;&lt;del&gt;HBASE-11234&lt;/del&gt;&lt;/a&gt; FastDiffDeltaEncoder#getFirstKeyInBlock returns wrong result (Chunhui) (tedyu: rev a616bb42c651ed7ab79f25c55d8f6baaea585676)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;src/main/java/org/apache/hadoop/hbase/io/encoding/FastDiffDeltaEncoder.java&lt;/li&gt;
	&lt;li&gt;src/main/java/org/apache/hadoop/hbase/io/encoding/PrefixKeyDeltaEncoder.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14009941" author="hudson" created="Tue, 27 May 2014 17:38:40 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.98-on-Hadoop-1.1 #297 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/297/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/297/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11234&quot; title=&quot;FastDiffDeltaEncoder#getFirstKeyInBlock returns wrong result&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11234&quot;&gt;&lt;del&gt;HBASE-11234&lt;/del&gt;&lt;/a&gt; FastDiffDeltaEncoder#getFirstKeyInBlock returns wrong result (tedyu: rev 90ece25b6e480f51b05ff7330e59bdcc637e5c45)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/io/encoding/FastDiffDeltaEncoder.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/io/encoding/PrefixKeyDeltaEncoder.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestReversibleScanners.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/CellComparator.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreFileScanner.java&lt;/li&gt;
	&lt;li&gt;hbase-prefix-tree/src/main/java/org/apache/hadoop/hbase/codec/prefixtree/decode/PrefixTreeArrayScanner.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14009964" author="hudson" created="Tue, 27 May 2014 17:48:43 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.98 #316 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/316/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/316/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11234&quot; title=&quot;FastDiffDeltaEncoder#getFirstKeyInBlock returns wrong result&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11234&quot;&gt;&lt;del&gt;HBASE-11234&lt;/del&gt;&lt;/a&gt; FastDiffDeltaEncoder#getFirstKeyInBlock returns wrong result (tedyu: rev 90ece25b6e480f51b05ff7330e59bdcc637e5c45)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/io/encoding/PrefixKeyDeltaEncoder.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/CellComparator.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/io/encoding/FastDiffDeltaEncoder.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestReversibleScanners.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/StoreFileScanner.java&lt;/li&gt;
	&lt;li&gt;hbase-prefix-tree/src/main/java/org/apache/hadoop/hbase/codec/prefixtree/decode/PrefixTreeArrayScanner.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14009974" author="hudson" created="Tue, 27 May 2014 17:51:34 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #5144 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/5144/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/5144/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11234&quot; title=&quot;FastDiffDeltaEncoder#getFirstKeyInBlock returns wrong result&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11234&quot;&gt;&lt;del&gt;HBASE-11234&lt;/del&gt;&lt;/a&gt; Addendum for PrefixTreeArrayScanner (tedyu: rev 56af657e5df8f17358c80c79d4aafa806a0f57b7)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-prefix-tree/src/main/java/org/apache/hadoop/hbase/codec/prefixtree/decode/PrefixTreeArrayScanner.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14010047" author="hudson" created="Tue, 27 May 2014 18:22:07 +0000"  >&lt;p&gt;SUCCESS: Integrated in hbase-0.96 #402 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.96/402/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.96/402/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11234&quot; title=&quot;FastDiffDeltaEncoder#getFirstKeyInBlock returns wrong result&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11234&quot;&gt;&lt;del&gt;HBASE-11234&lt;/del&gt;&lt;/a&gt; Addendum for PrefixTreeArrayScanner (tedyu: rev 191abb0b6b12670203feb13ecaf7aae20c307959)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-prefix-tree/src/main/java/org/apache/hadoop/hbase/codec/prefixtree/decode/PrefixTreeArrayScanner.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/CellComparator.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14010619" author="hudson" created="Wed, 28 May 2014 01:02:10 +0000"  >&lt;p&gt;FAILURE: Integrated in hbase-0.96-hadoop2 #278 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.96-hadoop2/278/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.96-hadoop2/278/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11234&quot; title=&quot;FastDiffDeltaEncoder#getFirstKeyInBlock returns wrong result&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11234&quot;&gt;&lt;del&gt;HBASE-11234&lt;/del&gt;&lt;/a&gt; Addendum for PrefixTreeArrayScanner (tedyu: rev 191abb0b6b12670203feb13ecaf7aae20c307959)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-prefix-tree/src/main/java/org/apache/hadoop/hbase/codec/prefixtree/decode/PrefixTreeArrayScanner.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/CellComparator.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12716424">HBASE-11246</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12646465" name="11234-94.patch" size="1297" author="zjushch" created="Fri, 23 May 2014 06:54:20 +0000"/>
                            <attachment id="12646466" name="11234-96.patch" size="1421" author="zjushch" created="Fri, 23 May 2014 06:54:20 +0000"/>
                            <attachment id="12646671" name="11234-98-with-prefix-tree.txt" size="8014" author="yuzhihong@gmail.com" created="Sat, 24 May 2014 13:56:23 +0000"/>
                            <attachment id="12646715" name="11234-trunk.addendum" size="877" author="yuzhihong@gmail.com" created="Sun, 25 May 2014 15:51:16 +0000"/>
                            <attachment id="12646203" name="HBASE-11234.patch" size="4854" author="zjushch" created="Thu, 22 May 2014 08:48:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 22 May 2014 08:52:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>394229</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 29 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1vvnj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>394367</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>