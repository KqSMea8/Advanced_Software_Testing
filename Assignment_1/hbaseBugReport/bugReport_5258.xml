<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:26:10 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5258/HBASE-5258.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5258] Move coprocessors set out of RegionLoad</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5258</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;When I worked on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5256&quot; title=&quot;Use WritableUtils.readVInt() in RegionLoad.readFields()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5256&quot;&gt;&lt;del&gt;HBASE-5256&lt;/del&gt;&lt;/a&gt;, I revisited the code related to Ser/De of coprocessors set in RegionLoad.&lt;/p&gt;

&lt;p&gt;I think the rationale for embedding coprocessors set is for maximum flexibility where each region can load different coprocessors.&lt;br/&gt;
This flexibility is causing extra cost in the region server to Master communication and increasing the footprint of Master heap.&lt;/p&gt;

&lt;p&gt;Would HServerLoad be a better place for this set ?&lt;/p&gt;

&lt;p&gt;If required, region server should calculate disparity of loaded coprocessors among regions and send report through HServerLoad&lt;/p&gt;</description>
                <environment></environment>
        <key id="12539502">HBASE-5258</key>
            <summary>Move coprocessors set out of RegionLoad</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sershe">Sergey Shelukhin</assignee>
                                    <reporter username="zhihyu@ebaysf.com">Ted Yu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Jan 2012 17:18:46 +0000</created>
                <updated>Tue, 26 Feb 2013 08:22:57 +0000</updated>
                            <resolved>Tue, 11 Dec 2012 23:31:35 +0000</resolved>
                                                    <fixVersion>0.94.4</fixVersion>
                    <fixVersion>0.95.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                <comments>
                            <comment id="13191443" author="ekoontz" created="Mon, 23 Jan 2012 20:59:54 +0000"  >&lt;p&gt;Hi Ted,&lt;br/&gt;
Do you have an estimate for how much network traffic or heap footprint that this would save?&lt;br/&gt;
Just curious, not an objection.&lt;br/&gt;
-Eugene&lt;/p&gt;</comment>
                            <comment id="13191460" author="ekoontz" created="Mon, 23 Jan 2012 21:19:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4070&quot; title=&quot;[Coprocessors] Improve region server metrics to report loaded coprocessors to master&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4070&quot;&gt;&lt;del&gt;HBASE-4070&lt;/del&gt;&lt;/a&gt; added loaded Coprocessors to HServerLoad and (HServerLoad.)HRegionLoad.&lt;/p&gt;</comment>
                            <comment id="13191461" author="zhihyu@ebaysf.com" created="Mon, 23 Jan 2012 21:19:47 +0000"  >&lt;p&gt;Since each coprocessor is represented by a string, the potential savings can be considerable, especially if many regions are hosted on each region server.&lt;/p&gt;</comment>
                            <comment id="13191464" author="ekoontz" created="Mon, 23 Jan 2012 21:21:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4660&quot; title=&quot;Place to publish RegionServer information such as webuiport and coprocessors loaded&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4660&quot;&gt;&lt;del&gt;HBASE-4660&lt;/del&gt;&lt;/a&gt; proposes moving RegionServer information such as coprocessor load information, web UI port information, etc. out of HServerLoad and into a ZNode or a HRegionServer method. &lt;/p&gt;</comment>
                            <comment id="13191589" author="apurtell" created="Mon, 23 Jan 2012 22:58:30 +0000"  >&lt;blockquote&gt;&lt;p&gt;This flexibility is causing extra cost in the region server to Master communication and increasing the footprint of Master heap.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No doubt it is redundant to have each region report a coprocessor given how the framework currently works: All regions for a table will have an identical set of coprocessors loaded, or there is something bad happening.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Would HServerLoad be a better place for this set ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I have no major objection.&lt;/p&gt;

&lt;p&gt;However, maybe we want a way to know if something bad happened on a region and a coprocessor on it went away? One could comb logs but that is hardly a convenient way to get online state.&lt;/p&gt;
</comment>
                            <comment id="13191594" author="zhihyu@ebaysf.com" created="Mon, 23 Jan 2012 23:07:03 +0000"  >&lt;p&gt;To my knowledge, for a mis-behaving coprocessor we either remove the buggy coprocessor or abort.&lt;br/&gt;
I wonder what scenario would lead to imbalanced coprocessors on a region.&lt;/p&gt;</comment>
                            <comment id="13191639" author="apurtell" created="Mon, 23 Jan 2012 23:49:37 +0000"  >&lt;blockquote&gt;&lt;p&gt;for a mis-behaving coprocessor we either remove the buggy coprocessor&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;... from the coprocessor host for the given region (in the case of RegionCoprocessorHost) only...&lt;/p&gt;</comment>
                            <comment id="13191646" author="zhihyu@ebaysf.com" created="Mon, 23 Jan 2012 23:59:37 +0000"  >&lt;p&gt;I agree with the last comment @ 23/Jan/12 22:58&lt;br/&gt;
My understanding of the feature is that user should validate coprocessor by choosing the Abort policy for buggy coprocessor in pre-deployment stage. In production, the chance of buggy coprocessor dropping from individual region(s) should be low.&lt;/p&gt;

&lt;p&gt;The ability of querying imbalanced coprocessors on a region server should be on-demand feature.&lt;/p&gt;</comment>
                            <comment id="13191651" author="zhihyu@ebaysf.com" created="Tue, 24 Jan 2012 00:05:10 +0000"  >&lt;p&gt;Since the combination of coprocessors on a region server is limited, I was suggesting that the report of uneven coprocessor presence be embedded in HServerLoad.&lt;/p&gt;</comment>
                            <comment id="13191862" author="zhihyu@ebaysf.com" created="Tue, 24 Jan 2012 04:20:26 +0000"  >&lt;p&gt;@Andrew, @Eugene:&lt;br/&gt;
Do you agree with the proposal as outlined in the title of this JIRA ?&lt;/p&gt;</comment>
                            <comment id="13192336" author="ekoontz" created="Tue, 24 Jan 2012 18:20:35 +0000"  >&lt;p&gt;@Zhihong, I think it should be ok to raise coprocessor reporting out of HServerLoad.HRegionLoad to just HServerLoad. &lt;/p&gt;

&lt;p&gt;How do you see this as it relates to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4660&quot; title=&quot;Place to publish RegionServer information such as webuiport and coprocessors loaded&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4660&quot;&gt;&lt;del&gt;HBASE-4660&lt;/del&gt;&lt;/a&gt; ? Does this fix make it (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4660&quot; title=&quot;Place to publish RegionServer information such as webuiport and coprocessors loaded&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4660&quot;&gt;&lt;del&gt;HBASE-4660&lt;/del&gt;&lt;/a&gt;) easier?&lt;/p&gt;</comment>
                            <comment id="13192338" author="zhihyu@ebaysf.com" created="Tue, 24 Jan 2012 18:25:19 +0000"  >&lt;p&gt;I was looking for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4660&quot; title=&quot;Place to publish RegionServer information such as webuiport and coprocessors loaded&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4660&quot;&gt;&lt;del&gt;HBASE-4660&lt;/del&gt;&lt;/a&gt; yesterday, thanks for finding it.&lt;/p&gt;

&lt;p&gt;Please work on this JIRA before tackling webuiport.&lt;/p&gt;</comment>
                            <comment id="13193172" author="zhihyu@ebaysf.com" created="Wed, 25 Jan 2012 18:19:59 +0000"  >&lt;p&gt;Raising priority as this task is about making the correct design choices.&lt;/p&gt;</comment>
                            <comment id="13198298" author="zhihyu@ebaysf.com" created="Wed, 1 Feb 2012 23:10:01 +0000"  >&lt;p&gt;During meeting with Stack, Liyin and Karthick today, Stack mentioned that embedding coprocessor information in RegionLoad is not the right thing to do.&lt;/p&gt;</comment>
                            <comment id="13492066" author="sershe" created="Wed, 7 Nov 2012 02:13:46 +0000"  >&lt;p&gt;hi. is there any progress to be made on this?&lt;/p&gt;</comment>
                            <comment id="13492669" author="stack" created="Wed, 7 Nov 2012 20:15:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sershe&quot; class=&quot;user-hover&quot; rel=&quot;sershe&quot;&gt;Sergey Shelukhin&lt;/a&gt; Currently the RegionLoad in ServerLoad is badly overloaded carrying both load and attributes.  Historically it was just easiest adding attributes to the message the RS was passing the Master on a heartbeat.  Now we are pb&apos;ing everywhere, we can entertain breaking load and attributes apart.  Or, as below outlines, we&apos;d not put load nor attributes on the heartbeat at all.&lt;/p&gt;

&lt;p&gt;Load is currently sent by the regionservers to the master on the old heartbeat channel that has been around since the early days.  The only reason the master gets the load is so its UI can give a bit of a clue as to what is going on clusterwise.  The load the regionservers put on the heartbeat is mostly a duplicate of what the regionserver emits over its metrics channel.  It would be good if we did not duplicate this load composition.  It would be good if instead the master listened to the regionserver metrics emissions rather than get load off the heartbeat (or, RS wrote their load/metrics to a table and master read that whenever it wanted to show a page on cluster state).  That would make it so the heartbeat now only carries attributes.  But maybe it should not carry this even.  Most of the time the attributes do not change so it is almost as though they should be written once and then the master would consult them when it needs them.  The master could, say, write them to zk into the body of the RS ephemeral znode. Master can read them when it joins the cluster or when they are updated by the RS.&lt;/p&gt;

&lt;p&gt;So, then the heartbeat would seem to have no purpose given zk client in the RS is already heartbeating so we could drop it.&lt;/p&gt;

&lt;p&gt;But maybe we shouldn&apos;t and rather, we should rethread it.  FB are starting to go down the path where they are starting to rely on this RS heartbeat rather than the ephemeral node in zk and letting master make the call on whether a RS should be let go or not.  They are tending this way because the zk ephemeral node is dumb &amp;#8211; no logic other than timeout &amp;#8211; and because if master is allowed say what is dead and what is alive, it has the opportunity of applying rules; e.g. if all regionservers in the cluster are unresponsive all at the same time, its probably a network issue so hold tight till the network comes back (as opposed to zk which would just expire all sessions and all of the cluster would go down).&lt;/p&gt;

&lt;p&gt;Hope this helps.&lt;/p&gt;
</comment>
                            <comment id="13493441" author="sershe" created="Thu, 8 Nov 2012 19:41:10 +0000"  >&lt;p&gt;There may be potential for using info about region server load that is more realtime/critical than metrics channel, in master, for balancing/etc. Probably not important short term.&lt;br/&gt;
W.r.t. zk - why cannot master read zk nodes and apply rules too? ZK nodes may need to be made smarter for this purpose. &lt;br/&gt;
Assuming RSs will have to talk to ZK anyway, for large clusters it will avoid extra all-to-one communication. Although master reading ZK to make decisions may introduce additional delay, especially if master just watches the nodes and builds up internal state, instead of querying entire state periodically.&lt;br/&gt;
Regardless, does having different coprocessors on the regions of the same table make sense? If user has logic relying on coprocessors for some data querying or correctness it seems dangerous. &lt;/p&gt;</comment>
                            <comment id="13510958" author="sershe" created="Thu, 6 Dec 2012 00:18:48 +0000"  >&lt;p&gt;Hi. Is there any objections to removing them for now? I don&apos;t see getting coprocessors from RegionLoad actually being used anywhere.&lt;/p&gt;</comment>
                            <comment id="13511077" author="apurtell" created="Thu, 6 Dec 2012 03:58:33 +0000"  >&lt;blockquote&gt;&lt;p&gt;I don&apos;t see getting coprocessors from RegionLoad actually being used anywhere.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;I searched for users of RegionLoad#getCoprocessors and didn&apos;t find any either.&lt;/p&gt;

&lt;p&gt;Originally we put this in so the loaded coprocessors on a region would show up next to other region information in the master UI. Unfortunately the result was not that useful, just clutter.&lt;/p&gt;</comment>
                            <comment id="13526108" author="sershe" created="Fri, 7 Dec 2012 03:17:40 +0000"  >&lt;p&gt;Added patch&lt;/p&gt;</comment>
                            <comment id="13526152" author="hadoopqa" created="Fri, 7 Dec 2012 05:28:43 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12556482/HBASE-5258-v0.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12556482/HBASE-5258-v0.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 101 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 23 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.regionserver.TestAtomicOperation&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3455//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3455//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3455//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3455//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3455//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3455//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3455//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3455//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3455//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3455//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3455//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3455//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3455//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3455//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3455//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3455//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3455//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3455//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13526665" author="sershe" created="Fri, 7 Dec 2012 19:10:39 +0000"  >&lt;p&gt;TestAtomicOperation passes locally&lt;/p&gt;</comment>
                            <comment id="13526793" author="yuzhihong@gmail.com" created="Fri, 7 Dec 2012 21:38:06 +0000"  >&lt;p&gt;For hbase.proto:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-  repeated Coprocessor coprocessors = 15;
+  /** Field ID 15 is reserved */
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We should preserve ordinal in 0.94 But for trunk, I think we can bump up ordinal for completeSequenceId field&lt;/p&gt;

&lt;p&gt;For TestClassLoading.java:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
   &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] regionServerSystemCoprocessors =
       &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[]{
-      regionCoprocessor1.getSimpleName(),
-      regionServerCoprocessor.getSimpleName()
-  };
-
-  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] regionServerSystemAndUserCoprocessors =
-      &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] {
-      regionCoprocessor1.getSimpleName(),
-      regionCoprocessor2.getSimpleName(),
       regionServerCoprocessor.getSimpleName()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Originally regionCoprocessor1 was classified as system coprocessor. What was the reason for changing that ?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="13526813" author="sershe" created="Fri, 7 Dec 2012 21:56:39 +0000"  >&lt;blockquote&gt;&lt;p&gt;Originally regionCoprocessor1 was classified as system coprocessor. What was the reason for changing that &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;regionCoprocessor1 is gone.&lt;/p&gt;

&lt;p&gt;In proto - yeah, discussed this with Enis. Given that there were no protobuf releases, it should be acceptable for now to just remove the field.&lt;/p&gt;</comment>
                            <comment id="13526816" author="stack" created="Fri, 7 Dec 2012 22:02:58 +0000"  >&lt;p&gt;I&apos;m +1 on commit.&lt;/p&gt;</comment>
                            <comment id="13526896" author="yuzhihong@gmail.com" created="Fri, 7 Dec 2012 23:58:49 +0000"  >&lt;p&gt;Integrated patch v2 to trunk.&lt;/p&gt;

&lt;p&gt;Thanks for the patch, Sergey.&lt;/p&gt;

&lt;p&gt;Thanks for the review.&lt;/p&gt;

&lt;p&gt;@Lars:&lt;br/&gt;
Is it Okay for this to go into 0.94 ?&lt;/p&gt;</comment>
                            <comment id="13526970" author="hudson" created="Sat, 8 Dec 2012 01:48:43 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3599 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3599/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3599/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5258&quot; title=&quot;Move coprocessors set out of RegionLoad&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5258&quot;&gt;&lt;del&gt;HBASE-5258&lt;/del&gt;&lt;/a&gt; Move coprocessors set out of RegionLoad (Sergey Shelukhin) (Revision 1418561)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/HBaseProtos.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-protocol/src/main/protobuf/hbase.proto&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/RegionLoad.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/ServerLoad.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/coprocessor/TestClassLoading.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13527040" author="lhofhansl" created="Sat, 8 Dec 2012 05:22:06 +0000"  >&lt;p&gt;This seems a good addition to 0.94 as well. Thanks for pinging Ted.&lt;/p&gt;</comment>
                            <comment id="13527114" author="hudson" created="Sat, 8 Dec 2012 11:52:59 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #287 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/287/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/287/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5258&quot; title=&quot;Move coprocessors set out of RegionLoad&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5258&quot;&gt;&lt;del&gt;HBASE-5258&lt;/del&gt;&lt;/a&gt; Move coprocessors set out of RegionLoad (Sergey Shelukhin) (Revision 1418561)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/HBaseProtos.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-protocol/src/main/protobuf/hbase.proto&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/RegionLoad.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/ServerLoad.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/coprocessor/TestClassLoading.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13528452" author="sershe" created="Mon, 10 Dec 2012 23:49:31 +0000"  >&lt;p&gt;Wouldn&apos;t it break backward compat on 0.94?&lt;br/&gt;
We can do a solution where ServerLoad always has 0 CPs reported, so all is good with wire compat. &lt;br/&gt;
Would it be non-hacky enough? I can produce a patch.&lt;/p&gt;</comment>
                            <comment id="13528524" author="sershe" created="Tue, 11 Dec 2012 00:44:06 +0000"  >&lt;p&gt;0.94 patch.&lt;/p&gt;</comment>
                            <comment id="13528525" author="sershe" created="Tue, 11 Dec 2012 00:45:13 +0000"  >&lt;p&gt;Trunk patch that goes on top of &quot;v1&quot;. I noticed during 0.94 port that using ServerLoad during jamon output is actually unnecessary, so we can still preserve the functionality there.&lt;/p&gt;</comment>
                            <comment id="13528573" author="yuzhihong@gmail.com" created="Tue, 11 Dec 2012 01:28:51 +0000"  >&lt;p&gt;Running test suite for 0.94 patch.&lt;/p&gt;</comment>
                            <comment id="13529219" author="sershe" created="Tue, 11 Dec 2012 18:57:36 +0000"  >&lt;p&gt;Tests pass for me (for 0.94 patch), at least small and medium so far.&lt;/p&gt;</comment>
                            <comment id="13529389" author="yuzhihong@gmail.com" created="Tue, 11 Dec 2012 22:14:34 +0000"  >&lt;p&gt;Reviewed 0.94 patch.&lt;br/&gt;
Run test suite with patch and didn&apos;t find reproducible test failure.&lt;/p&gt;

&lt;p&gt;Will integrate later today.&lt;/p&gt;</comment>
                            <comment id="13529423" author="lhofhansl" created="Tue, 11 Dec 2012 23:08:00 +0000"  >&lt;p&gt;So this patch does not break backwards compatibility?&lt;/p&gt;</comment>
                            <comment id="13529466" author="yuzhihong@gmail.com" created="Tue, 11 Dec 2012 23:16:53 +0000"  >&lt;p&gt;0.94 patch doesn&apos;t break backwards compatibility.&lt;br/&gt;
Handling of coprocessors is kept. It is just always reporting 0 coprocessors in RegionLoad.&lt;/p&gt;</comment>
                            <comment id="13529470" author="lhofhansl" created="Tue, 11 Dec 2012 23:20:22 +0000"  >&lt;p&gt;Thanks Ted. Just making sure.&lt;/p&gt;</comment>
                            <comment id="13529476" author="yuzhihong@gmail.com" created="Tue, 11 Dec 2012 23:27:35 +0000"  >&lt;p&gt;Integrated to 0.94&lt;/p&gt;

&lt;p&gt;Thanks for the patch, Sergey.&lt;/p&gt;</comment>
                            <comment id="13529513" author="hudson" created="Wed, 12 Dec 2012 00:34:48 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #621 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/621/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/621/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5258&quot; title=&quot;Move coprocessors set out of RegionLoad&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5258&quot;&gt;&lt;del&gt;HBASE-5258&lt;/del&gt;&lt;/a&gt; Move coprocessors set out of RegionLoad (Sergey) (Revision 1420482)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/HServerLoad.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/coprocessor/TestClassLoading.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13529575" author="sershe" created="Wed, 12 Dec 2012 02:23:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ted_yu&quot; class=&quot;user-hover&quot; rel=&quot;ted_yu&quot;&gt;Ted Yu&lt;/a&gt; Ted, can you please also commit  &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5258&quot; title=&quot;Move coprocessors set out of RegionLoad&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5258&quot;&gt;&lt;del&gt;HBASE-5258&lt;/del&gt;&lt;/a&gt;-fix-on-top-of-v1.patch to trunk? 0.94 patch already includes these changes. Thanks.&lt;/p&gt;</comment>
                            <comment id="13529621" author="yuzhihong@gmail.com" created="Wed, 12 Dec 2012 04:40:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5258&quot; title=&quot;Move coprocessors set out of RegionLoad&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5258&quot;&gt;&lt;del&gt;HBASE-5258&lt;/del&gt;&lt;/a&gt;-fix-on-top-of-v1.patch integrated to trunk.&lt;/p&gt;

&lt;p&gt;Thanks for the reminder, Sergey.&lt;/p&gt;</comment>
                            <comment id="13529645" author="hudson" created="Wed, 12 Dec 2012 05:55:40 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3613 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3613/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3613/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5258&quot; title=&quot;Move coprocessors set out of RegionLoad&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5258&quot;&gt;&lt;del&gt;HBASE-5258&lt;/del&gt;&lt;/a&gt; Move coprocessors set out of RegionLoad - Addendum (Sergey) (Revision 1420521)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13529880" author="hudson" created="Wed, 12 Dec 2012 12:12:55 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #293 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/293/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/293/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5258&quot; title=&quot;Move coprocessors set out of RegionLoad&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5258&quot;&gt;&lt;del&gt;HBASE-5258&lt;/del&gt;&lt;/a&gt; Move coprocessors set out of RegionLoad - Addendum (Sergey) (Revision 1420521)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13537930" author="hudson" created="Fri, 21 Dec 2012 14:17:13 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #87 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/87/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/87/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5258&quot; title=&quot;Move coprocessors set out of RegionLoad&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5258&quot;&gt;&lt;del&gt;HBASE-5258&lt;/del&gt;&lt;/a&gt; Move coprocessors set out of RegionLoad (Sergey) (Revision 1420482)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/HServerLoad.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/coprocessor/TestClassLoading.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13544432" author="hudson" created="Sat, 5 Jan 2013 00:42:30 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security-on-Hadoop-23 #10 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/10/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/10/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5258&quot; title=&quot;Move coprocessors set out of RegionLoad&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5258&quot;&gt;&lt;del&gt;HBASE-5258&lt;/del&gt;&lt;/a&gt; Move coprocessors set out of RegionLoad (Sergey) (Revision 1420482)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/HServerLoad.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/coprocessor/TestClassLoading.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12528608">HBASE-4660</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12539416">HBASE-5256</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12513050">HBASE-4070</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12560321" name="HBASE-5258-094.patch" size="12707" author="sershe" created="Tue, 11 Dec 2012 00:44:06 +0000"/>
                            <attachment id="12560322" name="HBASE-5258-fix-on-top-of-v1.patch" size="1489" author="sershe" created="Tue, 11 Dec 2012 00:45:13 +0000"/>
                            <attachment id="12556482" name="HBASE-5258-v0.patch" size="35105" author="sershe" created="Thu, 6 Dec 2012 19:16:12 +0000"/>
                            <attachment id="12559960" name="HBASE-5258-v1.patch" size="35763" author="sershe" created="Fri, 7 Dec 2012 21:59:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 23 Jan 2012 20:59:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>225004</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 49 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0agfj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>58935</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>