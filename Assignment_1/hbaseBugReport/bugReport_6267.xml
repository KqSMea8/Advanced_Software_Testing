<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:35:15 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6267/HBASE-6267.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6267] hbase.store.delete.expired.storefile should be true by default</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6267</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5199&quot; title=&quot;Delete out of TTL store files before compaction selection&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5199&quot;&gt;&lt;del&gt;HBASE-5199&lt;/del&gt;&lt;/a&gt; introduces this logic into Store:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      &lt;span class=&quot;code-comment&quot;&gt;// Delete the expired store files before the compaction selection.
&lt;/span&gt;+      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (conf.getBoolean(&lt;span class=&quot;code-quote&quot;&gt;&quot;hbase.store.delete.expired.storefile&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)
+          &amp;amp;&amp;amp; (ttl != &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;.MAX_VALUE) &amp;amp;&amp;amp; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.scanInfo.minVersions == 0)) {
+        CompactSelection expiredSelection = compactSelection
+            .selectExpiredStoreFilesToCompact(
+                EnvironmentEdgeManager.currentTimeMillis() - &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.ttl);
+
+        &lt;span class=&quot;code-comment&quot;&gt;// If there is any expired store files, delete them  by compaction.
&lt;/span&gt;+        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (expiredSelection != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
+          &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; expiredSelection;
+        }
+      }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Is there any reason why that should not be default &lt;tt&gt;true&lt;/tt&gt;?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12595810">HBASE-6267</key>
            <summary>hbase.store.delete.expired.storefile should be true by default</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="apurtell">Andrew Purtell</assignee>
                                    <reporter username="apurtell">Andrew Purtell</reporter>
                        <labels>
                    </labels>
                <created>Mon, 25 Jun 2012 17:14:31 +0000</created>
                <updated>Tue, 26 Feb 2013 08:16:05 +0000</updated>
                            <resolved>Tue, 26 Jun 2012 04:26:05 +0000</resolved>
                                    <version>0.94.1</version>
                    <version>0.95.2</version>
                                    <fixVersion>0.94.1</fixVersion>
                    <fixVersion>0.95.0</fixVersion>
                                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13400693" author="stack" created="Mon, 25 Jun 2012 17:26:13 +0000"  >&lt;p&gt;+1 for true (if above does what I think its doing &amp;#8211; is there a test Andy?)&lt;/p&gt;</comment>
                            <comment id="13400695" author="stack" created="Mon, 25 Jun 2012 17:28:18 +0000"  >&lt;p&gt;Is expiredSelection a good name for what is returned out of selectExpiredStoreFilesToCompact.  Its a bit hard to read that pasted section in isolation.&lt;/p&gt;</comment>
                            <comment id="13400714" author="apurtell" created="Mon, 25 Jun 2012 17:45:11 +0000"  >&lt;blockquote&gt;&lt;p&gt;(if above does what I think its doing &#8211; is there a test Andy?)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;TestStore#testDeleteExpiredStoreFiles, see &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12514057/hbase-5199.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12514057/hbase-5199.patch&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Is expiredSelection a good name for what is returned out of selectExpiredStoreFilesToCompact.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That&apos;s a question for Liyin the original author I think.&lt;/p&gt;

&lt;p&gt;If we are game I can put in a trivial patch to make this on by default.&lt;/p&gt;

</comment>
                            <comment id="13400745" author="ram_krish" created="Mon, 25 Jun 2012 18:13:17 +0000"  >&lt;p&gt;+1 on making it true by default.&lt;/p&gt;</comment>
                            <comment id="13400822" author="liyin" created="Mon, 25 Jun 2012 19:49:10 +0000"  >&lt;p&gt;+ 1 to enable it by default. Let me know if you have a better name  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13400825" author="apurtell" created="Mon, 25 Jun 2012 19:52:01 +0000"  >&lt;p&gt;Will commit as soon as local tests for 0.94 complete. Should be in a few hours.&lt;/p&gt;</comment>
                            <comment id="13401082" author="apurtell" created="Tue, 26 Jun 2012 01:04:09 +0000"  >&lt;p&gt;TestScannerSelectionUsingTTL expects &lt;tt&gt;hbase.store.delete.expired.storefile&lt;/tt&gt; to be &lt;tt&gt;false&lt;/tt&gt;. I&apos;ve fixed it. Checking trunk now to see if additional tests there need fixing up.&lt;/p&gt;</comment>
                            <comment id="13401159" author="apurtell" created="Tue, 26 Jun 2012 04:26:05 +0000"  >&lt;p&gt;Committed to trunk and 0.94 branch. All tests pass locally.&lt;/p&gt;</comment>
                            <comment id="13401174" author="hudson" created="Tue, 26 Jun 2012 05:12:11 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3073 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3073/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3073/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6267&quot; title=&quot;hbase.store.delete.expired.storefile should be true by default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6267&quot;&gt;&lt;del&gt;HBASE-6267&lt;/del&gt;&lt;/a&gt;. hbase.store.delete.expired.storefile should be true by default (Revision 1353812)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
apurtell : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/Store.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestScannerSelectionUsingTTL.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13401194" author="hudson" created="Tue, 26 Jun 2012 06:08:48 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #281 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/281/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/281/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6267&quot; title=&quot;hbase.store.delete.expired.storefile should be true by default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6267&quot;&gt;&lt;del&gt;HBASE-6267&lt;/del&gt;&lt;/a&gt;. hbase.store.delete.expired.storefile should be true by default (Revision 1353813)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
apurtell : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/Store.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/io/hfile/TestScannerSelectionUsingTTL.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13401322" author="hudson" created="Tue, 26 Jun 2012 11:48:13 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #69 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/69/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/69/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6267&quot; title=&quot;hbase.store.delete.expired.storefile should be true by default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6267&quot;&gt;&lt;del&gt;HBASE-6267&lt;/del&gt;&lt;/a&gt;. hbase.store.delete.expired.storefile should be true by default (Revision 1353812)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
apurtell : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/Store.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestScannerSelectionUsingTTL.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13403277" author="hudson" created="Thu, 28 Jun 2012 17:40:05 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #38 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/38/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/38/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6267&quot; title=&quot;hbase.store.delete.expired.storefile should be true by default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6267&quot;&gt;&lt;del&gt;HBASE-6267&lt;/del&gt;&lt;/a&gt;. hbase.store.delete.expired.storefile should be true by default (Revision 1353813)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
apurtell : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/Store.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/io/hfile/TestScannerSelectionUsingTTL.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12533434" name="HBASE-6267-0.94.patch" size="3008" author="apurtell" created="Tue, 26 Jun 2012 04:25:40 +0000"/>
                            <attachment id="12533433" name="HBASE-6267.patch" size="2642" author="apurtell" created="Tue, 26 Jun 2012 04:25:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 25 Jun 2012 17:26:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>247890</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 25 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08s0f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>49138</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>