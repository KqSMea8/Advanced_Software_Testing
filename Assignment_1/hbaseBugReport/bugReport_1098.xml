<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:50:44 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1098/HBASE-1098.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1098] IllegalStateException: Cannot set a region to be closed it it was not already marked as closing</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1098</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;content,ec0ec4d005ee7da14cbd1182339f8cf4,1230416299322 is problem region.  below is snippet from master log.  Looks to me like things are proceeding in order.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2008-12-29 12:19:32,074 DEBUG org.apache.hadoop.hbase.master.RegionManager: Server XX.XX.XX.51:60020 is overloaded. Server load: 74 avg: 48.0, slop: 0.1
2008-12-29 12:19:32,074 DEBUG org.apache.hadoop.hbase.master.RegionManager: Choosing to reassign 26 regions. mostLoadedRegions has 10 regions in it.
2008-12-29 12:19:32,074 DEBUG org.apache.hadoop.hbase.master.RegionManager: Going to close region content,3ea6e20cf48a32fc063912ccae0e960e,1230416307426
2008-12-29 12:19:32,074 DEBUG org.apache.hadoop.hbase.master.RegionManager: Going to close region content,07730cecbb5b13364cbe17af5778f983,1230448573272
2008-12-29 12:19:32,074 DEBUG org.apache.hadoop.hbase.master.RegionManager: Going to close region content,e8c750a5983137306e6b3a84eb1fd6e6,1230424193882
2008-12-29 12:19:32,074 DEBUG org.apache.hadoop.hbase.master.RegionManager: Going to close region content,29be0a07dece4e9bb318c4d253807287,1230356680860
2008-12-29 12:19:32,074 DEBUG org.apache.hadoop.hbase.master.RegionManager: Going to close region content,23893c82d792ff5c9d3ff99123bc1773,1230390013767
2008-12-29 12:19:32,074 DEBUG org.apache.hadoop.hbase.master.RegionManager: Going to close region content,e76475012b59500d25000aa7658bc279,1230498762282
2008-12-29 12:19:32,074 DEBUG org.apache.hadoop.hbase.master.RegionManager: Going to close region result_domain,cn.com.sg.www,1230498785950
2008-12-29 12:19:32,074 DEBUG org.apache.hadoop.hbase.master.RegionManager: Going to close region content,c7b7e7a475765e16d0bbf1e51c95e85d,1230519854914
2008-12-29 12:19:32,074 DEBUG org.apache.hadoop.hbase.master.RegionManager: Going to close region content,ec0ec4d005ee7da14cbd1182339f8cf4,1230416299322
2008-12-29 12:19:32,074 DEBUG org.apache.hadoop.hbase.master.RegionManager: Going to close region content,e16b2ea9f6da8b32fa96ab3490e3d849,1230424086678
2008-12-29 12:19:32,074 INFO org.apache.hadoop.hbase.master.RegionManager: Skipped 0 region(s) that are in transition states
2008-12-29 12:19:32,076 DEBUG org.apache.hadoop.hbase.master.HMaster: Main processing loop: PendingOpenOperation from XX.XX.XX.51:60020
2008-12-29 12:19:32,076 INFO org.apache.hadoop.hbase.master.ProcessRegionOpen$1: content,42b19221f3a60945595b18017d6bacfa,1230357228381 open on XX.XX.XX.51:60020
2008-12-29 12:19:32,076 INFO org.apache.hadoop.hbase.master.ProcessRegionOpen$1: updating row content,42b19221f3a60945595b18017d6bacfa,1230357228381 in region .META.,,1 with startcode 1230571104777 and server XX.XX.XX.51:60020
2008-12-29 12:19:32,077 DEBUG org.apache.hadoop.hbase.master.HMaster: Main processing loop: PendingOpenOperation from XX.XX.XX.51:60020
2008-12-29 12:19:32,077 INFO org.apache.hadoop.hbase.master.ProcessRegionOpen$1: content,3c619bc7a2c824fb3c4f5d747b0f2f12,1230354673241 open on XX.XX.XX.51:60020
2008-12-29 12:19:32,077 INFO org.apache.hadoop.hbase.master.ProcessRegionOpen$1: updating row content,3c619bc7a2c824fb3c4f5d747b0f2f12,1230354673241 in region .META.,,1 with startcode 1230571104777 and server XX.XX.XX.51:60020
2008-12-29 12:19:32,078 DEBUG org.apache.hadoop.hbase.master.HMaster: Main processing loop: ProcessRegionClose of content,36946541ed9a62f419cf7238d32a6a38,1230448587552, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
2008-12-29 12:19:32,078 DEBUG org.apache.hadoop.hbase.master.HMaster: Main processing loop: ProcessRegionClose of content,58221f5f3a79b7dd5e23c339c507a7c6,1230487059978, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
2008-12-29 12:19:32,078 DEBUG org.apache.hadoop.hbase.master.HMaster: Main processing loop: ProcessRegionClose of content,94b170cae87992c33c3913d74bb257e4,1230498360162, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
2008-12-29 12:19:32,078 DEBUG org.apache.hadoop.hbase.master.HMaster: Main processing loop: ProcessRegionClose of content,bb34d860d76c1eabbe2eb7d2ce8148d9,1230416266955, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
2008-12-29 12:19:32,078 DEBUG org.apache.hadoop.hbase.master.HMaster: Main processing loop: ProcessRegionClose of content,8ac5fbdd63b313ce252838a189c73438,1230530000480, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
2008-12-29 12:19:32,078 DEBUG org.apache.hadoop.hbase.master.HMaster: Main processing loop: ProcessRegionClose of content,f9f5b2d035349cf4292ed7dd7e9823f0,1230505507313, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
2008-12-29 12:19:32,078 DEBUG org.apache.hadoop.hbase.master.HMaster: Main processing loop: ProcessRegionClose of content,4b30e2a8b7949ed62e097824969f8bca,1230448501152, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
2008-12-29 12:19:32,078 DEBUG org.apache.hadoop.hbase.master.HMaster: Main processing loop: ProcessRegionClose of content,0c4b7c2825f674510a511233e9e0c539,1230530122456, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
2008-12-29 12:19:32,078 DEBUG org.apache.hadoop.hbase.master.HMaster: Main processing loop: ProcessRegionClose of content,43f83c42e08bb0f4b1f6d1125f39f018,1230498357831, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
2008-12-29 12:19:32,299 INFO org.apache.hadoop.hbase.master.RegionManager: assigning region content,43f83c42e08bb0f4b1f6d1125f39f018,1230498357831 to server XX.XX.XX.34:60020
2008-12-29 12:19:32,300 INFO org.apache.hadoop.hbase.master.RegionManager: assigning region content,bb34d860d76c1eabbe2eb7d2ce8148d9,1230416266955 to server XX.XX.XX.34:60020
2008-12-29 12:19:32,301 INFO org.apache.hadoop.hbase.master.RegionManager: assigning region content,94b170cae87992c33c3913d74bb257e4,1230498360162 to server XX.XX.XX.34:60020
2008-12-29 12:19:32,301 INFO org.apache.hadoop.hbase.master.RegionManager: assigning region content,8ac5fbdd63b313ce252838a189c73438,1230530000480 to server XX.XX.XX.34:60020
2008-12-29 12:19:32,302 INFO org.apache.hadoop.hbase.master.RegionManager: assigning region content,36946541ed9a62f419cf7238d32a6a38,1230448587552 to server XX.XX.XX.34:60020
2008-12-29 12:19:32,302 INFO org.apache.hadoop.hbase.master.RegionManager: assigning region content,58221f5f3a79b7dd5e23c339c507a7c6,1230487059978 to server XX.XX.XX.34:60020
2008-12-29 12:19:32,303 INFO org.apache.hadoop.hbase.master.RegionManager: assigning region content,f9f5b2d035349cf4292ed7dd7e9823f0,1230505507313 to server XX.XX.XX.34:60020
2008-12-29 12:19:32,303 INFO org.apache.hadoop.hbase.master.RegionManager: assigning region content,4b30e2a8b7949ed62e097824969f8bca,1230448501152 to server XX.XX.XX.34:60020
2008-12-29 12:19:32,304 INFO org.apache.hadoop.hbase.master.RegionManager: assigning region content,0c4b7c2825f674510a511233e9e0c539,1230530122456 to server XX.XX.XX.34:60020
2008-12-29 12:19:35,080 INFO org.apache.hadoop.hbase.master.ServerManager: Received MSG_REPORT_CLOSE: content,3ea6e20cf48a32fc063912ccae0e960e,1230416307426 from XX.XX.XX.51:60020
2008-12-29 12:19:35,081 INFO org.apache.hadoop.hbase.master.ServerManager: Received MSG_REPORT_CLOSE: content,07730cecbb5b13364cbe17af5778f983,1230448573272 from XX.XX.XX.51:60020
2008-12-29 12:19:35,081 DEBUG org.apache.hadoop.hbase.master.HMaster: Main processing loop: ProcessRegionClose of content,3ea6e20cf48a32fc063912ccae0e960e,1230416307426, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
2008-12-29 12:19:35,081 INFO org.apache.hadoop.hbase.master.ServerManager: Received MSG_REPORT_CLOSE: content,e8c750a5983137306e6b3a84eb1fd6e6,1230424193882 from XX.XX.XX.51:60020
2008-12-29 12:19:35,081 DEBUG org.apache.hadoop.hbase.master.HMaster: Main processing loop: ProcessRegionClose of content,07730cecbb5b13364cbe17af5778f983,1230448573272, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
2008-12-29 12:19:35,081 INFO org.apache.hadoop.hbase.master.ServerManager: Received MSG_REPORT_CLOSE: content,29be0a07dece4e9bb318c4d253807287,1230356680860 from XX.XX.XX.51:60020
2008-12-29 12:19:35,081 DEBUG org.apache.hadoop.hbase.master.HMaster: Main processing loop: ProcessRegionClose of content,e8c750a5983137306e6b3a84eb1fd6e6,1230424193882, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
2008-12-29 12:19:35,081 INFO org.apache.hadoop.hbase.master.ServerManager: Received MSG_REPORT_CLOSE: content,23893c82d792ff5c9d3ff99123bc1773,1230390013767 from XX.XX.XX.51:60020
2008-12-29 12:19:35,081 DEBUG org.apache.hadoop.hbase.master.HMaster: Main processing loop: ProcessRegionClose of content,29be0a07dece4e9bb318c4d253807287,1230356680860, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
2008-12-29 12:19:35,081 INFO org.apache.hadoop.hbase.master.ServerManager: Received MSG_REPORT_CLOSE: content,e76475012b59500d25000aa7658bc279,1230498762282 from XX.XX.XX.51:60020
2008-12-29 12:19:35,081 DEBUG org.apache.hadoop.hbase.master.HMaster: Main processing loop: ProcessRegionClose of content,23893c82d792ff5c9d3ff99123bc1773,1230390013767, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
2008-12-29 12:19:35,081 INFO org.apache.hadoop.hbase.master.ServerManager: Received MSG_REPORT_CLOSE: result_domain,cn.com.sg.www,1230498785950 from XX.XX.XX.51:60020
2008-12-29 12:19:35,081 DEBUG org.apache.hadoop.hbase.master.HMaster: Main processing loop: ProcessRegionClose of content,e76475012b59500d25000aa7658bc279,1230498762282, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
2008-12-29 12:19:35,081 INFO org.apache.hadoop.hbase.master.ServerManager: Received MSG_REPORT_CLOSE: content,c7b7e7a475765e16d0bbf1e51c95e85d,1230519854914 from XX.XX.XX.51:60020
2008-12-29 12:19:35,081 DEBUG org.apache.hadoop.hbase.master.HMaster: Main processing loop: ProcessRegionClose of result_domain,cn.com.sg.www,1230498785950, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
2008-12-29 12:19:35,081 INFO org.apache.hadoop.hbase.master.ServerManager: Received MSG_REPORT_CLOSE: content,ec0ec4d005ee7da14cbd1182339f8cf4,1230416299322 from XX.XX.XX.51:60020
2008-12-29 12:19:35,081 DEBUG org.apache.hadoop.hbase.master.HMaster: Main processing loop: ProcessRegionClose of content,c7b7e7a475765e16d0bbf1e51c95e85d,1230519854914, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
2008-12-29 12:19:35,081 INFO org.apache.hadoop.hbase.master.ServerManager: Received MSG_REPORT_CLOSE: content,e16b2ea9f6da8b32fa96ab3490e3d849,1230424086678 from XX.XX.XX.51:60020
2008-12-29 12:19:35,081 DEBUG org.apache.hadoop.hbase.master.HMaster: Main processing loop: ProcessRegionClose of content,ec0ec4d005ee7da14cbd1182339f8cf4,1230416299322, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
2008-12-29 12:19:35,082 DEBUG org.apache.hadoop.hbase.master.HMaster: Main processing loop: ProcessRegionClose of content,e16b2ea9f6da8b32fa96ab3490e3d849,1230424086678, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
2008-12-29 12:19:35,083 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 9 on 60000, call regionServerReport(address: XX.XX.XX.51:60020, startcode: 1230571104777, load: (requests=0, regions=64, usedHeap=99, maxHeap=1777), [Lorg.
apache.hadoop.hbase.HMsg;@3e2dce4e, [Lorg.apache.hadoop.hbase.HRegionInfo;@314382c6) from XX.XX.XX.51:55371: error: java.io.IOException: java.lang.IllegalStateException: Cannot set a region to be closed &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; it was not already marked as clo
sing. Region: content,ec0ec4d005ee7da14cbd1182339f8cf4,1230416299322
java.io.IOException: java.lang.IllegalStateException: Cannot set a region to be closed &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; it was not already marked as closing. Region: content,ec0ec4d005ee7da14cbd1182339f8cf4,1230416299322
        at org.apache.hadoop.hbase.master.RegionManager$RegionState.setClosed(RegionManager.java:1108)
        at org.apache.hadoop.hbase.master.RegionManager.setClosed(RegionManager.java:816)
        at org.apache.hadoop.hbase.master.ServerManager.processMsgs(ServerManager.java:377)
        at org.apache.hadoop.hbase.master.ServerManager.processRegionServerAllsWell(ServerManager.java:327)
        at org.apache.hadoop.hbase.master.ServerManager.regionServerReport(ServerManager.java:240)
        at org.apache.hadoop.hbase.master.HMaster.regionServerReport(HMaster.java:570)
        at sun.reflect.GeneratedMethodAccessor2.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.hadoop.hbase.ipc.HBaseRPC$Server.call(HBaseRPC.java:632)
        at org.apache.hadoop.hbase.ipc.HBaseServer$Handler.run(HBaseServer.java:894)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;apurtel cluster&lt;/p&gt;</environment>
        <key id="12411446">HBASE-1098</key>
            <summary>IllegalStateException: Cannot set a region to be closed it it was not already marked as closing</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12411545">HBASE-1104</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jimk">Jim Kellerman</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Dec 2008 23:53:36 +0000</created>
                <updated>Sun, 13 Sep 2009 22:26:36 +0000</updated>
                            <resolved>Fri, 9 Jan 2009 01:49:20 +0000</resolved>
                                                    <fixVersion>0.19.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12659697" author="stack" created="Mon, 29 Dec 2008 23:55:59 +0000"  >&lt;p&gt;Make state members of RegionState volatile.&lt;/p&gt;</comment>
                            <comment id="12659698" author="stack" created="Mon, 29 Dec 2008 23:56:28 +0000"  >&lt;p&gt;Bringing into 0.19.0.&lt;/p&gt;</comment>
                            <comment id="12659699" author="stack" created="Mon, 29 Dec 2008 23:57:46 +0000"  >&lt;p&gt;Committed attempted fix.  Reopen if it doesn&apos;t cut it.&lt;/p&gt;</comment>
                            <comment id="12659701" author="stack" created="Tue, 30 Dec 2008 00:00:32 +0000"  >&lt;p&gt;I see this issue multiple times in the master log on the apurtell cluster.&lt;/p&gt;</comment>
                            <comment id="12659897" author="stack" created="Tue, 30 Dec 2008 19:13:12 +0000"  >&lt;p&gt;Looking at another example of this, might be the regionserver sending same message twice.  Will keep looking.&lt;/p&gt;</comment>
                            <comment id="12659932" author="stack" created="Tue, 30 Dec 2008 20:32:20 +0000"  >&lt;p&gt;Reopening.  Fix didn&apos;t get it and more study shows that something is up w/ the transition around close.&lt;/p&gt;</comment>
                            <comment id="12659934" author="stack" created="Tue, 30 Dec 2008 20:34:22 +0000"  >&lt;p&gt;Committing this patch.  Changes the RegionState ISEs to report current state rather than just region name.  Somethign is up w/ the synchronization blocks.  They are not covering as we think (thats working theory).&lt;/p&gt;</comment>
                            <comment id="12662217" author="jimk" created="Fri, 9 Jan 2009 01:49:19 +0000"  >&lt;p&gt;Committed with changes for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1104&quot; title=&quot;Doubly-assigned regions redux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1104&quot;&gt;&lt;del&gt;HBASE-1104&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12396926" name="1098-p2.patch" size="2894" author="stack" created="Tue, 30 Dec 2008 20:34:22 +0000"/>
                            <attachment id="12396874" name="1098.patch" size="1608" author="stack" created="Mon, 29 Dec 2008 23:55:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 9 Jan 2009 01:49:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31988</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 50 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hbbj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99096</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>