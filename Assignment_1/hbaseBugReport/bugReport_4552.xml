<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:19:58 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4552/HBASE-4552.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4552] multi-CF bulk load is not atomic across column families</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4552</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Currently the bulk load API simply imports one HFile at a time. With multi-column-family support, this is inappropriate, since different CFs show up separately. Instead, the IPC endpoint should take a of CF -&amp;gt; HFiles, so we can online them all under a single region-wide lock.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12526154">HBASE-4552</key>
            <summary>multi-CF bulk load is not atomic across column families</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jmhsieh">Jonathan Hsieh</assignee>
                                    <reporter username="tlipcon">Todd Lipcon</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 Oct 2011 05:21:02 +0000</created>
                <updated>Wed, 16 Nov 2016 21:02:39 +0000</updated>
                            <resolved>Tue, 1 Nov 2011 17:06:40 +0000</resolved>
                                    <version>0.92.0</version>
                                    <fixVersion>0.92.0</fixVersion>
                                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                                                            <comments>
                            <comment id="13124506" author="yuzhihong@gmail.com" created="Mon, 10 Oct 2011 21:45:25 +0000"  >&lt;p&gt;One solution is to add the following method to HRegionInterface:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void bulkLoadHFile(List&amp;lt;Pair&amp;lt;&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[], &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;&amp;gt; familyPaths, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] regionName)
  &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;familyPaths is a list of &amp;lt;family, hfilePath&amp;gt; pairs for the same region identified by regionName.&lt;/p&gt;

&lt;p&gt;LoadIncrementalHFiles would need to group HFiles for the same region together before calling the above method.&lt;/p&gt;</comment>
                            <comment id="13124511" author="tlipcon" created="Mon, 10 Oct 2011 21:47:56 +0000"  >&lt;p&gt;yep, that&apos;s what I meant, but the implementation isn&apos;t quite trivial since we have to do the locking at a higher level, so the change is made visible atomically.&lt;/p&gt;</comment>
                            <comment id="13124521" author="yuzhihong@gmail.com" created="Mon, 10 Oct 2011 22:08:46 +0000"  >&lt;p&gt;For HRegion, we can introduce the following new method:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void bulkLoadHFile(List&amp;lt;Pair&amp;lt;&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[], &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;&amp;gt; familyPaths)
  &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;where familyPaths is a list of &amp;lt;family, hfilePath&amp;gt; pairs identifying HFile path and the underlying family the HFile should be loaded to.&lt;/p&gt;</comment>
                            <comment id="13126044" author="yuzhihong@gmail.com" created="Wed, 12 Oct 2011 19:00:31 +0000"  >&lt;p&gt;Since LoadIncrementalHFiles uses ExecutorService to achieve parallelism, we should use Queue&amp;lt;Pair&amp;lt;byte[], String&amp;gt;&amp;gt; in place of List above so that concurrent queue can be instantiated.&lt;/p&gt;</comment>
                            <comment id="13129013" author="tlipcon" created="Mon, 17 Oct 2011 17:19:33 +0000"  >&lt;p&gt;The trick is making sure it&apos;s atomic inside the region server - not just that the client sends all of the files for a given region in one RPC. If there are any concurrent scanners, then they should either see all of the new data or none of the new data on a given row. So we need some region-wide coordination. I think probably we have to take a write-lock on HRegion#lock&lt;/p&gt;</comment>
                            <comment id="13133190" author="jmhsieh" created="Fri, 21 Oct 2011 23:34:38 +0000"  >&lt;p&gt;Plan&lt;/p&gt;

&lt;p&gt;1) Test to show there is an atomicity problem.  Likely just does not use LoadIncrementalHFiles&lt;br/&gt;
2) Fix for the region server side.&lt;br/&gt;
3) Rewrite of LoadIncrementalHFiles so that it groups the proper HFiles into the new bulkLoadHFile calls.  This will likely have two parallel steps - the first gather enough info to group HFiles and then the second that attempts to bulk load.&lt;/p&gt;</comment>
                            <comment id="13133677" author="jmhsieh" created="Sun, 23 Oct 2011 16:02:31 +0000"  >&lt;p&gt;One more piece: Mechanism to atomically rollback if a partial failures encountered when attempting to bulk load multiple families.  &lt;/p&gt;

&lt;p&gt;For example, let&apos;s say I want to bulk load a region with cfs A, B, C.  I issue a call to an RS region to atomically bulkload the HFiles.  The RS loads A and B successfully but fails on C (hdfs failure, or rs goes down, etc).  We should rollback A and B &amp;#8211; if we don&apos;t we would have A and B loaded but not C and have an atomicity violation.  &lt;/p&gt;



</comment>
                            <comment id="13133679" author="yuzhihong@gmail.com" created="Sun, 23 Oct 2011 16:17:07 +0000"  >&lt;p&gt;In case of such faulty condition (hdfs failure), would it be easier if we record which column families encountered error and retry loading them after faulty condition recovers ?&lt;/p&gt;</comment>
                            <comment id="13133696" author="jmhsieh" created="Sun, 23 Oct 2011 17:31:33 +0000"  >&lt;p&gt;If we have an hdfs failure, we won&apos;t be able to record or update information about what failed. &lt;/p&gt;

&lt;p&gt;This make me think we need to journal/log the intended atomic actions.  Once we have the log, we can act depending on the situation:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;If we complete successfully, we remove/invalidate log and carry on.&lt;/li&gt;
	&lt;li&gt;If we fail (can&apos;t write, rs goes down and restarts), we check to see if everything is in.  If it isn&apos;t we rollback the subset of hfile loads that had happened.  If rollback fails, we still have the log, so we can try later or maybe we kill the RS?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;How about we make this a subtask/follow on jira.  The first cut will just detect the situation and  log error messages (similar to what currently happens).  A follow-on task will discuss and add/implement a recovery mechanism?&lt;/p&gt;</comment>
                            <comment id="13133701" author="yuzhihong@gmail.com" created="Sun, 23 Oct 2011 17:51:30 +0000"  >&lt;p&gt;It is fine to implement recovery in another JIRA. &lt;/p&gt;</comment>
                            <comment id="13134138" author="jmhsieh" created="Mon, 24 Oct 2011 15:22:31 +0000"  >&lt;p&gt;Created recovery mechanism jira at &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4652&quot; title=&quot;Mechanism for atomic recovery from partial failure when atomically bulk-loading multi-CF rows.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4652&quot;&gt;HBASE-4652&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13138873" author="jmhsieh" created="Fri, 28 Oct 2011 22:34:02 +0000"  >&lt;p&gt;Consolidated patch with &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4649&quot; title=&quot;Add atomic bulk load function to region server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4649&quot;&gt;&lt;del&gt;HBASE-4649&lt;/del&gt;&lt;/a&gt; v3, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4650&quot; title=&quot;Update LoadIncrementalHFiles to use atomic bulk load RS mechanism&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4650&quot;&gt;&lt;del&gt;HBASE-4650&lt;/del&gt;&lt;/a&gt; v3, and &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4677&quot; title=&quot;Remove old single bulkLoadHFile method&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4677&quot;&gt;&lt;del&gt;HBASE-4677&lt;/del&gt;&lt;/a&gt; v1.&lt;/p&gt;</comment>
                            <comment id="13138878" author="jmhsieh" created="Fri, 28 Oct 2011 22:35:58 +0000"  >&lt;p&gt;Posted consolidated patch.&lt;/p&gt;</comment>
                            <comment id="13138918" author="yuzhihong@gmail.com" created="Fri, 28 Oct 2011 23:21:58 +0000"  >&lt;p&gt;After applying the consolidated patch, I got:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.0.2:testCompile (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-testCompile) on project hbase: Compilation failure: Compilation failure:
[ERROR] /Users/zhihyu/trunk-hbase/src/test/java/org/apache/hadoop/hbase/mapreduce/TestLoadIncrementalHFilesSplitRecovery.java:[190,34] cannot find symbol
[ERROR] symbol  : method getTestDir(java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;)
[ERROR] location: class org.apache.hadoop.hbase.HBaseTestingUtility
[ERROR] 
[ERROR] /Users/zhihyu/trunk-hbase/src/test/java/org/apache/hadoop/hbase/mapreduce/TestLoadIncrementalHFilesSplitRecovery.java:[216,34] cannot find symbol
[ERROR] symbol  : method getTestDir(java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;)
[ERROR] location: class org.apache.hadoop.hbase.HBaseTestingUtility
[ERROR] 
[ERROR] /Users/zhihyu/trunk-hbase/src/test/java/org/apache/hadoop/hbase/mapreduce/TestLoadIncrementalHFilesSplitRecovery.java:[309,36] cannot find symbol
[ERROR] symbol  : method getTestDir(java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;)
[ERROR] location: class org.apache.hadoop.hbase.HBaseTestingUtility
[ERROR] 
[ERROR] /Users/zhihyu/trunk-hbase/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegionServerBulkLoad.java:[123,36] cannot find symbol
[ERROR] symbol  : method getTestDir(java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;)
[ERROR] location: class org.apache.hadoop.hbase.HBaseTestingUtility
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;For TRUNK, there is no such error.&lt;/p&gt;</comment>
                            <comment id="13138977" author="jmhsieh" created="Fri, 28 Oct 2011 23:55:36 +0000"  >&lt;p&gt;This was due to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4634&quot; title=&quot;&amp;quot;test.build.data&amp;quot; property overused leading to write data at the wrong place&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4634&quot;&gt;&lt;del&gt;HBASE-4634&lt;/del&gt;&lt;/a&gt; which got committed two days ago.  The old getTestDir was a public method and apparently was just removed.  This will probably break on trunk as well.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/hbase/commit/ed21cd6c4c266f610352d76d3d4b6f5cff492a97#src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hbase/commit/ed21cd6c4c266f610352d76d3d4b6f5cff492a97#src/test/java/org/apache/hadoop/hbase/HBaseTestingUtility.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I think this should be replaced with getDataTestDir calls (thats what the old bulk load test calls to getTestDir were changed to).&lt;/p&gt;</comment>
                            <comment id="13139029" author="jmhsieh" created="Sat, 29 Oct 2011 00:53:10 +0000"  >&lt;p&gt;Consolidated patch compatible with trunk/0.92 after &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4634&quot; title=&quot;&amp;quot;test.build.data&amp;quot; property overused leading to write data at the wrong place&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4634&quot;&gt;&lt;del&gt;HBASE-4634&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13139074" author="hadoopqa" created="Sat, 29 Oct 2011 03:29:52 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12501415/hbase-4552.consolidated.v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12501415/hbase-4552.consolidated.v2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 7 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -166 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 2 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestMultiParallel&lt;br/&gt;
                  org.apache.hadoop.hbase.coprocessor.TestMasterObserver&lt;br/&gt;
                  org.apache.hadoop.hbase.TestRegionRebalancing&lt;br/&gt;
                  org.apache.hadoop.hbase.master.TestDefaultLoadBalancer&lt;br/&gt;
                  org.apache.hadoop.hbase.master.TestDistributedLogSplitting&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/92//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/92//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/92//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/92//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/92//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/92//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13139136" author="hadoopqa" created="Sat, 29 Oct 2011 06:44:30 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12501415/hbase-4552.consolidated.v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12501415/hbase-4552.consolidated.v2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 7 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -166 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 2 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.coprocessor.TestMasterObserver&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestLoadIncrementalHFilesSplitRecovery&lt;br/&gt;
                  org.apache.hadoop.hbase.master.TestMasterFailover&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat&lt;br/&gt;
                  org.apache.hadoop.hbase.master.TestDistributedLogSplitting&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/95//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/95//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/95//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/95//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/95//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/95//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13139398" author="hadoopqa" created="Sat, 29 Oct 2011 19:09:20 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12501459/hbase-4552.consolidated.v3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12501459/hbase-4552.consolidated.v3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 7 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -166 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 2 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.mapreduce.TestLoadIncrementalHFilesSplitRecovery&lt;br/&gt;
                  org.apache.hadoop.hbase.master.TestMasterFailover&lt;br/&gt;
                  org.apache.hadoop.hbase.master.TestDistributedLogSplitting&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/99//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/99//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/99//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/99//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/99//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/99//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13139487" author="yuzhihong@gmail.com" created="Sat, 29 Oct 2011 22:59:26 +0000"  >&lt;p&gt;Fix HTable creation in tests.&lt;/p&gt;</comment>
                            <comment id="13139509" author="hadoopqa" created="Sun, 30 Oct 2011 00:59:14 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12501481/hbase-4552.consolidated.v4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12501481/hbase-4552.consolidated.v4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated -166 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 2 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.master.TestMasterFailover&lt;br/&gt;
                  org.apache.hadoop.hbase.coprocessor.TestRegionServerCoprocessorExceptionWithAbort&lt;br/&gt;
                  org.apache.hadoop.hbase.master.TestDistributedLogSplitting&lt;br/&gt;
                  org.apache.hadoop.hbase.coprocessor.TestRegionServerCoprocessorExceptionWithRemove&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/101//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/101//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/101//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/101//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/101//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/101//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13139533" author="yuzhihong@gmail.com" created="Sun, 30 Oct 2011 04:29:02 +0000"  >&lt;p&gt;I verified that except for TestRegionServerCoprocessorExceptionWithXXX tests, the other failures were caused by too many open files.&lt;/p&gt;</comment>
                            <comment id="13140212" author="ram_krish" created="Mon, 31 Oct 2011 15:10:27 +0000"  >&lt;p&gt;In test case TestLoadIncrementalHFilesSplitRecovery&lt;br/&gt;
new HTable(tableName) is getting used.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Creating table &quot;&lt;/span&gt; + table);
+      HTableDescriptor htd = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HTableDescriptor(table);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;As part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4253&quot; title=&quot;Intermittent test failure because of missing config parameter in new HTable(tablename)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4253&quot;&gt;&lt;del&gt;HBASE-4253&lt;/del&gt;&lt;/a&gt; it was found that using new HTableDescriptor(conf, tablename) is the best way.  Also check &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4138&quot; title=&quot;If zookeeper.znode.parent is not specifed explicitly in Client code then HTable object loops continuously waiting for the root region by using /hbase as the base node.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4138&quot;&gt;&lt;del&gt;HBASE-4138&lt;/del&gt;&lt;/a&gt;(comment 25/Aug/11 09:19) for reference.&lt;br/&gt;
This will prevent the failure that happened in &lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/99/testReport/org.apache.hadoop.hbase.mapreduce/TestLoadIncrementalHFilesSplitRecovery/testBulkLoadPhaseRecovery/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/99/testReport/org.apache.hadoop.hbase.mapreduce/TestLoadIncrementalHFilesSplitRecovery/testBulkLoadPhaseRecovery/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Correct me if am wrong. &lt;/p&gt;</comment>
                            <comment id="13140317" author="jmhsieh" created="Mon, 31 Oct 2011 17:02:34 +0000"  >&lt;p&gt;@Ram, on trunk or 0.92 branches, HTableDescriptor(conf,tablename) doesn&apos;t seem to be in the api.  In patch v4, it seems like all the HTable constructors have been updated to explicitly take a the configuration reference.&lt;/p&gt;

&lt;p&gt;I&apos;m assuming you meant HTable? &lt;/p&gt;</comment>
                            <comment id="13140344" author="yuzhihong@gmail.com" created="Mon, 31 Oct 2011 17:27:23 +0000"  >&lt;p&gt;Integrated to 0.92 and TRUNK.&lt;/p&gt;

&lt;p&gt;Thanks for the patch Jonathan.&lt;/p&gt;

&lt;p&gt;Thanks for the review Todd.&lt;/p&gt;</comment>
                            <comment id="13140367" author="ram_krish" created="Mon, 31 Oct 2011 17:43:40 +0000"  >&lt;p&gt;@Jon&lt;br/&gt;
Yes.. i was wrong...Sorry for that. So may be will chk the reason for failure once again..Thanks Jon&lt;/p&gt;</comment>
                            <comment id="13140584" author="hudson" created="Mon, 31 Oct 2011 21:38:19 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2392 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2392/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2392/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4552&quot; title=&quot;multi-CF bulk load is not atomic across column families&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4552&quot;&gt;&lt;del&gt;HBASE-4552&lt;/del&gt;&lt;/a&gt;  multi-CF bulk load is not atomic across column families (Jonathan Hsieh)&lt;/p&gt;

&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/ipc/HRegionInterface.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/mapreduce/LoadIncrementalHFiles.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/Store.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/resources/hbase-default.xml&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/mapreduce/TestLoadIncrementalHFilesSplitRecovery.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegionServerBulkLoad.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestWALReplay.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13140834" author="hudson" created="Tue, 1 Nov 2011 02:08:00 +0000"  >&lt;p&gt;Integrated in HBase-0.92 #90 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92/90/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92/90/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4552&quot; title=&quot;multi-CF bulk load is not atomic across column families&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4552&quot;&gt;&lt;del&gt;HBASE-4552&lt;/del&gt;&lt;/a&gt;  multi-CF bulk load is not atomic across column families (Jonathan Hsieh)&lt;/p&gt;

&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/ipc/HRegionInterface.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/mapreduce/LoadIncrementalHFiles.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/regionserver/Store.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/resources/hbase-default.xml&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/mapreduce/TestLoadIncrementalHFilesSplitRecovery.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegionServerBulkLoad.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestWALReplay.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13146066" author="hudson" created="Tue, 8 Nov 2011 04:08:57 +0000"  >&lt;p&gt;Integrated in HBase-0.92 #119 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92/119/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92/119/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4740&quot; title=&quot;[bulk load]  the HBASE-4552 API can&amp;#39;t tell if errors on region server are recoverable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4740&quot;&gt;&lt;del&gt;HBASE-4740&lt;/del&gt;&lt;/a&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;bulk load&amp;#93;&lt;/span&gt; the &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4552&quot; title=&quot;multi-CF bulk load is not atomic across column families&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4552&quot;&gt;&lt;del&gt;HBASE-4552&lt;/del&gt;&lt;/a&gt; API can&apos;t tell if errors on region server are recoverable&lt;br/&gt;
               (Jonathan Hsieh)&lt;/p&gt;

&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/ipc/HRegionInterface.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/mapreduce/LoadIncrementalHFiles.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/resources/hbase-default.xml&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/mapreduce/TestLoadIncrementalHFilesSplitRecovery.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13146100" author="hudson" created="Tue, 8 Nov 2011 06:12:15 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2420 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2420/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2420/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4740&quot; title=&quot;[bulk load]  the HBASE-4552 API can&amp;#39;t tell if errors on region server are recoverable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4740&quot;&gt;&lt;del&gt;HBASE-4740&lt;/del&gt;&lt;/a&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;bulk load&amp;#93;&lt;/span&gt; the &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4552&quot; title=&quot;multi-CF bulk load is not atomic across column families&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4552&quot;&gt;&lt;del&gt;HBASE-4552&lt;/del&gt;&lt;/a&gt; API can&apos;t tell if errors on region server are recoverable&lt;br/&gt;
               (Jonathan Hsieh)&lt;/p&gt;

&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/ipc/HRegionInterface.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/mapreduce/LoadIncrementalHFiles.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/resources/hbase-default.xml&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/mapreduce/TestLoadIncrementalHFilesSplitRecovery.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15016552" author="lars_francke" created="Fri, 20 Nov 2015 11:55:42 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="12529713">HBASE-4718</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12504277">HBASE-3782</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12528498">HBASE-4652</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12501390" name="hbase-4552.consolidated.patch" size="55997" author="jmhsieh" created="Fri, 28 Oct 2011 22:34:02 +0000"/>
                            <attachment id="12501415" name="hbase-4552.consolidated.v2.patch" size="55952" author="jmhsieh" created="Sat, 29 Oct 2011 00:53:10 +0000"/>
                            <attachment id="12501459" name="hbase-4552.consolidated.v3.patch" size="55952" author="yuzhihong@gmail.com" created="Sat, 29 Oct 2011 15:59:12 +0000"/>
                            <attachment id="12501481" name="hbase-4552.consolidated.v4.patch" size="54536" author="yuzhihong@gmail.com" created="Sat, 29 Oct 2011 22:58:43 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12528420">HBASE-4649</subtask>
                            <subtask id="12528421">HBASE-4650</subtask>
                            <subtask id="12528793">HBASE-4677</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 10 Oct 2011 21:45:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>49827</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10342"><![CDATA[Incompatible change]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hran:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>101684</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>HRegion.bulkLoadHFile() has been removed in 0.92 and TRUNK.&lt;br/&gt;
HRegion.bulkLoadHFiles() is introduced for multi-family bulk load.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>