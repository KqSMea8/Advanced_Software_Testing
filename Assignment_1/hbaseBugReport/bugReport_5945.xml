<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:32:23 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5945/HBASE-5945.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5945] Reduce buffer copies in IPC server response path</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5945</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The new PB code is sloppy with buffers and makes several needless copies. This increases GC time a lot. A few simple changes can cut this back down.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12554024">HBASE-5945</key>
            <summary>Reduce buffer copies in IPC server response path</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="tlipcon">Todd Lipcon</reporter>
                        <labels>
                    </labels>
                <created>Sat, 5 May 2012 01:16:48 +0000</created>
                <updated>Mon, 16 Dec 2013 18:46:59 +0000</updated>
                            <resolved>Sat, 23 Nov 2013 20:11:22 +0000</resolved>
                                    <version>0.95.2</version>
                                    <fixVersion>0.98.0</fixVersion>
                    <fixVersion>0.96.1</fixVersion>
                                    <component>IPC/RPC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>18</watches>
                                                                <comments>
                            <comment id="13268846" author="tlipcon" created="Sat, 5 May 2012 01:22:49 +0000"  >&lt;p&gt;Here&apos;s a first pass. I don&apos;t have great benchmark results, but it looked from my &quot;jstat -gcutil&quot; output like this cut the amount of allocation by a factor of 2.5x or so for a benchmark that returned large responses.&lt;/p&gt;

&lt;p&gt;Can probably get rid of at least one more copy in there with a bit more trickery.&lt;/p&gt;</comment>
                            <comment id="13268863" author="zhihyu@ebaysf.com" created="Sat, 5 May 2012 02:16:24 +0000"  >&lt;p&gt;Interesting finding.&lt;/p&gt;

&lt;p&gt;Can I assume that the number of occurrences of Message&apos;s is higher than that of Result&apos;s ?&lt;br/&gt;
If so, the following check can be lifted above that for Result.class:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (instance &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; Message) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13269097" author="tlipcon" created="Sun, 6 May 2012 01:15:19 +0000"  >&lt;p&gt;New rev gets rid of some more. This seems to make a noticeable difference in my oprofile output and YCSB results. Would appreciate if other folks could verify&lt;/p&gt;

&lt;p&gt;(yes, patch still needs more work, please don&apos;t review for style/licenses/etc)&lt;/p&gt;</comment>
                            <comment id="13269123" author="stack" created="Sun, 6 May 2012 05:29:37 +0000"  >&lt;p&gt;Making critical so we don&apos;t overlook this work.&lt;/p&gt;</comment>
                            <comment id="13269128" author="stack" created="Sun, 6 May 2012 05:43:42 +0000"  >&lt;p&gt;Looks great Todd.&lt;/p&gt;

&lt;p&gt;Could we keep this DataOutputBuffer for reuse?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      DataOutputBuffer buf = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DataOutputBuffer(size);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13269213" author="tlipcon" created="Sun, 6 May 2012 13:09:42 +0000"  >&lt;p&gt;Yep, I think the next improvement is to use thread-local or connection-local buffers - perhaps even direct buffers. There&apos;s still one more copy from the heap byte buffer to a direct buffer within the SocketChannel.write() which would be avoided if we serialized directly into a DirectByteBuffer. Have to benchmark whether that&apos;s worth it.&lt;/p&gt;

&lt;p&gt;We should also do the same hacks on the client side of the connection - should get similar gains.&lt;/p&gt;</comment>
                            <comment id="13269276" author="tlipcon" created="Sun, 6 May 2012 20:37:44 +0000"  >&lt;p&gt;attached does the optimization on the client side as well, and fixes a bug with serializing exception responses (forgot to length-prefix it)&lt;/p&gt;</comment>
                            <comment id="13269722" author="stack" created="Mon, 7 May 2012 15:59:40 +0000"  >&lt;p&gt;/me hearts todd&lt;/p&gt;</comment>
                            <comment id="13277639" author="hadoopqa" created="Thu, 17 May 2012 07:23:34 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12525785/hbase-5495.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12525785/hbase-5495.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 2 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1908//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1908//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13537592" author="tlipcon" created="Fri, 21 Dec 2012 01:15:30 +0000"  >&lt;p&gt;Was reminded of this JIRA today. Anyone feel like picking it up? I&apos;m a delinquent HBase contributor these days, so probably better if someone steals it from me (sorry guys!)&lt;/p&gt;</comment>
                            <comment id="13537667" author="stack" created="Fri, 21 Dec 2012 04:24:26 +0000"  >&lt;p&gt;Assigning myself unless someone else wants to take it. I am trying to dig in on rpc after the cp&apos;s have all gone over to pb.&lt;/p&gt;</comment>
                            <comment id="13538860" author="devaraj" created="Sat, 22 Dec 2012 17:05:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;, I am up for helping out with this. I&apos;ll try to do some analysis as well and get back... I was planning to do this as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6614&quot; title=&quot;General cleanup/optimizations of the protobuf RPC engine &amp;amp; associated RPC code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6614&quot;&gt;&lt;del&gt;HBASE-6614&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13540119" author="devaraj" created="Thu, 27 Dec 2012 19:46:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;, hope it is okay with you that I am attaching a patch here... (I was tempted to do a patch for this issue..)&lt;/p&gt;

&lt;p&gt;The main change in this patch is that it removes the RpcRequestBody from RPC.proto, and instead serializes the rpc method argument directly to the underlying output. There is a lot of change associated with this removal in the patch.&lt;/p&gt;

&lt;p&gt;I didn&apos;t change the serialization of the rpc header fields yet (as was done by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tlipcon&quot; class=&quot;user-hover&quot; rel=&quot;tlipcon&quot;&gt;Todd Lipcon&lt;/a&gt; in his earlier patch). The reason being that I don&apos;t think the header part is a concern since they will be a few 10s of bytes and mostly will be noise. The ser/de of the rpc request-body/response-body is where I tried to improve on. The codebase compiles with this patch now but there is work still left (and maybe I missed some buffer copies as well; need to dig some more).&lt;/p&gt;</comment>
                            <comment id="13544567" author="devaraj" created="Sat, 5 Jan 2013 04:03:52 +0000"  >&lt;p&gt;Had uploaded an incomplete patch earlier.. This is the more appropriate one.&lt;/p&gt;</comment>
                            <comment id="13544570" author="hadoopqa" created="Sat, 5 Jan 2013 04:12:34 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12563396/5945-in-progress.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12563396/5945-in-progress.2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3873//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3873//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13546671" author="stack" created="Tue, 8 Jan 2013 07:26:54 +0000"  >&lt;p&gt;Looked at Todds hackery again.  Its lovely.  I&apos;d say lets try get it in.&lt;/p&gt;

&lt;p&gt;Looking at DD&apos;s patch, removing special response and request types looks right.... sending the request and response Messages instead w/ method name stuff moved up into header (other changes are coming down the pipe I&apos;d say; e.g. hbase-7479 removes client protocol version altogether and error should be subsumed by response moved from response header .. but for later).&lt;/p&gt;

&lt;p&gt;EmptyMsg looks like it already exists.&lt;/p&gt;

&lt;p&gt;Is this saving a buffer copy or is it just doing what writeDelimitedTo does?&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;call.param.writeDelimitedTo(this.out);&lt;br/&gt;
+          CodedOutputStream cos = CodedOutputStream.newInstance(out,1); &lt;br/&gt;
+          cos.writeRawVarint32(call.rpcRequest.requestArg.getSerializedSize());&lt;br/&gt;
+          call.rpcRequest.requestArg.writeTo(cos);&lt;br/&gt;
+          cos.flush();&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;There seem to be classes missing from the patch, ClientSideRpcRequest?&lt;/p&gt;

&lt;p&gt;The Todd BufferChain looks nice.  Might as well use it if he has put up the code (and a test).  We&apos;ll want it for sure when we need to pass encoded data blocks after protobuf request/response (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7233&quot; title=&quot;Serializing KeyValues over RPC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7233&quot;&gt;&lt;del&gt;HBASE-7233&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;


</comment>
                            <comment id="13547049" author="devaraj" created="Tue, 8 Jan 2013 17:49:56 +0000"  >&lt;p&gt;I swear that I had generated the patch correctly but it seems like I uploaded the incorrect one again.. I&apos;ll update the patch shortly with the comments. Thanks for looking, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13548785" author="devaraj" created="Wed, 9 Jan 2013 18:30:14 +0000"  >&lt;p&gt;This is rebased patch (after &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7479&quot; title=&quot;Remove VersionedProtocol and ProtocolSignature from RPC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7479&quot;&gt;&lt;del&gt;HBASE-7479&lt;/del&gt;&lt;/a&gt;). I have updated RPC.proto in the patch with a description of what the RPC messages are. I think we can handle the KeyValue bytebuffers as well (in the RPC layer by defining a common interface for Message and ByteBuffer[]). For now, I haven&apos;t done it. I only introduced a responseBodyType blob that could be used to indicate the type of response. I also put in a TODO in RpcServer.java explaining the interface.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Is this saving a buffer copy or is it just doing what writeDelimitedTo does?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Actually, in principle it is doing the same thing as writeDelimitedTo. But writeDelimitedTo creates a buffer internally which is of little use since we are already writing the output to a buffer. I don&apos;t know whether this will make any difference or not in practice but I thought why simply create a buffer unnecessarily..I create CodedOutputStream with a buffer size of &apos;1&apos; (buffer size of &apos;0&apos; makes it throw exceptions..).  &lt;/p&gt;</comment>
                            <comment id="13548833" author="devaraj" created="Wed, 9 Jan 2013 19:01:41 +0000"  >&lt;p&gt;If we want to support BufferChain kind of request data for request as well, we&apos;d need to put in a field in the requestheader to indicate as such to the server.. (thinking aloud..).&lt;/p&gt;</comment>
                            <comment id="13548915" author="hadoopqa" created="Wed, 9 Jan 2013 19:52:52 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12563981/5945-in-progress.2.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12563981/5945-in-progress.2.1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 2 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces lines longer than 100&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestFromClientSide&lt;br/&gt;
                  org.apache.hadoop.hbase.TestLocalHBaseCluster&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 8 zombie test(s): 	at org.apache.hadoop.hbase.master.TestMasterFailover.testMasterFailoverWithMockedRITOnDeadRS(TestMasterFailover.java:833)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3951//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3951//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3951//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3951//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3951//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3951//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3951//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3951//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3951//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3951//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3951//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3951//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3951//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3951//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3951//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3951//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3951//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3951//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13551460" author="stack" created="Fri, 11 Jan 2013 19:51:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=devaraj&quot; class=&quot;user-hover&quot; rel=&quot;devaraj&quot;&gt;Devaraj Das&lt;/a&gt; Looking at the patch, there is a bunch of overlap with &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7533&quot; title=&quot;Write an RPC Specification for 0.96&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7533&quot;&gt;&lt;del&gt;HBASE-7533&lt;/del&gt;&lt;/a&gt; where we are trying to spec out what goes on wire before coding it up.  What you reckon?  If we remove the 7533 stuff from this patch, what is left over?  What buffer copies are we saving in particular?  Good on you boss.&lt;/p&gt;</comment>
                            <comment id="13551467" author="devaraj" created="Fri, 11 Jan 2013 19:56:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;, yes, there is overlap... I am currently trying to fix up &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7213&quot; title=&quot;Have HLog files for .META. and -ROOT- edits only&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7213&quot;&gt;&lt;del&gt;HBASE-7213&lt;/del&gt;&lt;/a&gt;&apos;s test failures. I&apos;ll circle back on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7533&quot; title=&quot;Write an RPC Specification for 0.96&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7533&quot;&gt;&lt;del&gt;HBASE-7533&lt;/del&gt;&lt;/a&gt; sometime by end of today or tomorrow. We can keep 7533 as a spec jira and use this for impl. Does it work. &lt;/p&gt;</comment>
                            <comment id="13551632" author="stack" created="Fri, 11 Jan 2013 23:30:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=devaraj&quot; class=&quot;user-hover&quot; rel=&quot;devaraj&quot;&gt;Devaraj Das&lt;/a&gt; I&apos;d say let this issue be about reducing buffer copies.  hbase-7533 should be spec., yeah.  New issue for implementation?  Or, just leave that over in hbase-7533.  Trying to implement the spec. will probably bring on a spec edit or two I&apos;d say.&lt;/p&gt;</comment>
                            <comment id="13551743" author="devaraj" created="Sat, 12 Jan 2013 01:42:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;, just trying to understand - are you saying that we preserve most of the current RPC header/body structure, and commit the patch here with a focus on removing buffer copies? (the RPC.proto in the last patch here has the description of the RPC header/body). Then follow it up on 7533 with the spec&apos;ed out RPC header/body and a separate patch ?&lt;/p&gt;</comment>
                            <comment id="13552350" author="stack" created="Sun, 13 Jan 2013 23:20:50 +0000"  >&lt;blockquote&gt;&lt;p&gt;....are you saying that we preserve most of the current RPC header/body structure, and commit the patch here with a focus on removing buffer copies?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No.  If we do that, we have to put rpc back together twice because it will have changed radically twice.  We will also reduce buffer copies that we may not be of use in the final rpc incarnation.  I was thinking we do the spec first over in 7533.  This issue would be about saving buffer copies after we put rpc back together after 7533.&lt;/p&gt;</comment>
                            <comment id="13553004" author="devaraj" created="Mon, 14 Jan 2013 19:09:07 +0000"  >&lt;p&gt;Okay, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;, this is fine. We can revisit this issue after &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7533&quot; title=&quot;Write an RPC Specification for 0.96&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7533&quot;&gt;&lt;del&gt;HBASE-7533&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13609722" author="devaraj" created="Fri, 22 Mar 2013 00:04:18 +0000"  >&lt;p&gt;Looked at this some. &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7905&quot; title=&quot;Add passing of optional cell blocks over rpc&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7905&quot;&gt;&lt;del&gt;HBASE-7905&lt;/del&gt;&lt;/a&gt; covered the improvements that have been discussed here. Maybe we can close this issue now..&lt;/p&gt;</comment>
                            <comment id="13615511" author="devaraj" created="Wed, 27 Mar 2013 17:20:28 +0000"  >&lt;p&gt;Downgrading priority since I don&apos;t think this is a relevant issue anymore. Please discuss if you feel otherwise.&lt;/p&gt;</comment>
                            <comment id="13615513" author="devaraj" created="Wed, 27 Mar 2013 17:21:24 +0000"  >&lt;p&gt;This patch is really stale. Canceling.&lt;/p&gt;</comment>
                            <comment id="13821080" author="stack" created="Wed, 13 Nov 2013 09:01:01 +0000"  >&lt;p&gt;Forward port Todd&apos;s old idea of saving copies by passing array of ByteBuffers to Channel rather than compose response in a buffer first before putting it on the wire.  Revives his BufferChain doohickey.&lt;/p&gt;

&lt;p&gt;Here&apos;s some comment on the changes.&lt;/p&gt;

&lt;p&gt;M hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/IPCUtil.java&lt;/p&gt;

&lt;p&gt;Added getDelimitedMessageAsByteBuffer(final Message m)&lt;br/&gt;
Removed no longer used write method and getDelimitedMessageBytes.&lt;/p&gt;

&lt;p&gt;M hbase-hadoop-compat/src/main/java/org/apache/hadoop/hbase/ipc/MetricsHBaseServerSource.java&lt;/p&gt;

&lt;p&gt;Changed bytes sent size from int to long (it is long in implementation, just not in interfaces)&lt;/p&gt;

&lt;p&gt;A hbase-server/src/main/java/org/apache/hadoop/hbase/ipc/BufferChain.java&lt;/p&gt;

&lt;p&gt;Class to carry an array of ByteBuffers and that can write the byte buffers in order&lt;br/&gt;
out to a GatheringByteChannel in chunks.&lt;/p&gt;

&lt;p&gt;M hbase-server/src/main/java/org/apache/hadoop/hbase/ipc/RpcServer.java&lt;/p&gt;

&lt;p&gt;Refactored response sending to use BufferChain.  We save on a composition of total&lt;br/&gt;
response in memory.  Instead we now pass the parts directly to the socket channel.&lt;/p&gt;

&lt;p&gt;Stuff is a bit ugly in the sasl handling because have to compose the message&lt;br/&gt;
in memory completely so can do the sasl wrapping; this undoes any savings but&lt;br/&gt;
I believe we are still ahead because we removed the serializing of the resulting&lt;br/&gt;
sasl array to an output stream backed by a new buffer.&lt;/p&gt;</comment>
                            <comment id="13821083" author="stack" created="Wed, 13 Nov 2013 09:06:10 +0000"  >&lt;p&gt;Stuff is very different now.  The attached patch gets the big idea.  The other fixups in hbase-5495.txt no longer apply.  There is no more a HbaseObjectWritable nor Invocation.  The hand-making of pbs I did not do but picked up the creation of CodedOutputStream using byte array to avoid it internally assigning buffer.  The RPCServer changes make sense still a little complicated by sasl wrapping but we still get a win I believe. &lt;/p&gt;

&lt;p&gt;Will try and do a bit of benchmarking...&lt;/p&gt;</comment>
                            <comment id="13821104" author="nkeywal" created="Wed, 13 Nov 2013 09:25:13 +0000"  >&lt;p&gt;+1 on the idea. I think we need to push byte buffers all over the place to save on all these copies.&lt;/p&gt;</comment>
                            <comment id="13822472" author="hadoopqa" created="Thu, 14 Nov 2013 14:21:40 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12613551/5945v2.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12613551/5945v2.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 hadoop2.0&lt;/font&gt;.  The patch failed to compile against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7862//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7862//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13823378" author="devaraj" created="Fri, 15 Nov 2013 07:35:44 +0000"  >&lt;p&gt;Skimmed it. Looks okay to me. Any chance of getting perf numbers. If not, fine as well. Also, just wondering would it be possible to apply the pattern on the read side as well?&lt;/p&gt;</comment>
                            <comment id="13824247" author="stack" created="Fri, 15 Nov 2013 23:43:54 +0000"  >&lt;p&gt;Fixes the h2 build failure (forgot to change the h2 compat module for the metrics change).  Does a little fix up on the end of TestIPC so I can do a bit of a benchmark on this patch.&lt;/p&gt;</comment>
                            <comment id="13824254" author="stack" created="Fri, 15 Nov 2013 23:56:54 +0000"  >&lt;p&gt;Here are results running little benchmark on end of TestIPC in its main.&lt;br/&gt;
It sets up the rpc doing a little echo protocol.  The echo copies the cells&lt;br/&gt;
it receives onto the response. On cmdline say how many cycles and how many columns.  I made Cell size be about 10k and ran the test adding 10 Cells per iteration so we are sending back and forth about 100k.  This approximates a small to medium-sized mult call.  I cycled 10k times.  Below are the test done twice.&lt;/p&gt;

&lt;p&gt;With patch, the test finishes a little sooner... about 5-10% sooner.&lt;/p&gt;

&lt;p&gt;I ran visualvm over a minute+ against each at about same stage in test.&lt;br/&gt;
Without patch we use more CPU and do more GC &amp;#8211; just over 36% CPU vs 33% or so and we do a bit more GC&apos;ing... 4.1% or so vs 3.4% or so.  W/o the patch, more heap is used.  See pictures.  Patch seems to be improvement.&lt;/p&gt;

&lt;p&gt;WITHOUT PATCH&lt;/p&gt;

&lt;p&gt;durruti:hbase.git stack$ for i in 1 2 3 4 5; do time ./bin/hbase -Dhbase.defaults.for.version.skip=true org.apache.hadoop.hbase.ipc.TestIPC 100000 10 &amp;amp;&amp;gt; /tmp/wopatch.$i.txt; done&lt;/p&gt;

&lt;p&gt;real    0m42.843s&lt;br/&gt;
user    0m43.902s&lt;br/&gt;
sys     0m17.495s&lt;/p&gt;

&lt;p&gt;real    0m43.357s&lt;br/&gt;
user    0m46.050s&lt;br/&gt;
sys     0m17.712s&lt;/p&gt;

&lt;p&gt;real    0m42.595s&lt;br/&gt;
user    0m44.179s&lt;br/&gt;
sys     0m17.448s&lt;/p&gt;

&lt;p&gt;real    0m43.320s&lt;br/&gt;
user    0m45.578s&lt;br/&gt;
sys     0m17.736s&lt;/p&gt;

&lt;p&gt;real    0m42.647s&lt;br/&gt;
user    0m44.845s&lt;br/&gt;
sys     0m17.583s&lt;/p&gt;

&lt;p&gt;... and again&lt;/p&gt;

&lt;p&gt;real    0m45.868s&lt;br/&gt;
user    0m46.522s&lt;br/&gt;
sys     0m18.776s&lt;/p&gt;

&lt;p&gt;real    0m42.764s&lt;br/&gt;
user    0m44.505s&lt;br/&gt;
sys     0m17.447s&lt;/p&gt;

&lt;p&gt;real    0m43.080s&lt;br/&gt;
user    0m45.445s&lt;br/&gt;
sys     0m17.585s&lt;/p&gt;

&lt;p&gt;real    0m43.261s&lt;br/&gt;
user    0m45.246s&lt;br/&gt;
sys     0m17.722s&lt;/p&gt;

&lt;p&gt;real    0m42.592s&lt;br/&gt;
user    0m44.102s&lt;br/&gt;
sys     0m17.333s&lt;/p&gt;


&lt;p&gt;WITH PATCH&lt;/p&gt;

&lt;p&gt;durruti:hbase.git stack$ for i in 1 2 3 4 5; do time ./bin/hbase -Dhbase.defaults.for.version.skip=true org.apache.hadoop.hbase.ipc.TestIPC 100000 10 &amp;amp;&amp;gt; /tmp/wpatch.$i.txt; done&lt;/p&gt;

&lt;p&gt;real    0m38.838s&lt;br/&gt;
user    0m40.415s&lt;br/&gt;
sys     0m18.765s&lt;/p&gt;

&lt;p&gt;real    0m37.638s&lt;br/&gt;
user    0m39.246s&lt;br/&gt;
sys     0m18.408s&lt;/p&gt;

&lt;p&gt;real    0m38.696s&lt;br/&gt;
user    0m40.169s&lt;br/&gt;
sys     0m18.700s&lt;/p&gt;

&lt;p&gt;real    0m37.948s&lt;br/&gt;
user    0m39.403s&lt;br/&gt;
sys     0m18.682s&lt;/p&gt;


&lt;p&gt;real    0m38.077s&lt;br/&gt;
user    0m39.519s&lt;br/&gt;
sys     0m18.571s&lt;/p&gt;

&lt;p&gt;...and again.&lt;/p&gt;

&lt;p&gt;real    0m43.888s&lt;br/&gt;
user    0m44.394s&lt;br/&gt;
sys     0m21.427s&lt;/p&gt;

&lt;p&gt;real    0m40.311s&lt;br/&gt;
user    0m42.553s&lt;br/&gt;
sys     0m19.460s&lt;/p&gt;

&lt;p&gt;real    0m38.489s&lt;br/&gt;
user    0m41.097s&lt;br/&gt;
sys     0m18.761s&lt;/p&gt;

&lt;p&gt;real    0m38.252s&lt;br/&gt;
user    0m39.603s&lt;br/&gt;
sys     0m18.618s&lt;/p&gt;

&lt;p&gt;real    0m38.066s&lt;br/&gt;
user    0m39.656s&lt;br/&gt;
sys     0m18.621s&lt;/p&gt;</comment>
                            <comment id="13824256" author="stack" created="Fri, 15 Nov 2013 23:59:14 +0000"  >&lt;p&gt;Upload patch again so hadoopqa picks up this.&lt;/p&gt;</comment>
                            <comment id="13824271" author="stack" created="Sat, 16 Nov 2013 00:27:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=devaraj&quot; class=&quot;user-hover&quot; rel=&quot;devaraj&quot;&gt;Devaraj Das&lt;/a&gt; Just saw your comment.  Thanks for review.  Rough numbers attached.  If hadoopqa passes I&apos;ll commit.   There is more to be had here I&apos;d say but will do in new issue &amp;#8211; then go read-side.  Different approach on read-side I&apos;d say &amp;#8212; look at keeping the request off-heap as long as possible.. we&apos;ll see.&lt;/p&gt;</comment>
                            <comment id="13824336" author="hadoopqa" created="Sat, 16 Nov 2013 02:18:46 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12614164/5945v4.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12614164/5945v4.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 5 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 9 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn site goal to fail.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.replication.TestMultiSlaveReplication&lt;br/&gt;
                  org.apache.hadoop.hbase.coprocessor.TestRegionObserverInterface&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 12 zombie test(s): 	at org.apache.hadoop.hbase.coprocessor.TestHTableWrapper.testHTableInterfaceMethods(TestHTableWrapper.java:139)&lt;br/&gt;
	at org.apache.hadoop.hbase.replication.TestMasterReplication.testCyclicReplication3(TestMasterReplication.java:243)&lt;br/&gt;
	at org.apache.hadoop.hbase.replication.TestMasterReplication.testCyclicReplication2(TestMasterReplication.java:206)&lt;br/&gt;
	at org.apache.hadoop.hbase.replication.TestMasterReplication.testCyclicReplication1(TestMasterReplication.java:150)&lt;br/&gt;
	at org.apache.hadoop.hbase.master.TestDistributedLogSplitting.testReplayCmd(TestDistributedLogSplitting.java:704)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.TestFromClientSide3.testHTableExistsMethodMultipleRegionsMultipleGets(TestFromClientSide3.java:348)&lt;br/&gt;
	at org.apache.hadoop.hbase.io.encoding.TestEncodedSeekers.testEncodedSeeker(TestEncodedSeekers.java:124)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7890//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7890//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7890//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7890//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7890//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7890//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7890//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7890//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7890//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7890//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7890//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7890//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7890//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7890//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7890//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7890//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7890//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7890//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7890//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7890//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7890//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7890//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13824339" author="hadoopqa" created="Sat, 16 Nov 2013 02:29:50 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12614169/5945v4.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12614169/5945v4.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 5 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 9 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn site goal to fail.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.coprocessor.TestRegionObserverInterface&lt;br/&gt;
                  org.apache.hadoop.hbase.util.TestHBaseFsck&lt;br/&gt;
                  org.apache.hadoop.hbase.replication.TestMultiSlaveReplication&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core zombie tests&lt;/font&gt;.  There are 11 zombie test(s): 	at org.apache.hadoop.hbase.coprocessor.TestHTableWrapper.testHTableInterfaceMethods(TestHTableWrapper.java:139)&lt;br/&gt;
	at org.apache.hadoop.hbase.replication.TestMasterReplication.testCyclicReplication3(TestMasterReplication.java:243)&lt;br/&gt;
	at org.apache.hadoop.hbase.replication.TestMasterReplication.testCyclicReplication2(TestMasterReplication.java:206)&lt;br/&gt;
	at org.apache.hadoop.hbase.replication.TestMasterReplication.testCyclicReplication1(TestMasterReplication.java:150)&lt;br/&gt;
	at org.apache.hadoop.hbase.master.TestDistributedLogSplitting.testReplayCmd(TestDistributedLogSplitting.java:704)&lt;br/&gt;
	at org.apache.hadoop.hbase.client.TestFromClientSide3.testHTableExistsMethodMultipleRegionsMultipleGets(TestFromClientSide3.java:348)&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7891//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7891//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7891//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7891//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7891//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7891//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7891//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7891//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7891//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7891//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7891//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7891//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7891//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7891//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7891//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7891//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7891//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7891//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7891//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7891//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7891//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7891//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13825120" author="stack" created="Mon, 18 Nov 2013 05:27:44 +0000"  >&lt;p&gt;Fix the zombie created (was making a cell block stream though no cells in it)&lt;/p&gt;</comment>
                            <comment id="13825138" author="hadoopqa" created="Mon, 18 Nov 2013 07:02:20 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12614339/5945v5.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12614339/5945v5.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 11 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 10 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn site goal to fail.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7909//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7909//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7909//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7909//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7909//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7909//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7909//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7909//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7909//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7909//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7909//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7909//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7909//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7909//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7909//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7909//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7909//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7909//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7909//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7909//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7909//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7909//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13825383" author="stack" created="Mon, 18 Nov 2013 15:05:36 +0000"  >&lt;p&gt;I will commit this later today unless objection.&lt;/p&gt;</comment>
                            <comment id="13826844" author="hudson" created="Tue, 19 Nov 2013 19:27:28 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #844 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/844/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/844/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5945&quot; title=&quot;Reduce buffer copies in IPC server response path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5945&quot;&gt;&lt;del&gt;HBASE-5945&lt;/del&gt;&lt;/a&gt; Reduce buffer copies in IPC server response path (stack: rev 1543458)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/IPCUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-hadoop-compat/src/main/java/org/apache/hadoop/hbase/ipc/MetricsHBaseServerSource.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-hadoop1-compat/src/main/java/org/apache/hadoop/hbase/ipc/MetricsHBaseServerSourceImpl.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-hadoop2-compat/src/main/java/org/apache/hadoop/hbase/ipc/MetricsHBaseServerSourceImpl.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/ipc/BufferChain.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/ipc/MetricsHBaseServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/ipc/RpcServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestFromClientSide3.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/coprocessor/TestRegionObserverInterface.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/ipc/TestBufferChain.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/ipc/TestIPC.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13826987" author="hudson" created="Tue, 19 Nov 2013 21:59:05 +0000"  >&lt;p&gt;SUCCESS: Integrated in hbase-0.96 #196 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.96/196/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.96/196/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5945&quot; title=&quot;Reduce buffer copies in IPC server response path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5945&quot;&gt;&lt;del&gt;HBASE-5945&lt;/del&gt;&lt;/a&gt; Reduce buffer copies in IPC server response path (stack: rev 1543463)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/IPCUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-hadoop-compat/src/main/java/org/apache/hadoop/hbase/ipc/MetricsHBaseServerSource.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-hadoop1-compat/src/main/java/org/apache/hadoop/hbase/ipc/MetricsHBaseServerSourceImpl.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-hadoop2-compat/src/main/java/org/apache/hadoop/hbase/ipc/MetricsHBaseServerSourceImpl.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/main/java/org/apache/hadoop/hbase/ipc/BufferChain.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/main/java/org/apache/hadoop/hbase/ipc/MetricsHBaseServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/main/java/org/apache/hadoop/hbase/ipc/RpcServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestFromClientSide3.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/test/java/org/apache/hadoop/hbase/coprocessor/TestRegionObserverInterface.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/test/java/org/apache/hadoop/hbase/ipc/TestBufferChain.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/test/java/org/apache/hadoop/hbase/ipc/TestIPC.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13827023" author="hudson" created="Tue, 19 Nov 2013 22:27:06 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-TRUNK #4688 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4688/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4688/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5945&quot; title=&quot;Reduce buffer copies in IPC server response path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5945&quot;&gt;&lt;del&gt;HBASE-5945&lt;/del&gt;&lt;/a&gt; Reduce buffer copies in IPC server response path (stack: rev 1543458)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/IPCUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-hadoop-compat/src/main/java/org/apache/hadoop/hbase/ipc/MetricsHBaseServerSource.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-hadoop1-compat/src/main/java/org/apache/hadoop/hbase/ipc/MetricsHBaseServerSourceImpl.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-hadoop2-compat/src/main/java/org/apache/hadoop/hbase/ipc/MetricsHBaseServerSourceImpl.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/ipc/BufferChain.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/ipc/MetricsHBaseServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/ipc/RpcServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestFromClientSide3.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/coprocessor/TestRegionObserverInterface.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/ipc/TestBufferChain.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/ipc/TestIPC.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13827571" author="hudson" created="Wed, 20 Nov 2013 11:38:44 +0000"  >&lt;p&gt;SUCCESS: Integrated in hbase-0.96-hadoop2 #125 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.96-hadoop2/125/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.96-hadoop2/125/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5945&quot; title=&quot;Reduce buffer copies in IPC server response path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5945&quot;&gt;&lt;del&gt;HBASE-5945&lt;/del&gt;&lt;/a&gt; Reduce buffer copies in IPC server response path (stack: rev 1543463)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-client/src/main/java/org/apache/hadoop/hbase/ipc/IPCUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-client/src/main/java/org/apache/hadoop/hbase/protobuf/ProtobufUtil.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-hadoop-compat/src/main/java/org/apache/hadoop/hbase/ipc/MetricsHBaseServerSource.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-hadoop1-compat/src/main/java/org/apache/hadoop/hbase/ipc/MetricsHBaseServerSourceImpl.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-hadoop2-compat/src/main/java/org/apache/hadoop/hbase/ipc/MetricsHBaseServerSourceImpl.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/main/java/org/apache/hadoop/hbase/ipc/BufferChain.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/main/java/org/apache/hadoop/hbase/ipc/MetricsHBaseServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/main/java/org/apache/hadoop/hbase/ipc/RpcServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HRegionServer.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestFromClientSide3.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/test/java/org/apache/hadoop/hbase/coprocessor/TestRegionObserverInterface.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/test/java/org/apache/hadoop/hbase/ipc/TestBufferChain.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/test/java/org/apache/hadoop/hbase/ipc/TestIPC.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13830763" author="stack" created="Sat, 23 Nov 2013 20:11:22 +0000"  >&lt;p&gt;Committed gathering patch.  Further cleanup to be done in other issues (e.g. the issue linked to this one).&lt;/p&gt;</comment>
                            <comment id="13849562" author="stack" created="Mon, 16 Dec 2013 18:46:59 +0000"  >&lt;p&gt;Released in 0.96.1.  Issue closed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12679978">HBASE-10002</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12563981" name="5945-in-progress.2.1.patch" size="139194" author="devaraj" created="Wed, 9 Jan 2013 18:30:14 +0000"/>
                            <attachment id="12563396" name="5945-in-progress.2.patch" size="147269" author="devaraj" created="Sat, 5 Jan 2013 04:03:52 +0000"/>
                            <attachment id="12562508" name="5945-in-progress.patch" size="103685" author="devaraj" created="Thu, 27 Dec 2012 19:46:55 +0000"/>
                            <attachment id="12613551" name="5945v2.txt" size="23183" author="stack" created="Wed, 13 Nov 2013 09:01:01 +0000"/>
                            <attachment id="12614169" name="5945v4.txt" size="27839" author="stack" created="Fri, 15 Nov 2013 23:59:14 +0000"/>
                            <attachment id="12614164" name="5945v4.txt" size="27839" author="stack" created="Fri, 15 Nov 2013 23:43:54 +0000"/>
                            <attachment id="12614339" name="5945v5.txt" size="46389" author="stack" created="Mon, 18 Nov 2013 05:27:44 +0000"/>
                            <attachment id="12525708" name="buffer-copies.txt" size="2028" author="tlipcon" created="Sat, 5 May 2012 01:22:48 +0000"/>
                            <attachment id="12525755" name="even-fewer-copies.txt" size="17642" author="tlipcon" created="Sun, 6 May 2012 01:15:19 +0000"/>
                            <attachment id="12525785" name="hbase-5495.txt" size="24294" author="tlipcon" created="Sun, 6 May 2012 20:37:44 +0000"/>
                            <attachment id="12614168" name="with_patch.png" size="395053" author="stack" created="Fri, 15 Nov 2013 23:56:54 +0000"/>
                            <attachment id="12614167" name="without_patch.png" size="392757" author="stack" created="Fri, 15 Nov 2013 23:56:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 5 May 2012 02:16:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>238243</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i00sbr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2521</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>