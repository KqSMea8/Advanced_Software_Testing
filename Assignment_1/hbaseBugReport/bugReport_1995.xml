<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:58:04 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1995/HBASE-1995.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1995] Add configurable max value size check</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1995</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;After discussing with Michael, the issue was that if you have a region size of for example 256M and you add a 1G value into a column then that region cannot split and a cluster can become lopsided. It also means that you have a really large block and the memstore would need to handle the 1G data. I proposed to add a configurable upper boundary check that is throwing an exception on the client side if the user tries to add a value larger than that limit. Ideally it would be set to the maximum region size or less. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12441282">HBASE-1995</key>
            <summary>Add configurable max value size check</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="larsgeorge">Lars George</assignee>
                                    <reporter username="larsgeorge">Lars George</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Nov 2009 11:05:24 +0000</created>
                <updated>Fri, 20 Nov 2015 13:01:37 +0000</updated>
                            <resolved>Sat, 28 Nov 2009 23:30:58 +0000</resolved>
                                                    <fixVersion>0.90.0</fixVersion>
                                    <component>Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12780666" author="stack" created="Fri, 20 Nov 2009 17:25:42 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12783296" author="larsgeorge" created="Sat, 28 Nov 2009 22:06:11 +0000"  >&lt;p&gt;Patch adds check for configurable maximum KeyValue length on the client side. By default it is disabled (or should we set a reasonable maximum?) and client unit test has specific test added and passes.&lt;/p&gt;</comment>
                            <comment id="12783297" author="larsgeorge" created="Sat, 28 Nov 2009 22:06:41 +0000"  >&lt;p&gt;Patch adds check for configurable maximum KeyValue length on the client side. By default it is disabled (or should we set a reasonable maximum?) and client unit test has specific test added and passes.&lt;/p&gt;</comment>
                            <comment id="12783312" author="larsgeorge" created="Sat, 28 Nov 2009 22:58:53 +0000"  >&lt;p&gt;I just realized that the test are partially broken. Looking at these code constructs:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-comment&quot;&gt;// Null row (should NOT work)
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      Put put = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Put((&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[])&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
      put.add(FAMILY, QUALIFIER, VALUE);
      ht.put(put);
      &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Inserting a &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; row worked, should &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; exception&quot;&lt;/span&gt;);
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt;(Exception e) {}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is not right I believe. I tried this in a small test app:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; class TestException {
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) {
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;start&quot;&lt;/span&gt;);
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;in &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt;/&lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt;&quot;&lt;/span&gt;);
      &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is an IOE&quot;&lt;/span&gt;);
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {}
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;done&quot;&lt;/span&gt;);
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It prints&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
LarsMacBookPro:hbase-trunk-ro larsgeorge$ java -cp build/test org.apache.hadoop.hbase.client.TestException
start
in &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt;/&lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt;
done
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;which makes sense to me. The catch is catching the exception thrown if the test does not cause to throw the expected exception as well. To fix we need to facilitate the proper Assert.fail() method like so&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-comment&quot;&gt;// Null row (should NOT work)
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      Put put = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Put((&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[])&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
      put.add(FAMILY, QUALIFIER, VALUE);
      ht.put(put);
      fail(&lt;span class=&quot;code-quote&quot;&gt;&quot;Inserting a &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; row worked, should &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; exception&quot;&lt;/span&gt;);
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt;(Exception e) {}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I have changed that in the TestFromClientSide class and found that I actually had a check wrong. I amended my test to set up a proper second table so that the lower maximum KV size is considered. Creating a new patch.&lt;/p&gt;</comment>
                            <comment id="12783314" author="apurtell" created="Sat, 28 Nov 2009 23:02:37 +0000"  >&lt;p&gt;Committed to trunk. Thanks Lars for the patch and for the unit test!&lt;/p&gt;</comment>
                            <comment id="12783315" author="apurtell" created="Sat, 28 Nov 2009 23:05:57 +0000"  >&lt;p&gt;Ok, I see your comments about the test. Mark as patch available when the new test is up.&lt;/p&gt;</comment>
                            <comment id="12783320" author="larsgeorge" created="Sat, 28 Nov 2009 23:21:59 +0000"  >&lt;p&gt;Patch v2 with fixed unit tests and all other changes. &lt;/p&gt;

&lt;p&gt;Patch v1-to-v2 are just the changes since v1 was already applied. Please use that to fix unit tests.&lt;/p&gt;</comment>
                            <comment id="12783321" author="larsgeorge" created="Sat, 28 Nov 2009 23:23:40 +0000"  >&lt;p&gt;Hi Andy, sorry that overlapped, but the tests were indeed broken. Please only apply patch &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1995&quot; title=&quot;Add configurable max value size check&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1995&quot;&gt;&lt;del&gt;HBASE-1995&lt;/del&gt;&lt;/a&gt;-v1-to-v2.patch. Thanks!&lt;/p&gt;</comment>
                            <comment id="12783323" author="apurtell" created="Sat, 28 Nov 2009 23:30:58 +0000"  >&lt;p&gt;Committed test update as r885166. Passes locally.&lt;/p&gt;</comment>
                            <comment id="15017848" author="lars_francke" created="Fri, 20 Nov 2015 13:01:37 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12441585">HBASE-2007</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12441911">HBASE-2017</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12426344" name="HBASE-1995-v1-to-v2.patch" size="2197" author="larsgeorge" created="Sat, 28 Nov 2009 23:21:59 +0000"/>
                            <attachment id="12426343" name="HBASE-1995-v2.patch" size="6046" author="larsgeorge" created="Sat, 28 Nov 2009 23:21:59 +0000"/>
                            <attachment id="12426340" name="HBASE-1995.patch" size="4693" author="larsgeorge" created="Sat, 28 Nov 2009 22:06:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 20 Nov 2009 17:25:42 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32354</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hg4v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99876</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>