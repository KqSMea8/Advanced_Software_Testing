<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:58:09 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-8750/HBASE-8750.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-8750] MetaServerShutdownHandler stucks if .META. assignment fails in previous attempt</title>
                <link>https://issues.apache.org/jira/browse/HBASE-8750</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;While running log replay on a one node setup, I killed meta regionserver. The MetaSSH tries to assign the meta table, but it failed as there was no other regionservers to assign to. But the meta server znode was already updated to null. When the assignment fails, the metaSSH is retried. But from the next iteration, it will not try to assign the meta region, but keeps on waiting for meta region. This keeps on going even after regionserver is brought up again.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12653073">HBASE-8750</key>
            <summary>MetaServerShutdownHandler stucks if .META. assignment fails in previous attempt</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="v.himanshu">Himanshu Vashishtha</assignee>
                                    <reporter username="v.himanshu">Himanshu Vashishtha</reporter>
                        <labels>
                    </labels>
                <created>Sun, 16 Jun 2013 16:12:28 +0000</created>
                <updated>Mon, 23 Sep 2013 19:22:27 +0000</updated>
                            <resolved>Sat, 22 Jun 2013 15:44:38 +0000</resolved>
                                    <version>0.95.1</version>
                                    <fixVersion>0.98.0</fixVersion>
                    <fixVersion>0.95.2</fixVersion>
                                    <component>MTTR</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13684691" author="v.himanshu" created="Sun, 16 Jun 2013 16:17:44 +0000"  >&lt;p&gt;patch that adds a check to assign meta in cas the meta znode is null. With this, the metaSSH was able to complete successfully when I restarted the regionserver.&lt;/p&gt;</comment>
                            <comment id="13684692" author="v.himanshu" created="Sun, 16 Jun 2013 16:35:07 +0000"  >&lt;p&gt; mvn test -P localTests -Dtest=Test*Meta* passes&lt;/p&gt;</comment>
                            <comment id="13684724" author="jxiang" created="Sun, 16 Jun 2013 18:26:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8705&quot; title=&quot;RS holding META when restarted in a single node setup may hang infinitely without META assignment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8705&quot;&gt;&lt;del&gt;HBASE-8705&lt;/del&gt;&lt;/a&gt; should fix this, right?&lt;/p&gt;</comment>
                            <comment id="13684734" author="v.himanshu" created="Sun, 16 Jun 2013 18:44:15 +0000"  >&lt;p&gt;8705 adds retries for assigning meta; if regionserver comes up after exhausting the retries, the problem will still be there.&lt;/p&gt;</comment>
                            <comment id="13684802" author="stack" created="Sun, 16 Jun 2013 21:23:08 +0000"  >&lt;p&gt;Seems fine to me.  I was going to say what Jimmy says but above makes sense.  You good w/ this patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jxiang&quot; class=&quot;user-hover&quot; rel=&quot;jxiang&quot;&gt;Jimmy Xiang&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="13684848" author="jxiang" created="Sun, 16 Jun 2013 23:48:57 +0000"  >&lt;p&gt;It is good to me.  Perhaps it is better to use MetaRegionTracker#isLocationAvailable() somehow?&lt;/p&gt;</comment>
                            <comment id="13685695" author="v.himanshu" created="Mon, 17 Jun 2013 16:41:56 +0000"  >&lt;p&gt;Thanks for the reviews, Jimmy and Stack.&lt;/p&gt;

&lt;p&gt;Re: isLocationAvailable usage, I would say using getMetaLocation is safer as it also parses the value to a ServerName object. &lt;br/&gt;
From rpc point of view, they are identical (both call getData from the meta znode). &lt;br/&gt;
Having said that, I am perfectly okay changing it to isLocationAvailable if you think it is better. Just let me know. &lt;br/&gt;
Thanks.&lt;/p&gt;</comment>
                            <comment id="13689929" author="v.himanshu" created="Fri, 21 Jun 2013 01:03:24 +0000"  >&lt;p&gt;Thanks for the review. &lt;br/&gt;
This patch uses isLocationAvailable as suggested by Jimmy. Ran a patched version locally, and it works good as the last one.&lt;/p&gt;</comment>
                            <comment id="13690574" author="jxiang" created="Fri, 21 Jun 2013 18:35:19 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13691172" author="jxiang" created="Sat, 22 Jun 2013 15:44:38 +0000"  >&lt;p&gt;Integrated into trunk and 0.95.  Thanks Himanshu for the patch, and Stack for the review.&lt;/p&gt;</comment>
                            <comment id="13691175" author="hudson" created="Sat, 22 Jun 2013 16:07:08 +0000"  >&lt;p&gt;Integrated in hbase-0.95 #260 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95/260/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95/260/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8750&quot; title=&quot;MetaServerShutdownHandler stucks if .META. assignment fails in previous attempt&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8750&quot;&gt;&lt;del&gt;HBASE-8750&lt;/del&gt;&lt;/a&gt; MetaServerShutdownHandler stucks if .META. assignment fails in previous attempt (Revision 1495747)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
jxiang : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-client/src/main/java/org/apache/hadoop/hbase/catalog/CatalogTracker.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/master/handler/MetaServerShutdownHandler.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13691177" author="hudson" created="Sat, 22 Jun 2013 16:08:17 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #4197 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4197/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4197/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8750&quot; title=&quot;MetaServerShutdownHandler stucks if .META. assignment fails in previous attempt&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8750&quot;&gt;&lt;del&gt;HBASE-8750&lt;/del&gt;&lt;/a&gt; MetaServerShutdownHandler stucks if .META. assignment fails in previous attempt (Revision 1495748)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
jxiang : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-client/src/main/java/org/apache/hadoop/hbase/catalog/CatalogTracker.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/handler/MetaServerShutdownHandler.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13691292" author="hudson" created="Sat, 22 Jun 2013 23:59:20 +0000"  >&lt;p&gt;Integrated in hbase-0.95-on-hadoop2 #143 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95-on-hadoop2/143/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95-on-hadoop2/143/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8750&quot; title=&quot;MetaServerShutdownHandler stucks if .META. assignment fails in previous attempt&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8750&quot;&gt;&lt;del&gt;HBASE-8750&lt;/del&gt;&lt;/a&gt; MetaServerShutdownHandler stucks if .META. assignment fails in previous attempt (Revision 1495747)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
jxiang : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-client/src/main/java/org/apache/hadoop/hbase/catalog/CatalogTracker.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/master/handler/MetaServerShutdownHandler.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13691308" author="hudson" created="Sun, 23 Jun 2013 00:59:18 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #578 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/578/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/578/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8750&quot; title=&quot;MetaServerShutdownHandler stucks if .META. assignment fails in previous attempt&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8750&quot;&gt;&lt;del&gt;HBASE-8750&lt;/del&gt;&lt;/a&gt; MetaServerShutdownHandler stucks if .META. assignment fails in previous attempt (Revision 1495748)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
jxiang : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-client/src/main/java/org/apache/hadoop/hbase/catalog/CatalogTracker.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/handler/MetaServerShutdownHandler.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12651638">HBASE-8705</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12588026" name="HBASE-8750-v0.patch" size="1973" author="v.himanshu" created="Sun, 16 Jun 2013 16:17:44 +0000"/>
                            <attachment id="12588979" name="HBASE-8750-v1.patch" size="2069" author="v.himanshu" created="Fri, 21 Jun 2013 01:03:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 16 Jun 2013 18:26:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>333396</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 25 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1lihb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>333724</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>