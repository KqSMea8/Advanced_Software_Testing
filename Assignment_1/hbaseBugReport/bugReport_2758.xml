<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:04:33 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-2758/HBASE-2758.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-2758] META region stuck in RS2ZK_REGION_OPENED state</title>
                <link>https://issues.apache.org/jira/browse/HBASE-2758</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;In cluster testing trunk, I ended up with a situation where META was unassigned and no amount of restarting various pieces would fix it. On master startup, I see:&lt;/p&gt;

&lt;p&gt;2010-06-20 21:08:05,431 DEBUG org.apache.hadoop.hbase.master.BaseScanner: Current assignment of .META.,,1.1028785192 is not valid;  serverAddress=, startCode=0 unknown.&lt;br/&gt;
2010-06-20 21:08:05,436 DEBUG org.apache.hadoop.hbase.zookeeper.ZooKeeperWrapper: While creating UNASSIGNED region 1028785192 exists, state = RS2ZK_REGION_OPENED&lt;br/&gt;
2010-06-20 21:08:05,438 WARN org.apache.hadoop.hbase.zookeeper.ZooKeeperWrapper: &amp;lt;monster01.sf.cloudera.com:/hbase,org.apache.hadoop.hbase.master.HMaster&amp;gt;Failed to create ZNode /hbase/UNASSIGNED/1028785192 in ZooKeeper&lt;br/&gt;
org.apache.zookeeper.KeeperException$NodeExistsException: KeeperErrorCode = NodeExists for /hbase/UNASSIGNED/1028785192&lt;br/&gt;
2010-06-20 21:08:05,438 DEBUG org.apache.hadoop.hbase.master.RegionManager: Created UNASSIGNED zNode .META.,,1.1028785192 in state M2ZK_REGION_OFFLINE&lt;/p&gt;

&lt;p&gt;then on the RS:&lt;br/&gt;
2010-06-20 21:08:05,899 ERROR org.apache.hadoop.hbase.regionserver.RSZookeeperUpdater: ZNode /hbase/UNASSIGNED/1028785192 is not in CLOSED/OFFLINE state (state = RS2ZK_REGION_OPENED), will NOT open region.&lt;br/&gt;
2010-06-20 21:08:05,899 ERROR org.apache.hadoop.hbase.regionserver.HRegionServer: Error opening .META.,,1.1028785192&lt;br/&gt;
java.io.IOException: ZNode /hbase/UNASSIGNED/1028785192 is not in CLOSED/OFFLINE state (state = RS2ZK_REGION_OPENED), will NOT open region.&lt;/p&gt;

&lt;p&gt;and the region never opens&lt;/p&gt;</description>
                <environment></environment>
        <key id="12467456">HBASE-2758</key>
            <summary>META region stuck in RS2ZK_REGION_OPENED state</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karthik.ranga">Karthik Ranganathan</assignee>
                                    <reporter username="tlipcon">Todd Lipcon</reporter>
                        <labels>
                    </labels>
                <created>Mon, 21 Jun 2010 04:16:00 +0000</created>
                <updated>Fri, 20 Nov 2015 12:43:43 +0000</updated>
                            <resolved>Wed, 23 Jun 2010 03:32:30 +0000</resolved>
                                    <version>0.90.0</version>
                                    <fixVersion>0.90.0</fixVersion>
                                    <component>master</component>
                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12880882" author="streamy" created="Mon, 21 Jun 2010 16:30:18 +0000"  >&lt;p&gt;I think Karthik has a fix for this in another patch.  Basically, when a master starts up (before we fully handle master failover) he just needs to clean out all the znodes from /UNASSIGNED.  Should be a simple fix.&lt;/p&gt;</comment>
                            <comment id="12880883" author="streamy" created="Mon, 21 Jun 2010 16:30:32 +0000"  >&lt;p&gt;Assigning to Karthik so he sees&lt;/p&gt;</comment>
                            <comment id="12881525" author="karthik.ranga" created="Wed, 23 Jun 2010 03:06:20 +0000"  >&lt;p&gt;If the cluster was shutdown before the regions in transition in ZK was cleared, then it does not get assigned out on startup. Fix is to delete the UNASSIGNED znode in ZK on a new cluster start.&lt;/p&gt;</comment>
                            <comment id="12881528" author="streamy" created="Wed, 23 Jun 2010 03:19:55 +0000"  >&lt;p&gt;Patch looks good.  This also fixes an existing race condition where the master node in ZK was put up before the master got the listing of regionservers.  Nothing would be blocking the RS from putting up their ephemeral nodes so it was possible that an HMaster thought it was a failover but it was a clean startup.  Test added in patch verifies that a cluster will startup even if there are unassigned znodes in zookeeper.&lt;/p&gt;

&lt;p&gt;Running full test suite and then will commit.&lt;/p&gt;</comment>
                            <comment id="12881529" author="streamy" created="Wed, 23 Jun 2010 03:32:30 +0000"  >&lt;p&gt;Confirmed with Karthik that he ran full test suite.  Committed to trunk.&lt;/p&gt;</comment>
                            <comment id="15017602" author="lars_francke" created="Fri, 20 Nov 2015 12:43:43 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12447789" name="HBASE-2758-0.21.patch" size="10876" author="karthik.ranga" created="Wed, 23 Jun 2010 03:06:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 21 Jun 2010 16:30:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26450</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hj3r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>100357</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>