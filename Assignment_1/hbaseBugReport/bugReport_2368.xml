<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:01:17 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-2368/HBASE-2368.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-2368] BulkPut - Writable class  compatible with TableRecordWriter for bulk puts agnostic of region server mapping at Mapper/Combiner level</title>
                <link>https://issues.apache.org/jira/browse/HBASE-2368</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;TableRecordWriter currently accepts only a put/delete as writables. Some mapper processes might want to consolidate the &apos;put&apos;s and insert them in bulk. Useful in combiners / mappers - to send across a bunch of puts from one stage to another , while maintaining a very similar region-server-mapping agnostic api at respective levels. &lt;/p&gt;

&lt;p&gt;New type - BulkPut ( Writable ) introduced that is just a consolidation of Puts.  Eventually , the TableRecordWriter bulk inserts the puts together into the hbase eco-system. &lt;/p&gt;

&lt;p&gt;Patch made against trunk only. But since , it does not break any backward compatibility - it can be an useful addition to the branch as well. &lt;/p&gt;

&lt;p&gt;Let me know your comments on the same. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12460045">HBASE-2368</key>
            <summary>BulkPut - Writable class  compatible with TableRecordWriter for bulk puts agnostic of region server mapping at Mapper/Combiner level</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="4">Incomplete</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kaykay.unique">Karthik K</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Mar 2010 21:30:14 +0000</created>
                <updated>Sat, 11 Apr 2015 00:36:10 +0000</updated>
                            <resolved>Sat, 11 Apr 2015 00:36:10 +0000</resolved>
                                                                    <component>Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12848920" author="kaykay.unique" created="Tue, 23 Mar 2010 21:31:52 +0000"  >&lt;p&gt;New class -BulkPut that is a consolidation of Put-s in place.  Unit test case added for serialization. &lt;/p&gt;

&lt;p&gt;TableOutputFormat can take a BulkPut ( in addition to Put / Delete, as before ). &lt;/p&gt;

&lt;p&gt;Comments for IOException message changed appropriately. &lt;/p&gt;</comment>
                            <comment id="12849057" author="ryanobjc" created="Wed, 24 Mar 2010 05:26:34 +0000"  >&lt;p&gt;could you explain to me how this might be different than having the TableOutputFormat assume/use a write buffer?  This new BulkPut becomes part of the API and we should think carefully about that before we commit to it.&lt;/p&gt;</comment>
                            <comment id="12849229" author="streamy" created="Wed, 24 Mar 2010 15:40:38 +0000"  >&lt;p&gt;I agree with Ryan.  We currently support write buffers and also you can use List&amp;lt;Put&amp;gt; on an HTable already (though not to TOF).&lt;/p&gt;

&lt;p&gt;For the default TOF case, this wouldn&apos;t actually behave any differently than just issuing individual Puts and allowing the underlying write buffer to process them in bulk.&lt;/p&gt;</comment>
                            <comment id="12849546" author="ryanobjc" created="Thu, 25 Mar 2010 00:19:24 +0000"  >&lt;p&gt;one thing to keep in mind is we do not offer atomic guarantees for multiple rows or API calls.  Suggesting that we do would be contrary to the actual situation on the ground.&lt;/p&gt;

&lt;p&gt;Maybe Kay Kay can describe the specific performance problem he is having and we can come up with a great way that makes everyone happy?&lt;/p&gt;</comment>
                            <comment id="12849549" author="kaykay.unique" created="Thu, 25 Mar 2010 00:24:27 +0000"  >&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; could you explain to me how this might be different than having the TableOutputFormat assume/use a write buffer?&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;




&lt;p&gt;This is complementary to the same, except with autoFlush set to true / writeBuffer set to false.   We have a Mapper job that was generating 1:many puts at the Mapper level. So instead of writing individual puts to the stream, bulk add the puts and write to the stream once. &lt;/p&gt;

&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  (though not to TOF).&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;p&gt;Specifically this patch addresses the TableRecordWriter (of TOF) and as you had pointed , this is moot when we are using HTable directly , but complementary at the Mapper / Combiner level , when we can consolidate puts and write them in bulk. &lt;/p&gt;</comment>
                            <comment id="12849563" author="kaykay.unique" created="Thu, 25 Mar 2010 01:22:36 +0000"  >&lt;p&gt;oops. cross post. But part of the answer given above - (1:N puts, with better throughput expectation + tracking puts retries / failures ). &lt;/p&gt;

&lt;p&gt;To add more - our rows are pretty uniform in size ( in the number of columns) , with the number of columns per column family the same for the entire table. &lt;/p&gt;

&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; one thing to keep in mind is we do not offer atomic guarantees for multiple rows or API calls.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;p&gt;Good point, ryan. That is understandable and for our scenario, is ok to get throughput in return. But the fact that puts are batched / flushCommitted behind the scenes makes it hard to map the failed puts with the corresponding input keys, for restarts. &lt;/p&gt;</comment>
                            <comment id="12866999" author="stack" created="Thu, 13 May 2010 04:41:34 +0000"  >&lt;p&gt;Moved from 0.21 to 0.22 just after merge of old 0.20 branch into TRUNK.&lt;/p&gt;</comment>
                            <comment id="12968873" author="stack" created="Tue, 7 Dec 2010 18:41:14 +0000"  >&lt;p&gt;Canceling stale patch&lt;/p&gt;</comment>
                            <comment id="13047567" author="stack" created="Fri, 10 Jun 2011 22:45:52 +0000"  >&lt;p&gt;Moving out of 0.92.0. Pull it back in if you think different.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12439611" name="HBASE-2368.patch" size="7746" author="kaykay.unique" created="Tue, 23 Mar 2010 21:31:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 24 Mar 2010 05:26:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32544</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 27 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02ejz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11959</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>