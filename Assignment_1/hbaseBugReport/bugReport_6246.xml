<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:35:04 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6246/HBASE-6246.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6246] Admin.move without specifying destination does not go through AccessController</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6246</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (destServerName == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || destServerName.length == 0) {
      LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Passed destination servername is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;/empty so &quot;&lt;/span&gt; +
        &lt;span class=&quot;code-quote&quot;&gt;&quot;choosing a server at random&quot;&lt;/span&gt;);
      &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.assignmentManager.clearRegionPlan(hri);
      &lt;span class=&quot;code-comment&quot;&gt;// Unassign will reassign it elsewhere choosing random server.
&lt;/span&gt;      &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.assignmentManager.unassign(hri);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I think we should go through security to see if there is sufficient permissions to do this operation?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12595314">HBASE-6246</key>
            <summary>Admin.move without specifying destination does not go through AccessController</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rajesh23">rajeshbabu</assignee>
                                    <reporter username="ram_krish">ramkrishna.s.vasudevan</reporter>
                        <labels>
                            <label>coprocessors</label>
                            <label>security</label>
                    </labels>
                <created>Wed, 20 Jun 2012 18:05:40 +0000</created>
                <updated>Fri, 12 Oct 2012 05:36:27 +0000</updated>
                            <resolved>Sat, 23 Jun 2012 06:20:53 +0000</resolved>
                                    <version>0.94.0</version>
                    <version>0.94.1</version>
                                    <fixVersion>0.94.1</fixVersion>
                                    <component>Coprocessors</component>
                    <component>security</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                <comments>
                            <comment id="13397812" author="lakshman" created="Wed, 20 Jun 2012 19:48:10 +0000"  >&lt;p&gt;Seems to be 0.94 specific issue. Code looks good in trunk.&lt;/p&gt;</comment>
                            <comment id="13398885" author="apurtell" created="Thu, 21 Jun 2012 21:39:07 +0000"  >&lt;p&gt;+1 fix on 0.94. Good catch.&lt;/p&gt;</comment>
                            <comment id="13399412" author="rajesh23" created="Fri, 22 Jun 2012 16:12:27 +0000"  >&lt;p&gt;Attached patch 94. Please review and provide comments. TestAccessController passes.&lt;/p&gt;</comment>
                            <comment id="13399418" author="stack" created="Fri, 22 Jun 2012 16:29:41 +0000"  >&lt;p&gt;Fix this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Passed destination servername is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;/empty so &quot;&lt;/span&gt; + &lt;span class=&quot;code-quote&quot;&gt;&quot;choosing a server at random&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Remove the &apos;+&apos; between the &apos;so&apos; and &apos;choosing&apos;.&lt;/p&gt;

&lt;p&gt;Else patch looks good.&lt;/p&gt;</comment>
                            <comment id="13399422" author="apurtell" created="Fri, 22 Jun 2012 16:35:36 +0000"  >&lt;p&gt;I have this change staged for commit with the change Stack wants applied also. Running local tests. Will commit if all pass.&lt;/p&gt;</comment>
                            <comment id="13399468" author="apurtell" created="Fri, 22 Jun 2012 17:39:42 +0000"  >&lt;p&gt;Committed to 0.94 branches. Tests pass locally, including TestAccessController, TestMasterObserver, etc.&lt;/p&gt;</comment>
                            <comment id="13399538" author="hudson" created="Fri, 22 Jun 2012 19:31:46 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #271 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/271/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/271/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6246&quot; title=&quot;Admin.move without specifying destination does not go through AccessController&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6246&quot;&gt;&lt;del&gt;HBASE-6246&lt;/del&gt;&lt;/a&gt;. Admin.move without specifying destination does not go through AccessController (rajeshbabu) (Revision 1352981)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
apurtell : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13399823" author="zhihyu@ebaysf.com" created="Sat, 23 Jun 2012 03:54:31 +0000"  >&lt;p&gt;I was investigating the root cause for frequent TestSplitTransactionOnCluster failures. e.g.:&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/view/G-L/view/HBase/job/HBase-0.94/lastCompletedBuild/testReport/org.apache.hadoop.hbase.regionserver/TestSplitTransactionOnCluster/testMasterRestartWhenSplittingIsPartial/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/view/G-L/view/HBase/job/HBase-0.94/lastCompletedBuild/testReport/org.apache.hadoop.hbase.regionserver/TestSplitTransactionOnCluster/testMasterRestartWhenSplittingIsPartial/&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2012-06-23 02:57:17,388 INFO  [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-629] regionserver.TestSplitTransactionOnCluster(654): Moving testMasterRestartWhenSplittingIsPartial,,1340420235288.7d985b65a8fb86a516d292158f5d7c40. to vesta.apache.org,34866,1340419933436; metaServerIndex=0
2012-06-23 02:57:17,389 INFO  [IPC Server handler 3 on 54803] master.HMaster(1107): Added move plan hri=testMasterRestartWhenSplittingIsPartial,,1340420235288.7d985b65a8fb86a516d292158f5d7c40., src=vesta.apache.org,46324,1340419901533, dest=, running balancer
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We can see clearly that move destination was not picked up by master.&lt;/p&gt;

&lt;p&gt;I wonder why the following code was removed in patch for this JIRA ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-    } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
-      dest = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ServerName(Bytes.toString(destServerName));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13399825" author="apurtell" created="Sat, 23 Jun 2012 03:57:37 +0000"  >&lt;p&gt;@Ted I didn&apos;t see/catch this error locally but we can put back accidentally removed logic with an addendum. &lt;/p&gt;</comment>
                            <comment id="13399826" author="zhihyu@ebaysf.com" created="Sat, 23 Jun 2012 04:04:02 +0000"  >&lt;p&gt;Proposed addendum makes TestSplitTransactionOnCluster pass.&lt;/p&gt;</comment>
                            <comment id="13399827" author="apurtell" created="Sat, 23 Jun 2012 04:08:14 +0000"  >&lt;p&gt;+1, we came up with the same addendum. I&apos;ll commit it.&lt;/p&gt;</comment>
                            <comment id="13399829" author="apurtell" created="Sat, 23 Jun 2012 04:11:31 +0000"  >&lt;p&gt;Committed addendum as r1353063. Thanks for identifying the error Ted.&lt;/p&gt;</comment>
                            <comment id="13399839" author="hudson" created="Sat, 23 Jun 2012 04:56:05 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #276 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/276/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/276/&lt;/a&gt;)&lt;br/&gt;
    Amend &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6246&quot; title=&quot;Admin.move without specifying destination does not go through AccessController&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6246&quot;&gt;&lt;del&gt;HBASE-6246&lt;/del&gt;&lt;/a&gt;. Admin.move without specifying destination does not go through AccessController&lt;/p&gt;

&lt;p&gt;The previous committed change for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6246&quot; title=&quot;Admin.move without specifying destination does not go through AccessController&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6246&quot;&gt;&lt;del&gt;HBASE-6246&lt;/del&gt;&lt;/a&gt; accidentally removed logic&lt;br/&gt;
and the omission was caught by TestSplitTransactionOnCluster failures. (Revision 1353063)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
apurtell : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13399840" author="zhihyu@ebaysf.com" created="Sat, 23 Jun 2012 05:39:40 +0000"  >&lt;p&gt;Normally test suite run for 0.94 isn&apos;t strictly required because trunk patch runs through the suite.&lt;/p&gt;

&lt;p&gt;In this case, it was not clear whether whole suite was executed by reading the comment @ 22/Jun/12 17:39&lt;/p&gt;

&lt;p&gt;Can I make a request ? If a JIRA is only for 0.94 (or 0.92), the contributor or the committer should provide test result similar to the following:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Failed tests:   testRebalanceOnRegionServerNumberChange(org.apache.hadoop.hbase.TestRegionRebalancing): After 5 attempts, region assignments were not balanced.
  testOrphanTaskAcquisition(org.apache.hadoop.hbase.master.TestSplitLogManager)

Tests run: 948, Failures: 2, Errors: 0, Skipped: 9

[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Explanation should be given for the few failed tests.&lt;/p&gt;</comment>
                            <comment id="13399845" author="apurtell" created="Sat, 23 Jun 2012 06:19:26 +0000"  >&lt;p&gt;@Ted, two committers looked at this patch and the mistake got through. Yes, that is my fault. However the Jenkins build caught the error. So I thank you for your request and continued attention at pointing out my mistake, but I don&apos;t see what needs to happen differently. Perhaps if you still feel differently you can expand on your reasoning.&lt;/p&gt;</comment>
                            <comment id="13399854" author="stack" created="Sat, 23 Jun 2012 06:56:02 +0000"  >&lt;p&gt;@Ted Thanks for catching this (Yeah, if jenkins found the issue, we the reviewers and patch authors should have noticed the problem before you did... thanks for pointing it out)&lt;/p&gt;</comment>
                            <comment id="13399894" author="ram_krish" created="Sat, 23 Jun 2012 09:15:33 +0000"  >&lt;p&gt;@Ted, @Andy and @Stack&lt;br/&gt;
Sorry to all.  It was me who first let it slip through.  Infact we run test suite thro our internal jenkins or if at home either me or Rajesh tries to run the suite.&lt;br/&gt;
But yesterday we uploaded the patch and missed on this.  I really apologise for  my mistake.&lt;br/&gt;
Thanks to Ted for pointing it out.&lt;br/&gt;
@Andy&lt;br/&gt;
Thanks for your patience in preparing addendum and getting it in.&lt;/p&gt;</comment>
                            <comment id="13400016" author="hudson" created="Sat, 23 Jun 2012 18:23:13 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #37 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/37/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/37/&lt;/a&gt;)&lt;br/&gt;
    Amend &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6246&quot; title=&quot;Admin.move without specifying destination does not go through AccessController&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6246&quot;&gt;&lt;del&gt;HBASE-6246&lt;/del&gt;&lt;/a&gt;. Admin.move without specifying destination does not go through AccessController&lt;/p&gt;

&lt;p&gt;The previous committed change for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6246&quot; title=&quot;Admin.move without specifying destination does not go through AccessController&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6246&quot;&gt;&lt;del&gt;HBASE-6246&lt;/del&gt;&lt;/a&gt; accidentally removed logic&lt;br/&gt;
and the omission was caught by TestSplitTransactionOnCluster failures. (Revision 1353063)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6246&quot; title=&quot;Admin.move without specifying destination does not go through AccessController&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6246&quot;&gt;&lt;del&gt;HBASE-6246&lt;/del&gt;&lt;/a&gt;. Admin.move without specifying destination does not go through AccessController (rajeshbabu) (Revision 1352981)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
apurtell : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;apurtell : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/master/HMaster.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12533160" name="6246.addendum" size="672" author="zhihyu@ebaysf.com" created="Sat, 23 Jun 2012 04:04:02 +0000"/>
                            <attachment id="12533161" name="HBASE-6246_94-addendum.patch" size="591" author="apurtell" created="Sat, 23 Jun 2012 04:07:22 +0000"/>
                            <attachment id="12533062" name="HBASE-6246_94.patch" size="2739" author="rajesh23" created="Fri, 22 Jun 2012 16:04:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 20 Jun 2012 19:48:10 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245366</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 25 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0682v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34240</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>