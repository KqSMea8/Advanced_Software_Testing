<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:55:19 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1660/HBASE-1660.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1660] need a rolling restart script</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1660</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;need a script that will do a rolling restart.&lt;/p&gt;

&lt;p&gt;It should be configurable in 2 ways:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;how long to keep the daemon down per host&lt;/li&gt;
	&lt;li&gt;how long to wait between hosts&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;for regionservers in my own hacky command line I used 10/60.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12430461">HBASE-1660</key>
            <summary>need a rolling restart script</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="nspiegelberg">Nicolas Spiegelberg</assignee>
                                    <reporter username="ryanobjc">ryan rawson</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Jul 2009 05:33:47 +0000</created>
                <updated>Fri, 20 Nov 2015 13:01:19 +0000</updated>
                            <resolved>Fri, 13 Aug 2010 04:14:36 +0000</resolved>
                                    <version>0.20.0</version>
                                    <fixVersion>0.90.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12731598" author="stack" created="Wed, 15 Jul 2009 18:08:40 +0000"  >&lt;p&gt;Does this need to be in 0.20.0?  It seems like something that can be developed unrelated to 0.20.0 release.&lt;/p&gt;</comment>
                            <comment id="12732046" author="stack" created="Thu, 16 Jul 2009 17:41:33 +0000"  >&lt;p&gt;Moving out of 0.20.0.  Doesn&apos;t depend on 0.20.0.&lt;/p&gt;</comment>
                            <comment id="12771079" author="streamy" created="Wed, 28 Oct 2009 19:31:23 +0000"  >&lt;p&gt;Moving into 0.20.2 and 0.21.0 so it gets attention again (can bump from 0.20, but this would be a useful tool since we have already done two point releases on 20).  Ryan, you have scripts for this?&lt;/p&gt;</comment>
                            <comment id="12773285" author="jdcryans" created="Tue, 3 Nov 2009 23:37:19 +0000"  >&lt;p&gt;Punting from 0.20, currently if you shut down one RS after the other on a live production system you will be shuffling tons of regions around. We need a decommissioning feature for this.&lt;/p&gt;</comment>
                            <comment id="12867006" author="stack" created="Thu, 13 May 2010 04:41:41 +0000"  >&lt;p&gt;Moved from 0.21 to 0.22 just after merge of old 0.20 branch into TRUNK.&lt;/p&gt;</comment>
                            <comment id="12897560" author="hbasereviewboard" created="Thu, 12 Aug 2010 03:22:08 +0000"  >&lt;p&gt;Message from: &quot;Nicolas&quot; &amp;lt;nspiegelberg@facebook.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.cloudera.org/r/632/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/632/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hbase.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;1. added &apos;restart&apos; option to hbase-daemon.sh for unit-level restarting&lt;br/&gt;
2. added rolling-restart.sh script to perform system-level rolling restarts&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1660&quot; title=&quot;need a rolling restart script&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1660&quot;&gt;&lt;del&gt;HBASE-1660&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;http://issues.apache.org/jira/browse/HBASE-1660&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/HBASE-1660&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/bin/hbase-daemon.sh 984635 &lt;br/&gt;
  trunk/bin/rolling-restart.sh PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;http://review.cloudera.org/r/632/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/632/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;./bin/start-hbase.sh&lt;br/&gt;
./bin/rolling-restart.sh&lt;br/&gt;
./bin/stop-hbase.sh&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Nicolas&lt;/p&gt;

</comment>
                            <comment id="12897561" author="hbasereviewboard" created="Thu, 12 Aug 2010 03:31:16 +0000"  >&lt;p&gt;Message from: &quot;Nicolas&quot; &amp;lt;nspiegelberg@facebook.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.cloudera.org/r/632/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/632/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2010-08-11 20:26:20.097452)&lt;/p&gt;


&lt;p&gt;Review request for hbase.&lt;/p&gt;


&lt;p&gt;Summary (updated)&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;1. added &apos;restart&apos; option to hbase-daemon.sh for unit-level restarting&lt;br/&gt;
2. added rolling-restart.sh script to perform system-level rolling restarts&lt;/p&gt;

&lt;p&gt;(Note that I intentionally did not restart the ZooKeeper nodes, since those binaries will need an update far less often)&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1660&quot; title=&quot;need a rolling restart script&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1660&quot;&gt;&lt;del&gt;HBASE-1660&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;http://issues.apache.org/jira/browse/HBASE-1660&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/HBASE-1660&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/bin/hbase-daemon.sh 984635 &lt;br/&gt;
  trunk/bin/rolling-restart.sh PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;http://review.cloudera.org/r/632/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/632/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;./bin/start-hbase.sh&lt;br/&gt;
./bin/rolling-restart.sh&lt;br/&gt;
./bin/stop-hbase.sh&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Nicolas&lt;/p&gt;

</comment>
                            <comment id="12897920" author="hbasereviewboard" created="Thu, 12 Aug 2010 19:47:41 +0000"  >&lt;p&gt;Message from: &quot;Nicolas&quot; &amp;lt;nspiegelberg@facebook.com&amp;gt;&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.cloudera.org/r/632/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/632/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2010-08-12 12:36:09.868512)&lt;/p&gt;


&lt;p&gt;Review request for hbase.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;regionservers were being restarted in parallel.  need to restart serially&lt;/li&gt;
	&lt;li&gt;wait for the master znode to expire before restarting the masters (this is especially necessary with backup masters)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;1. added &apos;restart&apos; option to hbase-daemon.sh for unit-level restarting&lt;br/&gt;
2. added rolling-restart.sh script to perform system-level rolling restarts&lt;/p&gt;

&lt;p&gt;(Note that I intentionally did not restart the ZooKeeper nodes, since those binaries will need an update far less often)&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1660&quot; title=&quot;need a rolling restart script&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1660&quot;&gt;&lt;del&gt;HBASE-1660&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;http://issues.apache.org/jira/browse/HBASE-1660&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/browse/HBASE-1660&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/bin/hbase-daemon.sh 984635 &lt;br/&gt;
  trunk/bin/regionservers.sh 984635 &lt;br/&gt;
  trunk/bin/rolling-restart.sh PRE-CREATION &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;http://review.cloudera.org/r/632/diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/632/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;./bin/start-hbase.sh&lt;br/&gt;
./bin/rolling-restart.sh&lt;br/&gt;
./bin/stop-hbase.sh&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Nicolas&lt;/p&gt;

</comment>
                            <comment id="12898072" author="stack" created="Fri, 13 Aug 2010 04:14:36 +0000"  >&lt;p&gt;Committed.  Thanks for the patch Nicolas.&lt;/p&gt;</comment>
                            <comment id="12898073" author="hbasereviewboard" created="Fri, 13 Aug 2010 04:27:10 +0000"  >&lt;p&gt;Message from: stack@duboce.net&lt;/p&gt;

&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;http://review.cloudera.org/r/632/#review894&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/632/#review894&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Ship it!&lt;/p&gt;


&lt;p&gt;I&apos;ll fix the minor crud below.&lt;/p&gt;

&lt;p&gt;I tried it in standalone and it doesn&apos;t break anything and the restart in this case works as advertised.  Will try later on cluster.  Nice patch Nicolas.&lt;/p&gt;


&lt;p&gt;trunk/bin/rolling-restart.sh&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/632/#comment2916&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/632/#comment2916&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Its 2010&lt;/p&gt;



&lt;p&gt;trunk/bin/rolling-restart.sh&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://review.cloudera.org/r/632/#comment2917&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://review.cloudera.org/r/632/#comment2917&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    There is white space here and on a few other lines&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;stack&lt;/li&gt;
&lt;/ul&gt;



</comment>
                            <comment id="12900381" author="jdcryans" created="Thu, 19 Aug 2010 18:10:23 +0000"  >&lt;p&gt;Since this was committed, I see this when using the normal startup scripts:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;
/data/jdcryans/git/hbase/bin/hbase-daemons.sh: line 49: /data/jdcryans/git/hbase/bin/master-backup.sh: No such file or directory
/data/jdcryans/git/hbase/bin/hbase-daemons.sh: line 49: exec: /data/jdcryans/git/hbase/bin/master-backup.sh: cannot execute: No such file or directory
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I don&apos;t see that file anywhere.&lt;/p&gt;</comment>
                            <comment id="12900385" author="nspiegelberg" created="Thu, 19 Aug 2010 18:17:00 +0000"  >&lt;p&gt;Do you have &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2870&quot; title=&quot;Add Backup CLI Option to HMaster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2870&quot;&gt;&lt;del&gt;HBASE-2870&lt;/del&gt;&lt;/a&gt; applied?  That patch added the master-backup.sh file.  It should have been committed to the public branch before this patch.&lt;/p&gt;</comment>
                            <comment id="12900386" author="stack" created="Thu, 19 Aug 2010 18:19:13 +0000"  >&lt;p&gt;My fault.  Fixing.  I didn&apos;t svn add.&lt;/p&gt;</comment>
                            <comment id="12909374" author="jdcryans" created="Tue, 14 Sep 2010 18:45:31 +0000"  >&lt;p&gt;I just tried the script on our dev cluster, worked pretty well! But, the commit of rolling-restart.sh wasn&apos;t clean and the file contained the same data twice, Stack is correcting that in trunk. (also we rolled back the ZK-based region assignment last week, so that we don&apos;t run into the master failover issues)&lt;/p&gt;</comment>
                            <comment id="12909382" author="stack" created="Tue, 14 Sep 2010 18:54:10 +0000"  >&lt;p&gt;Double commit my fault&lt;/p&gt;</comment>
                            <comment id="15017772" author="lars_francke" created="Fri, 20 Nov 2015 13:01:19 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12471465">HADOOP-6915</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 15 Jul 2009 18:08:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32220</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hejr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99619</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>