<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:42:27 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-7077/HBASE-7077.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-7077] Test for: CheckAndPut should properly read MVCC</title>
                <link>https://issues.apache.org/jira/browse/HBASE-7077</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;checkAndPut should integrate with MVCC, similar to how &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4583&quot; title=&quot;Integrate RWCC with Append and Increment operations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4583&quot;&gt;&lt;del&gt;HBASE-4583&lt;/del&gt;&lt;/a&gt; fixed appends and increments.&lt;/p&gt;

&lt;p&gt;Also need a test, here&apos;s one we could use (originally proposed in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7051&quot; title=&quot;CheckAndPut should properly read MVCC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7051&quot;&gt;&lt;del&gt;HBASE-7051&lt;/del&gt;&lt;/a&gt;):&lt;br/&gt;
The current value of some cell is 10.&lt;br/&gt;
I issue two concurrent requests:&lt;br/&gt;
A) a check and put where check value = 10, put value = 11&lt;br/&gt;
B) a put where put value = 50&lt;br/&gt;
The only result at the end of these operations that seems reasonable to me is the value of the cell being 50. If A occurred first (ACID wise), then our values go 10-&amp;gt;11-&amp;gt;50. If B occurred first, then our values go 10-&amp;gt;50 (and the checkAndPut fails)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12614113">HBASE-7077</key>
            <summary>Test for: CheckAndPut should properly read MVCC</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12613427">HBASE-7051</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ram_krish">ramkrishna.s.vasudevan</assignee>
                                    <reporter username="gchanan">Gregory Chanan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 31 Oct 2012 00:54:37 +0000</created>
                <updated>Tue, 26 Feb 2013 08:20:52 +0000</updated>
                            <resolved>Wed, 31 Oct 2012 22:13:48 +0000</resolved>
                                                    <fixVersion>0.94.3</fixVersion>
                    <fixVersion>0.95.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13487565" author="ram_krish" created="Wed, 31 Oct 2012 05:52:10 +0000"  >&lt;p&gt;I will try to write a testcase for this.  That day i reproduced with debugging.&lt;/p&gt;</comment>
                            <comment id="13487612" author="ram_krish" created="Wed, 31 Oct 2012 08:18:55 +0000"  >&lt;p&gt;Testcase that shows the problem.&lt;/p&gt;</comment>
                            <comment id="13487631" author="ram_krish" created="Wed, 31 Oct 2012 09:20:36 +0000"  >&lt;p&gt;Same testcase with some refactoring and assertion.&lt;/p&gt;</comment>
                            <comment id="13488172" author="lhofhansl" created="Wed, 31 Oct 2012 19:59:21 +0000"  >&lt;p&gt;Nice test Ram! I verified that it passes with the patch on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7051&quot; title=&quot;CheckAndPut should properly read MVCC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7051&quot;&gt;&lt;del&gt;HBASE-7051&lt;/del&gt;&lt;/a&gt; and fails without it.&lt;/p&gt;</comment>
                            <comment id="13488192" author="gchanan" created="Wed, 31 Oct 2012 20:25:16 +0000"  >&lt;p&gt;The test references &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7071&quot; title=&quot;Allow for user defined Data in HBase Table &amp;amp; ColumnFamily definitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7071&quot;&gt;HBASE-7071&lt;/a&gt;, but that is not related.  Change it to reference &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7051&quot; title=&quot;CheckAndPut should properly read MVCC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7051&quot;&gt;&lt;del&gt;HBASE-7051&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="13488270" author="lhofhansl" created="Wed, 31 Oct 2012 21:53:13 +0000"  >&lt;p&gt;I&apos;ll make that change and commit the test. I verified that it validates the fix in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7051&quot; title=&quot;CheckAndPut should properly read MVCC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7051&quot;&gt;&lt;del&gt;HBASE-7051&lt;/del&gt;&lt;/a&gt; correctly.&lt;/p&gt;</comment>
                            <comment id="13488297" author="lhofhansl" created="Wed, 31 Oct 2012 22:13:48 +0000"  >&lt;p&gt;Committed to 0.94 and 0.96. Thanks for the nice test Ram.&lt;br/&gt;
(I change the test name to TestHBase7051)&lt;/p&gt;</comment>
                            <comment id="13488514" author="hudson" created="Thu, 1 Nov 2012 06:53:24 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #562 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/562/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/562/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7077&quot; title=&quot;Test for: CheckAndPut should properly read MVCC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7077&quot;&gt;&lt;del&gt;HBASE-7077&lt;/del&gt;&lt;/a&gt; Test for: CheckAndPut should properly read MVCC (Ram) (Revision 1404383)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/regionserver/TestHBase7051.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13488580" author="hudson" created="Thu, 1 Nov 2012 09:47:16 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3503 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3503/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3503/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7077&quot; title=&quot;Test for: CheckAndPut should properly read MVCC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7077&quot;&gt;&lt;del&gt;HBASE-7077&lt;/del&gt;&lt;/a&gt; Test for: CheckAndPut should properly read MVCC (Revision 1404382)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestHBase7051.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13488669" author="yuzhihong@gmail.com" created="Thu, 1 Nov 2012 12:59:57 +0000"  >&lt;p&gt;There is no test category for the test which resulted in trunk build failure. &lt;/p&gt;</comment>
                            <comment id="13488757" author="lhofhansl" created="Thu, 1 Nov 2012 15:25:37 +0000"  >&lt;p&gt;fixed&lt;/p&gt;</comment>
                            <comment id="13488784" author="hudson" created="Thu, 1 Nov 2012 15:53:13 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #563 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/563/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/563/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7077&quot; title=&quot;Test for: CheckAndPut should properly read MVCC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7077&quot;&gt;&lt;del&gt;HBASE-7077&lt;/del&gt;&lt;/a&gt; ADDENDUM, add TestCategory (Revision 1404641)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/regionserver/TestHBase7051.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13488814" author="hudson" created="Thu, 1 Nov 2012 16:43:41 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3504 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3504/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3504/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7077&quot; title=&quot;Test for: CheckAndPut should properly read MVCC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7077&quot;&gt;&lt;del&gt;HBASE-7077&lt;/del&gt;&lt;/a&gt; ADDENDUM, add TestCategory (Revision 1404640)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestHBase7051.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13489242" author="hudson" created="Fri, 2 Nov 2012 04:18:54 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #247 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/247/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/247/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7077&quot; title=&quot;Test for: CheckAndPut should properly read MVCC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7077&quot;&gt;&lt;del&gt;HBASE-7077&lt;/del&gt;&lt;/a&gt; ADDENDUM, add TestCategory (Revision 1404640)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestHBase7051.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13490389" author="hudson" created="Mon, 5 Nov 2012 01:35:36 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security-on-Hadoop-23 #9 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/9/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security-on-Hadoop-23/9/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7077&quot; title=&quot;Test for: CheckAndPut should properly read MVCC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7077&quot;&gt;&lt;del&gt;HBASE-7077&lt;/del&gt;&lt;/a&gt; ADDENDUM, add TestCategory (Revision 1404641)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7077&quot; title=&quot;Test for: CheckAndPut should properly read MVCC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7077&quot;&gt;&lt;del&gt;HBASE-7077&lt;/del&gt;&lt;/a&gt; Test for: CheckAndPut should properly read MVCC (Ram) (Revision 1404383)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/regionserver/TestHBase7051.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/regionserver/TestHBase7051.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12613427">HBASE-7051</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12551502" name="HBASE-7071.patch" size="7159" author="ram_krish" created="Wed, 31 Oct 2012 08:18:55 +0000"/>
                            <attachment id="12551508" name="HBASE-7071_testcasewithassert.patch" size="7453" author="ram_krish" created="Wed, 31 Oct 2012 09:20:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 31 Oct 2012 05:52:10 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>253242</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 6 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dcp3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>75986</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>