<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:22:49 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4877/HBASE-4877.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4877] TestHCM failing sporadically on jenkins and always for me on an ubuntu machine</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4877</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;TestHCM takes 13 minutes for me on ubuntu and fails in testClosing.  It runs fine on a mac.  The problem test is not testClosing as I thought originally, its the test just previous, testConnectionUniqueness.  testConnectionUniqueness creates the maximum cached HConnections + 10 to verify each is unique if the passed in Configuration has a unique hash.  Problem comes when zk enforces its default max from single host of 30 connections which is &amp;lt; (max cached + 10).  The max does not seem to be enforced on mac for me.  The max connections runs up to max of 31 &amp;#8211; zk max + 1 &amp;#8211; and works fine until we do the +10.  On ubuntu, when we hit the zk max of 30, we&apos;ll then go into a fail mode where we cannot set up a zk session... each attempt takes a while.  Test passes, it just takes a while.&lt;/p&gt;

&lt;p&gt;Only, the uniqueness test does not clean up after itself and so all sessions to zk are outstanding so then when the subsequent testClosing runs, it can&apos;t set up connections successfully so fails.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12532805">HBASE-4877</key>
            <summary>TestHCM failing sporadically on jenkins and always for me on an ubuntu machine</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Sat, 26 Nov 2011 21:02:19 +0000</created>
                <updated>Fri, 20 Nov 2015 11:53:03 +0000</updated>
                            <resolved>Mon, 28 Nov 2011 18:30:01 +0000</resolved>
                                                    <fixVersion>0.92.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13157608" author="stack" created="Sat, 26 Nov 2011 21:10:06 +0000"  >&lt;p&gt;Patch to set down the number of connections we create when testing for uniqueness.  Also has testConnectionUniqueness clean up after itself.&lt;/p&gt;

&lt;p&gt;We are losing testing what happens when we create connections in excess of maximum to cache but this was broke anyways and the maximum to cache is in excess of zk connections max so &quot;...we should run into zk issues before the LRU hit this value of 31&quot; &amp;#8211; as we do on ubuntu (Quote is from head of HConnectionManager setting up the MAX_CACHED_HBASE_INSTANCES static.&lt;/p&gt;</comment>
                            <comment id="13157624" author="yuzhihong@gmail.com" created="Sat, 26 Nov 2011 23:26:59 +0000"  >&lt;p&gt;+1 on patch.&lt;/p&gt;

&lt;p&gt;Minor comment:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; zkmaxconnections = TEST_UTIL.getConfiguration().
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The variable should be named zkMaxConnections.&lt;/p&gt;</comment>
                            <comment id="13157639" author="lhofhansl" created="Sun, 27 Nov 2011 01:53:47 +0000"  >&lt;p&gt;Is this related to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4874&quot; title=&quot;Run tests with non-secure random, some tests hang otherwise&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4874&quot;&gt;&lt;del&gt;HBASE-4874&lt;/del&gt;&lt;/a&gt;? With &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4874&quot; title=&quot;Run tests with non-secure random, some tests hang otherwise&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4874&quot;&gt;&lt;del&gt;HBASE-4874&lt;/del&gt;&lt;/a&gt; applied TestHCM never hangs for me on Linux.&lt;/p&gt;</comment>
                            <comment id="13157664" author="yuzhihong@gmail.com" created="Sun, 27 Nov 2011 05:28:35 +0000"  >&lt;p&gt;I think Stack&apos;s changes are still desirable.&lt;br/&gt;
testConnectionUniqueness isn&apos;t the last test in TestHCM. So it is important for testConnectionUniqueness to clean up the connections.&lt;/p&gt;</comment>
                            <comment id="13157674" author="lhofhansl" created="Sun, 27 Nov 2011 06:37:23 +0000"  >&lt;p&gt;You&apos;re right.&lt;br/&gt;
+1, patch lgtm&lt;/p&gt;</comment>
                            <comment id="13158050" author="stack" created="Sun, 27 Nov 2011 22:24:35 +0000"  >&lt;p&gt;I get the hangs w/ your pom patch or not Lars.  I think we need this one too... least my build always fails this test w/o this patch (and reasoning about it, we should be seeing this fail more often that we do).&lt;/p&gt;</comment>
                            <comment id="13158614" author="stack" created="Mon, 28 Nov 2011 18:30:01 +0000"  >&lt;p&gt;Committed trunk and branch.  Thanks for reviews lads.&lt;/p&gt;</comment>
                            <comment id="13158759" author="hudson" created="Mon, 28 Nov 2011 20:59:28 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2493 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2493/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2493/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4877&quot; title=&quot;TestHCM failing sporadically on jenkins and always for me on an ubuntu machine&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4877&quot;&gt;&lt;del&gt;HBASE-4877&lt;/del&gt;&lt;/a&gt; TestHCM failing sporadically on jenkins and always for me on an ubuntu machine&lt;/p&gt;

&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/client/TestHCM.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13158992" author="hudson" created="Tue, 29 Nov 2011 00:51:26 +0000"  >&lt;p&gt;Integrated in HBase-0.92-security #22 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92-security/22/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92-security/22/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4877&quot; title=&quot;TestHCM failing sporadically on jenkins and always for me on an ubuntu machine&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4877&quot;&gt;&lt;del&gt;HBASE-4877&lt;/del&gt;&lt;/a&gt; TestHCM failing sporadically on jenkins and always for me on an ubuntu machine&lt;/p&gt;

&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/client/TestHCM.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13159128" author="hudson" created="Tue, 29 Nov 2011 07:11:19 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-security #13 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-security/13/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-security/13/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4877&quot; title=&quot;TestHCM failing sporadically on jenkins and always for me on an ubuntu machine&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4877&quot;&gt;&lt;del&gt;HBASE-4877&lt;/del&gt;&lt;/a&gt; TestHCM failing sporadically on jenkins and always for me on an ubuntu machine&lt;/p&gt;

&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/client/TestHCM.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13159782" author="hudson" created="Wed, 30 Nov 2011 03:48:25 +0000"  >&lt;p&gt;Integrated in HBase-0.92 #163 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92/163/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92/163/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4877&quot; title=&quot;TestHCM failing sporadically on jenkins and always for me on an ubuntu machine&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4877&quot;&gt;&lt;del&gt;HBASE-4877&lt;/del&gt;&lt;/a&gt; TestHCM failing sporadically on jenkins and always for me on an ubuntu machine&lt;/p&gt;

&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/test/java/org/apache/hadoop/hbase/client/TestHCM.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15015895" author="lars_francke" created="Fri, 20 Nov 2015 11:53:03 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12505215" name="4877.txt" size="3952" author="stack" created="Sat, 26 Nov 2011 21:10:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 26 Nov 2011 23:26:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>218538</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i06a9j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34594</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>