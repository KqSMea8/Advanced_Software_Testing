<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:30:03 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5689/HBASE-5689.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5689] Skipping RecoveredEdits may cause data loss</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5689</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Let&apos;s see the following scenario:&lt;br/&gt;
1.Region is on the server A&lt;br/&gt;
2.put KV(r1-&amp;gt;v1) to the region&lt;br/&gt;
3.move region from server A to server B&lt;br/&gt;
4.put KV(r2-&amp;gt;v2) to the region&lt;br/&gt;
5.move region from server B to server A&lt;br/&gt;
6.put KV(r3-&amp;gt;v3) to the region&lt;br/&gt;
7.kill -9 server B and start it&lt;br/&gt;
8.kill -9 server A and start it &lt;br/&gt;
9.scan the region, we could only get two KV(r1-&amp;gt;v1,r2-&amp;gt;v2), the third KV(r3-&amp;gt;v3) is lost.&lt;/p&gt;

&lt;p&gt;Let&apos;s analyse the upper scenario from the code:&lt;br/&gt;
1.the edit logs of KV(r1-&amp;gt;v1) and KV(r3-&amp;gt;v3) are both recorded in the same hlog file on server A.&lt;br/&gt;
2.when we split server B&apos;s hlog file in the process of ServerShutdownHandler, we create one RecoveredEdits file f1 for the region.&lt;br/&gt;
2.when we split server A&apos;s hlog file in the process of ServerShutdownHandler, we create another RecoveredEdits file f2 for the region.&lt;br/&gt;
3.however, RecoveredEdits file f2 will be skiped when initializing region&lt;br/&gt;
HRegion#replayRecoveredEditsIfAny&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Path edits: files) {
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (edits == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || !&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.fs.exists(edits)) {
        LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Null or non-existent edits file: &quot;&lt;/span&gt; + edits);
        &lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;;
      }
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (isZeroLengthThenDelete(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.fs, edits)) &lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;;

      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (checkSafeToSkip) {
        Path higher = files.higher(edits);
        &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; maxSeqId = &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;.MAX_VALUE;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (higher != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
          &lt;span class=&quot;code-comment&quot;&gt;// Edit file name pattern, HLog.EDITFILES_NAME_PATTERN: &lt;span class=&quot;code-quote&quot;&gt;&quot;-?[0-9]+&quot;&lt;/span&gt;
&lt;/span&gt;          &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; fileName = higher.getName();
          maxSeqId = &lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.abs(&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;.parseLong(fileName));
        }
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (maxSeqId &amp;lt;= minSeqId) {
          &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; msg = &lt;span class=&quot;code-quote&quot;&gt;&quot;Maximum possible sequenceid &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; log is &quot;&lt;/span&gt; + maxSeqId
              + &lt;span class=&quot;code-quote&quot;&gt;&quot;, skipped the whole file, path=&quot;&lt;/span&gt; + edits;
          LOG.debug(msg);
          &lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;;
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
          checkSafeToSkip = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
        }
      }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

</description>
                <environment></environment>
        <key id="12548934">HBASE-5689</key>
            <summary>Skipping RecoveredEdits may cause data loss</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zjushch">chunhui shen</assignee>
                                    <reporter username="zjushch">chunhui shen</reporter>
                        <labels>
                    </labels>
                <created>Sat, 31 Mar 2012 04:57:01 +0000</created>
                <updated>Fri, 12 Oct 2012 05:35:12 +0000</updated>
                            <resolved>Sat, 7 Apr 2012 15:32:46 +0000</resolved>
                                    <version>0.94.0</version>
                                    <fixVersion>0.94.0</fixVersion>
                                    <component>regionserver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13243015" author="zjushch" created="Sat, 31 Mar 2012 05:00:20 +0000"  >&lt;p&gt;I have written a test case for the issue to make a data loss scenario when skip RecoveredEdits.&lt;/p&gt;</comment>
                            <comment id="13243057" author="ram_krish" created="Sat, 31 Mar 2012 06:49:34 +0000"  >&lt;p&gt;@Chunhui&lt;/p&gt;

&lt;p&gt;Good test case.  Yes able to reproduce the problem &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.. Just trying to understand more on what is happening there.  &lt;/p&gt;</comment>
                            <comment id="13243069" author="zjushch" created="Sat, 31 Mar 2012 07:38:52 +0000"  >&lt;p&gt;In the patch,&lt;br/&gt;
I make the region&apos;s MaximumEditLogSeqNum in the RecoveredEdit file as the file name.&lt;/p&gt;</comment>
                            <comment id="13243070" author="zjushch" created="Sat, 31 Mar 2012 07:40:38 +0000"  >&lt;p&gt;rather than the current MinimumEditLogSeqNum as the file name.&lt;/p&gt;</comment>
                            <comment id="13243106" author="ram_krish" created="Sat, 31 Mar 2012 10:28:28 +0000"  >&lt;p&gt;@Chunhui&lt;br/&gt;
Thanks for the patch.&lt;br/&gt;
I would like to tell my analysis in this&lt;br/&gt;
-&amp;gt; Suppose the current  seq for RS 1 is 4&lt;br/&gt;
When the first row kv was inserted KV(r1-&amp;gt;v1), the current seq is 5.&lt;br/&gt;
On moving the region to RS2 the store gets flushed and when RS2 opens the region the next seq he can use will be 6.&lt;br/&gt;
Now we make the next kv entry KV(r2-&amp;gt;v1), now the current seq for this entry is 6. Now when the region is moved again to RS1, another store file is created by RS2.&lt;br/&gt;
Now when RS1 opens the region the seq number which he can use will be 7.&lt;/p&gt;

&lt;p&gt;We now add an entry KV(r3-&amp;gt;v1) again in RS1 so it will have 7 in it (in WAL).&lt;/p&gt;

&lt;p&gt;Kill the RS2 first.  This will create a recovered.edits with file name 000006.&lt;/p&gt;

&lt;p&gt;Kill RS1.   This will create a recovered.edits with file name 00005.&lt;/p&gt;

&lt;p&gt;Now when the region is finally opened in a new RS i will be having the 2 store files and the max seq id from them will be 6.  Now the recovered.edits will also give me 6 as highest seq.  &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (maxSeqId &amp;lt;= minSeqId) {
          &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; msg = &lt;span class=&quot;code-quote&quot;&gt;&quot;Maximum possible sequenceid &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; log is &quot;&lt;/span&gt; + maxSeqId
              + &lt;span class=&quot;code-quote&quot;&gt;&quot;, skipped the whole file, path=&quot;&lt;/span&gt; + edits;
          LOG.debug(msg);
          &lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Correct me my analysis is wrong.&lt;/p&gt;
</comment>
                            <comment id="13243109" author="ram_krish" created="Sat, 31 Mar 2012 10:36:15 +0000"  >&lt;p&gt;I just want to understand here like removing the &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (maxSeqId &amp;lt;= minSeqId) {
          &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; msg = &lt;span class=&quot;code-quote&quot;&gt;&quot;Maximum possible sequenceid &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; log is &quot;&lt;/span&gt; + maxSeqId
              + &lt;span class=&quot;code-quote&quot;&gt;&quot;, skipped the whole file, path=&quot;&lt;/span&gt; + edits;
          LOG.debug(msg);
          &lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&apos;continue&apos; here should solve the problem.  Inside replayRecoveredEdits we have this code&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
         &lt;span class=&quot;code-comment&quot;&gt;// Now, figure &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; we should skip &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; edit.
&lt;/span&gt;          &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (key.getLogSeqNum() &amp;lt;= currentEditSeqId) {
            skippedEdits++;
            &lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;;
          }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;which will any way skip unnecessary edits.  I tried by commenting the &apos;continue&apos; in the code and the test case that you gave passed.  It is my thought, your comments are welcome.&lt;/p&gt;</comment>
                            <comment id="13243154" author="zhihyu@ebaysf.com" created="Sat, 31 Mar 2012 14:10:10 +0000"  >&lt;p&gt;From the above analysis, it looks like this bug was caused by the optimization made in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4797&quot; title=&quot;[availability] Skip recovered.edits files with edits we know older than what region currently has&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4797&quot;&gt;&lt;del&gt;HBASE-4797&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13243204" author="ram_krish" created="Sat, 31 Mar 2012 16:10:56 +0000"  >&lt;p&gt;@Ted&lt;br/&gt;
What do you feel Ted? Chunhui&apos;s patch also makes sense but any way the idea is not to skip any recovered.edits file.  So i felt removing the check will be enough.&lt;/p&gt;</comment>
                            <comment id="13243206" author="ram_krish" created="Sat, 31 Mar 2012 16:12:17 +0000"  >&lt;p&gt;Making it critical as it is data loss related.&lt;/p&gt;</comment>
                            <comment id="13243213" author="zhihyu@ebaysf.com" created="Sat, 31 Mar 2012 16:25:41 +0000"  >&lt;p&gt;Removing the check should be enough.&lt;/p&gt;

&lt;p&gt;With the attached patch, TestHRegion#testDataCorrectnessReplayingRecoveredEdits passes.&lt;/p&gt;</comment>
                            <comment id="13243625" author="zjushch" created="Sun, 1 Apr 2012 01:44:08 +0000"  >&lt;p&gt;@Ram&lt;br/&gt;
The analysis is correct.&lt;br/&gt;
However, I think your solution is not use the optimization made in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4797&quot; title=&quot;[availability] Skip recovered.edits files with edits we know older than what region currently has&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4797&quot;&gt;&lt;del&gt;HBASE-4797&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
In my  &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5689&quot; title=&quot;Skipping RecoveredEdits may cause data loss&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5689&quot;&gt;&lt;del&gt;HBASE-5689&lt;/del&gt;&lt;/a&gt;.patch, I just change the file name of edit log to MaximumEditLogSeqNum&#12290;&lt;br/&gt;
In this issue, with the patch it will not skip RecoveredEdits file because we shouldn&apos;t, however, in other case, for example, we first put many data to RS1, then move regon to RS2 and put many data again. If RS1 and RS2 died, we would skip the edit log file from RS1.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Chunhui&apos;s patch also makes sense but any way the idea is not to skip any recovered.edits file.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;So, it is wrong, my way is keeping skip recovered.edits file, except the case such as this issue.&lt;/p&gt;</comment>
                            <comment id="13243648" author="zhihyu@ebaysf.com" created="Sun, 1 Apr 2012 04:08:44 +0000"  >&lt;p&gt;Some minor comments about Chunhui&apos;s patch:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+          LOG.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Rename &quot;&lt;/span&gt; + wap.p + &lt;span class=&quot;code-quote&quot;&gt;&quot; to &quot;&lt;/span&gt; + dst);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The log should begin with &quot;Renamed &quot;.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[], &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;&amp;gt; regionMaximumEditLogSeqNum = Collections
+        .synchronizedMap(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TreeMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[], &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;&amp;gt;(Bytes.BYTES_COMPARATOR));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Is a TreeMap needed above ? We&apos;re just remembering the mapping, right ?&lt;/p&gt;</comment>
                            <comment id="13243675" author="zjushch" created="Sun, 1 Apr 2012 07:34:52 +0000"  >&lt;blockquote&gt;&lt;p&gt;Is a TreeMap needed above ? We&apos;re just remembering the mapping, right ?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I first used ConcurrentHashMap, but for the same region name, they mapped to different values because of byte[]&lt;/p&gt;</comment>
                            <comment id="13243743" author="yuzhihong@gmail.com" created="Sun, 1 Apr 2012 15:00:03 +0000"  >&lt;p&gt;Using a TreeMap is common practice.&lt;/p&gt;

&lt;p&gt;Please attach test suite result - Hadoop QA is not working.&lt;/p&gt;</comment>
                            <comment id="13243933" author="yuzhihong@gmail.com" created="Mon, 2 Apr 2012 01:44:18 +0000"  >&lt;p&gt;Re-attaching Chunhui&apos;s patch&lt;/p&gt;</comment>
                            <comment id="13243983" author="ram_krish" created="Mon, 2 Apr 2012 05:47:26 +0000"  >&lt;p&gt;@Chunhui&lt;br/&gt;
+1 on patch Chunhui.  I was bit hesitant to change that main logic.  But after checking different scenarios this change is necessary to have both performance and to address this JIRA.  Good one.  Thanks a lot. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13244233" author="zhihyu@ebaysf.com" created="Mon, 2 Apr 2012 14:57:21 +0000"  >&lt;p&gt;@Chunhui:&lt;br/&gt;
Hadoop QA isn&apos;t picking up any patches from this JIRA.&lt;/p&gt;

&lt;p&gt;Please run through test suite and let us know the result.&lt;/p&gt;</comment>
                            <comment id="13244418" author="stack" created="Mon, 2 Apr 2012 18:33:30 +0000"  >&lt;p&gt;Good one Chunhui.  I think the patch good.&lt;/p&gt;

&lt;p&gt;Nice reproduction of the problem in a test.  Where in the test do you find that we&apos;ve lost the third edit?&lt;/p&gt;

&lt;p&gt;So we name the file when we write it for its first edit, then when we move it into place, we rename it to be by last edit in the file?  Add a comment to that effect I&apos;d say else could be confusing.  Hmm... I suppose you have it here on the doc for getCompletedRecoveredEditsFilePath.  Thats probably good enough.. but no harm explaining why we go from naming file w/ first edit to instead name it for the last edit.&lt;/p&gt;
</comment>
                            <comment id="13244719" author="lhofhansl" created="Mon, 2 Apr 2012 22:11:23 +0000"  >&lt;p&gt;+1 on patch.&lt;/p&gt;</comment>
                            <comment id="13246708" author="lhofhansl" created="Wed, 4 Apr 2012 20:37:46 +0000"  >&lt;p&gt;Reattaching for test run.&lt;/p&gt;</comment>
                            <comment id="13246748" author="hadoopqa" created="Wed, 4 Apr 2012 21:29:07 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12521382/HBASE-5689.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12521382/HBASE-5689.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 2 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.mapreduce.TestMultithreadedTableMapper&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestImportTsv&lt;br/&gt;
                  org.apache.hadoop.hbase.mapred.TestTableMapReduce&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestTableMapReduce&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1390//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1390//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1390//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1390//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1390//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1390//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13247017" author="lhofhansl" created="Thu, 5 Apr 2012 04:50:31 +0000"  >&lt;p&gt;All except&lt;br/&gt;
org.apache.hadoop.hbase.mapreduce.TestImportTsv.testMROnTable and org.apache.hadoop.hbase.mapreduce.TestImportTsv.testMROnTableWithCustomMapper fail with the known NumberFormatException.&lt;/p&gt;</comment>
                            <comment id="13247018" author="lhofhansl" created="Thu, 5 Apr 2012 04:52:13 +0000"  >&lt;p&gt;@chunhui: Could you respond to Stack&apos;s last comment? I would like to get 0.94.0RC1 out soon.&lt;/p&gt;</comment>
                            <comment id="13247954" author="zjushch" created="Fri, 6 Apr 2012 01:57:39 +0000"  >&lt;p&gt;Sorry for the later response.&lt;/p&gt;

&lt;p&gt;In the patchV2, I add some doc for getCompletedRecoveredEditsFilePath() as the comment by Stack. All the other is same with patchV1.&lt;/p&gt;

&lt;p&gt;Please review again.&lt;br/&gt;
Thanks!&lt;/p&gt;</comment>
                            <comment id="13247960" author="mingma" created="Fri, 6 Apr 2012 02:04:17 +0000"  >&lt;p&gt;Really nice finding and fix. Some comments regarding performance:&lt;/p&gt;

&lt;p&gt;1. replayRecoveredEditsIfAny still sorts and uses the sequence id of next recoverededit file as the max sequence id of the current recoverededit file. With this fix, is that still necessary? replayRecoveredEditsIfAny can simply walk through all the recoverededit files and skip those files that have &quot;max sequence id&quot; &amp;lt;= &quot;current sequence id of the region&quot;. &lt;br/&gt;
2. If we have multiple recoverededit files for a given region, is it safe to say that &quot;In maximum, there could only be one recoverededit file whose max sequence id is larger than the current sequence id of the region&quot;? If yes, replayRecoveredEditsIfAny can skip the rest of recoverededit files once it detects that special recoverededit file.&lt;/p&gt;</comment>
                            <comment id="13247972" author="zjushch" created="Fri, 6 Apr 2012 02:17:11 +0000"  >&lt;p&gt;@Ming&lt;br/&gt;
I like the optimize that we simply walk through all the recoverededit files and skip those files that have &quot;max sequence id&quot; &amp;lt;= &quot;current sequence id of the region&quot;.&lt;/p&gt;

&lt;p&gt;For the second point, I think it&apos;s right and the first optimize is enough and  simle to understand&lt;/p&gt;</comment>
                            <comment id="13247986" author="hadoopqa" created="Fri, 6 Apr 2012 02:59:19 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12521627/HBASE-5689v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12521627/HBASE-5689v2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1419//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1419//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1419//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1419//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1419//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1419//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13247987" author="zjushch" created="Fri, 6 Apr 2012 03:03:16 +0000"  >&lt;p&gt;In the patchV3, append the optimize suggested by Ming Ma &#65306;replayRecoveredEditsIfAny simply walk through all the recoverededit files and skip those files that have &quot;max sequence id&quot; &amp;lt;= &quot;current sequence id of the region&quot;.&lt;/p&gt;</comment>
                            <comment id="13247992" author="zhihyu@ebaysf.com" created="Fri, 6 Apr 2012 03:18:58 +0000"  >&lt;p&gt;For patch v3:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      maxSeqId = &lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.abs(&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;.parseLong(fileName));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The Math.abs() call is not needed, right ?&lt;/p&gt;</comment>
                            <comment id="13247993" author="zjushch" created="Fri, 6 Apr 2012 03:23:09 +0000"  >&lt;blockquote&gt;&lt;p&gt;The Math.abs() call is not needed, right ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think so, but I don&apos;t know why Math.abs() is needed before.&lt;/p&gt;</comment>
                            <comment id="13248013" author="lhofhansl" created="Fri, 6 Apr 2012 03:55:05 +0000"  >&lt;p&gt;Thanks Chunhui. Patch looks good to me. +1&lt;br/&gt;
Re: Math.abs(), the comment in the code says that the file name pattern is -?&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9&amp;#93;&lt;/span&gt;+, so negative is possible?&lt;/p&gt;</comment>
                            <comment id="13248018" author="zhihyu@ebaysf.com" created="Fri, 6 Apr 2012 04:07:11 +0000"  >&lt;p&gt;Please take a look at the updated javadoc for getCompletedRecoveredEditsFilePath():&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+   * Get the completed recovered edits file path, renaming it to be by last edit
+   * in the file from its first edit. Then we could use the name to skip
+   * recovered edits when doing {@link HRegion#replayRecoveredEditsIfAny}.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13248020" author="zhihyu@ebaysf.com" created="Fri, 6 Apr 2012 04:07:49 +0000"  >&lt;p&gt;Patch v4 removes Math.abs() call.&lt;/p&gt;</comment>
                            <comment id="13248029" author="lhofhansl" created="Fri, 6 Apr 2012 04:17:50 +0000"  >&lt;p&gt;How do you know it&apos;s safe to remove Math.abs()?&lt;/p&gt;</comment>
                            <comment id="13248031" author="hadoopqa" created="Fri, 6 Apr 2012 04:20:22 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12521635/HBASE-5689v3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12521635/HBASE-5689v3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     -1 core tests.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1422//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1422//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1422//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1422//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1422//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1422//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13248033" author="zhihyu@ebaysf.com" created="Fri, 6 Apr 2012 04:24:12 +0000"  >&lt;p&gt;Consider my comment above and the following method in HLogSplitter:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; formatRecoveredEditsFileName(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; seqid) {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.format(&lt;span class=&quot;code-quote&quot;&gt;&quot;%019d&quot;&lt;/span&gt;, seqid);
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13248058" author="hadoopqa" created="Fri, 6 Apr 2012 05:05:30 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12521642/5689-v4.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12521642/5689-v4.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1425//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1425//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1425//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1425//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1425//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1425//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13248421" author="stack" created="Fri, 6 Apr 2012 15:37:29 +0000"  >&lt;p&gt;@Ming (Hey, long time no hear from you).&lt;/p&gt;

&lt;p&gt;On 1., yes, sounds good.  I do not think 2. holds.  It is more robust replaying any file that is &amp;gt; &apos;current max seqid of the region&apos; at least until we do more thinking on this topic.  The WAL split can be messy or just as bad, we can be inventive around how we might split WALs and how we might write files to replay. &lt;/p&gt;</comment>
                            <comment id="13248457" author="stack" created="Fri, 6 Apr 2012 16:12:20 +0000"  >&lt;p&gt;Looking at the patch, it looks good to me.&lt;/p&gt;

&lt;p&gt;On the Math.abs, its probably not needed any more given current file formats but its not doing any harm.  I tried to go back through src history to see how we used name the recovered edits files &amp;#8211; they used be called stuff like oldlogfile.log, etc &amp;#8211; and they have been named for first seqid in the file since 0.90 so its unlikely this will ever go negative or that this code will encouter a file named negatively.&lt;/p&gt;

&lt;p&gt;I also thought that perhaps this patch only for trunk because what about the case where we have existing wal files that are still named by the first seqid in the file?  But this should be fine.  We&apos;ll over-replay rather than under-replay edits in this case so it should be fine.&lt;/p&gt;

&lt;p&gt;+1 on commit adding back the Math.abs on commit (though reasoning would have it we don&apos;t need, I think we should add it back just-in-case).&lt;/p&gt;</comment>
                            <comment id="13249276" author="zhihyu@ebaysf.com" created="Sat, 7 Apr 2012 14:32:08 +0000"  >&lt;p&gt;Re-attaching patch v3 for hadoop QA.&lt;/p&gt;</comment>
                            <comment id="13249283" author="hadoopqa" created="Sat, 7 Apr 2012 15:25:48 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12521820/HBASE-5689v3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12521820/HBASE-5689v3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1445//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1445//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1445//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1445//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/1445//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/1445//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13249285" author="zhihyu@ebaysf.com" created="Sat, 7 Apr 2012 15:32:37 +0000"  >&lt;p&gt;Integrated patch v3 to 0.94 and trunk.&lt;/p&gt;

&lt;p&gt;Thanks for the patch Chunhui.&lt;/p&gt;

&lt;p&gt;Thanks for the review, Ram, Lars, Stack and Ming.&lt;/p&gt;</comment>
                            <comment id="13249293" author="hudson" created="Sat, 7 Apr 2012 16:32:26 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2726 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2726/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2726/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5689&quot; title=&quot;Skipping RecoveredEdits may cause data loss&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5689&quot;&gt;&lt;del&gt;HBASE-5689&lt;/del&gt;&lt;/a&gt; Skipping RecoveredEdits may cause data loss (Chunhui) (Revision 1310788)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogSplitter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13249295" author="hudson" created="Sat, 7 Apr 2012 16:51:03 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #97 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/97/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/97/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5689&quot; title=&quot;Skipping RecoveredEdits may cause data loss&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5689&quot;&gt;&lt;del&gt;HBASE-5689&lt;/del&gt;&lt;/a&gt; Skipping RecoveredEdits may cause data loss (Chunhui) (Revision 1310787)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogSplitter.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13249476" author="hudson" created="Sun, 8 Apr 2012 05:12:25 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-security #162 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-security/162/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-security/162/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5689&quot; title=&quot;Skipping RecoveredEdits may cause data loss&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5689&quot;&gt;&lt;del&gt;HBASE-5689&lt;/del&gt;&lt;/a&gt; Skipping RecoveredEdits may cause data loss (Chunhui) (Revision 1310788)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogSplitter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13253623" author="hudson" created="Fri, 13 Apr 2012 18:32:52 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #9 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/9/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/9/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5689&quot; title=&quot;Skipping RecoveredEdits may cause data loss&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5689&quot;&gt;&lt;del&gt;HBASE-5689&lt;/del&gt;&lt;/a&gt; Skipping RecoveredEdits may cause data loss (Chunhui) (Revision 1310787)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogSplitter.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegion.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12520764" name="5689-testcase.patch" size="4868" author="zjushch" created="Sat, 31 Mar 2012 05:00:18 +0000"/>
                            <attachment id="12521642" name="5689-v4.txt" size="12234" author="zhihyu@ebaysf.com" created="Fri, 6 Apr 2012 04:07:48 +0000"/>
                            <attachment id="12521382" name="HBASE-5689.patch" size="10306" author="lhofhansl" created="Wed, 4 Apr 2012 20:37:46 +0000"/>
                            <attachment id="12520775" name="HBASE-5689.patch" size="10306" author="zjushch" created="Sat, 31 Mar 2012 07:38:46 +0000"/>
                            <attachment id="12521627" name="HBASE-5689v2.patch" size="10428" author="zjushch" created="Fri, 6 Apr 2012 01:57:39 +0000"/>
                            <attachment id="12521820" name="HBASE-5689v3.patch" size="12278" author="zhihyu@ebaysf.com" created="Sat, 7 Apr 2012 14:32:08 +0000"/>
                            <attachment id="12521635" name="HBASE-5689v3.patch" size="12278" author="zjushch" created="Fri, 6 Apr 2012 03:03:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 31 Mar 2012 06:49:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>234007</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 36 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i068zr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34388</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>