<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:37:12 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-12865/HBASE-12865.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-12865] WALs may be deleted before they are replicated to peers</title>
                <link>https://issues.apache.org/jira/browse/HBASE-12865</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;By design, ReplicationLogCleaner guarantee that the WALs  being in replication queue can&apos;t been deleted by the HMaster. The ReplicationLogCleaner gets the WAL set from zookeeper by scanning the replication zk node. But it may get uncompleted WAL set during replication failover for the scan operation is not atomic.&lt;/p&gt;

&lt;p&gt;For example: There are three region servers: rs1, rs2, rs3, and peer id 10.  The layout of replication zookeeper nodes is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/hbase/replication/rs/rs1/10/wals
                     /rs2/10/wals
                     /rs3/10/wals
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;t1: the ReplicationLogCleaner finished scanning the replication queue of rs1, and start to scan the queue of rs2.&lt;/li&gt;
	&lt;li&gt;t2: region server rs3 is down, and rs1 take over rs3&apos;s replication queue. The new layout is&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/hbase/replication/rs/rs1/10/wals
                     /rs1/10-rs3/wals
                     /rs2/10/wals
                     /rs3
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;t3, the ReplicationLogCleaner finished scanning the queue of rs2, and start to scan the node of rs3. But the the queue has been moved to  &quot;replication/rs1/10-rs3/WALS&quot;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;So the  ReplicationLogCleaner will miss the WALs of rs3 in peer 10 and the hmaster may delete these WALs before they are replicated to peer clusters.&lt;/p&gt;

&lt;p&gt;We encountered this problem in our cluster and I think it&apos;s a serious bug for replication.&lt;/p&gt;

&lt;p&gt;Suggestions are welcomed to fix this bug. thx~&lt;/p&gt;</description>
                <environment></environment>
        <key id="12767655">HBASE-12865</key>
            <summary>WALs may be deleted before they are replicated to peers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="heliangliang">He Liangliang</assignee>
                                    <reporter username="liushaohui">Liu Shaohui</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Jan 2015 04:21:56 +0000</created>
                <updated>Mon, 31 Aug 2015 22:39:46 +0000</updated>
                            <resolved>Fri, 7 Aug 2015 22:14:51 +0000</resolved>
                                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>0.98.14</fixVersion>
                    <fixVersion>1.0.2</fixVersion>
                    <fixVersion>1.2.0</fixVersion>
                    <fixVersion>1.1.2</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                                    <component>Replication</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>14</watches>
                                                                <comments>
                            <comment id="14278281" author="apurtell" created="Thu, 15 Jan 2015 05:31:54 +0000"  >&lt;p&gt;It seems we should introduce a timed lock (a ZK lock recipe) on the replication znode to lock out changes when the ReplicationLogCleaner is enumerating over its children.&lt;/p&gt;</comment>
                            <comment id="14281686" author="lhofhansl" created="Sun, 18 Jan 2015 07:11:06 +0000"  >&lt;p&gt;Hmm... Couple of thoughts:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Can we do simple optimistic concurrency control here? In the beginning of the method we check the parent node&apos;s cversion (that is the number of changes to the children of this znode), in the end we check it again. If it changed we start over inside the method, or simply say that no files can be deleted and try again during the next call.&lt;/li&gt;
	&lt;li&gt;Maybe when an RS takes over a queue, should it touch all involved logs first, so they all get a new timestamps? In that case they would not be eligible for deletion until they expire again. That would need to be done &lt;b&gt;before&lt;/b&gt; the queues are moved in ZK.&lt;/li&gt;
	&lt;li&gt;Or, since this is only an issue when the &lt;b&gt;same&lt;/b&gt; region server enumerates the queues and adds a queue from another RS we only need coordination between the threads doing this. That is: Block the NodeFailoverWorker from claiming any new queues while there&apos;s a cleanup or check in process.&lt;/li&gt;
	&lt;li&gt;There might also be a more complex problem. Queues could be moved &lt;b&gt;after&lt;/b&gt; we checked, but before we get to the delete code. So we would need to make sure queues are not moved until after we finished a delete cycle.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;#1 seems simple enough. #2 should work, but there&apos;s no guarantee and it means NN actions. #3 should also work fine.&lt;/p&gt;

&lt;p&gt;#4 is a concern with all these approaches; we need to avoid changes to the queue from the point we start checking to the queues to the point where we finish the current delete cycle. And so that cannot be handled 100% in a LogCleaner alone (we might need to add begin() and end() hooks to the cleaners... Ugh.)&lt;/p&gt;</comment>
                            <comment id="14281689" author="lhofhansl" created="Sun, 18 Jan 2015 07:21:21 +0000"  >&lt;p&gt;Actually #3 can work. We can be lame and take a lock in CleanerChore.checkAndDeleteFiles, and ReplicationSourceManager.NodeFailoverWorker.run(). That way we have a transactionally safe check and delete w.r.t. stuff the the NodeFailoverWorkder can add.&lt;/p&gt;

&lt;p&gt;The downside is that the cleaner chore is also doing HFiles, etc.&lt;br/&gt;
We can work around that by adding some hooks into CleanerChore that are called before and after checkAndDeleteFiles, or we make checkAndDeleteFiles in CleanerChore protected and then override and wrap that in the ReplicationLogCleaner.&lt;/p&gt;
</comment>
                            <comment id="14281693" author="lhofhansl" created="Sun, 18 Jan 2015 07:38:48 +0000"  >&lt;p&gt;Sorry for the spam. Not so easy, each RS scans queue for all RS before deleting anything, and so other RSs can move queues while this one is scanning ZK. So #3 is out. #1 is also hard as we&apos;d have to check the cversion of all RSs. That leaves us with #2.&lt;/p&gt;

&lt;p&gt;Or of course what Andy suggested: proper locking in ZK.&lt;/p&gt;</comment>
                            <comment id="14282125" author="liushaohui" created="Mon, 19 Jan 2015 04:08:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt;&lt;br/&gt;
Thanks for so many ideas.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xieliang007&quot; class=&quot;user-hover&quot; rel=&quot;xieliang007&quot;&gt;Liang Xie&lt;/a&gt; also suggest that using the cversion of &quot;replication/rs&quot; to check if replication queue has changed in the end of scan. &lt;br/&gt;
I will make a patch according to this idea today.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;#1 is also hard as we&apos;d have to check the cversion of all RSs&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;We can only check the cversion of &quot;replication/rs&quot;, not all RSs.&lt;/p&gt;</comment>
                            <comment id="14282200" author="lhofhansl" created="Mon, 19 Jan 2015 06:45:50 +0000"  >&lt;blockquote&gt;&lt;p&gt;We can only check the cversion of &quot;replication/rs&quot;, not all RSs.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t think that would correct. In your scenario only the .../rs/r1 and .../rs/r3 znodes would change. cversion is not updated up the chain. I.e. .../rs cversion is not change when a node is added/removed from rs/r1 or rs/r2. Only r1&apos;s and r2&apos;s cversion would change.&lt;/p&gt;

&lt;p&gt;I think, we would need to keep re-verify cversions of all .../rs/rsXXX znodes.&lt;/p&gt;</comment>
                            <comment id="14282333" author="liushaohui" created="Mon, 19 Jan 2015 10:07:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I don&apos;t think that would correct. In your scenario only the .../rs/r1 and .../rs/r3 znodes would change. cversion is not updated up the chain. I.e. .../rs cversion is not change when a node is added/removed from rs/r1 or rs/r2. Only r1&apos;s and r2&apos;s cversion would change.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I write a test and the result is as you said.  Thanks for pointing out my mistake.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;we would need to keep re-verify cversions of all .../rs/rsXXX znodes.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;It costs a lot to re-verify cversions of all .../rs/rsXXX znodes for large cluster. And this will make more pressure to zk.&lt;/p&gt;

&lt;p&gt;Another method is to update ../rs node during taking over the replication queue of dead server and re-verify cversion of ../rs in the end of scan.&lt;br/&gt;
We can add this update operation to current atomic multi operation of coping  the replication queue.&lt;/p&gt;

</comment>
                            <comment id="14282782" author="apurtell" created="Mon, 19 Jan 2015 18:05:46 +0000"  >&lt;blockquote&gt;&lt;p&gt;It costs a lot to re-verify cversions of all .../rs/rsXXX znodes for large cluster. And this will make more pressure to zk.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Or utilize a ZK lock recipe to exclude other mutators up front. &lt;/p&gt;</comment>
                            <comment id="14282783" author="apurtell" created="Mon, 19 Jan 2015 18:07:04 +0000"  >&lt;blockquote&gt;&lt;p&gt;Another method is to update ../rs node during taking over the replication queue of dead server and re-verify cversion of ../rs in the end of scan. We can add this update operation to current atomic multi operation of coping the replication queue.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If you re-verify and the cversion has changed, you will need to go back and process everything again. &lt;/p&gt;</comment>
                            <comment id="14605526" author="heliangliang" created="Mon, 29 Jun 2015 12:06:03 +0000"  >&lt;p&gt;Made fix for 0.94 with optimistic locking:&lt;br/&gt;
1. update /hbase/replication/rs/ with empty data in the batch operation of copyQueuesFromRSUsingMulti, so the version will change when the queue is transferred&lt;br/&gt;
2. check version before and after search hlogs in log cleaner, if not found and version is changed, continue&lt;/p&gt;</comment>
                            <comment id="14605528" author="heliangliang" created="Mon, 29 Jun 2015 12:09:36 +0000"  >&lt;p&gt;The re-verification only happens in failure case, instead of in the normal path. So the cost is fine.&lt;/p&gt;</comment>
                            <comment id="14605572" author="heliangliang" created="Mon, 29 Jun 2015 12:59:09 +0000"  >&lt;p&gt;There is one more issue which may also loose data:&lt;br/&gt;
when zk exception is caught, it triggers an abort but silently return empty results, which can cause hlogs to be deleted since the abort is async.&lt;/p&gt;</comment>
                            <comment id="14608073" author="heliangliang" created="Tue, 30 Jun 2015 10:14:41 +0000"  >&lt;p&gt;Actually step 1 is not needed, since in copyQueuesFromRSUsingMulti the died rs znode is deleted, the cversion of /hbase/replication/rs will updated. In step 2, just check cversion is enough.&lt;/p&gt;</comment>
                            <comment id="14608362" author="hadoopqa" created="Tue, 30 Jun 2015 14:23:17 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12742805/HBASE-12865-V1.diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12742805/HBASE-12865-V1.diff&lt;/a&gt;&lt;br/&gt;
  against master branch at commit f8bd578b80b4e656d799c82ca1b6191e35bb0ae4.&lt;br/&gt;
  ATTACHMENT ID: 12742805&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14616//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14616//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14616//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14616//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14616//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14616//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14616//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14616//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14609223" author="yuzhihong@gmail.com" created="Tue, 30 Jun 2015 23:01:37 +0000"  >&lt;p&gt;Looks good overall&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      &lt;span class=&quot;code-comment&quot;&gt;// but they won&apos;t be get deleted because they&apos;re not in the checking set.&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&apos;be get deleted&apos; -&amp;gt; &apos;be deleted&apos;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+      LOG.info(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.format(&lt;span class=&quot;code-quote&quot;&gt;&quot;Replication queue node cversion changed from %d to %d, retry&quot;&lt;/span&gt;,
+          v0, v1));
+    } &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Should we add a pause between the retries ?&lt;br/&gt;
Suggest logging retry count in the above message.&lt;/p&gt;</comment>
                            <comment id="14609957" author="heliangliang" created="Wed, 1 Jul 2015 11:21:25 +0000"  >&lt;p&gt;updated and retry&lt;/p&gt;</comment>
                            <comment id="14609959" author="heliangliang" created="Wed, 1 Jul 2015 11:22:12 +0000"  >&lt;p&gt;Thanks for the comments, updated the patch.&lt;/p&gt;</comment>
                            <comment id="14610294" author="hadoopqa" created="Wed, 1 Jul 2015 14:10:35 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12743047/HBASE-12865-V2.diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12743047/HBASE-12865-V2.diff&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 85c278a6a8b25ff86e22c254ffec35e945cd7c66.&lt;br/&gt;
  ATTACHMENT ID: 12743047&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.7.0)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.util.TestProcessBasedCluster&lt;br/&gt;
                  org.apache.hadoop.hbase.mapreduce.TestImportExport&lt;br/&gt;
                  org.apache.hadoop.hbase.TestRegionRebalancing&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14639//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14639//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14639//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14639//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14639//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14639//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/14639//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/14639//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14610381" author="yuzhihong@gmail.com" created="Wed, 1 Jul 2015 14:35:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt;:&lt;br/&gt;
What do you think of the latest patch ?&lt;/p&gt;</comment>
                            <comment id="14652735" author="apurtell" created="Mon, 3 Aug 2015 23:02:44 +0000"  >&lt;p&gt;Sorry this has sat for a while.&lt;/p&gt;

&lt;p&gt;Handles KeeperExceptions better. The new unit test testFailoverDeadServerCversionChange verifies the ZK behavior we are expecting. Could go in as an improvement. Nice to have: a unit test that confirms we use the queues znode cversion correctly.&lt;/p&gt;</comment>
                            <comment id="14653394" author="lhofhansl" created="Tue, 4 Aug 2015 10:07:16 +0000"  >&lt;p&gt;Yeah. Apologies from me as well... This went under the radar for some reason.&lt;/p&gt;</comment>
                            <comment id="14653406" author="lhofhansl" created="Tue, 4 Aug 2015 10:16:50 +0000"  >&lt;p&gt;Patch looks good. I find it hard to convince myself that the cversion would change in all cases that we care about... I&apos;ll trust you on this.&lt;/p&gt;

&lt;p&gt;Minor nit:&lt;br/&gt;
&lt;tt&gt;int retry = 0; do {...; retry+&amp;#43;;} while (true)&lt;/tt&gt;&lt;br/&gt;
can perhaps be expressed nicer as&lt;br/&gt;
&lt;tt&gt;for (int retry=0; ; retry++) {...&lt;/tt&gt;}&lt;/p&gt;</comment>
                            <comment id="14661131" author="apurtell" created="Fri, 7 Aug 2015 00:44:56 +0000"  >&lt;p&gt;I will commit this soon and will fix up that nit at commit time.&lt;/p&gt;</comment>
                            <comment id="14662541" author="apurtell" created="Fri, 7 Aug 2015 22:14:51 +0000"  >&lt;p&gt;Pushed to 0.98 and up, with minor improvement suggested by Lars, tested each branch with &lt;tt&gt;mvn clean install -DskipITs -Dtest=TestReplication*&lt;/tt&gt;, looked good.&lt;/p&gt;</comment>
                            <comment id="14662611" author="hudson" created="Fri, 7 Aug 2015 22:55:45 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.0 #1008 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.0/1008/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.0/1008/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12865&quot; title=&quot;WALs may be deleted before they are replicated to peers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12865&quot;&gt;&lt;del&gt;HBASE-12865&lt;/del&gt;&lt;/a&gt; WALs may be deleted before they are replicated to peers (He Liangliang) (apurtell: rev bc4498a2663ad230298c738b98f38adc594cb954)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesClient.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/regionserver/TestReplicationSourceManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationStateBasic.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesClientZKImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/master/ReplicationLogCleaner.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesZKImpl.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14662683" author="hudson" created="Sat, 8 Aug 2015 00:09:50 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.1 #604 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.1/604/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.1/604/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12865&quot; title=&quot;WALs may be deleted before they are replicated to peers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12865&quot;&gt;&lt;del&gt;HBASE-12865&lt;/del&gt;&lt;/a&gt; WALs may be deleted before they are replicated to peers (He Liangliang) (apurtell: rev e00caff3b301d178dfa9b3fbe8bfafd74dc1250e)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/master/ReplicationLogCleaner.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesClientZKImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationStateBasic.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesClient.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/regionserver/TestReplicationSourceManager.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesZKImpl.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14662741" author="hudson" created="Sat, 8 Aug 2015 01:39:43 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.3 #95 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3/95/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3/95/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12865&quot; title=&quot;WALs may be deleted before they are replicated to peers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12865&quot;&gt;&lt;del&gt;HBASE-12865&lt;/del&gt;&lt;/a&gt; WALs may be deleted before they are replicated to peers (He Liangliang) (apurtell: rev 68cb53d1512411e91c864b29da0a4f9fb1c3e69a)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/master/ReplicationLogCleaner.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesZKImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/regionserver/TestReplicationSourceManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationStateBasic.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesClientZKImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesClient.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14662750" author="hudson" created="Sat, 8 Aug 2015 01:58:48 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #6705 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/6705/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/6705/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12865&quot; title=&quot;WALs may be deleted before they are replicated to peers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12865&quot;&gt;&lt;del&gt;HBASE-12865&lt;/del&gt;&lt;/a&gt; WALs may be deleted before they are replicated to peers (He Liangliang) (apurtell: rev ea8833fd63c9ef35292766f646b1e507577e46f5)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesClient.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/master/ReplicationLogCleaner.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesClientZKImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationStateBasic.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/regionserver/TestReplicationSourceManager.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesZKImpl.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14662764" author="hudson" created="Sat, 8 Aug 2015 02:53:39 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98 #1071 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98/1071/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98/1071/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12865&quot; title=&quot;WALs may be deleted before they are replicated to peers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12865&quot;&gt;&lt;del&gt;HBASE-12865&lt;/del&gt;&lt;/a&gt; WALs may be deleted before they are replicated to peers (He Liangliang) (apurtell: rev 3bf9957d9dfa59c87b6f920fdad256a59030a845)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationStateBasic.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesClient.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/master/ReplicationLogCleaner.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesClientZKImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesZKImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/regionserver/TestReplicationSourceManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14662792" author="hudson" created="Sat, 8 Aug 2015 04:11:17 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.3-IT #77 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3-IT/77/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3-IT/77/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12865&quot; title=&quot;WALs may be deleted before they are replicated to peers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12865&quot;&gt;&lt;del&gt;HBASE-12865&lt;/del&gt;&lt;/a&gt; WALs may be deleted before they are replicated to peers (He Liangliang) (apurtell: rev 68cb53d1512411e91c864b29da0a4f9fb1c3e69a)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/master/ReplicationLogCleaner.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesClientZKImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesZKImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/regionserver/TestReplicationSourceManager.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesClient.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationStateBasic.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14662793" author="hudson" created="Sat, 8 Aug 2015 04:11:37 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.2-IT #80 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2-IT/80/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2-IT/80/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12865&quot; title=&quot;WALs may be deleted before they are replicated to peers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12865&quot;&gt;&lt;del&gt;HBASE-12865&lt;/del&gt;&lt;/a&gt; WALs may be deleted before they are replicated to peers (He Liangliang) (apurtell: rev 7abb12be26115eda7341b82b9860990a14bc6040)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesClient.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationStateBasic.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/master/ReplicationLogCleaner.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/regionserver/TestReplicationSourceManager.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesZKImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesClientZKImpl.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14662801" author="hudson" created="Sat, 8 Aug 2015 04:29:09 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.2 #97 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2/97/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2/97/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12865&quot; title=&quot;WALs may be deleted before they are replicated to peers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12865&quot;&gt;&lt;del&gt;HBASE-12865&lt;/del&gt;&lt;/a&gt; WALs may be deleted before they are replicated to peers (He Liangliang) (apurtell: rev 7abb12be26115eda7341b82b9860990a14bc6040)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/regionserver/TestReplicationSourceManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/master/ReplicationLogCleaner.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesZKImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesClientZKImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesClient.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationStateBasic.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14662815" author="hudson" created="Sat, 8 Aug 2015 05:31:15 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98-on-Hadoop-1.1 #1025 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/1025/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/1025/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12865&quot; title=&quot;WALs may be deleted before they are replicated to peers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12865&quot;&gt;&lt;del&gt;HBASE-12865&lt;/del&gt;&lt;/a&gt; WALs may be deleted before they are replicated to peers (He Liangliang) (apurtell: rev 3bf9957d9dfa59c87b6f920fdad256a59030a845)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/regionserver/TestReplicationSourceManager.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesClient.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/master/ReplicationLogCleaner.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationStateBasic.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesClientZKImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesZKImpl.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14724261" author="enis" created="Mon, 31 Aug 2015 22:39:46 +0000"  >&lt;p&gt;Closing this issue after 1.0.2 release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12742805" name="HBASE-12865-V1.diff" size="13687" author="heliangliang" created="Tue, 30 Jun 2015 11:20:59 +0000"/>
                            <attachment id="12743047" name="HBASE-12865-V2.diff" size="13717" author="heliangliang" created="Wed, 1 Jul 2015 11:21:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 15 Jan 2015 05:31:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 15 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i24ec7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>