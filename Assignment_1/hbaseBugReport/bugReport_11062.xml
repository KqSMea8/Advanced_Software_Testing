<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:19:50 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-11062/HBASE-11062.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-11062] htop</title>
                <link>https://issues.apache.org/jira/browse/HBASE-11062</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;A top-like monitor could be useful for testing, debugging, operations of clusters of moderate size, and possibly for diagnosing issues in large clusters.&lt;/p&gt;

&lt;p&gt;Consider a curses interface like the one presented by atop (&lt;a href=&quot;http://www.atoptool.nl/images/screenshots/genericw.png&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.atoptool.nl/images/screenshots/genericw.png&lt;/a&gt;) - with aggregate metrics collected over a monitoring interval in the upper portion of the pane, and a listing of discrete measurements sorted and filtered by various criteria in the bottom part of the pane. One might imagine a cluster overview with cluster aggregate metrics above and a list of regionservers sorted by utilization below; and a regionserver view with process metrics above and a list of metrics by operation type below, or a list of client connections, or a list of threads, sorted by utilization, throughput, or latency. &lt;/p&gt;

&lt;p&gt;Generically &apos;htop&apos; is taken but would be distinctive in the HBase context, a utility org.apache.hadoop.hbase.HTop&lt;/p&gt;

&lt;p&gt;No need necessarily for a curses interface. Could be an external monitor with a web front end as has been discussed before. I do like the idea of a process that runs in a terminal because I interact with dev and test HBase clusters exclusively by SSH. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12710175">HBASE-11062</key>
            <summary>htop</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="apurtell">Andrew Purtell</assignee>
                                    <reporter username="apurtell">Andrew Purtell</reporter>
                        <labels>
                    </labels>
                <created>Wed, 23 Apr 2014 22:31:16 +0000</created>
                <updated>Sun, 27 Mar 2016 05:59:24 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>18</watches>
                                                                <comments>
                            <comment id="13979134" author="jmspaggi" created="Thu, 24 Apr 2014 00:31:38 +0000"  >&lt;p&gt;HTop make me think about htop &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://hisham.hm/htop/htop-1.0.2-io.png&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hisham.hm/htop/htop-1.0.2-io.png&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://packages.debian.org/search?keywords=htop&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://packages.debian.org/search?keywords=htop&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;But I agree that it might be nice to have! Like a status page with all those metrics... Cassandra has nice metrics reports already.&lt;/p&gt;</comment>
                            <comment id="13979138" author="esteban" created="Thu, 24 Apr 2014 00:39:19 +0000"  >&lt;p&gt;I&apos;d been thinking about this for a while and what I&apos;d like to see is something between &lt;tt&gt;jvmtop&lt;/tt&gt; &lt;a href=&quot;https://code.google.com/p/jvmtop/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://code.google.com/p/jvmtop/&lt;/a&gt;,  &lt;tt&gt;/jmx&lt;/tt&gt; metrics and HTrace. There is a lot of useful stuff from the DNs and hosts health that could be used too. But initially &lt;tt&gt;jvmtop&lt;/tt&gt; functionality to detect offending threads would be really helpful.&lt;/p&gt;</comment>
                            <comment id="13979140" author="apurtell" created="Thu, 24 Apr 2014 00:43:05 +0000"  >&lt;p&gt;Too bad jvmtop is GPL, but that seems like a good place to start, combined with jmx metrics.&lt;/p&gt;</comment>
                            <comment id="13979234" author="lhofhansl" created="Thu, 24 Apr 2014 03:25:04 +0000"  >&lt;p&gt;+1000 &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13979270" author="stack" created="Thu, 24 Apr 2014 04:39:49 +0000"  >&lt;p&gt;Suggest we do Andy&apos;s later suggestion, do this as a screen in external app or in master first and then figure how to get it working in a terminal console? (links/lynx?)&lt;/p&gt;

&lt;p&gt;A basis could be the federation of jmx metrics, or better, a rolling window of jmx readings (1m, 5m, 15m).  Or we&apos;d keep metrics in a table for tools like this to read; this would probably be the better way to go.&lt;/p&gt;

&lt;p&gt;JMX was supposed to have a federated bean view which would have been nice here but seems stalled, jmx 2.0 is stalled... so maybe trying to get a view on cluster via jmx is non-starter and we should go another route.. jmx emissions are fine for a tcollector and its ilk but for an aggregated view in master or in an htop console, it seems like a bunch of custom work &amp;#8211; and jmx w/ its reliance on rmi is probably just a no-go.&lt;/p&gt;</comment>
                            <comment id="13979279" author="apurtell" created="Thu, 24 Apr 2014 04:47:48 +0000"  >&lt;p&gt;As long as we can get a cluster &quot;top&quot; view that lets you drill down into per server &quot;top&quot; views. I might tunnel a web interface for that. If the interface can render JSON instead of HTML then additional things like a terminal app can still happen later. &lt;/p&gt;</comment>
                            <comment id="14361991" author="apurtell" created="Sat, 14 Mar 2015 19:40:51 +0000"  >&lt;p&gt;We should probably pick this back up and ship it with releases now that Cassandra has &lt;a href=&quot;https://github.com/hailocab/ctop/blob/master/README.md&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/hailocab/ctop/blob/master/README.md&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14707090" author="apurtell" created="Fri, 21 Aug 2015 17:31:17 +0000"  >&lt;p&gt;Consider something like NNtop (&lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-6982&quot; title=&quot;nntop: top&#173;-like tool for name node users&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-6982&quot;&gt;&lt;del&gt;HDFS-6982&lt;/del&gt;&lt;/a&gt;) and YARN top (&lt;a href=&quot;https://issues.apache.org/jira/browse/YARN-3348&quot; title=&quot;Add a &amp;#39;yarn top&amp;#39; tool to help understand cluster usage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;YARN-3348&quot;&gt;&lt;del&gt;YARN-3348&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Features in common:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Command line utility&lt;/li&gt;
	&lt;li&gt;Unix top-like presentation (curses-like interface)&lt;/li&gt;
	&lt;li&gt;Cluster health in display header&lt;/li&gt;
	&lt;li&gt;Summary utilization metrics&lt;/li&gt;
	&lt;li&gt;Windowed data collection&lt;/li&gt;
	&lt;li&gt;Cache data for short periods of time&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I think our approach would look a lot like HDFS&apos;s. All of the necessary information to make NNtop, as you might expect, is collected and exported by a singleton process. We can do something similar with our master. All regionservers already periodically report load statistics to the master, this is what populates data returned by Admin#getClusterStatus. We&apos;d augment the regionserver reports with top-K usage stats. Like &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-6982&quot; title=&quot;nntop: top&#173;-like tool for name node users&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-6982&quot;&gt;&lt;del&gt;HDFS-6982&lt;/del&gt;&lt;/a&gt;, we&apos;d collect and manage the information as a MetricsSource implementation, thus exposing it by JMX and HTTP for use by a CLI tool. See the patch on &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-6982&quot; title=&quot;nntop: top&#173;-like tool for name node users&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-6982&quot;&gt;&lt;del&gt;HDFS-6982&lt;/del&gt;&lt;/a&gt; for as sketch of what a patch for our master might look like.&lt;/p&gt;

&lt;p&gt;Views to be presented by the CLI tool:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Status header: master uptime, live servers, dead servers, aggregate ops/sec&lt;/li&gt;
	&lt;li&gt;Default (Table oriented)
	&lt;ul&gt;
		&lt;li&gt;By table, drill down to region&lt;/li&gt;
		&lt;li&gt;By user identity&lt;/li&gt;
		&lt;li&gt;By client location&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Namespace
	&lt;ul&gt;
		&lt;li&gt;By namespace, drill down to table&lt;/li&gt;
		&lt;li&gt;By user identity&lt;/li&gt;
		&lt;li&gt;By client location&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Region
	&lt;ul&gt;
		&lt;li&gt;By column family, drill down to CF&lt;/li&gt;
		&lt;li&gt;By key&lt;/li&gt;
		&lt;li&gt;By operation type&lt;/li&gt;
		&lt;li&gt;By user identity&lt;/li&gt;
		&lt;li&gt;By client location&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Column family
	&lt;ul&gt;
		&lt;li&gt;By key&lt;/li&gt;
		&lt;li&gt;By operation type&lt;/li&gt;
		&lt;li&gt;By user identity&lt;/li&gt;
		&lt;li&gt;By client location&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Columns in the views:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Primary sort order&lt;/li&gt;
	&lt;li&gt;Secondary sort order&lt;/li&gt;
	&lt;li&gt;Total access count per second&lt;/li&gt;
	&lt;li&gt;Summary access latency in ms, (avg, p75, p90, p95, p99, max, adjustable with keypress)&lt;/li&gt;
	&lt;li&gt;Data volume (display unit adjustable with keypress)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Sort ordering:&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;View&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Primary&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Secondary&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Table (default view)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Table&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Region&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Table by user&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;User&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Table&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Table by client&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Client&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Table&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Namespace&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Namespace&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Table&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Namespace by user&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;User&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Namespace&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Namespace by client&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Client&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Namespace&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Region by CF (default region view)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Region&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;CF&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Region by key&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Key&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Region&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Region by operation&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Op type&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Region&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Region by user&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;User&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Region&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Region by client&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Client&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Region&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;CF by key (default CF view)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Key&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;CF&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;CF by operation&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Op type&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;CF&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;CF by user&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;User&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;CF&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;CF by client&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Client&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;CF&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;p&gt;Where not sorting by operation type we should separate op count and latencies for read and write operations into their own columns.&lt;/p&gt;

&lt;p&gt;In most views the contents of the secondary sort field won&apos;t change.&lt;/p&gt;

&lt;p&gt;Interesting future ideas:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Monitored tasks (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4349&quot; title=&quot;Add metrics for monitored tasks and executor services&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4349&quot;&gt;HBASE-4349&lt;/a&gt;)&lt;/li&gt;
	&lt;li&gt;Read replica awareness&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;What else?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12952546">HBASE-15518</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12769727">HBASE-12911</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12952549">HBASE-15519</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 24 Apr 2014 00:31:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>388497</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 17 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ux7b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>388750</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>