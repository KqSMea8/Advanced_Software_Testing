<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:17:48 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-10853/HBASE-10853.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-10853] NPE in RSRpcServices.get on trunk</title>
                <link>https://issues.apache.org/jira/browse/HBASE-10853</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;You seen this one &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jxiang&quot; class=&quot;user-hover&quot; rel=&quot;jxiang&quot;&gt;Jimmy Xiang&lt;/a&gt;?&lt;/p&gt;

&lt;p&gt;Here is the exception:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2014-03-27 11:38:16,649 ERROR [RpcServer.handler=5,port=16020] ipc.RpcServer: Unexpected throwable object
java.lang.NullPointerException
        at org.apache.hadoop.hbase.regionserver.RSRpcServices.get(RSRpcServices.java:1577)
        at org.apache.hadoop.hbase.protobuf.generated.ClientProtos$ClientService$2.callBlockingMethod(ClientProtos.java:29493)
        at org.apache.hadoop.hbase.ipc.RpcServer.call(RpcServer.java:2002)
        at org.apache.hadoop.hbase.ipc.CallRunner.run(CallRunner.java:98)
        at org.apache.hadoop.hbase.ipc.SimpleRpcScheduler.consumerLoop(SimpleRpcScheduler.java:162)
        at org.apache.hadoop.hbase.ipc.SimpleRpcScheduler.access$000(SimpleRpcScheduler.java:38)
        at org.apache.hadoop.hbase.ipc.SimpleRpcScheduler$1.run(SimpleRpcScheduler.java:110)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:744)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Code looks like this on trunk:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
1576     } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
1577       regionServer.metricsRegionServer.updateGet(
1578         EnvironmentEdgeManager.currentTimeMillis() - before);
1579     }
1580   }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12704063">HBASE-10853</key>
            <summary>NPE in RSRpcServices.get on trunk</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 Mar 2014 19:13:15 +0000</created>
                <updated>Sat, 21 Feb 2015 23:32:16 +0000</updated>
                            <resolved>Thu, 27 Mar 2014 23:54:09 +0000</resolved>
                                                    <fixVersion>0.99.0</fixVersion>
                                    <component>IPC/RPC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13949827" author="stack" created="Thu, 27 Mar 2014 19:30:46 +0000"  >&lt;p&gt;regionServer.metricsRegionServer is null in the below:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
1570       } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (r != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
1571         ClientProtos.Result pbr = ProtobufUtil.toResult(r);
1572         builder.setResult(pbr);
1573       }
1574       &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; builder.build();
1575     } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IOException ie) {
1576       &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ServiceException(ie);
1577     } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
1578       LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;regionServer=&quot;&lt;/span&gt; + regionServer + &lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt; + regionServer.metricsRegionServer);
1579       regionServer.metricsRegionServer.updateGet(
1580         EnvironmentEdgeManager.currentTimeMillis() - before);
1581     }
1582   }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13949850" author="stack" created="Thu, 27 Mar 2014 19:45:07 +0000"  >&lt;p&gt;Is this the right approach &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jxiang&quot; class=&quot;user-hover&quot; rel=&quot;jxiang&quot;&gt;Jimmy Xiang&lt;/a&gt;?  It looks like the metrics service comes on board later on in the startup process.... we throw NPEs just during startup.&lt;/p&gt;</comment>
                            <comment id="13949940" author="jxiang" created="Thu, 27 Mar 2014 21:16:06 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13949951" author="jxiang" created="Thu, 27 Mar 2014 21:27:22 +0000"  >&lt;p&gt;I think it&apos;s the right approach. This should happen before the RS reports to the master.&lt;/p&gt;</comment>
                            <comment id="13950086" author="stack" created="Thu, 27 Mar 2014 23:05:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jxiang&quot; class=&quot;user-hover&quot; rel=&quot;jxiang&quot;&gt;Jimmy Xiang&lt;/a&gt; Should we be handling gets before we report to master?&lt;/p&gt;</comment>
                            <comment id="13950120" author="jxiang" created="Thu, 27 Mar 2014 23:23:01 +0000"  >&lt;p&gt;Before reporting to master, RS throws ServerNotRunningYetException for all RPC calls. So it is not handling gets, right?&lt;/p&gt;</comment>
                            <comment id="13950126" author="stack" created="Thu, 27 Mar 2014 23:28:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jxiang&quot; class=&quot;user-hover&quot; rel=&quot;jxiang&quot;&gt;Jimmy Xiang&lt;/a&gt; Then I think the patch is wrong Jimmy.  Instead I should move the checkOpen outside of the try/finally?&lt;/p&gt;</comment>
                            <comment id="13950132" author="jxiang" created="Thu, 27 Mar 2014 23:34:42 +0000"  >&lt;p&gt;That means checkOpen should throw ServiceException instead of IOException. Otherwise, the code may look messy, considering converting IOE to SE. The current patch looks fine to me too.&lt;/p&gt;</comment>
                            <comment id="13950168" author="stack" created="Thu, 27 Mar 2014 23:53:03 +0000"  >&lt;p&gt;ok.&lt;/p&gt;

&lt;p&gt;Let me apply this for now.&lt;/p&gt;</comment>
                            <comment id="13950374" author="hudson" created="Fri, 28 Mar 2014 04:59:06 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-TRUNK #5046 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/5046/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/5046/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10853&quot; title=&quot;NPE in RSRpcServices.get on trunk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10853&quot;&gt;&lt;del&gt;HBASE-10853&lt;/del&gt;&lt;/a&gt; NPE in RSRpcServices.get on trunk (stack: rev 1582553)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RSRpcServices.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14330937" author="enis" created="Sat, 21 Feb 2015 23:32:16 +0000"  >&lt;p&gt;Closing this issue after 0.99.0 release. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12637224" name="10853.txt" size="3938" author="stack" created="Thu, 27 Mar 2014 19:45:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 27 Mar 2014 21:16:06 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>382397</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1tvq7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>382667</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>