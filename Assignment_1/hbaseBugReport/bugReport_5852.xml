<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:31:32 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5852/HBASE-5852.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5852] Standalone HBase-0.92.1 fails to start master when coexisting with Hadoop-1.0.1, unnecessarily trying connecting to namenode. </title>
                <link>https://issues.apache.org/jira/browse/HBASE-5852</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;I want to run a standalone HBase instance for development test purpose, which requires no HDFS. It works well on my server. However, when I add a hadoop directory into my server, HBase seems to notice that change and try to connect to Hadoop&apos;s namenode. The failures of HBase&apos;s connecting to Hadoop NameNode cause MHBase fail to start.&lt;/p&gt;

&lt;p&gt;I extracted HBase-0.92.1 to my home directory:&lt;/p&gt;

&lt;p&gt;	~/hbase -&amp;gt; ~/hbase-0.92.1&lt;/p&gt;

&lt;p&gt;In configuration file ~/hbase/config/hbase-site.xml, I set HBase to standalone mode and specify the data directory it uses.&lt;/p&gt;

&lt;p&gt;	&amp;lt;configuration&amp;gt;&lt;br/&gt;
	  &amp;lt;property&amp;gt;&lt;br/&gt;
	    &amp;lt;name&amp;gt;hbase.rootdir&amp;lt;/name&amp;gt;&lt;br/&gt;
		&amp;lt;value&amp;gt;&lt;a href=&quot;file:///home/jianwen/.hbase.data&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:///home/jianwen/.hbase.data&lt;/a&gt;&amp;lt;/value&amp;gt;&lt;br/&gt;
	  &amp;lt;/property&amp;gt;&lt;br/&gt;
	&amp;lt;/configuration&amp;gt;&lt;/p&gt;


&lt;p&gt;Then I start HBase service with start-hbase.sh, enter HBase shell. Tests go well.&lt;/p&gt;

&lt;p&gt;But things change when I install Hadoop into the same server. Hadoop-1.0.1 lies in my home directory too.&lt;/p&gt;

&lt;p&gt;	~/hadoop -&amp;gt; ~/hadoop-1.0.1&lt;/p&gt;

&lt;p&gt;In configuration file ~/hadoop/config/core-site.xml, I set Hadoop to run in a pseudo distributed environment and specify the data directory for HDFS.&lt;/p&gt;

&lt;p&gt;	&amp;lt;configuration&amp;gt;&lt;br/&gt;
	&amp;lt;property&amp;gt;&lt;br/&gt;
	  &amp;lt;name&amp;gt;hadoop.tmp.dir&amp;lt;/name&amp;gt;&lt;br/&gt;
	  &amp;lt;value&amp;gt;/home/jianwen/.hdfs.data&amp;lt;/value&amp;gt;&lt;br/&gt;
	  &amp;lt;description&amp;gt;A base for other temporary directories.&amp;lt;/description&amp;gt;&lt;br/&gt;
	&amp;lt;/property&amp;gt;&lt;br/&gt;
	&amp;lt;property&amp;gt;&lt;br/&gt;
	        &amp;lt;name&amp;gt;fs.default.name&amp;lt;/name&amp;gt;&lt;br/&gt;
	        &amp;lt;value&amp;gt;hdfs://localhost:9000&amp;lt;/value&amp;gt;&lt;br/&gt;
	&amp;lt;/property&amp;gt;&lt;br/&gt;
	&amp;lt;/configuration&amp;gt;&lt;/p&gt;

&lt;p&gt;Then I format namenode, start hadoop service, run some MapReduce test programs, such as Pi, grep, et al. Hadoop works on my pesudo distributed environment. Then I stop hadoop service.&lt;/p&gt;


&lt;p&gt;Since I add hadoop in my home directory, HBase fails to start. HBase log shows that HBase tries to connect to Hadoop NameNode when starting up, then fails. That&apos;s ridiculous because HBase in standalone mode should have NOTHING about NameNode and HDFS.&lt;/p&gt;

&lt;p&gt;In summary, there may be two problems:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Standalone HBase attempts to connect to Hadoop NameNode at starting up when hadoop directory is co-located in home.&lt;/li&gt;
	&lt;li&gt;Not stating in HBase&apos;s configuration files, HBase seems to implicitly search hadoop directory around it and read the configuration information, such as NameNode in file core-site.xml. This unclear behavior confuses me a lot.&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;Log for standalone HBase starting up:&lt;/p&gt;

&lt;p&gt;	...&lt;br/&gt;
	2012-04-22 11:50:41,078 DEBUG org.apache.hadoop.hbase.master.LogCleaner: Add log cleaner in chain: org.apache.hadoop.hbase.master.TimeToLiveLogCleaner&lt;br/&gt;
	2012-04-22 11:50:41,115 INFO org.mortbay.log: Logging to org.slf4j.impl.Log4jLoggerAdapter(org.mortbay.log) via org.mortbay.log.Slf4jLog&lt;br/&gt;
	2012-04-22 11:50:41,160 INFO org.apache.hadoop.http.HttpServer: Added global filtersafety (class=org.apache.hadoop.http.HttpServer$QuotingInputFilter)&lt;br/&gt;
	2012-04-22 11:50:41,165 INFO org.apache.hadoop.http.HttpServer: Port returned by webServer.getConnectors()&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;.getLocalPort() before open() is -1. Opening the listener on 60010&lt;br/&gt;
	2012-04-22 11:50:41,165 INFO org.apache.hadoop.http.HttpServer: listener.getLocalPort() returned 60010 webServer.getConnectors()&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;.getLocalPort() returned 60010&lt;br/&gt;
	2012-04-22 11:50:41,165 INFO org.apache.hadoop.http.HttpServer: Jetty bound to port 60010&lt;br/&gt;
	2012-04-22 11:50:41,165 INFO org.mortbay.log: jetty-6.1.26&lt;br/&gt;
	2012-04-22 11:50:41,548 INFO org.mortbay.log: Started SelectChannelConnector@0.0.0.0:60010&lt;br/&gt;
	2012-04-22 11:50:41,548 DEBUG org.apache.hadoop.hbase.master.HMaster: Started service threads&lt;br/&gt;
	2012-04-22 11:50:41,790 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: localhost/127.0.0.1:9000. Already tried 0 time(s).&lt;br/&gt;
	2012-04-22 11:50:42,792 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: localhost/127.0.0.1:9000. Already tried 1 time(s).&lt;br/&gt;
	2012-04-22 11:50:43,050 INFO org.apache.hadoop.hbase.master.ServerManager: Waiting on regionserver(s) to checkin&lt;br/&gt;
	2012-04-22 11:50:43,794 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: localhost/127.0.0.1:9000. Already tried 2 time(s).&lt;br/&gt;
	2012-04-22 11:50:44,551 INFO org.apache.hadoop.hbase.master.ServerManager: Waiting on regionserver(s) to checkin&lt;br/&gt;
	2012-04-22 11:50:44,795 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: localhost/127.0.0.1:9000. Already tried 3 time(s).&lt;br/&gt;
	2012-04-22 11:50:45,796 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: localhost/127.0.0.1:9000. Already tried 4 time(s).&lt;br/&gt;
	2012-04-22 11:50:46,052 INFO org.apache.hadoop.hbase.master.ServerManager: Waiting on regionserver(s) to checkin&lt;br/&gt;
	2012-04-22 11:50:46,798 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: localhost/127.0.0.1:9000. Already tried 5 time(s).&lt;br/&gt;
	2012-04-22 11:50:47,554 INFO org.apache.hadoop.hbase.master.ServerManager: Waiting on regionserver(s) to checkin&lt;br/&gt;
	2012-04-22 11:50:47,800 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: localhost/127.0.0.1:9000. Already tried 6 time(s).&lt;br/&gt;
	2012-04-22 11:50:48,801 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: localhost/127.0.0.1:9000. Already tried 7 time(s).&lt;br/&gt;
	2012-04-22 11:50:49,055 INFO org.apache.hadoop.hbase.master.ServerManager: Waiting on regionserver(s) to checkin&lt;br/&gt;
	2012-04-22 11:50:49,803 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: localhost/127.0.0.1:9000. Already tried 8 time(s).&lt;br/&gt;
	2012-04-22 11:50:50,556 INFO org.apache.hadoop.hbase.master.ServerManager: Waiting on regionserver(s) to checkin&lt;br/&gt;
	2012-04-22 11:50:50,805 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: localhost/127.0.0.1:9000. Already tried 9 time(s).&lt;br/&gt;
	2012-04-22 11:50:50,806 ERROR org.apache.hadoop.hbase.master.HMasterCommandLine: Failed to start master&lt;br/&gt;
	java.net.ConnectException: Call to localhost/127.0.0.1:9000 failed on connection exception: java.net.ConnectException: Connection refused&lt;br/&gt;
		at org.apache.hadoop.ipc.Client.wrapException(Client.java:1095)&lt;br/&gt;
		at org.apache.hadoop.ipc.Client.call(Client.java:1071)&lt;br/&gt;
	...&lt;/p&gt;</description>
                <environment>&lt;p&gt;Scientific Linux 6.2 x86_64 with Oracle JDK 1.6&lt;br/&gt;
Mac OS X Lion 10.7.1 with Oracle JDK 1.6&lt;/p&gt;</environment>
        <key id="12552019">HBASE-5852</key>
            <summary>Standalone HBase-0.92.1 fails to start master when coexisting with Hadoop-1.0.1, unnecessarily trying connecting to namenode. </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="9">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="weijianwen">Jianwen WEI</reporter>
                        <labels>
                    </labels>
                <created>Sun, 22 Apr 2012 06:03:41 +0000</created>
                <updated>Tue, 5 Aug 2014 20:12:36 +0000</updated>
                            <resolved>Wed, 21 Aug 2013 20:45:49 +0000</resolved>
                                    <version>0.92.1</version>
                                                    <component>master</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <timeoriginalestimate seconds="604800">168h</timeoriginalestimate>
                            <timeestimate seconds="604800">168h</timeestimate>
                                        <comments>
                            <comment id="13260211" author="stack" created="Tue, 24 Apr 2012 04:34:44 +0000"  >&lt;p&gt;You should ask about this issue on mailing list first.  For sure the hadoop classpath is not being picked up by hbase when its started?&lt;/p&gt;</comment>
                            <comment id="13746826" author="stack" created="Wed, 21 Aug 2013 20:45:49 +0000"  >&lt;p&gt;Closing question that should have been posted to the list.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 24 Apr 2012 04:34:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>237160</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 17 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02bxz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11536</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>