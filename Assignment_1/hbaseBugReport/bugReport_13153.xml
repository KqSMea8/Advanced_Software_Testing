<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:40:16 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-13153/HBASE-13153.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-13153] Bulk Loaded HFile Replication</title>
                <link>https://issues.apache.org/jira/browse/HBASE-13153</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Currently we plan to use HBase Replication feature to deal with disaster tolerance scenario.But we encounter an issue that we will use bulkload very frequently,because bulkload bypass write path, and will not generate WAL, so the data will not be replicated to backup cluster. It&apos;s inappropriate to bukload twice both on active cluster and backup cluster. So i advise do some modification to bulkload feature to enable bukload to both active cluster and backup cluster&lt;/p&gt;</description>
                <environment></environment>
        <key id="12779355">HBASE-13153</key>
            <summary>Bulk Loaded HFile Replication</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ashish singhi">Ashish Singhi</assignee>
                                    <reporter username="haitao-tony">sunhaitao</reporter>
                        <labels>
                    </labels>
                <created>Wed, 4 Mar 2015 11:12:21 +0000</created>
                <updated>Wed, 12 Oct 2016 09:57:39 +0000</updated>
                            <resolved>Thu, 10 Dec 2015 07:43:35 +0000</resolved>
                                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                                    <component>Replication</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>34</watches>
                                                                <comments>
                            <comment id="14716391" author="ashish singhi" created="Thu, 27 Aug 2015 09:46:22 +0000"  >&lt;p&gt;I have attached a high level design idea.&lt;br/&gt;
Please check and share your comments/ideas/queries, based on that we can start the coding part.&lt;/p&gt;</comment>
                            <comment id="14716421" author="yuzhihong@gmail.com" created="Thu, 27 Aug 2015 10:16:54 +0000"  >&lt;p&gt;w.r.t. HFileReplicationEndPoint :&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;After every configurable interval or max request size limit&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Can you describe how the max request size limit would be monitored ?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Peer cluster RS will receive the RPC request having multiple hfile paths&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;HFile paths are in ZK. Do we need to send the paths in RPC ?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Peer RS will send the response with Success OR Failure paths&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The response can be sent before HFile splitting is completed, right ?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Inside hfiles node, there will be children node for every bulk loaded hfile name and hfile path as its data.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Could there be collision between HFile names ?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Once the limit is reached, the new entries will not be queued.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This constraint is due to the limit on amount of data that can be stored in ZK. Have you thought of introducing a system table for recording information w.r.t. HFiles to be replicated ?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;During Scan there will not be any matching entry corresponding to &#8220;1&#8221; in Peer cluster Visibility Tables. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Index for visibility table entry could be different in peer cluster. Should visibility labels be rewritten during the replication ?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;if again replicated from cluster-2 to active cluster, it will be accepted.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Could sequence Id be used so that the HFiles don&apos;t need to be written again ?&lt;/p&gt;</comment>
                            <comment id="14716500" author="ashish singhi" created="Thu, 27 Aug 2015 11:34:27 +0000"  >&lt;p&gt;Thanks for the comments, Ted.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Can you describe how the max request size limit would be monitored ?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;First pardon me, it should be queue size. when ever there is a request from ReplicationSource to ship the hfiles, the end point will send a RPC request to peer RS only if the user configured time interval or queue size limit is crossed. This is basically to avoid too many RPC requests to the peer RS.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;HFile paths are in ZK. Do we need to send the paths in RPC ?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, peer cluster will not have access to the source cluster ZK.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The response can be sent before HFile splitting is completed, right ?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Can you tell me at what point of time this splitting is taking place during replication process ?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Could there be collision between HFile names ?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;AFAIK hfile names(uuid) are unique, no ?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;This constraint is due to the limit on amount of data that can be stored in ZK. Have you thought of introducing a system table for recording information w.r.t. HFiles to be replicated ?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Not here. This constraint will go off once when we have ZK less replication (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10295&quot; title=&quot;Refactor the replication  implementation to eliminate permanent zk node&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10295&quot;&gt;HBASE-10295&lt;/a&gt;). Currently the same will hold for wal edits too.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Should visibility labels be rewritten during the replication ?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I think we should not do this in our replication code. IMO we should avoid system table data replication or any modification to it.&lt;/p&gt;</comment>
                            <comment id="14716739" author="yuzhihong@gmail.com" created="Thu, 27 Aug 2015 14:16:41 +0000"  >&lt;p&gt;w.r.t. HFile splitting on the peer cluster, can the splitting be done asynchronously w.r.t. sending RPC response (since the hfiles have been delivered to peer cluster) ?&lt;/p&gt;</comment>
                            <comment id="14716968" author="ashish singhi" created="Thu, 27 Aug 2015 16:16:31 +0000"  >&lt;p&gt;Yes, point noted and we will be taken into consideration during implementation.&lt;br/&gt;
Thanks. &lt;/p&gt;</comment>
                            <comment id="14718071" author="ashish singhi" created="Fri, 28 Aug 2015 05:11:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt;, would you also like to review the design ?&lt;/p&gt;</comment>
                            <comment id="14721380" author="lhofhansl" created="Sun, 30 Aug 2015 04:55:11 +0000"  >&lt;p&gt;Thanks for thinking about this. Generally it might be worth considering doing this a layer above HBase. I.e. some code will generate a set of HFile to be bulk loaded. Before the actual bulk load happens we could ship the HFiles to the slave cluster and do the bulk loading there (just the loading, not the generation of the files)... This just as a general comment.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Replication module will be one of the BulkLoad Actions Listener, so it will get notification about newly added hfiles along with their hdfs paths.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;What if that notification is missed? For example the RS dies just then? WAL replication does not have this issue since it always deals with all existing WALs so it cannot miss anything.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;. HFileReplicationEndPoint will maintain a queue of hfiles. After every configurable interval or max request size limit, it will send a RPC request to peer cluster RS with all queued entries.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;So you&apos;ll send the HFile over RPCs? These files can be huge. Can we use HDFS&apos; distCP here?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;HFileReplicationEndPoint will maintain a queue of hfiles. After every configurable interval or max request size limit, it will send a RPC request to peer cluster RS with all queued entries.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Can we simply use the standard bulk load mechanism here? It would split the files as necessary. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The hfile should not get deleted from archive folder until the replication is finished.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;You&apos;ll need to ensure this somehow.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Cyclic replication: There will not be any data validation for cyclic case.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That can lead to very tricky issues where the same files just go from cluster to cluster in a never ending cycle. We know at the source that the HFiles came from a bulk load, maybe we can handle that specially.&lt;/p&gt;

&lt;p&gt;Lastly, it might be generally a good option to copy HFiles around, rather than WALs (at least for some setups). Could we use this to do that?&lt;/p&gt;</comment>
                            <comment id="14723309" author="ashish singhi" created="Mon, 31 Aug 2015 11:23:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt;, thanks for the review and comments.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;What if that notification is missed? For example the RS dies just then? WAL replication does not have this issue since it always deals with all existing WALs so it cannot miss anything.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;After loading the hfile successfully, we will notify and then return to the client. So if RS dies then complete bulk load will fail and client has to retry.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;So you&apos;ll send the HFile over RPCs? These files can be huge. Can we use HDFS&apos; distCP here?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;No, we will send only the path of HFiles in the source cluster.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Can we simply use the standard bulk load mechanism here? It would split the files as necessary.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, we plan to use complete bulk load tool mechanism where in peer cluster will act as complete bulk load client.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;You&apos;ll need to ensure this somehow.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Plan is we will have our own implementation of BaseLogCleanerDelegate#getDeletableFiles to ensure this.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;That can lead to very tricky issues where the same files just go from cluster to cluster in a never ending cycle. We know at the source that the HFiles came from a bulk load, maybe we can handle that specially.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Cyclic replication is a limitation as of now. We are still thinking how we can handle this.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Lastly, it might be generally a good option to copy HFiles around, rather than WALs (at least for some setups). Could we use this to do that?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The design will support this. Currently we are adding this in to bulk load. If required we can extend this hook.&lt;/p&gt;</comment>
                            <comment id="14725180" author="ram_krish" created="Tue, 1 Sep 2015 10:58:06 +0000"  >&lt;p&gt;Nice doc Ashish.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Replication module will be one of the BulkLoadActionsListener, &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Can you explain more on this?  This will get registered as how the WalActionsListener get registered right?&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Plan is we will have our own implementation of BaseLogCleanerDelegate#getDeletableFiles to ensure this.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;True.  Good point.&lt;br/&gt;
One thing to note is that if you are not allowing the hfiles to be archived that is due to compaction will it not be removed from the block cache also?  Till the replication is done we will have it in the block cache also?  See to this point.  In a real case this file may not be actually referred but it may be in the block cache for some time till it gets evicted. I need to see this code if really this is happening. If so no problem. May be a small prototype on this area of the feature will help you when going in for the full impl.&lt;/p&gt;</comment>
                            <comment id="14725349" author="ashish singhi" created="Tue, 1 Sep 2015 12:57:36 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ram_krish&quot; class=&quot;user-hover&quot; rel=&quot;ram_krish&quot;&gt;ramkrishna.s.vasudevan&lt;/a&gt; for the review and comments.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Can you explain more on this? This will get registered as how the WalActionsListener get registered right?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;More, is explained by yourself in the next question &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; and answer for that is yes.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;One thing to note is that if you are not allowing the hfiles to be archived that is due to compaction will it not be removed from the block cache also? Till the replication is done we will have it in the block cache also? See to this point. In a real case this file may not be actually referred but it may be in the block cache for some time till it gets evicted. I need to see this code if really this is happening. If so no problem. May be a small prototype on this area of the feature will help you when going in for the full impl.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;No, we will not disallow hfiles from being archived. Existing source logic related to compaction and block cache will remain as it is. We will only not allow hfiles to get deleted until and unless it is successfully replicated, which will similar to the existing WAL implementation.&lt;/p&gt;</comment>
                            <comment id="14725362" author="ram_krish" created="Tue, 1 Sep 2015 13:08:38 +0000"  >&lt;p&gt;Thanks Ashish. Had an offline discussion. I was thinking on the HFiles that are being replicated but are moved to archive due to compaction.  Here again we need to retry the operation like in case of WAL as per discussion with Ashish. &lt;br/&gt;
Few things to consider, ensure that if there is block encoding then the encoding scheme is same in both the tables.  These type of conditions may come in the initial pre checks that we may need to add.&lt;/p&gt;</comment>
                            <comment id="14725526" author="apurtell" created="Tue, 1 Sep 2015 15:09:36 +0000"  >&lt;p&gt;Since cyclic replication topologies are supported today I think we&apos;d need that handled for the bulk load case too or it will lead to subtle and not so subtle problems for users. &lt;/p&gt;

&lt;p&gt;A crazy idea: rather than have bulk load tooling produce only HFiles for replication, why not HFiles for the local cluster and ready made WALs to queue up for replication? Of course that&apos;s going to have some drawbacks too but I think fewer. &lt;/p&gt;</comment>
                            <comment id="14727319" author="bhupendra" created="Wed, 2 Sep 2015 13:21:32 +0000"  >&lt;p&gt;Thanks all for the review and nice comments. &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Since cyclic replication topologies are supported today I think we&apos;d need that handled for the bulk load case too or it will lead to subtle and not so subtle problems for users.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;To detect the cyclic replication case, we will make use of hbase cluster&apos;s unique id. [ Same as WAL replication]&lt;br/&gt;
The unique cluster id of all source hbase clusters will be persisted in ZK of Peer cluster under hfile replication node.&lt;/p&gt;

&lt;p&gt;For an example -&amp;gt;	c1-&amp;gt;c2-&amp;gt;c3-&amp;gt;c1 is the cyclic replication case&lt;br/&gt;
So when file f1 is bulk loaded to c1 cluster and then from c1-&amp;gt;c2 and c2-&amp;gt;c3, below is the sample zk node data&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Cluster&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;hfile node data&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;c1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	f1,
{NONE}&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;c2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	f1,
{c1}&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;c3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	f1,
{c1,c2}&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;p&gt;When c3 tries to replicate the f1 to c1, it will detect the cycle and will not process further. Unique cluster id of all sources will be passed to next replication request. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;A crazy idea: rather than have bulk load tooling produce only HFiles for replication, why not HFiles for the local cluster and ready made WALs to queue up for replication? Of course that&apos;s going to have some drawbacks too but I think fewer.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;We thought similar ideas initially, but didn&apos;t take this approach because,&lt;br/&gt;
This way we will not get the benefit of bulk load. If we simulate the bulk load hfile replication as WAL, then it will actually become many Puts in peer cluster and not bulk load. But as per our approach, the hfile will be copied and loaded to peer cluster similar as Complete Bulk Load flow, so it will have same benefit of bulk load mechanism.&lt;/p&gt;


&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu&quot; class=&quot;user-hover&quot; rel=&quot;tedyu&quot;&gt;Ted Yu&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Could sequence Id be used so that the HFiles don&apos;t need to be written again ?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;As we think, To detect the cycle, Sequence ID can not be used because Sequence id&apos;s for hfile will be different across clusters and it doesn&apos;t provide any hint of source cluster.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ram_krish&quot; class=&quot;user-hover&quot; rel=&quot;ram_krish&quot;&gt;ramkrishna.s.vasudevan&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Few things to consider, ensure that if there is block encoding then the encoding scheme is same in both the tables. These type of conditions may come in the initial pre checks that we may need to add.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This scenario is similar to changing the encoding in one running hbase cluster. Some hfiles will be of X encoding and others will be of Y encoding. Each hfile is aware of its encoding type. As I know, this is already handled as part of hfile read. So replication of hfile should not have any issue. Correct me if I am missing anything ? &lt;/p&gt;</comment>
                            <comment id="14727458" author="yuzhihong@gmail.com" created="Wed, 2 Sep 2015 14:54:54 +0000"  >&lt;blockquote&gt;&lt;p&gt;unique cluster id of all source hbase clusters will be persisted in ZK of Peer cluster under hfile replication node&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;When would hfile replication node in ZK be cleared / removed ?&lt;/p&gt;</comment>
                            <comment id="14727577" author="ashish singhi" created="Wed, 2 Sep 2015 16:25:14 +0000"  >&lt;blockquote&gt;&lt;p&gt;When would hfile replication node in ZK be cleared / removed ?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;HFile node will be deleted by the source cluster based on the response from the peer cluster. &lt;br/&gt;
At the peer cluster a hfile replication will be treated as successful only after it has been successfully loaded and after a successful notification about this hfiles to its peer clusters if its finds any and which is not among any of the source clusters.&lt;br/&gt;
A notification will be treated successful only after it is able to add this hfile entry to the ZK.&lt;/p&gt;</comment>
                            <comment id="14727586" author="yuzhihong@gmail.com" created="Wed, 2 Sep 2015 16:31:24 +0000"  >&lt;blockquote&gt;&lt;p&gt;and after a successful notification about this hfiles to its peer clusters&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;There seem to be two types of notifications from the peer cluster: one which signifies the success of load in the immediate peer cluster and one which signifies the success of load from downstream peer clusters. Is that right ?&lt;br/&gt;
What if the second type of notification is lost due to network glitch ?&lt;/p&gt;</comment>
                            <comment id="14727660" author="yuzhihong@gmail.com" created="Wed, 2 Sep 2015 17:19:15 +0000"  >&lt;p&gt;Is it possible to store cluster Ids as metadata in bulk loaded HFiles ?&lt;/p&gt;</comment>
                            <comment id="14727711" author="ashish singhi" created="Wed, 2 Sep 2015 17:42:22 +0000"  >&lt;blockquote&gt;&lt;p&gt;There seem to be two types of notifications from the peer cluster&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;No, only one. Sorry if I confused you.&lt;br/&gt;
At a very high level the sequence of operation will be something like below for a positive cycle,&lt;br/&gt;
(1) doBulkLoad(HFiles, source cluster IDs)&lt;br/&gt;
(2) notify(BulkLoadListeners)&lt;br/&gt;
(3) ZK(add HFile entries only if no cyclic loop) [return to the client]&lt;br/&gt;
(4) ReplicateEntries(entries, source cluster ids) --&amp;gt; Back to step (1).&lt;/p&gt;

&lt;p&gt;c1-&amp;gt;c2&lt;br/&gt;
Complete bulk load process at cluster c1,&lt;br/&gt;
(1) doBulkLoad(HFiles)&lt;br/&gt;
(2) notify(BulkLoadListeners)&lt;br/&gt;
(3) ZK(add HFile entries, no cyclic loop -&amp;gt; replicate to c2) [return to the client]&lt;br/&gt;
(4) ReplicateEntries(entries, source cluster ids)&lt;/p&gt;

&lt;p&gt;Replication process at cluster c2,&lt;br/&gt;
(1) doBulkLoad(HFiles,{c1})&lt;br/&gt;
(2) notify(BulkLoadListeners) [return to the client, client will delete the znode]&lt;/p&gt;

&lt;p&gt;For cyclic replication case,&lt;br/&gt;
c1-&amp;gt;c2-&amp;gt;c3-&amp;gt;c1&lt;br/&gt;
Complete bulk load process at cluster c1,&lt;br/&gt;
(1) doBulkLoad(HFiles)&lt;br/&gt;
(2) notify(BulkLoadListeners)&lt;br/&gt;
(3) ZK(add HFile entries, no cyclic loop -&amp;gt; replicate to c2) [return to the client]&lt;br/&gt;
(4) ReplicateEntries(entries, source cluster ids)&lt;/p&gt;

&lt;p&gt;Replication process at cluster c2,&lt;br/&gt;
(1) doBulkLoad(HFiles,{c1})&lt;br/&gt;
(2) notify(BulkLoadListeners)&lt;br/&gt;
(3) ZK(add HFile entries, no cyclic loop -&amp;gt; replicate to c3) [return to the client, client will delete the znode]&lt;br/&gt;
(4) ReplicateEntries(entries, source cluster ids) --&amp;gt; Back to step (1).&lt;/p&gt;

&lt;p&gt;Replication process at cluster c3,&lt;br/&gt;
(1) doBulkLoad(HFiles,{c1,c2})&lt;br/&gt;
(2) notify(BulkLoadListeners)&lt;br/&gt;
(3) ZK(add HFile entries, cyclic loop detected) [return to the client, client will delete the znode]&lt;br/&gt;
Cyclic loop ends here&lt;/p&gt;

&lt;p&gt;Hope I am able to clear your questions.&lt;/p&gt;</comment>
                            <comment id="14727718" author="ashish singhi" created="Wed, 2 Sep 2015 17:47:13 +0000"  >&lt;blockquote&gt;&lt;p&gt;Is it possible to store cluster Ids as metadata in bulk loaded HFiles ?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, we can do that. We are thinking of that as a last option as we are trying to avoid to write to a hfile as much as possible.&lt;/p&gt;</comment>
                            <comment id="14727736" author="yuzhihong@gmail.com" created="Wed, 2 Sep 2015 17:57:02 +0000"  >&lt;blockquote&gt;&lt;p&gt;client will delete the znode&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This seems a bit fragile. What if client crashes, etc ?&lt;/p&gt;</comment>
                            <comment id="14727789" author="yuzhihong@gmail.com" created="Wed, 2 Sep 2015 18:32:10 +0000"  >&lt;p&gt;In your illustration above, cluster Id is already treated as metadata for the underlying HFile.&lt;/p&gt;

&lt;p&gt;In my opinion, it is intuitive to write cluster Ids as metadata of HFile.&lt;/p&gt;

&lt;p&gt;Processing would be simplified compared to the flow illustrated above.&lt;/p&gt;</comment>
                            <comment id="14728572" author="bhupendra" created="Thu, 3 Sep 2015 06:37:41 +0000"  >&lt;p&gt;Having cluster id as part of hfile meta data is really nice to have. This meta data can clearly indicate the cluster source. &lt;/p&gt;

&lt;p&gt;But during replication, with this appraoch,the cluster id needs to be added to each hfile meta block. This will require rewriting of each hfile meta block, so we think this will slow down the replication process compare to writing cluster id in zk node.  &lt;/p&gt;

&lt;p&gt;Also during replication process, when replication end point detect the cycle, it needs to refer to hfile meta data. Consider the case where hfile is in archive, So I think there is no meta information available for archive file in cache. This may take more time too. Please correct if I got it wrong ?&lt;/p&gt;</comment>
                            <comment id="14728576" author="ashish singhi" created="Thu, 3 Sep 2015 06:42:30 +0000"  >&lt;blockquote&gt;&lt;p&gt;This seems a bit fragile. What if client crashes, etc ?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Client crashes (i.e. the source cluster RS goes down), znode will not be removed in this case. So the replication for this znode will be retried by the source cluster RS. So the same hfile will be loaded again in the peer cluster but that will not create any issue.&lt;/p&gt;</comment>
                            <comment id="14733668" author="ashish singhi" created="Mon, 7 Sep 2015 13:02:30 +0000"  >&lt;p&gt;Is there any more comments on the design ? If not, we will go ahead with design updates as per the above discussions and code implementation.&lt;br/&gt;
Thanks all for the discussions so far.&lt;/p&gt;</comment>
                            <comment id="14734995" author="mbertozzi" created="Tue, 8 Sep 2015 15:31:35 +0000"  >&lt;p&gt;I gave a quick read to the doc, but I don&apos;t see any mention of the WAL events for bulkload/flushes/compactions (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11567&quot; title=&quot;Write bulk load COMMIT events to WAL&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11567&quot;&gt;&lt;del&gt;HBASE-11567&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11511&quot; title=&quot;Write flush events to WAL&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11511&quot;&gt;&lt;del&gt;HBASE-11511&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11569&quot; title=&quot;Flush / Compaction handling from secondary region replicas&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11569&quot;&gt;&lt;del&gt;HBASE-11569&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11571&quot; title=&quot;Bulk load handling from secondary region replicas&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11571&quot;&gt;&lt;del&gt;HBASE-11571&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11567&quot; title=&quot;Write bulk load COMMIT events to WAL&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11567&quot;&gt;&lt;del&gt;HBASE-11567&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;after the work on read-replicas we have the events about files added and moved. &lt;br/&gt;
so, my initial thought was to see something like the bulkload/compaction handling as done for read-replicas.&lt;br/&gt;
what is the reason to go with a different approach? aren&apos;t the wal entries we have enough?&lt;/p&gt;</comment>
                            <comment id="14736859" author="ashish singhi" created="Wed, 9 Sep 2015 13:43:11 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbertozzi&quot; class=&quot;user-hover&quot; rel=&quot;mbertozzi&quot;&gt;Matteo Bertozzi&lt;/a&gt; for the comment.&lt;br/&gt;
We did not look into this feature before.&lt;br/&gt;
After reading the design documents and high level code of region replicas feature, we think our solution can also make use of bulk load event already captured in WAL. With this approach, our solution will be simplified. We will update the design as per this approach and share very soon.&lt;/p&gt;</comment>
                            <comment id="14738753" author="ashish singhi" created="Thu, 10 Sep 2015 13:35:59 +0000"  >&lt;p&gt;Please refer the updated design doc(v1). The new solution will make use of the bulk load wal entry which are already captured as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11567&quot; title=&quot;Write bulk load COMMIT events to WAL&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11567&quot;&gt;&lt;del&gt;HBASE-11567&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
Please review and share your thoughts.&lt;/p&gt;</comment>
                            <comment id="14739190" author="yuzhihong@gmail.com" created="Thu, 10 Sep 2015 17:25:53 +0000"  >&lt;p&gt;I read document v1.&lt;br/&gt;
The design is feasible.&lt;/p&gt;</comment>
                            <comment id="14742013" author="ashish singhi" created="Sat, 12 Sep 2015 11:09:30 +0000"  >&lt;p&gt;Thanks Ted for checking out the doc again.&lt;br/&gt;
If no other comments, we would like to start the code implementation.&lt;/p&gt;</comment>
                            <comment id="14743993" author="stack" created="Mon, 14 Sep 2015 18:38:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashish+singhi&quot; class=&quot;user-hover&quot; rel=&quot;ashish singhi&quot;&gt;Ashish Singhi&lt;/a&gt; Nice writeup. When you say this, &quot;Construct the hfile path pointing to source hdfs cluster and &quot;, the sink cluster is going to pull the hfile from the src cluster and then bulk upload it?&lt;/p&gt;</comment>
                            <comment id="14744856" author="ashish singhi" created="Tue, 15 Sep 2015 05:30:39 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; for reading the document and comment.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;the sink cluster is going to pull the hfile from the src cluster and then bulk upload it?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, it will be same as our complete bulk load tool logic where sink cluster RS will act as a client to it.&lt;/p&gt;</comment>
                            <comment id="14744921" author="ram_krish" created="Tue, 15 Sep 2015 06:26:20 +0000"  >&lt;p&gt;Thanks Matteo for mentioning the WAL entry for bulk load events.  Nice write up Ashish with the updated doc. Will wait for patch. &lt;/p&gt;</comment>
                            <comment id="14745466" author="bhupendra" created="Tue, 15 Sep 2015 13:41:45 +0000"  >&lt;p&gt;Thanks all for reviewing the design. One small update.&lt;/p&gt;

&lt;p&gt;As per earlier design, we are keeping references of hfiles into ZK to avoid hfile clean up before replication is finished. There is small change require in design to handle multiple peer cluster replication scenario. These hfile references needs to be maintained in zk for each peer based on replication scope enabled for that peer. &lt;/p&gt;

&lt;p&gt;Once the replication of hfile for any of the peer is successfully done, corresponding zk reference entry will be cleared. We will also update the design doc with this change. &lt;/p&gt;</comment>
                            <comment id="14938738" author="ashish singhi" created="Wed, 30 Sep 2015 19:45:49 +0000"  >&lt;p&gt;I have uploaded the first version of the patch on the RB, &lt;a href=&quot;https://reviews.apache.org/r/38903/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/38903/&lt;/a&gt;&lt;br/&gt;
Will work on a integration test, once the patch addresses all the concerns if any and good to commit.&lt;/p&gt;

&lt;p&gt;Please review.&lt;br/&gt;
Thanks.&lt;/p&gt;</comment>
                            <comment id="14938742" author="ashish singhi" created="Wed, 30 Sep 2015 19:48:21 +0000"  >&lt;p&gt;Attached patch here to get a Hadoop QA run on this.&lt;/p&gt;</comment>
                            <comment id="14938787" author="yuzhihong@gmail.com" created="Wed, 30 Sep 2015 20:18:17 +0000"  >&lt;p&gt;Thanks for the hard work.&lt;/p&gt;

&lt;p&gt;Can you share your experience testing this feature on clusters ?&lt;/p&gt;</comment>
                            <comment id="14938828" author="hadoopqa" created="Wed, 30 Sep 2015 20:45:09 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12764470/HBASE-13153.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12764470/HBASE-13153.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 24370547c500df0026a71944d8be88cd5b51b23e.&lt;br/&gt;
  ATTACHMENT ID: 12764470&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 26 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 1788 checkstyle errors (more than the master&apos;s current 1781 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +              new java.lang.String[] &lt;/p&gt;
{ &quot;Entry&quot;, &quot;SourceBaseNamespaceDirPath&quot;, &quot;SourceHFileArchiveDirPath&quot;, }
&lt;p&gt;);&lt;br/&gt;
+   * &lt;/p&gt;
{@link LoadIncrementalHFiles#bulkLoadPhase(Table, Connection, ExecutorService, Deque, Multimap)}
&lt;p&gt;+    long trx = writeMarker(wal, htd, hri, WALEdit.createBulkLoadEvent(hri, desc), mvcc, clusterId, true);&lt;br/&gt;
+          new HLogKey(hri.getEncodedNameAsBytes(), hri.getTable(), System.currentTimeMillis(), mvcc);&lt;br/&gt;
+      HConstants.REPLICATION_BULKLOAD_ENABLE_KEY, HConstants.REPLICATION_BULKLOAD_ENABLE_DEFAULT))) {&lt;br/&gt;
+        conf.getInt(&quot;hbase.loadincremental.threads.max&quot;, Runtime.getRuntime().availableProcessors());&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15833//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15833//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15833//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15833//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15833//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15833//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15833//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15833//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14938872" author="yuzhihong@gmail.com" created="Wed, 30 Sep 2015 21:02:35 +0000"  >&lt;p&gt;Please fill in release notes&lt;/p&gt;</comment>
                            <comment id="14939017" author="yuzhihong@gmail.com" created="Wed, 30 Sep 2015 22:55:40 +0000"  >&lt;p&gt;Test run was incomplete.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[INFO] Apache HBase - Common ............................. SUCCESS [1:24.284s]
[INFO] Apache HBase - Procedure .......................... FAILURE [1:47.734s]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14939372" author="ashish singhi" created="Thu, 1 Oct 2015 06:19:38 +0000"  >&lt;p&gt;Thanks for the review and comments.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Can you share your experience testing this feature on clusters ?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Till now I have tested only on one node master slave cluster and all seems ok. Metrics, zk dump on shell and UI all looks ok as well.&lt;br/&gt;
The main things pending for testing is,&lt;br/&gt;
1. Testing on a kerberos cluster&lt;br/&gt;
2. Replication offline sync up tool&lt;br/&gt;
3. Cyclic replication&lt;br/&gt;
4. Multi slave cluster&lt;/p&gt;

&lt;p&gt;Open points for this are same as wal replication. For example, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12769&quot; title=&quot;Replication fails to delete all corresponding zk nodes when peer is removed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12769&quot;&gt;&lt;del&gt;HBASE-12769&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14939378" author="ashish singhi" created="Thu, 1 Oct 2015 06:27:51 +0000"  >&lt;blockquote&gt;&lt;p&gt;Please fill in release notes&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Will do in some time.&lt;/p&gt;

&lt;p&gt;Adding well documented public methods or broadening the scope of a package private class to a public in a &lt;tt&gt;@InterfaceAudience.Public&lt;/tt&gt;, &lt;tt&gt;@InterfaceStability.Stable&lt;/tt&gt; class should not cause any compatibility issues IMO.&lt;br/&gt;
In my first patch I have done something like that to &lt;tt&gt;LoadIncrementalHFiles&lt;/tt&gt; class. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbertozzi&quot; class=&quot;user-hover&quot; rel=&quot;mbertozzi&quot;&gt;Matteo Bertozzi&lt;/a&gt;, do you have any concerns with it ?&lt;/p&gt;</comment>
                            <comment id="14939965" author="hadoopqa" created="Thu, 1 Oct 2015 15:27:43 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12764608/HBASE-13153-v1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12764608/HBASE-13153-v1.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 76463a36f5648f42cdcf64019a825c1e3f0c4fe1.&lt;br/&gt;
  ATTACHMENT ID: 12764608&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 30 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.io.TestHeapSize&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15842//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15842//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15842//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15842//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15842//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15842//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15842//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15842//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14940160" author="ashish singhi" created="Thu, 1 Oct 2015 18:09:25 +0000"  >&lt;blockquote&gt;&lt;p&gt;org.apache.hadoop.hbase.io.TestHeapSize&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Valid failure. Added a new field clusterId in HRegion class whose size needs to be added to FIXED_OVERHEAD.&lt;/p&gt;</comment>
                            <comment id="14940175" author="ashish singhi" created="Thu, 1 Oct 2015 18:19:02 +0000"  >&lt;p&gt;A small update to design document,&lt;br/&gt;
1. Updated the ZK path to handle multi peer cluster.&lt;br/&gt;
2. Added metric names.&lt;br/&gt;
3. Changed the configuration name.&lt;/p&gt;</comment>
                            <comment id="14940269" author="devaraj" created="Thu, 1 Oct 2015 19:26:51 +0000"  >&lt;p&gt;Ashish, nice work. One question - when the peer cluster does a bulkload, I am wondering if the network is slow, would it hold up the peer RegionServer handlers for a longer duration for bigger bulkloads, and thereby affect the throughput of the peer cluster significantly.&lt;/p&gt;</comment>
                            <comment id="14943990" author="hadoopqa" created="Mon, 5 Oct 2015 20:44:16 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12765026/HBASE-13153-v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12765026/HBASE-13153-v2.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit ceafa09d3cf6102d21c66745ca80e132021890c9.&lt;br/&gt;
  ATTACHMENT ID: 12765026&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 30 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15875//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15875//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15875//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15875//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15875//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15875//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15875//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15875//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14949004" author="ashish singhi" created="Thu, 8 Oct 2015 17:13:55 +0000"  >&lt;p&gt;Thanks for all the reviews so far.&lt;/p&gt;</comment>
                            <comment id="14949320" author="hadoopqa" created="Thu, 8 Oct 2015 20:23:36 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12765631/HBASE-13153-v3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12765631/HBASE-13153-v3.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 7e30436e3fa84525b85b05b9e23cb01b2ada7c12.&lt;br/&gt;
  ATTACHMENT ID: 12765631&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 30 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15918//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15918//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15918//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15918//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15918//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15918//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Javadoc warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15918//artifact/patchprocess/patchJavadocWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15918//artifact/patchprocess/patchJavadocWarnings.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15918//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15918//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14950357" author="ashish singhi" created="Fri, 9 Oct 2015 13:17:36 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=devaraj&quot; class=&quot;user-hover&quot; rel=&quot;devaraj&quot;&gt;Devaraj Das&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;One question - when the peer cluster does a bulkload, I am wondering if the network is slow, would it hold up the peer RegionServer handlers for a longer duration for bigger bulkloads, and thereby affect the throughput of the peer cluster significantly.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;A very valid point. I think this problem is not only related to replication but also in a normal bulk load where source and destination hdfs clusters are different. May be we can add a new QoS priority to handle bulk load ? and also can we do that as part of another jira ?&lt;/p&gt;</comment>
                            <comment id="14950646" author="yuzhihong@gmail.com" created="Fri, 9 Oct 2015 16:25:22 +0000"  >&lt;p&gt;Ashish:&lt;br/&gt;
Mind fixing the javadoc warning in your next patch ?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="14951730" author="hadoopqa" created="Sat, 10 Oct 2015 08:54:44 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12765969/HBASE-13153-v4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12765969/HBASE-13153-v4.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 2e593a9d3801a42751244ab4478650a581437875.&lt;br/&gt;
  ATTACHMENT ID: 12765969&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 30 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 1764 checkstyle errors (more than the master&apos;s current 1762 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +              new java.lang.String[] &lt;/p&gt;
{ &quot;Entry&quot;, &quot;SourceBaseNamespaceDirPath&quot;, &quot;SourceHFileArchiveDirPath&quot;, }
&lt;p&gt;);&lt;br/&gt;
+   * &lt;/p&gt;
{@link LoadIncrementalHFiles#bulkLoadPhase(Table, Connection, ExecutorService, Deque, Multimap)}
&lt;p&gt;+      HConstants.REPLICATION_BULKLOAD_ENABLE_KEY, HConstants.REPLICATION_BULKLOAD_ENABLE_DEFAULT))) {&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15948//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15948//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15948//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15948//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15948//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15948//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15948//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15948//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14951782" author="ashish singhi" created="Sat, 10 Oct 2015 11:08:38 +0000"  >&lt;p&gt;Patch fixes the long lines, same is reported by check style warnings.&lt;/p&gt;</comment>
                            <comment id="14951861" author="hadoopqa" created="Sat, 10 Oct 2015 14:14:31 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12765980/HBASE-13153-v5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12765980/HBASE-13153-v5.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 1b66ea71b69e8b24ba7ecb9ba6548d775777f417.&lt;br/&gt;
  ATTACHMENT ID: 12765980&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 30 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15952//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15952//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15952//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15952//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15952//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15952//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15952//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15952//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14951863" author="yuzhihong@gmail.com" created="Sat, 10 Oct 2015 14:19:11 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14955396" author="ashish singhi" created="Tue, 13 Oct 2015 18:17:47 +0000"  >&lt;p&gt;Rebased patch after &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14501&quot; title=&quot;NPE in replication when HDFS transparent encryption is enabled.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14501&quot;&gt;&lt;del&gt;HBASE-14501&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14955752" author="hadoopqa" created="Tue, 13 Oct 2015 21:44:41 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12766380/HBASE-13153-v6.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12766380/HBASE-13153-v6.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 6323cd95442bf6c2617b7e8267e0c0b76e4c47eb.&lt;br/&gt;
  ATTACHMENT ID: 12766380&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 30 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 1754 checkstyle errors (more than the master&apos;s current 1753 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.replication.regionserver.TestReplicationSourceManager&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15990//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15990//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15990//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15990//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15990//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15990//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Javadoc warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15990//artifact/patchprocess/patchJavadocWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15990//artifact/patchprocess/patchJavadocWarnings.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/15990//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/15990//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14955851" author="yuzhihong@gmail.com" created="Tue, 13 Oct 2015 22:46:07 +0000"  >&lt;p&gt;Please fix the following test failure:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.NullPointerException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
	at org.apache.hadoop.hbase.replication.regionserver.TestReplicationSourceManager.testBulkLoadWALEdits(TestReplicationSourceManager.java:458)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14956451" author="ashish singhi" created="Wed, 14 Oct 2015 07:52:27 +0000"  >&lt;p&gt;Fixed the test case and check style warning.&lt;br/&gt;
javadoc was not mine.&lt;br/&gt;
May be it is complaining about,&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[WARNING] /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/hbase/hbase-common/src/main/java/org/apache/hadoop/hbase/util/KeyLocker.java:83: warning - @throw is an unknown tag.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Added a test case for hfile cyclic and multi slave replications.&lt;/p&gt;</comment>
                            <comment id="14956750" author="hadoopqa" created="Wed, 14 Oct 2015 11:37:29 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12766494/HBASE-13153-v7.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12766494/HBASE-13153-v7.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 94bfe909aff9fd74cb1a5d0c3f9209a19704c6cf.&lt;br/&gt;
  ATTACHMENT ID: 12766494&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 34 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 1749 checkstyle errors (more than the master&apos;s current 1748 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16001//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16001//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16001//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16001//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16001//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16001//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Javadoc warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16001//artifact/patchprocess/patchJavadocWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16001//artifact/patchprocess/patchJavadocWarnings.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16001//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16001//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14956856" author="ashish singhi" created="Wed, 14 Oct 2015 13:00:26 +0000"  >&lt;p&gt;Fixed check style error&lt;/p&gt;</comment>
                            <comment id="14957182" author="hadoopqa" created="Wed, 14 Oct 2015 16:17:36 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12766536/HBASE-13153-v8.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12766536/HBASE-13153-v8.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 94bfe909aff9fd74cb1a5d0c3f9209a19704c6cf.&lt;br/&gt;
  ATTACHMENT ID: 12766536&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 34 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16006//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16006//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16006//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16006//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16006//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16006//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Javadoc warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16006//artifact/patchprocess/patchJavadocWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16006//artifact/patchprocess/patchJavadocWarnings.txt&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16006//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16006//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14958899" author="ashish singhi" created="Thu, 15 Oct 2015 13:31:19 +0000"  >&lt;p&gt;Added a test case for verifying the offline replication sync up tool.&lt;br/&gt;
All the changes from my side are done. &lt;br/&gt;
Other than addressing review comments if any.&lt;/p&gt;

&lt;p&gt;Please review.&lt;/p&gt;</comment>
                            <comment id="14959185" author="hadoopqa" created="Thu, 15 Oct 2015 16:36:53 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12766785/HBASE-13153-v9.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12766785/HBASE-13153-v9.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit e7defd7d9a76f44e3089db3fe522fe400fe6dcd7.&lt;br/&gt;
  ATTACHMENT ID: 12766785&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 41 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +              new java.lang.String[] &lt;/p&gt;
{ &quot;Entry&quot;, &quot;SourceBaseNamespaceDirPath&quot;, &quot;SourceHFileArchiveDirPath&quot;, }
&lt;p&gt;);&lt;br/&gt;
+    loadAndValidateHFileReplication(&quot;HFileReplication_1&quot;, row, famName, ht1Source, hfileRanges, 100);&lt;br/&gt;
+    loadAndValidateHFileReplication(&quot;HFileReplication_1&quot;, row, famName, ht2Source, hfileRanges, 200);&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16027//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16027//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16027//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16027//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16027//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16027//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16027//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16027//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14960316" author="ashish singhi" created="Fri, 16 Oct 2015 07:45:29 +0000"  >&lt;p&gt;Handled &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14621&quot; title=&quot;ReplicationLogCleaner gets stuck when a regionserver crashes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14621&quot;&gt;&lt;del&gt;HBASE-14621&lt;/del&gt;&lt;/a&gt; for ReplicationHFileCleaner. &lt;/p&gt;</comment>
                            <comment id="14960491" author="ashish singhi" created="Fri, 16 Oct 2015 10:31:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbertozzi&quot; class=&quot;user-hover&quot; rel=&quot;mbertozzi&quot;&gt;Matteo Bertozzi&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt;, do you have any more review comments ?&lt;/p&gt;</comment>
                            <comment id="14960496" author="hadoopqa" created="Fri, 16 Oct 2015 10:39:13 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12767009/HBASE-13153-v10.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12767009/HBASE-13153-v10.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit d5ed46bc9f9285f75d2d906ec9c120cb408827df.&lt;br/&gt;
  ATTACHMENT ID: 12767009&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 41 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16060//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16060//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16060//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16060//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16060//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16060//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16060//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16060//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14960517" author="ashish singhi" created="Fri, 16 Oct 2015 11:08:36 +0000"  >&lt;p&gt;Renamed method names as suggested by Ram on RB. &lt;/p&gt;</comment>
                            <comment id="14960770" author="hadoopqa" created="Fri, 16 Oct 2015 14:20:55 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12767052/HBASE-13153-v11.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12767052/HBASE-13153-v11.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 30cf4e3761e95f3cceaf8c1aa154695e18198cd6.&lt;br/&gt;
  ATTACHMENT ID: 12767052&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 41 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16064//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16064//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16064//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16064//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16064//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16064//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16064//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16064//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14962958" author="ashish singhi" created="Mon, 19 Oct 2015 07:25:27 +0000"  >&lt;p&gt;Added release note. Let me know if any update is required.&lt;/p&gt;</comment>
                            <comment id="14963077" author="hadoopqa" created="Mon, 19 Oct 2015 09:45:36 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12767313/HBASE-13153-v11.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12767313/HBASE-13153-v11.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 8e6316a80cf96f4d4cd6bd10f4c647ebf45c7e02.&lt;br/&gt;
  ATTACHMENT ID: 12767313&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 41 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16091//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16091//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16091//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16091//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16091//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16091//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16091//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16091//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14963386" author="anoop.hbase" created="Mon, 19 Oct 2015 14:30:27 +0000"  >&lt;p&gt;Checking the op flow : &lt;br/&gt;
Considering the scenario where peer cluster is not secure (no secure EP) and the bulk load to peer cluster needs a split,  we will do split by reading each cell from remote src cluster HFile. This will be a costly op. Suggestion will be like when we have to do bulk load to peer cluster, make sure the big file is copied to dest peer cluster first and then do the split and read of the file.  &lt;br/&gt;
Had a call with Ashish and discussed this. He will come with change in the flow and doc&lt;/p&gt;</comment>
                            <comment id="14963626" author="ram_krish" created="Mon, 19 Oct 2015 17:14:04 +0000"  >&lt;p&gt;Is this slow down related to the point mentioned in the Performance Scenarios section? Or something else? Because we are going to do copy of the files from src to remote right and then do the incremental bulk load?&lt;/p&gt;</comment>
                            <comment id="14964824" author="ashish singhi" created="Tue, 20 Oct 2015 09:02:51 +0000"  >&lt;p&gt;During a offline discussion with Anoop on this, we found that when the source hfiles are in a different FS and if the hfile requires a split then LoadIncrementalHFiles will open a remote reader to source hfile, scan the file and append the data to each of the file split. &lt;br/&gt;
Since we anyway copy the hfiles to the local FS if the source hfiles are in remote FS later, so we thought we can optimize this by copying the hfiles to a temp directory in local FS if source hfiles are in a different FS first and then do a local read and write.&lt;/p&gt;

&lt;p&gt;This is related to LoadIncrementalHFiles, when ever the source hfiles are in a different FS so I will handle this as part of another jira which will be subtask of this.&lt;br/&gt;
So in this jira there will be no change in the patch or doc related to this.&lt;/p&gt;

&lt;p&gt;Any further review comments on the patch will be really appreciated.&lt;br/&gt;
Thanks Ted, Ram, Anoop and Matteo for the reviews till now.&lt;/p&gt;</comment>
                            <comment id="14969185" author="ashish singhi" created="Thu, 22 Oct 2015 13:54:55 +0000"  >&lt;p&gt;There are still other scenarios like HA and e.t.c which still needs to be handled.&lt;/p&gt;</comment>
                            <comment id="14977904" author="ashish singhi" created="Wed, 28 Oct 2015 07:41:39 +0000"  >&lt;p&gt;Following problems were faced in our internal testing,&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Problem 1:&lt;/b&gt;&lt;br/&gt;
Replication for bulk loaded data was not working HDFS HA cluster.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Solution:&lt;/b&gt;&lt;br/&gt;
Sink cluster will need the source cluster hdfs client configuration to be able to perform its operation. So we have taken the below approach,&lt;/p&gt;

&lt;p&gt;a) Configure unique replication cluster ID &amp;lt;hbase.replication.cluster.id&amp;gt; for each Source cluster.  Example: dc1, dc2&lt;br/&gt;
b) Each source cluster needs to place the HDFS client configurations in peer cluster, in &amp;lt;hbase.replication.cluster.id&amp;gt; of source cluster under &amp;lt;hbase.replication.conf.dir&amp;gt; directory.&lt;br/&gt;
c) During replication, source cluster will send its unique replication id to peer cluster in the request.  Peer cluster will identify this source cluster hdfs client configurations based on this id and configured replication configuration directory and will perform replication.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://imageshack.com/i/p3Ik2xanp&quot; align=&quot;absmiddle&quot; border=&quot;0&quot; /&gt;&lt;/p&gt;

&lt;p&gt;This approach requires two more configurations,&lt;br/&gt;
i. At source cluster, hbase.replication.cluster.id (mandatory when hbase.replication.bulkload.enabled is set to true)&lt;br/&gt;
ii. At sink cluster, hbase.replication.conf.dir (default hbase configuration directory)&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Problem 2:&lt;/b&gt; &lt;br/&gt;
If source and sink cluster are sharing same HDFS then the hfile from source cluster is moved to sink cluster, instead of copy as per the logic in &lt;tt&gt;SecureBulkLoadEndPoint&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Solution:&lt;/b&gt;&lt;br/&gt;
To avoid this we will copy the hfiles from source cluster into sink cluster staging directory parallely in the &lt;tt&gt;HFileReplicationCallable&lt;/tt&gt; class itself before sending the request to &lt;tt&gt;LoadIncrementalHFiles&lt;/tt&gt; and will ensure to avoid copy/rename again in &lt;tt&gt;SecureBulkLoadEndPoint&lt;/tt&gt; to staging directory. This will also solve the problem &quot;the bulk load to peer cluster needs a split, we will do split by reading each cell from remote src cluster HFile. This will be a costly op&quot; found during a offline discussion with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoopsamjohn&quot; class=&quot;user-hover&quot; rel=&quot;anoopsamjohn&quot;&gt;Anoop Sam John&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Problem 3:&lt;/b&gt;&lt;br/&gt;
If add_peer is done before enabling replication for bulk load data, then to that peer, bulk loaded data was not getting replicated.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Solution:&lt;/b&gt;&lt;br/&gt;
As part RS startup, we init &lt;tt&gt;ReplicationSourceManager&lt;/tt&gt; there we will check if all the peers in the cluster have their node in hfile-refs znode.&lt;/p&gt;



&lt;p&gt;Please review the above solutions, if it seems ok then I will post a new patch based on above solutions and update the doc.&lt;/p&gt;</comment>
                            <comment id="14978104" author="ashish singhi" created="Wed, 28 Oct 2015 09:58:18 +0000"  >&lt;p&gt;Attached the image(HDFS_HA_Solution) in the jira for reference if It is not displayed in the comment which I used to explain it better in the &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13153?focusedCommentId=14977904&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14977904&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;comment &lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14978132" author="yuzhihong@gmail.com" created="Wed, 28 Oct 2015 10:14:33 +0000"  >&lt;p&gt;Sounds good to me&lt;/p&gt;</comment>
                            <comment id="14982969" author="ashish singhi" created="Fri, 30 Oct 2015 17:55:21 +0000"  >&lt;p&gt;Thanks Ted, after more testing on this internally will post a patch here.&lt;/p&gt;</comment>
                            <comment id="14994071" author="ashish singhi" created="Fri, 6 Nov 2015 17:48:50 +0000"  >&lt;p&gt;Attached updated design doc and patch.&lt;br/&gt;
Please review.&lt;/p&gt;</comment>
                            <comment id="14994373" author="yuzhihong@gmail.com" created="Fri, 6 Nov 2015 20:28:57 +0000"  >&lt;p&gt;Left a few comments on reviewboard.&lt;/p&gt;

&lt;p&gt;Can you illustrate the cluster tests you have performed ?&lt;/p&gt;

&lt;p&gt;1. secure bulk loading (without replication)&lt;br/&gt;
2. bulk loaded hfiles replicated across secure clusters&lt;br/&gt;
3. 2. bulk loaded hfiles replicated across secure HA clusters&lt;/p&gt;

&lt;p&gt;Please try to add more unit tests for the 3 points you mentioned on Oct 28th&lt;/p&gt;</comment>
                            <comment id="14994388" author="hadoopqa" created="Fri, 6 Nov 2015 20:35:45 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12771067/HBASE-13153-v12.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12771067/HBASE-13153-v12.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit bfa36891901b96b95d82f5307642c35fd2b9f534.&lt;br/&gt;
  ATTACHMENT ID: 12771067&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 42 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 1728 checkstyle errors (more than the master&apos;s current 1726 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 lineLengths&lt;/font&gt;.  The patch introduces the following lines longer than 100:&lt;br/&gt;
    +              new java.lang.String[] &lt;/p&gt;
{ &quot;Entry&quot;, &quot;ReplicationClusterId&quot;, &quot;SourceBaseNamespaceDirPath&quot;, &quot;SourceHFileArchiveDirPath&quot;, }
&lt;p&gt;);&lt;br/&gt;
+  private void validateFamiliesInHFiles(Table table, Deque&amp;lt;LoadQueueItem&amp;gt; queue) throws IOException {&lt;br/&gt;
+                + &quot;. Hence will load all the xml files present in its configured replication cluster&quot;&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16433//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16433//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16433//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16433//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16433//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16433//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16433//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16433//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14995324" author="ashish singhi" created="Sat, 7 Nov 2015 17:52:07 +0000"  >&lt;p&gt;Thanks for the comments &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu&quot; class=&quot;user-hover&quot; rel=&quot;tedyu&quot;&gt;Ted Yu&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;1. secure bulk loading (without replication)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;There is no change in flow of secure bulk load without replication. We just added a check if the input hfile path and staging dir hfile path are same avoid FS rename. As in replication the staging dir is managed by it and all the hfiles are already copied in it so we save this FS rename call.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;2. bulk loaded hfiles replicated across secure clusters&lt;br/&gt;
3. 2. bulk loaded hfiles replicated across secure HA clusters&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;As for secure clusters we need to configure kerberos settings required for below operations across two secure clusters&lt;br/&gt;
1. HDFS distcp and&lt;br/&gt;
2. Existing HBase replication(mutations).&lt;br/&gt;
These settings users taking bulk load data backup may be already configuring it in their secure clusters env. Nothing additional for this feature.&lt;/p&gt;</comment>
                            <comment id="15002066" author="ashish singhi" created="Thu, 12 Nov 2015 13:36:27 +0000"  >&lt;p&gt;Attached patch(v13) addressing Ted&apos;s comments.&lt;br/&gt;
Please review. If no further reviews I request please commit this, I have already spent lot of efforts in re-basing it! If any more issue I can fix them as part of sub tasks.&lt;/p&gt;</comment>
                            <comment id="15002433" author="hadoopqa" created="Thu, 12 Nov 2015 17:12:01 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12771967/HBASE-13153-v13.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12771967/HBASE-13153-v13.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 1f62a487284b57fca505bc1b3d04c1f86b2e7d76.&lt;br/&gt;
  ATTACHMENT ID: 12771967&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 42 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.snapshot.TestMobExportSnapshot&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16499//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16499//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16499//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16499//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16499//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16499//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16499//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16499//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15003699" author="ashish singhi" created="Fri, 13 Nov 2015 08:25:15 +0000"  >&lt;p&gt;In our internal testing &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sreenivasulureddy&quot; class=&quot;user-hover&quot; rel=&quot;sreenivasulureddy&quot;&gt;Y. SREENIVASULU REDDY&lt;/a&gt; today found one more issue. The list of StoreDescriptor&apos;s in BulkLoadDescriptor is unmodifiable and in result the patch will fail work to with WALEntryFilters as expected. I will handle this in the patch and will try to add UT for it and also if there are any review comments to address by that time then will happily address them also.&lt;/p&gt;</comment>
                            <comment id="15005742" author="ashish singhi" created="Sun, 15 Nov 2015 05:37:46 +0000"  >&lt;p&gt;Attached patch(v14) which corrects the logic for bulk load entry filter in WALEntryFilter&apos;s.&lt;br/&gt;
Please review.&lt;/p&gt;</comment>
                            <comment id="15005809" author="hadoopqa" created="Sun, 15 Nov 2015 09:02:04 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12772399/HBASE-13153-v14.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12772399/HBASE-13153-v14.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit bb6581345fd9ecac964e19cea2293477162801ca.&lt;br/&gt;
  ATTACHMENT ID: 12772399&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 42 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16524//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16524//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16524//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16524//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16524//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16524//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16524//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16524//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15006319" author="ram_krish" created="Mon, 16 Nov 2015 08:06:21 +0000"  >&lt;p&gt;Completed the reviews on the JIRA. Most of the comments are minors and few questions. Should be good to commit IMHO once those nits are done. Any more reviews or feedback?&lt;/p&gt;</comment>
                            <comment id="15006670" author="ashish singhi" created="Mon, 16 Nov 2015 13:45:19 +0000"  >&lt;p&gt;Thank you so much Ted and Ram for the reviews.&lt;/p&gt;</comment>
                            <comment id="15006940" author="hadoopqa" created="Mon, 16 Nov 2015 17:11:19 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12772488/HBASE-13153-v15.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12772488/HBASE-13153-v15.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit dd5f454b03b9ccd788398fa52220c7690381eb6f.&lt;br/&gt;
  ATTACHMENT ID: 12772488&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 42 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 1728 checkstyle errors (more than the master&apos;s current 1727 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16533//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16533//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16533//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16533//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16533//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16533//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16533//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16533//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15006942" author="yuzhihong@gmail.com" created="Mon, 16 Nov 2015 17:14:15 +0000"  >&lt;p&gt;See if the checkstyle warning was from latest patch.&lt;/p&gt;</comment>
                            <comment id="15006973" author="ashish singhi" created="Mon, 16 Nov 2015 17:40:05 +0000"  >&lt;blockquote&gt;&lt;p&gt;See if the checkstyle warning was from latest patch.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, it was due to one unused import. Fixed in v16.&lt;/p&gt;</comment>
                            <comment id="15007276" author="hadoopqa" created="Mon, 16 Nov 2015 20:41:51 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12772529/HBASE-13153-v16.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12772529/HBASE-13153-v16.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit f218e499ae12805cc35ed938c1f6d07ace048a25.&lt;br/&gt;
  ATTACHMENT ID: 12772529&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 42 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16535//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16535//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16535//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16535//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16535//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16535//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16535//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16535//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15008063" author="ram_krish" created="Tue, 17 Nov 2015 05:10:37 +0000"  >&lt;p&gt;+1 on patch. Better to change the release notes to indicate the configs needed to make this feature run along with that new configs added for HA. Also add some details on the tests performed to verify this feature - just for others to know.&lt;br/&gt;
Thanks for the work Ashish. &lt;/p&gt;</comment>
                            <comment id="15008128" author="ashish singhi" created="Tue, 17 Nov 2015 06:24:34 +0000"  >&lt;blockquote&gt;&lt;p&gt;Better to change the release notes to indicate the configs needed to make this feature run along with that new configs added for HA&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Done.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Also add some details on the tests performed to verify this feature - just for others to know&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I have asked &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sreenivasulureddy&quot; class=&quot;user-hover&quot; rel=&quot;sreenivasulureddy&quot;&gt;Y. SREENIVASULU REDDY&lt;/a&gt; to provide the details as he has done most of the testing and let him take due credits for this.&lt;/p&gt;

&lt;p&gt;Thanks Ram.&lt;/p&gt;</comment>
                            <comment id="15008636" author="yuzhihong@gmail.com" created="Tue, 17 Nov 2015 13:35:02 +0000"  >&lt;p&gt;+1 from me as well&lt;/p&gt;</comment>
                            <comment id="15010390" author="ram_krish" created="Wed, 18 Nov 2015 07:16:42 +0000"  >&lt;p&gt;Any more reviews here &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=saint.ack%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;saint.ack@gmail.com&quot;&gt;Stack&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt;? SF folks would be interested in this as it is related to replication. &lt;/p&gt;</comment>
                            <comment id="15018473" author="ashish singhi" created="Fri, 20 Nov 2015 18:29:05 +0000"  >&lt;p&gt;Patch addressing &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt;&apos;s comments from RB.&lt;/p&gt;</comment>
                            <comment id="15018903" author="hadoopqa" created="Fri, 20 Nov 2015 22:11:56 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12773558/HBASE-13153-v17.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12773558/HBASE-13153-v17.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 86be690b0723e814a655ad0ae8a6577d7111c1f2.&lt;br/&gt;
  ATTACHMENT ID: 12773558&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 42 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 18700 checkstyle errors (more than the master&apos;s current 18690 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.client.TestBlockEvictionFromClient&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16622//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16622//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16622//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16622//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16622//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16622//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16622//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16622//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15020457" author="ashish singhi" created="Sat, 21 Nov 2015 13:16:08 +0000"  >&lt;p&gt;Total check style warnings found in patch by checkstyle_report.py are:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ dev-support/checkstyle_report.py trunkCheckstyle.xml patchCheckstyle.xml 
hbase-client/src/main/java/org/apache/hadoop/hbase/zookeeper/ZKUtil.java	85	87
hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesZKImpl.java	7	11
hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationStateZKBase.java	3	4
hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RSRpcServices.java	232	234
hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/WALReplicationCallable.java	0	2
hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/HFileReplicationCallable.java	0	4
hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/DefaultSourceFSConfigurationProvider.java	0	1
hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/SourceFSConfigurationProvider.java	0	2
hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/MetricsSink.java	2	3
hbase-server/src/main/java/org/apache/hadoop/hbase/replication/master/ReplicationHFileCleaner.java	0	6
hbase-server/src/main/java/org/apache/hadoop/hbase/replication/TableCfWALEntryFilter.java	1	2
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;but Hadoop QA something has something else to say!&lt;/p&gt;

&lt;p&gt;Out of all those I have not fixed below the one&apos;s:&lt;/p&gt;

&lt;p&gt;ZKUtil.java (2)&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;error line=&quot;1926&quot; severity=&quot;error&quot; message=&quot;&apos;ReplicationStateZKBase&apos; have incorrect indentation level 8, expected level should be 10.&quot; source=&quot;com.puppycrawl.tools.checkstyle.checks.indentation.IndentationCheck&quot;/&amp;gt;
&amp;lt;error line=&quot;1927&quot; severity=&quot;error&quot; message=&quot;&apos;ReplicationStateZKBase&apos; have incorrect indentation level 8, expected level should be 10.&quot; source=&quot;com.puppycrawl.tools.checkstyle.checks.indentation.IndentationCheck&quot;/&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ReplicationQueuesZKImpl.java (1)&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;error line=&quot;456&quot; severity=&quot;error&quot; message=&quot;&apos;HConstants&apos; have incorrect indentation level 8, expected level should be 10.&quot; source=&quot;com.puppycrawl.tools.checkstyle.checks.indentation.IndentationCheck&quot;/&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ReplicationStateZKBase.java (1)&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;error line=&quot;81&quot; severity=&quot;error&quot; message=&quot;&apos;ZOOKEEPER_ZNODE_REPLICATION_HFILE_REFS_DEFAULT&apos; have incorrect indentation level 6, expected level should be 8.&quot; source=&quot;com.puppycrawl.tools.checkstyle.checks.indentation.IndentationCheck&quot;/&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;RSRpcServices.java (2)&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;error line=&quot;1804&quot; severity=&quot;error&quot; message=&quot;&apos;request&apos; have incorrect indentation level 10, expected level should be 12.&quot; source=&quot;com.puppycrawl.tools.checkstyle.checks.indentation.IndentationCheck&quot;/&amp;gt;
&amp;lt;error line=&quot;1805&quot; severity=&quot;error&quot; message=&quot;&apos;request&apos; have incorrect indentation level 10, expected level should be 12.&quot; source=&quot;com.puppycrawl.tools.checkstyle.checks.indentation.IndentationCheck&quot;/&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;WALReplicationCallable.java (1)&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;error line=&quot;22&quot; severity=&quot;error&quot; message=&quot;Wrong order for &apos;org.apache.hadoop.hbase.TableName&apos; import.&quot; source=&quot;com.puppycrawl.tools.checkstyle.checks.imports.ImportOrderCheck&quot;/&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;HFileReplicationCallable.java (4)&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;error line=&quot;32&quot; severity=&quot;error&quot; message=&quot;Wrong order for &apos;org.apache.commons.logging.Log&apos; import.&quot; source=&quot;com.puppycrawl.tools.checkstyle.checks.imports.ImportOrderCheck&quot;/&amp;gt;
&amp;lt;error line=&quot;55&quot; severity=&quot;error&quot; message=&quot;Wrong order for &apos;com.google.common.util.concurrent.ThreadFactoryBuilder&apos; import.&quot; source=&quot;com.puppycrawl.tools.checkstyle.checks.imports.ImportOrderCheck&quot;/&amp;gt;
&amp;lt;error line=&quot;355&quot; severity=&quot;error&quot; message=&quot;&apos;e&apos; have incorrect indentation level 12, expected level should be 14.&quot; source=&quot;com.puppycrawl.tools.checkstyle.checks.indentation.IndentationCheck&quot;/&amp;gt;
&amp;lt;error line=&quot;363&quot; severity=&quot;error&quot; message=&quot;&apos;e1&apos; have incorrect indentation level 14, expected level should be 16.&quot; source=&quot;com.puppycrawl.tools.checkstyle.checks.indentation.IndentationCheck&quot;/&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;DefaultSourceFSConfigurationProvider.java (1)&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;error line=&quot;19&quot; severity=&quot;error&quot; message=&quot;Wrong order for &apos;org.apache.commons.logging.Log&apos; import.&quot; source=&quot;com.puppycrawl.tools.checkstyle.checks.imports.ImportOrderCheck&quot;/&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;SourceFSConfigurationProvider.java (1)&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;error line=&quot;15&quot; severity=&quot;error&quot; message=&quot;Wrong order for &apos;org.apache.hadoop.conf.Configuration&apos; import.&quot; source=&quot;com.puppycrawl.tools.checkstyle.checks.imports.ImportOrderCheck&quot;/&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ReplicationHFileCleaner.java (5)&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;error line=&quot;18&quot; severity=&quot;error&quot; message=&quot;Wrong order for &apos;org.apache.commons.logging.Log&apos; import.&quot; source=&quot;com.puppycrawl.tools.checkstyle.checks.imports.ImportOrderCheck&quot;/&amp;gt;
&amp;lt;error line=&quot;34&quot; severity=&quot;error&quot; message=&quot;Wrong order for &apos;com.google.common.base.Predicate&apos; import.&quot; source=&quot;com.puppycrawl.tools.checkstyle.checks.imports.ImportOrderCheck&quot;/&amp;gt;
&amp;lt;error line=&quot;120&quot; severity=&quot;error&quot; message=&quot;&apos;HConstants&apos; have incorrect indentation level 6, expected level should be 8.&quot; source=&quot;com.puppycrawl.tools.checkstyle.checks.indentation.IndentationCheck&quot;/&amp;gt;
&amp;lt;error line=&quot;121&quot; severity=&quot;error&quot; message=&quot;&apos;HConstants&apos; have incorrect indentation level 6, expected level should be 8.&quot; source=&quot;com.puppycrawl.tools.checkstyle.checks.indentation.IndentationCheck&quot;/&amp;gt;
&amp;lt;error line=&quot;122&quot; severity=&quot;error&quot; message=&quot;&apos;HConstants&apos; have incorrect indentation level 6, expected level should be 8.&quot; source=&quot;com.puppycrawl.tools.checkstyle.checks.indentation.IndentationCheck&quot;/&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;TableCfWALEntryFilter.java (1)&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;error line=&quot;86&quot; severity=&quot;error&quot; message=&quot;&apos;cell&apos; have incorrect indentation level 12, expected level should be 14.&quot; source=&quot;com.puppycrawl.tools.checkstyle.checks.indentation.IndentationCheck&quot;/&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;These belongs to two categories,&lt;br/&gt;
1. IndentationCheck: The code formatter which we &lt;a href=&quot;https://github.com/apache/hbase/blob/master/dev-support/hbase_eclipse_formatter.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;use&lt;/a&gt; adds only two spaces for the next line which is continuation of previous line.&lt;br/&gt;
2.  ImportOrderCheck: I am not sure what to fix here! I am using eclipse IDE and it by default organizes the imports in that way as mentioned &lt;a href=&quot;http://help.eclipse.org/mars/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fpreferences%2Fjava%2Fcodestyle%2Fref-preferences-organize-imports.htm&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;here&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=appy&quot; class=&quot;user-hover&quot; rel=&quot;appy&quot;&gt;Appy&lt;/a&gt; can you throw some light, what can I do here ?&lt;/p&gt;</comment>
                            <comment id="15020460" author="ashish singhi" created="Sat, 21 Nov 2015 13:17:05 +0000"  >&lt;p&gt;Addressed only few check style warnings.&lt;/p&gt;</comment>
                            <comment id="15020582" author="hadoopqa" created="Sat, 21 Nov 2015 17:49:20 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12773664/HBASE-13153-v18.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12773664/HBASE-13153-v18.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 52edd83baf2e8bbf519c6c4927cbdd8dce9ae406.&lt;br/&gt;
  ATTACHMENT ID: 12773664&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 42 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated 18692 checkstyle errors (more than the master&apos;s current 18689 errors).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;/p&gt;


&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16628//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16628//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16628//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16628//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16628//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16628//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16628//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16628//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15020709" author="appy" created="Sat, 21 Nov 2015 21:45:57 +0000"  >&lt;p&gt;The difference is because hadoop QA compares total number of error across all files where as the tool checks at file level. Adding the numbers given by tool, there are 26 new errors. The patch probably fixed 16 errors in some other files, which is why hadoop qa shows only +10 increase. As you can see, looking at overall count like presubmit does isn&apos;t the best way, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14859&quot; title=&quot;Better checkstyle reporting&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14859&quot;&gt;&lt;del&gt;HBASE-14859&lt;/del&gt;&lt;/a&gt; will fix it.&lt;/p&gt;

&lt;p&gt;As for the exact errors, it&apos;s my fault for not setting indentations for all options to 2. When i was setting it, I looked at couple of code examples, and seemed like 4 was standard. Same for imports. For now, updated hee patch in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14859&quot; title=&quot;Better checkstyle reporting&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14859&quot;&gt;&lt;del&gt;HBASE-14859&lt;/del&gt;&lt;/a&gt; to only check for common things between idea and eclipse. Help review and submit? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashish+singhi&quot; class=&quot;user-hover&quot; rel=&quot;ashish singhi&quot;&gt;Ashish Singhi&lt;/a&gt;&lt;br/&gt;
Sorry for the trouble. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15021068" author="ashish singhi" created="Sun, 22 Nov 2015 16:41:10 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=appy&quot; class=&quot;user-hover&quot; rel=&quot;appy&quot;&gt;Appy&lt;/a&gt; for the prompt response.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Help review and submit?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;By submit if you mean commit then sorry I can&apos;t, I don&apos;t have that special power! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Left over check style warnings are all related to either IndentationCheck  or ImportOrderCheck as mentioned in my previous comment which are in total 19, which are not valid for HBase project and will be fixed by Appy as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14859&quot; title=&quot;Better checkstyle reporting&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14859&quot;&gt;&lt;del&gt;HBASE-14859&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ dev-support/checkstyle_report.py ~/Downloads/trunkCheckstyle.xml ~/Downloads/patchCheckstyle.xml 
hbase-client/src/main/java/org/apache/hadoop/hbase/zookeeper/ZKUtil.java	85	87
hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesZKImpl.java	7	8
hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationStateZKBase.java	3	4
hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RSRpcServices.java	232	234
hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/SourceFSConfigurationProvider.java	0	1
hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/HFileReplicationCallable.java	0	4
hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/WALReplicationCallable.java	0	1
hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/DefaultSourceFSConfigurationProvider.java	0	1
hbase-server/src/main/java/org/apache/hadoop/hbase/replication/master/ReplicationHFileCleaner.java	0	5
hbase-server/src/main/java/org/apache/hadoop/hbase/replication/TableCfWALEntryFilter.java	1	2
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15021370" author="jinghe" created="Mon, 23 Nov 2015 02:07:24 +0000"  >&lt;p&gt;A general comment.  Disclaimer: I have not closely read thru the code, but I have read the doc and follow thru the comments roughly.&lt;/p&gt;

&lt;p&gt;On the source cluster: &lt;br/&gt;
   The source replication handler --&amp;gt; sends WALs entries to the peer, including bulkload entries, synchronously blocking for response.&lt;br/&gt;
On the peer cluster:&lt;br/&gt;
   The peer region server RPC handler --&amp;gt; sees bulkload WAL entry --&amp;gt; invokes bulkload client RPC to another region server --&amp;gt; synchronously blocking&lt;br/&gt;
    Another region server RPC handler --&amp;gt; holds region write lock --&amp;gt; transfers files to be bulk loaded into the region from remote cluster synchronously &lt;/p&gt;

&lt;p&gt;Multiple handlers on the peer cluster can potentially be blocked. Multiple regions can be blocked from reading as well.  In the normal replication case, the granularity is a few WAL entries.  The granularity of failure is at the entire file level with bulk load.&lt;br/&gt;
This is probably going to be ok in low network latency.  But what happens when the network latency is less ideal?  In an active-active case?&lt;/p&gt;</comment>
                            <comment id="15021382" author="jinghe" created="Mon, 23 Nov 2015 02:15:59 +0000"  >&lt;p&gt;Another question related to secure cluster.&lt;br/&gt;
Now that the peer cluster &apos;server id&apos; needs to read files directly from source cluster hbase.root directory. In a secure cluster, I recall that the hbase.root has been changed to be only accessible by the current &apos;server id&apos;. Now they need to match.  Will this work our ok?&lt;/p&gt;</comment>
                            <comment id="15021743" author="ashish singhi" created="Mon, 23 Nov 2015 08:37:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jerryhe&quot; class=&quot;user-hover&quot; rel=&quot;jerryhe&quot;&gt;Jerry He&lt;/a&gt;, thanks for the comments.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Another region server RPC handler --&amp;gt; holds region write lock --&amp;gt; transfers files to be bulk loaded into the region from remote cluster synchronously&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Not remote cluster, it will be local at this point as all the files are copied first from source to peer cluster and then only bulk load is initiated which will just rename these files.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Multiple handlers on the peer cluster can potentially be blocked&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes agress, this point was earlier raised by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=devaraj&quot; class=&quot;user-hover&quot; rel=&quot;devaraj&quot;&gt;Devaraj Das&lt;/a&gt; also I have noted it down and have plan to may be add another QoS for bulk load as part of another jira as it will also help in normal bulk load case.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Now that the peer cluster &apos;server id&apos; needs to read files directly from source cluster hbase.root directory. In a secure cluster, I recall that the hbase.root has been changed to be only accessible by the current &apos;server id&apos;. Now they need to match&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I did not get what you mean. But we have done internal testing for this by providing peer cluster user read permission on the source cluster FS as mentioned in the design doc.&lt;/p&gt;</comment>
                            <comment id="15023516" author="jinghe" created="Tue, 24 Nov 2015 01:01:29 +0000"  >&lt;blockquote&gt;&lt;p&gt;Not remote cluster, it will be local at this point as all the files are copied first from source to peer cluster&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Okay&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I did not get what you mean.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Let me find the old JIRA.&lt;/p&gt;</comment>
                            <comment id="15023530" author="jinghe" created="Tue, 24 Nov 2015 01:13:03 +0000"  >&lt;p&gt;This &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13780&quot; title=&quot;Default to 700 for HDFS root dir permissions for secure deployments&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13780&quot;&gt;&lt;del&gt;HBASE-13780&lt;/del&gt;&lt;/a&gt; restricts the access to the hbase.root.  Would it impact this patch?&lt;/p&gt;</comment>
                            <comment id="15023827" author="ashish singhi" created="Tue, 24 Nov 2015 05:59:19 +0000"  >&lt;blockquote&gt;&lt;p&gt;This &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13780&quot; title=&quot;Default to 700 for HDFS root dir permissions for secure deployments&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13780&quot;&gt;&lt;del&gt;HBASE-13780&lt;/del&gt;&lt;/a&gt; restricts the access to the hbase.root. Would it impact this patch?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;We have tested in secure mode but with same user in active and peer cluster, so we were not required to give any extra permissions to the user in peer cluster to access active cluster FS. But if users are different then the operator has to provide read permission to the peer cluster user on the source cluster file system and we have mentioned the same in the document also in section 3 &amp;amp; 6. So with this things assured it will not impact this patch.&lt;/p&gt;</comment>
                            <comment id="15027159" author="ashish singhi" created="Wed, 25 Nov 2015 17:07:42 +0000"  >&lt;p&gt;Attaching branch-1 patch.&lt;/p&gt;</comment>
                            <comment id="15027470" author="hadoopqa" created="Wed, 25 Nov 2015 19:49:57 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12774378/HBASE-13153-branch-1-v18.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12774378/HBASE-13153-branch-1-v18.patch&lt;/a&gt;&lt;br/&gt;
  against branch-1 branch at commit 90bdb0dc7412f3ae8fc1e14ce033bf115c6332f3.&lt;br/&gt;
  ATTACHMENT ID: 12774378&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 42 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;.  The applied patch does not increase the total number of checkstyle errors&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16663//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16663//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16663//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16663//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16663//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16663//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16663//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16663//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15028645" author="ashish singhi" created="Thu, 26 Nov 2015 12:06:41 +0000"  >&lt;p&gt;Any more review comments ? I will be on vacation from tomorrow for next 10 days, so pardon me for my absence (If possible will try to reply through mobile).&lt;br/&gt;
I have attached branch-1 patch also hoping that we can commit this there also. As by default it is disabled.&lt;/p&gt;</comment>
                            <comment id="15031386" author="ram_krish" created="Mon, 30 Nov 2015 06:28:58 +0000"  >&lt;p&gt;Is there any more review comments. If not we can commit this.&lt;/p&gt;</comment>
                            <comment id="15042321" author="yuzhihong@gmail.com" created="Fri, 4 Dec 2015 22:14:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoop.hbase&quot; class=&quot;user-hover&quot; rel=&quot;anoop.hbase&quot;&gt;Anoop Sam John&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jerryhe&quot; class=&quot;user-hover&quot; rel=&quot;jerryhe&quot;&gt;Jerry He&lt;/a&gt;:&lt;br/&gt;
Any more comment(s) ?&lt;/p&gt;</comment>
                            <comment id="15042453" author="jinghe" created="Sat, 5 Dec 2015 00:02:36 +0000"  >&lt;p&gt;I have a use case that this feature would be quite useful. &lt;br/&gt;
We have a SQL on Hadoop/HBase.  When inserting into HBase, we try to be smart and optimize using bulk load some times.&lt;br/&gt;
For example, when doing &apos;INSERT INTO my-hbase-table SELECT  col1 from table1&apos;, we will try to see if the cardinalities are big (say &amp;gt; 20000). If yes, we will generate hfile to bulk load, not running table puts.&lt;br/&gt;
The problem is that replication will not kick in for this new data.  &lt;br/&gt;
For across cluster bulk load, people would probably use an external tool (e.g distCp) to move the MR generated hfiles to the target cluster. &lt;br/&gt;
But in this case, it would be difficult to save and transport the hfiles for bulk load to the peer cluster since they are generated on-the-fly inside the SQL engine.&lt;br/&gt;
So this is a good feature to have.&lt;/p&gt;

&lt;p&gt;Regarding the network latency and impact on HBase instances, I think we should add notes/best practice/warning in the release notes. Mention that potentially large files need to copied over the network by HBase handlers, and potential impact on the source and peer clusters. And recommendations like the rpc timeout values need to be increased.&lt;/p&gt;</comment>
                            <comment id="15044714" author="ashish singhi" created="Mon, 7 Dec 2015 10:26:45 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jerryhe&quot; class=&quot;user-hover&quot; rel=&quot;jerryhe&quot;&gt;Jerry He&lt;/a&gt; for the comment.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I think we should add notes/best practice/warning in the release notes&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;These we have mentioned in the design doc, do you want me to copy paste the same in release notes ? We are also planning to update the replication section in HBase book and note down all these there too.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;And recommendations like the rpc timeout values need to be increased.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;These we are planning to make it adaptive for replication. I have raised &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14937&quot; title=&quot;Make rpc call timeout for replication adaptive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14937&quot;&gt;HBASE-14937&lt;/a&gt; for the same and plan to implement.&lt;/p&gt;</comment>
                            <comment id="15046222" author="yuzhihong@gmail.com" created="Tue, 8 Dec 2015 02:34:10 +0000"  >&lt;p&gt;Any more review comment ?&lt;br/&gt;
If not, planning to integrate.&lt;/p&gt;</comment>
                            <comment id="15048592" author="ashish singhi" created="Wed, 9 Dec 2015 12:15:32 +0000"  >&lt;p&gt;Patch addressing Anoop&apos;s comments and concerns from RB.&lt;br/&gt;
Thanks for the review, Anoop. &lt;/p&gt;</comment>
                            <comment id="15048876" author="hadoopqa" created="Wed, 9 Dec 2015 15:56:07 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12776537/HBASE-13153-v19.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12776537/HBASE-13153-v19.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 7bfbb6a3c9af4b0e2853b5ea2580a05bb471211b.&lt;br/&gt;
  ATTACHMENT ID: 12776537&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 42 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated new checkstyle errors. Check build console for list of new errors.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 zombies&lt;/font&gt;. No zombie tests found running at the end of the build.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16810//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16810//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16810//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16810//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16810//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16810//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16810//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16810//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15048898" author="yuzhihong@gmail.com" created="Wed, 9 Dec 2015 16:14:05 +0000"  >&lt;p&gt;Please address checkstyle warnings.&lt;/p&gt;</comment>
                            <comment id="15048967" author="ashish singhi" created="Wed, 9 Dec 2015 16:53:19 +0000"  >&lt;p&gt;Patch addressing check style warnings.&lt;/p&gt;</comment>
                            <comment id="15049073" author="anoop.hbase" created="Wed, 9 Dec 2015 17:54:44 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15049094" author="ashish singhi" created="Wed, 9 Dec 2015 18:05:28 +0000"  >&lt;p&gt;Patch for branch-1&lt;/p&gt;</comment>
                            <comment id="15049413" author="hadoopqa" created="Wed, 9 Dec 2015 21:35:11 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12776600/HBASE-13153-v20.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12776600/HBASE-13153-v20.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 0e147a9d6e53e71ad2e57f512b4d3e1eeeac0b78.&lt;br/&gt;
  ATTACHMENT ID: 12776600&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 42 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;. The applied patch does not generate new checkstyle errors.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 zombies&lt;/font&gt;. No zombie tests found running at the end of the build.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16811//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16811//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16811//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16811//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16811//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16811//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16811//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16811//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15049414" author="hadoopqa" created="Wed, 9 Dec 2015 21:35:46 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  &lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16812//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16812//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16812//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16812//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16812//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16812//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16812//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16812//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15050237" author="ram_krish" created="Thu, 10 Dec 2015 07:21:27 +0000"  >&lt;p&gt;Just a need a rebased patch . Ashish will give a new patch which we can commit. &lt;/p&gt;</comment>
                            <comment id="15050245" author="ashish singhi" created="Thu, 10 Dec 2015 07:27:17 +0000"  >&lt;p&gt;Patch rebased after &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14866&quot; title=&quot;VerifyReplication should use peer configuration in peer connection&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14866&quot;&gt;&lt;del&gt;HBASE-14866&lt;/del&gt;&lt;/a&gt; commit&lt;/p&gt;</comment>
                            <comment id="15050254" author="ashish singhi" created="Thu, 10 Dec 2015 07:37:54 +0000"  >&lt;p&gt;branch-1 patch&lt;/p&gt;</comment>
                            <comment id="15050262" author="ram_krish" created="Thu, 10 Dec 2015 07:43:35 +0000"  >&lt;p&gt;Committed to trunk and branch-1.&lt;br/&gt;
Thanks for the perserverance &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashish+singhi&quot; class=&quot;user-hover&quot; rel=&quot;ashish singhi&quot;&gt;Ashish Singhi&lt;/a&gt;. Great work.  Thanks to all the reviews and for the time spent on the reviews. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashish+singhi&quot; class=&quot;user-hover&quot; rel=&quot;ashish singhi&quot;&gt;Ashish Singhi&lt;/a&gt;&lt;br/&gt;
Ensure that the documentation talks about the proper config knobs and other areas that a user need to look out for while enabling this feature.&lt;/p&gt;
</comment>
                            <comment id="15050557" author="ashish singhi" created="Thu, 10 Dec 2015 10:38:20 +0000"  >&lt;p&gt;Thanks a lot to everyone who involved in this jira starting from the design review till the commit phase.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Ensure that the documentation talks about the proper config knobs and other areas that a user need to look out for while enabling this feature.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Surely will do as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14939&quot; title=&quot;Document bulk loaded hfile replication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14939&quot;&gt;HBASE-14939&lt;/a&gt;, once I address &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14937&quot; title=&quot;Make rpc call timeout for replication adaptive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14937&quot;&gt;HBASE-14937&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14938&quot; title=&quot;Limit the number of znodes for ZK in bulk loaded hfile replication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14938&quot;&gt;HBASE-14938&lt;/a&gt; as they may likely introduce 2/3 more configuration properties.&lt;/p&gt;</comment>
                            <comment id="15050561" author="hudson" created="Thu, 10 Dec 2015 10:42:50 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.3 #428 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3/428/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3/428/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13153&quot; title=&quot;Bulk Loaded HFile Replication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13153&quot;&gt;&lt;del&gt;HBASE-13153&lt;/del&gt;&lt;/a&gt; Bulk Loaded HFile Replication (Ashish Singhi) (ramkrishna: rev 65117d3d04349f2ebb445a34f761fa83ce8e6aa3)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/SourceFSConfigurationProvider.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RSRpcServices.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ReplicationSinkService.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeers.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesClientZKImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/WALActionsListener.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationSmallTests.java&lt;/li&gt;
	&lt;li&gt;hbase-hadoop-compat/src/main/java/org/apache/hadoop/hbase/replication/regionserver/MetricsReplicationSinkSource.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/MetricsSource.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/AdminProtos.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/regionserver/TestReplicationSourceManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/protobuf/ReplicationProtbufUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSourceInterface.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/regionserver/TestSourceFSConfigurationProvider.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/TableCfWALEntryFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/master/ReplicationHFileCleaner.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/HBaseInterClusterReplicationEndpoint.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/HFileReplicator.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeersZKImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-hadoop2-compat/src/main/java/org/apache/hadoop/hbase/replication/regionserver/MetricsReplicationSinkSourceImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationStateZKBase.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationStateBasic.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/ReplicationSourceDummy.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationSyncUpTool.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationSyncUpToolWithBulkLoadedData.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/MetricsSink.java&lt;/li&gt;
	&lt;li&gt;hbase-hadoop2-compat/src/main/java/org/apache/hadoop/hbase/replication/regionserver/MetricsReplicationGlobalSourceSource.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/protobuf/Admin.proto&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueues.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/ScopeWALEntryFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSourceManager.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesClient.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestMasterReplication.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesZKImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationStateZKImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/cleaner/TestReplicationHFileCleaner.java&lt;/li&gt;
	&lt;li&gt;hbase-hadoop2-compat/src/main/java/org/apache/hadoop/hbase/replication/regionserver/MetricsReplicationSourceSourceImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/DefaultSourceFSConfigurationProvider.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/zookeeper/ZKUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/RegionReplicaReplicationEndpoint.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/regionserver/TestReplicationSink.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/LoadIncrementalHFiles.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/Replication.java&lt;/li&gt;
	&lt;li&gt;hbase-hadoop-compat/src/main/java/org/apache/hadoop/hbase/replication/regionserver/MetricsReplicationSourceSource.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/security/access/SecureBulkLoadEndpoint.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15050576" author="hadoopqa" created="Thu, 10 Dec 2015 10:51:46 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12776746/HBASE-13153-v21.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12776746/HBASE-13153-v21.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 9647fee3f0f196d064879afd41b9eff51d5aa036.&lt;br/&gt;
  ATTACHMENT ID: 12776746&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 42 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 checkstyle&lt;/font&gt;. The applied patch does not generate new checkstyle errors.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 zombies&lt;/font&gt;. No zombie tests found running at the end of the build.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16826//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16826//testReport/&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16826//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16826//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16826//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16826//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16826//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16826//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15050920" author="hudson" created="Thu, 10 Dec 2015 12:40:14 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-Trunk_matrix #544 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-Trunk_matrix/544/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-Trunk_matrix/544/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13153&quot; title=&quot;Bulk Loaded HFile Replication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13153&quot;&gt;&lt;del&gt;HBASE-13153&lt;/del&gt;&lt;/a&gt; Bulk Loaded HFile Replication (Ashish Singhi) (ramkrishna: rev 26ac60b03f80c9215103a02db783341e67037753)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/LoadIncrementalHFiles.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/AdminProtos.java&lt;/li&gt;
	&lt;li&gt;hbase-hadoop2-compat/src/main/java/org/apache/hadoop/hbase/replication/regionserver/MetricsReplicationSinkSourceImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/regionserver/TestSourceFSConfigurationProvider.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/RegionReplicaReplicationEndpoint.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/regionserver/TestReplicationSink.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationStateZKBase.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestMasterReplication.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/cleaner/TestReplicationHFileCleaner.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/Replication.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/HBaseInterClusterReplicationEndpoint.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesClient.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesClientZKImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/MetricsSource.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/regionserver/TestReplicationSourceManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationSyncUpTool.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/security/access/SecureBulkLoadEndpoint.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationStateBasic.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/MetricsSink.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/WALActionsListener.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/DefaultSourceFSConfigurationProvider.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationSyncUpToolWithBulkLoadedData.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationSmallTests.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueues.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/master/ReplicationHFileCleaner.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RSRpcServices.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/HFileReplicator.java&lt;/li&gt;
	&lt;li&gt;hbase-hadoop-compat/src/main/java/org/apache/hadoop/hbase/replication/regionserver/MetricsReplicationSourceSource.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSourceInterface.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/TableCfWALEntryFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/SourceFSConfigurationProvider.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/zookeeper/ZKUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSourceManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationStateZKImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/protobuf/Admin.proto&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeersZKImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-hadoop2-compat/src/main/java/org/apache/hadoop/hbase/replication/regionserver/MetricsReplicationGlobalSourceSource.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeers.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesZKImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/ReplicationSourceDummy.java&lt;/li&gt;
	&lt;li&gt;hbase-hadoop-compat/src/main/java/org/apache/hadoop/hbase/replication/regionserver/MetricsReplicationSinkSource.java&lt;/li&gt;
	&lt;li&gt;hbase-hadoop2-compat/src/main/java/org/apache/hadoop/hbase/replication/regionserver/MetricsReplicationSourceSourceImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ReplicationSinkService.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/protobuf/ReplicationProtbufUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/ScopeWALEntryFilter.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15051064" author="hudson" created="Thu, 10 Dec 2015 14:54:07 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.3-IT #365 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3-IT/365/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3-IT/365/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13153&quot; title=&quot;Bulk Loaded HFile Replication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13153&quot;&gt;&lt;del&gt;HBASE-13153&lt;/del&gt;&lt;/a&gt; Bulk Loaded HFile Replication (Ashish Singhi) (ramkrishna: rev 65117d3d04349f2ebb445a34f761fa83ce8e6aa3)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/regionserver/TestReplicationSink.java&lt;/li&gt;
	&lt;li&gt;hbase-hadoop-compat/src/main/java/org/apache/hadoop/hbase/replication/regionserver/MetricsReplicationSourceSource.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationStateZKImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeers.java&lt;/li&gt;
	&lt;li&gt;hbase-hadoop-compat/src/main/java/org/apache/hadoop/hbase/replication/regionserver/MetricsReplicationSinkSource.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/protobuf/ReplicationProtbufUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-hadoop2-compat/src/main/java/org/apache/hadoop/hbase/replication/regionserver/MetricsReplicationGlobalSourceSource.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/RSRpcServices.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/SourceFSConfigurationProvider.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/WALActionsListener.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationSyncUpToolWithBulkLoadedData.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/MetricsSource.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ReplicationSinkService.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationStateZKBase.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/protobuf/Admin.proto&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationSmallTests.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/regionserver/TestReplicationSourceManager.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSourceManager.java&lt;/li&gt;
	&lt;li&gt;hbase-common/src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationStateBasic.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/ScopeWALEntryFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/regionserver/TestSourceFSConfigurationProvider.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/master/cleaner/TestReplicationHFileCleaner.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSourceInterface.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestMasterReplication.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesClient.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationPeersZKImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-protocol/src/main/java/org/apache/hadoop/hbase/protobuf/generated/AdminProtos.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/RegionReplicaReplicationEndpoint.java&lt;/li&gt;
	&lt;li&gt;hbase-hadoop2-compat/src/main/java/org/apache/hadoop/hbase/replication/regionserver/MetricsReplicationSinkSourceImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/TableCfWALEntryFilter.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/security/access/SecureBulkLoadEndpoint.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSource.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueues.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/LoadIncrementalHFiles.java&lt;/li&gt;
	&lt;li&gt;hbase-hadoop2-compat/src/main/java/org/apache/hadoop/hbase/replication/regionserver/MetricsReplicationSourceSourceImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/master/ReplicationHFileCleaner.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/ReplicationSourceDummy.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/zookeeper/ZKUtil.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/ReplicationSink.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesClientZKImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/MetricsSink.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/DefaultSourceFSConfigurationProvider.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/Replication.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationSyncUpTool.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/HBaseInterClusterReplicationEndpoint.java&lt;/li&gt;
	&lt;li&gt;hbase-client/src/main/java/org/apache/hadoop/hbase/replication/ReplicationQueuesZKImpl.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/HFileReplicator.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15565504" author="yuzhihong@gmail.com" created="Tue, 11 Oct 2016 14:08:39 +0000"  >&lt;blockquote&gt;&lt;p&gt;thinking on the HFiles that are being replicated but are moved to archive due to compaction. Here again we need to retry the operation like in case of WAL as per discussion&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashish+singhi&quot; class=&quot;user-hover&quot; rel=&quot;ashish singhi&quot;&gt;Ashish Singhi&lt;/a&gt;:&lt;br/&gt;
Can you point me to the code where retry is done ? Or the above is not applicable to the current design ?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="15568251" author="ashish singhi" created="Wed, 12 Oct 2016 09:57:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu&quot; class=&quot;user-hover&quot; rel=&quot;tedyu&quot;&gt;Ted Yu&lt;/a&gt;, the above is handled in the code.&lt;br/&gt;
Take a look &lt;a href=&quot;https://github.com/apache/hbase/blob/master/hbase-server/src/main/java/org/apache/hadoop/hbase/replication/regionserver/HFileReplicator.java#L372-L379&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12919632">HBASE-14937</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12919639">HBASE-14938</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12946951">HBASE-15397</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12947984">HBASE-15425</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12959638">HBASE-15669</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12975481">HBASE-15952</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12947983">HBASE-15424</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12959627">HBASE-15668</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12919866">HBASE-14945</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12919644">HBASE-14939</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12972718">HBASE-15888</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12955276">HBASE-15578</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12776611" name="HBASE-13153-branch-1-v20.patch" size="250062" author="ashish singhi" created="Wed, 9 Dec 2015 18:05:28 +0000"/>
                            <attachment id="12776747" name="HBASE-13153-branch-1-v21.patch" size="249496" author="ashish singhi" created="Thu, 10 Dec 2015 07:37:54 +0000"/>
                            <attachment id="12764608" name="HBASE-13153-v1.patch" size="191366" author="ashish singhi" created="Thu, 1 Oct 2015 14:03:45 +0000"/>
                            <attachment id="12767009" name="HBASE-13153-v10.patch" size="211421" author="ashish singhi" created="Fri, 16 Oct 2015 07:45:29 +0000"/>
                            <attachment id="12767313" name="HBASE-13153-v11.patch" size="212681" author="ashish singhi" created="Mon, 19 Oct 2015 06:59:12 +0000"/>
                            <attachment id="12771067" name="HBASE-13153-v12.patch" size="234790" author="ashish singhi" created="Fri, 6 Nov 2015 17:47:43 +0000"/>
                            <attachment id="12771967" name="HBASE-13153-v13.patch" size="235232" author="ashish singhi" created="Thu, 12 Nov 2015 13:32:44 +0000"/>
                            <attachment id="12772399" name="HBASE-13153-v14.patch" size="244806" author="ashish singhi" created="Sun, 15 Nov 2015 05:36:11 +0000"/>
                            <attachment id="12772488" name="HBASE-13153-v15.patch" size="245827" author="ashish singhi" created="Mon, 16 Nov 2015 13:42:21 +0000"/>
                            <attachment id="12772529" name="HBASE-13153-v16.patch" size="245908" author="ashish singhi" created="Mon, 16 Nov 2015 17:39:15 +0000"/>
                            <attachment id="12773558" name="HBASE-13153-v17.patch" size="246614" author="ashish singhi" created="Fri, 20 Nov 2015 18:29:05 +0000"/>
                            <attachment id="12773664" name="HBASE-13153-v18.patch" size="246767" author="ashish singhi" created="Sat, 21 Nov 2015 13:17:05 +0000"/>
                            <attachment id="12776537" name="HBASE-13153-v19.patch" size="246869" author="ashish singhi" created="Wed, 9 Dec 2015 12:15:32 +0000"/>
                            <attachment id="12765026" name="HBASE-13153-v2.patch" size="190047" author="ashish singhi" created="Mon, 5 Oct 2015 17:19:20 +0000"/>
                            <attachment id="12776600" name="HBASE-13153-v20.patch" size="246727" author="ashish singhi" created="Wed, 9 Dec 2015 16:53:19 +0000"/>
                            <attachment id="12776746" name="HBASE-13153-v21.patch" size="246161" author="ashish singhi" created="Thu, 10 Dec 2015 07:27:17 +0000"/>
                            <attachment id="12765631" name="HBASE-13153-v3.patch" size="191407" author="ashish singhi" created="Thu, 8 Oct 2015 17:13:55 +0000"/>
                            <attachment id="12765969" name="HBASE-13153-v4.patch" size="181298" author="ashish singhi" created="Sat, 10 Oct 2015 05:41:49 +0000"/>
                            <attachment id="12765980" name="HBASE-13153-v5.patch" size="181348" author="ashish singhi" created="Sat, 10 Oct 2015 11:08:38 +0000"/>
                            <attachment id="12766380" name="HBASE-13153-v6.patch" size="184047" author="ashish singhi" created="Tue, 13 Oct 2015 18:17:13 +0000"/>
                            <attachment id="12766494" name="HBASE-13153-v7.patch" size="197966" author="ashish singhi" created="Wed, 14 Oct 2015 07:50:12 +0000"/>
                            <attachment id="12766536" name="HBASE-13153-v8.patch" size="198089" author="ashish singhi" created="Wed, 14 Oct 2015 13:00:26 +0000"/>
                            <attachment id="12766785" name="HBASE-13153-v9.patch" size="210131" author="ashish singhi" created="Thu, 15 Oct 2015 13:27:27 +0000"/>
                            <attachment id="12764470" name="HBASE-13153.patch" size="184657" author="ashish singhi" created="Wed, 30 Sep 2015 19:47:37 +0000"/>
                            <attachment id="12755129" name="HBase Bulk Load Replication-v1-1.pdf" size="317252" author="ashish singhi" created="Thu, 10 Sep 2015 13:27:46 +0000"/>
                            <attachment id="12764652" name="HBase Bulk Load Replication-v2.pdf" size="357624" author="ashish singhi" created="Thu, 1 Oct 2015 18:19:02 +0000"/>
                            <attachment id="12771066" name="HBase Bulk Load Replication-v3.pdf" size="329466" author="ashish singhi" created="Fri, 6 Nov 2015 17:47:14 +0000"/>
                            <attachment id="12752709" name="HBase Bulk Load Replication.pdf" size="351859" author="ashish singhi" created="Thu, 27 Aug 2015 09:42:34 +0000"/>
                            <attachment id="12769242" name="HDFS_HA_Solution.PNG" size="13981" author="ashish singhi" created="Wed, 28 Oct 2015 09:58:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>29.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 27 Aug 2015 09:46:22 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jzvj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>This enhances the HBase replication to support replication of bulk loaded data. This is configurable, by default it is set to false which means it will not replicate the bulk loaded data to its peer(s). To enable it set &amp;quot;hbase.replication.bulkload.enabled&amp;quot; to true.&lt;br/&gt;
&lt;br/&gt;
Following are the additional configurations added for this enhancement,&lt;br/&gt;
&amp;nbsp;a. hbase.replication.cluster.id - This is manadatory to configure in cluster where replication for bulk loaded data is enabled. A source cluster is uniquely identified by sink cluster using this id. This should be configured in the source cluster configuration file for all the RS.&lt;br/&gt;
&amp;nbsp;b. hbase.replication.conf.dir - This represents the directory where all the active cluster&amp;#39;s file system client configurations are defined in subfolders corresponding to their respective replication cluster id in peer cluster. This should be configured in the peer cluster configuration file for all the RS. Default is HBASE_CONF_DIR.&lt;br/&gt;
&amp;nbsp;c. hbase.replication.source.fs.conf.provider - This represents the class which provides the source cluster file system client configuration to peer cluster. This should be configured in the peer cluster configuration file for all the RS. Default is org.apache.hadoop.hbase.replication.regionserver.DefaultSourceFSConfigurationProvider&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;For example: If source cluster FS client configurations are copied in peer cluster under directory /home/user/dc1/ then  hbase.replication.cluster.id should be configured as dc1 and hbase.replication.conf.dir as /home/user&lt;br/&gt;
&lt;br/&gt;
Note: &lt;br/&gt;
&amp;nbsp;a. Any modification to source cluster FS client configuration files in peer cluster side replication configuration directory then it needs to restart all its peer(s) cluster RS with default hbase.replication.source.fs.conf.provider.&lt;br/&gt;
&amp;nbsp;b. Only &amp;#39;xml&amp;#39; type files will be loaded by the default hbase.replication.source.fs.conf.provider.&lt;br/&gt;
&lt;br/&gt;
As part of this we have made following changes to LoadIncrementalHFiles class which is marked as Public and Stable class,&lt;br/&gt;
&amp;nbsp;a. Raised the visibility scope of LoadQueueItem class from package private to public.&lt;br/&gt;
&amp;nbsp;b. Added a new method loadHFileQueue, which loads the queue of LoadQueueItem into the table as per the region keys provided.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>