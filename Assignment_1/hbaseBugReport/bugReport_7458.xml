<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:45:56 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-7458/HBASE-7458.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-7458] TestReplicationWithCompression fails intermittently in both PreCommit and trunk builds</title>
                <link>https://issues.apache.org/jira/browse/HBASE-7458</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;TestReplicationWithCompression has been failing often.&lt;br/&gt;
Here are few examples:&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3755/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3755/testReport/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3672/testReport/org.apache.hadoop.hbase.replication/TestReplicationWithCompression/testDeleteTypes/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3672/testReport/org.apache.hadoop.hbase.replication/TestReplicationWithCompression/testDeleteTypes/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/677/testReport/junit/org.apache.hadoop.hbase.replication/TestReplicationWithCompression/queueFailover/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/677/testReport/junit/org.apache.hadoop.hbase.replication/TestReplicationWithCompression/queueFailover/&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12625485">HBASE-7458</key>
            <summary>TestReplicationWithCompression fails intermittently in both PreCommit and trunk builds</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jeffreyz">Jeffrey Zhong</assignee>
                                    <reporter username="yuzhihong@gmail.com">Ted Yu</reporter>
                        <labels>
                            <label>tes</label>
                    </labels>
                <created>Sat, 29 Dec 2012 14:00:40 +0000</created>
                <updated>Mon, 23 Sep 2013 18:31:01 +0000</updated>
                            <resolved>Fri, 22 Mar 2013 16:13:12 +0000</resolved>
                                                    <fixVersion>0.98.0</fixVersion>
                    <fixVersion>0.95.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                            <comments>
                            <comment id="13587544" author="jeffreyz" created="Tue, 26 Feb 2013 21:02:04 +0000"  >&lt;p&gt;one build error log&lt;/p&gt;</comment>
                            <comment id="13587571" author="jeffreyz" created="Tue, 26 Feb 2013 21:19:39 +0000"  >&lt;p&gt;Increase the source buffer size from 1K to 10K in order to faster replication so that the test case can complete within 5 mins even on slow boxes.&lt;/p&gt;</comment>
                            <comment id="13587592" author="jeffreyz" created="Tue, 26 Feb 2013 21:42:50 +0000"  >&lt;p&gt;I checked the error log(only one left by now) and found the root cause is due to the test case itself run too slow. Below are related log lines:&lt;/p&gt;

&lt;p&gt;...&lt;br/&gt;
2013-02-16 19:38:12,188 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-652&amp;#93;&lt;/span&gt; replication.TestReplicationQueueFailover(61): Start loading table&lt;br/&gt;
...&lt;br/&gt;
2013-02-16 19:43:05,458 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-652&amp;#93;&lt;/span&gt; client.ClientScanner(90): Creating scanner over test starting at key &apos;&apos;&lt;br/&gt;
2013-02-16 19:43:05,458 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-652&amp;#93;&lt;/span&gt; client.ClientScanner(198): Advancing internal scanner to startKey at &apos;&lt;br/&gt;
...&lt;br/&gt;
2013-02-16 19:43:07,101 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;RegionServer:1;janus.apache.org,42433,1361043425223.replicationSource,2&amp;#93;&lt;/span&gt; regionserver.ReplicationSource(640): Replicating 1&lt;br/&gt;
2013-02-16 19:43:07,474 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;RegionServer:1;janus.apache.org,42433,1361043425223.replicationSource,2&amp;#93;&lt;/span&gt; regionserver.ReplicationSource(577): Nothing to replicate, sleeping 100 times 1&lt;br/&gt;
...&lt;br/&gt;
2013-02-16 19:43:08,087 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-652&amp;#93;&lt;/span&gt; replication.TestReplicationQueueFailover(108): Only got 17504 rows instead of 17576 current i=-71&lt;br/&gt;
...&lt;br/&gt;
2013-02-16 19:43:10,087 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-652&amp;#93;&lt;/span&gt; client.ClientScanner(90): Creating scanner over test starting at key &apos;&apos;&lt;br/&gt;
2013-02-16 19:43:10,087 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-652&amp;#93;&lt;/span&gt; client.ClientScanner(198): Advancing internal scanner to startKey at &apos;&apos;&lt;br/&gt;
...&lt;br/&gt;
2013-02-16 19:43:12,192 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;pool-1-thread-1&amp;#93;&lt;/span&gt; hbase.HBaseTestingUtility(703): Shutting down minicluster&lt;br/&gt;
...&lt;/p&gt;

&lt;p&gt;As you can see from the above, the test case started at 19:38:12 and completed at 19:43:12, exact 5 mins. &lt;br/&gt;
The second to the last scan happened at 19:43:05 and completed at 19:43:08 while replication source reading completed at 19:43:07 &quot;Nothing to replicate&quot; so we had message &quot;Only got 17504 rows instead of 17576&quot; because the replication was on going when the scan started.&lt;/p&gt;

&lt;p&gt;The last scan happened at 19:43:10 and before it could complete, cluster was shutting down at 2013-02-16 19:43:12. Therefore, the test case itself just run too slow in the build box. I came up a fix which logically increase replication batch size in order to faster the test case and finish in time even on a slow machine.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
-Jeffrey&lt;/p&gt;



</comment>
                            <comment id="13610446" author="stack" created="Fri, 22 Mar 2013 16:10:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jeffreyz&quot; class=&quot;user-hover&quot; rel=&quot;jeffreyz&quot;&gt;Jeffrey Zhong&lt;/a&gt; Patch looks good.  How about I apply it and see how it does?&lt;/p&gt;</comment>
                            <comment id="13610491" author="stack" created="Fri, 22 Mar 2013 16:13:12 +0000"  >&lt;p&gt;Let me just resolve.  Can open new issue if it comes up again.  Applied to trunk and 0.95.  Thanks for digging in on unit tests J.&lt;/p&gt;</comment>
                            <comment id="13611005" author="hudson" created="Fri, 22 Mar 2013 18:05:56 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3986 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3986/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3986/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7458&quot; title=&quot;TestReplicationWithCompression fails intermittently in both PreCommit and trunk builds&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7458&quot;&gt;&lt;del&gt;HBASE-7458&lt;/del&gt;&lt;/a&gt; TestReplicationWithCompression fails intermittently in both PreCommit and trunk builds (Revision 1459879)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationBase.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13611174" author="hudson" created="Fri, 22 Mar 2013 20:11:42 +0000"  >&lt;p&gt;Integrated in hbase-0.95 #98 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95/98/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95/98/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7458&quot; title=&quot;TestReplicationWithCompression fails intermittently in both PreCommit and trunk builds&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7458&quot;&gt;&lt;del&gt;HBASE-7458&lt;/del&gt;&lt;/a&gt; TestReplicationWithCompression fails intermittently in both PreCommit and trunk builds (Revision 1459880)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationBase.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13611580" author="hudson" created="Sat, 23 Mar 2013 04:25:54 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #460 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/460/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/460/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7458&quot; title=&quot;TestReplicationWithCompression fails intermittently in both PreCommit and trunk builds&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7458&quot;&gt;&lt;del&gt;HBASE-7458&lt;/del&gt;&lt;/a&gt; TestReplicationWithCompression fails intermittently in both PreCommit and trunk builds (Revision 1459879)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationBase.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13611613" author="hudson" created="Sat, 23 Mar 2013 04:43:18 +0000"  >&lt;p&gt;Integrated in hbase-0.95-on-hadoop2 #38 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95-on-hadoop2/38/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95-on-hadoop2/38/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7458&quot; title=&quot;TestReplicationWithCompression fails intermittently in both PreCommit and trunk builds&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7458&quot;&gt;&lt;del&gt;HBASE-7458&lt;/del&gt;&lt;/a&gt; TestReplicationWithCompression fails intermittently in both PreCommit and trunk builds (Revision 1459880)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/replication/TestReplicationBase.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13775225" author="stack" created="Mon, 23 Sep 2013 18:31:01 +0000"  >&lt;p&gt;Marking closed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12571054" name="ErrorLog.rtf" size="3680454" author="jeffreyz" created="Tue, 26 Feb 2013 21:02:04 +0000"/>
                            <attachment id="12571061" name="hbase-7458.patch" size="929" author="jeffreyz" created="Tue, 26 Feb 2013 21:19:39 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12634292">HBASE-7944</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 26 Feb 2013 21:02:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>302027</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i16y4f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>248662</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>