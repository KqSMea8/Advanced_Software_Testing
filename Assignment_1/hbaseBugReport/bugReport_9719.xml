<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:06:57 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-9719/HBASE-9719.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-9719] Premptive Call Me Maybe HBase</title>
                <link>https://issues.apache.org/jira/browse/HBASE-9719</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Aphyr wrote an interesting article on C* &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;.  Some awkward-looking issues were turned up though it seems the author is purportedly doing nothing but exercising the software within spec; he is just paying close attention to what is being returned.&lt;/p&gt;

&lt;p&gt;It does not look like Aphyr will be coming our way any time soon &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &amp;#8211; thanks Ian Varley &amp;#8211; but he could change his mind.  Wouldn&apos;t it be coolio if we&apos;d already run his test suite and found any bugs and fixed them before he came by?  This issue is about running his article against hbase so we find the embarrassing before he does.&lt;/p&gt;

&lt;p&gt;1. &lt;a href=&quot;http://aphyr.com/posts/294-call-me-maybe-cassandra&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://aphyr.com/posts/294-call-me-maybe-cassandra&lt;/a&gt;&lt;br/&gt;
2. &lt;a href=&quot;https://twitter.com/aphyr/status/335082835868254209&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://twitter.com/aphyr/status/335082835868254209&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12672563">HBASE-9719</key>
            <summary>Premptive Call Me Maybe HBase</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rayokota">Robert Yokota</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Sun, 6 Oct 2013 23:27:57 +0000</created>
                <updated>Fri, 20 Nov 2015 11:52:35 +0000</updated>
                            <resolved>Mon, 8 Sep 2014 04:14:36 +0000</resolved>
                                                    <fixVersion>0.98.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>18</watches>
                                                                                                            <comments>
                            <comment id="13789962" author="jmhsieh" created="Wed, 9 Oct 2013 02:57:26 +0000"  >&lt;p&gt;Nice article.  &lt;/p&gt;

&lt;p&gt;We have done this in the past.  We have TestAcidGuarantee and I added a main method to that test back in the day to make it a long lived test &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;.  We should convert to be a IntegrationTest and throw our monkeys at em...  &lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/hbase/blob/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/TestAcidGuarantees.java#L383&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hbase/blob/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/TestAcidGuarantees.java#L383&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="13790584" author="stack" created="Wed, 9 Oct 2013 16:31:18 +0000"  >&lt;p&gt;Yeah, we should do that but we also need to shore up around counters/append and stuff like Sergey&apos;s making sure we don&apos;t double-increment, etc.&lt;/p&gt;</comment>
                            <comment id="13793915" author="clehene" created="Mon, 14 Oct 2013 05:18:21 +0000"  >&lt;p&gt;There are the also the timestamps - &lt;a href=&quot;http://aphyr.com/posts/299-the-trouble-with-timestamps&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://aphyr.com/posts/299-the-trouble-with-timestamps&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13793935" author="lhofhansl" created="Mon, 14 Oct 2013 06:02:29 +0000"  >&lt;p&gt;Should not be a problem in HBase, since a single RegionServer is wholly responsible for a row at any given time.&lt;br/&gt;
Depending on which problem we&apos;re talking about there could still be a problem if RegionServers times are further apart than it takes a region to be migrated to another RegionServer.&lt;br/&gt;
Then there is the question about events that do happen at the same time (or within the time resolution, which is 1ms in HBase).&lt;/p&gt;

&lt;p&gt;Generally HBase has a pretty good story here.&lt;/p&gt;</comment>
                            <comment id="13793938" author="clehene" created="Mon, 14 Oct 2013 06:16:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt; I saw your slides about MVCC writenumber (&lt;a href=&quot;http://www.slideshare.net/cloudera/3-learning-h-base-internals-lars-hofhansl-salesforce-final&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.slideshare.net/cloudera/3-learning-h-base-internals-lars-hofhansl-salesforce-final&lt;/a&gt;)&lt;br/&gt;
There are, however, a few scenarios related to the wall clock that we should validate.&lt;br/&gt;
There&apos;s also the replication.&lt;/p&gt;</comment>
                            <comment id="14124555" author="rayokota" created="Sat, 6 Sep 2014 16:46:27 +0000"  >&lt;p&gt;I ran some of Aphyr&apos;s Jepsen tests against HBase.  The conclusion is that HBase performed well.&lt;/p&gt;

&lt;p&gt;The test I used is at &lt;a href=&quot;https://github.com/rayokota/jepsen/blob/old/src/jepsen/hbase.clj&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/rayokota/jepsen/blob/old/src/jepsen/hbase.clj&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I used CDH 5.1.2, which bundles hbase-0.98.1+cdh5.1.2+70.&lt;/p&gt;


&lt;p&gt;The first test (hbase-app) is to simply create unique key-value pairs while a network partition occurs.&lt;/p&gt;

&lt;p&gt;0 unrecoverable timeouts&lt;br/&gt;
Collecting results.&lt;br/&gt;
Writes completed in 200.047 seconds&lt;/p&gt;

&lt;p&gt;2000 total&lt;br/&gt;
2000 acknowledged&lt;br/&gt;
2000 survivors&lt;br/&gt;
All 2000 writes succeeded. :-D&lt;/p&gt;


&lt;p&gt;The second test (hbase-append-app) is to modify the same cell repeatedly using checkAndPut (by appending to a list stored as a blob) while a network partition occurs.  As expected, most writes did not succeed due to the checkAndPut call failing because another client concurrently modified the row.  However, no data loss occurred.&lt;/p&gt;

&lt;p&gt;0 unrecoverable timeouts&lt;br/&gt;
Collecting results.&lt;br/&gt;
Writes completed in 200.05 seconds&lt;/p&gt;

&lt;p&gt;2000 total&lt;br/&gt;
282 acknowledged&lt;br/&gt;
282 survivors&lt;br/&gt;
all 282 acked writes out of 2000 succeeded. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;


&lt;p&gt;The third test (hbase-isolation-app) is to modify two cells in the same row while a network partition occurs, to test if row updates are atomic.  This is the same test as the one for Cassandra that demonstrated that updates to multiple keys in the same row are not atomic in Cassandra (&lt;a href=&quot;http://aphyr.com/posts/294-call-me-maybe-cassandra/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://aphyr.com/posts/294-call-me-maybe-cassandra/&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;0 unrecoverable timeouts&lt;br/&gt;
Collecting results.&lt;br/&gt;
()&lt;br/&gt;
Writes completed in 200.043 seconds&lt;/p&gt;

&lt;p&gt;2000 total&lt;br/&gt;
2000 acknowledged&lt;br/&gt;
2000 survivors&lt;br/&gt;
All 2000 writes succeeded. :-D&lt;/p&gt;</comment>
                            <comment id="14124584" author="apurtell" created="Sat, 6 Sep 2014 18:27:09 +0000"  >&lt;p&gt;This is fantastic &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rayokota&quot; class=&quot;user-hover&quot; rel=&quot;rayokota&quot;&gt;Robert Yokota&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The hbase-isolation-app result is particularly interesting, because we claim this is something that sets HBase apart from alternatives, so the confirmation is good to have.&lt;/p&gt;

&lt;p&gt;I&apos;ve assigned this issue to you because you&apos;ve already completed it in a sense, but I&apos;m wondering in your opinion if any additional Jepsen tests would be reasonable or worthwhile to run.&lt;/p&gt;

&lt;p&gt;Would be great to document this in the manual. What do you think &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=misty&quot; class=&quot;user-hover&quot; rel=&quot;misty&quot;&gt;Misty Stanley-Jones&lt;/a&gt;? &lt;/p&gt;</comment>
                            <comment id="14124627" author="jmhsieh" created="Sat, 6 Sep 2014 20:07:22 +0000"  >&lt;p&gt;Nice stuff &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rayokota&quot; class=&quot;user-hover&quot; rel=&quot;rayokota&quot;&gt;Robert Yokota&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="14124636" author="jmspaggi" created="Sat, 6 Sep 2014 20:18:03 +0000"  >&lt;p&gt;How &quot;easy&quot; is it to re-run that?I&apos;m interested to run it on my local nodes (4 and 8) with different versions of HBase to validate them. Is that something which can be setup easily? Do you have detailed steps?&lt;br/&gt;
Thanks.&lt;/p&gt;</comment>
                            <comment id="14125199" author="rayokota" created="Mon, 8 Sep 2014 04:07:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmspaggi&quot; class=&quot;user-hover&quot; rel=&quot;jmspaggi&quot;&gt;Jean-Marc Spaggiari&lt;/a&gt;, the Jepsen tests aren&apos;t designed to run against an existing cluster.  You can read more at &lt;a href=&quot;http://aphyr.com/posts/281-call-me-maybe-carly-rae-jepsen-and-the-perils-of-network-partitions&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://aphyr.com/posts/281-call-me-maybe-carly-rae-jepsen-and-the-perils-of-network-partitions&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14125204" author="rayokota" created="Mon, 8 Sep 2014 04:13:15 +0000"  >&lt;p&gt;For completeness, I added a fourth test (hbase-counter-app) to test that increments to counters are atomic.  This is the same test as the one for Cassandra that demonstrated that counter operations are not atomic in Cassandra.  As shown below, HBase counters behave correctly.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/rayokota/jepsen/commit/d670a8a5e088fde29adbe1f5e19405755797a51f&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/rayokota/jepsen/commit/d670a8a5e088fde29adbe1f5e19405755797a51f&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;0 unrecoverable timeouts&lt;br/&gt;
Collecting results.&lt;br/&gt;
Writes completed in 200.045 seconds&lt;/p&gt;

&lt;p&gt;2000 total&lt;br/&gt;
2000 acknowledged&lt;br/&gt;
2000 survivors&lt;br/&gt;
All 2000 writes succeeded. :-D&lt;/p&gt;</comment>
                            <comment id="14125773" author="lhofhansl" created="Mon, 8 Sep 2014 17:16:04 +0000"  >&lt;p&gt;We need to publish this somewhere. Apache Blog?&lt;/p&gt;</comment>
                            <comment id="14125780" author="ndimiduk" created="Mon, 8 Sep 2014 17:28:31 +0000"  >&lt;p&gt;Perhaps Robert can do a guest post on Kyle&apos;s blog, so it&apos;s along with the rest of the Jepsen series.&lt;/p&gt;</comment>
                            <comment id="14125787" author="clehene" created="Mon, 8 Sep 2014 17:32:53 +0000"  >&lt;p&gt;That&apos;s a good idea. I can do a referring follow-up on hstack.org  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14126294" author="lhofhansl" created="Mon, 8 Sep 2014 23:25:47 +0000"  >&lt;blockquote&gt;&lt;p&gt;Perhaps Robert can do a guest post on Kyle&apos;s blog, so it&apos;s along with the rest of the Jepsen series.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14127961" author="rayokota" created="Wed, 10 Sep 2014 02:32:38 +0000"  >&lt;p&gt;Here is my blog post:  &lt;a href=&quot;http://eng.yammer.com/call-me-maybe-hbase/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://eng.yammer.com/call-me-maybe-hbase/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14129277" author="rayokota" created="Wed, 10 Sep 2014 22:44:51 +0000"  >&lt;p&gt;Here is an addendum to my blog post:  &lt;a href=&quot;http://eng.yammer.com/call-me-maybe-hbase-addendum/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://eng.yammer.com/call-me-maybe-hbase-addendum/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14129334" author="ndimiduk" created="Wed, 10 Sep 2014 23:14:43 +0000"  >&lt;p&gt;Nice work &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rayokota&quot; class=&quot;user-hover&quot; rel=&quot;rayokota&quot;&gt;Robert Yokota&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="14129770" author="nkeywal" created="Thu, 11 Sep 2014 08:00:25 +0000"  >&lt;p&gt;There is this: &quot;java.lang.OutOfMemoryError: unable to create new native thread&quot;&lt;br/&gt;
Does jepsen creates a new thread per client call? If so that&apos;s a lot of threads (and as hbase retries for around 10 minutes by default, you can have a lot of threads running simultaneously). If you change the number of retries to something like 3 or 4 then the ops will fail sooner.&lt;/p&gt;</comment>
                            <comment id="15015784" author="lars_francke" created="Fri, 20 Nov 2015 11:52:35 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                            <subtask id="12739902">HBASE-11910</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 9 Oct 2013 02:57:26 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>352186</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1opz3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>352474</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>