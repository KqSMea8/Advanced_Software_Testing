<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:59:27 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-8889/HBASE-8889.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-8889] TestIOFencing#testFencingAroundCompaction occasionally fails</title>
                <link>https://issues.apache.org/jira/browse/HBASE-8889</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;From &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6232//testReport/org.apache.hadoop.hbase/TestIOFencing/testFencingAroundCompaction/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6232//testReport/org.apache.hadoop.hbase/TestIOFencing/testFencingAroundCompaction/&lt;/a&gt; :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.AssertionError: Timed out waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; server to open region
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.assertTrue(Assert.java:41)
	at org.apache.hadoop.hbase.TestIOFencing.doTest(TestIOFencing.java:269)
	at org.apache.hadoop.hbase.TestIOFencing.testFencingAroundCompaction(TestIOFencing.java:205)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2013-07-06 23:13:53,120 INFO  [pool-1-thread-1] hbase.TestIOFencing(266): Waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; server to pick up the region tabletest,,1373152125442.6e62d3b24ea23160931362b60359ff03.
2013-07-06 23:13:54,120 INFO  [pool-1-thread-1] hbase.TestIOFencing(266): Waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; server to pick up the region tabletest,,1373152125442.6e62d3b24ea23160931362b60359ff03.
2013-07-06 23:13:55,121 DEBUG [pool-1-thread-1] hbase.TestIOFencing$CompactionBlockerRegion(102): allowing compactions
2013-07-06 23:13:55,121 INFO  [pool-1-thread-1] hbase.HBaseTestingUtility(911): Shutting down minicluster
2013-07-06 23:13:55,121 DEBUG [pool-1-thread-1] util.JVMClusterUtil(237): Shutting down HBase Cluster
2013-07-06 23:13:55,121 INFO  [RS:0;asf002:39065-smallCompactions-1373152134716] regionserver.HStore(951): Starting compaction of 2 file(s) in family of tabletest,,1373152125442.6e62d3b24ea23160931362b60359ff03. into tmpdir=hdfs:&lt;span class=&quot;code-comment&quot;&gt;//localhost:50140/user/jenkins/hbase/tabletest/6e62d3b24ea23160931362b60359ff03/.tmp, totalSize=108.4k
&lt;/span&gt;...
2013-07-06 23:13:55,155 INFO  [RS:0;asf002:39065] regionserver.HRegionServer(2476): Received CLOSE &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the region: 6e62d3b24ea23160931362b60359ff03 ,which we are already trying to CLOSE
2013-07-06 23:13:55,157 WARN  [RS:0;asf002:39065] regionserver.HRegionServer(2414): Failed to close tabletest,,1373152125442.6e62d3b24ea23160931362b60359ff03. - ignoring and continuing
org.apache.hadoop.hbase.exceptions.NotServingRegionException: The region 6e62d3b24ea23160931362b60359ff03 was already closing. New CLOSE request is ignored.
	at org.apache.hadoop.hbase.regionserver.HRegionServer.closeRegion(HRegionServer.java:2479)
	at org.apache.hadoop.hbase.regionserver.HRegionServer.closeRegionIgnoreErrors(HRegionServer.java:2409)
	at org.apache.hadoop.hbase.regionserver.HRegionServer.closeUserRegions(HRegionServer.java:2011)
	at org.apache.hadoop.hbase.regionserver.HRegionServer.run(HRegionServer.java:903)
	at org.apache.hadoop.hbase.MiniHBaseCluster$MiniHBaseClusterRegionServer.runRegionServer(MiniHBaseCluster.java:158)
	at org.apache.hadoop.hbase.MiniHBaseCluster$MiniHBaseClusterRegionServer.access$000(MiniHBaseCluster.java:110)
	at org.apache.hadoop.hbase.MiniHBaseCluster$MiniHBaseClusterRegionServer$1.run(MiniHBaseCluster.java:142)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:337)
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1131)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.hadoop.hbase.util.Methods.call(Methods.java:41)
	at org.apache.hadoop.hbase.security.User.call(User.java:420)
	at org.apache.hadoop.hbase.security.User.access$300(User.java:51)
	at org.apache.hadoop.hbase.security.User$SecureHadoopUser.runAs(User.java:260)
	at org.apache.hadoop.hbase.MiniHBaseCluster$MiniHBaseClusterRegionServer.run(MiniHBaseCluster.java:140)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12656500">HBASE-8889</key>
            <summary>TestIOFencing#testFencingAroundCompaction occasionally fails</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yuzhihong@gmail.com">Ted Yu</assignee>
                                    <reporter username="yuzhihong@gmail.com">Ted Yu</reporter>
                        <labels>
                    </labels>
                <created>Sun, 7 Jul 2013 00:17:24 +0000</created>
                <updated>Sat, 21 Feb 2015 23:35:09 +0000</updated>
                            <resolved>Fri, 28 Mar 2014 23:05:47 +0000</resolved>
                                                    <fixVersion>0.99.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                <comments>
                            <comment id="13701487" author="yuzhihong@gmail.com" created="Sun, 7 Jul 2013 02:56:15 +0000"  >&lt;p&gt;Search for recoverLease in the test output yielded nothing.&lt;/p&gt;</comment>
                            <comment id="13703362" author="stack" created="Tue, 9 Jul 2013 15:12:19 +0000"  >&lt;p&gt;Failed again this morning:  &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4230/testReport/org.apache.hadoop.hbase/TestIOFencing/testFencingAroundCompaction/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4230/testReport/org.apache.hadoop.hbase/TestIOFencing/testFencingAroundCompaction/&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.AssertionError
	at org.junit.Assert.fail(Assert.java:86)
	at org.junit.Assert.assertTrue(Assert.java:41)
	at org.junit.Assert.assertTrue(Assert.java:52)
	at org.apache.hadoop.hbase.TestIOFencing.doTest(TestIOFencing.java:252)
	at org.apache.hadoop.hbase.TestIOFencing.testFencingAroundCompaction(TestIOFencing.java:205)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.junit.runners.Suite.runChild(Suite.java:127)
	at org.junit.runners.Suite.runChild(Suite.java:26)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:439)
	at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
	at java.util.concurrent.FutureTask.run(FutureTask.java:138)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:662)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13703377" author="stack" created="Tue, 9 Jul 2013 15:31:15 +0000"  >&lt;p&gt;Did it hang here?  &lt;a href=&quot;http://54.241.6.143/job/HBase-0.95/590/consoleText&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://54.241.6.143/job/HBase-0.95/590/consoleText&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13703837" author="jxiang" created="Tue, 9 Jul 2013 21:38:31 +0000"  >&lt;p&gt;Yes, it hang there. Too bad.&lt;/p&gt;</comment>
                            <comment id="13749393" author="yuzhihong@gmail.com" created="Sat, 24 Aug 2013 14:10:30 +0000"  >&lt;p&gt;Looks like this JIRA is dup of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9023&quot; title=&quot;TestIOFencing.testFencingAroundCompactionAfterWALSync occasionally fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9023&quot;&gt;&lt;del&gt;HBASE-9023&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13750423" author="stack" created="Mon, 26 Aug 2013 19:10:15 +0000"  >&lt;p&gt;Resolving as dup of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9023&quot; title=&quot;TestIOFencing.testFencingAroundCompactionAfterWALSync occasionally fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9023&quot;&gt;&lt;del&gt;HBASE-9023&lt;/del&gt;&lt;/a&gt; as per Ted.&lt;/p&gt;</comment>
                            <comment id="13857943" author="yuzhihong@gmail.com" created="Sat, 28 Dec 2013 04:42:49 +0000"  >&lt;p&gt;The test occasionally fails.&lt;br/&gt;
e.g.&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/8293//testReport/org.apache.hadoop.hbase/TestIOFencing/testFencingAroundCompaction/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/8293//testReport/org.apache.hadoop.hbase/TestIOFencing/testFencingAroundCompaction/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13860777" author="yuzhihong@gmail.com" created="Thu, 2 Jan 2014 21:20:35 +0000"  >&lt;p&gt;Test output captured previously.&lt;/p&gt;</comment>
                            <comment id="13862771" author="yuzhihong@gmail.com" created="Mon, 6 Jan 2014 05:22:59 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.AssertionError: After compaction, does not exist: hdfs:&lt;span class=&quot;code-comment&quot;&gt;// localhost:40776/user/jenkins/hbase/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/tabletest/d4de4838a42b114f6d5562a3a4a890c1/family/69dd2c0e690649749ac77636b0d49698&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above assertion failure seems to be caused by:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
...
2013-12-28 03:13:53,752 DEBUG [RS:0;asf002:54266-shortCompactions-1388200422935] backup.HFileArchiver(438): Finished archiving from class org.apache.hadoop.hbase.backup. HFileArchiver$FileableStoreFile, file:hdfs:&lt;span class=&quot;code-comment&quot;&gt;//localhost:40776/user/jenkins/hbase/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/tabletest/d4de4838a42b114f6d5562a3a4a890c1/family/                           69dd2c0e690649749ac77636b0d49698, to hdfs://localhost:40776/user/jenkins/hbase/archive/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/tabletest/d4de4838a42b114f6d5562a3a4a890c1/family/                    69dd2c0e690649749ac77636b0d49698&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13863612" author="yuzhihong@gmail.com" created="Mon, 6 Jan 2014 23:16:37 +0000"  >&lt;p&gt;From the log:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2013-12-28 03:13:53,404 DEBUG [pool-1-thread-1] hbase.TestIOFencing$CompactionBlockerRegion(103): allowing compactions
...
2013-12-28 03:13:53,413 DEBUG [RS:0;asf002:54266-shortCompactions-1388200422935] hdfs.DFSInputStream(1095): Error making BlockReader. Closing stale                       NioInetPeer(Socket[addr=/127.0.0.1,port=57329,localport=55235])
java.io.EOFException: Premature EOF: no length prefix available
  at org.apache.hadoop.hdfs.protocolPB.PBHelper.vintPrefixed(PBHelper.java:1492)
  at org.apache.hadoop.hdfs.RemoteBlockReader2.newBlockReader(RemoteBlockReader2.java:392)
  at org.apache.hadoop.hdfs.BlockReaderFactory.newBlockReader(BlockReaderFactory.java:131)
  at org.apache.hadoop.hdfs.DFSInputStream.getBlockReader(DFSInputStream.java:1088)
  at org.apache.hadoop.hdfs.DFSInputStream.blockSeekTo(DFSInputStream.java:533)
  at org.apache.hadoop.hdfs.DFSInputStream.readWithStrategy(DFSInputStream.java:749)
  at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:793)
  at java.io.DataInputStream.read(DataInputStream.java:132)
  at org.apache.hadoop.io.IOUtils.readFully(IOUtils.java:192)
  at org.apache.hadoop.hbase.io.hfile.HFileBlock$AbstractFSReader.readAtOffset(HFileBlock.java:1210)
  at org.apache.hadoop.hbase.io.hfile.HFileBlock$FSReaderV2.readBlockDataInternal(HFileBlock.java:1483)
  at org.apache.hadoop.hbase.io.hfile.HFileBlock$FSReaderV2.readBlockData(HFileBlock.java:1314)
  at org.apache.hadoop.hbase.io.hfile.HFileReaderV2.readBlock(HFileReaderV2.java:355)
  at org.apache.hadoop.hbase.io.hfile.HFileReaderV2$ScannerV2.seekTo(HFileReaderV2.java:765)
  at org.apache.hadoop.hbase.regionserver.StoreFileScanner.seekAtOrAfter(StoreFileScanner.java:245)
  at org.apache.hadoop.hbase.regionserver.StoreFileScanner.seek(StoreFileScanner.java:153)
  at org.apache.hadoop.hbase.regionserver.StoreScanner.seekScanners(StoreScanner.java:319)
  at org.apache.hadoop.hbase.regionserver.StoreScanner.&amp;amp;lt;init&amp;gt;(StoreScanner.java:242)
  at org.apache.hadoop.hbase.regionserver.StoreScanner.&amp;amp;lt;init&amp;gt;(StoreScanner.java:202)
  at org.apache.hadoop.hbase.regionserver.compactions.Compactor.createScanner(Compactor.java:257)
  at org.apache.hadoop.hbase.regionserver.compactions.DefaultCompactor.compact(DefaultCompactor.java:65)
  at org.apache.hadoop.hbase.regionserver.DefaultStoreEngine$DefaultCompactionContext.compact(DefaultStoreEngine.java:109)
  at org.apache.hadoop.hbase.regionserver.HStore.compact(HStore.java:1074)
  at org.apache.hadoop.hbase.regionserver.HRegion.compact(HRegion.java:1378)
  at org.apache.hadoop.hbase.TestIOFencing$CompactionBlockerRegion.compact(TestIOFencing.java:118)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;There was an EOFException seeking the scanner.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; compact(CompactionContext compaction, Store store) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
      &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.compact(compaction, store);
      } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
        compactCount++;
      }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;However, the compactCount was incremented in the finally block, leading to premature exit from the following loop:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (compactingRegion.compactCount == 0) {
        &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(1000);
      }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13865688" author="apurtell" created="Wed, 8 Jan 2014 18:04:42 +0000"  >&lt;p&gt;The code may be incorrect as indicated, but isn&apos;t there a larger issue also? Above, a file under compaction has a missing block. Blocks don&apos;t normally go missing in the test, so missing blocks suggest file deletion. And further above there is a warning about a missing file in another case. Might want to investigate why/how files can be pulled out from underneath compaction.&lt;/p&gt;</comment>
                            <comment id="13865700" author="yuzhihong@gmail.com" created="Wed, 8 Jan 2014 18:12:35 +0000"  >&lt;p&gt;As Andrew indicated in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10298&quot; title=&quot;TestIOFencing occasionally fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10298&quot;&gt;&lt;del&gt;HBASE-10298&lt;/del&gt;&lt;/a&gt;, marking this a blocker for 1.0 release.&lt;/p&gt;</comment>
                            <comment id="13865767" author="yuzhihong@gmail.com" created="Wed, 8 Jan 2014 19:15:56 +0000"  >&lt;p&gt;I am looping the test with the following change so that I get better idea on timing of the failure.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Index: hbase-server/src/test/java/org/apache/hadoop/hbase/TestIOFencing.java
===================================================================
--- hbase-server/src/test/java/org/apache/hadoop/hbase/TestIOFencing.java (revision 1556059)
+++ hbase-server/src/test/java/org/apache/hadoop/hbase/TestIOFencing.java (working copy)
@@ -294,7 +298,8 @@
       &lt;span class=&quot;code-comment&quot;&gt;// all the files we expect are still working when region is up in &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; location.
&lt;/span&gt;       FileSystem fs = newRegion.getFilesystem();
       &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; f: newRegion.getStoreFileList(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; [][] {FAMILY})) {
-        assertTrue(&lt;span class=&quot;code-quote&quot;&gt;&quot;After compaction, does not exist: &quot;&lt;/span&gt; + f, fs.exists(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Path(f)));
+        assertTrue(&lt;span class=&quot;code-quote&quot;&gt;&quot;After compaction, does not exist: &quot;&lt;/span&gt; + f + &lt;span class=&quot;code-quote&quot;&gt;&quot; @&quot;&lt;/span&gt; + &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.currentTimeMillis(),
+          fs.exists(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Path(f)));
       }
       &lt;span class=&quot;code-comment&quot;&gt;// If we survive the split keep going...
&lt;/span&gt;       &lt;span class=&quot;code-comment&quot;&gt;// Now we make sure that the region isn&apos;t totally confused.  Load up more rows.&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13865872" author="yuzhihong@gmail.com" created="Wed, 8 Jan 2014 20:49:59 +0000"  >&lt;p&gt;Log for another failure on QA build #8362&lt;/p&gt;</comment>
                            <comment id="13948548" author="hadoopqa" created="Wed, 26 Mar 2014 22:11:30 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12636765/8889-v1.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12636765/8889-v1.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12636765&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 6 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 1 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9102//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9102//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9102//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9102//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9102//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9102//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9102//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9102//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9102//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9102//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9102//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9102//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9102//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9102//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9102//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9102//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9102//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9102//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9102//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9102//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9102//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9102//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13948552" author="yuzhihong@gmail.com" created="Wed, 26 Mar 2014 22:14:39 +0000"  >&lt;p&gt;Looped TestIOFencing 40 times on Linux and they passed.&lt;/p&gt;</comment>
                            <comment id="13948684" author="enis" created="Thu, 27 Mar 2014 00:00:35 +0000"  >&lt;p&gt;+1. Ted says the failure was sometime ago. May not be applicable. Let&apos;s reenable the test, if it fails again we&apos;ll fix it. &lt;/p&gt;</comment>
                            <comment id="13948689" author="yuzhihong@gmail.com" created="Thu, 27 Mar 2014 00:06:14 +0000"  >&lt;p&gt;Integrated to trunk.&lt;/p&gt;

&lt;p&gt;Will observe QA and trunk builds to see if the test fails again.&lt;/p&gt;

&lt;p&gt;Thanks for the review.&lt;/p&gt;</comment>
                            <comment id="13948855" author="hudson" created="Thu, 27 Mar 2014 04:04:25 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-TRUNK #5043 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/5043/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/5043/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8889&quot; title=&quot;TestIOFencing#testFencingAroundCompaction occasionally fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8889&quot;&gt;&lt;del&gt;HBASE-8889&lt;/del&gt;&lt;/a&gt; TestIOFencing#testFencingAroundCompaction occasionally fails (tedyu: rev 1582133)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/TestIOFencing.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13949992" author="yuzhihong@gmail.com" created="Thu, 27 Mar 2014 21:52:09 +0000"  >&lt;p&gt;TestIOFencing passed in QA runs and trunk builds.&lt;/p&gt;

&lt;p&gt;Plan to resolve tomorrow if it doesn&apos;t fail.&lt;/p&gt;</comment>
                            <comment id="13963199" author="jdcryans" created="Tue, 8 Apr 2014 17:27:34 +0000"  >&lt;p&gt;This jira is titled &quot;TestIOFencing#testFencingAroundCompaction occasionally fails&quot; but what it does is enabling a test?&lt;/p&gt;</comment>
                            <comment id="13963513" author="yuzhihong@gmail.com" created="Tue, 8 Apr 2014 22:07:05 +0000"  >&lt;p&gt;Would &apos;re-enable TestIOFencing&apos; be better title for this JIRA ?&lt;/p&gt;</comment>
                            <comment id="14331286" author="enis" created="Sat, 21 Feb 2015 23:35:09 +0000"  >&lt;p&gt;Closing this issue after 0.99.0 release. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12687814">HBASE-10298</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12656945">HBASE-8907</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12636765" name="8889-v1.txt" size="1343" author="yuzhihong@gmail.com" created="Tue, 25 Mar 2014 19:38:37 +0000"/>
                            <attachment id="12622029" name="TestIOFencing-#8362.tar.gz" size="534733" author="yuzhihong@gmail.com" created="Wed, 8 Jan 2014 20:49:59 +0000"/>
                            <attachment id="12621154" name="TestIOFencing.tar.gz" size="534882" author="yuzhihong@gmail.com" created="Thu, 2 Jan 2014 21:20:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 9 Jul 2013 15:12:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>336723</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1m2xj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>337046</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>