<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 21:17:33 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-16761/HBASE-16761.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-16761] Migrate existing protobuf2.5.0 Coprocessor Endpoints (and servers-side hbase) to protobuf3.</title>
                <link>https://issues.apache.org/jira/browse/HBASE-16761</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;HBase bundles seven or eight coprocessors. These Coprocessor Endpoints (CPEPs) depend currently on protobuf 2.5 and reference protobuf classes at com.google.protobuf.* rather than at the internal relocated location of org.apache.hadoop.hbase.shaded.com.google.protobuf.&lt;/p&gt;

&lt;p&gt;This is issue is about moving our CPEPs to protobuf3.&lt;/p&gt;

&lt;p&gt;I could just replace the protobuf library we depend on making it pb3 but that would break CPEPs that were not shipped as part of hbase core when we install hbase-2.0.0. Over in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15638&quot; title=&quot;Shade protobuf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15638&quot;&gt;&lt;del&gt;HBASE-15638&lt;/del&gt;&lt;/a&gt; Shade protobuf we did a bunch of work to ensure CPEPs keep working across the upgrade to hbase-2.0.0 so I suggest we just leave our core CPEPs at pb2.5 for now. Rather, lets have a deprecation cycle where we deprecate pb2.5 on the hbase server-side (somehow) for hbase-2.0.0 and then remove pb2.5 in hbase-3.0.0 (or 2.1 or something).&lt;/p&gt;

&lt;p&gt;Would appreciate input on this one. Let me mark this a 2.0.0 critical so it gets some attention before we finish up the 2.0.0 release.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13009628">HBASE-16761</key>
            <summary>Migrate existing protobuf2.5.0 Coprocessor Endpoints (and servers-side hbase) to protobuf3.</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Oct 2016 16:59:51 +0000</created>
                <updated>Wed, 5 Oct 2016 12:23:16 +0000</updated>
                                            <version>2.0.0</version>
                                                    <component>Coprocessors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="15546126" author="anoop.hbase" created="Tue, 4 Oct 2016 17:53:50 +0000"  >&lt;p&gt;+1. Lets continue with 2.5 for the existing CPEPs.  &lt;/p&gt;</comment>
                            <comment id="15547689" author="ram_krish" created="Wed, 5 Oct 2016 05:05:14 +0000"  >&lt;p&gt;+1. Depreciation once we introduce it means we will have imports of both shaded and non-shaded protobuf package thro out 2.0 life cycle.  Better to remove them in 2.1?&lt;/p&gt;</comment>
                            <comment id="15547709" author="stack" created="Wed, 5 Oct 2016 05:16:46 +0000"  >&lt;p&gt;Yeah. Maybe it would be ok to do this in 2.1. They have been a blind spot for us up to this. They are not deserving of semver being internals so maybe we can cheat some on requiring a whole major version before we can do the removal (though depends on when there is an hbase3)&lt;/p&gt;</comment>
                            <comment id="15547791" author="ram_krish" created="Wed, 5 Oct 2016 06:06:21 +0000"  >&lt;p&gt;So atleast for the Table and Admin interfaces can we start the deprecate cycle through out the 2.0 life cycle and remove them in 3.0 so that all the imports in com.google.protobuf will be o.a.h.h.shaded.protobuf? It can also be done as part of this JIRA?&lt;/p&gt;</comment>
                            <comment id="15547850" author="stack" created="Wed, 5 Oct 2016 06:40:59 +0000"  >&lt;p&gt;This is a little tricky.&lt;/p&gt;

&lt;p&gt;Our Admin and Table will always refer to com.google.protobuf. We do not want to expose our internal protos, the stuff at o.a.h.h.shaded.*.&lt;/p&gt;

&lt;p&gt;What this issue is about is CPEPs that depend on pb2.5. They are dumped our CLASSPATH server-side as a jar that expects to find pb2.5 on the CLASSPATH. Somehow we have to give out the message that pb2.5 is going away server-side and that if a CPEP wants to use pb2.5 after a certain point, then they will have to bundle it themselves.&lt;/p&gt;</comment>
                            <comment id="15548553" author="ram_krish" created="Wed, 5 Oct 2016 12:23:16 +0000"  >&lt;blockquote&gt;&lt;p&gt;Our Admin and Table will always refer to com.google.protobuf. We do not want to expose our internal protos, the stuff at o.a.h.h.shaded.*.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Ok. I see. So any dependency on com.google.protobuf is fine and only the dependency on Protos is not good. In case of clients we have removed them but not in CPs as suggested in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-16769&quot; title=&quot;Deprecate/remove PB references from MasterObserver and RegionServerObserver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-16769&quot;&gt;HBASE-16769&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Somehow we have to give out the message that pb2.5 is going away server-side and that if a CPEP wants to use pb2.5 after a certain point, then they will have to bundle it themselves.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Reply&lt;br/&gt;
Ok.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 4 Oct 2016 17:53:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34fif:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>