<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:44:55 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-13602/HBASE-13602.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-13602] Add an option to fail wal recovery when lease recovery fails</title>
                <link>https://issues.apache.org/jira/browse/HBASE-13602</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Currently, if lease recovery doesn&apos;t succeed over an extended timeout (default 15 minutes), then we issue a log message about possible data loss and continue with recovering the edits in that file.&lt;/p&gt;

&lt;p&gt;In some deployments this potential for dataloss might be unacceptable. In those situations it would be good to have a configurable setting that marks the recovery failed instead. Should default to off (at least in branch-1)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12826341">HBASE-13602</key>
            <summary>Add an option to fail wal recovery when lease recovery fails</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="busbey">Sean Busbey</reporter>
                        <labels>
                            <label>operability</label>
                    </labels>
                <created>Thu, 30 Apr 2015 15:51:18 +0000</created>
                <updated>Sat, 18 Jun 2016 01:39:28 +0000</updated>
                                                            <fixVersion>2.0.0</fixVersion>
                    <fixVersion>1.4.0</fixVersion>
                                    <component>wal</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="14522048" author="ndimiduk" created="Thu, 30 Apr 2015 18:54:51 +0000"  >&lt;p&gt;Detecting and preserving data in a scenario of unintended data loss sounds like something we should do by default, even on branch-1.&lt;/p&gt;</comment>
                            <comment id="14522190" author="busbey" created="Thu, 30 Apr 2015 20:24:56 +0000"  >&lt;p&gt;I agree in principle but this has been the behavior since at least &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8449&quot; title=&quot;Refactor recoverLease retries and pauses informed by findings over in hbase-8389&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8449&quot;&gt;&lt;del&gt;HBASE-8449&lt;/del&gt;&lt;/a&gt;, which means all of 0.98.&lt;/p&gt;

&lt;p&gt;It&apos;s a big change in behavior to go from folks having slow-to-recover problems to hard-fail problems.&lt;/p&gt;</comment>
                            <comment id="14522258" author="enis" created="Thu, 30 Apr 2015 21:01:03 +0000"  >&lt;p&gt;Instead of new config, we can make it so that &lt;tt&gt;hbase.lease.recovery.timeout==0&lt;/tt&gt; means no timeout. &lt;/p&gt;</comment>
                            <comment id="14522265" author="busbey" created="Thu, 30 Apr 2015 21:02:41 +0000"  >&lt;p&gt;But that doesn&apos;t mark it failed, it just keeps it retrying. I&apos;d like to call things to the attention of an operator, since something probably needs to be done to e.g. ensure the RS is dead and then force recovery.&lt;/p&gt;</comment>
                            <comment id="14522270" author="busbey" created="Thu, 30 Apr 2015 21:04:41 +0000"  >&lt;p&gt;no timeout also has the same problem where folks who had slow-to-recover problems suddenly have hanging-forever problems.&lt;/p&gt;

&lt;p&gt;for example, the cluster I saw this on definitely wouldn&apos;t have data loss because I manually ssh&apos;d to each node and verified there were no old RS processes. my FileSystem instance was failing all lease recovery, so without the timeout it would never have recovered.&lt;/p&gt;</comment>
                            <comment id="14522483" author="enis" created="Thu, 30 Apr 2015 23:35:58 +0000"  >&lt;p&gt;What do you mean by failing the recovery process? You mean failing the task, to let it be executed from some other node? &lt;/p&gt;</comment>
                            <comment id="14543673" author="busbey" created="Thu, 14 May 2015 13:37:47 +0000"  >&lt;p&gt;Sure, that sounds reasonable as a first pass. I figured there had to be some &quot;failed&quot; state already, since there are already other problems that might come up. In this case, I suspect that operator intervention is necessary so if we don&apos;t already have a &quot;help please&quot; failure state, we should probably add one.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 30 Apr 2015 18:54:51 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 31 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2e5af:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>