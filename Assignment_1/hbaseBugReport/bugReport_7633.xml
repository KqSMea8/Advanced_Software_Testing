<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:47:35 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-7633/HBASE-7633.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-7633] Add a metric that tracks the current number of used RPC threads on the regionservers</title>
                <link>https://issues.apache.org/jira/browse/HBASE-7633</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;One way to detect that you&apos;re hitting a &quot;John Wayne&quot; disk&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; would be if we could see when region servers exhausted their RPC handlers. This would also be useful when tuning the cluster for your workload to make sure that reads or writes were not starving the other operations out.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://hbase.apache.org/book.html#bad.disk&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hbase.apache.org/book.html#bad.disk&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12628556">HBASE-7633</key>
            <summary>Add a metric that tracks the current number of used RPC threads on the regionservers</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="eclark">Elliott Clark</assignee>
                                    <reporter username="fwiffo">Joey Echeverria</reporter>
                        <labels>
                    </labels>
                <created>Mon, 21 Jan 2013 15:01:08 +0000</created>
                <updated>Thu, 15 Aug 2013 21:06:40 +0000</updated>
                            <resolved>Thu, 15 Aug 2013 21:06:40 +0000</resolved>
                                                                    <component>metrics</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="13558914" author="stack" created="Mon, 21 Jan 2013 17:07:16 +0000"  >&lt;p&gt;We have anything like this currently Mr Metric?&lt;/p&gt;</comment>
                            <comment id="13559080" author="eclark" created="Mon, 21 Jan 2013 20:43:44 +0000"  >&lt;p&gt;In 0.94 there&apos;s: &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;callQueueLen&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;In trunk there are a few more metrics:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;numCallsInGeneralQueue&lt;/li&gt;
	&lt;li&gt;numCallsInPriorityQueue&lt;/li&gt;
	&lt;li&gt;numCallsInReplicationQueue&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;While the don&apos;t tell you how many threads are currently running they do hint at if things are backing up.&lt;/p&gt;</comment>
                            <comment id="13559103" author="stack" created="Mon, 21 Jan 2013 21:09:33 +0000"  >&lt;p&gt;Given what Elliott says, can we close this &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fwiffo&quot; class=&quot;user-hover&quot; rel=&quot;fwiffo&quot;&gt;Joey Echeverria&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="13559106" author="fwiffo" created="Mon, 21 Jan 2013 21:14:25 +0000"  >&lt;p&gt;callQueueLen is close I think, but I&apos;m not sure how that translates into tuning hbase.regionserver.handler.count. Do we have a good example of interpreting that value?&lt;/p&gt;</comment>
                            <comment id="13559114" author="stack" created="Mon, 21 Jan 2013 21:22:47 +0000"  >&lt;blockquote&gt;&lt;p&gt;...translates into tuning hbase.regionserver.handler.count.  Do we have a good example of interpreting that value?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Not really other than if they are backed up frequently and we&apos;re not blocked on cpu or io, then bump them up (Is this for another issue &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fwiffo&quot; class=&quot;user-hover&quot; rel=&quot;fwiffo&quot;&gt;Joey Echeverria&lt;/a&gt;?)  Thanks boss.&lt;/p&gt;
</comment>
                            <comment id="13562861" author="fwiffo" created="Fri, 25 Jan 2013 17:36:28 +0000"  >&lt;p&gt;I still think a direct metric would be useful here. The issue where I saw this was a slowly dying disk caused a few region servers to slow way, way down. The client application was hammering HBase with new threads trying to write with no back pressure. The writers eventually exhausted the IPC threads on the region servers which blocked incoming reads. This situation would have been a bit more graceful if we could have alerted on the IPC threads getting exhausted.&lt;/p&gt;</comment>
                            <comment id="13563195" author="eclark" created="Sat, 26 Jan 2013 00:14:19 +0000"  >&lt;p&gt;That&apos;s exactly what call queue length would have shown.  It would normally show 0 and then as things get slower the queue length would grow as it approaches the max of ~500.&lt;/p&gt;

&lt;p&gt;The way I see it having all ipc threads full isn&apos;t a bad thing.  If the threads are answering requests at the same rate as they are coming in then having all the threads answering something is just fine.  The bad part was that they were all full and the number of requests waiting to be answered was growing.  hence the callQueueLength was what I would look at. &lt;/p&gt;</comment>
                            <comment id="13563231" author="stack" created="Sat, 26 Jan 2013 00:56:38 +0000"  >&lt;p&gt;Looks like we don&apos;t doc callQueueLen in refguide, not currently.  If we added it Joey, would that do to close this issue?  (Elliott, what is the metric&apos;s full name and I&apos;ll add the doc.)&lt;/p&gt;</comment>
                            <comment id="13563260" author="fwiffo" created="Sat, 26 Jan 2013 01:05:12 +0000"  >&lt;p&gt;Yes, if we added the docs for that with the info that Elliot just provided for how to interpret the results, that&apos;d be perfect. &lt;/p&gt;</comment>
                            <comment id="13741475" author="eclark" created="Thu, 15 Aug 2013 21:06:40 +0000"  >&lt;p&gt;0.96 will have descriptions of each of these metrics.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 21 Jan 2013 17:07:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>306645</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 18 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i19xzz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>266142</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>