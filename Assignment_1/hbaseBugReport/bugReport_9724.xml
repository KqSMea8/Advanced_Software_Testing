<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:07:00 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-9724/HBASE-9724.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-9724] Failed region split is not handled correctly by AM</title>
                <link>https://issues.apache.org/jira/browse/HBASE-9724</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;We ran into a case with ITLoadAndVerify with CM which left a region in RIT state, because the region failed a region SPLIT, but AM did not process this correctly. &lt;/p&gt;

&lt;p&gt;Region server attempting SPLIT and rollover: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2013-10-06 16:42:56,959 INFO  [Priority.RpcServer.handler=0,port=60020] regionserver.HRegionServer: Splitting IntegrationTestLoadAndVerify,/(k\xCA\x1A\xF2\x86\xB6,1381100194019.9608be62536a61444766da669e67d39e.
...
2013-10-06 16:43:01,480 INFO  [regionserver60020-splits-1381102351302] regionserver.SplitTransaction: Starting split of region IntegrationTestLoadAndVerify,/(k\xCA\x1A\xF2\x86\xB6,1381100194019.9608be62536a61444766da669e67d39e.
2013-10-06 16:43:01,480 DEBUG [regionserver60020-splits-1381102351302] regionserver.SplitTransaction: regionserver:60020-0x1418eb9f38301bb Creating ephemeral node &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 9608be62536a61444766da669e67d39e in SPLITTING state
2013-10-06 16:43:01,570 DEBUG [regionserver60020-splits-1381102351302] zookeeper.ZKAssign: regionserver:60020-0x1418eb9f38301bb Transitioning 9608be62536a61444766da669e67d39e from RS_ZK_REGION_SPLITTING to RS_ZK_REGION_SPLITTING
2013-10-06 16:43:01,607 DEBUG [regionserver60020-splits-1381102351302] zookeeper.ZKAssign: regionserver:60020-0x1418eb9f38301bb Transitioned node 9608be62536a61444766da669e67d39e from RS_ZK_REGION_SPLITTING to RS_ZK_REGION_SPLITTING
2013-10-06 16:43:01,607 DEBUG [regionserver60020-splits-1381102351302] zookeeper.ZKAssign: regionserver:60020-0x1418eb9f38301bb Transitioning 9608be62536a61444766da669e67d39e from RS_ZK_REGION_SPLITTING to RS_ZK_REGION_SPLITTING
2013-10-06 16:43:01,629 DEBUG [regionserver60020-splits-1381102351302] zookeeper.ZKAssign: regionserver:60020-0x1418eb9f38301bb Transitioned node 9608be62536a61444766da669e67d39e from RS_ZK_REGION_SPLITTING to RS_ZK_REGION_SPLITTING
2013-10-06 16:43:02,047 DEBUG [regionserver60020-splits-1381102351302] regionserver.HRegion: Closing IntegrationTestLoadAndVerify,/(k\xCA\x1A\xF2\x86\xB6,1381100194019.9608be62536a61444766da669e67d39e.: disabling compactions &amp;amp; flushes
2013-10-06 16:43:02,047 DEBUG [regionserver60020-splits-1381102351302] regionserver.HRegion: Updates disabled &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; region IntegrationTestLoadAndVerify,/(k\xCA\x1A\xF2\x86\xB6,1381100194019.9608be62536a61444766da669e67d39e.
2013-10-06 16:43:02,047 DEBUG [regionserver60020-splits-1381102351302] regionserver.HRegion: Started memstore flush &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; IntegrationTestLoadAndVerify,/(k\xCA\x1A\xF2\x86\xB6,1381100194019.9608be62536a61444766da669e67d39e., current region memstore size 4.4 M
2013-10-06 16:43:03,945 INFO  [regionserver60020-splits-1381102351302] regionserver.HRegion: Finished memstore flush of ~4.4 M/4607072, currentsize=0/0 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; region IntegrationTestLoadAndVerify,/(k\xCA\x1A\xF2\x86\xB6,1381100194019.9608be62536a61444766da669e67d39e. in 1898ms, sequenceid=6703616, compaction requested=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
2013-10-06 16:43:04,026 INFO  [StoreCloserThread-IntegrationTestLoadAndVerify,/(k\xCA\x1A\xF2\x86\xB6,1381100194019.9608be62536a61444766da669e67d39e.-1] regionserver.HStore: Closed f1
2013-10-06 16:43:04,027 INFO  [regionserver60020-splits-1381102351302] regionserver.HRegion: Closed IntegrationTestLoadAndVerify,/(k\xCA\x1A\xF2\x86\xB6,1381100194019.9608be62536a61444766da669e67d39e.
2013-10-06 16:43:36,938 INFO  [regionserver60020-splits-1381102351302] regionserver.SplitRequest: Running rollback/cleanup of failed split of IntegrationTestLoadAndVerify,/(k\xCA\x1A\xF2\x86\xB6,1381100194019.9608be62536a61444766da669e67d39e.; Took too &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; to split the files and create the references, aborting split
java.io.IOException: Took too &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; to split the files and create the references, aborting split
  at org.apache.hadoop.hbase.regionserver.SplitTransaction.splitStoreFiles(SplitTransaction.java:584)
  at org.apache.hadoop.hbase.regionserver.SplitTransaction.createDaughters(SplitTransaction.java:296)
  at org.apache.hadoop.hbase.regionserver.SplitTransaction.execute(SplitTransaction.java:465)
  at org.apache.hadoop.hbase.regionserver.SplitRequest.run(SplitRequest.java:82)
  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
  at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:722)
2013-10-06 16:43:37,482 INFO  [StoreOpener-9608be62536a61444766da669e67d39e-1] compactions.CompactionConfiguration: size [134217728, 9223372036854775807); files [3, 10); ratio 1.200000; off-peak ratio 5.000000; throttle point 2684354560; delete expired; major period 604800000, major jitter 0.500000
2013-10-06 16:43:37,509 DEBUG [StoreOpener-9608be62536a61444766da669e67d39e-1] regionserver.HStore: loaded hdfs:&lt;span class=&quot;code-comment&quot;&gt;//ambari-unsec-1381055459-hbase-1.cs1cloud.internal:8020/apps/hbase/data/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/IntegrationTestLoadAndVerify/9608be62536a61444766da669e67d39e/f1/12cecfd69b7948eb8bbf9bacc3d7fbb0, isReference=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, isBulkLoadResult=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, seqid=6703616, majorComp
&lt;/span&gt;2013-10-06 16:43:37,549 DEBUG [StoreOpener-9608be62536a61444766da669e67d39e-1] regionserver.HStore: loaded hdfs:&lt;span class=&quot;code-comment&quot;&gt;//ambari-unsec-1381055459-hbase-1.cs1cloud.internal:8020/apps/hbase/data/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/IntegrationTestLoadAndVerify/9608be62536a61444766da669e67d39e/f1/6b715040df9b424cbd3d01f36b34677b, isReference=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, isBulkLoadResult=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, seqid=6703217, majorComp
&lt;/span&gt;2013-10-06 16:43:37,588 DEBUG [StoreOpener-9608be62536a61444766da669e67d39e-1] regionserver.HStore: loaded hdfs:&lt;span class=&quot;code-comment&quot;&gt;//ambari-unsec-1381055459-hbase-1.cs1cloud.internal:8020/apps/hbase/data/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/IntegrationTestLoadAndVerify/9608be62536a61444766da669e67d39e/f1/97cbd5f18ee64e0aaf43f48b1d3fae73, isReference=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, isBulkLoadResult=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, seqid=6681405, majorComp
&lt;/span&gt;2013-10-06 16:43:37,630 DEBUG [StoreOpener-9608be62536a61444766da669e67d39e-1] regionserver.HStore: loaded hdfs:&lt;span class=&quot;code-comment&quot;&gt;//ambari-unsec-1381055459-hbase-1.cs1cloud.internal:8020/apps/hbase/data/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/IntegrationTestLoadAndVerify/9608be62536a61444766da669e67d39e/f1/a0d33ad9786d4a6fb6fa83b530cb5acd, isReference=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, isBulkLoadResult=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, seqid=6699746, majorComp
&lt;/span&gt;2013-10-06 16:43:37,676 DEBUG [StoreOpener-9608be62536a61444766da669e67d39e-1] regionserver.HStore: loaded hdfs:&lt;span class=&quot;code-comment&quot;&gt;//ambari-unsec-1381055459-hbase-1.cs1cloud.internal:8020/apps/hbase/data/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/IntegrationTestLoadAndVerify/9608be62536a61444766da669e67d39e/f1/c4ad2148624d42e6b8408b9b257a4c70, isReference=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, isBulkLoadResult=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, seqid=6689091, majorComp
&lt;/span&gt;2013-10-06 16:43:37,893 INFO  [regionserver60020-splits-1381102351302] regionserver.HRegionFileSystem: Cleaned up old failed split transaction detritus: hdfs:&lt;span class=&quot;code-comment&quot;&gt;//ambari-unsec-1381055459-hbase-1.cs1cloud.internal:8020/apps/hbase/data/data/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/IntegrationTestLoadAndVerify/9608be62536a61444766da669e67d39e/.splits
&lt;/span&gt;2013-10-06 16:43:37,937 INFO  [regionserver60020-splits-1381102351302] regionserver.HRegion: Onlined 9608be62536a61444766da669e67d39e; next sequenceid=6703617
2013-10-06 16:43:38,021 DEBUG [regionserver60020-splits-1381102351302] zookeeper.ZKAssign: regionserver:60020-0x1418eb9f38301bb Deleted unassigned node 9608be62536a61444766da669e67d39e in expected state RS_ZK_REGION_SPLITTING
2013-10-06 16:43:38,021 INFO  [regionserver60020-splits-1381102351302] regionserver.SplitRequest: Successful rollback of failed split of IntegrationTestLoadAndVerify,/(k\xCA\x1A\xF2\x86\xB6,1381100194019.9608be62536a61444766da669e67d39e.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The RS, 4 mins later will try to do another split, but it will fail to let master know so, because master still thinks the region is in RIT due to the first split. &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2013-10-06 16:43:01,606 DEBUG [AM.ZK.Worker-pool2-t202] master.AssignmentManager: Handling RS_ZK_REGION_SPLITTING, server=ambari-unsec-1381055459-hbase-5.cs1cloud.internal,60020,1381101889371, region=9608be62536a61444766da669e67d39e, current_state=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
2013-10-06 16:43:01,609 INFO  [AM.ZK.Worker-pool2-t202] master.RegionStates: Transitioned {9608be62536a61444766da669e67d39e state=OPEN, ts=1381102229682, server=ambari-unsec-1381055459-hbase-5.cs1cloud.internal,60020,1381101889371} to {9608be62536a61444766da669e67d39e state=SPLITTING, ts=1381102981609, server=ambari-unsec-1381055459-hbase-5.cs1cloud.internal,600
2013-10-06 16:43:01,634 DEBUG [AM.ZK.Worker-pool2-t203] master.AssignmentManager: Handling RS_ZK_REGION_SPLITTING, server=ambari-unsec-1381055459-hbase-5.cs1cloud.internal,60020,1381101889371, region=9608be62536a61444766da669e67d39e, current_state={9608be62536a61444766da669e67d39e state=SPLITTING, ts=1381102981609, server=ambari-unsec-1381055459-hbase-5.cs1cloud
2013-10-06 16:43:38,019 DEBUG [AM.ZK.Worker-pool2-t204] master.AssignmentManager: Znode IntegrationTestLoadAndVerify,/(k\xCA\x1A\xF2\x86\xB6,1381100194019.9608be62536a61444766da669e67d39e. deleted, state: {9608be62536a61444766da669e67d39e state=SPLITTING, ts=1381102981634, server=ambari-unsec-1381055459-hbase-5.cs1cloud.internal,60020,1381101889371}
2013-10-06 16:44:35,673 DEBUG [AM.ZK.Worker-pool2-t206] master.AssignmentManager: Handling RS_ZK_REGION_SPLITTING, server=ambari-unsec-1381055459-hbase-5.cs1cloud.internal,60020,1381101889371, region=ae22b90a3ddeb30c45c5735f7c855014, current_state=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
2013-10-06 16:44:35,673 INFO  [AM.ZK.Worker-pool2-t206] master.RegionStates: Transitioned {ae22b90a3ddeb30c45c5735f7c855014 state=OPEN, ts=1381102362273, server=ambari-unsec-1381055459-hbase-5.cs1cloud.internal,60020,1381101889371} to {ae22b90a3ddeb30c45c5735f7c855014 state=SPLITTING, ts=1381103075673, server=ambari-unsec-1381055459-hbase-5.cs1cloud.internal,600
2013-10-06 16:44:35,725 DEBUG [AM.ZK.Worker-pool2-t207] master.AssignmentManager: Handling RS_ZK_REGION_SPLITTING, server=ambari-unsec-1381055459-hbase-5.cs1cloud.internal,60020,1381101889371, region=ae22b90a3ddeb30c45c5735f7c855014, current_state={ae22b90a3ddeb30c45c5735f7c855014 state=SPLITTING, ts=1381103075673, server=ambari-unsec-1381055459-hbase-5.cs1cloud
2013-10-06 16:44:38,707 DEBUG [ambari-unsec-1381055459-hbase-1.cs1cloud.internal,60000,1381101554357-BalancerChore] master.HMaster: Not running balancer because 2 region(s) in transition: {9608be62536a61444766da669e67d39e={9608be62536a61444766da669e67d39e state=SPLITTING, ts=1381102981634, server=ambari-unsec-1381055459-hbase-5.cs1cloud.internal,60020,1381101889

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It seems that AM.nodeDeleted() does not revert the in-memory state for the region to be opened. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12672710">HBASE-9724</key>
            <summary>Failed region split is not handled correctly by AM</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="enis">Enis Soztutar</assignee>
                                    <reporter username="enis">Enis Soztutar</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Oct 2013 22:22:51 +0000</created>
                <updated>Fri, 20 Nov 2015 11:55:47 +0000</updated>
                            <resolved>Wed, 9 Oct 2013 23:02:48 +0000</resolved>
                                                    <fixVersion>0.98.0</fixVersion>
                    <fixVersion>0.96.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13789459" author="enis" created="Tue, 8 Oct 2013 18:05:18 +0000"  >&lt;p&gt;Here is an attempt for a fix. It seems that it solves the case in the unit test. Testing with ITTBLL with CM right now. &lt;/p&gt;
</comment>
                            <comment id="13789556" author="jxiang" created="Tue, 8 Oct 2013 19:07:04 +0000"  >&lt;p&gt;Good catch, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt;.  I can see there is also a similar issue with online merge.&lt;/p&gt;</comment>
                            <comment id="13789564" author="jxiang" created="Tue, 8 Oct 2013 19:12:22 +0000"  >&lt;p&gt;To fix the merge related issue, we need &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9696&quot; title=&quot;Master recovery ignores online merge znode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9696&quot;&gt;&lt;del&gt;HBASE-9696&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13789711" author="hadoopqa" created="Tue, 8 Oct 2013 21:18:14 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12607398/hbase-9724_v1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12607398/hbase-9724_v1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn site goal to fail.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7491//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7491//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7491//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7491//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7491//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7491//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7491//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7491//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7491//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7491//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7491//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7491//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7491//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7491//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7491//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7491//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7491//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7491//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7491//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7491//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7491//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7491//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13789721" author="enis" created="Tue, 8 Oct 2013 21:30:50 +0000"  >&lt;blockquote&gt;&lt;p&gt;I can see there is also a similar issue with online merge.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Agreed. I had looked at replicating the fix for merging state, but it seems that the semantics for region transitions are different for online merge. As far as I understand, the regions-to-be-merged are not put into merging state, but the newly created region is.  So, if merge is cancelled, merging region should be deleted I guess. &lt;/p&gt;

&lt;p&gt;I suggest we keep this issue to split only, and attack the issue at &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9696&quot; title=&quot;Master recovery ignores online merge znode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9696&quot;&gt;&lt;del&gt;HBASE-9696&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;</comment>
                            <comment id="13789732" author="jxiang" created="Tue, 8 Oct 2013 21:37:37 +0000"  >&lt;p&gt;Agreed. In patch v1, I think we should online the region only if the server is still online.&lt;/p&gt;</comment>
                            <comment id="13789914" author="enis" created="Wed, 9 Oct 2013 01:21:07 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think we should online the region only if the server is still online.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I think RegionStates.regionOnline() does that already, no? &lt;/p&gt;</comment>
                            <comment id="13789973" author="jxiang" created="Wed, 9 Oct 2013 03:07:30 +0000"  >&lt;p&gt;That&apos;s right. It will log a warning too.&lt;/p&gt;</comment>
                            <comment id="13789990" author="stack" created="Wed, 9 Oct 2013 03:32:09 +0000"  >&lt;p&gt;Looks reasonable to me.&lt;/p&gt;</comment>
                            <comment id="13790927" author="enis" created="Wed, 9 Oct 2013 22:32:39 +0000"  >&lt;p&gt;Attaching 0.96 version, which unfortunately cannot have the unit test because the coprocessor hook for injecting failure is not there.  &lt;/p&gt;

&lt;p&gt;Gonna commit this to trunk, but hold off on 0.96 version until a resolution to RC timeframe is reached. &lt;/p&gt;


</comment>
                            <comment id="13790968" author="enis" created="Wed, 9 Oct 2013 23:02:48 +0000"  >&lt;p&gt;Committed to trunk. &lt;/p&gt;</comment>
                            <comment id="13791103" author="hudson" created="Thu, 10 Oct 2013 02:09:41 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #785 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/785/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/785/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9724&quot; title=&quot;Failed region split is not handled correctly by AM&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9724&quot;&gt;&lt;del&gt;HBASE-9724&lt;/del&gt;&lt;/a&gt; Failed region split is not handled correctly by AM (enis: rev 1530826)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestSplitTransactionOnCluster.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13791161" author="hudson" created="Thu, 10 Oct 2013 03:47:50 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-TRUNK #4605 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4605/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4605/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9724&quot; title=&quot;Failed region split is not handled correctly by AM&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9724&quot;&gt;&lt;del&gt;HBASE-9724&lt;/del&gt;&lt;/a&gt; Failed region split is not handled correctly by AM (enis: rev 1530826)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestSplitTransactionOnCluster.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13791825" author="enis" created="Thu, 10 Oct 2013 18:41:33 +0000"  >&lt;p&gt;Committed this to 0.96 as well. &lt;/p&gt;</comment>
                            <comment id="13792010" author="hudson" created="Thu, 10 Oct 2013 21:34:46 +0000"  >&lt;p&gt;SUCCESS: Integrated in hbase-0.96 #132 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.96/132/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.96/132/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9724&quot; title=&quot;Failed region split is not handled correctly by AM&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9724&quot;&gt;&lt;del&gt;HBASE-9724&lt;/del&gt;&lt;/a&gt; Failed region split is not handled correctly by AM (enis: rev 1531070)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13792199" author="hudson" created="Fri, 11 Oct 2013 01:01:27 +0000"  >&lt;p&gt;SUCCESS: Integrated in hbase-0.96-hadoop2 #83 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.96-hadoop2/83/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.96-hadoop2/83/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9724&quot; title=&quot;Failed region split is not handled correctly by AM&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9724&quot;&gt;&lt;del&gt;HBASE-9724&lt;/del&gt;&lt;/a&gt; Failed region split is not handled correctly by AM (enis: rev 1531070)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15016576" author="lars_francke" created="Fri, 20 Nov 2015 11:55:47 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12607675" name="hbase-9724_v1-0.96.patch" size="1559" author="enis" created="Wed, 9 Oct 2013 22:32:39 +0000"/>
                            <attachment id="12607398" name="hbase-9724_v1.patch" size="6358" author="enis" created="Tue, 8 Oct 2013 18:05:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 8 Oct 2013 19:07:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>352333</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1oqvr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>352621</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>