<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:15:18 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4032/HBASE-4032.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4032] HBASE-451 improperly breaks public API HRegionInfo#getTableDesc</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4032</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;After &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-451&quot; title=&quot;Remove HTableDescriptor from HRegionInfo&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-451&quot;&gt;&lt;del&gt;HBASE-451&lt;/del&gt;&lt;/a&gt;, HRegionInfo#getTableDesc has been modified to always return &lt;tt&gt;null&lt;/tt&gt;. &lt;/p&gt;

&lt;p&gt;One immediate effect is broken unit tests.&lt;/p&gt;

&lt;p&gt;That aside, it is not in the spirit of deprecation to actually break the method until after the deprecation cycle, it&apos;s a bug.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12511517">HBASE-4032</key>
            <summary>HBASE-451 improperly breaks public API HRegionInfo#getTableDesc</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="apurtell">Andrew Purtell</reporter>
                        <labels>
                    </labels>
                <created>Sat, 25 Jun 2011 01:34:58 +0000</created>
                <updated>Fri, 20 Nov 2015 11:52:43 +0000</updated>
                            <resolved>Sun, 31 Jul 2011 14:38:38 +0000</resolved>
                                                    <fixVersion>0.92.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13054802" author="stack" created="Sat, 25 Jun 2011 02:34:28 +0000"  >&lt;p&gt;Let me fix this.   Thanks for fingering it Andy &lt;/p&gt;</comment>
                            <comment id="13060010" author="yuzhihong@gmail.com" created="Tue, 5 Jul 2011 17:15:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-451&quot; title=&quot;Remove HTableDescriptor from HRegionInfo&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-451&quot;&gt;&lt;del&gt;HBASE-451&lt;/del&gt;&lt;/a&gt; is an incompatible change.&lt;br/&gt;
I wonder why HRegionInfo#getTableDesc should return a meaningful table descriptor after the change where HRegionInfo no longer keeps reference to table descriptor.&lt;/p&gt;

&lt;p&gt;Unit test code has been retrofitted to not depend on HRegionInfo#getTableDesc.&lt;br/&gt;
I doubt user would write code that explicitly uses HRegionInfo#getTableDesc.&lt;/p&gt;</comment>
                            <comment id="13060055" author="iamknome" created="Tue, 5 Jul 2011 18:27:34 +0000"  >&lt;p&gt;Ted,&lt;/p&gt;

&lt;p&gt;Yes. That was the original idea behind the abrupt removal of this API and I totally agree on your interpretation that we might not be able to return the TableDesc from HRI directly with out adding some kludgey band-aid fix.&lt;/p&gt;

&lt;p&gt;I can explore a work around temporary hack to support this public API If there is a strong consensus on the need to support this API for one release.&lt;/p&gt;

&lt;p&gt;Stack?&lt;/p&gt;</comment>
                            <comment id="13060059" author="yuzhihong@gmail.com" created="Tue, 5 Jul 2011 18:32:54 +0000"  >&lt;p&gt;I am not sure Andrew wanted a &apos;hack&apos; when he created this JIRA.&lt;/p&gt;</comment>
                            <comment id="13071943" author="stack" created="Wed, 27 Jul 2011 19:46:22 +0000"  >&lt;p&gt;This is pretty horrid but might be enough?  What you think Andrew?&lt;/p&gt;</comment>
                            <comment id="13072168" author="yuzhihong@gmail.com" created="Thu, 28 Jul 2011 04:09:09 +0000"  >&lt;p&gt;The most common usage of HRegionInfo#getTableDesc is hri.getTableDesc().getNameAsString() which has equivalent in TRUNK already.&lt;br/&gt;
I think HRegionInfo#getTableDesc returning null is a fail-fast approach so that the caller knows alternative should be sought. This is better than a temporary solution which would cause performance issue.&lt;/p&gt;</comment>
                            <comment id="13072172" author="stack" created="Thu, 28 Jul 2011 04:25:00 +0000"  >&lt;p&gt;Whats the equivalent Ted?&lt;/p&gt;</comment>
                            <comment id="13072174" author="yuzhihong@gmail.com" created="Thu, 28 Jul 2011 04:42:51 +0000"  >&lt;p&gt;HRegionInfo#getTableNameAsString() can be used in place of hri.getTableDesc().getNameAsString()&lt;/p&gt;</comment>
                            <comment id="13072179" author="stack" created="Thu, 28 Jul 2011 05:01:16 +0000"  >&lt;p&gt;I could note that in the deprecated note AND leave this expensive call in place&lt;/p&gt;</comment>
                            <comment id="13072485" author="apurtell" created="Thu, 28 Jul 2011 19:00:55 +0000"  >&lt;p&gt;It is not &quot;deprecation&quot; to actually break a method until after a release cycle where the API in question is marked as deprecated. So either we agree that public APIs get deprecated, or our users have to assume that anything arbitrarily can break at every release.&lt;/p&gt;

&lt;p&gt;Returning null from a method that used to return a valid object is a no no. Substituting something that produces the same result but is more expensive is acceptable.&lt;/p&gt;</comment>
                            <comment id="13072487" author="apurtell" created="Thu, 28 Jul 2011 19:04:28 +0000"  >&lt;blockquote&gt;&lt;p&gt;Substituting something that produces the same result but is more expensive is acceptable.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;To be clear I mean the existing API stays in place, the thing you want to deprecate gets decorated with @Deprecated, and the implementation of it can change to do something expensive as necessary to maintain the current contract.&lt;/p&gt;</comment>
                            <comment id="13072488" author="stack" created="Thu, 28 Jul 2011 19:04:33 +0000"  >&lt;p&gt;Practise has been to deprecate and remove on next major release.  Lets keep it up.&lt;/p&gt;

&lt;p&gt;So sounds like you are +1 on patch Andrew?&lt;/p&gt;</comment>
                            <comment id="13072490" author="apurtell" created="Thu, 28 Jul 2011 19:08:39 +0000"  >&lt;p&gt;Not real happy with setTableDesc suddenly throwing UnsupportedOperationException instead of actually changing the HRI.&lt;/p&gt;</comment>
                            <comment id="13072495" author="stack" created="Thu, 28 Jul 2011 19:19:02 +0000"  >&lt;p&gt;np. let me fix.&lt;/p&gt;</comment>
                            <comment id="13072568" author="ghelmling" created="Thu, 28 Jul 2011 22:22:18 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Returning null from a method that used to return a valid object is a no no. Substituting something that produces the same result but is more expensive is acceptable.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I agree.  I would much rather have the deprecated method result in a expensive call which we can provide a javadoc warning for.&lt;/p&gt;

&lt;p&gt;Returning null forces any users to deal with a runtime issue with no warning due to the change.  I would rather even see us make a one-time exception to the deprecation rule and remove the the method entirely.  At least then it could be dealt with as a compile time issue.&lt;/p&gt;

&lt;p&gt;But would be best if we can keep the functionality in place as deprecated, even if it&apos;s a bit ugly and expensive.  Then we can remove on next release.&lt;/p&gt;</comment>
                            <comment id="13072992" author="stack" created="Fri, 29 Jul 2011 19:31:20 +0000"  >&lt;p&gt;Fix setTableDesc to do as it used to.  Added a unit test to prove that these new methods work as we&apos;d expect.&lt;/p&gt;</comment>
                            <comment id="13072993" author="stack" created="Fri, 29 Jul 2011 19:31:42 +0000"  >&lt;p&gt;Need a review please (and someone to commit if +1)&lt;/p&gt;</comment>
                            <comment id="13073003" author="yuzhihong@gmail.com" created="Fri, 29 Jul 2011 20:09:31 +0000"  >&lt;p&gt;There is already hbase/regionserver/TestHRegionInfo.java&lt;br/&gt;
Shall we name the test as hbase/regionserver/TestTableDescOfHRegionInfo.java ?&lt;/p&gt;</comment>
                            <comment id="13073011" author="stack" created="Fri, 29 Jul 2011 20:39:12 +0000"  >&lt;p&gt;Thats my bad.  Copy the method from o.a.h.h.THRI into o.a.h.h.r.THRI?&lt;/p&gt;</comment>
                            <comment id="13073031" author="yuzhihong@gmail.com" created="Fri, 29 Jul 2011 21:41:12 +0000"  >&lt;p&gt;Performed minor formatting.&lt;br/&gt;
The new test is added to TestHRegionInfo and it passes.&lt;/p&gt;</comment>
                            <comment id="13073280" author="hudson" created="Sun, 31 Jul 2011 02:07:10 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2065 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2065/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2065/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4032&quot; title=&quot;HBASE-451 improperly breaks public API HRegionInfo#getTableDesc&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4032&quot;&gt;&lt;del&gt;HBASE-4032&lt;/del&gt;&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-451&quot; title=&quot;Remove HTableDescriptor from HRegionInfo&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-451&quot;&gt;&lt;del&gt;HBASE-451&lt;/del&gt;&lt;/a&gt; improperly breaks public API HRegionInfo#getTableDesc&lt;/p&gt;

&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/HRegionInfo.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/test/java/org/apache/hadoop/hbase/regionserver/TestHRegionInfo.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15015812" author="lars_francke" created="Fri, 20 Nov 2015 11:52:43 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12388733">HBASE-451</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12488239" name="4032-v2.txt" size="4666" author="stack" created="Fri, 29 Jul 2011 19:31:20 +0000"/>
                            <attachment id="12488252" name="4032-v3.txt" size="4415" author="yuzhihong@gmail.com" created="Fri, 29 Jul 2011 22:00:18 +0000"/>
                            <attachment id="12488014" name="4032.txt" size="2162" author="stack" created="Wed, 27 Jul 2011 19:46:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 25 Jun 2011 02:34:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>27139</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hp33:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>101326</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>