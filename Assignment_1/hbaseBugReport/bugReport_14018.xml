<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:48:57 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-14018/HBASE-14018.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-14018] RegionServer is aborted when flushing memstore.</title>
                <link>https://issues.apache.org/jira/browse/HBASE-14018</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;+ Pseudo-distributed Hadoop (2.6.0), ZK_HBASE_MANAGE = true (1 master, 1 regionserver).&lt;br/&gt;
+ Put data to OpenTSDB, 1000 records / s, for 2000 seconds.&lt;br/&gt;
+ RegionServer is aborted.&lt;/p&gt;

&lt;p&gt;=== RegionServer logs ===&lt;br/&gt;
2015-07-03 16:37:37,332 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;LruBlockCacheStatsExecutor&amp;#93;&lt;/span&gt; hfile.LruBlockCache: totalSize=371.27 KB, freeSize=181.41 MB, max=181.78 MB, blockCount=5, accesses=1623, hits=172, hitRatio=10.60%, , cachingAccesses=177, cachingHits=151, cachingHitsRatio=85.31%, evictions=1139, evicted=21, evictedPerRun=0.018437225371599197&lt;br/&gt;
2015-07-03 16:37:37,898 INFO  &lt;a href=&quot;#0&quot;&gt;node1:16040Replication Statistics #0&lt;/a&gt; regionserver.Replication: Normal source for cluster 1: Total replicated edits: 2744, currently replicating from: hdfs://node1.vmcluster:9000/hbase/WALs/node1.vmcluster,16040,1435897652505/node1.vmcluster%2C16040%2C1435897652505.default.1435908458590 at position: 19207814&lt;/p&gt;

&lt;p&gt;2015-07-03 16:42:37,331 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;LruBlockCacheStatsExecutor&amp;#93;&lt;/span&gt; hfile.LruBlockCache: totalSize=371.27 KB, freeSize=181.41 MB, max=181.78 MB, blockCount=5, accesses=1624, hits=173, hitRatio=10.65%, , cachingAccesses=178, cachingHits=152, cachingHitsRatio=85.39%, evictions=1169, evicted=21, evictedPerRun=0.01796407252550125&lt;br/&gt;
2015-07-03 16:42:37,899 INFO  &lt;a href=&quot;#0&quot;&gt;node1:16040Replication Statistics #0&lt;/a&gt; regionserver.Replication: Normal source for cluster 1: Total replicated edits: 3049, currently replicating from: hdfs://node1.vmcluster:9000/hbase/WALs/node1.vmcluster,16040,1435897652505/node1.vmcluster%2C16040%2C1435897652505.default.1435908458590 at position: 33026416&lt;/p&gt;

&lt;p&gt;2015-07-03 16:43:27,217 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;MemStoreFlusher.1&amp;#93;&lt;/span&gt; regionserver.HRegion: Started memstore flush for tsdb,,1435897759785.2d49cd81fb6513f51af58bd0394c4e0d., current region memstore size 128.05 MB&lt;br/&gt;
2015-07-03 16:43:27,899 FATAL &lt;span class=&quot;error&quot;&gt;&amp;#91;MemStoreFlusher.1&amp;#93;&lt;/span&gt; regionserver.HRegionServer: ABORTING region server node1.vmcluster,16040,1435897652505: Replay of WAL required. Forcing server shutdown&lt;br/&gt;
org.apache.hadoop.hbase.DroppedSnapshotException: region: tsdb,,1435897759785.2d49cd81fb6513f51af58bd0394c4e0d.&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HRegion.internalFlushcache(HRegion.java:2001)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HRegion.internalFlushcache(HRegion.java:1772)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HRegion.flushcache(HRegion.java:1704)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.MemStoreFlusher.flushRegion(MemStoreFlusher.java:445)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.MemStoreFlusher.flushRegion(MemStoreFlusher.java:407)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.MemStoreFlusher.access$800(MemStoreFlusher.java:69)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.MemStoreFlusher$FlushHandler.run(MemStoreFlusher.java:225)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:745)&lt;br/&gt;
Caused by: java.lang.ArrayIndexOutOfBoundsException: -32743&lt;br/&gt;
	at org.apache.hadoop.hbase.CellComparator.getMinimumMidpointArray(CellComparator.java:478)&lt;br/&gt;
	at org.apache.hadoop.hbase.CellComparator.getMidpoint(CellComparator.java:448)&lt;br/&gt;
	at org.apache.hadoop.hbase.io.hfile.HFileWriterV2.finishBlock(HFileWriterV2.java:165)&lt;br/&gt;
	at org.apache.hadoop.hbase.io.hfile.HFileWriterV2.checkBlockBoundary(HFileWriterV2.java:146)&lt;br/&gt;
	at org.apache.hadoop.hbase.io.hfile.HFileWriterV2.append(HFileWriterV2.java:263)&lt;br/&gt;
	at org.apache.hadoop.hbase.io.hfile.HFileWriterV3.append(HFileWriterV3.java:87)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.StoreFile$Writer.append(StoreFile.java:932)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.StoreFlusher.performFlush(StoreFlusher.java:121)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.DefaultStoreFlusher.flushSnapshot(DefaultStoreFlusher.java:71)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HStore.flushCache(HStore.java:879)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HStore$StoreFlusherImpl.flushCache(HStore.java:2128)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HRegion.internalFlushcache(HRegion.java:1955)&lt;br/&gt;
	... 7 more&lt;br/&gt;
2015-07-03 16:43:27,901 FATAL &lt;span class=&quot;error&quot;&gt;&amp;#91;MemStoreFlusher.1&amp;#93;&lt;/span&gt; regionserver.HRegionServer: RegionServer abort: loaded coprocessors are: &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.hadoop.hbase.coprocessor.MultiRowMutationEndpoint&amp;#93;&lt;/span&gt;&lt;/p&gt;


&lt;p&gt;=== HMaster logs ===&lt;br/&gt;
2015-07-03 13:29:20,671 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;RegionOpenAndInitThread-tsdb-meta-1&amp;#93;&lt;/span&gt; regionserver.HRegion: creating HRegion tsdb-meta HTD == &apos;tsdb-meta&apos;, &lt;/p&gt;
{NAME =&amp;gt; &apos;name&apos;, BLOOMFILTER =&amp;gt; &apos;ROW&apos;, VERSIONS =&amp;gt; &apos;1&apos;, IN_MEMORY =&amp;gt; &apos;false&apos;, KEEP_DELETED_CELLS =&amp;gt; &apos;FALSE&apos;, DATA_BLOCK_ENCODING =&amp;gt; &apos;NONE&apos;, TTL =&amp;gt; &apos;FOREVER&apos;, COMPRESSION =&amp;gt; &apos;NONE&apos;, MIN_VERSIONS =&amp;gt; &apos;0&apos;, BLOCKCACHE =&amp;gt; &apos;true&apos;, BLOCKSIZE =&amp;gt; &apos;65536&apos;, REPLICATION_SCOPE =&amp;gt; &apos;1&apos;}
&lt;p&gt; RootDir = hdfs://node1.vmcluster:9000/hbase/.tmp Table name == tsdb-meta&lt;br/&gt;
2015-07-03 13:29:20,696 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;RegionOpenAndInitThread-tsdb-meta-1&amp;#93;&lt;/span&gt; regionserver.HRegion: Closed tsdb-meta,,1435897760624.0738e3fac8ffe40d656dc91588a47aac.&lt;br/&gt;
2015-07-03 13:29:20,703 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;MASTER_TABLE_OPERATIONS-node1:16020-0&amp;#93;&lt;/span&gt; hbase.MetaTableAccessor: Added 1&lt;br/&gt;
2015-07-03 13:29:20,704 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;MASTER_TABLE_OPERATIONS-node1:16020-0&amp;#93;&lt;/span&gt; master.AssignmentManager: Assigning 1 region(s) to node1.vmcluster,16040,1435897652505&lt;br/&gt;
2015-07-03 13:29:20,717 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;MASTER_TABLE_OPERATIONS-node1:16020-0&amp;#93;&lt;/span&gt; master.RegionStates: Transition &lt;/p&gt;
{0738e3fac8ffe40d656dc91588a47aac state=OFFLINE, ts=1435897760704, server=null}
&lt;p&gt; to &lt;/p&gt;
{0738e3fac8ffe40d656dc91588a47aac state=PENDING_OPEN, ts=1435897760717, server=node1.vmcluster,16040,1435897652505}&lt;br/&gt;
2015-07-03 13:29:20,729 WARN  &lt;span class=&quot;error&quot;&gt;&amp;#91;MASTER_TABLE_OPERATIONS-node1:16020-0&amp;#93;&lt;/span&gt; zookeeper.ZKTableStateManager: Moving table tsdb-meta state from ENABLING to ENABLED&lt;br/&gt;
2015-07-03 13:29:20,734 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;AM.ZK.Worker-pool2-t33&amp;#93;&lt;/span&gt; master.RegionStates: Transition {0738e3fac8ffe40d656dc91588a47aac state=PENDING_OPEN, ts=1435897760717, server=node1.vmcluster,16040,1435897652505}
&lt;p&gt; to &lt;/p&gt;
{0738e3fac8ffe40d656dc91588a47aac state=OPENING, ts=1435897760734, server=node1.vmcluster,16040,1435897652505}&lt;br/&gt;
2015-07-03 13:29:20,748 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;MASTER_TABLE_OPERATIONS-node1:16020-0&amp;#93;&lt;/span&gt; handler.CreateTableHandler: failed. null&lt;br/&gt;
2015-07-03 13:29:20,772 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;AM.ZK.Worker-pool2-t35&amp;#93;&lt;/span&gt; master.RegionStates: Transition {0738e3fac8ffe40d656dc91588a47aac state=OPENING, ts=1435897760734, server=node1.vmcluster,16040,1435897652505}
&lt;p&gt; to &lt;/p&gt;
{0738e3fac8ffe40d656dc91588a47aac state=OPEN, ts=1435897760772, server=node1.vmcluster,16040,1435897652505}
&lt;p&gt;2015-07-03 13:29:20,774 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;AM.ZK.Worker-pool2-t35&amp;#93;&lt;/span&gt; master.RegionStates: Onlined 0738e3fac8ffe40d656dc91588a47aac on node1.vmcluster,16040,1435897652505&lt;br/&gt;
2015-07-03 16:43:27,970 ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;B.defaultRpcServer.handler=15,queue=0,port=16020&amp;#93;&lt;/span&gt; master.MasterRpcServices: Region server node1.vmcluster,16040,1435897652505 reported a fatal error:&lt;br/&gt;
ABORTING region server node1.vmcluster,16040,1435897652505: Replay of WAL required. Forcing server shutdown&lt;br/&gt;
Cause:&lt;br/&gt;
org.apache.hadoop.hbase.DroppedSnapshotException: region: tsdb,,1435897759785.2d49cd81fb6513f51af58bd0394c4e0d.&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HRegion.internalFlushcache(HRegion.java:2001)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HRegion.internalFlushcache(HRegion.java:1772)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HRegion.flushcache(HRegion.java:1704)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.MemStoreFlusher.flushRegion(MemStoreFlusher.java:445)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.MemStoreFlusher.flushRegion(MemStoreFlusher.java:407)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.MemStoreFlusher.access$800(MemStoreFlusher.java:69)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.MemStoreFlusher$FlushHandler.run(MemStoreFlusher.java:225)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:745)&lt;br/&gt;
Caused by: java.lang.ArrayIndexOutOfBoundsException: -32743&lt;br/&gt;
	at org.apache.hadoop.hbase.CellComparator.getMinimumMidpointArray(CellComparator.java:478)&lt;br/&gt;
	at org.apache.hadoop.hbase.CellComparator.getMidpoint(CellComparator.java:448)&lt;br/&gt;
	at org.apache.hadoop.hbase.io.hfile.HFileWriterV2.finishBlock(HFileWriterV2.java:165)&lt;br/&gt;
	at org.apache.hadoop.hbase.io.hfile.HFileWriterV2.checkBlockBoundary(HFileWriterV2.java:146)&lt;br/&gt;
	at org.apache.hadoop.hbase.io.hfile.HFileWriterV2.append(HFileWriterV2.java:263)&lt;br/&gt;
	at org.apache.hadoop.hbase.io.hfile.HFileWriterV3.append(HFileWriterV3.java:87)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.StoreFile$Writer.append(StoreFile.java:932)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.StoreFlusher.performFlush(StoreFlusher.java:121)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.DefaultStoreFlusher.flushSnapshot(DefaultStoreFlusher.java:71)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HStore.flushCache(HStore.java:879)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HStore$StoreFlusherImpl.flushCache(HStore.java:2128)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HRegion.internalFlushcache(HRegion.java:1955)&lt;br/&gt;
	... 7 more&lt;/p&gt;

&lt;p&gt;2015-07-03 16:43:32,595 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;main-EventThread&amp;#93;&lt;/span&gt; zookeeper.RegionServerTracker: RegionServer ephemeral node deleted, processing expiration &lt;span class=&quot;error&quot;&gt;&amp;#91;node1.vmcluster,16040,1435897652505&amp;#93;&lt;/span&gt;&lt;br/&gt;
2015-07-03 16:43:32,611 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;MASTER_META_SERVER_OPERATIONS-node1:16020-0&amp;#93;&lt;/span&gt; handler.MetaServerShutdownHandler: Splitting hbase:meta logs for node1.vmcluster,16040,1435897652505&lt;br/&gt;
2015-07-03 16:43:32,627 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;MASTER_META_SERVER_OPERATIONS-node1:16020-0&amp;#93;&lt;/span&gt; master.SplitLogManager: dead splitlog workers &lt;span class=&quot;error&quot;&gt;&amp;#91;node1.vmcluster,16040,1435897652505&amp;#93;&lt;/span&gt;&lt;br/&gt;
2015-07-03 16:43:32,630 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;MASTER_META_SERVER_OPERATIONS-node1:16020-0&amp;#93;&lt;/span&gt; master.SplitLogManager: started splitting 1 logs in &lt;span class=&quot;error&quot;&gt;&amp;#91;hdfs://node1.vmcluster:9000/hbase/WALs/node1.vmcluster,16040,1435897652505-splitting&amp;#93;&lt;/span&gt; for &lt;span class=&quot;error&quot;&gt;&amp;#91;node1.vmcluster,16040,1435897652505&amp;#93;&lt;/span&gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;CentOS x64 Server&lt;/p&gt;</environment>
        <key id="12842524">HBASE-14018</key>
            <summary>RegionServer is aborted when flushing memstore.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="duong_dajgja">Dinh Duong Mai</reporter>
                        <labels>
                    </labels>
                <created>Fri, 3 Jul 2015 08:12:04 +0000</created>
                <updated>Sun, 5 Jul 2015 00:49:18 +0000</updated>
                            <resolved>Fri, 3 Jul 2015 17:42:47 +0000</resolved>
                                    <version>1.0.1.1</version>
                                                    <component>hadoop2</component>
                    <component>hbase</component>
                        <due>Fri, 3 Jul 2015 00:00:00 +0000</due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="14613001" author="duong_dajgja" created="Fri, 3 Jul 2015 08:32:49 +0000"  >&lt;p&gt;check at 2015-07-03 16:43:27&lt;/p&gt;</comment>
                            <comment id="14613346" author="apurtell" created="Fri, 3 Jul 2015 17:42:47 +0000"  >&lt;p&gt;Please mail user@hbase.apache.org for troubleshooting advice and help. This is the project dev tracker. Thanks!&lt;/p&gt;</comment>
                            <comment id="14613574" author="duong_dajgja" created="Sat, 4 Jul 2015 06:31:23 +0000"  >&lt;p&gt;I did. And I hope some one could help me.&lt;/p&gt;</comment>
                            <comment id="14614104" author="lhofhansl" created="Sun, 5 Jul 2015 00:49:18 +0000"  >&lt;blockquote&gt;&lt;p&gt;java.lang.ArrayIndexOutOfBoundsException: -32743&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Looks like a bug, I linked to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13329&quot; title=&quot;ArrayIndexOutOfBoundsException in CellComparator#getMinimumMidpointArray&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13329&quot;&gt;&lt;del&gt;HBASE-13329&lt;/del&gt;&lt;/a&gt;, let&apos;s fix it there.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12785274">HBASE-13329</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12743483" name="hbase-hadoop-master-node1.vmcluster.log" size="875857" author="duong_dajgja" created="Fri, 3 Jul 2015 08:32:49 +0000"/>
                            <attachment id="12743484" name="hbase-hadoop-regionserver-node1.vmcluster.log" size="249238" author="duong_dajgja" created="Fri, 3 Jul 2015 08:32:49 +0000"/>
                            <attachment id="12743485" name="hbase-hadoop-zookeeper-node1.vmcluster.log" size="323373" author="duong_dajgja" created="Fri, 3 Jul 2015 08:32:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 3 Jul 2015 17:42:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 23 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gtr3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>