<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 21:02:56 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-15385/HBASE-15385.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-15385] A failed atomic folder rename operation can never recovery for the destination file is deleted in Wasb filesystem</title>
                <link>https://issues.apache.org/jira/browse/HBASE-15385</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;When using Wsab file system, we found that a failed atomic folder rename operation can never recovery for the destination file deleted in Wasb filesystem. &lt;/p&gt;
{quota}
&lt;p&gt;ls: Attempting to complete rename of file hbase/azurtst-xiaomi/data/default/YCSBTest/.tabledesc during folder rename redo, and file was not found in source or destination.&lt;/p&gt;
&lt;blockquote&gt;&lt;/blockquote&gt;

&lt;p&gt;The reason is the the file is renamed to the destination file  before the crash, and the destination file is deleted by another process after crash. So the recovery is blocked during finishing the rename operation of this file when found the source and destination files all don&apos;t exist.&lt;/p&gt;

&lt;p&gt;See: NativeAzureFileSystem.java #finishSingleFileRename&lt;/p&gt;

&lt;p&gt;Another serious problem is that the recovery of atomic rename operation may delete new created file which is same name as the source file, because the file system don&apos;t check if there are rename operation need be redo.&lt;/p&gt;

&lt;p&gt;Suggestions are welcomed~&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12946545">HBASE-15385</key>
            <summary>A failed atomic folder rename operation can never recovery for the destination file is deleted in Wasb filesystem</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="liushaohui">Liu Shaohui</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Mar 2016 13:34:34 +0000</created>
                <updated>Fri, 21 Oct 2016 18:28:51 +0000</updated>
                            <resolved>Thu, 3 Mar 2016 14:03:34 +0000</resolved>
                                                                    <component>hadoop-azure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="15177822" author="liushaohui" created="Thu, 3 Mar 2016 13:37:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cnauroth&quot; class=&quot;user-hover&quot; rel=&quot;cnauroth&quot;&gt;Chris Nauroth&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15177837" author="liushaohui" created="Thu, 3 Mar 2016 14:03:14 +0000"  >&lt;p&gt;Sorry. It is a issue for Hadoop. Close it~&lt;/p&gt;</comment>
                            <comment id="15250506" author="hudson" created="Wed, 20 Apr 2016 18:58:00 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.3-IT #625 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3-IT/625/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3-IT/625/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15385&quot; title=&quot;A failed atomic folder rename operation can never recovery for the destination file is deleted in Wasb filesystem&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15385&quot;&gt;&lt;del&gt;HBASE-15385&lt;/del&gt;&lt;/a&gt; PREFETCH_BLOCKS_ON_OPEN in HColumnDescriptor is ignored (stack: rev 328c7c4c16201c5e022b6163c6f15b08a0971ea1)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileReaderV2.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestPrefetch.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/CacheConfig.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15250564" author="hudson" created="Wed, 20 Apr 2016 19:42:45 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-Trunk_matrix #858 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-Trunk_matrix/858/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-Trunk_matrix/858/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15385&quot; title=&quot;A failed atomic folder rename operation can never recovery for the destination file is deleted in Wasb filesystem&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15385&quot;&gt;&lt;del&gt;HBASE-15385&lt;/del&gt;&lt;/a&gt; PREFETCH_BLOCKS_ON_OPEN in HColumnDescriptor is ignored (stack: rev fa215a67e20da8c1a450b16db27c73ee3f9d02c0)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/CacheConfig.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestPrefetch.java&lt;/li&gt;
	&lt;li&gt;src/main/asciidoc/_chapters/performance.adoc&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileReaderImpl.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15250591" author="hudson" created="Wed, 20 Apr 2016 20:01:19 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.2-IT #486 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2-IT/486/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2-IT/486/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15385&quot; title=&quot;A failed atomic folder rename operation can never recovery for the destination file is deleted in Wasb filesystem&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15385&quot;&gt;&lt;del&gt;HBASE-15385&lt;/del&gt;&lt;/a&gt; PREFETCH_BLOCKS_ON_OPEN in HColumnDescriptor is ignored (stack: rev b2e0008cf34aaf6a41beff85c342b835493908f0)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/CacheConfig.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileReaderV2.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15250872" author="hudson" created="Wed, 20 Apr 2016 22:41:44 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.4 #104 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.4/104/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.4/104/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15385&quot; title=&quot;A failed atomic folder rename operation can never recovery for the destination file is deleted in Wasb filesystem&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15385&quot;&gt;&lt;del&gt;HBASE-15385&lt;/del&gt;&lt;/a&gt; PREFETCH_BLOCKS_ON_OPEN in HColumnDescriptor is ignored (stack: rev a331a57ef82b97995e50f917b678063aea941e22)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/CacheConfig.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestPrefetch.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileReaderV2.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15250963" author="hudson" created="Wed, 20 Apr 2016 23:43:01 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.3 #661 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3/661/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3/661/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15385&quot; title=&quot;A failed atomic folder rename operation can never recovery for the destination file is deleted in Wasb filesystem&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15385&quot;&gt;&lt;del&gt;HBASE-15385&lt;/del&gt;&lt;/a&gt; PREFETCH_BLOCKS_ON_OPEN in HColumnDescriptor is ignored (stack: rev 328c7c4c16201c5e022b6163c6f15b08a0971ea1)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/io/hfile/TestPrefetch.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileReaderV2.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/CacheConfig.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15251073" author="hudson" created="Thu, 21 Apr 2016 01:29:55 +0000"  >&lt;p&gt;ABORTED: Integrated in HBase-1.2 #605 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2/605/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2/605/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15385&quot; title=&quot;A failed atomic folder rename operation can never recovery for the destination file is deleted in Wasb filesystem&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15385&quot;&gt;&lt;del&gt;HBASE-15385&lt;/del&gt;&lt;/a&gt; PREFETCH_BLOCKS_ON_OPEN in HColumnDescriptor is ignored (stack: rev b2e0008cf34aaf6a41beff85c342b835493908f0)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/CacheConfig.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/io/hfile/HFileReaderV2.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15595943" author="mantonov" created="Fri, 21 Oct 2016 18:28:51 +0000"  >&lt;p&gt;FYI this commit actually refers to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15386&quot; title=&quot;PREFETCH_BLOCKS_ON_OPEN in HColumnDescriptor is ignored&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15386&quot;&gt;&lt;del&gt;HBASE-15386&lt;/del&gt;&lt;/a&gt;, bucket cache improvements.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 20 Apr 2016 18:58:00 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2u3jr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>