<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:18:06 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4347/HBASE-4347.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4347] Remove duplicated code from Put, Delete, Get, Scan, MultiPut</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4347</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;This came from discussion with Stack w.r.t. &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2195&quot; title=&quot;Support cyclic replication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2195&quot;&gt;&lt;del&gt;HBASE-2195&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;There is currently a lot of duplicated code especially between Put and Delete, and also between all Operations.&lt;br/&gt;
For example all of Put/Delete/Get/Scan have attributes with exactly the same code in all classes.&lt;br/&gt;
Put and Delete also have the familyMap, Row, Rowlock, Timestamp, etc.&lt;/p&gt;

&lt;p&gt;One way to do this is to introduce &quot;OperationWithAttributes&quot; which extends Operation, and have Put/Delete/Get/Scan extend that rather than Operation.&lt;br/&gt;
In addition Put and Delete could extends from Mutation (which itself would extend OperationWithAttributes).&lt;/p&gt;

&lt;p&gt;If a static inheritance hierarchy is not desired here, we can use delegation.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12521652">HBASE-4347</key>
            <summary>Remove duplicated code from Put, Delete, Get, Scan, MultiPut</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lhofhansl">Lars Hofhansl</assignee>
                                    <reporter username="lhofhansl">Lars Hofhansl</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Sep 2011 20:00:45 +0000</created>
                <updated>Fri, 20 Nov 2015 11:55:26 +0000</updated>
                            <resolved>Sat, 10 Sep 2011 17:57:35 +0000</resolved>
                                    <version>0.92.0</version>
                                    <fixVersion>0.92.0</fixVersion>
                                    <component>util</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13100605" author="lhofhansl" created="Thu, 8 Sep 2011 19:17:58 +0000"  >&lt;p&gt;This are the two things I have roughly in mind:&lt;br/&gt;
1. A simple OperationWithAttributes class (and Attributes interface) that all Operations that attributes extend (Get/Scan/Put/Delete).&lt;br/&gt;
2. A Mutation class. Extended by Put and Delete. All shared attributes are moved up into Mutation (as protected), and shared methods are move up.&lt;/p&gt;

&lt;p&gt;While doing this I noticed a bunch differences between Put and Delete:&lt;br/&gt;
o Put.toMap does not include the timestamp.&lt;br/&gt;
o Put also has no setter for timestamp&lt;br/&gt;
o Delete has no numFamilies method&lt;br/&gt;
o Delete has no heapSize method.&lt;/p&gt;</comment>
                            <comment id="13100608" author="lhofhansl" created="Thu, 8 Sep 2011 19:19:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2105&quot; title=&quot;All appends are serialized in HLog&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2105&quot;&gt;&lt;del&gt;HBASE-2105&lt;/del&gt;&lt;/a&gt; be checked in first, because it add new shared members between Put and Delete, that should be into Mutation.&lt;/p&gt;</comment>
                            <comment id="13100609" author="lhofhansl" created="Thu, 8 Sep 2011 19:19:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2195&quot; title=&quot;Support cyclic replication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2195&quot;&gt;&lt;del&gt;HBASE-2195&lt;/del&gt;&lt;/a&gt; that is.&lt;/p&gt;</comment>
                            <comment id="13100822" author="lhofhansl" created="Fri, 9 Sep 2011 00:38:26 +0000"  >&lt;p&gt;Patch rebased for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2195&quot; title=&quot;Support cyclic replication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2195&quot;&gt;&lt;del&gt;HBASE-2195&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
There is a &lt;b&gt;lot&lt;/b&gt; duplicate code removed now.&lt;/p&gt;</comment>
                            <comment id="13100940" author="stack" created="Fri, 9 Sep 2011 03:56:09 +0000"  >&lt;p&gt;Nice clean up Lars&lt;/p&gt;

&lt;p&gt;Mutation needs a license as does OperationWithAttributes and Attributes.&lt;/p&gt;

&lt;p&gt;I&apos;m +1 on commit.  I can add the licenses on commit.&lt;/p&gt;


</comment>
                            <comment id="13100942" author="stack" created="Fri, 9 Sep 2011 03:56:27 +0000"  >&lt;p&gt;Marking as patch available.&lt;/p&gt;</comment>
                            <comment id="13100957" author="lhofhansl" created="Fri, 9 Sep 2011 04:21:02 +0000"  >&lt;p&gt;I can add the licenses. I haven&apos;t run all tests, yet. (Functionally nothing should have changed, but I might have missed a detail).&lt;/p&gt;</comment>
                            <comment id="13101523" author="stack" created="Fri, 9 Sep 2011 20:00:37 +0000"  >&lt;p&gt;Mind running tests Lars?  I can fix license on commit.&lt;/p&gt;</comment>
                            <comment id="13101538" author="lhofhansl" created="Fri, 9 Sep 2011 20:25:09 +0000"  >&lt;p&gt;This change is causing a &lt;b&gt;significant&lt;/b&gt; slowdown in some of the tests. I must have missed something...&lt;br/&gt;
Will report back when I found the problem.&lt;/p&gt;</comment>
                            <comment id="13101557" author="lhofhansl" created="Fri, 9 Sep 2011 20:55:15 +0000"  >&lt;p&gt;Found the problem. I had accidentally written readFields(in) instead of readAttributes(in) in Scan.readFields(in). So that would just wait forever for the stream... Running tests now.&lt;/p&gt;</comment>
                            <comment id="13101726" author="lhofhansl" created="Sat, 10 Sep 2011 01:36:28 +0000"  >&lt;p&gt;New patch. Passes all test.&lt;br/&gt;
(That is, the few tests that fail locally, fail with or without the patch).&lt;/p&gt;</comment>
                            <comment id="13102094" author="stack" created="Sat, 10 Sep 2011 17:57:35 +0000"  >&lt;p&gt;Committed to TRUNK.  Thanks for the cleanup Lars.&lt;/p&gt;</comment>
                            <comment id="13102131" author="hudson" created="Sat, 10 Sep 2011 20:10:39 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2198 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2198/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2198/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4347&quot; title=&quot;Remove duplicated code from Put, Delete, Get, Scan, MultiPut&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4347&quot;&gt;&lt;del&gt;HBASE-4347&lt;/del&gt;&lt;/a&gt; Remove duplicated code from Put, Delete, Get, Scan, MultiPut&lt;/p&gt;

&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/Attributes.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/Delete.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/Get.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/Mutation.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/OperationWithAttributes.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/Put.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/Scan.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13102422" author="lhofhansl" created="Mon, 12 Sep 2011 04:57:07 +0000"  >&lt;p&gt;I forgot one thing:&lt;br/&gt;
move&lt;br/&gt;
  public static final String CLUSTER_ID_ATTR = &quot;&lt;em&gt;c.id&lt;/em&gt;&quot;;&lt;/p&gt;

&lt;p&gt;from HConstants to Mutation.&lt;/p&gt;

&lt;p&gt;Should I have a simple additional patch here, or a new issue, or just leave it?&lt;/p&gt;</comment>
                            <comment id="13103093" author="yuzhihong@gmail.com" created="Mon, 12 Sep 2011 21:47:07 +0000"  >&lt;p&gt;@Lars:&lt;br/&gt;
If you can attach addendum, I can commit it.&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="13103301" author="lhofhansl" created="Tue, 13 Sep 2011 03:23:57 +0000"  >&lt;p&gt;Thanks Ted. Here it is.&lt;/p&gt;</comment>
                            <comment id="13103314" author="yuzhihong@gmail.com" created="Tue, 13 Sep 2011 03:57:14 +0000"  >&lt;p&gt;Addendum integrated to TRUNK.&lt;/p&gt;</comment>
                            <comment id="13103411" author="hudson" created="Tue, 13 Sep 2011 06:57:02 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2203 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2203/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2203/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4347&quot; title=&quot;Remove duplicated code from Put, Delete, Get, Scan, MultiPut&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4347&quot;&gt;&lt;del&gt;HBASE-4347&lt;/del&gt;&lt;/a&gt; addendum that moves CLUSTER_ID_ATTR to Mutation&lt;/p&gt;

&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/HConstants.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/client/Mutation.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15016480" author="lars_francke" created="Fri, 20 Nov 2015 11:55:26 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12494169" name="4347-addendum.txt" size="1934" author="lhofhansl" created="Tue, 13 Sep 2011 03:23:57 +0000"/>
                            <attachment id="12493703" name="4347-v2.txt" size="37405" author="lhofhansl" created="Fri, 9 Sep 2011 00:38:26 +0000"/>
                            <attachment id="12493883" name="4347-v3.txt" size="40168" author="lhofhansl" created="Sat, 10 Sep 2011 01:36:28 +0000"/>
                            <attachment id="12493646" name="4347.txt" size="35200" author="lhofhansl" created="Thu, 8 Sep 2011 19:17:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 9 Sep 2011 03:56:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33505</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hqj3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>101560</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>