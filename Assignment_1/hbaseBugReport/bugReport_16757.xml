<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 21:17:31 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-16757/HBASE-16757.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-16757] Integrate functionality currently done up as Coprocessor Endpoints into core.</title>
                <link>https://issues.apache.org/jira/browse/HBASE-16757</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;As part of the work over in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15638&quot; title=&quot;Shade protobuf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15638&quot;&gt;&lt;del&gt;HBASE-15638&lt;/del&gt;&lt;/a&gt;, &quot;Shade Protobufs&quot;, I could not but help noticing that of the seven or eight Coprocessor Endpoints bundled with hbase, half should have been converted to be core long time again. In fact, some of these core CPEPs are no longer viable as CPEPs, if they ever were, given how intertwined with core they are.&lt;/p&gt;

&lt;p&gt;For example, MultiRowMutation, the nice CPEP that allows us do cross-row transactions used natively amending hbase:meta, has much of its facility baked into core without which it could not run. In an exercise, I was able to convert this one over without having to alter public APIs in Table or Admin.&lt;/p&gt;

&lt;p&gt;Auth, as pointed out by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbertozzi&quot; class=&quot;user-hover&quot; rel=&quot;mbertozzi&quot;&gt;Matteo Bertozzi&lt;/a&gt;, is not a Coprocessor Endpoint though it is cast as one invoked natively by RPC.&lt;/p&gt;

&lt;p&gt;VisibilityLabels is a CPEP but core types &amp;#8211; Query and Mutation &amp;#8211; actually depend on VisibiltyLabel related classes.&lt;/p&gt;

&lt;p&gt;SecureBulkLoad is not in any violation being a CPEP provided to add API ahead-of-time since properly deprecated and already integrated to core but I mention it here for completeness sake.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13009420">HBASE-16757</key>
            <summary>Integrate functionality currently done up as Coprocessor Endpoints into core.</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Oct 2016 05:09:56 +0000</created>
                <updated>Tue, 11 Oct 2016 23:06:52 +0000</updated>
                                                                            <component>Coprocessors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                            <comments>
                            <comment id="15544376" author="stack" created="Tue, 4 Oct 2016 05:15:25 +0000"  >&lt;p&gt;These CPEPs are impure because they are not separable from hbase-server/hbase-client because they make intimate use of internals. I tried to break them out but could not. We should try and talk up CPEPs being independent code as much as possible making use of hbase public APIs if only to inure against changes in internals.&lt;/p&gt;

&lt;p&gt;Good citizens are the Aggregation example CPEP and the RSGroup CPEPs. These I was able to extract from hbase-server/hbase-client.&lt;/p&gt;</comment>
                            <comment id="15546128" author="ghelmling" created="Tue, 4 Oct 2016 17:54:18 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Auth, as pointed out by Matteo Bertozzi, is not a Coprocessor Endpoint though it is cast as one invoked natively by RPC.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Not quite sure what you mean by this.  But, security makes use of two coprocessor services:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;AccessController - implements grant/revoke/list permissions/check permissions&lt;/li&gt;
	&lt;li&gt;TokenProvider - provides methods to obtain a delegation token as a cp service call against the meta region&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The TokenProvider methods could easily be moved into say the master APIs.  Originally it needed to be kept external as we had a separate RPC engine for secure authentication.&lt;/p&gt;

&lt;p&gt;The AccessController methods don&apos;t make sense outside of the authorization provided by AccessController.  I think it would make the most sense for moving those to be part of the work of pulling all of the authorization functionality into core and removing AccessController completely.&lt;/p&gt;</comment>
                            <comment id="15546399" author="stack" created="Tue, 4 Oct 2016 19:30:41 +0000"  >&lt;blockquote&gt;&lt;p&gt;Auth, as pointed out by Matteo Bertozzi, is not a Coprocessor Endpoint though it is cast as one invoked natively by RPC.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The above was my mistake (not &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbertozzi&quot; class=&quot;user-hover&quot; rel=&quot;mbertozzi&quot;&gt;Matteo Bertozzi&lt;/a&gt;&apos;s). Please forgive my messy understanding of what is going on here.&lt;/p&gt;

&lt;p&gt;Thanks for clarification &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ghelmling&quot; class=&quot;user-hover&quot; rel=&quot;ghelmling&quot;&gt;Gary Helmling&lt;/a&gt;.  Main point is that yeah, time to integrate these CPEPs as core. The TokenProvider is bound up in RPC at least. I could not move it out of the guts of hbase.  On AC CPEP, similar though I spent less effort on this one.&lt;/p&gt;</comment>
                            <comment id="15546507" author="ghelmling" created="Tue, 4 Oct 2016 20:09:01 +0000"  >&lt;p&gt;Yeah, TokenProvider with the use of TokenIdentifiers will be tightly tied up in RPC internals.&lt;/p&gt;

&lt;p&gt;What&apos;s the plan to manage the process of integrating these?  Create a separate sub-task per CPEP?  I can take a stab at integrating TokenProvider when I have some time.&lt;/p&gt;</comment>
                            <comment id="15546571" author="stack" created="Tue, 4 Oct 2016 20:30:46 +0000"  >&lt;p&gt;Sub-tasks off this issue seems good. No plan as yet. Just marking out that this needs to be done.&lt;/p&gt;</comment>
                            <comment id="15547674" author="jinghe" created="Wed, 5 Oct 2016 04:58:28 +0000"  >&lt;p&gt;Hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Do you have a list?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The TokenProvider methods could easily be moved.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I was thinking about doing this long ago.  TokenProvider is easily confusing from my experience and hard to explain to people why it needs to be additionally configured.&lt;/p&gt;
</comment>
                            <comment id="15547704" author="stack" created="Wed, 5 Oct 2016 05:14:49 +0000"  >&lt;p&gt;Of ones to convert, I have:&lt;/p&gt;

&lt;p&gt;+ TokenProvider&lt;br/&gt;
+ AccessControl&lt;br/&gt;
+ MultiRowMutation&lt;br/&gt;
+ VisibilityLabels&lt;/p&gt;

&lt;p&gt;Thats a start.&lt;/p&gt;

&lt;p&gt;There are other CPEPs but they seem fine as they are. There are three in the new hbase-coprocessor module and another out in hbase-examples. These latter can live apart from hbase-server and hbase-client though rsgroup could probably be made core at some point. The remaining serve as good examples of how to do a CPEP.&lt;/p&gt;</comment>
                            <comment id="15560761" author="jinghe" created="Sun, 9 Oct 2016 22:47:22 +0000"  >&lt;p&gt;I created two sub-tasks to cover TokenProvider and MultiRowMutation.  Apparently AccessController and VisibilityLabels controller need more thinking.&lt;/p&gt;</comment>
                            <comment id="15566905" author="stack" created="Tue, 11 Oct 2016 23:06:52 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jerryhe&quot; class=&quot;user-hover&quot; rel=&quot;jerryhe&quot;&gt;Jerry He&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12958287">HBASE-15638</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                            <subtask id="13010879">HBASE-16797</subtask>
                            <subtask id="13010880">HBASE-16798</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 4 Oct 2016 17:54:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34e8f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>