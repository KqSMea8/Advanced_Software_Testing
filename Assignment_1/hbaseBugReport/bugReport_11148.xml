<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:20:37 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-11148/HBASE-11148.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-11148] Provide a distributed procedure to globally roll logs</title>
                <link>https://issues.apache.org/jira/browse/HBASE-11148</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Propose a distributed procedure here to globally roll logs.&lt;br/&gt;
Currently HBaseAdmin and HBase shell provides a way to roll the WAL on a single RS.&lt;br/&gt;
Some use cases may require that all the RS roll the logs at the same time and in a coordinated way. Also there may be requirement that some tasks be done together with the roll log on each region server.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12713346">HBASE-11148</key>
            <summary>Provide a distributed procedure to globally roll logs</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="jinghe">Jerry He</assignee>
                                    <reporter username="jinghe">Jerry He</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 May 2014 17:12:50 +0000</created>
                <updated>Mon, 13 Apr 2015 17:49:19 +0000</updated>
                                                            <fixVersion>2.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>12</watches>
                                                                <comments>
                            <comment id="13995818" author="stack" created="Mon, 12 May 2014 23:37:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nidmhbase&quot; class=&quot;user-hover&quot; rel=&quot;nidmhbase&quot;&gt;Demai Ni&lt;/a&gt; Is there supposed to be a patch here sir?&lt;/p&gt;</comment>
                            <comment id="13995877" author="jinghe" created="Tue, 13 May 2014 00:37:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;&lt;br/&gt;
I will provide a patch shortly.&lt;/p&gt;</comment>
                            <comment id="13996529" author="nidmhbase" created="Tue, 13 May 2014 16:04:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jinghe&quot; class=&quot;user-hover&quot; rel=&quot;jinghe&quot;&gt;Jerry He&lt;/a&gt;, can we also have this one for 0.98? thanks... Demai&lt;/p&gt;</comment>
                            <comment id="14043346" author="jinghe" created="Wed, 25 Jun 2014 11:30:27 +0000"  >&lt;p&gt;Attached patch for master branch.&lt;/p&gt;</comment>
                            <comment id="14044395" author="jinghe" created="Thu, 26 Jun 2014 06:52:28 +0000"  >&lt;p&gt;Attached v2 that added a shell ruby command.&lt;/p&gt;</comment>
                            <comment id="14044399" author="jinghe" created="Thu, 26 Jun 2014 06:58:57 +0000"  >&lt;p&gt;Since the QA job has not been kicked off, I am pasting my local &apos;mvn test&apos; result here (with sun jdk 7):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[INFO] Reactor Summary:
[INFO]
[INFO] HBase ............................................. SUCCESS [  1.789 s]
[INFO] HBase - Common .................................... SUCCESS [ 23.715 s]
[INFO] HBase - Protocol .................................. SUCCESS [  0.282 s]
[INFO] HBase - Client .................................... SUCCESS [ 47.981 s]
[INFO] HBase - Hadoop Compatibility ...................... SUCCESS [  6.474 s]
[INFO] HBase - Hadoop Two Compatibility .................. SUCCESS [  1.418 s]
[INFO] HBase - Prefix Tree ............................... SUCCESS [  2.981 s]
[INFO] HBase - Server .................................... SUCCESS [42:25 min]
[INFO] HBase - Testing Util .............................. SUCCESS [  1.462 s]
[INFO] HBase - Thrift .................................... SUCCESS [01:38 min]
[INFO] HBase - Shell ..................................... SUCCESS [  0.994 s]
[INFO] HBase - Integration Tests ......................... SUCCESS [  0.910 s]
[INFO] HBase - Examples .................................. SUCCESS [  0.945 s]
[INFO] HBase - Assembly .................................. SUCCESS [  0.983 s]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 45:34 min
[INFO] Finished at: 2014-06-25T23:48:19-08:00
[INFO] Final Memory: 47M/329M
[INFO] ------------------------------------------------------------------------
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14044404" author="jinghe" created="Thu, 26 Jun 2014 07:04:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbertozzi&quot; class=&quot;user-hover&quot; rel=&quot;mbertozzi&quot;&gt;Matteo Bertozzi&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmhsieh&quot; class=&quot;user-hover&quot; rel=&quot;jmhsieh&quot;&gt;Jonathan Hsieh&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu&quot; class=&quot;user-hover&quot; rel=&quot;tedyu&quot;&gt;Ted Yu&lt;/a&gt;&lt;br/&gt;
Could you take a look?  Your comments are much appreciated.&lt;/p&gt;</comment>
                            <comment id="14044405" author="mbertozzi" created="Thu, 26 Jun 2014 07:07:12 +0000"  >&lt;p&gt;quick look at the code and looks ok, its kind of copy paste of what was done for the Flush.&lt;/p&gt;

&lt;p&gt;my main concern again is about the use of the Procedure for this kind of use.&lt;br/&gt;
If you have a failure on a RS, the client will receive an error but half of the logs may be rolled.&lt;/p&gt;</comment>
                            <comment id="14044433" author="jinghe" created="Thu, 26 Jun 2014 07:54:06 +0000"  >&lt;p&gt;Hi, Matteo&lt;/p&gt;

&lt;p&gt;Thanks for the comment.  I agree.&lt;br/&gt;
On the other  hand, Procedure is still a good mechanism for centrally kicked off tasks that need to be executed on RS in parallel.&lt;br/&gt;
We can discuss if we need its &apos;strong consistency&apos; (all have be successful to report success) &amp;#8211; whether this is needed in many use cases.&lt;br/&gt;
We can also improve it to allow and report partial success in the future.&lt;/p&gt;

&lt;p&gt;For this particular use case, do you see any potential problem?&lt;/p&gt;

&lt;p&gt;Reporting a overall error even when half RS are successful seem a little &apos;wasteful&apos;.  But it is consistent with the name of the API and command.&lt;br/&gt;
I can add comments in the API and command let user be aware.&lt;/p&gt;
</comment>
                            <comment id="14044814" author="yuzhihong@gmail.com" created="Thu, 26 Jun 2014 16:18:19 +0000"  >&lt;p&gt;lgtm&lt;/p&gt;

&lt;p&gt;There&apos;re some typo&apos;s, e.g. &quot;procdure&quot;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+          &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ForeignException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Interrupted &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; roll log procdure to finish&quot;&lt;/span&gt;, e);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Add annotation for audience:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; class RollLogSubprocedure &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Subprocedure {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Is the following method needed in RollLogSubprocedure ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void releaseBarrier() {
+    &lt;span class=&quot;code-comment&quot;&gt;// NO OP
&lt;/span&gt;+  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14044966" author="jmhsieh" created="Thu, 26 Jun 2014 18:13:19 +0000"  >&lt;p&gt;Please add docs or file a docs jira to add these commands to the hbase ref guide. I&apos;ll do a deeper review of the main patch later today.&lt;/p&gt;</comment>
                            <comment id="14060357" author="jinghe" created="Mon, 14 Jul 2014 05:38:11 +0000"  >&lt;p&gt;Ping &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmhsieh&quot; class=&quot;user-hover&quot; rel=&quot;jmhsieh&quot;&gt;Jonathan Hsieh&lt;/a&gt;.&lt;br/&gt;
Have you got a chance to review the patch?  Any additional comment?&lt;/p&gt;</comment>
                            <comment id="14168377" author="enis" created="Sat, 11 Oct 2014 22:03:24 +0000"  >&lt;p&gt;Ping &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmhsieh&quot; class=&quot;user-hover&quot; rel=&quot;jmhsieh&quot;&gt;Jonathan Hsieh&lt;/a&gt;. This looks like almost there. &lt;/p&gt;</comment>
                            <comment id="14168382" author="hadoopqa" created="Sat, 11 Oct 2014 22:11:49 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12652564/HBASE-11148-trunk-v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12652564/HBASE-11148-trunk-v2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12652564&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/11315//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/11315//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14484732" author="ndimiduk" created="Wed, 8 Apr 2015 05:20:21 +0000"  >&lt;p&gt;Any progress here? Would be good to get for 1.1.&lt;/p&gt;</comment>
                            <comment id="14491176" author="jinghe" created="Sat, 11 Apr 2015 20:04:33 +0000"  >&lt;p&gt;Hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;Nick Dimiduk&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I had a discussion with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbertozzi&quot; class=&quot;user-hover&quot; rel=&quot;mbertozzi&quot;&gt;Matteo Bertozzi&lt;/a&gt; a while ago on this one. This can be better done on top of the new Procedure2&lt;/p&gt;</comment>
                            <comment id="14492668" author="ndimiduk" created="Mon, 13 Apr 2015 17:00:59 +0000"  >&lt;p&gt;Makes sense. These patches no longer apply then? If not, please cancel patch status so it doesn&apos;t trigger my filter. Thanks.&lt;/p&gt;</comment>
                            <comment id="14492731" author="jinghe" created="Mon, 13 Apr 2015 17:49:19 +0000"  >&lt;p&gt;Canceled the patch.  Will revisit after Procedure2.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                            <outwardlinks description="requires">
                                        <issuelink>
            <issuekey id="12715209">HBASE-11201</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12718900">HBASE-11304</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12652391" name="HBASE-11148-trunk-v1.patch" size="23765" author="jinghe" created="Wed, 25 Jun 2014 11:28:43 +0000"/>
                            <attachment id="12652564" name="HBASE-11148-trunk-v2.patch" size="26288" author="jinghe" created="Thu, 26 Jun 2014 06:53:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 12 May 2014 23:37:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>391662</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 35 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1vgdr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>391874</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>