<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:27:02 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-11827/HBASE-11827.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-11827] Encryption support for bulkloading data into table with encryption configured for hfile format 3</title>
                <link>https://issues.apache.org/jira/browse/HBASE-11827</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The solution would be to add support to auto detect encryption parameters similar to other parameters like compression, datablockencoding, etc when encryption is enabled for hfile format 3. &lt;/p&gt;

&lt;p&gt;The current patch does the following:&lt;br/&gt;
1. Automatically detects encryption type and key in HFileOutputFormat &amp;amp; HFileOutputFormat2.&lt;br/&gt;
2. Uses Base64encoder/decoder for url passing of Encryption key which is in bytes format&lt;/p&gt;</description>
                <environment></environment>
        <key id="12736815">HBASE-11827</key>
            <summary>Encryption support for bulkloading data into table with encryption configured for hfile format 3</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="kashifjs@huawei.com">Kashif</assignee>
                                    <reporter username="kashifjs@huawei.com">Kashif</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Aug 2014 14:37:12 +0000</created>
                <updated>Tue, 4 Nov 2014 03:29:25 +0000</updated>
                                            <version>0.98.5</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>mapreduce</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="14110764" author="kashifjs@huawei.com" created="Tue, 26 Aug 2014 14:39:32 +0000"  >&lt;p&gt;Attaching patch for trunk. Please review&lt;/p&gt;</comment>
                            <comment id="14110765" author="kashifjs@huawei.com" created="Tue, 26 Aug 2014 14:40:11 +0000"  >&lt;p&gt;Attaching patch for 0.98 version also. Please review&lt;/p&gt;</comment>
                            <comment id="14110768" author="hadoopqa" created="Tue, 26 Aug 2014 14:44:18 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12664400/HBASE-11827-98-v1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12664400/HBASE-11827-98-v1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12664400&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10589//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10589//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14111660" author="apurtell" created="Wed, 27 Aug 2014 00:47:18 +0000"  >&lt;p&gt;The master key should not be available to any process or principal except the HBase service daemons and account. Therefore I think this issue is invalid. This patch would require the cluster master key be available to the potentially (i.e. probably) untrustworthy mapreduce execution environment.&lt;/p&gt;

&lt;p&gt;It&apos;s fine to bulk load unencrypted HFiles into an encrypted table. The regionservers determine on a per file basis if something is encrypted or not. The bulk loaded files, even though they are unencrypted in the beginning, can be read right alongside existing encrypted HFiles. To have the regionserver encrypt the newly loaded HFiles, trigger a major compaction. Understood that this requires a rewrite of the data that was just loaded in. It&apos;s necessary when only the regionservers are trusted with sensitive key material.&lt;/p&gt;</comment>
                            <comment id="14114996" author="kashifjs@huawei.com" created="Fri, 29 Aug 2014 07:50:45 +0000"  >&lt;p&gt;Agree with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=apurtell&quot; class=&quot;user-hover&quot; rel=&quot;apurtell&quot;&gt;Andrew Purtell&lt;/a&gt; that indeed it is a security glitch. &lt;/p&gt;</comment>
                            <comment id="14114997" author="kashifjs@huawei.com" created="Fri, 29 Aug 2014 07:52:45 +0000"  >&lt;p&gt;Is there no alternate way apart from triggering major compaction ? Because with several TB of data, rewriting data all again doesn&apos;t seems to be a good idea &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14118760" author="apurtell" created="Tue, 2 Sep 2014 21:13:49 +0000"  >&lt;blockquote&gt;&lt;p&gt;Is there no alternate way apart from triggering major compaction ? Because with several TB of data, rewriting data all again doesn&apos;t seems to be a good idea &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;One thing that comes to mind is a set of related changes:&lt;br/&gt;
1. Compaction policy is pluggable. Introduce a compaction policy plugin that selects unencrypted HFiles while avoiding rewrite of already encrypted files.&lt;br/&gt;
2. Extend the compaction request API so specifying a compaction policy per request is possible.&lt;br/&gt;
3. Add a compaction driver to EncryptionUtil in hbase-client that uses the above changes to submit compaction requests for unencrypted bulk loaded data. &lt;/p&gt;</comment>
                            <comment id="14155084" author="apurtell" created="Wed, 1 Oct 2014 16:41:56 +0000"  >&lt;p&gt;Push to 0.98.8&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12664400" name="HBASE-11827-98-v1.patch" size="27736" author="kashifjs@huawei.com" created="Tue, 26 Aug 2014 14:40:11 +0000"/>
                            <attachment id="12664399" name="HBASE-11827-trunk-v1.patch" size="27662" author="kashifjs@huawei.com" created="Tue, 26 Aug 2014 14:39:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 26 Aug 2014 14:44:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 11 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1zce7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>