<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:09:29 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-9992/HBASE-9992.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-9992] [hbck] Refactor so that arbitrary -D cmdline options are included </title>
                <link>https://issues.apache.org/jira/browse/HBASE-9992</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;A review of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9831&quot; title=&quot;&amp;#39;hbasefsck.numthreads&amp;#39; property isn&amp;#39;t passed to hbck via cmdline -D option&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9831&quot;&gt;&lt;del&gt;HBASE-9831&lt;/del&gt;&lt;/a&gt; pointed out the fact that -D options aren&apos;t being passed into the configuration object used by hbck.  This means overriding -D options will not work unless special hooks are for specific options.  A first attempt to fix this was in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9831&quot; title=&quot;&amp;#39;hbasefsck.numthreads&amp;#39; property isn&amp;#39;t passed to hbck via cmdline -D option&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9831&quot;&gt;&lt;del&gt;HBASE-9831&lt;/del&gt;&lt;/a&gt; but it affected many other files.&lt;/p&gt;

&lt;p&gt;The right approach would be to create a new HbckTool class that had the configured interface and change to existing HBaseFsck main to instantiate that to have it parse args, and then create the HBaseFsck object inside run.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12679810">HBASE-9992</key>
            <summary>[hbck] Refactor so that arbitrary -D cmdline options are included </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jmhsieh">Jonathan Hsieh</assignee>
                                    <reporter username="jmhsieh">Jonathan Hsieh</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 Nov 2013 20:29:25 +0000</created>
                <updated>Mon, 16 Dec 2013 18:46:38 +0000</updated>
                            <resolved>Sat, 23 Nov 2013 19:41:08 +0000</resolved>
                                    <version>0.96.0</version>
                    <version>0.94.13</version>
                                    <fixVersion>0.98.0</fixVersion>
                    <fixVersion>0.96.1</fixVersion>
                                    <component>hbck</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="13825754" author="ndimiduk" created="Mon, 18 Nov 2013 20:33:25 +0000"  >&lt;p&gt;Sounds like good cleanup.&lt;/p&gt;</comment>
                            <comment id="13825773" author="eclark" created="Mon, 18 Nov 2013 20:59:21 +0000"  >&lt;p&gt;AbstractHBaseTool ?&lt;/p&gt;</comment>
                            <comment id="13825929" author="jmhsieh" created="Mon, 18 Nov 2013 23:15:38 +0000"  >&lt;p&gt;I was thinking something much more localized &amp;#8211; an inner class that extends Tool and removing the tool base class from HBaseFsck.  All we really want is the conf file parser that tool provides.  Fixing it this way should mean we don&apos;t need to change tests.&lt;/p&gt;</comment>
                            <comment id="13826360" author="jmhsieh" created="Tue, 19 Nov 2013 10:06:35 +0000"  >&lt;p&gt;Patch is a revert of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9831&quot; title=&quot;&amp;#39;hbasefsck.numthreads&amp;#39; property isn&amp;#39;t passed to hbck via cmdline -D option&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9831&quot;&gt;&lt;del&gt;HBASE-9831&lt;/del&gt;&lt;/a&gt; and then the wrapping of the tool mentioned description.  &lt;/p&gt;

&lt;p&gt;Passes unit TestHBaseFsck.  Will test with -D params before committing.&lt;/p&gt;</comment>
                            <comment id="13826534" author="hadoopqa" created="Tue, 19 Nov 2013 14:11:13 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12614585/hbase-9992.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12614585/hbase-9992.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 10 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 1 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 site&lt;/font&gt;.  The patch appears to cause mvn site goal to fail.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7929//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7929//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7929//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7929//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7929//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7929//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7929//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7929//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7929//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7929//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7929//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7929//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7929//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7929//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7929//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7929//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7929//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7929//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7929//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7929//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/7929//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/7929//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13826715" author="ndimiduk" created="Tue, 19 Nov 2013 17:30:41 +0000"  >&lt;p&gt;So the wrapper class is to avoid changing tests? Is that a significant amount of cleanup? This approach seems hackish to me and threading the conf object through the layer looks error-prone.&lt;/p&gt;</comment>
                            <comment id="13826766" author="jmhsieh" created="Tue, 19 Nov 2013 18:10:28 +0000"  >&lt;p&gt;I don&apos;t see how this is hacky &amp;#8211; can you explain why. This approach now captures &lt;b&gt;all&lt;/b&gt; cases where configuration params from a -D at the command line get put into the conf.  If you look at the v3 version of the patch at &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9831&quot; title=&quot;&amp;#39;hbasefsck.numthreads&amp;#39; property isn&amp;#39;t passed to hbck via cmdline -D option&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9831&quot;&gt;&lt;del&gt;HBASE-9831&lt;/del&gt;&lt;/a&gt;. What I committed for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9831&quot; title=&quot;&amp;#39;hbasefsck.numthreads&amp;#39; property isn&amp;#39;t passed to hbck via cmdline -D option&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9831&quot;&gt;&lt;del&gt;HBASE-9831&lt;/del&gt;&lt;/a&gt; only &quot;caught&quot; the specific case mentioned in the &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9831&quot; title=&quot;&amp;#39;hbasefsck.numthreads&amp;#39; property isn&amp;#39;t passed to hbck via cmdline -D option&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9831&quot;&gt;&lt;del&gt;HBASE-9831&lt;/del&gt;&lt;/a&gt; case.&lt;/p&gt;

&lt;p&gt;Excluding the revert, here&apos;s the patch:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
diff --git a/hbase-server/src/main/java/org/apache/hadoop/hbase/util/HBaseFsck.java b/hbase-server/src/main/java/org/apache/hadoop/hbase/util
index 09e3acd..02c3b7a 100644
--- a/hbase-server/src/main/java/org/apache/hadoop/hbase/util/HBaseFsck.java
+++ b/hbase-server/src/main/java/org/apache/hadoop/hbase/util/HBaseFsck.java
@@ -164,7 +164,7 @@ &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; com.google.protobuf.ServiceException;
  */
 @InterfaceAudience.Public
 @InterfaceStability.Evolving
-&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; class HBaseFsck &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Configured &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; Tool {
+&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; class HBaseFsck &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Configured {
   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; DEFAULT_TIME_LAG = 60000; &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; value of 1 minute
&lt;/span&gt;   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; DEFAULT_SLEEP_BEFORE_RERUN = 10000;
   &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; MAX_NUM_THREADS = 50; &lt;span class=&quot;code-comment&quot;&gt;// #threads to contact regions
&lt;/span&gt;@@ -3590,15 +3590,23 @@ &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; class HBaseFsck &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Configured &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; Tool {
     URI defaultFs = hbasedir.getFileSystem(conf).getUri();
     FSUtils.setFsDefault(conf, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Path(defaultFs));
 
-    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; ret = ToolRunner.run(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HBaseFsck(conf), args);
+    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; ret = ToolRunner.run(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HBaseFsckTool(conf), args);
     &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.exit(ret);
   }
 
-  @Override
-  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; run(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
-    exec(executor, args);
-    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; getRetCode();
-  }
+  /**
+   * This is a Tool wrapper that gathers -Dxxx=yyy configuration settings from the command line.
+   */
+  &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; class HBaseFsckTool &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Configured &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; Tool {
+    HBaseFsckTool(Configuration conf) { &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;(conf); }
+    @Override
+    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; run(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
+      HBaseFsck hbck = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HBaseFsck(getConf());
+      hbck.exec(hbck.executor, args);
+      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; hbck.getRetCode();
+    }
+  };
+  
 
   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; HBaseFsck exec(ExecutorService exec, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; KeeperException, IOException,
     ServiceException, InterruptedException {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13826818" author="ndimiduk" created="Tue, 19 Nov 2013 18:59:30 +0000"  >&lt;p&gt;Hacky in that it does not follow the pattern of directly extending Tool. I agree that it&apos;s an improvement over the reverted special casing logic.&lt;/p&gt;</comment>
                            <comment id="13826929" author="jmhsieh" created="Tue, 19 Nov 2013 20:59:57 +0000"  >&lt;p&gt;Hm.. this is directly extending Tool, just with a static inner class. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;

&lt;p&gt;Do you have an alternate suggestion?&lt;/p&gt;</comment>
                            <comment id="13826936" author="ndimiduk" created="Tue, 19 Nov 2013 21:04:27 +0000"  >&lt;p&gt;Sure &amp;#8211; the class itself would extend Tool.&lt;/p&gt;</comment>
                            <comment id="13827885" author="jmhsieh" created="Wed, 20 Nov 2013 17:36:34 +0000"  >&lt;p&gt;So you means having HBaseFsck class extend Tool? That seems to leave us where we are before this jira&apos;s patch would be committed.  Are you suggesting to leave it as-is where we have to do the hacky -D param ?&lt;/p&gt;

&lt;p&gt;I think this patch&apos;s approach is actually pretty clean &amp;#8211; it is isolates the Tool class&apos;s -D parsing capabilities (between the constructor and the run call) and allows hbck instances used in other applications go on unchanged.  &lt;/p&gt;</comment>
                            <comment id="13827938" author="ndimiduk" created="Wed, 20 Nov 2013 18:27:12 +0000"  >&lt;p&gt;I take it all back. I thought there was a way to ensure argument parsing happens in the correct order, but to do so requires not passing &lt;tt&gt;conf&lt;/tt&gt; via constructor. Tool + Configured API is pretty bon-headed because it forces clients to not follow the RAII pattern.&lt;/p&gt;

&lt;p&gt;Yes, &quot;less hacky&quot; would be to directly extend &lt;tt&gt;Tool&lt;/tt&gt;, only make use of an empty constructor, and initializing the class from the &lt;tt&gt;run&lt;/tt&gt; method. Presumably that means callers from code are forced to invoke an external &lt;tt&gt;initialize&lt;/tt&gt; on their own. That is the pattern &lt;tt&gt;Tool&lt;/tt&gt; says you &quot;should&quot; do.&lt;/p&gt;

&lt;p&gt;Do as you will.&lt;/p&gt;</comment>
                            <comment id="13828203" author="jmhsieh" created="Wed, 20 Nov 2013 22:19:03 +0000"  >&lt;p&gt;Ok, tested against the hbasefsck.erroreporter param like so:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
bin/hbase hbck -Dhbasefsck.errorreporter=foo 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;hbasefsck.errorreporter is a conf variable, and with the param hbck it tries to class load foo.  It fail as it should:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.lang.RuntimeException: java.lang.RuntimeException: java.lang.ClassNotFoundException: foo
	at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:889)
	at org.apache.hadoop.hbase.util.HBaseFsck.getErrorReporter(HBaseFsck.java:2956)
	at org.apache.hadoop.hbase.util.HBaseFsck.&amp;lt;init&amp;gt;(HBaseFsck.java:268)
	at org.apache.hadoop.hbase.util.HBaseFsck$HBaseFsckTool.run(HBaseFsck.java:3604)
	at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
	at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)
	at org.apache.hadoop.hbase.util.HBaseFsck.main(HBaseFsck.java:3593)
Caused by: java.lang.RuntimeException: java.lang.ClassNotFoundException: foo
	at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:857)
	at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:881)
	... 6 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;Declaring success and will commit early tomorrow unless I hear otherwise.&lt;/p&gt;</comment>
                            <comment id="13828236" author="ndimiduk" created="Wed, 20 Nov 2013 22:49:19 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13830754" author="stack" created="Sat, 23 Nov 2013 19:41:08 +0000"  >&lt;p&gt;Committed to 0.96 and trunk for Jon.  Did not commit to 0.94.  Needs a bit of hackery to get it backported.&lt;/p&gt;</comment>
                            <comment id="13830782" author="hudson" created="Sat, 23 Nov 2013 22:12:36 +0000"  >&lt;p&gt;SUCCESS: Integrated in hbase-0.96 #201 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.96/201/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.96/201/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9992&quot; title=&quot;[hbck] Refactor so that arbitrary -D cmdline options are included &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9992&quot;&gt;&lt;del&gt;HBASE-9992&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;hbck&amp;#93;&lt;/span&gt; Refactor so that arbitrary -D cmdline options are included (stack: rev 1544869)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/main/java/org/apache/hadoop/hbase/util/HBaseFsck.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13830785" author="hudson" created="Sat, 23 Nov 2013 22:22:13 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-TRUNK #4694 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4694/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4694/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9992&quot; title=&quot;[hbck] Refactor so that arbitrary -D cmdline options are included &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9992&quot;&gt;&lt;del&gt;HBASE-9992&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;hbck&amp;#93;&lt;/span&gt; Refactor so that arbitrary -D cmdline options are included (stack: rev 1544870)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/util/HBaseFsck.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13830812" author="hudson" created="Sun, 24 Nov 2013 00:21:42 +0000"  >&lt;p&gt;SUCCESS: Integrated in hbase-0.96-hadoop2 #129 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.96-hadoop2/129/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.96-hadoop2/129/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9992&quot; title=&quot;[hbck] Refactor so that arbitrary -D cmdline options are included &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9992&quot;&gt;&lt;del&gt;HBASE-9992&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;hbck&amp;#93;&lt;/span&gt; Refactor so that arbitrary -D cmdline options are included (stack: rev 1544869)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.96/hbase-server/src/main/java/org/apache/hadoop/hbase/util/HBaseFsck.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13830821" author="hudson" created="Sun, 24 Nov 2013 01:16:24 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #849 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/849/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/849/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9992&quot; title=&quot;[hbck] Refactor so that arbitrary -D cmdline options are included &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9992&quot;&gt;&lt;del&gt;HBASE-9992&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;hbck&amp;#93;&lt;/span&gt; Refactor so that arbitrary -D cmdline options are included (stack: rev 1544870)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/util/HBaseFsck.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13836703" author="takeshi.miao" created="Mon, 2 Dec 2013 17:24:11 +0000"  >&lt;p&gt;@Jonathan Tks for your patch, I also learned from it !&lt;/p&gt;</comment>
                            <comment id="13849463" author="stack" created="Mon, 16 Dec 2013 18:46:38 +0000"  >&lt;p&gt;Released in 0.96.1.  Issue closed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12675449">HBASE-9831</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12614585" name="hbase-9992.patch" size="2933" author="jmhsieh" created="Tue, 19 Nov 2013 10:06:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 18 Nov 2013 20:33:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>359168</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1px1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>359467</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>