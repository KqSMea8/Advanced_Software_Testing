<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:56:12 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-8538/HBASE-8538.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-8538] HBaseAdmin#isTableEnabled() should check table existence before checking zk state.</title>
                <link>https://issues.apache.org/jira/browse/HBASE-8538</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;To avoid compatibility issues with older versions HBaseAdmin#isTableEnabled returning true even if the table state is null. Its also returning true even a table is not present. We should confirm table existence from .META. before checking in zk. If table not present or deleted, then It will throw TableNotFoundException.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12647343">HBASE-8538</key>
            <summary>HBaseAdmin#isTableEnabled() should check table existence before checking zk state.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rajesh23">rajeshbabu</assignee>
                                    <reporter username="rajesh23">rajeshbabu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 May 2013 18:02:10 +0000</created>
                <updated>Tue, 4 Jun 2013 00:07:01 +0000</updated>
                            <resolved>Fri, 17 May 2013 05:50:50 +0000</resolved>
                                                    <fixVersion>0.94.8</fixVersion>
                                    <component>Admin</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13656235" author="rajesh23" created="Mon, 13 May 2013 18:42:09 +0000"  >&lt;p&gt;Patch for 94.&lt;/p&gt;</comment>
                            <comment id="13656629" author="mbertozzi" created="Tue, 14 May 2013 01:49:08 +0000"  >&lt;p&gt;Why not fix the ZKTableReadOnly.isEnabledTable() called by connection.isTableEnabled()?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isEnabledTable(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; ZooKeeperWatcher zkw,
      &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; tableName) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; KeeperException {
    TableState state = getTableState(zkw, tableName);
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; state == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || state == TableState.ENABLED;
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13657323" author="rajesh23" created="Tue, 14 May 2013 18:17:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbertozzi&quot; class=&quot;user-hover&quot; rel=&quot;mbertozzi&quot;&gt;Matteo Bertozzi&lt;/a&gt;&lt;br/&gt;
If a table is ENABLED then we are removing table state znode in 0.92 but in 0.94 setting it to ENABLED.So checking like below is correct to handle compatibility issues with 0.92 clients(&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6710&quot; title=&quot;0.92/0.94 compatibility issues due to HBASE-5206&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6710&quot;&gt;&lt;del&gt;HBASE-6710&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6268&quot; title=&quot;Can&amp;#39;t enable a table on a 0.94 cluster from a 0.92 client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6268&quot;&gt;&lt;del&gt;HBASE-6268&lt;/del&gt;&lt;/a&gt;). &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; state == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || state == TableState.ENABLED;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Master always sees table state as ENABLED but client is missing table existence check that&apos;s why added table exists check in HBaseAdmin.&lt;/p&gt;

&lt;p&gt;Do I answer your question?&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="13657334" author="mbertozzi" created="Tue, 14 May 2013 18:28:58 +0000"  >&lt;p&gt;Ok, make sense to me. It will be nice have the comment above on ZKTableReadOnly.isEnabledTable().&lt;/p&gt;

&lt;p&gt;anyway, +1 on the patch with just the tableExists() check.&lt;/p&gt;</comment>
                            <comment id="13657339" author="yuzhihong@gmail.com" created="Tue, 14 May 2013 18:35:20 +0000"  >&lt;p&gt;@Rajesh:&lt;br/&gt;
Mind running your patch through 0.94 test suite and post the result ?&lt;/p&gt;</comment>
                            <comment id="13658458" author="rajesh23" created="Wed, 15 May 2013 15:29:33 +0000"  >&lt;p&gt;Here is the 0.94 test suite report with &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8538&quot; title=&quot;HBaseAdmin#isTableEnabled() should check table existence before checking zk state.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8538&quot;&gt;&lt;del&gt;HBASE-8538&lt;/del&gt;&lt;/a&gt;,&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8353&quot; title=&quot;-ROOT-/.META. regions are hanging if master restarted while closing -ROOT-/.META. regions on dead RS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8353&quot;&gt;&lt;del&gt;HBASE-8353&lt;/del&gt;&lt;/a&gt;,&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8422&quot; title=&quot;Master won&amp;#39;t go down.  Stuck waiting on .META. to come on line.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8422&quot;&gt;&lt;del&gt;HBASE-8422&lt;/del&gt;&lt;/a&gt; patches.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Running org.apache.hadoop.hbase.constraint.TestConstraint
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 28.714 sec

Results :

Tests run: 1354, Failures: 0, Errors: 0, Skipped: 13

[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1:41:40.269s
[INFO] Finished at: Wed May 15 20:52:06 IST 2013
[INFO] Final Memory: 23M/238M
[INFO] ------------------------------------------------------------------------
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13660360" author="lhofhansl" created="Fri, 17 May 2013 05:50:50 +0000"  >&lt;p&gt;Committed to 0.94 (including comment suggested by Matteo)&lt;/p&gt;</comment>
                            <comment id="13660418" author="hudson" created="Fri, 17 May 2013 07:04:29 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #143 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/143/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/143/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8538&quot; title=&quot;HBaseAdmin#isTableEnabled() should check table existence before checking zk state.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8538&quot;&gt;&lt;del&gt;HBASE-8538&lt;/del&gt;&lt;/a&gt; HBaseAdmin#isTableEnabled() should check table existence before checking zk state. (rajeshbabu) (Revision 1483657)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/client/HBaseAdmin.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/zookeeper/ZKTableReadOnly.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13660480" author="hudson" created="Fri, 17 May 2013 08:36:31 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #986 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/986/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/986/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8538&quot; title=&quot;HBaseAdmin#isTableEnabled() should check table existence before checking zk state.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8538&quot;&gt;&lt;del&gt;HBASE-8538&lt;/del&gt;&lt;/a&gt; HBaseAdmin#isTableEnabled() should check table existence before checking zk state. (rajeshbabu) (Revision 1483657)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/client/HBaseAdmin.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/zookeeper/ZKTableReadOnly.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/client/TestAdmin.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12582964" name="HBASE-8538_94.patch" size="1380" author="rajesh23" created="Mon, 13 May 2013 18:42:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 14 May 2013 01:49:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>327699</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 31 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1kjh3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>328043</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>