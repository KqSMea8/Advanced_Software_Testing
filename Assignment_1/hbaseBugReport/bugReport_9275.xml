<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:02:58 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-9275/HBASE-9275.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-9275] Basic table listings should use an unprivileged operation</title>
                <link>https://issues.apache.org/jira/browse/HBASE-9275</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;From the shell &quot;list&quot; operation, we see the &quot;user:namespace&quot; table included in results. This is different from retrieving a tabling listing from the REST service, which omits that table.&lt;/p&gt;

&lt;p&gt;The reason appears to be that hbase shell &quot;list&quot; command calls the deprecated &lt;tt&gt;HBaseAdmin#getTableNames(String)&lt;/tt&gt;, which invokes &lt;tt&gt;HMaster#getTableNames&lt;/tt&gt;. This implementation has different system table filtering logic from &lt;tt&gt;HMaster#getTableDescriptors&lt;/tt&gt;. The latter is the call underlying the REST implementation.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hbase(main):004:0&amp;gt; list
TABLE                                                                                                                                                                                                     
hbase:namespace                                                                                                                                                                                           
1 row(s) in 0.0390 seconds

=&amp;gt; #&amp;lt;#&amp;lt;Class:0x16309ee1&amp;gt;:0x66f11de2&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ curl http://localhost:8080/
$
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12664708">HBASE-9275</key>
            <summary>Basic table listings should use an unprivileged operation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ndimiduk">Nick Dimiduk</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Aug 2013 21:41:09 +0000</created>
                <updated>Wed, 21 Aug 2013 01:24:27 +0000</updated>
                            <resolved>Wed, 21 Aug 2013 01:24:12 +0000</resolved>
                                                                    <component>shell</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                            <comments>
                            <comment id="13745479" author="ndimiduk" created="Tue, 20 Aug 2013 21:43:36 +0000"  >&lt;p&gt;I propose the shell be updated to invoke &lt;tt&gt;HMaster#getTableDescriptors&lt;/tt&gt; and the logic common to the two method be refactored into a helper method so that both share the same implementation.&lt;/p&gt;

&lt;p&gt;Please advise.&lt;/p&gt;</comment>
                            <comment id="13745517" author="apurtell" created="Tue, 20 Aug 2013 22:10:29 +0000"  >&lt;blockquote&gt;&lt;p&gt;I propose the shell be updated to invoke HMaster#getTableDescriptors &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;GetTableDescriptors is a privileged operation while getTableNames is not. See &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9182&quot; title=&quot;Allow non-admin users to list all table names&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9182&quot;&gt;&lt;del&gt;HBASE-9182&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8692&quot; title=&quot;[AccessController] Restrict HTableDescriptor enumeration&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8692&quot;&gt;&lt;del&gt;HBASE-8692&lt;/del&gt;&lt;/a&gt;. What you are proposing is to revert &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9182&quot; title=&quot;Allow non-admin users to list all table names&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9182&quot;&gt;&lt;del&gt;HBASE-9182&lt;/del&gt;&lt;/a&gt;, in which case only shells with admin privilege can list tables. &lt;/p&gt;</comment>
                            <comment id="13745534" author="apurtell" created="Tue, 20 Aug 2013 22:22:52 +0000"  >&lt;p&gt;It may be enough to update getTableNames/listTableNames to filter tables using isSystemTable instead of isMetaTable. Let me try that.&lt;/p&gt;</comment>
                            <comment id="13745536" author="ndimiduk" created="Tue, 20 Aug 2013 22:24:52 +0000"  >&lt;p&gt;I believe inclusion of &quot;hbase:namespace&quot; is incorrect behavior. Is this not the case?&lt;/p&gt;

&lt;p&gt;Instead, I propose modifying &lt;a href=&quot;https://github.com/apache/hbase/blob/0.95.2/hbase-client/src/main/java/org/apache/hadoop/hbase/HTableDescriptor.java#L423-L430&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;&lt;tt&gt;HTableDescriptor#isMetaTable()&lt;/tt&gt;&lt;/a&gt; to also exclude any table in the &quot;hbase&quot; namespace, effectively honoring !&lt;a href=&quot;https://github.com/apache/hbase/blob/0.95.2/hbase-client/src/main/java/org/apache/hadoop/hbase/HTableDescriptor.java#L432-L442&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;&lt;tt&gt;HTableDescriptor#isSystemTable(String)&lt;/tt&gt;&lt;/a&gt;. This is the logic performed in this branch of &lt;a href=&quot;https://github.com/apache/hbase/blob/0.95.2/hbase-server/src/main/java/org/apache/hadoop/hbase/master/HMaster.java#L2596-L2602&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;&lt;tt&gt;HMaster#getTableDescriptors(RpcController,GetTableDescriptorsReq)&lt;/tt&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13745540" author="ndimiduk" created="Tue, 20 Aug 2013 22:27:10 +0000"  >&lt;p&gt;Thanks for the reference to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9273&quot; title=&quot;Consolidate isSystemTable checking&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9273&quot;&gt;&lt;del&gt;HBASE-9273&lt;/del&gt;&lt;/a&gt;. I&apos;ll wait for its resolution before making further proposals.&lt;/p&gt;</comment>
                            <comment id="13745549" author="apurtell" created="Tue, 20 Aug 2013 22:30:31 +0000"  >&lt;blockquote&gt;&lt;p&gt;I believe inclusion of &quot;hbase:namespace&quot; is incorrect behavior. Is this not the case?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Namespaces is new to me. I would say it looks wrong but can&apos;t say if intended. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Instead, I propose modifying HTableDescriptor#isMetaTable() to also exclude any table in the &quot;hbase&quot; namespace, effectively honoring !HTableDescriptor#isSystemTable(String).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That just went away over in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9273&quot; title=&quot;Consolidate isSystemTable checking&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9273&quot;&gt;&lt;del&gt;HBASE-9273&lt;/del&gt;&lt;/a&gt;. Let me put up a patch here in a few minutes that changes getTableNames/listTableNames to what you propose and also updates REST and let&apos;s go from there.&lt;/p&gt;




</comment>
                            <comment id="13745557" author="apurtell" created="Tue, 20 Aug 2013 22:37:10 +0000"  >&lt;p&gt;Split into subtasks.&lt;/p&gt;</comment>
                            <comment id="13745567" author="ndimiduk" created="Tue, 20 Aug 2013 22:41:28 +0000"  >&lt;p&gt;I already have the patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9276&quot; title=&quot;List tables API should filter with isSystemTable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9276&quot;&gt;&lt;del&gt;HBASE-9276&lt;/del&gt;&lt;/a&gt; if you&apos;re interested. It&apos;s a one-liner.&lt;/p&gt;</comment>
                            <comment id="13745570" author="apurtell" created="Tue, 20 Aug 2013 22:42:33 +0000"  >&lt;blockquote&gt;&lt;p&gt;I already have the patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9276&quot; title=&quot;List tables API should filter with isSystemTable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9276&quot;&gt;&lt;del&gt;HBASE-9276&lt;/del&gt;&lt;/a&gt; if you&apos;re interested. It&apos;s a one-liner. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sure, reassigned.&lt;/p&gt;</comment>
                            <comment id="13745615" author="ndimiduk" created="Tue, 20 Aug 2013 23:25:57 +0000"  >&lt;p&gt;Updating title to more accurately reflect the changes.&lt;/p&gt;</comment>
                            <comment id="13745693" author="apurtell" created="Wed, 21 Aug 2013 01:24:12 +0000"  >&lt;p&gt;All subtasks resolved.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12664653">HBASE-9273</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                            <subtask id="12664718">HBASE-9276</subtask>
                            <subtask id="12664719">HBASE-9277</subtask>
                            <subtask id="12664723">HBASE-9279</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 20 Aug 2013 22:10:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>344651</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 17 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1nfnb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>344951</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>