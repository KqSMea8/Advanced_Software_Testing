<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:09:33 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-3361/HBASE-3361.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-3361] Modularize Maven Structure for Tests</title>
                <link>https://issues.apache.org/jira/browse/HBASE-3361</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;There&apos;s a few reasons to break tests out into their own module:&lt;br/&gt;
1. Allowing maven users to easily re-consume test utilities as part of a &quot;test&quot; package which doesn&apos;t pollute the runtime classpath&lt;br/&gt;
2. Putting integration tests (tests that create or require a cluster) in their own module allows users to easily rebuild and test the core of HBase without running long-running tests, reducing the developer iteration loop&lt;/p&gt;

&lt;p&gt;After some discussions with Stack on IRC, it sounds like there was some historic investigation of this which was abandoned because the module system was becoming too complex. I&apos;d suggest that rather than trying to break out components all at once into their modules, evaluate creation of modules on a case-by-case basis and only create them when there&apos;s a significant use case justification.&lt;/p&gt;

&lt;p&gt;I created a sample of what I&apos;m thinking about (based on the current trunk) and posted it on github&lt;br/&gt;
git://github.com/ekohlwey/modularized-hbase.git&lt;/p&gt;</description>
                <environment></environment>
        <key id="12493263">HBASE-3361</key>
            <summary>Modularize Maven Structure for Tests</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="jmhsieh">Jonathan Hsieh</assignee>
                                    <reporter username="ekohlwey">Ed Kohlwey</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Dec 2010 03:13:39 +0000</created>
                <updated>Thu, 7 Aug 2014 20:41:03 +0000</updated>
                            <resolved>Thu, 7 Aug 2014 20:40:59 +0000</resolved>
                                                                    <component>documentation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="12971792" author="stack" created="Wed, 15 Dec 2010 19:18:32 +0000"  >&lt;p&gt;I took a look (thanks for doing this Ed).  So yeah, you are adding two modules &amp;#8211; hbase and test.  The names ain&apos;t too pretty (smile).  Hadoop is not factored this way, right?  Can we have a submodule of primary module in maven so only tests went into hbase-tests?  Just asking.  &lt;a href=&quot;https://github.com/ekohlwey/modularized-hbase&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/ekohlwey/modularized-hbase&lt;/a&gt; seems to be the URL that works for me to your repo.  We could do this for 0.92 I&apos;d say.  Need to get others to check this out.&lt;/p&gt;</comment>
                            <comment id="12971934" author="ekohlwey" created="Thu, 16 Dec 2010 01:49:15 +0000"  >&lt;p&gt;Can you clarify your question about Hadoop? They do have a separate package in central that they put their integration testing utilities in (called org.apache.hadoop.hadoop-test), so from an end user perspective its the same.&lt;/p&gt;

&lt;p&gt;From the hadoop/hbase developers perspective, it isn&apos;t the same, but they&apos;re using a completely different build tool (ivy + ant) that doesn&apos;t really have the same notion of multi-module builds, so its sort of apples and oranges. By using maven, HBase is sacrificing some of the flexibility that comes from a very free-form build tool like ant, and trading it for less configuration. Hadoop&apos;s build scripts are (IMHO) quite complicated.&lt;/p&gt;

&lt;p&gt;There should probably be some discussion of how to split tests. In my view there&apos;s three options:&lt;br/&gt;
1. What I currently have in github: a test module and hbase module. The hbase module has unit tests (tests that don&apos;t require a &quot;live&quot; cluster to be running) and the test module includes integration testing utilities that it publishes as artifacts, and its OWN tests are the integration tests. I like this because its just not very many modules.&lt;br/&gt;
2. Same as above but move all tests into the test module. I guess this is ok too, but I feel like it might encourage to develop in the hbase module without running any tests, which might not be the right thing.&lt;br/&gt;
3. Have three modules: the core, the one that is used to publish testing utilities as an artifact, and one that actually has the tests. IMHO at this point you&apos;re getting to the point of excessive complication.&lt;/p&gt;</comment>
                            <comment id="12971964" author="stack" created="Thu, 16 Dec 2010 05:32:35 +0000"  >&lt;p&gt;ivy is an abomination.  ant is too but everyone is doing it (smile).&lt;/p&gt;

&lt;p&gt;You reminded me that hadoop build mess is ant+ivy-based.  I forgot for a second.&lt;/p&gt;

&lt;p&gt;On 1. above, &quot;The hbase module has unit tests (tests that don&apos;t require a &quot;live&quot; cluster to be running) and the test module includes integration testing utilities that it publishes as artifacts, and its OWN tests are the integration tests. I like this because its just not very many modules.&quot; strikes me as artificial and difficult to uphold.  2. sounds better. &lt;/p&gt;

&lt;p&gt;3. is what we used to have (If you dig back in history, you&apos;ll trip over it).&lt;/p&gt;

&lt;p&gt;But truth be told, I don&apos;t like 1., 2., or 3.  I want our layout to be as it is currently but sounds like maven would force us have another.&lt;/p&gt;

&lt;p&gt;In maven, for one module only projects, the produced jar usually includes tests or not?&lt;/p&gt;

&lt;p&gt;Do you think downstream folks want tests + testing facility like HBaseTestingUtility or do they just need the latter?  If so, then what about a refactor to add those items from src/test into our produced jar and no hbase-test?&lt;/p&gt;

&lt;p&gt;Just exploring options.  Thanks Ed.&lt;/p&gt;</comment>
                            <comment id="12972077" author="ekohlwey" created="Thu, 16 Dec 2010 13:34:43 +0000"  >&lt;p&gt;Yeah, unfortunately maven does sort of force your hand on these things.&lt;/p&gt;

&lt;p&gt;I would imagine downstream users only want the test utilities (thats the only thing I want). If we just put the tests in hbase-test/src/test then the tests will have access to the test utilities (located in hbase-test/src/main ) and won&apos;t be published with the actual utility artifact. Based off of your input, this might be the best way to do it.&lt;/p&gt;</comment>
                            <comment id="12972110" author="lars_francke" created="Thu, 16 Dec 2010 15:31:03 +0000"  >&lt;p&gt;I only skimmed over this now, sorry. Lars G. pointed me to this issue.&lt;/p&gt;

&lt;p&gt;The tests (and utility classes) can already be reused by adding the &quot;test&quot;&#160;or &quot;tests&quot;&#160;(forgot which is correct)&#160;classifier. If that&apos;s missing it&apos;s a bug in the current pom that needs to be fixed.&lt;/p&gt;

&lt;p&gt;About the quite lengthy test runs:&#160;I agree it would be nice but at the moment the unit test coverage isn&apos;t really that good (last time I checked) and the integration tests while lasting long are pretty important. This seems like a &quot;political&quot;&#160;decision and I&apos;m at -1 to reintroduce modules and keep everything as it is. You can easily just execute the tests you want.&lt;/p&gt;

&lt;p&gt;It might very well be that I&apos;m misunderstanding all or parts of the request but I&apos;m in a hurry right now -&#160;sorry &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12972341" author="ekohlwey" created="Fri, 17 Dec 2010 02:46:12 +0000"  >&lt;p&gt;You&apos;re right. I guess we don&apos;t actually need any additional modules for this.&lt;/p&gt;

&lt;p&gt;I think you&apos;re right that the decision to break out integration tests is a mostly political one; if there&apos;s interest from the community to do this I&apos;ll still be happy to assist but if not I think we can close this.&lt;/p&gt;</comment>
                            <comment id="12972356" author="stack" created="Fri, 17 Dec 2010 05:27:46 +0000"  >&lt;p&gt;Thanks @Lars for jumping in and @Ed, does what Lars suggests work?  If so, I need to doc it.  Thanks lads.&lt;/p&gt;</comment>
                            <comment id="12972479" author="ekohlwey" created="Fri, 17 Dec 2010 13:24:49 +0000"  >&lt;p&gt;Yes:&lt;/p&gt;

&lt;p&gt;&amp;lt;dependency&amp;gt;&lt;br/&gt;
  &amp;lt;groupId&amp;gt;org.apache.hbase&amp;lt;/groupId&amp;gt;&lt;br/&gt;
  &amp;lt;artifactId&amp;gt;hbase&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
  &amp;lt;version&amp;gt;0.91.0-SNAPSHOT&amp;lt;/version&amp;gt;&lt;br/&gt;
  &amp;lt;classifier&amp;gt;tests&amp;lt;/classifier&amp;gt;&lt;br/&gt;
  &amp;lt;type&amp;gt;jar&amp;lt;/type&amp;gt;&lt;br/&gt;
  &amp;lt;scope&amp;gt;compile&amp;lt;/scope&amp;gt;&lt;br/&gt;
&amp;lt;/dependency&amp;gt;&lt;/p&gt;</comment>
                            <comment id="12973307" author="stack" created="Mon, 20 Dec 2010 19:13:50 +0000"  >&lt;p&gt;Hope you don&apos;t mind my reopening this Ed until we doc what you and Lars figured.&lt;/p&gt;</comment>
                            <comment id="12973310" author="stack" created="Mon, 20 Dec 2010 19:14:44 +0000"  >&lt;p&gt;I made this a documentation issue.  We need a maven section in the book.  Move the wiki page content in and add this config. that Lars and Ed figured.&lt;/p&gt;</comment>
                            <comment id="12977000" author="yuzhihong@gmail.com" created="Mon, 3 Jan 2011 23:02:18 +0000"  >&lt;p&gt;When running mvn deploy:deploy-file (into internal repository), remember to supply -Dclassifier=tests flag&lt;/p&gt;</comment>
                            <comment id="14063007" author="misty" created="Wed, 16 Jul 2014 02:15:43 +0000"  >&lt;p&gt;This is already covered in chapter 18. The &quot;mvn test&quot; is covered, as well as some other permutations: &lt;a href=&quot;http://hbase.apache.org/book.html#hbase.tests&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hbase.apache.org/book.html#hbase.tests&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Also, the -Dskiptests is covered in the next section of chapter 18: &lt;a href=&quot;http://hbase.apache.org/book.html#build&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hbase.apache.org/book.html#build&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I stole the dependency clause from the hbase-prefix-tree/pom.xml and documented it, but not 100% sure that I used the right terminology when talking about it. The goal is run HBase&apos;s shipped tests against your custom code, right?&lt;/p&gt;
</comment>
                            <comment id="14063014" author="hadoopqa" created="Wed, 16 Jul 2014 02:27:48 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12655966/HBASE-3361.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12655966/HBASE-3361.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12655966&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+0 tests included&lt;/font&gt;.  The patch appears to be a documentation patch that doesn&apos;t require tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10077//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10077//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14089807" author="jmhsieh" created="Thu, 7 Aug 2014 20:40:44 +0000"  >&lt;p&gt;i don&apos;t think this is correct or relevant any more (this is from 0.92/0.90 days before we modularized the maven build).  I&apos;m just going to close this won&apos;t fix.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12655966" name="HBASE-3361.patch" size="1264" author="misty" created="Wed, 16 Jul 2014 02:17:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 15 Dec 2010 19:18:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33002</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 19 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02etr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12003</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>