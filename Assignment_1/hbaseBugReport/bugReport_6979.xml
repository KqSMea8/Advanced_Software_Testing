<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:41:35 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6979/HBASE-6979.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6979] recovered.edits file should not break distributed log splitting</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6979</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Distributed log splitting fails in creating the recovered.edits folder during upgrade because there is a file called recovered.edits there.&lt;/p&gt;

&lt;p&gt;Instead of checking if the patch exists, we need to check if it exists and is a path.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12611414">HBASE-6979</key>
            <summary>recovered.edits file should not break distributed log splitting</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jxiang">Jimmy Xiang</assignee>
                                    <reporter username="jxiang">Jimmy Xiang</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Oct 2012 19:01:00 +0000</created>
                <updated>Mon, 23 Sep 2013 18:30:53 +0000</updated>
                            <resolved>Wed, 17 Oct 2012 17:22:47 +0000</resolved>
                                                    <fixVersion>0.95.0</fixVersion>
                                    <component>master</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13474577" author="jxiang" created="Thu, 11 Oct 2012 22:42:55 +0000"  >&lt;p&gt;In this patch, we just sideline any existing old recovered.edits file. No special care is tried to make sure the old file is indeed sidelined properly, don&apos;t overwrite other file.&lt;/p&gt;</comment>
                            <comment id="13474582" author="stack" created="Thu, 11 Oct 2012 22:51:02 +0000"  >&lt;p&gt;Why we have a file and folder named recovered.edits (We used to have a file named recovered.edits but so we could handle the case where a regionserver has multiple edits to replay, we made a folder named recovered.edits into which we put the files to replay).  In tests there should not be any file named recovered.edits.  Is the test making these?&lt;/p&gt;

&lt;p&gt;That said, the patch is good.  Is there a better place than /tmp to move the file?  If we delete it, it&apos;ll go into hadoop trash?  Should stick around a while in there?  Would that be good enough?&lt;/p&gt;</comment>
                            <comment id="13474632" author="jxiang" created="Thu, 11 Oct 2012 23:42:27 +0000"  >&lt;p&gt;Good question.  This happens only during upgrade from a very old version. We&apos;d like to fix that so as to make sure users have some good experience with upgrade. The test I added to simulate the error condition to make sure the fix is indeed working.&lt;/p&gt;

&lt;p&gt;I thought about delete it.  If trash is not enabled, then it is gone. As to /tmp, I am very open. I could not find a better place.  I think we can delete&lt;br/&gt;
it as well, just not very sure.&lt;/p&gt;</comment>
                            <comment id="13474634" author="hadoopqa" created="Thu, 11 Oct 2012 23:44:08 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12548816/trunk-6979.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12548816/trunk-6979.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 javadoc&lt;/font&gt;.  The javadoc tool appears to have generated 81 warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 5 new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;     &lt;font color=&quot;red&quot;&gt;-1 core tests&lt;/font&gt;.  The patch failed these unit tests:&lt;br/&gt;
                       org.apache.hadoop.hbase.io.hfile.TestForceCacheImportantBlocks&lt;br/&gt;
                  org.apache.hadoop.hbase.backup.example.TestZooKeeperTableArchiveClient&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3036//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3036//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3036//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3036//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3036//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3036//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3036//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3036//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3036//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3036//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3036//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3036//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/3036//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/3036//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13476280" author="jxiang" created="Mon, 15 Oct 2012 17:25:23 +0000"  >&lt;p&gt;Are we ok to get this in? Or it is not important, and let users to deal with it since it just a rare case during upgrade?&lt;/p&gt;</comment>
                            <comment id="13476812" author="stack" created="Tue, 16 Oct 2012 07:00:54 +0000"  >&lt;p&gt;I&apos;m ok w/ this.  /tmp is better than no where.  And this is a mess when folks run into it &amp;#8211; if they ever do.  This is good clean up in that case.&lt;/p&gt;</comment>
                            <comment id="13477141" author="jxiang" created="Tue, 16 Oct 2012 16:38:48 +0000"  >&lt;p&gt;Thanks a lot for the review.  I will commit this in trunk tomorrow if no objection.&lt;/p&gt;</comment>
                            <comment id="13478054" author="jxiang" created="Wed, 17 Oct 2012 17:22:47 +0000"  >&lt;p&gt;Thanks Stack for the review.  Integrated into trunk.&lt;/p&gt;</comment>
                            <comment id="13478243" author="hudson" created="Wed, 17 Oct 2012 18:59:47 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #3452 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/3452/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/3452/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6979&quot; title=&quot;recovered.edits file should not break distributed log splitting&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6979&quot;&gt;&lt;del&gt;HBASE-6979&lt;/del&gt;&lt;/a&gt; recovered.edits file should not break distributed log splitting (Revision 1399352)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
jxiang : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogSplitter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestHLogSplit.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13478498" author="hudson" created="Wed, 17 Oct 2012 23:47:50 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #225 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/225/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/225/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6979&quot; title=&quot;recovered.edits file should not break distributed log splitting&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6979&quot;&gt;&lt;del&gt;HBASE-6979&lt;/del&gt;&lt;/a&gt; recovered.edits file should not break distributed log splitting (Revision 1399352)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
jxiang : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogSplitter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestHLogSplit.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13698229" author="davelatham" created="Tue, 2 Jul 2013 21:01:36 +0000"  >&lt;p&gt;This one bit us after a rack failed on a cluster that started out on (I think) 0.18.  Any chance of bringing into 0.94?&lt;/p&gt;</comment>
                            <comment id="13698590" author="stack" created="Wed, 3 Jul 2013 04:35:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davelatham&quot; class=&quot;user-hover&quot; rel=&quot;davelatham&quot;&gt;Dave Latham&lt;/a&gt; made hbase-8858&lt;/p&gt;</comment>
                            <comment id="13699331" author="hudson" created="Wed, 3 Jul 2013 19:04:08 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #189 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/189/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/189/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8848&quot; title=&quot;Add durability options for mutations to Thrift&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8848&quot;&gt;HBASE-8848&lt;/a&gt; Backport hbase-6979 &quot;recovered.edits file should not break distributed log splitting&quot; (Revision 1499499)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;/p&gt;</comment>
                            <comment id="13699379" author="hudson" created="Wed, 3 Jul 2013 19:59:12 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #1034 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/1034/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/1034/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8848&quot; title=&quot;Add durability options for mutations to Thrift&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8848&quot;&gt;HBASE-8848&lt;/a&gt; Backport hbase-6979 &quot;recovered.edits file should not break distributed log splitting&quot; (Revision 1499499)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;/p&gt;</comment>
                            <comment id="13775173" author="stack" created="Mon, 23 Sep 2013 18:30:53 +0000"  >&lt;p&gt;Marking closed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12655963">HBASE-8858</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12548816" name="trunk-6979.patch" size="4378" author="jxiang" created="Thu, 11 Oct 2012 22:40:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 11 Oct 2012 22:51:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>247771</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08pqf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48768</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>