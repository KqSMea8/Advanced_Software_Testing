<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:57:48 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1961/HBASE-1961.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1961] HBase EC2 scripts</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1961</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Attached tarball is a clone of the Hadoop EC2 scripts, modified significantly to start up a HBase storage only cluster on top of HDFS backed by instance storage. &lt;/p&gt;

&lt;p&gt;Tested with the HBase 0.20 branch but should work with trunk also. Only the AMI create and launch scripts are tested. Will bring up a functioning HBase cluster. &lt;/p&gt;

&lt;p&gt;Do &quot;create-hbase-image c1.xlarge&quot; to create an x86_64 AMI, or &quot;create-hbase-image c1.medium&quot; to create an i386 AMI.  Public Hadoop/HBase 0.20.1 AMIs are available:&lt;br/&gt;
    i386: ami-c644a7af&lt;br/&gt;
    x86_64: ami-f244a79b&lt;/p&gt;

&lt;p&gt;launch-hbase-cluster brings up the cluster: First, a small dedicated ZK quorum, specifiable in size, default of 3. Then, the DFS namenode (formatting on first boot) and one datanode and the HBase master. Then, a specifiable number of slaves, instances running DFS datanodes and HBase region servers.  For example:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    launch-hbase-cluster testcluster 100 5
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;would bring up a cluster with 100 slaves supported by a 5 node ZK ensemble.&lt;/p&gt;

&lt;p&gt;We must colocate a datanode with the namenode because currently the master won&apos;t tolerate a brand new DFS with only namenode and no datanodes up yet. See &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1960&quot; title=&quot;Master should wait for DFS to come up when creating hbase.version&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1960&quot;&gt;&lt;del&gt;HBASE-1960&lt;/del&gt;&lt;/a&gt;. By default the launch scripts provision ZooKeeper as c1.medium and the HBase master and region servers as c1.xlarge. The result is a HBase cluster supported by a ZooKeeper ensemble. ZK ensembles are not dynamic, but HBase clusters can be grown by simply starting up more slaves, just like Hadoop. &lt;/p&gt;

&lt;p&gt;hbase-ec2-init-remote.sh can be trivially edited to bring up a jobtracker on the master node and task trackers on the slaves.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Amazon AWS EC2&lt;/p&gt;</environment>
        <key id="12440103">HBASE-1961</key>
            <summary>HBase EC2 scripts</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="apurtell">Andrew Purtell</assignee>
                                    <reporter username="apurtell">Andrew Purtell</reporter>
                        <labels>
                    </labels>
                <created>Sat, 7 Nov 2009 18:15:09 +0000</created>
                <updated>Thu, 13 May 2010 22:13:24 +0000</updated>
                            <resolved>Thu, 13 May 2010 22:13:24 +0000</resolved>
                                                                        <due></due>
                            <votes>1</votes>
                                    <watches>8</watches>
                                                                                                            <comments>
                            <comment id="12774654" author="apurtell" created="Sat, 7 Nov 2009 18:27:32 +0000"  >&lt;p&gt;launch-hbase-slaves can be run independently of launch-hbase-cluster to grow the cluster on demand. Each additional slave contributes one datanode and its instance local storage to DFS, and one region server. &lt;/p&gt;</comment>
                            <comment id="12774703" author="stack" created="Sun, 8 Nov 2009 01:28:45 +0000"  >&lt;p&gt;Sweet Andrew.  Should we add this to our contrib?  Pity its hard to subclass bash scripts but it is what it is.  Thats excellent that you can say how many RS instances and then also how many instances in zk cluster.&lt;/p&gt;

&lt;p&gt;You&apos;ve posted amis already?  Ones for hbase?  Thats what these are:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
i386: ami-c644a7af
x86_64: ami-f244a79b
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The scripts look great:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[stack@aa0-000-12 ec2]$ ./bin/hbase-ec2 
Usage: hbase-ec2 COMMAND
where COMMAND is one of:
  list                                 list all running HBase EC2 clusters
  launch-cluster &amp;lt;group&amp;gt; &amp;lt;num slaves&amp;gt;  launch a cluster of HBase EC2 instances - launch-master then launch-slaves
  launch-master  &amp;lt;group&amp;gt;               launch or find a cluster master
  launch-slaves  &amp;lt;group&amp;gt; &amp;lt;num slaves&amp;gt;  launch the cluster slaves
  terminate-cluster  &amp;lt;group&amp;gt;           terminate all HBase EC2 instances
  delete-cluster &amp;lt;group&amp;gt;               delete the group information &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; a terminated cluster
  login  &amp;lt;group|instance id&amp;gt;           login to the master node of the HBase EC2 cluster
  screen &amp;lt;group|instance id&amp;gt;           start or attach &apos;screen&apos; on the master node of the HBase EC2 cluster
  proxy  &amp;lt;group|instance id&amp;gt;           start a socks proxy on localhost:6666 (use w/foxyproxy)
  push   &amp;lt;group&amp;gt; &amp;lt;file&amp;gt;                scp a file to the master node of the HBase EC2 cluster
  &amp;lt;shell cmd&amp;gt; &amp;lt;group|instance id&amp;gt;      execute any command remotely on the master
  create-image                         create a HBase AMI
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;What you mean by a &apos;storage only cluster&apos; above?&lt;/p&gt;</comment>
                            <comment id="12774709" author="apurtell" created="Sun, 8 Nov 2009 02:59:32 +0000"  >&lt;p&gt;Yes I think we should drop this into our contrib/.&lt;/p&gt;

&lt;p&gt;&quot;Storage only&quot; indicates no mapreduce subsystem running. So, the cluster is for data storage and access only. But, it&apos;s trivial to start a jobtracker on the master and tasktrackers on the slaves with the addition of just two lines to hbase-ec2-init-remote.sh. &lt;/p&gt;</comment>
                            <comment id="12774711" author="apurtell" created="Sun, 8 Nov 2009 03:00:52 +0000"  >&lt;p&gt;Yes these are public AMIs for Hadoop+HBase 0.20.1:&lt;/p&gt;

&lt;p&gt;i386: ami-c644a7af&lt;br/&gt;
x86_64: ami-f244a79b&lt;/p&gt;</comment>
                            <comment id="12774718" author="stack" created="Sun, 8 Nov 2009 04:36:05 +0000"  >&lt;p&gt;I think we should commit this to branch too, especially if public AMIs?   Let me try them on our AMZ account just so someone else has exercised them... then lets commit to trunk and branch.  We need to make the current wiki page obsolete too on commit.  I can do that (the wiki page on ec2).  Good stuff.&lt;/p&gt;</comment>
                            <comment id="12774748" author="apurtell" created="Sun, 8 Nov 2009 09:27:50 +0000"  >&lt;p&gt;There are a couple of minor fixups needed on commit, just fyi. I know what they are and can take care of them at that time. For example, hbase-ec2 needs a fixup to handle the additional parameter to launch-hbase-cluster. &lt;/p&gt;</comment>
                            <comment id="12777210" author="stack" created="Thu, 12 Nov 2009 21:21:10 +0000"  >&lt;p&gt;Here&apos;s a bit of feedback Andrew:&lt;/p&gt;

&lt;p&gt;+ Edit the README.  Make it about hbase rather than hadoop.  Change the bin/hadoop-ec2 to be bin/hbase-ec2.&lt;br/&gt;
+ The usage is a little off when I type bin/hbase-ec2... for example, it says create-image when script is actually create-hbase-image, ditto for launch-master, etc.&lt;br/&gt;
+ I ran the create-hbase-image and it did this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
stack@aron:~/checkouts/workspace/trunk/src/contrib/ec2$ ./bin/create-hbase-image 
INSTANCE_TYPE is c1.xlarge.
ARCH is x86_64.
./bin/create-hbase-image: line 32: ec2-describe-images: command not found
Starting a AMI with ID ami-f61dfd9f.
./bin/create-hbase-image: line 37: ec2-run-instances: command not found
Instance is .
Polling server status (ec2-describe-instances )
../bin/create-hbase-image: line 45: ec2-describe-instances: command not found
../bin/create-hbase-image: line 45: ec2-describe-instances: command not found
../bin/create-hbase-image: line 45: ec2-describe-instances: command not found
../bin/create-hbase-image: line 45: ec2-describe-instances: command not found
../bin/create-hbase-image: line 45: ec2-describe-instances: command not found

...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Does same if I add c1.xlarge as arg.&lt;/p&gt;

&lt;p&gt;I did this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
stack@aron:~/checkouts/workspace/trunk/src/contrib/ec2$ ./bin/launch-hbase-cluster stackcluster 3 3
Cluster name required!
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Go easy.&lt;/p&gt;</comment>
                            <comment id="12777330" author="apurtell" created="Fri, 13 Nov 2009 02:03:04 +0000"  >&lt;p&gt;@stack: The former: You need both the EC2 API and AMI tools (&lt;a href=&quot;http://developer.amazonwebservices.com/connect/entry.jspa?externalID=351&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://developer.amazonwebservices.com/connect/entry.jspa?externalID=351&lt;/a&gt; , &lt;a href=&quot;http://developer.amazonwebservices.com/connect/entry.jspa?externalID=368&amp;amp;categoryID=88&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://developer.amazonwebservices.com/connect/entry.jspa?externalID=368&amp;amp;categoryID=88&lt;/a&gt;) installed and on the path. For Ubuntu, &quot;apt-get install ec2-ami-tools&quot;.  The latter: Must be something dumb I did. Let me check.&lt;/p&gt;</comment>
                            <comment id="12777339" author="apurtell" created="Fri, 13 Nov 2009 02:22:51 +0000"  >&lt;p&gt;The usage for hbase-ec2 is basically correct:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;if [ &quot;$COMMAND&quot; = &quot;create-image&quot; ] ; then&lt;br/&gt;
  . &quot;$bin&quot;/create-hbase-image $*&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is the same convention used by the Hadoop EC2 scripts. &lt;/p&gt;

&lt;p&gt;I did just add a &apos;launch-zookeeper&apos; command that was missing. &lt;/p&gt;
</comment>
                            <comment id="12777346" author="apurtell" created="Fri, 13 Nov 2009 02:34:42 +0000"  >&lt;p&gt;This is what you should see out of launch-hbase-cluster:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ ./launch-hbase-cluster cluster-0 4 3
Creating/checking security groups
Security group cluster-0-master exists, ok
Security group cluster-0 exists, ok
Security group cluster-0-zookeeper exists, ok
Starting ZooKeeper quorum ensemble.
Starting an AMI with ID ami-c644a7af (arch i386) in group cluster-0-zookeeper
Waiting for instance i-bf75efd7 to start: ............. Started ZooKeeper instance i-bf75efd7 as ip-10-212-154-223.ec2.internal
    Public DNS name is ec2-174-129-186-94.compute-1.amazonaws.com.
Starting an AMI with ID ami-c644a7af (arch i386) in group cluster-0-zookeeper
Waiting for instance i-6d6af005 to start: ............. Started ZooKeeper instance i-6d6af005 as ip-10-212-154-34.ec2.internal
    Public DNS name is ec2-67-202-48-84.compute-1.amazonaws.com.
Starting an AMI with ID ami-c644a7af (arch i386) in group cluster-0-zookeeper
Waiting for instance i-076af06f to start: ........... Started ZooKeeper instance i-076af06f as ip-10-212-154-160.ec2.internal
    Public DNS name is ec2-174-129-153-78.compute-1.amazonaws.com.
ZooKeeper quorum is ip-10-212-154-223.ec2.internal,ip-10-212-154-34.ec2.internal,ip-10-212-154-160.ec2.internal.
Initializing the ZooKeeper quorum ensemble.
    ec2-174-129-186-94.compute-1.amazonaws.com
hbase-ec2-init-zookeeper-remote.sh            100% 1201     1.2KB/s   00:00    
starting zookeeper, logging to /mnt/hbase/logs/hbase-root-zookeeper-ip-10-212-154-223.out
    ec2-67-202-48-84.compute-1.amazonaws.com
hbase-ec2-init-zookeeper-remote.sh            100% 1201     1.2KB/s   00:00    
starting zookeeper, logging to /mnt/hbase/logs/hbase-root-zookeeper-ip-10-212-154-34.out
    ec2-174-129-153-78.compute-1.amazonaws.com
hbase-ec2-init-zookeeper-remote.sh            100% 1201     1.2KB/s   00:00    
starting zookeeper, logging to /mnt/hbase/logs/hbase-root-zookeeper-ip-10-212-154-160.out
Testing for existing master in group: cluster-0
Starting master with AMI ami-f244a79b (arch x86_64)
Waiting for instance i-bf6af0d7 to start............... Started as ip-10-245-101-219.ec2.internal
Master is ec2-72-44-33-230.compute-1.amazonaws.com, ip is 72.44.33.230, zone is us-east-1d.
Starting 4 AMI(s) with ID ami-f244a79b (arch x86_64) in group cluster-0 in zone us-east-1d
i-3f6bf157
i-316bf159
i-336bf15b
i-356bf15d
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And then if you log on to the master a few minutes later:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ ssh -i id_rsa_root root@ec2-72-44-33-230.compute-1.amazonaws.com
         __|  __|_  )  Fedora 8
         _|  (     /    64-bit
        ___|\___|___|

 Welcome to an EC2 Public Image
                       :-)
    Base

 --[ see /etc/ec2/release-notes ]--

[root@ip-10-245-101-219 ~]# jps -l
1358 org.apache.hadoop.hdfs.server.namenode.NameNode
1567 org.apache.hadoop.hbase.master.HMaster
1820 sun.tools.jps.Jps
1434 org.apache.hadoop.hdfs.server.datanode.DataNode
[root@ip-10-245-101-219 ~]# hbase shell
HBase Shell; enter &apos;help&amp;lt;RETURN&amp;gt;&apos; for list of supported commands.
Version: 0.20.1, r822817, Wed Oct  7 11:55:42 PDT 2009
hbase(main):001:0&amp;gt; status &apos;simple&apos;
4 live servers
    ip-10-242-133-139.ec2.internal:60020 1258079538311
        requests=0, regions=2, usedHeap=26, maxHeap=987
    ip-10-242-97-203.ec2.internal:60020 1258079557660
        requests=0, regions=0, usedHeap=37, maxHeap=987
    ip-10-245-101-187.ec2.internal:60020 1258079561915
        requests=0, regions=0, usedHeap=37, maxHeap=987
    ip-10-245-111-47.ec2.internal:60020 1258079556528
        requests=0, regions=0, usedHeap=37, maxHeap=987
0 dead servers
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12777351" author="apurtell" created="Fri, 13 Nov 2009 02:57:35 +0000"  >&lt;p&gt;Tested terminate-hbase-cluster now also. &lt;/p&gt;</comment>
                            <comment id="12777510" author="apurtell" created="Fri, 13 Nov 2009 13:55:01 +0000"  >&lt;p&gt;More testing. Good to be dropped in now. &lt;/p&gt;</comment>
                            <comment id="12777761" author="stack" created="Sat, 14 Nov 2009 00:26:15 +0000"  >&lt;p&gt;I&apos;m +1 on adding ec2 contrib if only so I can help work on the stuff as I find issues.&lt;/p&gt;</comment>
                            <comment id="12777775" author="stack" created="Sat, 14 Nov 2009 00:43:52 +0000"  >&lt;p&gt;This latest tarball still has usage that does not mention hbase:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
stack@aron:~/checkouts/workspace/trunk/src/contrib/ec2$ ./bin/hbase-ec2 
Usage: hbase-ec2 COMMAND
where COMMAND is one of:
  list                                  list all running HBase EC2 clusters
  launch-cluster &amp;lt;name&amp;gt; &amp;lt;slaves&amp;gt; &amp;lt;zoos&amp;gt; launch a HBase cluster
  launch-zookeeper &amp;lt;name&amp;gt; &amp;lt;zoos&amp;gt;        launch the zookeeper quorum
  launch-master  &amp;lt;name&amp;gt;                 launch or find a cluster master
  launch-slaves  &amp;lt;name&amp;gt; &amp;lt;slaves&amp;gt;        launch the cluster slaves
  terminate-cluster  &amp;lt;name&amp;gt;             terminate all HBase EC2 instances
  delete-cluster &amp;lt;name&amp;gt;                 clean up after a terminated cluster
  login  &amp;lt;name|instance id&amp;gt;             login to the master node
  screen &amp;lt;name|instance id&amp;gt;             start or attach &apos;screen&apos; on the master
  proxy  &amp;lt;name|instance id&amp;gt;             start a socks proxy on localhost:6666
  push   &amp;lt;name&amp;gt; &amp;lt;file&amp;gt;                  scp a file to the master node
  &amp;lt;shell cmd&amp;gt; &amp;lt;group|instance id&amp;gt;       execute a command on the master
  create-image                          create a HBase AMIde}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;.. it should be &apos;launch-hbase-cluster&apos; instead of &apos;launch-cluster&apos;? etc.&lt;/p&gt;

&lt;p&gt;I did the apt-get install of ami tools.  Got this error when I tried below command:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

$ ./bin/launch-hbase-cluster x 3 3
Creating/checking security groups
/home/stack/checkouts/workspace/trunk/src/contrib/ec2/bin/init-hbase-cluster-secgroups: line 34: ec2-describe-group: command not found
Creating group x-master
/home/stack/checkouts/workspace/trunk/src/contrib/ec2/bin/init-hbase-cluster-secgroups: line 37: ec2-add-group: command not found
/home/stack/checkouts/workspace/trunk/src/contrib/ec2/bin/init-hbase-cluster-secgroups: line 38: ec2-authorize: command not found
/home/stack/checkouts/workspace/trunk/src/contrib/ec2/bin/init-hbase-cluster-secgroups: line 39: ec2-authorize: command not found
/home/stack/checkouts/workspace/trunk/src/contrib/ec2/bin/init-hbase-cluster-secgroups: line 51: ec2-describe-group: command not found
Creating group x
/home/stack/checkouts/workspace/trunk/src/contrib/ec2/bin/init-hbase-cluster-secgroups: line 54: ec2-add-group: command not found
/home/stack/checkouts/workspace/trunk/src/contrib/ec2/bin/init-hbase-cluster-secgroups: line 55: ec2-authorize: command not found
/home/stack/checkouts/workspace/trunk/src/contrib/ec2/bin/init-hbase-cluster-secgroups: line 56: ec2-authorize: command not found
/home/stack/checkouts/workspace/trunk/src/contrib/ec2/bin/init-hbase-cluster-secgroups: line 65: ec2-authorize: command not found
/home/stack/checkouts/workspace/trunk/src/contrib/ec2/bin/init-hbase-cluster-secgroups: line 66: ec2-authorize: command not found
/home/stack/checkouts/workspace/trunk/src/contrib/ec2/bin/init-hbase-cluster-secgroups: line 73: ec2-describe-group: command not found
Creating group x-zookeeper
/home/stack/checkouts/workspace/trunk/src/contrib/ec2/bin/init-hbase-cluster-secgroups: line 76: ec2-add-group: command not found
/home/stack/checkouts/workspace/trunk/src/contrib/ec2/bin/init-hbase-cluster-secgroups: line 77: ec2-authorize: command not found
/home/stack/checkouts/workspace/trunk/src/contrib/ec2/bin/init-hbase-cluster-secgroups: line 78: ec2-authorize: command not found
/home/stack/checkouts/workspace/trunk/src/contrib/ec2/bin/init-hbase-cluster-secgroups: line 80: ec2-authorize: command not found
/home/stack/checkouts/workspace/trunk/src/contrib/ec2/bin/init-hbase-cluster-secgroups: line 81: ec2-authorize: command not found
/home/stack/checkouts/workspace/trunk/src/contrib/ec2/bin/init-hbase-cluster-secgroups: line 82: ec2-authorize: command not found
/home/stack/checkouts/workspace/trunk/src/contrib/ec2/bin/init-hbase-cluster-secgroups: line 83: ec2-authorize: command not found
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12777914" author="apurtell" created="Sat, 14 Nov 2009 13:21:30 +0000"  >&lt;p&gt;You need both the api and ami tools. Thought you had one but not the other. You need both. Click through both links in the readme and the comment above on this issue. Maybe on ubuntu &apos;apt-get install ec2-api-tools&apos; will pull down the rest. &lt;/p&gt;

&lt;p&gt;The help is correct. It is for that script. See the if-else switch inside. It is not help for the &lt;b&gt;&lt;del&gt;hbase&lt;/del&gt;&lt;/b&gt; worker scripts. What we need is a wiki page on this. Will put one up. &lt;/p&gt;
</comment>
                            <comment id="12777929" author="apurtell" created="Sat, 14 Nov 2009 14:12:10 +0000"  >&lt;p&gt;Committed scripts into src/contrib/ec2 on trunk. Two changes from the tarball on this issue:&lt;br/&gt;
1) Set file descriptor limit for root to 32768. See &lt;a href=&quot;http://wiki.apache.org/hadoop/Hbase/Troubleshooting#A6&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/hadoop/Hbase/Troubleshooting#A6&lt;/a&gt;&lt;br/&gt;
2) Set epoll user descriptor limit to 32768. See &lt;a href=&quot;http://pero.blogs.aprilmayjune.org/2009/01/22/hadoop-and-linux-kernel-2627-epoll-limits/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://pero.blogs.aprilmayjune.org/2009/01/22/hadoop-and-linux-kernel-2627-epoll-limits/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12778461" author="stack" created="Mon, 16 Nov 2009 19:19:16 +0000"  >&lt;p&gt;Playing with scripts more:&lt;/p&gt;

&lt;p&gt;+ Has hardcoded JAVA_VERSION in hbase-ec2-env.sh.  Is that intentional?&lt;br/&gt;
+ If I do the following, it doesn&apos;t work:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$ ./bin/hbase-ec2 list -h
Required option &apos;-K, --&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt;-key KEY&apos; missing (-h &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; usage)
No running clusters.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The -h is not passed to ec2-describe-instances.  I see that the hadoop scripts have the same issue.  So it seems like we require people to fill in keys into the hbase-ec2-env.sh.  Is that right?  If so, lets add stuff to the readme?&lt;/p&gt;</comment>
                            <comment id="12778476" author="stack" created="Mon, 16 Nov 2009 19:38:21 +0000"  >&lt;p&gt;Yeah, sorry if I&apos;m being a bit thick here Andrew but seems like I need to have defines for EC2_PRIVATE_KEY and for EC2_CERT in my environment to use these scripts?  Is that right?&lt;/p&gt;</comment>
                            <comment id="12778484" author="apurtell" created="Mon, 16 Nov 2009 19:52:09 +0000"  >&lt;blockquote&gt;&lt;p&gt;Has hardcoded JAVA_VERSION in hbase-ec2-env.sh. Is that intentional?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes. That&apos;s used when building the AMI only. Also you can see the location of HBase and JVM packages is hardcoded, and is currently a bucket of mine in S3. We should host HBase tarballs somewhere on ASF systems instead. I put up JVM packages into S3 because Sun&apos;s java download URLs are not stable (or at least have not been in the past). &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The -h is not passed to ec2-describe-instances&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Argument handling by the scripts is basically as-is from parent. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;So it seems like we require people to fill in keys into the hbase-ec2-env.sh&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The requirement is:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Fill in AWS_ACCOUNT_ID&lt;/li&gt;
	&lt;li&gt;Fill in AWS_ACCESS_KEY_ID&lt;/li&gt;
	&lt;li&gt;Fill in AWS_SECRET_ACCESS_KEY&lt;/li&gt;
	&lt;li&gt;Fill in KEY_NAME&lt;/li&gt;
	&lt;li&gt;Make sure a file named id_rsa_$
{KEY_NAME}
&lt;p&gt; exists in EC2_KEYDIR&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;Define EC2_PRIVATE_KEY defined in the environment. This is usually done when setting up the API tools. Probably we should add a line for that in hbase-ec2-env.sh to call that out.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The user must also put the private key into EC2_KEYDIR as pk*.pem and their cert in there as cert*.pem. &lt;/p&gt;

&lt;p&gt;All should go into the readme and up on the wiki. I&apos;ll add this to the readme now. &lt;/p&gt;</comment>
                            <comment id="12778495" author="apurtell" created="Mon, 16 Nov 2009 20:02:15 +0000"  >&lt;p&gt;Tightened up configuration a bit and documented configuration required for hbase-ec2-env.sh in README as r880937.&lt;/p&gt;</comment>
                            <comment id="12778715" author="stack" created="Tue, 17 Nov 2009 04:26:59 +0000"  >&lt;p&gt;@apurtell: I&apos;m having a bit of trouble making these stuff work.  I&apos;ve edited hbase-ec2-env.sh adding in my vitals but it seems like i need to export EC2_PRIVATE_KEY, etc., otherwise the ec2 programs don&apos;t see their content.  For example, I seem to have to do this to get the private key and cert into place so the amz programs will pick them up:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Index: bin/list-hbase-clusters
===================================================================
--- bin/list-hbase-clusters     (revision 881125)
+++ bin/list-hbase-clusters     (working copy)
@@ -23,7 +23,7 @@
 . &lt;span class=&quot;code-quote&quot;&gt;&quot;$bin&quot;&lt;/span&gt;/hbase-ec2-env.sh
 
 # Finding HBase clusters
-CLUSTERS=`ec2-describe-instances | awk &apos;&lt;span class=&quot;code-quote&quot;&gt;&quot;RESERVATION&quot;&lt;/span&gt; == $1 &amp;amp;&amp;amp; $4 ~ /-master$/, &lt;span class=&quot;code-quote&quot;&gt;&quot;INSTANCE&quot;&lt;/span&gt; == $1&apos; | tr &apos;\n&apos; &apos;\t&apos; | grep running | cut -f4 | rev | cut -d&apos;-&apos; -f2- | rev`
+CLUSTERS=`ec2-describe-instances -K $EC2_PRIVATE_KEY | awk &apos;&lt;span class=&quot;code-quote&quot;&gt;&quot;RESERVATION&quot;&lt;/span&gt; == $1 &amp;amp;&amp;amp; $4 ~ /-master$/, &lt;span class=&quot;code-quote&quot;&gt;&quot;INSTANCE&quot;&lt;/span&gt; == $1&apos; | tr &apos;\n&apos; &apos;\t&apos; | grep running | cut -f4 | rev | cut -d&apos;-&apos; -f2- | rev`
 
 [ -z &lt;span class=&quot;code-quote&quot;&gt;&quot;$CLUSTERS&quot;&lt;/span&gt; ] &amp;amp;&amp;amp; echo &lt;span class=&quot;code-quote&quot;&gt;&quot;No running clusters.&quot;&lt;/span&gt; &amp;amp;&amp;amp; exit 0
 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(See how I added the -K above).&lt;/p&gt;

&lt;p&gt;... or if I export the keys, it works as follows:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 # Your AWS &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; key file -- must begin with &apos;pk&apos; and end with &apos;.pem&apos;
-EC2_PRIVATE_KEY=
+export EC2_PRIVATE_KEY=/Users/stack/.ec2/....
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Maybe its because I&apos;m on a macintosh?  I see that the hadoop scripts don&apos;t export variables nor pass with -K nor -C.  Let me try over on linux.&lt;/p&gt;</comment>
                            <comment id="12778753" author="apurtell" created="Tue, 17 Nov 2009 07:39:07 +0000"  >&lt;p&gt;I think people generally set up their environment per the directions on configuring the ami and api tools. That&apos;s what I did, using those tools on their own for some time before taking on this issue. Better to add -K and -C parameters to the commands then rely on the environment as you demonstrate. Glad to have you finding these things. Thanks for sticking with it.&lt;/p&gt;</comment>
                            <comment id="12779021" author="stack" created="Tue, 17 Nov 2009 18:05:36 +0000"  >&lt;p&gt;Rather than add -K and -C I think need to do export of the variables in hbase-ec2-env.sh.   Whats odd is that it would seem the hadoop scripts should have the same issue.   Let me play some more.&lt;/p&gt;</comment>
                            <comment id="12779024" author="apurtell" created="Tue, 17 Nov 2009 18:07:53 +0000"  >&lt;p&gt;@stack: I already committed modifications which put -K and -C into a variable $TOOL_OPTS which is passed on the command line to every tool. I&apos;m sure the Hadoop scripts have this same issue as all of this was copied from them. &lt;/p&gt;</comment>
                            <comment id="12779051" author="stack" created="Tue, 17 Nov 2009 19:11:12 +0000"  >&lt;p&gt;Andrew, thats amazing that you have the ascent to java license inline... and how it installs everything, java, hadoop, hbase, and... ganglia included.&lt;/p&gt;

&lt;p&gt;I got this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Unable to read instance meta-data &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; product-codes
Creating bundle manifest...
ec2-bundle-vol complete.
ERROR: Error talking to S3: Server.AccessDenied(403): Only the bucket owner can access &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; property
Done
Client.InvalidManifest: HTTP 403 (Forbidden) response &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; URL http:&lt;span class=&quot;code-comment&quot;&gt;//s3.amazonaws.com:80/hbase-images/hbase-0.20.1-x86_64.manifest.xml: check your S3 ACLs are correct.
&lt;/span&gt;Terminate with: ec2-terminate-instances i-971a79ff
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I should have changed this, S3_BUCKET, in hbase-ec2-env it seems so its a bucket I have access to..  Thats no prob.&lt;/p&gt;

&lt;p&gt;I tried running $ ./bin/hbase-ec2 launch-cluster stackcluster 3 3...and all went well till zk nodes came up:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Starting ZooKeeper quorum ensemble.
Starting an AMI with ID ami-c644a7af (arch i386) in group stackcluster-zookeeper
Waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; instance i-6b1c7f03 to start: ................. Started ZooKeeper instance i-6b1c7f03 as ip-10-245-59-97.ec2.internal
    Public DNS name is ec2-72-44-33-220.compute-1.amazonaws.com.
Starting an AMI with ID ami-c644a7af (arch i386) in group stackcluster-zookeeper
Waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; instance i-471c7f2f to start: ....................... Started ZooKeeper instance i-471c7f2f as ip-10-245-58-191.ec2.internal
    Public DNS name is ec2-67-202-46-119.compute-1.amazonaws.com.
Starting an AMI with ID ami-c644a7af (arch i386) in group stackcluster-zookeeper
Waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; instance i-c51c7fad to start: ..................... Started ZooKeeper instance i-c51c7fad as ip-10-244-206-65.ec2.internal
    Public DNS name is ec2-174-129-119-249.compute-1.amazonaws.com.
ZooKeeper quorum is ip-10-245-59-97.ec2.internal,ip-10-245-58-191.ec2.internal,ip-10-244-206-65.ec2.internal.
Initializing the ZooKeeper quorum ensemble.
    ec2-72-44-33-220.compute-1.amazonaws.com
lost connection
    ec2-67-202-46-119.compute-1.amazonaws.com
lost connection
    ec2-174-129-119-249.compute-1.amazonaws.com
lost connection
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;They seem up in the console but the above seems to have stopped the script going on to start the regionservers?&lt;/p&gt;

&lt;p&gt;I tried it twice and got same lost connection both times.&lt;/p&gt;

&lt;p&gt;Terminate cluster is sweet the way it asks you if you want to shut down all.&lt;/p&gt;

</comment>
                            <comment id="12779053" author="stack" created="Tue, 17 Nov 2009 19:12:03 +0000"  >&lt;p&gt;Is the &apos;lost connection&apos; what hbase-1982 is about?&lt;/p&gt;</comment>
                            <comment id="12779062" author="apurtell" created="Tue, 17 Nov 2009 19:20:18 +0000"  >&lt;p&gt;No, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1982&quot; title=&quot;[EC2] handle potentially large and uneven instance startup times&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1982&quot;&gt;&lt;del&gt;HBASE-1982&lt;/del&gt;&lt;/a&gt; is about handling what happens if you ask for 100 slaves (assuming your EC2 account is set up for that many concurrent instances), etc.&lt;/p&gt;

&lt;p&gt;&quot;Lost connection&quot; is a complaint from SSH. Check your networking. Firewall in the way on your end I wonder. Or any errors seen while setting up the security groups? Add &lt;br/&gt;
&quot;-v&quot; to SSH_OPTS in hbase-ec2-env. Additional &quot;-v&quot; switches increment the debug level, up to &quot;-v -v -v&quot;. &lt;/p&gt;</comment>
                            <comment id="12779065" author="apurtell" created="Tue, 17 Nov 2009 19:22:41 +0000"  >&lt;p&gt;Drop the &quot;-q&quot; from SSH_OPTS before adding &quot;-v&quot;s. &lt;/p&gt;</comment>
                            <comment id="12780182" author="tatsuya6502" created="Thu, 19 Nov 2009 18:21:38 +0000"  >&lt;p&gt;Hi Andy, &lt;/p&gt;

&lt;p&gt;I ran into the same problem to stack had &amp;#8211; &quot;lost connection&quot; when try to start ZK. &lt;/p&gt;

&lt;p&gt;Then, I found that using KEY_NAME other than &quot;root&quot; fails to connect to the ZK because the user with the KEY_NAME doesn&apos;t exist on the ZK server. &lt;br/&gt;
For example, I tried KEY_NAME=hbase, and I couldn&apos;t login to the ZK server by &quot;ssh &lt;del&gt;i ~/.ec2/id_rsa_hbase hbase@ec2&lt;/del&gt; ...  &lt;/p&gt;

&lt;p&gt;I created a key pair named &quot;root&quot; and I got my cluster up and running. &lt;/p&gt;

&lt;p&gt;Thanks, &lt;br/&gt;
Tatsuya&lt;/p&gt;</comment>
                            <comment id="12780191" author="apurtell" created="Thu, 19 Nov 2009 18:32:25 +0000"  >&lt;p&gt;Nice find Tatsuya. I&apos;ll hardcode the key name to root. In retrospect $KEY_NAME is confusing as a variable because it cannot currently be changed.&lt;/p&gt;</comment>
                            <comment id="12780196" author="apurtell" created="Thu, 19 Nov 2009 18:47:44 +0000"  >&lt;p&gt;Nice Tatsuya.&lt;/p&gt;


</comment>
                            <comment id="12780328" author="apurtell" created="Thu, 19 Nov 2009 23:30:20 +0000"  >&lt;p&gt;Feedback up on hbase-user@ from Naresh Rapolu:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Your scripts are working fine.  We restarted everything and  tested, and they are working fine.  A few issues though :&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;While starting,  launch-hbase-cluster  gives the following  error.&lt;br/&gt;
  error:  &quot;fs.epoll.max_user_instance&quot;  is an unknown key.    It occurs during  starting zookeeper instances. &lt;/li&gt;
	&lt;li&gt;We needed MapReduce along with HBase.  The note on the JIRA page that you only need to add only two lines in hbase-ec2-env.sh    is insufficient.&lt;br/&gt;
  The following changes need to be made.&lt;br/&gt;
  1. hbase-ec2-env.sh  should write  mapred.job.tracker  property into  hadoop-site.xml  (  Also shouldnt you be having  core-site.xml and hdfs-site.xml  as it is  hadoop-0.20.1 ???  Infact because of this , there are warning messages all over the place when you are using  hdfs  through command line ).&lt;br/&gt;
  2.  HADOOP_CLASSPATH  in  hadoop/conf/hadoop-env.sh  needs to be changed in the underlying  AMI,  to include  hbase, zookeeper jars and conf directory.    Probably you can modify the public AMI, and recreate the bundle  as the  paths to these are known apriori.  3.  For other users,  the following three lines should be added in  hbase-ec2-env.sh&lt;br/&gt;
      For master:&lt;br/&gt;
      &quot;$HADOOP_HOME&quot;/bin/hadoop-daemon.sh start jobtracker&lt;br/&gt;
      &quot;$HADOOP_HOME&quot;/bin/hadoop-daemon.sh start tasktracker&lt;br/&gt;
      For slave:&lt;br/&gt;
      &quot;$HADOOP_HOME&quot;/bin/hadoop-daemon.sh start tasktracker.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;Incorporate these suggestions. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;error:  &quot;fs.epoll.max_user_instance&quot;  is an unknown key&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is a bit of future proofing. That&apos;s not a known sysctl key until kernel 2.6.27, at which point oddly low epoll user descriptor limits go into effect. See &lt;a href=&quot;http://pero.blogs.aprilmayjune.org/2009/01/22/hadoop-and-linux-kernel-2627-epoll-limits/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://pero.blogs.aprilmayjune.org/2009/01/22/hadoop-and-linux-kernel-2627-epoll-limits/&lt;/a&gt;. At some point there may be a 2.6.27 based AKI. I could /dev/null the message but then some other more serious potential problem with sysctl would be hidden.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Also shouldnt you be having  core-site.xml and hdfs-site.xml  as it is  hadoop-0.20.1&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes. What I did for this initial work is adapt the Hadoop EC2 scripts, which target 0.19. &lt;/p&gt;</comment>
                            <comment id="12782132" author="apurtell" created="Tue, 24 Nov 2009 20:00:06 +0000"  >&lt;p&gt;Committed to branch now also. Cancelling patch. Will keep this issue open for tracking related activities. &lt;/p&gt;</comment>
                            <comment id="12786505" author="sethladd@gmail.com" created="Sat, 5 Dec 2009 21:14:16 +0000"  >&lt;p&gt;Thanks very much for providing these scripts!&lt;/p&gt;

&lt;p&gt;I&apos;ve pulled the latest from svn (as of 2009-12-05) and when I run &quot;bin/hbase-ec2 launch-cluster sethbase 5 5&quot; I can see this in the output:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;Deprecated&amp;#93;&lt;/span&gt; Xalan: org.apache.xml.res.XMLErrorResources_en_US&lt;br/&gt;
Starting ZooKeeper quorum ensemble.&lt;br/&gt;
/Users/sethladd/Code/hbase/trunk/src/contrib/ec2/bin/launch-hbase-zookeeper: line 70: seq: command not found&lt;br/&gt;
ZooKeeper quorum is .&lt;br/&gt;
Initializing the ZooKeeper quorum ensemble.&lt;br/&gt;
Testing for existing master in group: sethbase&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Deprecated&amp;#93;&lt;/span&gt; Xalan: org.apache.xml.res.XMLErrorResources_en_US&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Deprecated&amp;#93;&lt;/span&gt; Xalan: org.apache.xml.res.XMLErrorResources_en_US&lt;br/&gt;
Starting master with AMI  (arch x86_64)&lt;br/&gt;
Required parameter &apos;AMI&apos; missing (-h for usage)&lt;br/&gt;
Waiting for instance  to start.&lt;span class=&quot;error&quot;&gt;&amp;#91;Deprecated&amp;#93;&lt;/span&gt; Xalan: org.apache.xml.res.XMLErrorResources_en_US&lt;br/&gt;
.&lt;span class=&quot;error&quot;&gt;&amp;#91;Deprecated&amp;#93;&lt;/span&gt; Xalan: org.apache.xml.res.XMLErrorResources_en_US&lt;/p&gt;

&lt;p&gt;Notice the &quot;line 70: seq: command not found&quot;&lt;br/&gt;
Also notice the &quot;Required parameter &apos;AMI&apos; missing&lt;/p&gt;

&lt;p&gt;I am running this on Mac OS X 10.6.  I have also just downloaded the EC2 AMI and API tools (as of 2009-12-05)&lt;/p&gt;

&lt;p&gt;Also, it appears like nothing is starting (though I don&apos;t know how long it usually takes) but I just see a &quot;.&lt;span class=&quot;error&quot;&gt;&amp;#91;Deprecated&amp;#93;&lt;/span&gt; Xalan: org.apache.xml.res.XMLErrorResources_en_US&quot; repeated over and over.&lt;/p&gt;

&lt;p&gt;Any ideas or tips?&lt;/p&gt;

&lt;p&gt;Thanks again for the scripts and the help!&lt;/p&gt;</comment>
                            <comment id="12786513" author="sethladd@gmail.com" created="Sat, 5 Dec 2009 21:43:29 +0000"  >&lt;p&gt;For the record, I replaced line 70 of launch-hbase-zookeeper with this line:&lt;/p&gt;

&lt;p&gt;for inst in &lt;/p&gt;
{1..$NO_INSTANCES}
&lt;p&gt; ; do &lt;/p&gt;

&lt;p&gt;and that seemed to do the trick.  The above might make it more cross platform, assuming that bash is in use.&lt;/p&gt;

&lt;p&gt;Still getting the &quot;Required parameter &apos;AMI&apos; missing (-h for usage)&quot; error but I&apos;ll look at that next.&lt;/p&gt;</comment>
                            <comment id="12786519" author="apurtell" created="Sat, 5 Dec 2009 22:04:24 +0000"  >&lt;p&gt;The config needs S3_BUCKET to be &quot;iridiant-bundles&quot; for now, if you want to use one of the public images I put up. Or, use create-hbase-image to make yourself a private AMI. In the latter case set S3_BUCKET to your private bucket. &lt;/p&gt;

&lt;p&gt;I committed an update to hbase-ec2-env.sh and also your patch to launch-hbase-zookeeper.&lt;/p&gt;

&lt;p&gt;Thanks for the feedback Seth!&lt;/p&gt;</comment>
                            <comment id="12786537" author="sethladd@gmail.com" created="Sat, 5 Dec 2009 23:26:10 +0000"  >&lt;p&gt;Thanks Andrew, that allowed my zookeeper instances to start!  I received a 503 when (apparently) trying to start the hbase nodes.  But I&apos;ll try again.&lt;/p&gt;

&lt;p&gt;org.codehaus.xfire.fault.XFireFault: Server returned error code = 503 for URI : &lt;a href=&quot;https://ec2.amazonaws.com&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://ec2.amazonaws.com&lt;/a&gt;. Check server logs for details&lt;br/&gt;
	at org.codehaus.xfire.fault.XFireFault.createFault(XFireFault.java:89)&lt;br/&gt;
	at org.codehaus.xfire.client.Invocation.invoke(Invocation.java:83)&lt;br/&gt;
	at org.codehaus.xfire.client.Invocation.invoke(Invocation.java:114)&lt;br/&gt;
	at org.codehaus.xfire.client.Client.invoke(Client.java:336)&lt;br/&gt;
	at org.codehaus.xfire.client.XFireProxy.handleRequest(XFireProxy.java:77)&lt;br/&gt;
	at org.codehaus.xfire.client.XFireProxy.invoke(XFireProxy.java:57)&lt;br/&gt;
	at $Proxy12.describeInstances(Unknown Source)&lt;br/&gt;
	at com.amazon.aes.webservices.client.Jec2.describeInstances(Jec2.java:1390)&lt;br/&gt;
	at com.amazon.aes.webservices.client.Jec2.describeInstances(Jec2.java:1354)&lt;br/&gt;
	at com.amazon.aes.webservices.client.cmd.DescribeInstances.invokeOnline(DescribeInstances.java:49)&lt;br/&gt;
	at com.amazon.aes.webservices.client.cmd.BaseCmd.invoke(BaseCmd.java:719)&lt;br/&gt;
	at com.amazon.aes.webservices.client.cmd.DescribeInstances.main(DescribeInstances.java:58)&lt;br/&gt;
Caused by: org.codehaus.xfire.XFireRuntimeException: Server returned error code = 503 for URI : &lt;a href=&quot;https://ec2.amazonaws.com&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://ec2.amazonaws.com&lt;/a&gt;. Check server logs for details&lt;br/&gt;
	at org.codehaus.xfire.transport.http.HttpChannel.sendViaClient(HttpChannel.java:130)&lt;br/&gt;
	at org.codehaus.xfire.transport.http.HttpChannel.send(HttpChannel.java:48)&lt;br/&gt;
	at org.codehaus.xfire.handler.OutMessageSender.invoke(OutMessageSender.java:26)&lt;br/&gt;
	at org.codehaus.xfire.handler.HandlerPipeline.invoke(HandlerPipeline.java:131)&lt;br/&gt;
	at org.codehaus.xfire.client.Invocation.invoke(Invocation.java:79)&lt;br/&gt;
	... 10 more&lt;br/&gt;
.&lt;span class=&quot;error&quot;&gt;&amp;#91;Deprecated&amp;#93;&lt;/span&gt; Xalan: org.apache.xml.res.XMLErrorResources_en_US&lt;br/&gt;
 Started ZooKeeper instance i-cd5014a5 as ip-10-212-149-139.ec2.internal&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Deprecated&amp;#93;&lt;/span&gt; Xalan: org.apache.xml.res.XMLErrorResources_en_US&lt;br/&gt;
    Public DNS name is ec2-75-101-218-238.compute-1.amazonaws.com.&lt;br/&gt;
ZooKeeper quorum is ip-10-245-63-79.ec2.internal,ip-10-212-151-194.ec2.internal,ip-10-212-149-139.ec2.internal.&lt;br/&gt;
Initializing the ZooKeeper quorum ensemble.&lt;br/&gt;
    ec2-72-44-53-128.compute-1.amazonaws.com&lt;br/&gt;
lost connection&lt;br/&gt;
    ec2-174-129-77-191.compute-1.amazonaws.com&lt;br/&gt;
lost connection&lt;br/&gt;
    ec2-75-101-218-238.compute-1.amazonaws.com&lt;br/&gt;
lost connection&lt;/p&gt;</comment>
                            <comment id="12786539" author="sethladd@gmail.com" created="Sat, 5 Dec 2009 23:31:29 +0000"  >&lt;p&gt;Also, there&apos;s a bit of inconsistency.&lt;/p&gt;

&lt;p&gt;~/Code/hbase/trunk/src/contrib/ec2 : bin/hbase-ec2&lt;br/&gt;
Usage: hbase-ec2 COMMAND&lt;br/&gt;
where COMMAND is one of:&lt;br/&gt;
  list                                  list all running HBase EC2 clusters&lt;br/&gt;
  launch-cluster &amp;lt;name&amp;gt; &amp;lt;slaves&amp;gt; &amp;lt;zoos&amp;gt; launch a HBase cluster&lt;/p&gt;

&lt;p&gt;But the README says:&lt;/p&gt;

&lt;p&gt;4) ./bin/hbase-ec2 launch-cluster &amp;lt;name&amp;gt; &amp;lt;nr-zoos&amp;gt; &amp;lt;nr-slaves&amp;gt;, e.g&lt;/p&gt;

&lt;p&gt;       ./bin/hbase-ec2 launch-cluster testcluster 3 3&lt;/p&gt;

&lt;p&gt;Notice that they disagree with order of command line arguments.&lt;/p&gt;

&lt;p&gt;Reading the code, it looks like the correct order is nr-slaves and then nr-zoos&lt;/p&gt;</comment>
                            <comment id="12786540" author="apurtell" created="Sat, 5 Dec 2009 23:40:22 +0000"  >&lt;p&gt;The 503 errors are internal to EC2 and there is little we can do about them except perhaps roll back and try again. I think perhaps you and I were testing around the same time as I got these this afternoon as well for a while.&lt;/p&gt;

&lt;p&gt;&quot;Lost connection&quot; means SSH did not succeed, probably because it is not fully/properly configured yet: you do not have a keypair named &quot;root&quot; and/or have not configured the path to the ssh private key file in hbase-ec2-env.sh. &lt;/p&gt;</comment>
                            <comment id="12786544" author="sethladd@gmail.com" created="Sat, 5 Dec 2009 23:51:06 +0000"  >&lt;p&gt;Thanks again Andrew.  You are correct, the 503 were transient.  I tried it later and it worked.&lt;/p&gt;

&lt;p&gt;My SSH problem was because of incorrect permissions on id_rsa_root.  I would suggest adding the following note in the README, under:&lt;/p&gt;

&lt;p&gt;&quot;   Make sure the private part of your AWS SSH keypair exists in the same&lt;br/&gt;
   directory as EC2_PRIVATE_KEY with the name id_rsa_root.&quot;&lt;/p&gt;

&lt;p&gt;add:&lt;/p&gt;

&lt;p&gt;&quot;Also, ensure that the permissions on id_rsa_root are 600 (ONLY owner readable/writable)&quot;&lt;/p&gt;</comment>
                            <comment id="12786548" author="sethladd@gmail.com" created="Sun, 6 Dec 2009 00:24:30 +0000"  >&lt;p&gt;I think I&apos;ve discovered another issue.&lt;/p&gt;

&lt;p&gt;In launch-hbase-master, line 91 reads:&lt;/p&gt;

&lt;p&gt;scp $SSH_OPTS $PRIVATE_KEY_PATH &quot;root@$MASTER_EC2_HOST:/root/.ssh/id_rsa&quot;&lt;/p&gt;

&lt;p&gt;I think $PRIVATE_KEY_PATH should actually be $EC2_ROOT_SSH_KEY&lt;/p&gt;

&lt;p&gt;I&apos;ll give it a shot.&lt;/p&gt;</comment>
                            <comment id="12786550" author="apurtell" created="Sun, 6 Dec 2009 00:44:23 +0000"  >&lt;p&gt;Thanks for all the feedback Seth. You are correct on both points and I have committed your suggestions.&lt;/p&gt;
</comment>
                            <comment id="12788612" author="sethladd@gmail.com" created="Thu, 10 Dec 2009 09:21:54 +0000"  >&lt;p&gt;Quick spelling tweak.  Currently, in the README, it says:&lt;/p&gt;

&lt;p&gt;&quot;Also, insure that&quot;&lt;/p&gt;

&lt;p&gt;it should be &quot;Also, ensure that&quot;&lt;/p&gt;</comment>
                            <comment id="12867272" author="apurtell" created="Thu, 13 May 2010 22:13:24 +0000"  >&lt;p&gt;Closed per &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2543&quot; title=&quot;[EC2] Move scripts up to Github hosting&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2543&quot;&gt;&lt;del&gt;HBASE-2543&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                            <subtask id="12458495">HBASE-2301</subtask>
                            <subtask id="12461570">HBASE-2429</subtask>
                            <subtask id="12458494">HBASE-2300</subtask>
                            <subtask id="12440616">HBASE-1980</subtask>
                            <subtask id="12442113">HBASE-2020</subtask>
                            <subtask id="12459009">HBASE-2318</subtask>
                            <subtask id="12445062">HBASE-2098</subtask>
                            <subtask id="12440702">HBASE-1981</subtask>
                            <subtask id="12441602">HBASE-2008</subtask>
                            <subtask id="12444397">HBASE-2080</subtask>
                            <subtask id="12440707">HBASE-1982</subtask>
                            <subtask id="12442744">HBASE-2032</subtask>
                            <subtask id="12442112">HBASE-2019</subtask>
                            <subtask id="12441604">HBASE-2009</subtask>
                            <subtask id="12441731">HBASE-2012</subtask>
                            <subtask id="12441151">HBASE-1993</subtask>
                            <subtask id="12444435">HBASE-2083</subtask>
                            <subtask id="12444443">HBASE-2084</subtask>
                            <subtask id="12445091">HBASE-2100</subtask>
                            <subtask id="12445117">HBASE-2103</subtask>
                            <subtask id="12445617">HBASE-2131</subtask>
                            <subtask id="12445620">HBASE-2132</subtask>
                            <subtask id="12456863">HBASE-2242</subtask>
                            <subtask id="12458422">HBASE-2299</subtask>
                            <subtask id="12459196">HBASE-2327</subtask>
                            <subtask id="12464276">HBASE-2533</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 8 Nov 2009 01:28:45 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32334</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 32 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hg0f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99856</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>