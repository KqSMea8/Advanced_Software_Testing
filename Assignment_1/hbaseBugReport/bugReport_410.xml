<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:44:00 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-410/HBASE-410.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-410] [testing] Speed up the test suite</title>
                <link>https://issues.apache.org/jira/browse/HBASE-410</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The test suite takes a long time to run, and a lot of the time spent running is really wasted on repeated startup and shutdown, waiting for asynchronous events to occur, and production-tuned timeouts to occur. Additionally, we use a MiniDFS instead of the local filesystem. &lt;/p&gt;

&lt;p&gt;We should:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Make whatever changes are needed to the local DFS so that it can run on Windows and use that as the basis of all of our tests&lt;/li&gt;
	&lt;li&gt;Minimize redoing expensive setup where possible by combining tests into groups or suites that can share common setup&lt;/li&gt;
	&lt;li&gt;Create a way of running all the parts (Master, Regionserver, Client) in a single thread and explicitly advancing through necessary states so that we can reliably and quickly get what we need tested accomplished&lt;/li&gt;
	&lt;li&gt;Use smaller test datasets where it would make a difference (TestTableIndex and TestTableMapReduce, I&apos;m looking at you!)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;A faster test suite means faster turnaround on new patches, faster Hudson, and a shorter patch queue. Not to mention less annoyance on the part of the developers.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12387899">HBASE-410</key>
            <summary>[testing] Speed up the test suite</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stack">stack</assignee>
                                    <reporter username="bryanduxbury">Bryan Duxbury</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Feb 2008 19:31:22 +0000</created>
                <updated>Fri, 20 Nov 2015 13:01:53 +0000</updated>
                            <resolved>Fri, 16 Oct 2009 19:22:14 +0000</resolved>
                                    <version>0.2.0</version>
                                    <fixVersion>0.90.0</fixVersion>
                                    <component>test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                            <comments>
                            <comment id="12566475" author="bryanduxbury" created="Thu, 7 Feb 2008 06:58:14 +0000"  >&lt;p&gt;I did some limited testing with local filesystem, and it made literally no difference in the speed of TestBatchUpdate or TestBloomFilters. &lt;/p&gt;</comment>
                            <comment id="12566492" author="jimk" created="Thu, 7 Feb 2008 08:22:40 +0000"  >&lt;p&gt;I would prefer that we start a MiniDFS at the beginning of the test suite and just leave it up until the end of the suite. I believe that ant has some kind of pre and post target processing that it can do.&lt;/p&gt;

&lt;p&gt;-1 on running the parts (master, region server, client) in a single thread. That is not how they are designed to run, and testing them in such a mode is unrealistic.&lt;/p&gt;

&lt;p&gt;Finally, for tests that get hung, reducing the timeout until the test is killed (15 minutes?) until a more reasonable 5 minutes would speed things along.&lt;/p&gt;</comment>
                            <comment id="12573964" author="bryanduxbury" created="Fri, 29 Feb 2008 21:11:03 +0000"  >&lt;p&gt;Testing indicates that using a single, external DFS for all tests instead of spinning up a new MiniDFS for each test would save us about a minute overall. Not a ton, but still probably worth it. &lt;/p&gt;</comment>
                            <comment id="12573990" author="bryanduxbury" created="Fri, 29 Feb 2008 22:28:18 +0000"  >&lt;p&gt;Here&apos;s a listing i produced of tests sorted by how long each takes to run. I&apos;ve omitted everything &amp;lt; 10 seconds.&lt;/p&gt;

&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Run Time (secs)&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Test File&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Test Name&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;161.47&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestLogRolling&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testLogRolling&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;85.33&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestTableMapReduce&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testTableMapReduce&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;73.619&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestTableIndex&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testTableIndex&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;52.378&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestHBaseCluster&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testHBaseCluster&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;43.476&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestHQL&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testCreateDeleteTable&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;43.366&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestMergeMeta&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testMergeMeta&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;42.389&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestMasterAdmin&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testMasterAdmin&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;34.616&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestMergeTable&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testMergeTable&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;27.572&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestTable&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testCreateTable&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;26.492&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestListTables&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testListTables&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;23.499&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestHTable&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testHTable&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;22.62&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestHQL&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testInsertSelectDelete&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;18.821&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestBloomFilters&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testExplicitParameters&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;18.621&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestTable&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testTableNameClash&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;17.615&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestBloomFilters&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testComputedParameters&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;17.481&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestInfoServers&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testInfoServersAreUp&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;16.543&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestMigrate&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testUpgrade&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;16.54&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestScannerAPI&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testApi&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;16.519&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestBatchUpdate&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testBatchUpdate&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;16.515&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestMultipleUpdates&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testMultipleUpdates&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;15.629&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestHTable&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testTableNotFoundExceptionWithATable&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;15.427&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestSplit&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testBasicSplit&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;14.375&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestCompaction&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testCompaction&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;12.608&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestTimestamp&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testTimestamps&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;11.552&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestDeleteAll&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testDeleteAll&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;11.539&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestTimestamp&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testDelete&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
</comment>
                            <comment id="12574001" author="bryanduxbury" created="Fri, 29 Feb 2008 23:03:27 +0000"  >&lt;p&gt;With &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-479&quot; title=&quot;Speed up TestLogRolling&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-479&quot;&gt;&lt;del&gt;HBASE-479&lt;/del&gt;&lt;/a&gt; applied, here&apos;s the new table. (It also includes the previously excluded TestRegionServerExit test)&lt;/p&gt;

&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Run Time (secs)&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Test File&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Test Name&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;86.412&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestTableMapReduce&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testTableMapReduce&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;73.494&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestTableIndex&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testTableIndex&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;57.616&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestRegionServerExit&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testCleanExit&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;51.456&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestLogRolling&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testLogRolling&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;50.398&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestRegionServerExit&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testAbort&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;49.452&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestMergeMeta&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testMergeMeta&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;47.46&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestHBaseCluster&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testHBaseCluster&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;43.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestHQL&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testCreateDeleteTable&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;33.642&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestMergeTable&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testMergeTable&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;26.773&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestListTables&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testListTables&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;23.624&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestTable&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testTableNameClash&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;23.577&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestHTable&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testHTable&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;22.547&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestTable&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testCreateTable&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;22.387&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestMasterAdmin&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testMasterAdmin&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;21.469&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestScannerAPI&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testApi&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;18.53&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestBloomFilters&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testExplicitParameters&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;17.483&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestInfoServers&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testInfoServersAreUp&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;16.889&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestHQL&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testInsertSelectDelete&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;16.536&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestMigrate&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testUpgrade&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;16.521&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestMultipleUpdates&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testMultipleUpdates&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;16.504&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestBatchUpdate&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testBatchUpdate&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;15.619&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestBloomFilters&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testComputedParameters&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;15.404&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestSplit&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testBasicSplit&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;14.595&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestHTable&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testTableNotFoundExceptionWithATable&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;14.354&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestCompaction&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testCompaction&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;12.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestTimestamp&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testTimestamps&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10.069&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TestHRegion&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;testHRegion&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
</comment>
                            <comment id="12577092" author="bryanduxbury" created="Mon, 10 Mar 2008 17:49:45 +0000"  >&lt;p&gt;TestBloomFilters takes 45 seconds, but there are no assertions in the entire test. What are we actually testing here? That things don&apos;t throw exceptions when we&apos;re using bloom filters?&lt;/p&gt;</comment>
                            <comment id="12577111" author="bryanduxbury" created="Mon, 10 Mar 2008 18:28:06 +0000"  >&lt;p&gt;Does TestInfoServers need to create a table to verify that the info servers are up? It doesn&apos;t appear to check the resulting pages for table names or anything like that. I suspect taking that out would shave some time.&lt;/p&gt;</comment>
                            <comment id="12746352" author="stack" created="Fri, 21 Aug 2009 23:12:56 +0000"  >&lt;p&gt;Moving into 0.21&lt;/p&gt;</comment>
                            <comment id="12748683" author="stack" created="Fri, 28 Aug 2009 06:16:44 +0000"  >&lt;p&gt;A start.  Cleaned a load of crud out of HBaseTestCase.  A bunch more to go.&lt;/p&gt;</comment>
                            <comment id="12765725" author="stack" created="Wed, 14 Oct 2009 20:12:09 +0000"  >&lt;p&gt;I&apos;m abandoning attached patch.  Revamping our current test framework is wrong way to go.  Instead rewrite it all in junit4 spinning up clusters at start and end rather than per test.&lt;/p&gt;</comment>
                            <comment id="12765827" author="stack" created="Thu, 15 Oct 2009 00:19:53 +0000"  >&lt;p&gt;New patch.  Deprecates HBaseTestCase and HBaseClusterTestCase.  Instead, using new utility class named HBaseTestUtility which will have all you need to test hbase.  I&apos;m starting by replacing content of the client package with a single junit4 that spins up minicluster on startup and then runs all tests.  This patch is just a start.&lt;/p&gt;</comment>
                            <comment id="12765869" author="apurtell" created="Thu, 15 Oct 2009 02:18:40 +0000"  >&lt;p&gt;Nice.&lt;/p&gt;</comment>
                            <comment id="12765930" author="stack" created="Thu, 15 Oct 2009 06:26:38 +0000"  >&lt;p&gt;So, I moved TestClient to new system as TestFromClientSide.  I see that the latter runs in about half the time; 2m30s vs. 4m30s.  Here is some detail:&lt;/p&gt;

&lt;p&gt;Here is old school TestClient timings:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

Testcase: testWeirdCacheBehaviour took 22.499 sec
Testcase: testFilterAcrossMutlipleRegions took 42.655 sec
Testcase: testSuperSimple took 16.456 sec
Testcase: testFilters took 17.679 sec
Testcase: testSimpleMissing took 17.761 sec
Testcase: testSingleRowMultipleFamily took 21.571 sec 
Testcase: testNull took 23.111 sec
Testcase: testVersions took 17.3 sec
Testcase: testVersionLimits took 16.351 sec
Testcase: testDeletes took 20.947 sec
Testcase: testJIRAs took 47.615 sec
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here are TestFromClientSide timings:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Testcase: testWeirdCacheBehaviour took 7.609 secTestcase: testFilterAcrossMutlipleRegions took 30.97 sec
Testcase: testSuperSimple took 5.135 sec                                                                         
Testcase: testFilters took 6.403 sec
Testcase: testSimpleMissing took 5.132 sec 
Testcase: testSingleRowMultipleFamily took 10.877 sec
Testcase: testNull took 11.268 sec
Testcase: testVersions took 5.424 sec
Testcase: testVersionLimits took 5.132 sec
Testcase: testDeletes took 5.105 sec 
Testcase: testJiraTest867 took 9.234 sec   
Testcase: testJiraTest861 took 6.593 sec             
Testcase: testJiraTest33 took 5.59 sec
Testcase: testJiraTest1014 took 5.139 sec
Testcase: testJiraTest1182 took 6.4 sec    
Testcase: testJiraTest52 took 5.132 sec
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I broke out the individual jira tests that were bundled as TestJiras so we&apos;re paying test setup on each instead of once as was done previous.  Means only 1/3rd the time savings for testjiras.&lt;/p&gt;</comment>
                            <comment id="12765931" author="stack" created="Thu, 15 Oct 2009 06:31:39 +0000"  >&lt;p&gt;v3 adds more utility to HBaseTestUtilty.  It makes minicluster use random data dir under build/test/data so we can have mutliple miniclusters concurrently if needs be.  Adds bunch of javadoc.  The class TestFromClientSide now includes tests from TestClient and from TestGet.  My thinking now is not to put all of the client package into one test.  Rather, we can have a TestAdmin to test admin facility and then maybe one other (TestCrashes?).&lt;/p&gt;

&lt;p&gt;Will just commit after I&apos;ve moved over client package; can do the rest of the convertion as background thread.&lt;/p&gt;</comment>
                            <comment id="12766334" author="stack" created="Thu, 15 Oct 2009 23:56:48 +0000"  >&lt;p&gt;Here is v4.  In the client package, it adds TestClient, TestGet, TestPut, TestHTable, TestListTables, all to TestFromClientSide test.  It also adds new TestAdmin to replace old TestHBaseAdmin with new junit4 version.&lt;/p&gt;

&lt;p&gt;We probably don&apos;t want to make a few big long-running tests, or at least, ones that run too long.   Anything over a minute or two is going to be a bit of a pain methinks.&lt;/p&gt;

&lt;p&gt;That said, TestFromClientSide, our new omnibus client-side junit4 test takes nearly 4 minutes now on my local machine.  The whole client package took 13minutes up on hudson last time we had a successful build.&lt;/p&gt;

&lt;p&gt;I&apos;m going to commit v4.  Lets see how it does up on hudson compared to the old timings.&lt;/p&gt;</comment>
                            <comment id="12766385" author="stack" created="Fri, 16 Oct 2009 03:03:00 +0000"  >&lt;p&gt;So, refactoring halved the time:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;   	Duration   	Fail   	(diff)   	Skip   	(diff)   	Total   	(diff)   
TestAdmin 	58 sec	0		0		3	
TestForceSplit 	59 sec	0		0		1	
TestFromClientSide 	3 min 41 sec	0		0		29	
TestGetRowVersions 	37 sec	0		0		1	
TestHTablePool 	0.29 sec	0		0		4	
TestTimestamp 	18 sec	0		0		1	
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Overall the client code runs in 6.5 minutes.  Tests I did not touch do &apos;weird&apos; stuff like restarting cluster in middle of test (or do not use a cluster) and generally don&apos;t take too long so I&apos;ll leave them as is for now.  Will look at other tests to see where we start up a cluster multiple times and replace the with idiom.&lt;/p&gt;

&lt;p&gt;Here is what it used to be running in 13 minutes:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;   	Duration   	Fail   	(diff)   	Skip   	(diff)   	Total   	(diff)   
TestClient 	4 min 25 sec	0		0		11	
TestForceSplit 	40 sec	0		0		1	
TestGet 	37 sec	0		0		2	
TestGetRowVersions 	35 sec	0		0		1	
TestHBaseAdmin 	2 min 3 sec	0		0		3	
TestHTable 	1 min 33 sec	0		0		5	
TestHTablePool 	0.29 sec	0		0		4	
TestListTables 	30 sec	0		0		1	
TestPut 	1 min 31 sec	0		0		5	
TestScannerTimes 	55 sec	0		0		1	
TestTimestamp 	18 sec	0		0		1	
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12766402" author="stack" created="Fri, 16 Oct 2009 04:29:22 +0000"  >&lt;p&gt;More cleanup:&lt;/p&gt;

&lt;p&gt;I moved TestMasterAdmin, TestForceSplit and TestHBaseCluster tests into TestAdmin (I dropped duplicate test).&lt;/p&gt;</comment>
                            <comment id="12766407" author="stack" created="Fri, 16 Oct 2009 04:43:54 +0000"  >&lt;p&gt;Remaining uses of HBaseClusterTestCase are wacky cases that mess with the .META. or that stop the cluster in the middle of the test or that use the Incommon interface so can do tests against HTable or HRegion.&lt;/p&gt;

&lt;p&gt;Unit tests up on hudson used to take 30 minutes to run 265 tests.  Lets see how long it takes now.&lt;/p&gt;</comment>
                            <comment id="12766411" author="stack" created="Fri, 16 Oct 2009 04:55:01 +0000"  >&lt;p&gt;I think the low-hanging fruit has been plucked.&lt;/p&gt;

&lt;p&gt;Next up would be variations on the below:&lt;/p&gt;

&lt;p&gt;1. When we make it so master sends commands to the cluster rather than waits on heartbeats and that we trigger off state in zk instead of having to wait on scan of catalog tables, then turnaround should all be faster as tables go up faster, enables/disables run quicker.&lt;br/&gt;
2. Currently we put up whole cluster.  Could make it so we just put up the dfs for things like the zk and start/stop of hbase cluster tests and then group more of these weirdo tests into the one suite.&lt;/p&gt;
</comment>
                            <comment id="12766431" author="stack" created="Fri, 16 Oct 2009 06:04:59 +0000"  >&lt;p&gt;Test took 20 minutes up on hudson... so tests take 1/3rd less time.&lt;/p&gt;</comment>
                            <comment id="12766596" author="stack" created="Fri, 16 Oct 2009 16:45:52 +0000"  >&lt;p&gt;I think we should close this issue.  Further speed up can only come from rewrite of individual tests.&lt;/p&gt;

&lt;p&gt;TestRegionRebalancing takes 2m22seconds.  Its going to go away in 0.21 when we break out the balancing algorithm so its testable outside of a master/regionserver context.&lt;br/&gt;
TestZooKeeper takes 1m37seconds.  Could be rewritten but does stuff like shutting down regionservers.  Can make an issue to rewrite or just wait until cluster becomes more live and then this test time may go down significantly.&lt;br/&gt;
Long-running client package tests are doing a lot.  Will get faster when cluster becomes more live.&lt;br/&gt;
MR could be redone to not write so much data but then again, its testing a bunch of stuff....&lt;br/&gt;
TestLogRolling takes 1m17s.  Its writing a bunch of data.&lt;br/&gt;
Thrift takes &amp;gt; 1m.&lt;/p&gt;

&lt;p&gt;Thats it. &lt;/p&gt;

&lt;p&gt;We need more tests.  &lt;/p&gt;</comment>
                            <comment id="12766604" author="jdcryans" created="Fri, 16 Oct 2009 17:03:30 +0000"  >&lt;p&gt;+1 on closing this issue, awesome work Stack!&lt;/p&gt;</comment>
                            <comment id="12766670" author="stack" created="Fri, 16 Oct 2009 19:22:14 +0000"  >&lt;p&gt;Resolving then.  We can open up new issues to rewrite individual tests and going forward, write tests with junit4.&lt;/p&gt;</comment>
                            <comment id="15017923" author="lars_francke" created="Fri, 20 Nov 2015 13:01:53 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12422167" name="410-v2.patch" size="10734" author="stack" created="Thu, 15 Oct 2009 00:19:53 +0000"/>
                            <attachment id="12422188" name="410-v3.patch" size="251889" author="stack" created="Thu, 15 Oct 2009 06:31:39 +0000"/>
                            <attachment id="12422304" name="410-v4.patch" size="308574" author="stack" created="Thu, 15 Oct 2009 23:56:48 +0000"/>
                            <attachment id="12417962" name="410.patch" size="27969" author="stack" created="Fri, 28 Aug 2009 06:16:44 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12389930">HBASE-479</subtask>
                            <subtask id="12389932">HBASE-481</subtask>
                            <subtask id="12390402">HBASE-498</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 7 Feb 2008 08:22:40 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31687</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0h75b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98420</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>