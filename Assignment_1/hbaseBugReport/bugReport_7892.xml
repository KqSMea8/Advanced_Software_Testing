<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:50:02 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-7892/HBASE-7892.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-7892] FuzzyRowFilter would have wrong behaviors if user gives an arbitary byte for an &quot;unfixed&quot; position instead of byte 0</title>
                <link>https://issues.apache.org/jira/browse/HBASE-7892</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;An actual case can be:&lt;br/&gt;
we want to match &quot;a?ex&quot;, so we give &quot;a?ex&quot; as input of &quot;key bytes&quot;, and &quot;0100&quot; as input of &quot;meta bytes&quot;.&lt;br/&gt;
if we start with row = &quot;\0\0\0\0&quot;, the next hint would turn out to be &quot;a?ex&quot;&lt;br/&gt;
while actually the right hint should be &quot;a\0ex&quot;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12633324">HBASE-7892</key>
            <summary>FuzzyRowFilter would have wrong behaviors if user gives an arbitary byte for an &quot;unfixed&quot; position instead of byte 0</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="maryannxue">Maryann Xue</assignee>
                                    <reporter username="maryannxue">Maryann Xue</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 Feb 2013 03:49:50 +0000</created>
                <updated>Wed, 27 Feb 2013 19:31:08 +0000</updated>
                                            <version>0.94.5</version>
                    <version>0.95.2</version>
                                                    <component>Filters</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13582888" author="maryannxue" created="Thu, 21 Feb 2013 03:54:11 +0000"  >&lt;p&gt;1. initialize the unfixed positions with byte 0&lt;br/&gt;
2. remove copying of row - improve performance&lt;br/&gt;
3. add corresponding test cases&lt;/p&gt;</comment>
                            <comment id="13584985" author="jmspaggi" created="Sat, 23 Feb 2013 03:15:23 +0000"  >&lt;p&gt;Hi Maryann,&lt;/p&gt;

&lt;p&gt;If you think your patch is ready to be tested, you should click on &quot;submit patch&quot; to have Hadoop QA testing it.&lt;/p&gt;</comment>
                            <comment id="13584994" author="yuzhihong@gmail.com" created="Sat, 23 Feb 2013 03:45:16 +0000"  >&lt;p&gt;Patch makes sense. &lt;/p&gt;

&lt;p&gt;In this particular case, Submit button should be pressed after trunk patch is attached. &lt;/p&gt;</comment>
                            <comment id="13584995" author="yuzhihong@gmail.com" created="Sat, 23 Feb 2013 03:53:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alexb&quot; class=&quot;user-hover&quot; rel=&quot;alexb&quot;&gt;Alex Baranau&lt;/a&gt;:&lt;br/&gt;
Can you take a look ?&lt;/p&gt;</comment>
                            <comment id="13584999" author="yuzhihong@gmail.com" created="Sat, 23 Feb 2013 04:34:09 +0000"  >&lt;p&gt;@Maryann:&lt;br/&gt;
Do you mind rebasing your patch ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
patching file src/main/java/org/apache/hadoop/hbase/filter/FuzzyRowFilter.java
Hunk #1 FAILED at 68.
Hunk #2 FAILED at 106.
Hunk #3 FAILED at 183.
Hunk #4 FAILED at 233.
Hunk #5 FAILED at 270.
5 out of 5 hunks FAILED -- saving rejects to file src/main/java/org/apache/hadoop/hbase/filter/FuzzyRowFilter.java.rej
(Stripping trailing CRs from patch.)
patching file src/test/java/org/apache/hadoop/hbase/filter/TestFuzzyRowFilter.java
Hunk #1 FAILED at 174.
1 out of 1 hunk FAILED -- saving rejects to file src/test/java/org/apache/hadoop/hbase/filter/TestFuzzyRowFilter.java.rej
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13585450" author="alexb" created="Sun, 24 Feb 2013 18:20:56 +0000"  >&lt;p&gt;Hi!&lt;/p&gt;

&lt;p&gt;Actually, this is not a bug, it was made so by design. There&apos;s a javadoc note on that. Also, note that this is used in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6618&quot; title=&quot;Implement FuzzyRowFilter with ranges support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6618&quot;&gt;HBASE-6618&lt;/a&gt; - more advanced implementation with ranges support (patch is ready, waits for review). &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maryannxue&quot; class=&quot;user-hover&quot; rel=&quot;maryannxue&quot;&gt;Maryann Xue&lt;/a&gt; Could you please take a look at that one too?&lt;/p&gt;

&lt;p&gt;Thank you for looking at the filter and trying to improve it!&lt;/p&gt;</comment>
                            <comment id="13585578" author="huanfeng" created="Mon, 25 Feb 2013 02:58:16 +0000"  >&lt;p&gt;In the javadoc, I only find that &apos;I.e. fuzzy info tells the matching mask is &quot;??&lt;cite&gt;&lt;em&gt;99&lt;/em&gt;&lt;/cite&gt;??_01&quot;, where at ? can be any value.&apos;.Here the problem is that the getNextKeyHint method may skip the range from byte \x00 to the value of ? when the ? is not \x00. Is it really do as design?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;FuzzyRowFilter.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (i &amp;lt; fuzzyKeyMeta.length &amp;amp;&amp;amp; fuzzyKeyMeta[i] == 0) {
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ((row[i + offset] &amp;amp; 0xFF) &amp;lt; (fuzzyKeyBytes[i] &amp;amp; 0xFF)) {
  &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; setting value &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; any fixed position increased the original array,
&lt;/span&gt;  &lt;span class=&quot;code-comment&quot;&gt;// we are OK
&lt;/span&gt;  increased = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
  &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;&lt;span class=&quot;code-comment&quot;&gt;//after &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt; the ? after the current position contains the value passed by user
&lt;/span&gt;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 
&lt;p&gt;IMO,the problem is really caused by the above code and setting the &apos;?&apos; to \x00 is just another way to fix it.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alexb&quot; class=&quot;user-hover&quot; rel=&quot;alexb&quot;&gt;Alex Baranau&lt;/a&gt;, would you please check it again?&lt;/p&gt;</comment>
                            <comment id="13585595" author="alexb" created="Mon, 25 Feb 2013 03:27:19 +0000"  >&lt;p&gt;Oh, I must have confused javadoc with the &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6618&quot; title=&quot;Implement FuzzyRowFilter with ranges support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6618&quot;&gt;HBASE-6618&lt;/a&gt; one (i.e. improved). &lt;/p&gt;

&lt;p&gt;I guess you logic could be applied to the &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6618&quot; title=&quot;Implement FuzzyRowFilter with ranges support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6618&quot;&gt;HBASE-6618&lt;/a&gt; too. Though I don&apos;t see problems with requiring \x00 at non-fixed positions if that makes the algo of aplying filter simpler/more efficient.&lt;/p&gt;

&lt;p&gt;I believe current implementation should be patched with &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6618&quot; title=&quot;Implement FuzzyRowFilter with ranges support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6618&quot;&gt;HBASE-6618&lt;/a&gt;, so I&apos;d ask you to base you patch on it. Could you take a look if it still sensible in the context of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6618&quot; title=&quot;Implement FuzzyRowFilter with ranges support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6618&quot;&gt;HBASE-6618&lt;/a&gt; please?&lt;/p&gt;</comment>
                            <comment id="13588669" author="alexb" created="Wed, 27 Feb 2013 19:31:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maryannxue&quot; class=&quot;user-hover&quot; rel=&quot;maryannxue&quot;&gt;Maryann Xue&lt;/a&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=huanfeng&quot; class=&quot;user-hover&quot; rel=&quot;huanfeng&quot;&gt;Zou, Mickey&lt;/a&gt; did you have a chance to look how this idea applies wrt &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6618&quot; title=&quot;Implement FuzzyRowFilter with ranges support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6618&quot;&gt;HBASE-6618&lt;/a&gt;?&lt;/p&gt;

&lt;p&gt;Thank you&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12601431">HBASE-6509</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12570259" name="HBASE-7892-0.94.patch" size="4431" author="maryannxue" created="Thu, 21 Feb 2013 03:54:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 23 Feb 2013 03:15:23 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>313820</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 42 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1i5lb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>314165</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>