<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:53:51 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1481/HBASE-1481.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1481] Add fast row key only scanning</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1481</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Instead of requiring a user to set up a scanner with any column and scan the table to gather all row keys while ignoring the column value we should have a fast and lightweight scanner that for example takes a &quot;null&quot; for the column list and then simply returns only the matching keys of all non-empty or deleted rows. Filters should still be applicable.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12427144">HBASE-1481</key>
            <summary>Add fast row key only scanning</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="streamy">Jonathan Gray</assignee>
                                    <reporter username="larsgeorge">Lars George</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Jun 2009 19:28:54 +0000</created>
                <updated>Fri, 20 Nov 2015 13:01:56 +0000</updated>
                            <resolved>Mon, 5 Oct 2009 22:35:42 +0000</resolved>
                                    <version>0.19.3</version>
                                    <fixVersion>0.20.1</fixVersion>
                    <fixVersion>0.90.0</fixVersion>
                                        <due></due>
                            <votes>2</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="12725941" author="streamy" created="Wed, 1 Jul 2009 06:17:37 +0000"  >&lt;p&gt;You say that filters should still be applicable.  Running the filter checks means disassembling the entire KV and would get rid of much of the potential optimizations.&lt;/p&gt;

&lt;p&gt;I saw the core use case of this being row counting.  Other uses for something like this might be satisfied elsewhere moving forward.&lt;/p&gt;

&lt;p&gt;What use cases are you thinking?  Basically, COUNT() operations with filters to allow counting various things?&lt;/p&gt;</comment>
                            <comment id="12726588" author="larsgeorge" created="Thu, 2 Jul 2009 18:01:24 +0000"  >&lt;p&gt;This was filed back then after a discussion on IRC between - I think - you and me and maybe Stack. For me this was for a faster row counting. Especially in the shell, which is quite slow because it is a sequential scan. &lt;/p&gt;

&lt;p&gt;For the faster MR variant we have the RowCounter driver class in the hbase.jar, which now uses as many mappers as the table has regions. The legacy &quot;mapred&quot; one seemed to have default to the 1 mapper setting from the hadoop configs.&lt;/p&gt;

&lt;p&gt;With that in place I am not sure if we need this issue still being open. &lt;/p&gt;</comment>
                            <comment id="12726597" author="streamy" created="Thu, 2 Jul 2009 18:14:02 +0000"  >&lt;p&gt;Nothing has really been added though.  Row counting via MR has always been possible, we have been doing it here for a long time and the same performance issue still exists (even with mappers = regions).&lt;/p&gt;

&lt;p&gt;The idea behind this issue is to not have to return everything.&lt;/p&gt;

&lt;p&gt;Let&apos;s just keep it open for now and see what comes of it for 0.20.1.  This might get swept into another larger issue.&lt;/p&gt;</comment>
                            <comment id="12761067" author="streamy" created="Thu, 1 Oct 2009 01:11:17 +0000"  >&lt;p&gt;I have an idea for this.  Easy enough for 0.20.1 and 0.21.  Patch coming soon.&lt;/p&gt;</comment>
                            <comment id="12761184" author="streamy" created="Thu, 1 Oct 2009 12:20:54 +0000"  >&lt;p&gt;Patch adds a new filter called FirstKeyOnlyFilter.  It&apos;s extremely simple, but this does generally accomplish what we want.&lt;/p&gt;

&lt;p&gt;The only further optimizations to row counting I can think of:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;prevent sending back even an entire KV per row (all we really need is the count, but this breaks the API)&lt;/li&gt;
	&lt;li&gt;once we work at issues like &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1517&quot; title=&quot;Implement inexpensive seek operations in HFile&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1517&quot;&gt;&lt;del&gt;HBASE-1517&lt;/del&gt;&lt;/a&gt;, we should seek to the next row after we look at the first KV (if we have a million columns in a row, we don&apos;t need to iterate all of them to do a row count)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The latter issue gets me thinking about what filters could do to push that kind of information to the QueryMatcher....&lt;/p&gt;</comment>
                            <comment id="12761186" author="streamy" created="Thu, 1 Oct 2009 12:24:15 +0000"  >&lt;p&gt;This patch is actually against 0.20.1.  Looks like release of it is going to get pushed back a bit, so I&apos;m for putting this in to 0.20.1 since it&apos;s such a simple addition (and quite useful).&lt;/p&gt;

&lt;p&gt;Patch also includes unit test.  Going to look at making another patch that actually adds this in to any built-in row counting mechanisms.&lt;/p&gt;</comment>
                            <comment id="12761194" author="streamy" created="Thu, 1 Oct 2009 12:34:34 +0000"  >&lt;p&gt;Adds usage of FirstKeyOnlyFilter to RowCounter mapreduce job and count function in shell.&lt;/p&gt;</comment>
                            <comment id="12761197" author="streamy" created="Thu, 1 Oct 2009 12:36:09 +0000"  >&lt;p&gt;Seems to work.  Is this enough for this issue for now?  We should revisit additional optimizations once we have better hfile seeking.&lt;/p&gt;</comment>
                            <comment id="12762359" author="stack" created="Mon, 5 Oct 2009 20:47:15 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;The filter is a little odd...but patch looks good and if it works, go commit I&apos;d say.&lt;/p&gt;</comment>
                            <comment id="12762430" author="streamy" created="Mon, 5 Oct 2009 22:35:42 +0000"  >&lt;p&gt;Committed to branch and trunk&lt;/p&gt;</comment>
                            <comment id="15017935" author="lars_francke" created="Fri, 20 Nov 2015 13:01:56 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12421008" name="HBASE-1481-v1.patch" size="3944" author="streamy" created="Thu, 1 Oct 2009 12:20:54 +0000"/>
                            <attachment id="12421012" name="HBASE-1481-v2.patch" size="5680" author="streamy" created="Thu, 1 Oct 2009 12:34:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 1 Jul 2009 06:17:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32159</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hdi7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99450</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>