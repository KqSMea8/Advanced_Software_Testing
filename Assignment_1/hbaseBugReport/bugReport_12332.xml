<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:31:59 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-12332/HBASE-12332.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-12332] [mob] improve how we resolve mobfiles in reads</title>
                <link>https://issues.apache.org/jira/browse/HBASE-12332</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;in the snapshot code, hmobstore was modified to traverse an hfile link to a mob.   Ideally this should use the transparent filelink code to read the data.&lt;/p&gt;

&lt;p&gt;Also there will likely be some issues with the mob file cache with these links.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12750152">HBASE-12332</key>
            <summary>[mob] improve how we resolve mobfiles in reads</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12721032">HBASE-11339</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jiajia">Jiajia Li</assignee>
                                    <reporter username="jmhsieh">Jonathan Hsieh</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Oct 2014 18:24:02 +0000</created>
                <updated>Wed, 22 Jul 2015 22:48:53 +0000</updated>
                            <resolved>Thu, 5 Mar 2015 18:04:01 +0000</resolved>
                                    <version>hbase-11339</version>
                                    <fixVersion>hbase-11339</fixVersion>
                                    <component>mob</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="14182317" author="jingcheng.du@intel.com" created="Fri, 24 Oct 2014 02:16:33 +0000"  >&lt;p&gt;Do we need to do this for snapshot?&lt;br/&gt;
Actually in the mob, the hfilelinks are not used in the read path. The Mob has four candidate paths in reading after the snapshot ( mob working, mob archive, source mob working and source mob archive), these paths are known without parsing the hfilelink. So is it necessary to detour through the hfilelink?&lt;br/&gt;
One more thing is HFileLink can be only parsed its name to a hbase working/archive dir, it&apos;s a new problem to let it parse the file name to a mob dir.&lt;br/&gt;
Please advise. Thanks.&lt;/p&gt;</comment>
                            <comment id="14186540" author="jingcheng.du@intel.com" created="Tue, 28 Oct 2014 07:53:20 +0000"  >&lt;p&gt;Hi Jon &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmhsieh&quot; class=&quot;user-hover&quot; rel=&quot;jmhsieh&quot;&gt;Jonathan Hsieh&lt;/a&gt;, what&apos;s your opinion for this?&lt;/p&gt;</comment>
                            <comment id="14191806" author="jingcheng.du@intel.com" created="Fri, 31 Oct 2014 13:40:44 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmhsieh&quot; class=&quot;user-hover&quot; rel=&quot;jmhsieh&quot;&gt;Jonathan Hsieh&lt;/a&gt;, any ideas on the comments? Thanks!&lt;/p&gt;</comment>
                            <comment id="14200004" author="jingcheng.du@intel.com" created="Thu, 6 Nov 2014 08:55:23 +0000"  >&lt;p&gt;Hi Jon &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmhsieh&quot; class=&quot;user-hover&quot; rel=&quot;jmhsieh&quot;&gt;Jonathan Hsieh&lt;/a&gt;, we will improve the way to read the cloned mob data.&lt;br/&gt;
Previously we have four candidate locations, if it&apos;s a cloned mob data, it will have to find four files in the worst case, it really costs a lot.&lt;br/&gt;
In the new implementation, we will decide the candidate locations by table name, the locations has two candidates at the most. The patch will be uploaded later. Thanks.&lt;br/&gt;
With the new patch, the time cost of unit tests drops a lot. Most of them(except the case of exporting snapshot) are finished within 100 seconds. Do we still need to move these unit tests to integration tests? Please advise. Thanks.&lt;/p&gt;</comment>
                            <comment id="14205814" author="jingcheng.du@intel.com" created="Tue, 11 Nov 2014 02:07:16 +0000"  >&lt;p&gt;Hi Jon, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmhsieh&quot; class=&quot;user-hover&quot; rel=&quot;jmhsieh&quot;&gt;Jonathan Hsieh&lt;/a&gt;, do you have comments on this patch? Thanks.&lt;/p&gt;</comment>
                            <comment id="14231069" author="jiajia" created="Tue, 2 Dec 2014 06:37:17 +0000"  >&lt;p&gt;hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmhsieh&quot; class=&quot;user-hover&quot; rel=&quot;jmhsieh&quot;&gt;Jonathan Hsieh&lt;/a&gt;, can you give some advise on this patch?&lt;/p&gt;</comment>
                            <comment id="14238092" author="jmhsieh" created="Mon, 8 Dec 2014 17:16:15 +0000"  >&lt;p&gt;Check out &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12646&quot; title=&quot;SnapshotInfo tool does not find mob data in snapshots&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12646&quot;&gt;&lt;del&gt;HBASE-12646&lt;/del&gt;&lt;/a&gt;.  Inside it I&apos;ve modified FileLink so that the mob path and archiver is considered as well.  (I need to check more to make sure the mob data when it gets archived moves to the same archiver dir).  However, with this we should be able to remove all the special logic and just use the FileLink to read mob files and transparently handle the case when the original moves. &lt;/p&gt;
</comment>
                            <comment id="14238899" author="jiajia" created="Tue, 9 Dec 2014 02:46:20 +0000"  >&lt;p&gt;hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmhsieh&quot; class=&quot;user-hover&quot; rel=&quot;jmhsieh&quot;&gt;Jonathan Hsieh&lt;/a&gt;, &lt;br/&gt;
in reading, we don&apos;t directly open scanners to all the existing mob files which is easy to know a file link by the matching the name pattern, instead we follow steps below.&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Read the file name from the HBase ( this is just a file name, not a file link pattern, we don&apos;t know the file link name in this cell).&lt;/li&gt;
	&lt;li&gt;Read mob cell from the candidate paths( mobworkingDir/filename, mobArchive/filename, the latter two are for cloned snapshot, srcTableMobWorkingDir/filename, srcTableArchive/filename).&lt;br/&gt;
According to the above read path, it&apos;s not possible to know whether the current mob file in the working directory is a file link by the name which is just a mob file name (not a file link pattern).&lt;br/&gt;
In the latest patch, the possible read path had been reduced from 4 to 2 by comparing the source table tag for the cloned snapshot. It means searching the cloned snapshot is as fast as the normal mob cells.&lt;br/&gt;
Please advise. Thanks~&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="14240558" author="jiajia" created="Wed, 10 Dec 2014 02:43:55 +0000"  >&lt;p&gt;hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jon%40cloudera.com&quot; class=&quot;user-hover&quot; rel=&quot;jon@cloudera.com&quot;&gt;Jonathan Hsieh&lt;/a&gt;, do you have any idea?&lt;/p&gt;</comment>
                            <comment id="14241478" author="jmhsieh" created="Wed, 10 Dec 2014 18:16:25 +0000"  >&lt;p&gt;Do we have a test that shows that the mechanism you propose works when have a mob hfile move from the mob dir to the archive dir.&lt;/p&gt;

&lt;p&gt;Here&apos;s where I believe the we&apos;ll run into a problem &lt;/p&gt;

&lt;p&gt;1) create a table with mobs, &lt;br/&gt;
2) snapshot it, &lt;br/&gt;
3) clone/restore it as a a different table&lt;br/&gt;
4) have a read workload on the snapshot&lt;br/&gt;
5) delete the original table&lt;/p&gt;

&lt;p&gt;The problem is that if we are in the middle of reading a mob file and it is moved to the archive, the read could fail and it is not clear if they read would be retried against the new location from the same spot. &lt;/p&gt;

&lt;p&gt;The hfile link would transparently fall over to alternate fie locations and continue the read from the same place it had encountered the exception on the new location.  This avoids having to percolate an exception up as high.&lt;/p&gt;

&lt;p&gt;From a quick scan of the patch, I believe it covers the case where reads are not active or if a mob file move happens while reads are not in flight.  I didn&apos;t see the case I described being covered.&lt;/p&gt;</comment>
                            <comment id="14242078" author="jingcheng.du@intel.com" created="Thu, 11 Dec 2014 03:41:28 +0000"  >&lt;p&gt;Thanks Jon &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmhsieh&quot; class=&quot;user-hover&quot; rel=&quot;jmhsieh&quot;&gt;Jonathan Hsieh&lt;/a&gt;, we will add such tests.&lt;br/&gt;
&amp;gt;&amp;gt;The problem is that if we are in the middle of reading a mob file and it is moved to the archive, the read could fail and it is not clear if they read would be retried against the new location from the same spot.&lt;br/&gt;
I think it&apos;s not a problem. When the read fails after the file is archived, the mob will try to read the file from the archive. This case will be added in another JIRA to make sure the current implementation is right.&lt;br/&gt;
I call tell how the read works in mob based on the mentioned steps.&lt;br/&gt;
1) Create a table A with mob, add cells to it. These cells with tags of table A.&lt;br/&gt;
2) Snapshot it.&lt;br/&gt;
3) Clone it as a different table B. Now the cells in the table B still have tags of table A.&lt;br/&gt;
4) Read from the snapshot, the reader find the tag of table is A not B itself, will try to read the file from the candidate directories of A (working directory or archive of A), then it finds the file in the working directory of A.&lt;br/&gt;
5) Delete the original table A, the mob files are archived. The reader try to read the next candidate directory which is the archive of A, then it will find the file there.&lt;/p&gt;

&lt;p&gt;We will add test cases to prove it. Thanks.&lt;/p&gt;</comment>
                            <comment id="14242079" author="jingcheng.du@intel.com" created="Thu, 11 Dec 2014 03:43:09 +0000"  >&lt;p&gt;To correct the description.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;This case will be added in another JIRA to make sure the current implementation is right.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Should be &quot;The test case will be added in another JIRA to make sure the current implementation is right.&quot;&lt;/p&gt;</comment>
                            <comment id="14243847" author="jingcheng.du@intel.com" created="Fri, 12 Dec 2014 08:03:11 +0000"  >&lt;p&gt;Hi Jon &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmhsieh&quot; class=&quot;user-hover&quot; rel=&quot;jmhsieh&quot;&gt;Jonathan Hsieh&lt;/a&gt;. We&apos;ve added the test case in the patch of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12673&quot; title=&quot;Add a UT to read mob file when the mob hfile moving from the mob dir to the archive dir&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12673&quot;&gt;&lt;del&gt;HBASE-12673&lt;/del&gt;&lt;/a&gt;, and make sure the current implementation could work well with this above case. Please help review and comment. Thanks.&lt;br/&gt;
The mob ref cell in the HBase only contains the mob file name (not the HFileLink pattern), it&apos;s hard to know whether the mob file is a HFileLink in the read path. Instead reading the file via the value of the ref cell in HBase (which is a mob file name, not a HFileLink pattern) through the read paths(two possible locations) is much easier. How do you think about this? Thanks.&lt;/p&gt;</comment>
                            <comment id="14246357" author="jiajia" created="Mon, 15 Dec 2014 06:18:24 +0000"  >&lt;p&gt;hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jon%40cloudera.com&quot; class=&quot;user-hover&quot; rel=&quot;jon@cloudera.com&quot;&gt;Jonathan Hsieh&lt;/a&gt;, the case you mentioned is added in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12673&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HBASE-12673&lt;/a&gt;, can you look at it? Thanks~&lt;/p&gt;</comment>
                            <comment id="14253042" author="jiajia" created="Fri, 19 Dec 2014 06:36:11 +0000"  >&lt;p&gt;upload the &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12332&quot; title=&quot;[mob] improve how we resolve mobfiles in reads&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12332&quot;&gt;&lt;del&gt;HBASE-12332&lt;/del&gt;&lt;/a&gt;-V2.patch, catch more exceptions when read the cell.&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jon%40cloudera.com&quot; class=&quot;user-hover&quot; rel=&quot;jon@cloudera.com&quot;&gt;Jonathan Hsieh&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14256549" author="jmhsieh" created="Tue, 23 Dec 2014 03:30:01 +0000"  >&lt;p&gt;Here&apos;s a version of the patch that builds on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12749&quot; title=&quot;Tighten HFileLink api to enable non-snapshot uses&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12749&quot;&gt;&lt;del&gt;HBASE-12749&lt;/del&gt;&lt;/a&gt;.  &lt;/p&gt;</comment>
                            <comment id="14256551" author="jmhsieh" created="Tue, 23 Dec 2014 03:31:28 +0000"  >&lt;p&gt;Attached is a version that includes &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12749&quot; title=&quot;Tighten HFileLink api to enable non-snapshot uses&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12749&quot;&gt;&lt;del&gt;HBASE-12749&lt;/del&gt;&lt;/a&gt; and uses the HFileLink for accessing mobs in archive and original tables from clones.&lt;/p&gt;</comment>
                            <comment id="14256554" author="jmhsieh" created="Tue, 23 Dec 2014 03:35:20 +0000"  >&lt;p&gt;And here&apos;s a link to review board &lt;a href=&quot;https://reviews.apache.org/r/29351/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/29351/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14256639" author="jiajia" created="Tue, 23 Dec 2014 05:56:47 +0000"  >&lt;p&gt;hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jon%40cloudera.com&quot; class=&quot;user-hover&quot; rel=&quot;jon@cloudera.com&quot;&gt;Jonathan Hsieh&lt;/a&gt;, in this patch, I found each reading mob cell operate will create the HFileLink and StoreFileInfo, will this reduce the efficiency of reading? I think through reading the possible locations will be easier and more effective, how do you think?&lt;/p&gt;</comment>
                            <comment id="14256729" author="jiajia" created="Tue, 23 Dec 2014 08:11:48 +0000"  >&lt;p&gt;Hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jon%40cloudera.com&quot; class=&quot;user-hover&quot; rel=&quot;jon@cloudera.com&quot;&gt;Jonathan Hsieh&lt;/a&gt;, the &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12332&quot; title=&quot;[mob] improve how we resolve mobfiles in reads&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12332&quot;&gt;&lt;del&gt;HBASE-12332&lt;/del&gt;&lt;/a&gt;-V3.patch change the synchronized to IdLock.Entry based on  &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12332&quot; title=&quot;[mob] improve how we resolve mobfiles in reads&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12332&quot;&gt;&lt;del&gt;HBASE-12332&lt;/del&gt;&lt;/a&gt;-V2.patch, I think it is more easier to resolve the mobfiles. If using the HFileLink, it may be reduce the performance of reading cell(because every time to read cell will create the hfilelink). Can you review on this patch and give the advise? Thanks&lt;/p&gt;</comment>
                            <comment id="14258415" author="jmhsieh" created="Wed, 24 Dec 2014 18:05:44 +0000"  >&lt;p&gt;just posted link.v4 &amp;#8211; which also essentially contains &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12749&quot; title=&quot;Tighten HFileLink api to enable non-snapshot uses&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12749&quot;&gt;&lt;del&gt;HBASE-12749&lt;/del&gt;&lt;/a&gt;.  I want to measure the cost of this approach vs the bespoke approach.  &lt;/p&gt;

&lt;p&gt;I&apos;ll take a look at the v3 patch.&lt;/p&gt;</comment>
                            <comment id="14263725" author="jiajia" created="Sun, 4 Jan 2015 02:45:21 +0000"  >&lt;p&gt;hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jon%40cloudera.com&quot; class=&quot;user-hover&quot; rel=&quot;jon@cloudera.com&quot;&gt;Jonathan Hsieh&lt;/a&gt;, now we will use the filelink when reolving mob files?  If so, I will try to add the UT in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12670&quot; title=&quot;Add unit tests that exercise the added hfilelink link mob paths&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12670&quot;&gt;&lt;del&gt;HBASE-12670&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14264977" author="jmhsieh" created="Mon, 5 Jan 2015 19:40:14 +0000"  >&lt;p&gt;Jingcheng brought up a good point of about potential perf impact using the hfile link and I want to measure the affect of before me commit that.  We might be able to use the idea you have in v3 with it or just go with v3.  I setup a rig over the holidays to try go exercise the condition I was concerned about but ran into other problems there.&lt;/p&gt;
</comment>
                            <comment id="14265551" author="jiajia" created="Tue, 6 Jan 2015 01:57:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmhsieh&quot; class=&quot;user-hover&quot; rel=&quot;jmhsieh&quot;&gt;Jonathan Hsieh&lt;/a&gt;, can you tell me the problem you have meet? Thanks&lt;/p&gt;</comment>
                            <comment id="14285071" author="jiajia" created="Wed, 21 Jan 2015 02:54:05 +0000"  >&lt;p&gt;hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jon%40cloudera.com&quot; class=&quot;user-hover&quot; rel=&quot;jon@cloudera.com&quot;&gt;Jonathan Hsieh&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12332&quot; title=&quot;[mob] improve how we resolve mobfiles in reads&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12332&quot;&gt;&lt;del&gt;HBASE-12332&lt;/del&gt;&lt;/a&gt;-V5 based on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12332&quot; title=&quot;[mob] improve how we resolve mobfiles in reads&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12332&quot;&gt;&lt;del&gt;HBASE-12332&lt;/del&gt;&lt;/a&gt;-V3, add  (e.getCause() instanceof FileNotFoundException) when read cell, can you look at it? Thanks&lt;/p&gt;</comment>
                            <comment id="14285092" author="jiajia" created="Wed, 21 Jan 2015 03:17:03 +0000"  >&lt;p&gt;Updating to V5 is because when I test the case (try to read a opened hfile after deleting the orignal table), the FileNotFoundException from namenode will be found, but this FNFE is wrapped by IOException in StoreFileScanner.seek. So I add the e.getCause() to avoid hbase client retry when fail to read cell.&lt;/p&gt;</comment>
                            <comment id="14286834" author="jmhsieh" created="Thu, 22 Jan 2015 02:35:29 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jiajia&quot; class=&quot;user-hover&quot; rel=&quot;jiajia&quot;&gt;Jiajia Li&lt;/a&gt;, I&apos;m back and will be actively working on this.  &lt;/p&gt;

&lt;p&gt;I did a performance test wit the hfilelink version compared to prevoius the version, and confirmed that the perf difference is fairly large.&lt;/p&gt;

&lt;p&gt;Using load test tool, with mob enabled,  here&apos;s my results of executing the following steps.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;start hbase&lt;/li&gt;
	&lt;li&gt;bin/hbase ltt -init_only&lt;/li&gt;
	&lt;li&gt;in hbase shell alter list&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;, 
{NAME =&amp;gt; &#8216;test_cf&#8217;, IS_MOB=&amp;gt;true, MOB_THRESHOLD=8 }&lt;/li&gt;
	&lt;li&gt;// preload - time bin/hbase ltt -write 1:8192:10 -num_keys 20000&lt;/li&gt;
	&lt;li&gt;// load - time bin/hbase ltt -write 1:8192:10 -num_keys 200000&lt;/li&gt;
	&lt;li&gt;// read - time bin/hbase ltt -skip_init -read 5:10 -num_keys 200000&lt;/li&gt;
	&lt;li&gt;truncate table hbase&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;with &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12332&quot; title=&quot;[mob] improve how we resolve mobfiles in reads&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12332&quot;&gt;&lt;del&gt;HBASE-12332&lt;/del&gt;&lt;/a&gt; v4 - the load and read phases took 2m28s and 2m05s respectively.&lt;br/&gt;
without &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12332&quot; title=&quot;[mob] improve how we resolve mobfiles in reads&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12332&quot;&gt;&lt;del&gt;HBASE-12332&lt;/del&gt;&lt;/a&gt; v4 - we had 1m25s and 41.5s respectively. &lt;/p&gt;

&lt;p&gt;I agree that v4 is too slow. &lt;/p&gt;

&lt;p&gt;I&apos;ll take a look at your v5.&lt;/p&gt;
</comment>
                            <comment id="14313322" author="jiajia" created="Tue, 10 Feb 2015 01:21:45 +0000"  >&lt;p&gt;Hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jon%40cloudera.com&quot; class=&quot;user-hover&quot; rel=&quot;jon@cloudera.com&quot;&gt;Jonathan Hsieh&lt;/a&gt;, what is the plan for this jira?&lt;/p&gt;</comment>
                            <comment id="14338190" author="jingcheng.du@intel.com" created="Thu, 26 Feb 2015 10:18:51 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmhsieh&quot; class=&quot;user-hover&quot; rel=&quot;jmhsieh&quot;&gt;Jonathan Hsieh&lt;/a&gt;, do we have plan to commit this patch these days?&lt;/p&gt;</comment>
                            <comment id="14348218" author="jingcheng.du@intel.com" created="Thu, 5 Mar 2015 06:09:46 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmhsieh&quot; class=&quot;user-hover&quot; rel=&quot;jmhsieh&quot;&gt;Jonathan Hsieh&lt;/a&gt;, I checked the comments in this JIRA, it seems V4(fileLink one) had a performance issue, I am sure V5 has a better performance.&lt;br/&gt;
Having V5 will also improve the performance when reading cells from the file links after restoring snapshots than the current code in hbase-11339. Do we have a plan to review and commit this patch to the branch? Please advise. Thanks.&lt;/p&gt;</comment>
                            <comment id="14348428" author="jmhsieh" created="Thu, 5 Mar 2015 08:54:31 +0000"  >&lt;p&gt;Sorry for being slow on this one.  This patch doesn&apos;t apply after &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-13012&quot; title=&quot;Add shell commands to trigger the mob file compactor &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-13012&quot;&gt;&lt;del&gt;HBASE-13012&lt;/del&gt;&lt;/a&gt;.  Can we get a new rev of this?  I&apos;ll review within a day.&lt;/p&gt;</comment>
                            <comment id="14348442" author="jingcheng.du@intel.com" created="Thu, 5 Mar 2015 09:04:24 +0000"  >&lt;p&gt;I&apos;ll update the patch against the latest code in hbase-11339, will upload it later. Thanks.&lt;/p&gt;</comment>
                            <comment id="14348492" author="jingcheng.du@intel.com" created="Thu, 5 Mar 2015 09:41:33 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jmhsieh&quot; class=&quot;user-hover&quot; rel=&quot;jmhsieh&quot;&gt;Jonathan Hsieh&lt;/a&gt;, I pulled the latest code from hbase-11339 and re-generated the patch, upload it again! Thanks.&lt;/p&gt;</comment>
                            <comment id="14349178" author="jmhsieh" created="Thu, 5 Mar 2015 18:04:01 +0000"  >&lt;p&gt;Thanks for the patience Jiajia, I&apos;ve committed the patch.&lt;/p&gt;</comment>
                            <comment id="14637858" author="hudson" created="Wed, 22 Jul 2015 22:48:53 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-TRUNK #6672 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/6672/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/6672/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12332&quot; title=&quot;[mob] improve how we resolve mobfiles in reads&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12332&quot;&gt;&lt;del&gt;HBASE-12332&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;mob&amp;#93;&lt;/span&gt; improve how we resolve mobfiles in reads (Jingcheng Du and Jiajia Li) (jmhsieh: rev 45711ebaafe938dc10c97b167c007f64ea492d03)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestHMobStore.java&lt;/li&gt;
	&lt;li&gt;hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/HMobStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12763364">HBASE-12749</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12679812" name="HBASE-12332-V1.diff" size="8415" author="jiajia" created="Thu, 6 Nov 2014 08:56:31 +0000"/>
                            <attachment id="12688262" name="HBASE-12332-V2.patch" size="8973" author="jiajia" created="Fri, 19 Dec 2014 06:25:56 +0000"/>
                            <attachment id="12688811" name="HBASE-12332-V3.patch" size="9456" author="jiajia" created="Tue, 23 Dec 2014 08:11:48 +0000"/>
                            <attachment id="12693482" name="HBASE-12332-V5.patch" size="9866" author="jiajia" created="Wed, 21 Jan 2015 02:54:05 +0000"/>
                            <attachment id="12702765" name="HBASE-12332-V6.diff" size="10206" author="jingcheng.du@intel.com" created="Thu, 5 Mar 2015 09:41:33 +0000"/>
                            <attachment id="12689056" name="hbase-12332.link.v4.patch" size="58453" author="jmhsieh" created="Wed, 24 Dec 2014 18:04:00 +0000"/>
                            <attachment id="12688783" name="hbase-12332.patch" size="51021" author="jmhsieh" created="Tue, 23 Dec 2014 03:31:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 24 Oct 2014 02:16:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 21 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i21iev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>