<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:29:55 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5673/HBASE-5673.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5673] The OOM problem of IPC client call  cause all handle block</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5673</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;if HBaseClient meet &quot;unable to create new native thread&quot; exception, the call will never complete because it be lost in calls queue.&lt;/p&gt;</description>
                <environment>&lt;p&gt;0.90.6&lt;/p&gt;</environment>
        <key id="12548627">HBASE-5673</key>
            <summary>The OOM problem of IPC client call  cause all handle block</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="xufeng">xufeng</assignee>
                                    <reporter username="xufeng">xufeng</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 Mar 2012 08:02:12 +0000</created>
                <updated>Fri, 3 May 2013 23:32:57 +0000</updated>
                                                            <fixVersion>0.92.3</fixVersion>
                                        <due>Sun, 31 Mar 2013 00:00:00 +0000</due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13241065" author="xufeng" created="Thu, 29 Mar 2012 08:02:54 +0000"  >&lt;p&gt;I found this issue in my cluster.&lt;/p&gt;

&lt;p&gt;1.I found any regionserver call not report to master because sockettimeout.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[2012-03-26 14:48:09,815] [INFO ] [regionserver20020] [org.apache.hadoop.hbase.regionserver.HRegionServer 1469] Attempting connect to Master server at DDB03:20000
[2012-03-26 14:49:09,818] [INFO ] [regionserver20020] [org.apache.hadoop.ipc.HbaseRPC 360] Problem connecting to server: DDB03/192.168.28.53:20000
[2012-03-26 14:49:09,819] [WARN ] [regionserver20020] [org.apache.hadoop.hbase.regionserver.HRegionServer 1483] Unable to connect to master. Retrying. Error was:
java.net.SocketTimeoutException: Call to DDB03/192.168.28.53:20000 failed on socket timeout exception: java.net.SocketTimeoutException: 60000 millis timeout while waiting for channel to be ready for read. ch : java.nio.channels.SocketChannel[connected local=/192.168.28.53:59520 remote=DDB03/192.168.28.53:20000]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;2.through the jstack log of master,I found that one handle is waitting and others is blocked(waitForMeta).&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&#12290;&#12290;&#12290;&#12290;&#12290;&#12290;&#12290;&#12290;&#12290;&#12290;&#12290;&#12290;
&quot;IPC Server handler 90 on 20000&quot; daemon prio=10 tid=0x00007f219c540000 nid=0x4c3f in Object.wait() [0x00007f21963a7000]
   java.lang.Thread.State: WAITING (on object monitor)
	at java.lang.Object.wait(Native Method)
	at java.lang.Object.wait(Object.java:485)
	at org.apache.hadoop.hbase.ipc.HBaseClient.call(HBaseClient.java:757)
	&#12290;&#12290;&#12290;&#12290;&#12290;&#12290;&#12290;&#12290;&#12290;

&quot;IPC Server handler 87 on 20000&quot; daemon prio=10 tid=0x00007f219c53a000 nid=0x4c37 waiting for monitor entry [0x00007f21966aa000]
   java.lang.Thread.State: BLOCKED (on object monitor)
	at org.apache.hadoop.hbase.catalog.CatalogTracker.waitForMeta(CatalogTracker.java:397)
	- waiting to lock &amp;lt;0x0000000612486960&amp;gt; (a java.util.concurrent.atomic.AtomicBoolean)
	at org.apache.hadoop.hbase.catalog.CatalogTracker.waitForMetaServerConnectionDefault(CatalogTracker.java:437)
&#12290;&#12290;&#12290;&#12290;&#12290;&#12290;&#12290;&#12290;&#12290;&#12290;&#12290;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;3.I also ensure that the waitting handle cause the others blocked,the waitting handle is waitting for the call to complete.&lt;/p&gt;

&lt;p&gt;4.But the unable to create new native thread&#8221; happened, the IOException can not caught it.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;protected synchronized void setupIOstreams() throws IOException {
&#12290;&#12290;&#12290;&#12290;
        start();
      } catch (IOException e) {
        markClosed(e);
        close();

        throw e;
      }
&#12290;&#12290;&#12290;&#12290;&#12290;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;5.thus the call will be lost in call queue and never to complete.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;public Writable call(......)
{
......
    synchronized (call) {
      while (!call.done) {
        try {
          call.wait();                           // wait for the result
        } catch (InterruptedException ignored) {
          // save the fact that we were interrupted
          interrupted = true;
        }
      }
......
}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13241069" author="xufeng" created="Thu, 29 Mar 2012 08:13:21 +0000"  >&lt;p&gt;Step 4 miss some logs info:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.OutOfMemoryError: unable to create new native thread
	at java.lang.Thread.start0(Native Method)
	at java.lang.Thread.start(Thread.java:640)
	at org.apache.hadoop.hbase.ipc.HBaseClient$Connection.setupIOstreams(HBaseClient.java:351)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13242046" author="xufeng" created="Fri, 30 Mar 2012 04:12:33 +0000"  >&lt;p&gt;this patch for 0.90&lt;br/&gt;
unit test is running now.&lt;/p&gt;

&lt;p&gt;I have checked the code of trunk and 0.92 and also have this issue.&lt;/p&gt;

&lt;p&gt;pls review the 90 patch and give me some suggestions,thanks.&lt;/p&gt;</comment>
                            <comment id="13242050" author="stack" created="Fri, 30 Mar 2012 04:36:09 +0000"  >&lt;p&gt;Committed to 0.90, 0.92, 0.94 and trunk.  Thanks for the patch Xufeng&lt;/p&gt;</comment>
                            <comment id="13242054" author="xufeng" created="Fri, 30 Mar 2012 04:55:33 +0000"  >&lt;p&gt;@Stack&lt;br/&gt;
Sorry,I attach a wrong patch.&lt;br/&gt;
I updated it.name:&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5673&quot; title=&quot;The OOM problem of IPC client call  cause all handle block&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5673&quot;&gt;HBASE-5673&lt;/a&gt;-90-V2.patch&lt;/p&gt;</comment>
                            <comment id="13242064" author="hudson" created="Fri, 30 Mar 2012 05:05:35 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-security #154 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-security/154/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-security/154/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5673&quot; title=&quot;The OOM problem of IPC client call  cause all handle block&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5673&quot;&gt;HBASE-5673&lt;/a&gt; The OOM problem of IPC client call cause all handle block (Revision 1307240)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/ipc/HBaseClient.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13242072" author="hudson" created="Fri, 30 Mar 2012 05:17:23 +0000"  >&lt;p&gt;Integrated in HBase-0.92 #345 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92/345/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92/345/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5673&quot; title=&quot;The OOM problem of IPC client call  cause all handle block&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5673&quot;&gt;HBASE-5673&lt;/a&gt; The OOM problem of IPC client call cause all handle block (Revision 1307246)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/ipc/HBaseClient.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13242073" author="hudson" created="Fri, 30 Mar 2012 05:17:56 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #68 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/68/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/68/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5673&quot; title=&quot;The OOM problem of IPC client call  cause all handle block&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5673&quot;&gt;HBASE-5673&lt;/a&gt; The OOM problem of IPC client call cause all handle block (Revision 1307242)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/ipc/HBaseClient.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13242079" author="stack" created="Fri, 30 Mar 2012 05:34:26 +0000"  >&lt;p&gt;No problem Xufeng.&lt;/p&gt;

&lt;p&gt;I reverted the v1 patch from all places and then applied everywhere your v2 patch.&lt;/p&gt;</comment>
                            <comment id="13242112" author="hudson" created="Fri, 30 Mar 2012 06:54:12 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #69 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/69/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/69/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5673&quot; title=&quot;The OOM problem of IPC client call  cause all handle block&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5673&quot;&gt;HBASE-5673&lt;/a&gt; The OOM problem of IPC client call cause all handle block; REAPPLY; V2 OF PATCH (Revision 1307276)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5673&quot; title=&quot;The OOM problem of IPC client call  cause all handle block&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5673&quot;&gt;HBASE-5673&lt;/a&gt; The OOM problem of IPC client call cause all handle block; REVERT &amp;#8211; APPLIED WRONG PATCH (Revision 1307271)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/ipc/HBaseClient.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/ipc/HBaseClient.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13242161" author="hudson" created="Fri, 30 Mar 2012 08:28:21 +0000"  >&lt;p&gt;Integrated in HBase-0.92 #346 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92/346/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92/346/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5673&quot; title=&quot;The OOM problem of IPC client call  cause all handle block&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5673&quot;&gt;HBASE-5673&lt;/a&gt; The OOM problem of IPC client call cause all handle block; REAPPLY; V2 OF PATCH (Revision 1307275)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5673&quot; title=&quot;The OOM problem of IPC client call  cause all handle block&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5673&quot;&gt;HBASE-5673&lt;/a&gt; The OOM problem of IPC client call cause all handle block; REVERT &amp;#8211; APPLIED WRONG PATCH (Revision 1307272)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/ipc/HBaseClient.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/ipc/HBaseClient.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13242175" author="xufeng" created="Fri, 30 Mar 2012 09:10:35 +0000"  >&lt;p&gt;Build failed!&lt;br/&gt;
My patch cause it happened?&lt;/p&gt;</comment>
                            <comment id="13242449" author="hudson" created="Fri, 30 Mar 2012 15:33:45 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #6 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/6/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/6/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5673&quot; title=&quot;The OOM problem of IPC client call  cause all handle block&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5673&quot;&gt;HBASE-5673&lt;/a&gt; The OOM problem of IPC client call cause all handle block; REAPPLY; V2 OF PATCH (Revision 1307276)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5673&quot; title=&quot;The OOM problem of IPC client call  cause all handle block&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5673&quot;&gt;HBASE-5673&lt;/a&gt; The OOM problem of IPC client call cause all handle block; REVERT &amp;#8211; APPLIED WRONG PATCH (Revision 1307271)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5673&quot; title=&quot;The OOM problem of IPC client call  cause all handle block&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5673&quot;&gt;HBASE-5673&lt;/a&gt; The OOM problem of IPC client call cause all handle block (Revision 1307242)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/ipc/HBaseClient.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/ipc/HBaseClient.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/ipc/HBaseClient.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13242475" author="hudson" created="Fri, 30 Mar 2012 15:53:52 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2698 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2698/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2698/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5673&quot; title=&quot;The OOM problem of IPC client call  cause all handle block&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5673&quot;&gt;HBASE-5673&lt;/a&gt; The OOM problem of IPC client call cause all handle block; REAPPLY; V2 OF PATCH (Revision 1307277)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5673&quot; title=&quot;The OOM problem of IPC client call  cause all handle block&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5673&quot;&gt;HBASE-5673&lt;/a&gt; The OOM problem of IPC client call cause all handle block; REVERT &amp;#8211; APPLIED WRONG PATCH (Revision 1307270)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5673&quot; title=&quot;The OOM problem of IPC client call  cause all handle block&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5673&quot;&gt;HBASE-5673&lt;/a&gt; The OOM problem of IPC client call cause all handle block (Revision 1307240)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/ipc/HBaseClient.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/ipc/HBaseClient.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/ipc/HBaseClient.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13242495" author="zhihyu@ebaysf.com" created="Fri, 30 Mar 2012 16:18:55 +0000"  >&lt;p&gt;I saw the following in jstack when running TestMultiVersions:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; prio=10 tid=0x0000000040cc7800 nid=0x2b36 waiting on condition [0x00007fd703f95000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: TIMED_WAITING (sleeping)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(Native Method)
	at org.apache.hadoop.hbase.util.JVMClusterUtil.startup(JVMClusterUtil.java:211)
	at org.apache.hadoop.hbase.LocalHBaseCluster.startup(LocalHBaseCluster.java:424)
	at org.apache.hadoop.hbase.MiniHBaseCluster.init(MiniHBaseCluster.java:200)
	at org.apache.hadoop.hbase.MiniHBaseCluster.&amp;lt;init&amp;gt;(MiniHBaseCluster.java:80)
	at org.apache.hadoop.hbase.HBaseTestingUtility.startMiniHBaseCluster(HBaseTestingUtility.java:638)
	at org.apache.hadoop.hbase.TestMultiVersions.testGetRowVersions(TestMultiVersions.java:143)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13242500" author="zhihyu@ebaysf.com" created="Fri, 30 Mar 2012 16:22:33 +0000"  >&lt;p&gt;With the patch reverted, the test finished quickly:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Running org.apache.hadoop.hbase.TestMultiVersions
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 17.566 sec

Results :

Tests run: 1, Failures: 0, Errors: 0, Skipped: 0

[INFO] 
[INFO] --- maven-surefire-plugin:2.10:test (secondPartTestsExecution) @ hbase ---
[INFO] Tests are skipped.
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 52.152s
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13242502" author="zhihyu@ebaysf.com" created="Fri, 30 Mar 2012 16:23:29 +0000"  >&lt;p&gt;The patch applies cleanly to TRUNK.&lt;/p&gt;

&lt;p&gt;It was imprudent to integrate the patch without going through QA cycle.&lt;/p&gt;

&lt;p&gt;Now all branches are broken.&lt;/p&gt;</comment>
                            <comment id="13242511" author="stack" created="Fri, 30 Mar 2012 16:32:03 +0000"  >&lt;p&gt;Np.  Will undo the commit&lt;/p&gt;</comment>
                            <comment id="13242514" author="stack" created="Fri, 30 Mar 2012 16:35:12 +0000"  >&lt;p&gt;Reverted everywhere.&lt;/p&gt;</comment>
                            <comment id="13242526" author="stack" created="Fri, 30 Mar 2012 16:49:17 +0000"  >&lt;blockquote&gt;&lt;p&gt;It was imprudent to integrate the patch without going through QA cycle.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I got a little carried-away...  It happens.&lt;/p&gt;


&lt;p&gt;@xufeng Can you figure why the test fail?  Test is probably doing silly depdendency on returned exception.&lt;/p&gt;

&lt;p&gt;Also, was thinking later that you perhaps should check the Throwable.  If its already an IOE, don&apos;t wrap it in a new IOE?&lt;/p&gt;

&lt;p&gt;Good stuff.&lt;/p&gt;</comment>
                            <comment id="13242597" author="hudson" created="Fri, 30 Mar 2012 17:52:36 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #70 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/70/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/70/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5673&quot; title=&quot;The OOM problem of IPC client call  cause all handle block&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5673&quot;&gt;HBASE-5673&lt;/a&gt; The OOM problem of IPC client call cause all handle block; REVERT OF V2, A SECOND REVERT (Revision 1307515)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/ipc/HBaseClient.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13242654" author="hudson" created="Fri, 30 Mar 2012 19:17:35 +0000"  >&lt;p&gt;Integrated in HBase-0.92 #347 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92/347/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92/347/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5673&quot; title=&quot;The OOM problem of IPC client call  cause all handle block&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5673&quot;&gt;HBASE-5673&lt;/a&gt; The OOM problem of IPC client call cause all handle block; REVERT OF V2, A SECOND REVERT (Revision 1307516)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/ipc/HBaseClient.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13242700" author="hudson" created="Fri, 30 Mar 2012 20:26:47 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2699 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2699/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2699/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5673&quot; title=&quot;The OOM problem of IPC client call  cause all handle block&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5673&quot;&gt;HBASE-5673&lt;/a&gt; The OOM problem of IPC client call cause all handle block; REVERT OF V2, A SECOND REVERT (Revision 1307513)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/ipc/HBaseClient.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13242914" author="xufeng" created="Sat, 31 Mar 2012 01:07:08 +0000"  >&lt;p&gt;@Stack&lt;br/&gt;
I will check why it happened.&lt;/p&gt;

&lt;p&gt;@Ted&lt;br/&gt;
How to run a single test case by maven?&lt;br/&gt;
I run the test in 0.94 by following commandline,&lt;br/&gt;
mvn clean -Dtest=TestMultiVersionstest test&lt;br/&gt;
but I get this reslut:&lt;br/&gt;
Results :&lt;/p&gt;

&lt;p&gt;Tests run: 0, Failures: 0, Errors: 0, Skipped: 0&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.12-TRUNK-&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2&quot; title=&quot;hlog numbers should wrap around when they reach 999&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2&quot;&gt;&lt;del&gt;HBASE-2&lt;/del&gt;&lt;/a&gt;:test (default-test) on project hbase: No tests were executed!  (Set -DfailIfNoTests=false to ignore this error.) -&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="13242933" author="zhihyu@ebaysf.com" created="Sat, 31 Mar 2012 01:40:38 +0000"  >&lt;p&gt;@Xufeng:&lt;br/&gt;
Use the following command:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
mvn test -P localTests -Dtest=TestMultiVersions
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13243039" author="hudson" created="Sat, 31 Mar 2012 05:54:09 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-security #155 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-security/155/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-security/155/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5673&quot; title=&quot;The OOM problem of IPC client call  cause all handle block&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5673&quot;&gt;HBASE-5673&lt;/a&gt; The OOM problem of IPC client call cause all handle block; REVERT OF V2, A SECOND REVERT (Revision 1307513)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5673&quot; title=&quot;The OOM problem of IPC client call  cause all handle block&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5673&quot;&gt;HBASE-5673&lt;/a&gt; The OOM problem of IPC client call cause all handle block; REAPPLY; V2 OF PATCH (Revision 1307277)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5673&quot; title=&quot;The OOM problem of IPC client call  cause all handle block&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5673&quot;&gt;HBASE-5673&lt;/a&gt; The OOM problem of IPC client call cause all handle block; REVERT &amp;#8211; APPLIED WRONG PATCH (Revision 1307270)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/ipc/HBaseClient.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/ipc/HBaseClient.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/ipc/HBaseClient.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13243080" author="xufeng" created="Sat, 31 Mar 2012 08:22:31 +0000"  >&lt;p&gt;@Stack @Ted&lt;br/&gt;
I analyze the problem of my patch.&lt;br/&gt;
this is the result:&lt;br/&gt;
I wrap all exception in IOException,this IOException can not be handled in CatalogTracker#private HRegionInterface getCachedConnection(ServerName sn)&lt;br/&gt;
so the master will abort,the cases will fail.&lt;/p&gt;


&lt;p&gt;In the future,I will submit the patch with the test result.&lt;/p&gt;</comment>
                            <comment id="13246902" author="hudson" created="Thu, 5 Apr 2012 00:53:32 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #7 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/7/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/7/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5673&quot; title=&quot;The OOM problem of IPC client call  cause all handle block&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5673&quot;&gt;HBASE-5673&lt;/a&gt; The OOM problem of IPC client call cause all handle block; REVERT OF V2, A SECOND REVERT (Revision 1307515)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/ipc/HBaseClient.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13246964" author="hudson" created="Thu, 5 Apr 2012 02:52:07 +0000"  >&lt;p&gt;Integrated in HBase-0.92-security #104 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.92-security/104/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.92-security/104/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5673&quot; title=&quot;The OOM problem of IPC client call  cause all handle block&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5673&quot;&gt;HBASE-5673&lt;/a&gt; The OOM problem of IPC client call cause all handle block; REVERT OF V2, A SECOND REVERT (Revision 1307516)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5673&quot; title=&quot;The OOM problem of IPC client call  cause all handle block&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5673&quot;&gt;HBASE-5673&lt;/a&gt; The OOM problem of IPC client call cause all handle block; REAPPLY; V2 OF PATCH (Revision 1307275)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5673&quot; title=&quot;The OOM problem of IPC client call  cause all handle block&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5673&quot;&gt;HBASE-5673&lt;/a&gt; The OOM problem of IPC client call cause all handle block; REVERT &amp;#8211; APPLIED WRONG PATCH (Revision 1307272)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5673&quot; title=&quot;The OOM problem of IPC client call  cause all handle block&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5673&quot;&gt;HBASE-5673&lt;/a&gt; The OOM problem of IPC client call cause all handle block (Revision 1307246)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/ipc/HBaseClient.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/ipc/HBaseClient.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/ipc/HBaseClient.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.92/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/ipc/HBaseClient.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13456072" author="hadoopqa" created="Fri, 14 Sep 2012 19:52:51 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12520564/HBASE-5673-90-V2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12520564/HBASE-5673-90-V2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2874//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2874//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13648915" author="jdcryans" created="Fri, 3 May 2013 23:32:57 +0000"  >&lt;p&gt;Patch doesn&apos;t apply anymore, unmarking as available.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12520564" name="HBASE-5673-90-V2.patch" size="678" author="xufeng" created="Fri, 30 Mar 2012 04:55:32 +0000"/>
                            <attachment id="12520561" name="HBASE-5673-90.patch" size="529" author="xufeng" created="Fri, 30 Mar 2012 04:12:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 30 Mar 2012 04:36:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>233724</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10342"><![CDATA[Incompatible change]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 32 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i00rv3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2446</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>