<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:58:44 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-8809/HBASE-8809.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-8809] Include deletes in the scan (setRaw) method does not respect the time range or the filter</title>
                <link>https://issues.apache.org/jira/browse/HBASE-8809</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;If a row has been deleted at time stamp &apos;T&apos; and a scan with time range (0, T-1) is executed, it still returns the delete marker at time stamp &apos;T&apos;. It is because of the code in ScanQueryMatcher.java&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (retainDeletesInOutput
          || (!isUserScan &amp;amp;&amp;amp; (EnvironmentEdgeManager.currentTimeMillis() - timestamp) &amp;lt;= timeToPurgeDeletes)
          || kv.getMemstoreTS() &amp;gt; maxReadPointToTrackVersions) {
        &lt;span class=&quot;code-comment&quot;&gt;// always include or it is not time yet to check whether it is OK
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// to purge deltes or not
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; MatchCode.INCLUDE;
      }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The assumption is scan (even with setRaw is set to true) should respect the filters and the time range specified.&lt;/p&gt;

&lt;p&gt;Please let me know if you think this behavior can be changed so that I can provide a patch for it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12655003">HBASE-8809</key>
            <summary>Include deletes in the scan (setRaw) method does not respect the time range or the filter</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lhofhansl">Lars Hofhansl</assignee>
                                    <reporter username="vasu.mariyala@gmail.com">Vasu Mariyala</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Jun 2013 18:57:33 +0000</created>
                <updated>Sun, 28 Jul 2013 05:34:42 +0000</updated>
                            <resolved>Mon, 1 Jul 2013 15:58:11 +0000</resolved>
                                                    <fixVersion>0.98.0</fixVersion>
                    <fixVersion>0.95.2</fixVersion>
                    <fixVersion>0.94.10</fixVersion>
                                    <component>Scanners</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>12</watches>
                                                                <comments>
                            <comment id="13695406" author="lhofhansl" created="Fri, 28 Jun 2013 11:51:58 +0000"  >&lt;p&gt;&quot;raw&quot; are limited currently. They also do not honor scan column selection.&lt;br/&gt;
This is easy enough to patch.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vmariyala&quot; class=&quot;user-hover&quot; rel=&quot;vmariyala&quot;&gt;Vasu Mariyala&lt;/a&gt; I&apos;ll make a patch if you write a test for all the scenarios you want &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13695420" author="lhofhansl" created="Fri, 28 Jun 2013 12:40:34 +0000"  >&lt;p&gt;Here&apos;s a sample 0.94 patch, along with some tests.&lt;br/&gt;
(I also fixed up the existing test)&lt;/p&gt;</comment>
                            <comment id="13695428" author="lhofhansl" created="Fri, 28 Jun 2013 13:03:29 +0000"  >&lt;p&gt;And a trunk patch.&lt;/p&gt;</comment>
                            <comment id="13695479" author="hadoopqa" created="Fri, 28 Jun 2013 14:19:32 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12590034/8809-trunk.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12590034/8809-trunk.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop1.0&lt;/font&gt;.  The patch compiles against the hadoop 1.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop2.0&lt;/font&gt;.  The patch compiles against the hadoop 2.0 profile.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;  &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6161//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6161//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6161//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6161//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6161//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6161//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6161//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6161//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6161//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6161//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6161//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6161//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6161//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6161//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop1-compat.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6161//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6161//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6161//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6161//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6161//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6161//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13695547" author="jesse_yates" created="Fri, 28 Jun 2013 16:26:09 +0000"  >&lt;p&gt;Wow, loving the turn around Lars! LTGM... this should also cover the case of untimestampted row Delete (which retain a ts = Long.MAX_VALUE) too, right?&lt;/p&gt;</comment>
                            <comment id="13695602" author="lhofhansl" created="Fri, 28 Jun 2013 17:50:43 +0000"  >&lt;p&gt;You should never actually see these in an HFile. When is that a problem?&lt;/p&gt;</comment>
                            <comment id="13695607" author="jesse_yates" created="Fri, 28 Jun 2013 17:53:47 +0000"  >&lt;p&gt;When doing a raw scan and they are still in the memstore? They definitely show up, but are outside the time bounds. Seems like the right behavior for them is to be properly timestamped before being inserted into the memstore (so, outside this issue).&lt;/p&gt;</comment>
                            <comment id="13695617" author="lhofhansl" created="Fri, 28 Jun 2013 18:03:17 +0000"  >&lt;p&gt;Hmm... Sounds like a bug. Once they hit the RegionServer Long.MAX_VALUE should have been translated to the latest TS found.&lt;/p&gt;</comment>
                            <comment id="13695637" author="jesse_yates" created="Fri, 28 Jun 2013 18:23:33 +0000"  >&lt;p&gt;Looks like I&apos;m full of it (can&apos;t seem to reproduce)... this should be fine to cover everything I care about.&lt;/p&gt;</comment>
                            <comment id="13695639" author="jesse_yates" created="Fri, 28 Jun 2013 18:23:49 +0000"  >&lt;p&gt;+1 ship the attached.&lt;/p&gt;

&lt;p&gt;Only consideration is that we might want to ping the dev list since its a change in functionality pretty late into the 0.94 series. People might have built on the expectation of this bug, making it a &quot;feature&quot;.&lt;/p&gt;</comment>
                            <comment id="13695659" author="lhofhansl" created="Fri, 28 Jun 2013 18:45:11 +0000"  >&lt;p&gt;The only change is that raw scans honor timerange for delete markers, when previously that was ignored (but was honored for other KVs). Seems like a bug fix to me.&lt;/p&gt;</comment>
                            <comment id="13695669" author="jesse_yates" created="Fri, 28 Jun 2013 18:52:16 +0000"  >&lt;p&gt;Sure, its a bug fix, but its been around for a while. I could see people having built on it... just tentative to change client facing behavior that has been out for a while. But if you are comfortable, I&apos;m happy to just commit it - probably being a little overly paranoid.&lt;/p&gt;</comment>
                            <comment id="13695688" author="lhofhansl" created="Fri, 28 Jun 2013 19:11:59 +0000"  >&lt;p&gt;Let&apos;s give some other folks a chance to comment. Otherwise I&apos;ll commit tomorrow.&lt;br/&gt;
I think &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=giacomotaylor&quot; class=&quot;user-hover&quot; rel=&quot;giacomotaylor&quot;&gt;James Taylor&lt;/a&gt; had requested the same change a while ago.&lt;/p&gt;</comment>
                            <comment id="13695834" author="giacomotaylor" created="Fri, 28 Jun 2013 21:42:04 +0000"  >&lt;p&gt;+1 to this fix. Yes, we hit this bug. I didn&apos;t dig in enough to see that it was only Delete markers that made it through. Thanks!&lt;/p&gt;</comment>
                            <comment id="13695850" author="vmariyala" created="Fri, 28 Jun 2013 22:01:44 +0000"  >&lt;p&gt;Attaching the document which explains the behavior of the api with respect to different parameters (raw on scan object, keep deleted cells and scan type). Have a question about the behavior of the api when keep deleted cells is false and setRaw is true for a user scan. (The current behavior is it includes the delete markers)&lt;/p&gt;</comment>
                            <comment id="13695866" author="lhofhansl" created="Fri, 28 Jun 2013 22:21:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vasu.mariyala%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;vasu.mariyala@gmail.com&quot;&gt;Vasu Mariyala&lt;/a&gt; Raw is raw &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  It simply returns what&apos;s there including delete markers.&lt;/p&gt;</comment>
                            <comment id="13695871" author="vmariyala" created="Fri, 28 Jun 2013 22:25:51 +0000"  >&lt;p&gt;Even if keep deleted cells is false? &lt;/p&gt;</comment>
                            <comment id="13695881" author="jesse_yates" created="Fri, 28 Jun 2013 22:38:24 +0000"  >&lt;p&gt;And it still ought to respect the timerange, even it if is raw &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13695888" author="hadoopqa" created="Fri, 28 Jun 2013 22:51:12 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12590097/DeleteMarkers.doc&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12590097/DeleteMarkers.doc&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/6165//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/6165//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13696073" author="lhofhansl" created="Sat, 29 Jun 2013 08:25:08 +0000"  >&lt;p&gt;These are two different issues. A raw scan sees everything (even when keep deleted cells is false, it was envisioned as a debugging tool, showing what&apos;s actually there).&lt;/p&gt;

&lt;p&gt;Then a client can select what it wants to see, via time range, versions, etc.&lt;/p&gt;
</comment>
                            <comment id="13696713" author="lhofhansl" created="Mon, 1 Jul 2013 10:48:07 +0000"  >&lt;p&gt;Going to commit in a bit.&lt;/p&gt;</comment>
                            <comment id="13696887" author="yuzhihong@gmail.com" created="Mon, 1 Jul 2013 15:35:51 +0000"  >&lt;p&gt;Patch looks good except:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!isUserScan) {
+          &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is a user scan (i.e. a &lt;span class=&quot;code-quote&quot;&gt;&quot;raw&quot;&lt;/span&gt; scan),&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&apos;this is a user scan&apos; -&amp;gt; &apos;this is not a user scan&apos;&lt;/p&gt;

&lt;p&gt;Can be corrected at time of commit.&lt;/p&gt;</comment>
                            <comment id="13696894" author="lhofhansl" created="Mon, 1 Jul 2013 15:48:13 +0000"  >&lt;p&gt;Thanks Ted.&lt;/p&gt;

&lt;p&gt;The comment refers to the action taken when this is a user scan, in which case we do not return immediately, so it&apos;s factually correct. I&apos;ll rephrase on commit.&lt;/p&gt;</comment>
                            <comment id="13696899" author="lhofhansl" created="Mon, 1 Jul 2013 15:58:11 +0000"  >&lt;p&gt;Committed to all branches.&lt;/p&gt;</comment>
                            <comment id="13696966" author="hudson" created="Mon, 1 Jul 2013 16:59:48 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #185 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/185/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/185/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8809&quot; title=&quot;Include deletes in the scan (setRaw) method does not respect the time range or the filter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8809&quot;&gt;&lt;del&gt;HBASE-8809&lt;/del&gt;&lt;/a&gt; Include deletes in the scan (setRaw) method does not respect the time range or the filter (Revision 1498532)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/ScanQueryMatcher.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/regionserver/TestKeepDeletes.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13697001" author="hudson" created="Mon, 1 Jul 2013 17:39:47 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #1030 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/1030/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/1030/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8809&quot; title=&quot;Include deletes in the scan (setRaw) method does not respect the time range or the filter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8809&quot;&gt;&lt;del&gt;HBASE-8809&lt;/del&gt;&lt;/a&gt; Include deletes in the scan (setRaw) method does not respect the time range or the filter (Revision 1498532)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/ScanQueryMatcher.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/regionserver/TestKeepDeletes.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13697016" author="hudson" created="Mon, 1 Jul 2013 17:59:19 +0000"  >&lt;p&gt;Integrated in hbase-0.95 #277 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95/277/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95/277/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8809&quot; title=&quot;Include deletes in the scan (setRaw) method does not respect the time range or the filter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8809&quot;&gt;&lt;del&gt;HBASE-8809&lt;/del&gt;&lt;/a&gt; Include deletes in the scan (setRaw) method does not respect the time range or the filter (Revision 1498533)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ScanQueryMatcher.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestKeepDeletes.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13697040" author="hudson" created="Mon, 1 Jul 2013 18:27:08 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #4204 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4204/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4204/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8809&quot; title=&quot;Include deletes in the scan (setRaw) method does not respect the time range or the filter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8809&quot;&gt;&lt;del&gt;HBASE-8809&lt;/del&gt;&lt;/a&gt; Include deletes in the scan (setRaw) method does not respect the time range or the filter (Revision 1498531)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ScanQueryMatcher.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestKeepDeletes.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13697390" author="hudson" created="Tue, 2 Jul 2013 00:57:00 +0000"  >&lt;p&gt;Integrated in hbase-0.95-on-hadoop2 #155 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95-on-hadoop2/155/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95-on-hadoop2/155/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8809&quot; title=&quot;Include deletes in the scan (setRaw) method does not respect the time range or the filter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8809&quot;&gt;&lt;del&gt;HBASE-8809&lt;/del&gt;&lt;/a&gt; Include deletes in the scan (setRaw) method does not respect the time range or the filter (Revision 1498533)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ScanQueryMatcher.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestKeepDeletes.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13697416" author="hudson" created="Tue, 2 Jul 2013 02:01:59 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #590 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/590/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/590/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8809&quot; title=&quot;Include deletes in the scan (setRaw) method does not respect the time range or the filter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8809&quot;&gt;&lt;del&gt;HBASE-8809&lt;/del&gt;&lt;/a&gt; Include deletes in the scan (setRaw) method does not respect the time range or the filter (Revision 1498531)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ScanQueryMatcher.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestKeepDeletes.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13698612" author="stack" created="Wed, 3 Jul 2013 05:14:51 +0000"  >&lt;p&gt;Should I add the doc. to the refguide?  Is it correct?  If so, where?  We have a deletes section... &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vasu.mariyala%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;vasu.mariyala@gmail.com&quot;&gt;Vasu Mariyala&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="13698664" author="vmariyala" created="Wed, 3 Jul 2013 06:24:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; The document was before the fix. I will update the document after the fix.&lt;/p&gt;</comment>
                            <comment id="13698718" author="lhofhansl" created="Wed, 3 Jul 2013 07:48:51 +0000"  >&lt;p&gt;I&apos;m also planning to revamp the section in the HBase book that covers deletes keepDeletedCells, time range scans with delete markers, etc.&lt;/p&gt;</comment>
                            <comment id="13701107" author="jesse_yates" created="Fri, 5 Jul 2013 20:38:48 +0000"  >&lt;p&gt;As slight follow up to this, it feels like raw scans should also ignore the column version/timestamp filtering. In particular, I&apos;m talking about this section in ScanQueryMatcher:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 MatchCode colChecker = columns.checkColumn(bytes, offset, qualLength,
        timestamp, type, kv.getMemstoreTS() &amp;gt; maxReadPointToTrackVersions);
    /*
     * According to current implementation, colChecker can only be
     * SEEK_NEXT_COL, SEEK_NEXT_ROW, SKIP or INCLUDE. Therefore, always &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;
     * the MatchCode. If it is SEEK_NEXT_ROW, also set stickyNextRow.
     */
    ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Where the ScanWildcardColumnTracker will not ignore the timestamp in the simple case - four (since default is to keep 3 versions) puts to the same row with increasing timestamps will ignore the first by default, even though its still &quot;present&quot; in the store regardless of the rawness of the scan.&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="13701111" author="jesse_yates" created="Fri, 5 Jul 2013 20:47:35 +0000"  >&lt;p&gt;Attaching small example patch for what I&apos;m talking about with ignoring versions for a column on raw scan (in 0.94, should be the same for 0.95/6 and trunk). &lt;/p&gt;</comment>
                            <comment id="13701118" author="lhofhansl" created="Fri, 5 Jul 2013 21:01:56 +0000"  >&lt;p&gt;Heh... I just had exactly the same thought! But I would suggest a different fix:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; maxVersions = &lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.min(scan.getMaxVersions(), scanInfo.getMaxVersions());
+    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; maxVersions = scan.isRaw() ? scan.getMaxVersions() : &lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.min(scan.getMaxVersions(),
+        scanInfo.getMaxVersions());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That way number of versions is controlled by the scan similar to how we do time ranges.&lt;/p&gt;</comment>
                            <comment id="13701121" author="lhofhansl" created="Fri, 5 Jul 2013 21:05:53 +0000"  >&lt;p&gt;If that is acceptable I will commit my fix to all branches under this jira.&lt;/p&gt;</comment>
                            <comment id="13701125" author="jesse_yates" created="Fri, 5 Jul 2013 21:12:06 +0000"  >&lt;p&gt;+1 &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt; LGTM (and much cleaner than my solution &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13701126" author="jesse_yates" created="Fri, 5 Jul 2013 21:12:19 +0000"  >&lt;p&gt;Mind putting in a test for that too?&lt;/p&gt;</comment>
                            <comment id="13701131" author="lhofhansl" created="Fri, 5 Jul 2013 21:21:50 +0000"  >&lt;p&gt;I&apos;m on vacation. Why don&apos;t you write one &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13701159" author="jesse_yates" created="Fri, 5 Jul 2013 22:42:34 +0000"  >&lt;p&gt;Addendum for 0.94 using Lars&apos; fix - includes a test from the client for the scan logic. Happy to do 0.95/6 and trunk patches, if people are ok with this.&lt;/p&gt;

&lt;p&gt;Seems like TestFromClientSide is a bit over-full already, but didn&apos;t see anywhere else that was better for this test... thoughts?&lt;/p&gt;</comment>
                            <comment id="13701170" author="stack" created="Fri, 5 Jul 2013 23:10:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jesse_yates&quot; class=&quot;user-hover&quot; rel=&quot;jesse_yates&quot;&gt;Jesse Yates&lt;/a&gt; TestFromClientSide3?  Otherwise, looks fine to me even if you leave it where it is.&lt;/p&gt;</comment>
                            <comment id="13701218" author="jesse_yates" created="Sat, 6 Jul 2013 01:14:34 +0000"  >&lt;p&gt;Let&apos;s just leave it then... I&apos;ll give folks a chance to comment and look to committing early next week (unless iron hand Lars beats me to it).&lt;/p&gt;</comment>
                            <comment id="13701270" author="lhofhansl" created="Sat, 6 Jul 2013 07:18:35 +0000"  >&lt;p&gt;+1 on test. Could test counting for delete markers as well, but not needed.&lt;br/&gt;
Eventually we may want a separate class for testing raw scans, as it seems to become a more important feature.&lt;/p&gt;</comment>
                            <comment id="13701273" author="lhofhansl" created="Sat, 6 Jul 2013 07:29:14 +0000"  >&lt;p&gt;Same addendum for trunk&lt;/p&gt;</comment>
                            <comment id="13701275" author="jesse_yates" created="Sat, 6 Jul 2013 07:31:17 +0000"  >&lt;p&gt;Or rather, not counting versions? Here&apos;s the code from ColumnTracker#checkVersion:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
   */
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; MatchCode checkVersion(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; type, &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; timestamp) {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!KeyValue.isDelete(type)) {
      currentCount++;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Where delete markers don&apos;t count as versions. Though, in a raw scan, it kinda feels like they should...&lt;/p&gt;</comment>
                            <comment id="13701278" author="lhofhansl" created="Sat, 6 Jul 2013 07:34:54 +0000"  >&lt;p&gt;Committed to all branches. I beat you &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13701279" author="lhofhansl" created="Sat, 6 Jul 2013 07:38:49 +0000"  >&lt;p&gt;The trick with delete markers is that they do not increase the count of the normal KVs they intermingle with in order to disturb that counting (and in any case, all delete markers need to be considered regardless of how many there are).&lt;/p&gt;

&lt;p&gt;TL;DR: you are right. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13701291" author="hudson" created="Sat, 6 Jul 2013 08:32:10 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #4220 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4220/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4220/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8809&quot; title=&quot;Include deletes in the scan (setRaw) method does not respect the time range or the filter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8809&quot;&gt;&lt;del&gt;HBASE-8809&lt;/del&gt;&lt;/a&gt; Addendum to correctly hand versions in raw scans aswell (Jesse and LarsH) (Revision 1500217)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ScanQueryMatcher.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestFromClientSide.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13701293" author="hudson" created="Sat, 6 Jul 2013 08:34:59 +0000"  >&lt;p&gt;Integrated in hbase-0.95 #293 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95/293/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95/293/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8809&quot; title=&quot;Include deletes in the scan (setRaw) method does not respect the time range or the filter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8809&quot;&gt;&lt;del&gt;HBASE-8809&lt;/del&gt;&lt;/a&gt; Addendum to correctly hand versions in raw scans aswell (Jesse and LarsH) (Revision 1500219)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ScanQueryMatcher.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestFromClientSide.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13701294" author="hudson" created="Sat, 6 Jul 2013 08:35:58 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #198 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/198/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/198/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8809&quot; title=&quot;Include deletes in the scan (setRaw) method does not respect the time range or the filter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8809&quot;&gt;&lt;del&gt;HBASE-8809&lt;/del&gt;&lt;/a&gt; Addendum to correctly hand versions in raw scans aswell (Jesse and LarsH) (Revision 1500218)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/ScanQueryMatcher.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/client/TestFromClientSide.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13701295" author="hudson" created="Sat, 6 Jul 2013 08:37:32 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #1044 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/1044/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/1044/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8809&quot; title=&quot;Include deletes in the scan (setRaw) method does not respect the time range or the filter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8809&quot;&gt;&lt;del&gt;HBASE-8809&lt;/del&gt;&lt;/a&gt; Addendum to correctly hand versions in raw scans aswell (Jesse and LarsH) (Revision 1500218)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/main/java/org/apache/hadoop/hbase/regionserver/ScanQueryMatcher.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/client/TestFromClientSide.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13701298" author="lhofhansl" created="Sat, 6 Jul 2013 08:52:49 +0000"  >&lt;p&gt;Arrghs. Makes TestKeepDeletes fail, because previously maxversions was limited to the number of version in the store (raw scans are used to verify the number of puts/deletes visible to a client).&lt;/p&gt;

&lt;p&gt;I&apos;ll do another addendum with a test change (and then no more changes on this jira).&lt;/p&gt;</comment>
                            <comment id="13701300" author="lhofhansl" created="Sat, 6 Jul 2013 08:58:58 +0000"  >&lt;p&gt;Done. Meh.&lt;/p&gt;</comment>
                            <comment id="13701306" author="hudson" created="Sat, 6 Jul 2013 10:08:13 +0000"  >&lt;p&gt;Integrated in HBase-0.94-security #199 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/199/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/199/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8809&quot; title=&quot;Include deletes in the scan (setRaw) method does not respect the time range or the filter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8809&quot;&gt;&lt;del&gt;HBASE-8809&lt;/del&gt;&lt;/a&gt; test fix (Revision 1500231)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/regionserver/TestKeepDeletes.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13701310" author="hudson" created="Sat, 6 Jul 2013 10:43:15 +0000"  >&lt;p&gt;Integrated in HBase-0.94 #1045 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/1045/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/1045/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8809&quot; title=&quot;Include deletes in the scan (setRaw) method does not respect the time range or the filter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8809&quot;&gt;&lt;del&gt;HBASE-8809&lt;/del&gt;&lt;/a&gt; test fix (Revision 1500231)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.94/src/test/java/org/apache/hadoop/hbase/regionserver/TestKeepDeletes.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13701321" author="hudson" created="Sat, 6 Jul 2013 11:40:12 +0000"  >&lt;p&gt;Integrated in hbase-0.95 #294 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95/294/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95/294/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8809&quot; title=&quot;Include deletes in the scan (setRaw) method does not respect the time range or the filter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8809&quot;&gt;&lt;del&gt;HBASE-8809&lt;/del&gt;&lt;/a&gt; test fix (Revision 1500233)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestKeepDeletes.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13701322" author="hudson" created="Sat, 6 Jul 2013 11:44:01 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #4221 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/4221/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/4221/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8809&quot; title=&quot;Include deletes in the scan (setRaw) method does not respect the time range or the filter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8809&quot;&gt;&lt;del&gt;HBASE-8809&lt;/del&gt;&lt;/a&gt; test fix (Revision 1500232)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestKeepDeletes.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13701323" author="hudson" created="Sat, 6 Jul 2013 11:58:35 +0000"  >&lt;p&gt;Integrated in hbase-0.95-on-hadoop2 #167 (See &lt;a href=&quot;https://builds.apache.org/job/hbase-0.95-on-hadoop2/167/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/hbase-0.95-on-hadoop2/167/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8809&quot; title=&quot;Include deletes in the scan (setRaw) method does not respect the time range or the filter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8809&quot;&gt;&lt;del&gt;HBASE-8809&lt;/del&gt;&lt;/a&gt; test fix (Revision 1500233)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8809&quot; title=&quot;Include deletes in the scan (setRaw) method does not respect the time range or the filter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8809&quot;&gt;&lt;del&gt;HBASE-8809&lt;/del&gt;&lt;/a&gt; Addendum to correctly hand versions in raw scans aswell (Jesse and LarsH) (Revision 1500219)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestKeepDeletes.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ScanQueryMatcher.java&lt;/li&gt;
	&lt;li&gt;/hbase/branches/0.95/hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestFromClientSide.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13701338" author="hudson" created="Sat, 6 Jul 2013 13:15:55 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK-on-Hadoop-2.0.0 #602 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/602/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK-on-Hadoop-2.0.0/602/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8809&quot; title=&quot;Include deletes in the scan (setRaw) method does not respect the time range or the filter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8809&quot;&gt;&lt;del&gt;HBASE-8809&lt;/del&gt;&lt;/a&gt; test fix (Revision 1500232)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8809&quot; title=&quot;Include deletes in the scan (setRaw) method does not respect the time range or the filter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8809&quot;&gt;&lt;del&gt;HBASE-8809&lt;/del&gt;&lt;/a&gt; Addendum to correctly hand versions in raw scans aswell (Jesse and LarsH) (Revision 1500217)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestKeepDeletes.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;larsh : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/main/java/org/apache/hadoop/hbase/regionserver/ScanQueryMatcher.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/hbase-server/src/test/java/org/apache/hadoop/hbase/client/TestFromClientSide.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13721842" author="stack" created="Sun, 28 Jul 2013 04:07:10 +0000"  >&lt;p&gt;Needs a release note.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12591074" name="8806-trunk-addendum.txt" size="4173" author="lhofhansl" created="Sat, 6 Jul 2013 07:29:14 +0000"/>
                            <attachment id="12590029" name="8809-0.94.txt" size="3672" author="lhofhansl" created="Fri, 28 Jun 2013 12:40:34 +0000"/>
                            <attachment id="12590034" name="8809-trunk.txt" size="3127" author="lhofhansl" created="Fri, 28 Jun 2013 13:03:29 +0000"/>
                            <attachment id="12590097" name="DeleteMarkers.doc" size="21504" author="vmariyala" created="Fri, 28 Jun 2013 22:01:44 +0000"/>
                            <attachment id="12591039" name="hbase-8809-0.94-addendum-example.patch" size="1587" author="jesse_yates" created="Fri, 5 Jul 2013 20:47:35 +0000"/>
                            <attachment id="12591049" name="hbase-8809-addendum-0.94-v0.patch" size="4328" author="jesse_yates" created="Fri, 5 Jul 2013 22:42:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 28 Jun 2013 11:51:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>335280</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 20 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1lu1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>335604</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&amp;quot;Raw&amp;quot; scans (Scan.setRaw(true)), now honor the scan&amp;#39;s time range if specified.&lt;br/&gt;
Previously the time range would be ignored.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>