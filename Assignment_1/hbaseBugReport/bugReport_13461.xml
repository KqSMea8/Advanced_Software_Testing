<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:43:34 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-13461/HBASE-13461.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-13461] RegionSever Hlog flush BLOCKED  on  hbase-0.96.2-hadoop2</title>
                <link>https://issues.apache.org/jira/browse/HBASE-13461</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;I try to dump  thread stack below:&lt;/p&gt;

&lt;p&gt;&quot;RpcServer.handler=63,port=60020&quot; daemon prio=10 tid=0x00007fdcddc5d000 nid=0x5f9 waiting for monitor entry &lt;span class=&quot;error&quot;&gt;&amp;#91;0x00007fd289194000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: BLOCKED (on object monitor)&lt;br/&gt;
        at org.apache.hadoop.fs.FSOutputSummer.write(FSOutputSummer.java:98)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;waiting to lock &amp;lt;0x00007fd36c023728&amp;gt; (a org.apache.hadoop.hdfs.DFSOutputStream)&lt;br/&gt;
        at org.apache.hadoop.fs.FSDataOutputStream$PositionCache.write(FSDataOutputStream.java:59)&lt;br/&gt;
        at java.io.DataOutputStream.write(DataOutputStream.java:90)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0x00007fd510cfdc28&amp;gt; (a org.apache.hadoop.hdfs.client.HdfsDataOutputStream)&lt;br/&gt;
        at com.google.protobuf.CodedOutputStream.refreshBuffer(CodedOutputStream.java:833)&lt;br/&gt;
        at com.google.protobuf.CodedOutputStream.flush(CodedOutputStream.java:843)&lt;br/&gt;
        at com.google.protobuf.AbstractMessageLite.writeDelimitedTo(AbstractMessageLite.java:91)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.wal.ProtobufLogWriter.append(ProtobufLogWriter.java:87)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.wal.FSHLog$LogSyncer.hlogFlush(FSHLog.java:1026)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.wal.FSHLog.syncer(FSHLog.java:1075)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0x00007fd2d9bbfad0&amp;gt; (a java.lang.Object)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.wal.FSHLog.sync(FSHLog.java:1240)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegion.syncOrDefer(HRegion.java:5593)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegion.doMiniBatchMutation(HRegion.java:2315)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegion.batchMutate(HRegion.java:2028)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegionServer.doBatchOp(HRegionServer.java:4094)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegionServer.doNonAtomicRegionMutation(HRegionServer.java:3380)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegionServer.multi(HRegionServer.java:3284)&lt;br/&gt;
        at org.apache.hadoop.hbase.protobuf.generated.ClientProtos$ClientService$2.callBlockingMethod(ClientProtos.java:26935)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.RpcServer.call(RpcServer.java:2185)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.RpcServer$Handler.run(RpcServer.java:1889)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&quot;RpcServer.handler=12,port=60020&quot; daemon prio=10 tid=0x00007fdcddf2c800 nid=0x5c6 in Object.wait() &lt;span class=&quot;error&quot;&gt;&amp;#91;0x00007fd28c4c7000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: TIMED_WAITING (on object monitor)&lt;br/&gt;
        at java.lang.Object.wait(Native Method)&lt;br/&gt;
        at org.apache.hadoop.hdfs.DFSOutputStream.waitForAckedSeqno(DFSOutputStream.java:1803)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;locked &amp;lt;0x00007fd45857c540&amp;gt; (a java.util.LinkedList)&lt;br/&gt;
        at org.apache.hadoop.hdfs.DFSOutputStream.flushOrSync(DFSOutputStream.java:1697)&lt;br/&gt;
        at org.apache.hadoop.hdfs.DFSOutputStream.hflush(DFSOutputStream.java:1590)&lt;br/&gt;
        at org.apache.hadoop.hdfs.DFSOutputStream.sync(DFSOutputStream.java:1575)&lt;br/&gt;
        at org.apache.hadoop.fs.FSDataOutputStream.sync(FSDataOutputStream.java:121)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.wal.ProtobufLogWriter.sync(ProtobufLogWriter.java:135)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.wal.FSHLog.syncer(FSHLog.java:1098)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.wal.FSHLog.sync(FSHLog.java:1240)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegion.syncOrDefer(HRegion.java:5593)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegion.doMiniBatchMutation(HRegion.java:2315)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegion.batchMutate(HRegion.java:2028)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegionServer.doBatchOp(HRegionServer.java:4094)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegionServer.doNonAtomicRegionMutation(HRegionServer.java:3380)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegionServer.multi(HRegionServer.java:3284)&lt;br/&gt;
        at org.apache.hadoop.hbase.protobuf.generated.ClientProtos$ClientService$2.callBlockingMethod(ClientProtos.java:26935)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.RpcServer.call(RpcServer.java:2185)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.RpcServer$Handler.run(RpcServer.java:1889)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&quot;RpcServer.handler=11,port=60020&quot; daemon prio=10 tid=0x00007fdcdd9e1000 nid=0x5c5 in Object.wait() &lt;span class=&quot;error&quot;&gt;&amp;#91;0x00007fd28c5c8000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: TIMED_WAITING (on object monitor)&lt;br/&gt;
        at java.lang.Object.wait(Native Method)&lt;br/&gt;
        at org.apache.hadoop.hdfs.DFSOutputStream.waitForAckedSeqno(DFSOutputStream.java:1803)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;locked &amp;lt;0x00007fd45857c540&amp;gt; (a java.util.LinkedList)&lt;br/&gt;
        at org.apache.hadoop.hdfs.DFSOutputStream.flushOrSync(DFSOutputStream.java:1697)&lt;br/&gt;
        at org.apache.hadoop.hdfs.DFSOutputStream.hflush(DFSOutputStream.java:1590)&lt;br/&gt;
        at org.apache.hadoop.hdfs.DFSOutputStream.sync(DFSOutputStream.java:1575)&lt;br/&gt;
        at org.apache.hadoop.fs.FSDataOutputStream.sync(FSDataOutputStream.java:121)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.wal.ProtobufLogWriter.sync(ProtobufLogWriter.java:135)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.wal.FSHLog.syncer(FSHLog.java:1098)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.wal.FSHLog.sync(FSHLog.java:1240)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegion.syncOrDefer(HRegion.java:5593)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegion.doMiniBatchMutation(HRegion.java:2315)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegion.batchMutate(HRegion.java:2028)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegionServer.doBatchOp(HRegionServer.java:4094)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegionServer.doNonAtomicRegionMutation(HRegionServer.java:3380)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegionServer.multi(HRegionServer.java:3284)&lt;br/&gt;
        at org.apache.hadoop.hbase.protobuf.generated.ClientProtos$ClientService$2.callBlockingMethod(ClientProtos.java:26935)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.RpcServer.call(RpcServer.java:2185)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.RpcServer$Handler.run(RpcServer.java:1889)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;&quot;RpcServer.handler=95,port=60020&quot; daemon prio=10 tid=0x00007fdcdc50b800 nid=0x619 in Object.wait() &lt;span class=&quot;error&quot;&gt;&amp;#91;0x00007fd287174000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: WAITING (on object monitor)&lt;br/&gt;
        at java.lang.Object.wait(Native Method)&lt;br/&gt;
        at java.lang.Object.wait(Object.java:485)&lt;br/&gt;
        at org.apache.hadoop.hdfs.DFSOutputStream.waitAndQueueCurrentPacket(DFSOutputStream.java:1475)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;locked &amp;lt;0x00007fd45857c540&amp;gt; (a java.util.LinkedList)&lt;br/&gt;
        at org.apache.hadoop.hdfs.DFSOutputStream.flushOrSync(DFSOutputStream.java:1688)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0x00007fd36c023728&amp;gt; (a org.apache.hadoop.hdfs.DFSOutputStream)&lt;br/&gt;
        at org.apache.hadoop.hdfs.DFSOutputStream.hflush(DFSOutputStream.java:1590)&lt;br/&gt;
        at org.apache.hadoop.hdfs.DFSOutputStream.sync(DFSOutputStream.java:1575)&lt;br/&gt;
        at org.apache.hadoop.fs.FSDataOutputStream.sync(FSDataOutputStream.java:121)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.wal.ProtobufLogWriter.sync(ProtobufLogWriter.java:135)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.wal.FSHLog.syncer(FSHLog.java:1098)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.wal.FSHLog.sync(FSHLog.java:1240)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegion.syncOrDefer(HRegion.java:5593)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegion.doMiniBatchMutation(HRegion.java:2315)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegion.batchMutate(HRegion.java:2028)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegionServer.doBatchOp(HRegionServer.java:4094)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegionServer.doNonAtomicRegionMutation(HRegionServer.java:3380)&lt;br/&gt;
        at org.apache.hadoop.hbase.regionserver.HRegionServer.multi(HRegionServer.java:3284)&lt;br/&gt;
        at org.apache.hadoop.hbase.protobuf.generated.ClientProtos$ClientService$2.callBlockingMethod(ClientProtos.java:26935)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.RpcServer.call(RpcServer.java:2185)&lt;br/&gt;
        at org.apache.hadoop.hbase.ipc.RpcServer$Handler.run(RpcServer.java:1889)&lt;/li&gt;
&lt;/ul&gt;





&lt;p&gt;&quot;DataStreamer for file /hbase/WALs/hdp910.qq.diditaxi.com,60020,1428079391214/hdp910.qq.diditaxi.com%2C60020%2C1428079391214.1428919313998 block BP-1892361854-10.231.149.77-1397112594861:blk_1320569732_10997627&lt;br/&gt;
53479&quot; daemon prio=10 tid=0x00007fdccda8f800 nid=0x4c34 in Object.wait() &lt;span class=&quot;error&quot;&gt;&amp;#91;0x00007fd23646c000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: TIMED_WAITING (on object monitor)&lt;br/&gt;
        at java.lang.Object.wait(Native Method)&lt;br/&gt;
        at org.apache.hadoop.hdfs.DFSOutputStream$DataStreamer.run(DFSOutputStream.java:491)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;locked &amp;lt;0x00007fd45857c540&amp;gt; (a java.util.LinkedList)&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment>&lt;p&gt;hbase-0.96.2-hadoop2   hadoop2.2.0&lt;/p&gt;</environment>
        <key id="12820708">HBASE-13461</key>
            <summary>RegionSever Hlog flush BLOCKED  on  hbase-0.96.2-hadoop2</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kukuzidian">zhangjg</reporter>
                        <labels>
                    </labels>
                <created>Tue, 14 Apr 2015 04:09:47 +0000</created>
                <updated>Tue, 14 Apr 2015 11:42:36 +0000</updated>
                            <resolved>Tue, 14 Apr 2015 11:06:18 +0000</resolved>
                                    <version>0.96.2</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="14493535" author="kukuzidian" created="Tue, 14 Apr 2015 04:12:05 +0000"  >&lt;p&gt;The 1 hour cycle write blocking &lt;/p&gt;</comment>
                            <comment id="14493812" author="xieliang007" created="Tue, 14 Apr 2015 08:54:30 +0000"  >&lt;p&gt;Usually, it&apos;s not a hbase issue.  Most of times, &quot;waitForAckedSeqno&quot; means the datanode write pipeline is somehow slow, maybe there&apos;s a slow write io or datanode internal lock.&lt;/p&gt;</comment>
                            <comment id="14493906" author="esteban" created="Tue, 14 Apr 2015 11:05:58 +0000"  >&lt;p&gt;What &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xieliang007&quot; class=&quot;user-hover&quot; rel=&quot;xieliang007&quot;&gt;Liang Xie&lt;/a&gt; said. And is usually related to a bad drive or a network issue that is locking the datanode. If you further help &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kukuzidian&quot; class=&quot;user-hover&quot; rel=&quot;kukuzidian&quot;&gt;zhangjg&lt;/a&gt; please use the user mailing lists from &lt;a href=&quot;http://hbase.apache.org/mail-lists.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hbase.apache.org/mail-lists.html&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="14493965" author="kukuzidian" created="Tue, 14 Apr 2015 11:37:08 +0000"  >&lt;p&gt;I have here a thread stack details. Can you guys help me locate the problem?&lt;br/&gt;
Data is written into the very rules in each whole point will be blocked for 2 minutes, I turn off major compact and auto split.&lt;/p&gt;</comment>
                            <comment id="14493994" author="kukuzidian" created="Tue, 14 Apr 2015 11:37:46 +0000"  >&lt;p&gt;Network flow diagram as follows:&lt;/p&gt;</comment>
                            <comment id="14493999" author="kukuzidian" created="Tue, 14 Apr 2015 11:42:36 +0000"  >&lt;p&gt;network flow diagrm as follows&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12725206" name="hbase.png" size="79197" author="kukuzidian" created="Tue, 14 Apr 2015 11:42:36 +0000"/>
                            <attachment id="12725205" name="hbase.png" size="79197" author="kukuzidian" created="Tue, 14 Apr 2015 11:40:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 14 Apr 2015 08:54:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 35 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2d7kf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>