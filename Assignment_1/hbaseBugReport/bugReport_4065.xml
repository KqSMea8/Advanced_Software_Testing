<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:15:36 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-4065/HBASE-4065.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-4065] TableOutputFormat ignores failure to create table instance</title>
                <link>https://issues.apache.org/jira/browse/HBASE-4065</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;If TableOutputFormat in the new API fails to create a table, it simply logs this at ERROR level and then continues on its way. Then, the first write() to the table will throw a NPE since table hasn&apos;t been set.&lt;/p&gt;

&lt;p&gt;Instead, it should probably rethrow the exception as a RuntimeException in setConf, or do what the old-API TOF does and not create the HTable instance until getRecordWriter, where it can throw an IOE.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12512929">HBASE-4065</key>
            <summary>TableOutputFormat ignores failure to create table instance</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="brocknoland">Brock Noland</assignee>
                                    <reporter username="tlipcon">Todd Lipcon</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 Jul 2011 04:56:01 +0000</created>
                <updated>Fri, 12 Oct 2012 05:35:07 +0000</updated>
                            <resolved>Thu, 13 Oct 2011 19:09:33 +0000</resolved>
                                    <version>0.90.3</version>
                                    <fixVersion>0.92.0</fixVersion>
                    <fixVersion>0.94.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13088247" author="brocknoland" created="Sat, 20 Aug 2011 19:07:22 +0000"  >&lt;p&gt;Attached throws a RumtimeException since ZKUtil.applyClusterKeyToConf also throws IOException and probably belongs in setConf. Also this throws the error earlier in the process.&lt;/p&gt;</comment>
                            <comment id="13088309" author="yuzhihong@gmail.com" created="Sun, 21 Aug 2011 03:54:10 +0000"  >&lt;p&gt;In mapred/TableOutputFormat.java:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt;(IOException e) {
      LOG.error(e);
      &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; e;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Should we make their behavior consistent ?&lt;/p&gt;</comment>
                            <comment id="13088320" author="brocknoland" created="Sun, 21 Aug 2011 06:05:22 +0000"  >&lt;p&gt;In the mapred package, HTable is created inside getRecordWriter where it can throw an IOE. In mapreduce HTable is created in setConf where an IOE cannot be thrown. I am fine with moving the HTable creation to getRecordWriter like mapred, but that still leaves us with the fact that ZKUtil.applyClusterKeyToConf throws IOE. &lt;/p&gt;

&lt;p&gt;My assumption was that an IOE from ZKUtil.applyClusterKeyToConf should be considered fatal as well? That may certainly not be true and we could simply move HTable creation to getRecordWriter.&lt;/p&gt;</comment>
                            <comment id="13088363" author="yuzhihong@gmail.com" created="Sun, 21 Aug 2011 13:40:51 +0000"  >&lt;p&gt;We should handle IOE out of ZKUtil.applyClusterKeyToConf() as well&lt;br/&gt;
So the patch is fine.&lt;/p&gt;

&lt;p&gt;Should the following check tableName&apos;s length as well ?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(tableName == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
+      &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalArgumentException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Must specify table name&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Thanks for the work, Brock.&lt;/p&gt;</comment>
                            <comment id="13088384" author="brocknoland" created="Sun, 21 Aug 2011 15:19:28 +0000"  >&lt;p&gt;Good call.&lt;/p&gt;

&lt;p&gt;Attached checks for tableName.length() &amp;lt;= 0.&lt;/p&gt;</comment>
                            <comment id="13088387" author="yuzhihong@gmail.com" created="Sun, 21 Aug 2011 15:30:16 +0000"  >&lt;p&gt;+1 on patch version 2.&lt;/p&gt;</comment>
                            <comment id="13088401" author="brocknoland" created="Sun, 21 Aug 2011 16:43:07 +0000"  >&lt;p&gt;Submitting patch, I am not entirely sure how to get jenkins to run but I think this might be it.&lt;/p&gt;</comment>
                            <comment id="13088864" author="yuzhihong@gmail.com" created="Mon, 22 Aug 2011 18:05:51 +0000"  >&lt;p&gt;Integrated to branch and TRUNK.&lt;/p&gt;

&lt;p&gt;Thanks for the patch Brock.&lt;/p&gt;</comment>
                            <comment id="13088975" author="hudson" created="Mon, 22 Aug 2011 20:10:17 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2128 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2128/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2128/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4065&quot; title=&quot;TableOutputFormat ignores failure to create table instance&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4065&quot;&gt;&lt;del&gt;HBASE-4065&lt;/del&gt;&lt;/a&gt;  TableOutputFormat ignores failure to create table instance  &lt;br/&gt;
               (Brock Noland)&lt;/p&gt;

&lt;p&gt;tedyu : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/mapreduce/TableOutputFormat.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13126819" author="brocknoland" created="Thu, 13 Oct 2011 19:09:33 +0000"  >&lt;p&gt;Marking issue resolve.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12491068" name="HBASE-4065.1.patch" size="1029" author="brocknoland" created="Sat, 20 Aug 2011 19:07:22 +0000"/>
                            <attachment id="12491099" name="HBASE-4065.2.patch" size="1064" author="brocknoland" created="Sun, 21 Aug 2011 15:19:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 20 Aug 2011 19:07:22 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>27154</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 10 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08qsf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>48940</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>