<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:24:50 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5109/HBASE-5109.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5109] Fix TestAvroServer so that it waits properly for the modifyTable operation to complete</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5109</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;TestAvroServer has the following issue&lt;/p&gt;

&lt;p&gt;    impl.modifyTable(tableAname, tableA);&lt;br/&gt;
    // It can take a while for the change to take effect. Wait here a while.&lt;br/&gt;
    while(impl.describeTable(tableAname) == null ) &lt;/p&gt;
{
      Threads.sleep(100);
    }
&lt;p&gt;    assertTrue(impl.describeTable(tableAname).maxFileSize == 123456L);&lt;/p&gt;

&lt;p&gt;impl.describeTable(tableAname) returns the default maxSize 256M right away as modifyTable is async. Before &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4328&quot; title=&quot;make HBaseAdmin.modifyTable sync&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4328&quot;&gt;&lt;del&gt;HBASE-4328&lt;/del&gt;&lt;/a&gt; is fixed, we can fix the test code to wait for say max of 5 seconds to check if impl.describeTable(tableAname).maxFileSize is uploaded to 123456L. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12536644">HBASE-5109</key>
            <summary>Fix TestAvroServer so that it waits properly for the modifyTable operation to complete</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="mingma">Ming Ma</assignee>
                                    <reporter username="mingma">Ming Ma</reporter>
                        <labels>
                    </labels>
                <created>Fri, 30 Dec 2011 07:19:38 +0000</created>
                <updated>Tue, 6 Jan 2015 17:16:20 +0000</updated>
                            <resolved>Tue, 6 Jan 2015 17:16:20 +0000</resolved>
                                                                    <component>test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13177575" author="mingma" created="Fri, 30 Dec 2011 07:21:57 +0000"  >&lt;p&gt;Here is the fix.&lt;/p&gt;</comment>
                            <comment id="13177695" author="zhihyu@ebaysf.com" created="Fri, 30 Dec 2011 16:35:23 +0000"  >&lt;p&gt;@Ming:&lt;br/&gt;
A loop was introduced by the following checkin:&lt;/p&gt;

&lt;p&gt;r1186531 | stack | 2011-10-19 15:05:37 -0700 (Wed, 19 Oct 2011) | 1 line&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4621&quot; title=&quot;TestAvroServer fails quite often intermittently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4621&quot;&gt;&lt;del&gt;HBASE-4621&lt;/del&gt;&lt;/a&gt; TestAvroServer fails quite often intermittently&lt;/p&gt;

&lt;p&gt;Is your patch still needed ?&lt;br/&gt;
TestAvroServer hasn&apos;t failed for quite a while.&lt;/p&gt;</comment>
                            <comment id="13179794" author="mingma" created="Wed, 4 Jan 2012 19:34:07 +0000"  >&lt;p&gt;Thanks, Ted. Then, it is mostly taken cared of. Just want to point out two small issues in the fix for HBase-4621:&lt;/p&gt;

&lt;p&gt;1. The loop won&apos;t stop if there is a bug in modifyTable call. In that case, the unit test will just hang instead of fail. Adding a timeout might be helpful.&lt;br/&gt;
2. The two asserts statement after the while statement are redundant. So we can take one out.&lt;/p&gt;</comment>
                            <comment id="13179805" author="stack" created="Wed, 4 Jan 2012 19:44:30 +0000"  >&lt;p&gt;+1 on committing the patch.  Its some nice, if small, cleanup.&lt;/p&gt;</comment>
                            <comment id="14266321" author="clehene" created="Tue, 6 Jan 2015 16:14:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=saint.ack%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;saint.ack@gmail.com&quot;&gt;Stack&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mingma&quot; class=&quot;user-hover&quot; rel=&quot;mingma&quot;&gt;Ming Ma&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tedyu@apache.org&quot;&gt;Ted Yu&lt;/a&gt; this fell through the cracks? Is this still valid?&lt;/p&gt;</comment>
                            <comment id="14266428" author="yuzhihong@gmail.com" created="Tue, 6 Jan 2015 17:16:20 +0000"  >&lt;p&gt;TestAvroServer doesn&apos;t exist any more.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12508918" name="HBASE-5109-0.92.patch" size="1195" author="mingma" created="Fri, 30 Dec 2011 07:21:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 30 Dec 2011 16:35:23 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>222327</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 49 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02ck7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11636</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>