<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:09:06 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-3303/HBASE-3303.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-3303] Lower hbase.regionserver.handler.count from 25 back to 10</title>
                <link>https://issues.apache.org/jira/browse/HBASE-3303</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;With &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2506&quot; title=&quot;Too easy to OOME a RS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2506&quot;&gt;&lt;del&gt;HBASE-2506&lt;/del&gt;&lt;/a&gt; in mind, I tested a low-memory environment (2GB of heap) with a lot of concurrent writers using the default write buffer to verify if a lower number of handlers actually helps reducing the occurrence full GCs. Very unscientifically, at this moment I think it&apos;s safe to say that yes, it helps.&lt;/p&gt;

&lt;p&gt;With the defaults, I saw a region server struggling more and more because the random inserters at some point started filling up all the handlers and were all BLOCKED trying to sync the WAL. It&apos;s safe to say that each of those clients carried a payload that the GC cannot get rid of and it&apos;s one that we don&apos;t account for (as opposed to MemStore and the block cache).&lt;/p&gt;

&lt;p&gt;With a much lower setting of 5, I didn&apos;t see the situation.&lt;/p&gt;

&lt;p&gt;It kind of confirms my hypothesis but I need to do more proper testing. In the mean time, in order to lower the onslaught of users that write to the ML complaining about either GCs or OOMEs, I think we should set the handlers back to what it was originally (10) for 0.90.0 and add some documentation about configuring hbase.regionserver.handler.count&lt;/p&gt;

&lt;p&gt;I&apos;d like to hear others&apos; thoughts.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12491931">HBASE-3303</key>
            <summary>Lower hbase.regionserver.handler.count from 25 back to 10</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jdcryans">Jean-Daniel Cryans</assignee>
                                    <reporter username="jdcryans">Jean-Daniel Cryans</reporter>
                        <labels>
                    </labels>
                <created>Thu, 2 Dec 2010 22:01:53 +0000</created>
                <updated>Fri, 20 Nov 2015 12:43:24 +0000</updated>
                            <resolved>Fri, 3 Dec 2010 05:05:54 +0000</resolved>
                                                    <fixVersion>0.90.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12966305" author="stack" created="Thu, 2 Dec 2010 22:17:22 +0000"  >&lt;p&gt;+1 on default settings tending toward the conservative.  Need to add handlers to &apos;important configuration&apos; in the book though.&lt;/p&gt;</comment>
                            <comment id="12966308" author="streamy" created="Thu, 2 Dec 2010 22:21:29 +0000"  >&lt;p&gt;+1 to jd, +1 to stack&lt;/p&gt;</comment>
                            <comment id="12966338" author="apurtell" created="Thu, 2 Dec 2010 23:12:10 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;I took the same step &amp;#8211; change 100 -&amp;gt; 10 &amp;#8211; to reduce the probability that regionservers would OOME under high write load. It helped. &lt;/p&gt;



</comment>
                            <comment id="12966390" author="jdcryans" created="Fri, 3 Dec 2010 02:01:10 +0000"  >&lt;p&gt;I did some more testing of 5 VS 25 and the former is only a bit slower (although more testing would be required for a more precise number). 10 seems like a good compromise.&lt;/p&gt;</comment>
                            <comment id="12966410" author="stack" created="Fri, 3 Dec 2010 05:00:52 +0000"  >&lt;p&gt;Here is what I committed.  Didn&apos;t add to book since don&apos;t think it important (not if no difference in throughput).  Would rather wait on more evidence before calling this an important configuration.&lt;/p&gt;</comment>
                            <comment id="12966411" author="stack" created="Fri, 3 Dec 2010 05:05:31 +0000"  >&lt;p&gt;Here is what I committed.  Didn&apos;t add to book since don&apos;t think it important (not if no difference in throughput).  Would rather wait on more evidence before calling this an important configuration.&lt;/p&gt;</comment>
                            <comment id="12966412" author="stack" created="Fri, 3 Dec 2010 05:05:54 +0000"  >&lt;p&gt;Committed trunk and branch.&lt;/p&gt;</comment>
                            <comment id="12966415" author="streamy" created="Fri, 3 Dec 2010 05:13:42 +0000"  >&lt;p&gt;I disagree that this is not an important configuration.  We&apos;ve definitely had to put this way up to handle more concurrent clients.  These Put throughput tests are just one type of workload.&lt;/p&gt;</comment>
                            <comment id="12966424" author="jdcryans" created="Fri, 3 Dec 2010 05:36:51 +0000"  >&lt;p&gt;Patch with doc for the book.&lt;/p&gt;</comment>
                            <comment id="15017512" author="lars_francke" created="Fri, 20 Nov 2015 12:43:24 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12465210" name="3303.txt" size="2639" author="stack" created="Fri, 3 Dec 2010 05:05:31 +0000"/>
                            <attachment id="12465209" name="3303.txt" size="2639" author="stack" created="Fri, 3 Dec 2010 05:00:52 +0000"/>
                            <attachment id="12465216" name="HBASE-3303-doc.patch" size="2268" author="jdcryans" created="Fri, 3 Dec 2010 05:36:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 2 Dec 2010 22:17:22 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32979</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hlnb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>100769</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>