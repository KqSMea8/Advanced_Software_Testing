<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:25:34 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5191/HBASE-5191.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5191] Fix compilation error against hadoop 0.23.1</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5191</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;From Mahadev:&lt;/p&gt;

&lt;p&gt;I just checked out 0.92 branch and tried running:&lt;/p&gt;

&lt;p&gt;mvn -Dhadoop.profile=23 clean test&lt;br/&gt;
-Dtest=org.apache.hadoop.hbase.mapreduce.TestTableMapReduce&lt;/p&gt;

&lt;p&gt;Looks like a compilation issue:&lt;/p&gt;

&lt;p&gt;------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Failed to execute goal&lt;br/&gt;
org.apache.maven.plugins:maven-compiler-plugin:2.0.2:testCompile&lt;br/&gt;
(default-testCompile) on project hbase: Compilation failure&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /Users/mahadev/workspace/hbase-workspace/hbase-git/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestLogRolling.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;341,33&amp;#93;&lt;/span&gt;&lt;br/&gt;
cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; symbol  : variable dnRegistration&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; location: class org.apache.hadoop.hdfs.server.datanode.DataNode&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12538284">HBASE-5191</key>
            <summary>Fix compilation error against hadoop 0.23.1</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="zhihyu@ebaysf.com">Ted Yu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 Jan 2012 04:09:24 +0000</created>
                <updated>Fri, 20 Nov 2015 11:52:26 +0000</updated>
                            <resolved>Wed, 1 Feb 2012 19:09:07 +0000</resolved>
                                    <version>0.92.0</version>
                                    <fixVersion>0.92.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13185428" author="zhihyu@ebaysf.com" created="Fri, 13 Jan 2012 04:37:42 +0000"  >&lt;p&gt;After fixing the compilation error, the test failed with:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
testLogRollOnDatanodeDeath(org.apache.hadoop.hbase.regionserver.wal.TestLogRolling)  Time elapsed: 20.471 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.lang.AssertionError: Need HDFS-826 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; test
  at org.junit.Assert.fail(Assert.java:93)
  at org.junit.Assert.assertTrue(Assert.java:43)
  at org.apache.hadoop.hbase.regionserver.wal.TestLogRolling.testLogRollOnDatanodeDeath(TestLogRolling.java:318)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This is the related line:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    assertTrue(&lt;span class=&quot;code-quote&quot;&gt;&quot;Need HDFS-826 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; test&quot;&lt;/span&gt;, log.canGetCurReplicas());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This is how we retrieve getNumCurrentReplicas method in HLog:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; Method getGetNumCurrentReplicas(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FSDataOutputStream os) {
    Method m = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
    Exception exception = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (os != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
      &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
        m = os.getWrappedStream().getClass().
          getMethod(&lt;span class=&quot;code-quote&quot;&gt;&quot;getNumCurrentReplicas&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;lt;?&amp;gt; []{});
        m.setAccessible(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Here is the exception:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.NoSuchMethodException: org.apache.hadoop.hdfs.DFSOutputStream.getNumCurrentReplicas()
  at java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.getMethod(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.java:1605)
  at org.apache.hadoop.hbase.regionserver.wal.HLog.getGetNumCurrentReplicas(HLog.java:458)
  at org.apache.hadoop.hbase.regionserver.wal.HLog.&amp;amp;lt;init&amp;amp;gt;(HLog.java:441)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13185430" author="zhihyu@ebaysf.com" created="Fri, 13 Jan 2012 04:48:04 +0000"  >&lt;p&gt;After getting over NoSuchMethodException, the test failed with:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
testLogRollOnPipelineRestart(org.apache.hadoop.hbase.regionserver.wal.TestLogRolling)  Time elapsed: 48.086 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.io.IOException: Cannot obtain block length &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; LocatedBlock{BP-842011159-192.168.0.11-1326429822518:blk_6287795838555417459_1014; getBlockSize()=1828; corrupt=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;; offset=0; locs=[127.0.0.1:59451, 127.0.0.1:59455]}
  at org.apache.hadoop.hdfs.DFSInputStream.readBlockLength(DFSInputStream.java:197)
  at org.apache.hadoop.hdfs.DFSInputStream.openInfo(DFSInputStream.java:141)
  at org.apache.hadoop.hdfs.DFSInputStream.&amp;lt;init&amp;gt;(DFSInputStream.java:112)
  at org.apache.hadoop.hdfs.DFSClient.open(DFSClient.java:737)
  at org.apache.hadoop.hdfs.DistributedFileSystem.open(DistributedFileSystem.java:235)
  at org.apache.hadoop.io.SequenceFile$Reader.openFile(SequenceFile.java:1768)
  at org.apache.hadoop.hbase.regionserver.wal.SequenceFileLogReader$WALReader.openFile(SequenceFileLogReader.java:66)
  at org.apache.hadoop.io.SequenceFile$Reader.&amp;lt;init&amp;gt;(SequenceFile.java:1688)
  at org.apache.hadoop.io.SequenceFile$Reader.&amp;lt;init&amp;gt;(SequenceFile.java:1709)
  at org.apache.hadoop.hbase.regionserver.wal.SequenceFileLogReader$WALReader.&amp;lt;init&amp;gt;(SequenceFileLogReader.java:58)
  at org.apache.hadoop.hbase.regionserver.wal.SequenceFileLogReader.init(SequenceFileLogReader.java:166)
  at org.apache.hadoop.hbase.regionserver.wal.HLog.getReader(HLog.java:692)
  at org.apache.hadoop.hbase.regionserver.wal.TestLogRolling.testLogRollOnPipelineRestart(TestLogRolling.java:497)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13185952" author="zhihyu@ebaysf.com" created="Fri, 13 Jan 2012 22:57:05 +0000"  >&lt;p&gt;This patch allows me to make some progress.&lt;/p&gt;</comment>
                            <comment id="13185974" author="zhihyu@ebaysf.com" created="Fri, 13 Jan 2012 23:20:29 +0000"  >&lt;p&gt;After the dfsCluster.stopDataNode( i ) call, the following assertion fails (with hadoop 1.0)&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    assertTrue(&lt;span class=&quot;code-quote&quot;&gt;&quot;DataNodes &quot;&lt;/span&gt; + dfsCluster.getDataNodes().size() +
        &lt;span class=&quot;code-quote&quot;&gt;&quot; &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; replication &quot;&lt;/span&gt; + fs.getDefaultReplication(), 
      dfsCluster.getDataNodes().size() &amp;gt;= fs.getDefaultReplication() + 1);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Failed tests:   testLogRollOnDatanodeDeath(org.apache.hadoop.hbase.regionserver.wal.TestLogRolling): DataNodes 2 &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; replication 2
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13187298" author="mahadev" created="Mon, 16 Jan 2012 23:19:03 +0000"  >&lt;p&gt;@Ted, &lt;br/&gt;
 Thanks for running through this. Any further update? Can I help in any way? &lt;/p&gt;</comment>
                            <comment id="13187300" author="zhihyu@ebaysf.com" created="Mon, 16 Jan 2012 23:26:33 +0000"  >&lt;p&gt;I haven&apos;t found out why the assertion doesn&apos;t fail in HBase trunk - I basically used an equivalent dfsCluster.stopDataNode() call.&lt;br/&gt;
Since any patch has to make TestLogRolling pass for hadoop 1.0, I am still searching for the transformation.&lt;/p&gt;

&lt;p&gt;This effort was partially sidetracked by work on 0.92&lt;/p&gt;</comment>
                            <comment id="13198061" author="zhihyu@ebaysf.com" created="Wed, 1 Feb 2012 19:09:07 +0000"  >&lt;p&gt;Fixed as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5212&quot; title=&quot;Fix test TestTableMapReduce against 0.23.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5212&quot;&gt;&lt;del&gt;HBASE-5212&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15015746" author="lars_francke" created="Fri, 20 Nov 2015 11:52:26 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12538581">HBASE-5212</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12539941">HBASE-5284</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12510539" name="5191.txt" size="1990" author="zhihyu@ebaysf.com" created="Fri, 13 Jan 2012 22:57:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 16 Jan 2012 23:19:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>223790</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i069nr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34496</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>