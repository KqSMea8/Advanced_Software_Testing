<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:00:36 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-2286/HBASE-2286.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-2286] [Transactional Contrib] Correctly handle or avoid cases where writes occur in same millisecond</title>
                <link>https://issues.apache.org/jira/browse/HBASE-2286</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;This patch fixes a few issues where puts/deletes occur with the same timestamp.&lt;/p&gt;

&lt;p&gt;In the indexing layer, we avoid a Delete followed by a Put to the same row for the index update. When the row is the same, we can just do the put.&lt;/p&gt;

&lt;p&gt;In the transactional layer, we correctly handled put, put, scan. This way the scan will see the last put, even if they have the same timestamp.&lt;/p&gt;

&lt;p&gt;Remove the sleep to fix the putPutScan transactional test, and run it many times to be sure we hit the case where they are in the same millisecond.&lt;/p&gt;

&lt;p&gt;Also some small cleanup, null handling, and fail-fast changes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12458172">HBASE-2286</key>
            <summary>[Transactional Contrib] Correctly handle or avoid cases where writes occur in same millisecond</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="clint.morgan">Clint Morgan</assignee>
                                    <reporter username="clint.morgan">Clint Morgan</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Mar 2010 20:08:32 +0000</created>
                <updated>Fri, 20 Nov 2015 12:42:56 +0000</updated>
                            <resolved>Wed, 7 Apr 2010 23:50:06 +0000</resolved>
                                                    <fixVersion>0.90.0</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12841487" author="clint.morgan" created="Thu, 4 Mar 2010 20:13:48 +0000"  >&lt;p&gt;Please review&lt;/p&gt;</comment>
                            <comment id="12846300" author="stack" created="Wed, 17 Mar 2010 05:07:37 +0000"  >&lt;p&gt;Move out of released 0.20.3 and into 0.20.4.&lt;/p&gt;</comment>
                            <comment id="12852680" author="gstathis" created="Fri, 2 Apr 2010 03:17:18 +0000"  >&lt;p&gt;Hi Clint. Regarding the note you left on the users list, I wanted to clarify something:&lt;/p&gt;

&lt;p&gt;Does the remaining bug occur when an column gets deleted in the base table as opposed to the entire row? So, if I were indexing a given column:qualifier and wanted to delete the entire cell history, it would not get cleared from the index?&lt;/p&gt;

&lt;p&gt;Tank you in advance.&lt;/p&gt;

&lt;p&gt;On Mon, Mar 29, 2010 at 12:25 PM, Clint Morgan &amp;lt;clint.morgan@troove.net&amp;gt; wrote:&lt;br/&gt;
NOTE: Current patch has a bug in it where if you delete only an&lt;br/&gt;
&quot;additionalColumn&quot; in the base table, then it does not get deleted in&lt;br/&gt;
the index. I&apos;ll put a fix for that up shortly.&lt;/p&gt;</comment>
                            <comment id="12852882" author="gstathis" created="Fri, 2 Apr 2010 17:34:28 +0000"  >&lt;p&gt;Clint,&lt;/p&gt;

&lt;p&gt;A few additional notes: I downloaded the latest trunk and the patch is outdated against it. I was able to manually apply the differences but I am getting test failures:&lt;/p&gt;

&lt;p&gt;Running org.apache.hadoop.hbase.client.tableindexed.TestIndexedTable&lt;br/&gt;
Tests run: 7, Failures: 0, Errors: 7, Skipped: 0, Time elapsed: 1.511 sec &amp;lt;&amp;lt;&amp;lt; FAILURE!&lt;br/&gt;
Running org.apache.hadoop.hbase.regionserver.transactional.TestTHLog&lt;br/&gt;
Tests run: 5, Failures: 0, Errors: 5, Skipped: 0, Time elapsed: 1.307 sec &amp;lt;&amp;lt;&amp;lt; FAILURE!&lt;br/&gt;
Running org.apache.hadoop.hbase.regionserver.transactional.TestTHLogRecovery&lt;br/&gt;
Tests run: 2, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 450.93 sec &amp;lt;&amp;lt;&amp;lt; FAILURE!&lt;/p&gt;

&lt;p&gt;But, a --dry-run against the 0.20.3 distro source seems to apply with no problems, so I&apos;ll try the patch there instead of trunk.&lt;/p&gt;</comment>
                            <comment id="12852944" author="gstathis" created="Fri, 2 Apr 2010 20:37:49 +0000"  >&lt;p&gt;OK, confirming that it works on 0.20.3 distro source. The index rows are no longer being deleted (which is huge for us). I also verified that I can delete a particular indexed column:qualifier cell with all its&apos; history in the base table and the corresponding index row goes away.&lt;/p&gt;</comment>
                            <comment id="12854147" author="clint.morgan" created="Tue, 6 Apr 2010 20:00:57 +0000"  >&lt;p&gt;This fixes bug in prev patch: When we delete an additional column we need to propagate that delete to the index table.&lt;/p&gt;</comment>
                            <comment id="12854148" author="clint.morgan" created="Tue, 6 Apr 2010 20:03:47 +0000"  >&lt;p&gt;George:&lt;br/&gt;
I have not started using trunk recently, so have not been testing this contrib on it. I have tested it under 0.20 and it works.&lt;/p&gt;


&lt;p&gt;Please commit to trunk and branch.&lt;/p&gt;</comment>
                            <comment id="12854714" author="gstathis" created="Wed, 7 Apr 2010 21:22:58 +0000"  >&lt;p&gt;Verified hbase-2286-v2.patch on &lt;a href=&quot;http://svn.apache.org/repos/asf/hadoop/hbase/branches/0.20&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/repos/asf/hadoop/hbase/branches/0.20&lt;/a&gt; and all tests pass.&lt;/p&gt;

&lt;p&gt;Ported hbase-2286-v2.patch to trunk (see attached) and verified that all maven tests pass (core and contrib).&lt;/p&gt;

&lt;p&gt;We&apos;ll need one of the committers to check this in. I talked to jdcryans on IRC this morning and gave a heads up. I&apos;ll notify #hbase that this is ready.&lt;/p&gt;</comment>
                            <comment id="12854735" author="jdcryans" created="Wed, 7 Apr 2010 23:50:06 +0000"  >&lt;p&gt;Committed to branch and trunk. Thanks for the good work guys.&lt;/p&gt;</comment>
                            <comment id="12866878" author="stack" created="Wed, 12 May 2010 23:52:55 +0000"  >&lt;p&gt;Marking these as fixed against 0.21.0 rather than against 0.20.5.&lt;/p&gt;</comment>
                            <comment id="15017388" author="lars_francke" created="Fri, 20 Nov 2015 12:42:56 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12441081" name="hbase-2286-v2-trunk.patch" size="15857" author="gstathis" created="Wed, 7 Apr 2010 21:22:58 +0000"/>
                            <attachment id="12440946" name="hbase-2286-v2.patch" size="16548" author="clint.morgan" created="Tue, 6 Apr 2010 20:00:57 +0000"/>
                            <attachment id="12437922" name="hbase-2286.patch" size="15462" author="clint.morgan" created="Thu, 4 Mar 2010 20:09:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 17 Mar 2010 05:07:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32499</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hh2n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>100028</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>