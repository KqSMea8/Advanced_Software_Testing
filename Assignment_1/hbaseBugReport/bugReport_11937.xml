<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:28:05 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-11937/HBASE-11937.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-11937] Update patch submission guidelines to stop using --no-prefix</title>
                <link>https://issues.apache.org/jira/browse/HBASE-11937</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Right now the submission guidelines include the use of --no-prefix in the Methods to Create Patches section:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Git&lt;br/&gt;
git format-patch is preferred because it preserves commit messages. Use git squash first, to combine smaller commits into a single larger one.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;git format-patch --no-prefix origin/master --stdout &amp;gt; HBASE-XXXX.patch&lt;/li&gt;
	&lt;li&gt;git diff --no-prefix origin/master &amp;gt; HBASE-XXXX.patch&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;The use of --no-prefix means that users of &lt;tt&gt;git apply&lt;/tt&gt; and &lt;tt&gt;git am&lt;/tt&gt; have to know to specify &lt;tt&gt;-p0&lt;/tt&gt; and (which strips 0 levels of prefix). Both of those tools default to stripping the 1 level of prefix git makes by default.&lt;/p&gt;

&lt;p&gt;The guide for HBase committers section on reviewing doesn&apos;t give any suggestions on how to apply patches from contributors. It should probably give examples for using &lt;tt&gt;git am&lt;/tt&gt; and &lt;tt&gt;git apply&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12740622">HBASE-11937</key>
            <summary>Update patch submission guidelines to stop using --no-prefix</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="misty">Misty Stanley-Jones</assignee>
                                    <reporter username="busbey">Sean Busbey</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Sep 2014 21:58:03 +0000</created>
                <updated>Thu, 9 Oct 2014 03:51:05 +0000</updated>
                            <resolved>Thu, 9 Oct 2014 03:51:05 +0000</resolved>
                                                                    <component>documentation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="14129251" author="busbey" created="Wed, 10 Sep 2014 22:26:10 +0000"  >&lt;p&gt;A committer should first see if the patch applies cleanly to master. This works the same regardless of which git command created the patch.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$&amp;gt; git fetch origin
$&amp;gt; git checkout master
$&amp;gt; git rebase origin/master
$&amp;gt; git checkout example-checking-HBASE-11891
$&amp;gt; git apply --check /some/path/to/patches/HBASE-11891.patch
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;No output means things are fine. Failures look like this:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ git apply --check /some/path/to/patches/HBASE-11891.old.patch 
error: patch failed: hbase-client/src/main/java/org/apache/hadoop/hbase/client/ClusterStatusListener.java:34
error: hbase-client/src/main/java/org/apache/hadoop/hbase/client/ClusterStatusListener.java: patch does not apply
error: patch failed: hbase-common/src/main/java/org/apache/hadoop/hbase/HBaseInterfaceAudience.java:29
error: hbase-common/src/main/java/org/apache/hadoop/hbase/HBaseInterfaceAudience.java: patch does not apply
error: patch failed: hbase-common/src/main/java/org/apache/hadoop/hbase/codec/CellCodec.java:25
error: hbase-common/src/main/java/org/apache/hadoop/hbase/codec/CellCodec.java: patch does not apply
error: patch failed: hbase-common/src/main/java/org/apache/hadoop/hbase/codec/CellCodecWithTags.java:25
error: hbase-common/src/main/java/org/apache/hadoop/hbase/codec/CellCodecWithTags.java: patch does not apply
....
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If the patch doesn&apos;t apply, the contributor should updated it for the current master.&lt;/p&gt;

&lt;p&gt;A committer can tell if the patch was made with git format-patch (rather than git diff) if it begins with a header that looks like an email message:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;From b7893a4e07cbff333d48065dad9810f9f03cf159 Mon Sep 17 00:00:00 2001
From: Sean Busbey &amp;lt;busbey@apache.org&amp;gt;
Date: Wed, 3 Sep 2014 23:23:16 -0500
Subject: [PATCH] HBASE-11891 Introduce an HBaseInterfaceAudience level to
 denote class names that appear in configs.

---
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If the patch was made with format patch, then they should use &lt;tt&gt;git am&lt;/tt&gt; to apply.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ git am /some/path/to/format-patch/patches/HBASE-11891.patch 
Applying: HBASE-11891 Introduce an HBaseInterfaceAudience level to denote class names that appear in configs.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This will place a commit in the current local branch, which you can interact with normally via git commands.&lt;/p&gt;

&lt;p&gt;If the patch was mad with git diff, then they should use &lt;tt&gt;git apply&lt;/tt&gt; to apply.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ git apply /some/path/to/diff/patches/HBASE-11891.patch 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;No output means things worked fine. This approach won&apos;t add a commit; instead all changes will be on the current working directory.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ git status
# On branch example-checking-HBASE-11891
# Changes not staged for commit:
#   (use &quot;git add &amp;lt;file&amp;gt;...&quot; to update what will be committed)
#   (use &quot;git checkout -- &amp;lt;file&amp;gt;...&quot; to discard changes in working directory)
#
#	modified:   hbase-client/src/main/java/org/apache/hadoop/hbase/client/ClusterStatusListener.java
#	modified:   hbase-common/src/main/java/org/apache/hadoop/hbase/HBaseInterfaceAudience.java
#	modified:   hbase-common/src/main/java/org/apache/hadoop/hbase/codec/CellCodec.java
....
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For patches created with &lt;tt&gt;git diff&lt;/tt&gt; a committer can also use the &lt;tt&gt;patch&lt;/tt&gt; command to apply changes locally.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ patch -p1 &amp;lt; /some/path/to/diff/patches/HBASE-11891.patch 
patching file hbase-client/src/main/java/org/apache/hadoop/hbase/client/ClusterStatusListener.java
patching file hbase-common/src/main/java/org/apache/hadoop/hbase/HBaseInterfaceAudience.java
patching file hbase-common/src/main/java/org/apache/hadoop/hbase/codec/CellCodec.java
patching file hbase-common/src/main/java/org/apache/hadoop/hbase/codec/CellCodecWithTags.java
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This should give you a working directory that is the same as the one created by &lt;tt&gt;git apply&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;At this point you can interact with the local changes as you would with local modifications you made.&lt;/p&gt;</comment>
                            <comment id="14129305" author="stack" created="Wed, 10 Sep 2014 22:58:02 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=busbey&quot; class=&quot;user-hover&quot; rel=&quot;busbey&quot;&gt;Sean Busbey&lt;/a&gt; Lets get it in.&lt;/p&gt;</comment>
                            <comment id="14130336" author="stack" created="Thu, 11 Sep 2014 17:26:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=busbey&quot; class=&quot;user-hover&quot; rel=&quot;busbey&quot;&gt;Sean Busbey&lt;/a&gt; I tried git apply with a patch that starts out like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
kalashnikov:hbase.git.commit stack$ head HBASE-11619.patch
diff --git hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestHLogSplit.java hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestHLogSplit.java
index 3ad7fd4..1fc6b22 100644
--- hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestHLogSplit.java
+++ hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestHLogSplit.java
@@ -34,7 +34,6 @@ &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.HashMap;
 &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.List;
 &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.Map;
 &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.NavigableSet;
-&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.concurrent.CountDownLatch;
 &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.concurrent.atomic.AtomicBoolean;
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;and got ...&lt;/p&gt;

&lt;p&gt;kalashnikov:hbase.git.commit stack$ git apply --check &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11619&quot; title=&quot;Remove unused test class from TestHLogSplit&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11619&quot;&gt;&lt;del&gt;HBASE-11619&lt;/del&gt;&lt;/a&gt;.patch&lt;br/&gt;
error: src/test/java/org/apache/hadoop/hbase/regionserver/wal/TestHLogSplit.java: No such file or directory&lt;/p&gt;

&lt;p&gt;git patch -p0 worked.&lt;/p&gt;

&lt;p&gt;What am I doing wrong (trying to follow above instruction)&lt;/p&gt;</comment>
                            <comment id="14130405" author="busbey" created="Thu, 11 Sep 2014 17:58:35 +0000"  >&lt;p&gt;that patch was created with &lt;tt&gt;--no-prefix&lt;/tt&gt;. you can tell because the line for &lt;tt&gt;diff --git&lt;/tt&gt; has paths that don&apos;t start with &quot;a/hbase-server/...&quot; and &quot;b/hbase-server/...&quot;&lt;/p&gt;

&lt;p&gt;For those patches you have to run &lt;tt&gt;git apply -p0 --check&lt;/tt&gt; (and apply/am similarly need -p0).&lt;/p&gt;</comment>
                            <comment id="14130473" author="stack" created="Thu, 11 Sep 2014 18:36:47 +0000"  >&lt;p&gt;Ok &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=busbey&quot; class=&quot;user-hover&quot; rel=&quot;busbey&quot;&gt;Sean Busbey&lt;/a&gt;  Then I would suggest you change this &apos;If the patch doesn&apos;t apply, the contributor should updated it for the current master.&apos; to instead try with -pN if it does not apply and tell contributor to do future patches w/o noprefix?&lt;/p&gt;</comment>
                            <comment id="14130476" author="busbey" created="Thu, 11 Sep 2014 18:40:02 +0000"  >&lt;p&gt;sure, that sounds reasonable. esp since there will be a period of time where people are using the old instructions.&lt;/p&gt;</comment>
                            <comment id="14139953" author="stack" created="Fri, 19 Sep 2014 04:13:28 +0000"  >&lt;p&gt;If you format this for docbook I&apos;ll commit this bit of literature &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=busbey&quot; class=&quot;user-hover&quot; rel=&quot;busbey&quot;&gt;Sean Busbey&lt;/a&gt;, of I could format over in docbook np.&lt;/p&gt;</comment>
                            <comment id="14163002" author="misty" created="Wed, 8 Oct 2014 03:12:05 +0000"  >&lt;p&gt;Incorporating this into the other JIRA.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310060">
                    <name>Container</name>
                                                                <inwardlinks description="Is contained by">
                                        <issuelink>
            <issuekey id="12741975">HBASE-11998</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 10 Sep 2014 22:58:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 10 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1zwgv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>