<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:31:16 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-12259/HBASE-12259.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-12259] Bring quorum based write ahead log into HBase</title>
                <link>https://issues.apache.org/jira/browse/HBASE-12259</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;HydraBase ( &lt;a href=&quot;https://code.facebook.com/posts/321111638043166/hydrabase-the-evolution-of-hbase-facebook/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://code.facebook.com/posts/321111638043166/hydrabase-the-evolution-of-hbase-facebook/&lt;/a&gt; ) Facebook&apos;s implementation of HBase with Raft for consensus will be going open source shortly. We should pull in the parts of that fb-0.89 based implementation, and offer it as a feature in whatever next major release is next up. Right now the Hydrabase code base isn&apos;t ready to be released into the wild; it should be ready soon ( for some definition of soon).&lt;/p&gt;

&lt;p&gt;Since Hydrabase is based upon 0.89 most of the code is not directly applicable. So lots of work will probably need to be done in a feature branch before a merge vote.&lt;/p&gt;

&lt;p&gt;Is this something that&apos;s wanted?&lt;/p&gt;

&lt;p&gt;Is there anything clean up that needs to be done before the log implementation is able to be replaced like this?&lt;/p&gt;

&lt;p&gt;What&apos;s our story with upgrading to this? Are we ok with requiring down time ?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12748178">HBASE-12259</key>
            <summary>Bring quorum based write ahead log into HBase</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="eclark">Elliott Clark</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Oct 2014 00:15:16 +0000</created>
                <updated>Thu, 2 Apr 2015 14:33:38 +0000</updated>
                                            <version>2.0.0</version>
                                                    <component>wal</component>
                        <due></due>
                            <votes>3</votes>
                                    <watches>73</watches>
                                                                            <aggregatetimeoriginalestimate seconds="86400">24h</aggregatetimeoriginalestimate>
                                        <aggregatetimeremainingestimate seconds="86400">24h</aggregatetimeremainingestimate>
                                                <comments>
                            <comment id="14171754" author="eclark" created="Wed, 15 Oct 2014 00:18:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=patrickwhite&quot; class=&quot;user-hover&quot; rel=&quot;patrickwhite&quot;&gt;Patrick White&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rshroff&quot; class=&quot;user-hover&quot; rel=&quot;rshroff&quot;&gt;Rishit Shroff&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=manukranthk&quot; class=&quot;user-hover&quot; rel=&quot;manukranthk&quot;&gt;Manukranth Kolloju&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fantasist&quot; class=&quot;user-hover&quot; rel=&quot;fantasist&quot;&gt;Yunfan Zhong&lt;/a&gt; will all probably play some role in getting this out. Though at this point there are no concrete plans.&lt;/p&gt;</comment>
                            <comment id="14171755" author="posix4e" created="Wed, 15 Oct 2014 00:18:47 +0000"  >&lt;p&gt;Similarly &lt;a href=&quot;https://github.com/cloud-software-foundation/c5-replicator&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/cloud-software-foundation/c5-replicator&lt;/a&gt; is a raft replicator which can provide this today. &lt;a href=&quot;https://github.com/cloud-software-foundation/c5&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/cloud-software-foundation/c5&lt;/a&gt; uses the replicator to provide a WAL. We have started work on OLog, a HLog implementation which uses this raft replication code.&lt;/p&gt;</comment>
                            <comment id="14171759" author="posix4e" created="Wed, 15 Oct 2014 00:19:14 +0000"  >&lt;p&gt;I&apos;d love if we could combine forces. We could focus on getting a great LAN story, you guys could work on the WAN&lt;/p&gt;</comment>
                            <comment id="14171760" author="posix4e" created="Wed, 15 Oct 2014 00:19:37 +0000"  >&lt;p&gt;Also would love to get these both into the incubator.&lt;/p&gt;</comment>
                            <comment id="14171794" author="eclark" created="Wed, 15 Oct 2014 00:39:28 +0000"  >&lt;p&gt;If at all possible I think this should go into HBase rather than another project. I think the end result is something that most users of HBase would recognize. Since the final result is so close to HBase I think we gain a whole lot more by not fragmenting the community.&lt;/p&gt;</comment>
                            <comment id="14171795" author="posix4e" created="Wed, 15 Oct 2014 00:40:45 +0000"  >&lt;p&gt;I would love to do it that way. How do we get it into HBase?&lt;/p&gt;</comment>
                            <comment id="14172097" author="busbey" created="Wed, 15 Oct 2014 07:29:13 +0000"  >&lt;p&gt;The refactoring working in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10378&quot; title=&quot;Divide HLog interface into User and Implementor specific interfaces&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10378&quot;&gt;&lt;del&gt;HBASE-10378&lt;/del&gt;&lt;/a&gt; should get finished up first. It obviates some other WAL clean up tickets and generally provides us with a cleaner separation of concerns than the current HLog.&lt;/p&gt;

&lt;p&gt;There&apos;s a simplified roadmap around WAL improvements on that ticket and a patch from a bit ago. Both should get updated in the next day or so with a version that I think is ready as a first pass implementation. One of the follow-ons is getting the WAL related code all into its own module, which I think will help a lot in getting the recovery side of things better isolated.&lt;/p&gt;</comment>
                            <comment id="14175496" author="enis" created="Fri, 17 Oct 2014 20:23:58 +0000"  >&lt;p&gt;It would be good to have quorum writes to the WAL for both intra and inter cluster deployments natively in hbase (or a thin layer on top). We have already seen some usage of the region replica feature even without sync writes. This will not only help in write latencies, but we can also implement proper sync() on local disk more easily.  I would imagine the RAFT library might be used elsewhere as well for multi-master, etc. &lt;/p&gt;

&lt;p&gt;I think once we have hydrabase opened, we can see how we can bring this in. &lt;/p&gt;
</comment>
                            <comment id="14175826" author="stack" created="Sat, 18 Oct 2014 03:14:35 +0000"  >&lt;blockquote&gt;&lt;p&gt;Since Hydrabase is based upon 0.89 most of the code is not directly applicable. So lots of work will probably need to be done in a feature branch before a merge vote.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Agree. Feature branch would be way to go.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Is this something that&apos;s wanted?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sounds good. Lets take a look at what is involved (From what I know of hydrabase, its a X-DC WAN story.. An in-DC, in-cluster deploy is probably what we&apos;d be interested in doing first).&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Is there anything clean up that needs to be done before the log implementation is able to be replaced like this?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;See Sean&apos;s comment above.  He is doing nice WAL Interface refactor/cleanup. Does current hydrabase need more than current WAL API or it just works using current API w/ the magic going on behind WAL append, sync, close, roll, calls?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;What&apos;s our story with upgrading to this? Are we ok with requiring down time ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If downtime, would imply a 2.0 (or 3.0) feature (IMO).&lt;/p&gt;</comment>
                            <comment id="14177895" author="rshroff" created="Tue, 21 Oct 2014 03:43:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; HydraBase aims at X-DC WAN story, but it can be easily deployed to in-DC, in-cluster setup. We will be able to reap in the same benefits with the new quorum based WAL.&lt;/p&gt;

&lt;p&gt;Refactoring the WAL into a separate module is a good idea and should make it easier to plug in the RAFT Consensus protocol.&lt;/p&gt;

&lt;p&gt;We should start this effort in a separate feature branch as there will be changes not only in the WAL but in other modules like HRegion/HMaster/etc. I will discuss the approach with other team members first before we lay down the roadmap for this integration.&lt;/p&gt;

&lt;p&gt;Regarding upgrades, I think taking a down time will be much cleaner, but we can look into rolling-upgrades if that&apos;s a necessity. &lt;/p&gt;</comment>
                            <comment id="14212634" author="gaurav.menghani" created="Fri, 14 Nov 2014 18:59:28 +0000"  >&lt;p&gt;Created the first patch for the consensus protocol in (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12476&quot; title=&quot;HydraBase Consensus Protocol&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12476&quot;&gt;&lt;del&gt;HBASE-12476&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="14213218" author="rshroff" created="Sat, 15 Nov 2014 01:13:08 +0000"  >&lt;p&gt;High Level Architecture about HydraBase&lt;/p&gt;</comment>
                            <comment id="14213223" author="rshroff" created="Sat, 15 Nov 2014 01:15:25 +0000"  >&lt;p&gt;I have attached a high level architecture overview document about the set of changes with the HydraBase project. Please take a look! Thanks!&lt;/p&gt;</comment>
                            <comment id="14213342" author="yuzhihong@gmail.com" created="Sat, 15 Nov 2014 04:08:59 +0000"  >&lt;p&gt;Does &apos;ACTIVE-WITNESS&apos; correspond to &apos;Active follower&apos; in the diagram ?&lt;/p&gt;</comment>
                            <comment id="14213401" author="stack" created="Sat, 15 Nov 2014 06:06:10 +0000"  >&lt;p&gt;Thanks for pasting the doc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rshroff&quot; class=&quot;user-hover&quot; rel=&quot;rshroff&quot;&gt;Rishit Shroff&lt;/a&gt; Does it describe what the code over in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12476&quot; title=&quot;HydraBase Consensus Protocol&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12476&quot;&gt;&lt;del&gt;HBASE-12476&lt;/del&gt;&lt;/a&gt; delivers? Thanks.&lt;/p&gt;
</comment>
                            <comment id="14213735" author="rshroff" created="Sat, 15 Nov 2014 19:25:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt;, No. The code over in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12476&quot; title=&quot;HydraBase Consensus Protocol&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12476&quot;&gt;&lt;del&gt;HBASE-12476&lt;/del&gt;&lt;/a&gt; is the RAFT Protocol implementation. The document in this JIRA is about the overall architecture. Please let me know if you need any information regarding &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-12476&quot; title=&quot;HydraBase Consensus Protocol&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-12476&quot;&gt;&lt;del&gt;HBASE-12476&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu&quot; class=&quot;user-hover&quot; rel=&quot;tedyu&quot;&gt;Ted Yu&lt;/a&gt;, No. The ACTIVE-WITNESS|SHADOW-WITNESS are both shown as &apos;Witness&apos; in the diagram to keep it simple. The ACTIVE follower in the diagram means that:&lt;br/&gt;
1. From RAFT protocol perspective, that region server is a FOLLOWER&lt;br/&gt;
2. The same region server is the ACTIVE guy for DC-2 and will be doing flushes/compactions to HDFS. However it does not serve any client traffic. &lt;/p&gt;</comment>
                            <comment id="14215458" author="rshroff" created="Tue, 18 Nov 2014 00:12:10 +0000"  >&lt;p&gt;I have create a high-level set of features tasks(JIRA) to list the minimum amount of work that needs to be done to integrate HydraBase changes in HBase and bring Quorum based WAL to HBase. As and when people start working on these JIRA, we will add more details about the changes and if required file sub-tasks to make it easier to test/integrate.&lt;/p&gt;</comment>
                            <comment id="14216900" author="rshroff" created="Tue, 18 Nov 2014 22:10:17 +0000"  >&lt;p&gt;Updating the doc correct a typo in the Deployment&lt;/p&gt;</comment>
                            <comment id="14257418" author="rshroff" created="Tue, 23 Dec 2014 19:44:34 +0000"  >&lt;p&gt;Details about of the implementation of the RaftProtocol in the hbase-consensus module.&lt;/p&gt;</comment>
                            <comment id="14392764" author="apache9" created="Thu, 2 Apr 2015 14:33:38 +0000"  >&lt;p&gt;Any progress here?&lt;br/&gt;
Thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12682267" name="Architecture for HydraBase (5).pdf" size="140981" author="rshroff" created="Tue, 18 Nov 2014 22:10:17 +0000"/>
                            <attachment id="12689066" name="RaftProtocolImplementationDesignDoc.pdf" size="1003871" author="rshroff" created="Wed, 24 Dec 2014 20:00:31 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12755444">HBASE-12476</subtask>
                            <subtask id="12755960">HBASE-12498</subtask>
                            <subtask id="12755961">HBASE-12499</subtask>
                            <subtask id="12755962">HBASE-12500</subtask>
                            <subtask id="12755964">HBASE-12501</subtask>
                            <subtask id="12755965">HBASE-12502</subtask>
                            <subtask id="12755968">HBASE-12503</subtask>
                            <subtask id="12755969">HBASE-12504</subtask>
                            <subtask id="12755971">HBASE-12505</subtask>
                            <subtask id="12755972">HBASE-12506</subtask>
                            <subtask id="12755973">HBASE-12507</subtask>
                            <subtask id="12755975">HBASE-12508</subtask>
                            <subtask id="12755976">HBASE-12509</subtask>
                            <subtask id="12755977">HBASE-12510</subtask>
                            <subtask id="12763512">HBASE-12752</subtask>
                            <subtask id="12763517">HBASE-12753</subtask>
                            <subtask id="12763547">HBASE-12754</subtask>
                            <subtask id="12765270">HBASE-12815</subtask>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 15 Oct 2014 00:18:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 37 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i216fj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>