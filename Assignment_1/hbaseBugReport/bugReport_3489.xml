<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:10:38 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-3489/HBASE-3489.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-3489] .oldlogs not being cleaned out</title>
                <link>https://issues.apache.org/jira/browse/HBASE-3489</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The .oldlogs folder is never being cleaned up. The hbase.master.logcleaner.ttl has been set to clean up the old logs but the clean up is never kicking in. The limit of 10 files is not the problem. After running for 5 days not a single log file has ever been deleted and the logcleaner is set to 2 days (from the default of 7 days). It is assumed that the replication changes that want to be sure to keep these logs around if needed have caused the cleanup to be blocked. There is no replication defined (knowingly).&lt;/p&gt;
</description>
                <environment>&lt;p&gt;10 Nodes Write Heavy Cluster&lt;/p&gt;</environment>
        <key id="12497144">HBASE-3489</key>
            <summary>.oldlogs not being cleaned out</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="wav100">Wayne</reporter>
                        <labels>
                    </labels>
                <created>Sun, 30 Jan 2011 02:32:22 +0000</created>
                <updated>Mon, 15 Aug 2016 18:43:37 +0000</updated>
                            <resolved>Mon, 15 Aug 2016 18:43:36 +0000</resolved>
                                    <version>0.90.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>12</watches>
                                                                <comments>
                            <comment id="12988535" author="jdcryans" created="Sun, 30 Jan 2011 03:44:48 +0000"  >&lt;p&gt;Hey Wayne,&lt;/p&gt;

&lt;p&gt;Could you grep the Namenode&apos;s log for &quot;oldlogs&quot; and attach the result in this jira? I&apos;d like to see what kind of log archival rate you have and if logs are really deleted at all. Thanks!&lt;/p&gt;</comment>
                            <comment id="12988581" author="wav100" created="Sun, 30 Jan 2011 13:02:08 +0000"  >&lt;p&gt;Attached are the name node entries with .oldlog. After running on .90 for 5 days I had more than 18+ TB of old logs. The data size was only ~2TB. Having not even known about this until 2 days ago I had mis-calculated our required production cluster size (good news). I think these logs should be deleted normally after 1 day and at a pace able to keep up with heavy writes. &lt;/p&gt;

&lt;p&gt;There is I believe a bug from replication in .90 as no logs seemed to get deleted, but even if it worked as designed I would have to wait until 7 days and at the rate I was load testing the 40TB limit of our test cluster might have been reached with actual data of only 10% of that. I question the 7 day limit as a good default. It causes novices like myself to think the data size is a lot bigger than it is. I was even convinced lzo compression was not working due to the spike in disk usage.&lt;/p&gt;</comment>
                            <comment id="13112327" author="tlipcon" created="Thu, 22 Sep 2011 04:56:17 +0000"  >&lt;p&gt;Anyone reproduced this, recently?&lt;/p&gt;</comment>
                            <comment id="13187172" author="jbwyme" created="Mon, 16 Jan 2012 20:46:54 +0000"  >&lt;p&gt;We are seeing this on our replication cluster using 0.90.4. The /hbase/.oldlogs is filled with logs that are ~ 1 month old.&lt;/p&gt;</comment>
                            <comment id="13188014" author="jbwyme" created="Tue, 17 Jan 2012 21:24:29 +0000"  >&lt;p&gt;After turning replication off on the slave cluster, the .oldlogs were cleaned up. So it appears as if hbase thinks that the slave cluster intends to replicate as well and doesn&apos;t clean the logs.&lt;/p&gt;</comment>
                            <comment id="13527290" author="neilyalowitz" created="Sat, 8 Dec 2012 23:38:13 +0000"  >&lt;p&gt;We are seeing this as well using 0.90.4.  The .oldlogs folder contents contains items as far back as ~1 month ago, although not in perfect sequential days of history (&quot;banding,&quot; with folder datestamps show several sequential days then several days skipped then several more sequential days).&lt;/p&gt;</comment>
                            <comment id="13527459" author="qwertymaniac" created="Sun, 9 Dec 2012 13:38:57 +0000"  >&lt;p&gt;Hi Neil,&lt;/p&gt;

&lt;p&gt;0.90.x releases are not maintained anymore upstream - perhaps you can try upgrading to 0.92 or 0.94 based current releases that hasn&apos;t gotten a report of this bug?&lt;/p&gt;</comment>
                            <comment id="13587573" author="davelatham" created="Tue, 26 Feb 2013 21:20:52 +0000"  >&lt;p&gt;The ReplicationLogCleaner prevents any oldlogs from being cleaned if replication is enabled in the config (hbase-site.xml) but stopped (via stop_replication).  That caused this issue for us, and my guess is it might be behind other people&apos;s cases too.&lt;/p&gt;</comment>
                            <comment id="13977828" author="lhofhansl" created="Wed, 23 Apr 2014 04:49:35 +0000"  >&lt;p&gt;So is this still the case? That seems bad and wrong.&lt;/p&gt;</comment>
                            <comment id="13977829" author="lhofhansl" created="Wed, 23 Apr 2014 04:50:01 +0000"  >&lt;p&gt;Especially since replication is now enabled by default... &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdcryans&quot; class=&quot;user-hover&quot; rel=&quot;jdcryans&quot;&gt;Jean-Daniel Cryans&lt;/a&gt;, FYI.&lt;/p&gt;</comment>
                            <comment id="13977835" author="jdcryans" created="Wed, 23 Apr 2014 04:54:34 +0000"  >&lt;p&gt;We removed the kill switch, start/stop_replication don&apos;t exist anymore.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12656084">HBASE-8861</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12469770" name="oldlog.txt" size="5033812" author="wav100" created="Sun, 30 Jan 2011 13:02:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 30 Jan 2011 03:44:48 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26886</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 34 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02dtb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11839</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>