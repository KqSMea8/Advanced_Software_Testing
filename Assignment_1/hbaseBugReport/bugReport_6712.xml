<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:39:12 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-6712/HBASE-6712.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-6712] Implement checkAndIncrement</title>
                <link>https://issues.apache.org/jira/browse/HBASE-6712</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;increment should throw an exception if a row does not exist. instead it creates the row. checkAndIncrement may be also a solution to it but needs development.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12605922">HBASE-6712</key>
            <summary>Implement checkAndIncrement</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="yuzhihong@gmail.com">Ted Yu</assignee>
                                    <reporter username="bstefan2@yahoo.com">Stefan Baritchii</reporter>
                        <labels>
                    </labels>
                <created>Sun, 2 Sep 2012 19:08:25 +0000</created>
                <updated>Wed, 4 Jun 2014 17:30:01 +0000</updated>
                                            <version>0.92.1</version>
                                                    <component>Client</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>10</watches>
                                                                <comments>
                            <comment id="13447007" author="lhofhansl" created="Sun, 2 Sep 2012 19:33:44 +0000"  >&lt;p&gt;If increment would not create new rows when needed, you have to use some other API to create the row first, which would definitely be bad.&lt;/p&gt;

&lt;p&gt;Do you have a specific use case in mind?&lt;/p&gt;</comment>
                            <comment id="13447307" author="bstefan2@yahoo.com" created="Mon, 3 Sep 2012 15:04:34 +0000"  >&lt;p&gt;My usecase: I have a row with a rowid and a column that is incremented. rowid represents a resource name, column represents how many guys are sharing that resource.&lt;/p&gt;

&lt;p&gt;It would be nice if I would be able to create the row first (i do it only once anyway), and then increment/decrement it&apos;s sharing.&lt;/p&gt;

&lt;p&gt;To answer the &quot;which would definitely be bad&quot; part I think it has already been done at Put where you have checkAndPut() method. Do you think it would be bad to have a &quot;checkAndIncrement&quot; method similar to checkAndPut?&lt;/p&gt;</comment>
                            <comment id="13447390" author="lhofhansl" created="Mon, 3 Sep 2012 19:14:04 +0000"  >&lt;p&gt;I see. If you don&apos;t mind, I&apos;ll change the title to &quot;Implement checkAndIncrement&quot; (and maybe we&apos;ll fold this into a more general checkAndMutate implementation).&lt;/p&gt;</comment>
                            <comment id="13447394" author="lhofhansl" created="Mon, 3 Sep 2012 19:23:48 +0000"  >&lt;p&gt;Also note that after &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6522&quot; title=&quot;Expose locks and leases to Coprocessors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6522&quot;&gt;&lt;del&gt;HBASE-6522&lt;/del&gt;&lt;/a&gt; it is possible to do this with a coprocessor endpoint.&lt;br/&gt;
(The missing part before was the coprocessors cannot take out locks)&lt;/p&gt;</comment>
                            <comment id="13447417" author="bstefan2@yahoo.com" created="Mon, 3 Sep 2012 21:37:33 +0000"  >&lt;p&gt;@Lars: renaming fine with me. will also take a look into the coprocessor approach.&lt;/p&gt;</comment>
                            <comment id="13644231" author="lhofhansl" created="Mon, 29 Apr 2013 03:24:56 +0000"  >&lt;p&gt;One aspect we need to be careful about is that checkAndPut and friend are idempotent. Increment is not. Then what about checkAndIncrement, would that be treated like an Increment, or like a checkAndPut?&lt;/p&gt;</comment>
                            <comment id="13644250" author="yuzhihong@gmail.com" created="Mon, 29 Apr 2013 04:03:32 +0000"  >&lt;p&gt;Looks like &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3787&quot; title=&quot;Increment is non-idempotent but client retries RPC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3787&quot;&gt;&lt;del&gt;HBASE-3787&lt;/del&gt;&lt;/a&gt; is related.&lt;/p&gt;

&lt;p&gt;If the same column is checked and incremented, this can be treated as checkAndPut. Otherwise this should be treated as Increment.&lt;/p&gt;

&lt;p&gt;More discussion would help clarify. &lt;/p&gt;</comment>
                            <comment id="13651641" author="colorant" created="Wed, 8 May 2013 05:44:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ted_yu&quot; class=&quot;user-hover&quot; rel=&quot;ted_yu&quot;&gt;Ted Yu&lt;/a&gt;, Do you mean that checkAndIncrement could check on one column while increment another column? seems checkAndPut/Delete won&apos;t allow this?&lt;/p&gt;</comment>
                            <comment id="13652154" author="yuzhihong@gmail.com" created="Wed, 8 May 2013 18:11:47 +0000"  >&lt;p&gt;@Raymond:&lt;br/&gt;
Do you have use case where the column to be incremented is different from the column being checked ?&lt;/p&gt;</comment>
                            <comment id="13652603" author="colorant" created="Thu, 9 May 2013 00:54:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ted_yu&quot; class=&quot;user-hover&quot; rel=&quot;ted_yu&quot;&gt;Ted Yu&lt;/a&gt;No, I don&apos;t, though it could easily figure one out. Originally, my point above is that if follow checkAndPut/Delete&apos;s style that only allow check and increment on the same column, we don&apos;t need to worry about idempotent issue as checkAndPut since we checking for equal. &lt;/p&gt;

&lt;p&gt;But now , I realized that, even so, we still need to treat it as Increment as &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3787&quot; title=&quot;Increment is non-idempotent but client retries RPC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3787&quot;&gt;&lt;del&gt;HBASE-3787&lt;/del&gt;&lt;/a&gt; is try to handle, since one checkAndIncrement might succeed to +1, then another succeed to -1, after that a retry of first +1 operation will pass the check and +1 again, which is not correct and non idempotent.&lt;/p&gt;</comment>
                            <comment id="14017904" author="jmspaggi" created="Wed, 4 Jun 2014 17:30:01 +0000"  >&lt;p&gt;Do we still have any driver for this issue? Or should we resolve as &quot;Later&quot;?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12647433">HBASE-8542</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 2 Sep 2012 19:33:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>242514</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 28 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02vdz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14686</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>