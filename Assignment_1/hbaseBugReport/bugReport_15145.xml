<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 21:00:11 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-15145/HBASE-15145.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-15145] HBCK and Replication should authenticate to zookepeer using server principal</title>
                <link>https://issues.apache.org/jira/browse/HBASE-15145</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;In secure clusters, we protect znodes with the server principal in zk. However, if a user wants to add a replication peer or run HBCK, then she will get Auth exception. This was not a problem due to an earlier bug. &lt;/p&gt;

&lt;p&gt;For replication, the long term fix is &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11392&quot; title=&quot;add/remove peer requests should be routed through master&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11392&quot;&gt;HBASE-11392&lt;/a&gt;. However, we should still have a way to launch zkcli with the server principals for manual inspection / manipulation. &lt;/p&gt;

&lt;p&gt;HBCK should always assume the server principals. &lt;/p&gt;

&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Koelli&quot; class=&quot;user-hover&quot; rel=&quot;Koelli&quot;&gt;Koelli Mungee&lt;/a&gt; for reporting this. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12932933">HBASE-15145</key>
            <summary>HBCK and Replication should authenticate to zookepeer using server principal</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="enis">Enis Soztutar</assignee>
                                    <reporter username="enis">Enis Soztutar</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 Jan 2016 01:05:54 +0000</created>
                <updated>Wed, 10 Feb 2016 17:20:27 +0000</updated>
                            <resolved>Tue, 26 Jan 2016 23:31:47 +0000</resolved>
                                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>1.2.0</fixVersion>
                    <fixVersion>1.3.0</fixVersion>
                    <fixVersion>1.1.4</fixVersion>
                    <fixVersion>0.98.18</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="15109849" author="enis" created="Thu, 21 Jan 2016 01:10:09 +0000"  >&lt;p&gt;According to &lt;a href=&quot;https://hbase.apache.org/book.html#_external_zookeeper_configuration&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://hbase.apache.org/book.html#_external_zookeeper_configuration&lt;/a&gt;, typically &lt;tt&gt;hbase-env.sh&lt;/tt&gt; will have: &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
export HBASE_OPTS=&lt;span class=&quot;code-quote&quot;&gt;&quot;$HBASE_OPTS -XX:+UseConcMarkSweepGC -XX:ErrorFile=/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/log/hbase/hs_err_pid%p.log -Djava.security.auth.login.config=/usr/hdp/current/hbase-client/conf/hbase_client_jaas.conf&quot;&lt;/span&gt;
export HBASE_MASTER_OPTS=&lt;span class=&quot;code-quote&quot;&gt;&quot;$HBASE_MASTER_OPTS -Xmx1024m -Djava.security.auth.login.config=/usr/hdp/current/hbase-regionserver/conf/hbase_master_jaas.conf $JDK_DEPENDED_OPTS&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I think we can pass HBASE_MASTER_OPTS to the HBCK command and to zkcli so that the jaas setting for master is used. &lt;/p&gt;</comment>
                            <comment id="15109856" author="enis" created="Thu, 21 Jan 2016 01:15:21 +0000"  >&lt;p&gt;Here is the patch that should do the trick. I think we have to use the HBASE_REGIONSERVER_OPTS rather than HBASE_MASTER_OPTS since the keytabs can contain the hostnames. &lt;/p&gt;</comment>
                            <comment id="15109861" author="hadoopqa" created="Thu, 21 Jan 2016 01:18:39 +0000"  >&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;&lt;/b&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Vote &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Runtime &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Comment &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; patch &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; 0m 3s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15145&quot; title=&quot;HBCK and Replication should authenticate to zookepeer using server principal&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15145&quot;&gt;&lt;del&gt;HBASE-15145&lt;/del&gt;&lt;/a&gt; does not apply to master. Rebase required? Wrong Branch? See &lt;a href=&quot;https://yetus.apache.org/documentation/latest/precommit-patchnames&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://yetus.apache.org/documentation/latest/precommit-patchnames&lt;/a&gt; for help. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Report/Notes &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Patch URL &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12783484/hbase-15145_v1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12783484/hbase-15145_v1.patch&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Issue &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15145&quot; title=&quot;HBCK and Replication should authenticate to zookepeer using server principal&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15145&quot;&gt;&lt;del&gt;HBASE-15145&lt;/del&gt;&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Powered by &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Apache Yetus 0.1.0   &lt;a href=&quot;http://yetus.apache.org&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://yetus.apache.org&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Console output &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/214/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/214/console&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;This message was automatically generated.&lt;/p&gt;
</comment>
                            <comment id="15109891" author="enis" created="Thu, 21 Jan 2016 01:54:53 +0000"  >&lt;p&gt;v2 patch fixes the problem for shell as well as zkcli (or any other hbase command). &lt;/p&gt;</comment>
                            <comment id="15109915" author="hadoopqa" created="Thu, 21 Jan 2016 02:19:42 +0000"  >&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;&lt;/b&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Vote &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Runtime &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Comment &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; @author &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 0m 0s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch does not contain any @author tags. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; shellcheck &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; 0m 3s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; The applied patch generated 1 new shellcheck issues (total was 418, now 419). &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; whitespace &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 0m 0s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Patch has no whitespace issues. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; hadoopcheck &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 20m 48s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Patch does not cause any errors with Hadoop 2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.1 2.6.2 2.6.3 2.7.1. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; asflicense &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 0m 14s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Patch does not generate ASF License warnings. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; 21m 9s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Report/Notes &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Patch URL &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12783490/hbase-15145_v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12783490/hbase-15145_v2.patch&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Issue &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15145&quot; title=&quot;HBCK and Replication should authenticate to zookepeer using server principal&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15145&quot;&gt;&lt;del&gt;HBASE-15145&lt;/del&gt;&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Optional Tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  asflicense  shellcheck  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; uname &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Linux asf907.gq1.ygridcore.net 3.13.0-36-lowlatency #63-Ubuntu SMP PREEMPT Wed Sep 3 21:56:12 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Build tool &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; maven &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Personality &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/component/dev-support/hbase-personality.sh &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; git revision &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; master / 4bf6f83 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; shellcheck &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; v0.3.3 (This is an old version that has serious bugs. Consider upgrading.) &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; shellcheck &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/216/artifact/patchprocess/diff-patch-shellcheck.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/216/artifact/patchprocess/diff-patch-shellcheck.txt&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; modules &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; C: . U: . &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Max memory used &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 192MB &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Powered by &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Apache Yetus 0.1.0   &lt;a href=&quot;http://yetus.apache.org&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://yetus.apache.org&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Console output &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/216/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/216/console&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;This message was automatically generated.&lt;/p&gt;
</comment>
                            <comment id="15109959" author="enis" created="Thu, 21 Jan 2016 03:04:44 +0000"  >&lt;p&gt;Hmm, yetus shellcheck tells: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
./bin/hbase-config.sh:67:5: note: AUTH_AS_SERVER appears unused. Verify it or export it. [SC2034]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;however, it is getting used in &lt;tt&gt;bin/hbase&lt;/tt&gt;. Just that it is not need to be exported.  &lt;/p&gt;</comment>
                            <comment id="15110111" author="busbey" created="Thu, 21 Jan 2016 05:53:19 +0000"  >&lt;p&gt;you can tell shellcheck that something is a false positive like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  elif [ &lt;span class=&quot;code-quote&quot;&gt;&quot;--auth-as-server&quot;&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&quot;$1&quot;&lt;/span&gt; ]
+  then
+    shift
+    # shellcheck disable=SC2034
+    AUTH_AS_SERVER=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15110140" author="busbey" created="Thu, 21 Jan 2016 06:26:26 +0000"  >&lt;p&gt;+1 with addition of shellcheck disable comment.&lt;/p&gt;</comment>
                            <comment id="15118273" author="enis" created="Tue, 26 Jan 2016 23:31:47 +0000"  >&lt;p&gt;I have committed this with the yetus change. Thanks Sean for taking a look. &lt;/p&gt;</comment>
                            <comment id="15118463" author="hudson" created="Wed, 27 Jan 2016 02:01:00 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.2 #521 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2/521/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2/521/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15145&quot; title=&quot;HBCK and Replication should authenticate to zookepeer using server principal&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15145&quot;&gt;&lt;del&gt;HBASE-15145&lt;/del&gt;&lt;/a&gt; HBCK and Replication should authenticate to zookepeer using (enis: rev b71c3db1f39d092e1fbb0483ce17410c81094da3)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;bin/hbase&lt;/li&gt;
	&lt;li&gt;bin/hbase-config.sh&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15118514" author="hudson" created="Wed, 27 Jan 2016 02:50:45 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.3 #516 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3/516/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3/516/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15145&quot; title=&quot;HBCK and Replication should authenticate to zookepeer using server principal&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15145&quot;&gt;&lt;del&gt;HBASE-15145&lt;/del&gt;&lt;/a&gt; HBCK and Replication should authenticate to zookepeer using (enis: rev 6d56ecfcf7d7aa3a525076108c061455b5b5bb05)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;bin/hbase&lt;/li&gt;
	&lt;li&gt;bin/hbase-config.sh&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15118523" author="hudson" created="Wed, 27 Jan 2016 03:00:29 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.3-IT #463 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.3-IT/463/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.3-IT/463/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15145&quot; title=&quot;HBCK and Replication should authenticate to zookepeer using server principal&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15145&quot;&gt;&lt;del&gt;HBASE-15145&lt;/del&gt;&lt;/a&gt; HBCK and Replication should authenticate to zookepeer using (enis: rev 6d56ecfcf7d7aa3a525076108c061455b5b5bb05)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;bin/hbase-config.sh&lt;/li&gt;
	&lt;li&gt;bin/hbase&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15118593" author="hudson" created="Wed, 27 Jan 2016 03:57:15 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-1.2-IT #411 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.2-IT/411/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.2-IT/411/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15145&quot; title=&quot;HBCK and Replication should authenticate to zookepeer using server principal&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15145&quot;&gt;&lt;del&gt;HBASE-15145&lt;/del&gt;&lt;/a&gt; HBCK and Replication should authenticate to zookepeer using (enis: rev b71c3db1f39d092e1fbb0483ce17410c81094da3)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;bin/hbase-config.sh&lt;/li&gt;
	&lt;li&gt;bin/hbase&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15118603" author="hudson" created="Wed, 27 Jan 2016 04:03:17 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-Trunk_matrix #661 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-Trunk_matrix/661/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-Trunk_matrix/661/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15145&quot; title=&quot;HBCK and Replication should authenticate to zookepeer using server principal&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15145&quot;&gt;&lt;del&gt;HBASE-15145&lt;/del&gt;&lt;/a&gt; HBCK and Replication should authenticate to zookepeer using (enis: rev d4610df32e9e28ad1623f9256e0ccdd0094e2c3b)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;bin/hbase&lt;/li&gt;
	&lt;li&gt;bin/hbase-config.sh&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15118786" author="hudson" created="Wed, 27 Jan 2016 07:20:32 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.1-JDK8 #1734 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.1-JDK8/1734/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.1-JDK8/1734/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15145&quot; title=&quot;HBCK and Replication should authenticate to zookepeer using server principal&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15145&quot;&gt;&lt;del&gt;HBASE-15145&lt;/del&gt;&lt;/a&gt; HBCK and Replication should authenticate to zookepeer using (enis: rev aa5dfae303260d3d1f7c39233f67a6038b9fc6d2)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;bin/hbase&lt;/li&gt;
	&lt;li&gt;bin/hbase-config.sh&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15118836" author="hudson" created="Wed, 27 Jan 2016 08:11:51 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-1.1-JDK7 #1647 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-1.1-JDK7/1647/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-1.1-JDK7/1647/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15145&quot; title=&quot;HBCK and Replication should authenticate to zookepeer using server principal&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15145&quot;&gt;&lt;del&gt;HBASE-15145&lt;/del&gt;&lt;/a&gt; HBCK and Replication should authenticate to zookepeer using (enis: rev aa5dfae303260d3d1f7c39233f67a6038b9fc6d2)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;bin/hbase&lt;/li&gt;
	&lt;li&gt;bin/hbase-config.sh&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15141153" author="hudson" created="Wed, 10 Feb 2016 16:54:47 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98-matrix #295 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-matrix/295/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-matrix/295/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15145&quot; title=&quot;HBCK and Replication should authenticate to zookepeer using server principal&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15145&quot;&gt;&lt;del&gt;HBASE-15145&lt;/del&gt;&lt;/a&gt; HBCK and Replication should authenticate to zookepeer using (apurtell: rev 6bf47a03088194b5740315142b3b5fba3a357b66)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;bin/hbase-config.sh&lt;/li&gt;
	&lt;li&gt;bin/hbase&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15141229" author="hudson" created="Wed, 10 Feb 2016 17:20:27 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.98-on-Hadoop-1.1 #1169 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/1169/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/1169/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-15145&quot; title=&quot;HBCK and Replication should authenticate to zookepeer using server principal&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-15145&quot;&gt;&lt;del&gt;HBASE-15145&lt;/del&gt;&lt;/a&gt; HBCK and Replication should authenticate to zookepeer using (apurtell: rev 6bf47a03088194b5740315142b3b5fba3a357b66)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;bin/hbase-config.sh&lt;/li&gt;
	&lt;li&gt;bin/hbase&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12783484" name="hbase-15145_v1.patch" size="1495" author="enis" created="Thu, 21 Jan 2016 01:15:21 +0000"/>
                            <attachment id="12783490" name="hbase-15145_v2.patch" size="1278" author="enis" created="Thu, 21 Jan 2016 01:54:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 21 Jan 2016 01:18:39 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            44 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2rrwf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Added a new command line argument: --auth-as-server to enable authenticating to ZooKeeper as the HBase Server principal. This is required for secure clusters for doing replication operations like add_peer, list_peers, etc until &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11392&quot; title=&quot;add/remove peer requests should be routed through master&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11392&quot;&gt;HBASE-11392&lt;/a&gt; is fixed. This advanced option can also be used for manually fixing secure znodes. &lt;br/&gt;
&lt;br/&gt;
Commands can now be invoked like: &lt;br/&gt;
hbase --auth-as-server shell &lt;br/&gt;
hbase --auth-as-server zkcli &lt;br/&gt;
&lt;br/&gt;
HBCK in secure setup also needs to authenticate to ZK using servers principals.This is turned on by default (no need to pass additional argument). &lt;br/&gt;
&lt;br/&gt;
When authenticating as server, HBASE_SERVER_JAAS_OPTS is concatenated to HBASE_OPTS if defined in hbase-env.sh. Otherwise, HBASE_REGIONSERVER_OPTS is concatenated. </customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>