<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:17:36 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-10834/HBASE-10834.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-10834] Better error messaging on issuing grant commands in non-authz mode</title>
                <link>https://issues.apache.org/jira/browse/HBASE-10834</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Running the below sequence of steps should give a better error messaging rather than &quot;table not found&quot; error. &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hbase(main):009:0&amp;gt; grant &lt;span class=&quot;code-quote&quot;&gt;&quot;test&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;RWCXA&quot;&lt;/span&gt;

ERROR: Unknown table _acl_!

Here is some help &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; command:
Grant users specific rights.
Syntax : grant &amp;lt;user&amp;gt; &amp;lt;permissions&amp;gt; [&amp;lt;table&amp;gt; [&amp;lt;column family&amp;gt; [&amp;lt;column qualifier&amp;gt;]]

permissions is either zero or more letters from the set &lt;span class=&quot;code-quote&quot;&gt;&quot;RWXCA&quot;&lt;/span&gt;.
READ(&apos;R&apos;), WRITE(&apos;W&apos;), EXEC(&apos;X&apos;), CREATE(&apos;C&apos;), ADMIN(&apos;A&apos;)

For example:

    hbase&amp;gt; grant &apos;bobsmith&apos;, &apos;RWXCA&apos;
    hbase&amp;gt; grant &apos;bobsmith&apos;, &apos;RW&apos;, &apos;t1&apos;, &apos;f1&apos;, &apos;col1&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Instead of ERROR: Unknown table &lt;em&gt;acl&lt;/em&gt;!, hbase should give out a warning like &quot;Command not supported in non-authz mode(as acl table is only created if authz is turned on)&quot;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12703637">HBASE-10834</key>
            <summary>Better error messaging on issuing grant commands in non-authz mode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="srikanth235">Srikanth Srungarapu</assignee>
                                    <reporter username="srikanth235">Srikanth Srungarapu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Mar 2014 00:32:22 +0000</created>
                <updated>Tue, 9 Sep 2014 04:19:28 +0000</updated>
                            <resolved>Thu, 14 Aug 2014 16:02:41 +0000</resolved>
                                    <version>0.94.17</version>
                                    <fixVersion>0.94.23</fixVersion>
                                    <component>shell</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13948479" author="srikanth235" created="Wed, 26 Mar 2014 21:18:50 +0000"  >&lt;p&gt;Verified the patch locally.&lt;/p&gt;</comment>
                            <comment id="14021337" author="apurtell" created="Sun, 8 Jun 2014 21:13:21 +0000"  >&lt;p&gt;&quot;authz&quot; is a shorthand security heads use and &quot;non-athz&quot; isn&apos;t a word. Fix that and this patch would be fine.&lt;/p&gt;</comment>
                            <comment id="14021350" author="hadoopqa" created="Sun, 8 Jun 2014 21:22:37 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12637015/HBASE-10834.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12637015/HBASE-10834.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12637015&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9720//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9720//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14025861" author="srikanth235" created="Mon, 9 Jun 2014 22:34:08 +0000"  >&lt;p&gt;Changed the error message to get rid of non-authz term. &lt;/p&gt;</comment>
                            <comment id="14025873" author="hadoopqa" created="Mon, 9 Jun 2014 22:42:42 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12649479/HBASE-10834_v2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12649479/HBASE-10834_v2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12649479&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/9729//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/9729//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14030055" author="jxiang" created="Fri, 13 Jun 2014 00:03:19 +0000"  >&lt;p&gt;Could there be reasons other than the authentication is not on?&lt;/p&gt;</comment>
                            <comment id="14079931" author="srikanth235" created="Wed, 30 Jul 2014 20:36:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jxiang&quot; class=&quot;user-hover&quot; rel=&quot;jxiang&quot;&gt;Jimmy Xiang&lt;/a&gt; The table &lt;em&gt;acl&lt;/em&gt; gets accessed as part of authorization coprocessor classes, so I couldn&apos;t really see any other reason for &lt;em&gt;acl&lt;/em&gt; to get accessed when authorization is turned off.&lt;/p&gt;</comment>
                            <comment id="14079956" author="jxiang" created="Wed, 30 Jul 2014 20:54:07 +0000"  >&lt;p&gt;Is it possible that the cluster has authorization on, but the grant command fails due to some other reason, for example, the cluster is down?&lt;/p&gt;</comment>
                            <comment id="14080187" author="srikanth235" created="Wed, 30 Jul 2014 23:28:27 +0000"  >&lt;p&gt;Sorry for overlooking the case where authorization is turned on. Made changes to the patch, which now issues the error message, after ensuring that no &lt;em&gt;acl&lt;/em&gt; table exists.&lt;/p&gt;</comment>
                            <comment id="14080195" author="hadoopqa" created="Wed, 30 Jul 2014 23:32:42 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12658772/HBASE-10834_v3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12658772/HBASE-10834_v3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12658772&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10234//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10234//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14082923" author="jxiang" created="Fri, 1 Aug 2014 20:40:11 +0000"  >&lt;p&gt;This patch is for 0.94. We don&apos;t have the issue for 0.98+, right? Does v3 solve the problem?&lt;/p&gt;</comment>
                            <comment id="14082966" author="srikanth235" created="Fri, 1 Aug 2014 21:10:16 +0000"  >&lt;p&gt;Yes, this is only for 0.94 as this check is already enforced in 0.98. Please find more details about the patch below:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Copied the &lt;a href=&quot;https://github.com/apache/hbase/blob/0.98/hbase-shell/src/main/ruby/hbase/security.rb#L202&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/hbase/blob/0.98/hbase-shell/src/main/ruby/hbase/security.rb#L202&lt;/a&gt; (0.98 branch) and incorporated it into 0.94 branch.&lt;/li&gt;
	&lt;li&gt;All it does is ask the server if the &lt;em&gt;acl&lt;/em&gt; table exists. If the server responds no such table exists, it throws an error saying authorization is turned off.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14083001" author="jxiang" created="Fri, 1 Aug 2014 21:36:28 +0000"  >&lt;p&gt;It seems there is an extra &quot;end&quot;.  Do you need a &quot;\&quot; to combine the two lines?&lt;/p&gt;</comment>
                            <comment id="14094749" author="srikanth235" created="Tue, 12 Aug 2014 21:49:05 +0000"  >&lt;p&gt;Attaching updated patch as per suggestions.&lt;/p&gt;</comment>
                            <comment id="14094808" author="hadoopqa" created="Tue, 12 Aug 2014 22:32:03 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12661313/HBASE-10834_v4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12661313/HBASE-10834_v4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision .&lt;br/&gt;
  ATTACHMENT ID: 12661313&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 tests included&lt;/font&gt;.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 patch&lt;/font&gt;.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/10404//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/10404//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14094837" author="jxiang" created="Tue, 12 Aug 2014 22:47:24 +0000"  >&lt;p&gt;v4 looks good to me. +1&lt;/p&gt;</comment>
                            <comment id="14096380" author="srikanth235" created="Thu, 14 Aug 2014 01:11:19 +0000"  >&lt;p&gt;Tested the patch on the secure cluster. The output:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hbase(main):003:0&amp;gt; grant &lt;span class=&quot;code-quote&quot;&gt;&quot;test&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;RWCXA&quot;&lt;/span&gt;
0 row(s) in 0.3920 seconds
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The output on non-secure cluster is as follows:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hbase(main):002:0&amp;gt; grant &lt;span class=&quot;code-quote&quot;&gt;&quot;test&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;RWXCA&quot;&lt;/span&gt;

ERROR: Command not supported as authorization is turned off 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="14097142" author="jxiang" created="Thu, 14 Aug 2014 16:02:41 +0000"  >&lt;p&gt;Integrated into 0.94. Thanks Srikanth for the patch.&lt;/p&gt;</comment>
                            <comment id="14097230" author="hudson" created="Thu, 14 Aug 2014 17:15:06 +0000"  >&lt;p&gt;FAILURE: Integrated in HBase-0.94 #1401 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94/1401/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94/1401/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10834&quot; title=&quot;Better error messaging on issuing grant commands in non-authz mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10834&quot;&gt;&lt;del&gt;HBASE-10834&lt;/del&gt;&lt;/a&gt; Better error messaging on issuing grant commands in non-authz mode (Srikanth Srungarapu) (jxiang: rev dfcf767ae21548f65851044440381dd72e4cccf2)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;src/main/ruby/hbase/security.rb&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14097243" author="hudson" created="Thu, 14 Aug 2014 17:23:26 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.94-JDK7 #170 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-JDK7/170/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-JDK7/170/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10834&quot; title=&quot;Better error messaging on issuing grant commands in non-authz mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10834&quot;&gt;&lt;del&gt;HBASE-10834&lt;/del&gt;&lt;/a&gt; Better error messaging on issuing grant commands in non-authz mode (Srikanth Srungarapu) (jxiang: rev dfcf767ae21548f65851044440381dd72e4cccf2)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;src/main/ruby/hbase/security.rb&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14097254" author="hudson" created="Thu, 14 Aug 2014 17:32:42 +0000"  >&lt;p&gt;SUCCESS: Integrated in HBase-0.94-security #511 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-0.94-security/511/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-0.94-security/511/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10834&quot; title=&quot;Better error messaging on issuing grant commands in non-authz mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10834&quot;&gt;&lt;del&gt;HBASE-10834&lt;/del&gt;&lt;/a&gt; Better error messaging on issuing grant commands in non-authz mode (Srikanth Srungarapu) (jxiang: rev dfcf767ae21548f65851044440381dd72e4cccf2)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;src/main/ruby/hbase/security.rb&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12637015" name="HBASE-10834.patch" size="1258" author="srikanth235" created="Wed, 26 Mar 2014 21:18:50 +0000"/>
                            <attachment id="12649479" name="HBASE-10834_v2.patch" size="1619" author="srikanth235" created="Mon, 9 Jun 2014 22:34:54 +0000"/>
                            <attachment id="12658772" name="HBASE-10834_v3.patch" size="872" author="srikanth235" created="Wed, 30 Jul 2014 23:28:27 +0000"/>
                            <attachment id="12661313" name="HBASE-10834_v4.patch" size="560" author="srikanth235" created="Tue, 12 Aug 2014 21:49:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 8 Jun 2014 21:13:21 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>381971</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 18 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1tt4n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>382246</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>