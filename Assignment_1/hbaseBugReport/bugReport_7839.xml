<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:49:32 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-7839/HBASE-7839.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-7839] Add a script to simulate a dead machine during the integration tests</title>
                <link>https://issues.apache.org/jira/browse/HBASE-7839</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;A kill -9 cannot be used to simulate a dead box. With a kill -9:&lt;br/&gt;
1) the sockets are closed by the OS&lt;br/&gt;
2) the next calls will get immediately a connection refused.&lt;/p&gt;

&lt;p&gt;Physically unplugging the cable does work.&lt;/p&gt;

&lt;p&gt;To automate this, the best solution seems to be using a firewall config.&lt;br/&gt;
It&apos;s a little bit complicated however, because we need to refuse the incoming packets. If we block the out connection, it&apos;s detected by the OS and there is no wait on the socket.&lt;/p&gt;

&lt;p&gt;Moreover you need to be root, or use a program with a sticky bit to launch the script that changes the firewall config.&lt;/p&gt;

&lt;p&gt;This will be usable from the integration tests.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12632223">HBASE-7839</key>
            <summary>Add a script to simulate a dead machine during the integration tests</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="nkeywal">Nicolas Liochon</assignee>
                                    <reporter username="nkeywal">Nicolas Liochon</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Feb 2013 15:36:45 +0000</created>
                <updated>Mon, 23 Sep 2013 19:16:10 +0000</updated>
                            <resolved>Tue, 25 Jun 2013 14:58:56 +0000</resolved>
                                    <version>0.95.2</version>
                                                    <component>test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="13577670" author="jmhsieh" created="Wed, 13 Feb 2013 16:00:13 +0000"  >&lt;p&gt;You might want to take a look at this &amp;#8211; &lt;a href=&quot;https://github.com/jmhsieh/gremlins&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/jmhsieh/gremlins&lt;/a&gt;  it is a fork of work that Todd Lipcon did a while back that does some of what you are talking about.&lt;/p&gt;</comment>
                            <comment id="13577678" author="nkeywal" created="Wed, 13 Feb 2013 16:17:27 +0000"  >&lt;p&gt;There is likely what I need, as I see some iptable stuff &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;

&lt;p&gt;What I have is much smaller, but does nothing else than change the iptable rule and wrap this.&lt;/p&gt;

&lt;p&gt;The final goal is to be able to call it from java (I&apos;m going to create another jira for this, including start / stop hdfs &amp;amp; hbase). &lt;/p&gt;

&lt;p&gt;So whatever works it ok for me. I attach what I have today.&lt;/p&gt;</comment>
                            <comment id="13578069" author="sershe" created="Thu, 14 Feb 2013 00:31:46 +0000"  >&lt;p&gt;Can we block individual ports? That will allow usage on local box when multiple services are distinguished by ports.&lt;/p&gt;</comment>
                            <comment id="13578248" author="nkeywal" created="Thu, 14 Feb 2013 08:57:59 +0000"  >&lt;p&gt;It&apos;s not easy, because you would have to know what ports are used (and the machine can have the NN, ZK, a DN, ...)&lt;br/&gt;
Note that in a standard test, it does not prevent the targeted machine from being used: you don&apos;t see anymore the packets it sends, so you see this machine as dead, but it can still send packets to the rest of the world. This allows to use another developer machine for such a test.&lt;/p&gt;</comment>
                            <comment id="13579333" author="nkeywal" created="Fri, 15 Feb 2013 17:13:13 +0000"  >&lt;p&gt;I don&apos;t press &apos;submit patch&apos; because it&apos;s a pure C and shell script stuff, so I save Jenkins resources, but 7839.v1.patch is what I would like to commit. So feedback is welcome &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;br/&gt;
As it&apos;s not critical but a little bit different from the usual patches, I will wait a few days in any case.&lt;/p&gt;

</comment>
                            <comment id="13582213" author="nkeywal" created="Wed, 20 Feb 2013 14:36:48 +0000"  >&lt;p&gt;Hum, It&apos;s only for tests is there any issue if I commit next friday or so, depending on the feedback on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7840&quot; title=&quot;Enhance the java it framework to start &amp;amp; stop a distributed hbase &amp;amp; hadoop cluster &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7840&quot;&gt;&lt;del&gt;HBASE-7840&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="13582877" author="enis" created="Thu, 21 Feb 2013 03:39:05 +0000"  >&lt;p&gt;Can&apos;t we set the stickybit for the it_blockmachine.sh script, and execute that as root instead of the C wrapper? &lt;/p&gt;</comment>
                            <comment id="13584186" author="nkeywal" created="Fri, 22 Feb 2013 10:59:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt;No, it&apos;s not allowed as it&apos;s considered as a security issue. The wrapper doesn&apos;t fix the security issue, but workarounds the OS protection.&lt;/p&gt;</comment>
                            <comment id="13639267" author="stack" created="Tue, 23 Apr 2013 17:23:40 +0000"  >&lt;p&gt;No objection from me on commit.&lt;/p&gt;</comment>
                            <comment id="13668740" author="ndimiduk" created="Tue, 28 May 2013 22:25:27 +0000"  >&lt;p&gt;Why is this in C instead of something like Ruby or Python? Python os package contains all these APIs, as far as I can tell.&lt;/p&gt;</comment>
                            <comment id="13669258" author="nkeywal" created="Wed, 29 May 2013 13:46:08 +0000"  >&lt;p&gt;Unixes don&apos;t like the sticky bit will shell tools. It&apos;s not possible (anymore) for perl for example. I don&apos;t remember if it works with ruby or python, but the Unixes would aim at make it not possible. &lt;/p&gt;</comment>
                            <comment id="13687594" author="stack" created="Wed, 19 Jun 2013 04:27:25 +0000"  >&lt;p&gt;What is the state of this issue?  Should it be in 0.95?  Is it something that needs to be checked in?&lt;/p&gt;</comment>
                            <comment id="13687764" author="nkeywal" created="Wed, 19 Jun 2013 08:25:32 +0000"  >&lt;p&gt;I&apos;m reworking in this jira and its brother &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7840&quot; title=&quot;Enhance the java it framework to start &amp;amp; stop a distributed hbase &amp;amp; hadoop cluster &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7840&quot;&gt;&lt;del&gt;HBASE-7840&lt;/del&gt;&lt;/a&gt;. I will push a version that relies on a passwordless sudo.&lt;/p&gt;</comment>
                            <comment id="13693103" author="nkeywal" created="Tue, 25 Jun 2013 14:58:56 +0000"  >&lt;p&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-7840&quot; title=&quot;Enhance the java it framework to start &amp;amp; stop a distributed hbase &amp;amp; hadoop cluster &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-7840&quot;&gt;&lt;del&gt;HBASE-7840&lt;/del&gt;&lt;/a&gt;, the solution relies on a passwordless sudo. It&apos;s more secure.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                                                <inwardlinks description="is required by">
                                        <issuelink>
            <issuekey id="12632235">HBASE-7840</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12569210" name="7839.v1.patch" size="6521" author="nkeywal" created="Wed, 13 Feb 2013 16:18:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 13 Feb 2013 16:00:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>312719</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 25 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1hysn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>313065</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>