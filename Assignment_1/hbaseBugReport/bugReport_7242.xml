<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:43:55 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-7242/HBASE-7242.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-7242] Use Runtime.exit() instead of Runtime.halt() upon HLog Sync failures</title>
                <link>https://issues.apache.org/jira/browse/HBASE-7242</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Hey Guys,&lt;br/&gt;
  Should we use Runtime.exit() instead of Runtime.halt(), when we fail a Hlog sync. &lt;/p&gt;

&lt;p&gt; The key difference is that Runtime.exit() is going to invoke the shutdown hooks; while Runtime.halt() does not.&lt;/p&gt;


&lt;p&gt; Why we might need this: &lt;br/&gt;
   We had a HDFS name node reboot today on one of our cells, and this caused multiple region servers to abort because they could not sync the Hlog.&lt;/p&gt;

&lt;p&gt;   However, since multiple RS died simultaneously, this seemed like a co-related failure to the master. The master waits for the&lt;br/&gt;
Znode to expire; but, this could take up to few minutes after RS death (this setting is in place so that we can withstand rack switch reboots, lasting a couple of minutes, without region movement).&lt;/p&gt;

&lt;p&gt;  If the shutdown hooks are called, RS will close the ZK connection, causing a immediate Znode expiry. This might help cut down the unavailability as &lt;br/&gt;
Regions can begin to get assigned faster.&lt;/p&gt;


&lt;p&gt; While, we do want to abort on Hlog failure, I do not think it would hurt giving the JVM a few seconds to shutdown gracefully. Please let me know&lt;br/&gt;
If I am missing something.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
-Amit&lt;/p&gt;</description>
                <environment></environment>
        <key id="12618250">HBASE-7242</key>
            <summary>Use Runtime.exit() instead of Runtime.halt() upon HLog Sync failures</summary>
                <type id="13" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/genericissue.png">Brainstorming</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="amitanand">Amitanand Aiyer</reporter>
                        <labels>
                    </labels>
                <created>Fri, 30 Nov 2012 00:14:52 +0000</created>
                <updated>Sun, 2 Dec 2012 02:42:20 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13506993" author="kannanm" created="Fri, 30 Nov 2012 00:48:32 +0000"  >&lt;p&gt;Currently, don&apos;t the shutdown hooks also try to flush/close the regions before closing the ZK connection?&lt;/p&gt;</comment>
                            <comment id="13507089" author="stack" created="Fri, 30 Nov 2012 04:40:20 +0000"  >&lt;p&gt;What Kannan said (though if the abort flag is set, they might skip doing this)?&lt;/p&gt;</comment>
                            <comment id="13508131" author="amitanand" created="Sun, 2 Dec 2012 02:42:20 +0000"  >&lt;p&gt;Yes, thats true. &lt;/p&gt;

&lt;p&gt;But, we only try to do that if we are not requesting aborts, and fs is OK. (Although this state is maintained by HRegionServer, we can get update it, in this code path, if we want to skip immediately).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 30 Nov 2012 00:48:32 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>292879</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 2 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sg5j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164094</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>