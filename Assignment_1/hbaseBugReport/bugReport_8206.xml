<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:53:01 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-8206/HBASE-8206.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-8206] Thread safety issues with Compression.Algorithm.GZ and SNAPPY</title>
                <link>https://issues.apache.org/jira/browse/HBASE-8206</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;The Compression.Algorithm was not completely thread safe. Hence making it thread safe. Trying to fix this the same way it was fixed in HBase trunk(&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5458&quot; title=&quot;Thread safety issues with Compression.Algorithm.GZ and CompressionTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5458&quot;&gt;&lt;del&gt;HBASE-5458&lt;/del&gt;&lt;/a&gt;) with a minor change since the fix in trunk is not completely thread safe.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12639484">HBASE-8206</key>
            <summary>Thread safety issues with Compression.Algorithm.GZ and SNAPPY</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="manukranthk">Manukranth Kolloju</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Mar 2013 23:34:34 +0000</created>
                <updated>Thu, 28 Mar 2013 01:16:52 +0000</updated>
                            <resolved>Wed, 27 Mar 2013 23:38:40 +0000</resolved>
                                    <version>0.89-fb</version>
                                    <fixVersion>0.89-fb</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                    <timeoriginalestimate seconds="86400">24h</timeoriginalestimate>
                            <timeestimate seconds="86400">24h</timeestimate>
                                        <comments>
                            <comment id="13615890" author="manukranthk" created="Wed, 27 Mar 2013 23:38:34 +0000"  >&lt;p&gt;We found that double locking was not necessarily thread safe and it might be solved by doing the following : &lt;br/&gt;
        if (codec == null) {&lt;br/&gt;
          synchronized (lock) {&lt;br/&gt;
            if (codec == null) &lt;/p&gt;
{
              GzipCodec tmpCodec = new ReusableStreamGzipCodec();
              tmpCodec.setConf(new Configuration(conf));
              codec = tmpCodec;
            }
&lt;p&gt;          }&lt;/p&gt;</comment>
                            <comment id="13615896" author="lhofhansl" created="Wed, 27 Mar 2013 23:50:07 +0000"  >&lt;p&gt;That&apos;s exactly what the patch in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5458&quot; title=&quot;Thread safety issues with Compression.Algorithm.GZ and CompressionTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5458&quot;&gt;&lt;del&gt;HBASE-5458&lt;/del&gt;&lt;/a&gt; does.&lt;br/&gt;
If there is still an issue in 0.94/0.95/trunk we need to fix that.&lt;/p&gt;</comment>
                            <comment id="13615920" author="manukranthk" created="Thu, 28 Mar 2013 00:31:41 +0000"  >&lt;p&gt;I unfolded the function myself when I was writing it and realized the fact that function unfolding made a lot of difference after re-reading the code now. Thanks for pointing it out. It was a wrong claim that &quot;the fix in trunk is not completely thread safe.&quot;&lt;/p&gt;</comment>
                            <comment id="13615928" author="lhofhansl" created="Thu, 28 Mar 2013 00:38:11 +0000"  >&lt;p&gt;Thanks for confirming, Manukranth.&lt;/p&gt;</comment>
                            <comment id="13615949" author="manukranthk" created="Thu, 28 Mar 2013 01:16:52 +0000"  >&lt;p&gt;Are there any compiler optimizations that you know of which might trivially convert :&lt;br/&gt;
if (codec == null) {&lt;br/&gt;
synchronized (lock) {&lt;br/&gt;
if (codec == null)&lt;/p&gt;
{
GzipCodec tmpCodec = new ReusableStreamGzipCodec();
tmpCodec.setConf(new Configuration(conf));
codec = tmpCodec;
}
&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;to :&lt;/p&gt;

&lt;p&gt;if (codec == null) {&lt;br/&gt;
synchronized (lock) {&lt;br/&gt;
if (codec == null)&lt;/p&gt;
{
codec = new ReusableStreamGzipCodec();
codec.setConf(new Configuration(conf));
}
&lt;p&gt;}&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 27 Mar 2013 23:50:07 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>319953</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 38 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1j7ev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>320294</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>