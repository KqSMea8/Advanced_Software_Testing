<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:50:53 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1115/HBASE-1115.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1115] Rollback after regions failed compaction</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1115</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;When compaction fails the affected region is left in an open and writable state, but scanners fail construction. Later a manual reassignment via close_region brings the region all the way back up.&lt;/p&gt;

&lt;p&gt;Should there be rollback after a failed compaction somehow?&lt;/p&gt;

&lt;p&gt;org.apache.hadoop.hbase.client.RetriesExhaustedException: Trying to contact region server 10.30.94.50:60020 for region content,c84bbfc94b2143e41ba119d159be2958,1231518442461, row &apos;c84bbfc94b2143e41ba119d159be2958&apos;, but failed after 10 attempts.&lt;br/&gt;
Exceptions:&lt;br/&gt;
java.io.IOException: java.io.IOException: HStoreScanner failed construction&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.StoreFileScanner.(StoreFileScanner.java:70)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HStoreScanner.(HStoreScanner.java:84)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HStore.getScanner(HStore.java:2119)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HRegion$HScanner.(HRegion.java:1878)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HRegion.getScanner(HRegion.java:1162)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HRegionServer.openScanner(HRegionServer.java:1673)&lt;br/&gt;
	at sun.reflect.GeneratedMethodAccessor14.invoke(Unknown Source)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at org.apache.hadoop.hbase.ipc.HBaseRPC$Server.call(HBaseRPC.java:632)&lt;br/&gt;
	at org.apache.hadoop.hbase.ipc.HBaseServer$Handler.run(HBaseServer.java:894)&lt;br/&gt;
Caused by: java.io.FileNotFoundException: File does not exist: hdfs://sjdc-atr-dc-1.atr.trendmicro.com:50000/data/hbase/content/1707725801/url/mapfiles/7039742044868774100/data&lt;br/&gt;
	at org.apache.hadoop.dfs.DistributedFileSystem.getFileStatus(DistributedFileSystem.java:394)&lt;br/&gt;
	at org.apache.hadoop.fs.FileSystem.getLength(FileSystem.java:695)&lt;br/&gt;
	at org.apache.hadoop.hbase.io.SequenceFile$Reader.(SequenceFile.java:1431)&lt;br/&gt;
	at org.apache.hadoop.hbase.io.SequenceFile$Reader.(SequenceFile.java:1426)&lt;br/&gt;
	at org.apache.hadoop.hbase.io.MapFile$Reader.createDataFileReader(MapFile.java:310)&lt;br/&gt;
	at org.apache.hadoop.hbase.io.HBaseMapFile$HBaseReader.createDataFileReader(HBaseMapFile.java:96)&lt;br/&gt;
	at org.apache.hadoop.hbase.io.MapFile$Reader.open(MapFile.java:292)&lt;br/&gt;
	at org.apache.hadoop.hbase.io.HBaseMapFile$HBaseReader.(HBaseMapFile.java:79)&lt;br/&gt;
	at org.apache.hadoop.hbase.io.BloomFilterMapFile$Reader.(BloomFilterMapFile.java:65)&lt;br/&gt;
	at org.apache.hadoop.hbase.io.HalfMapFileReader.(HalfMapFileReader.java:86)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.HStoreFile.getReader(HStoreFile.java:438)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.StoreFileScanner.openReaders(StoreFileScanner.java:96)&lt;br/&gt;
	at org.apache.hadoop.hbase.regionserver.StoreFileScanner.(StoreFileScanner.java:67)&lt;br/&gt;
	... 10 more&lt;/p&gt;</description>
                <environment>&lt;p&gt;apurtell cluster, HBase TRUNK on hadoop 0.18 branch&lt;/p&gt;</environment>
        <key id="12412079">HBASE-1115</key>
            <summary>Rollback after regions failed compaction</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="apurtell">Andrew Purtell</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Jan 2009 20:11:41 +0000</created>
                <updated>Tue, 7 Dec 2010 20:48:30 +0000</updated>
                            <resolved>Tue, 7 Dec 2010 20:48:30 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12662505" author="apurtell" created="Fri, 9 Jan 2009 20:13:13 +0000"  >&lt;p&gt;I&apos;ve seen the same thing after &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1104&quot; title=&quot;Doubly-assigned regions redux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1104&quot;&gt;&lt;del&gt;HBASE-1104&lt;/del&gt;&lt;/a&gt;. This is a broad symptom of compaction failure I suspect.&lt;/p&gt;</comment>
                            <comment id="12662574" author="stack" created="Sat, 10 Jan 2009 00:25:41 +0000"  >&lt;p&gt;I can&apos;t say for certain but seems related to hbase-1114 Andrew?  The FNFE is root of the above.  Seemed to start after the NPEs.&lt;/p&gt;</comment>
                            <comment id="12662610" author="apurtell" created="Sat, 10 Jan 2009 03:07:48 +0000"  >&lt;p&gt;Yes is definitely related to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1114&quot; title=&quot;Weird NPEs compacting&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1114&quot;&gt;&lt;del&gt;HBASE-1114&lt;/del&gt;&lt;/a&gt;. But should there be rollback after failed compaction? This also happened in conjunction with &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1104&quot; title=&quot;Doubly-assigned regions redux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1104&quot;&gt;&lt;del&gt;HBASE-1104&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;</comment>
                            <comment id="12662611" author="apurtell" created="Sat, 10 Jan 2009 03:09:54 +0000"  >&lt;p&gt;Edited issue title to broaden, marked down&lt;/p&gt;</comment>
                            <comment id="12968967" author="stack" created="Tue, 7 Dec 2010 20:48:30 +0000"  >&lt;p&gt;Resolving as no longer valid.  Nicolas made it so compactions could be interrupted.  As part of his change, implicit is fact that compaction can be redone on fail/interrupt.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 10 Jan 2009 00:25:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25579</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hbf3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99112</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>