<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:12:24 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-10295/HBASE-10295.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-10295] Refactor the replication  implementation to eliminate permanent zk node</title>
                <link>https://issues.apache.org/jira/browse/HBASE-10295</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Though this is a broader and bigger change, it original motivation derives from &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8751&quot; title=&quot;Enable peer cluster to choose/change the ColumnFamilies/Tables it really want to replicate from a source cluster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8751&quot;&gt;&lt;del&gt;HBASE-8751&lt;/del&gt;&lt;/a&gt;: the newly introduced per-peer tableCFs attribute should be treated the same way as the peer-state, which is a permanent sub-node under peer node but using permanent zk node is deemed as an incorrect practice. So let&apos;s refactor to eliminate the permanent zk node. And the &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-8751&quot; title=&quot;Enable peer cluster to choose/change the ColumnFamilies/Tables it really want to replicate from a source cluster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-8751&quot;&gt;&lt;del&gt;HBASE-8751&lt;/del&gt;&lt;/a&gt; can then align its newly introduced per-peer tableCFs attribute with this &lt;b&gt;correct&lt;/b&gt; implementation theme.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12687786">HBASE-10295</key>
            <summary>Refactor the replication  implementation to eliminate permanent zk node</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="fenghh">Honghua Feng</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Jan 2014 01:53:55 +0000</created>
                <updated>Thu, 14 May 2015 14:37:40 +0000</updated>
                                                                            <component>Replication</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>23</watches>
                                                                <comments>
                            <comment id="13865018" author="lhofhansl" created="Wed, 8 Jan 2014 03:14:54 +0000"  >&lt;p&gt;Awesome. Do you have a plan? I.e. where should we put this state instead. Maybe an HBase table?&lt;br/&gt;
Let&apos;s target this to trunk only for now.&lt;/p&gt;</comment>
                            <comment id="13865038" author="fenghh" created="Wed, 8 Jan 2014 03:54:21 +0000"  >&lt;p&gt;Another HBase internal system table (similar to meta table) is a good choice for storing replication zk node information, but lacking the zk&apos;s  inherent watch/notification mechanism which is essential for the &apos;client change replication status(such as peer-state / add peer), regionservers listens and gets notification for such status and perform accordingly(such as disable a peer / add a new peer thread)&apos; communication pattern...&lt;/p&gt;

&lt;p&gt;No clear plan for now, but I&apos;ll spend some time these days to figure out a draft design for discussion and brainstorming first, any opinion/suggestion is welcome &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;And change the title of this jira to make it more general and match its intention better. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=techbuddy01&quot; class=&quot;user-hover&quot; rel=&quot;techbuddy01&quot;&gt;santosh banerjee&lt;/a&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13868266" author="stack" created="Fri, 10 Jan 2014 20:36:20 +0000"  >&lt;p&gt;Make Master arbiter for these new system tables &amp;#8211; only the master can mod them &amp;#8211; and then add a response on the heartbeat to update regionservers on last edit?  Currently we return a void.  See RegionServerReportResponse in &lt;a href=&quot;http://svn.apache.org/viewvc/hbase/trunk/hbase-protocol/src/main/protobuf/RegionServerStatus.proto?view=markup&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/hbase/trunk/hbase-protocol/src/main/protobuf/RegionServerStatus.proto?view=markup&lt;/a&gt;  Could be as simple as master just replying w/ timestamp of last edit.  If RS has not seen the new edit, it goes and reads the table....&lt;/p&gt;</comment>
                            <comment id="13868811" author="fenghh" created="Sat, 11 Jan 2014 15:04:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; Yes, sound feasible, thanks &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13869785" author="apurtell" created="Mon, 13 Jan 2014 18:15:31 +0000"  >&lt;p&gt;Nice idea, +1&lt;/p&gt;</comment>
                            <comment id="13882245" author="fenghh" created="Sun, 26 Jan 2014 09:31:23 +0000"  >&lt;p&gt;a long-term item and need more discussion and thought, a bit related to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10296&quot; title=&quot;Replace ZK with a consensus lib(paxos,zab or raft) running within master processes to provide better master failover performance and state consistency&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10296&quot;&gt;HBASE-10296&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13961726" author="mantonov" created="Mon, 7 Apr 2014 09:04:05 +0000"  >&lt;p&gt;I&apos;m thinking if this jira kind of fits the umbrella of &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-10909&quot; title=&quot;Abstract out ZooKeeper usage in HBase - phase 1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-10909&quot;&gt;&lt;del&gt;HBASE-10909&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="13961728" author="mantonov" created="Mon, 7 Apr 2014 09:06:59 +0000"  >&lt;p&gt;Just thinking it may be good to have all jiras which are about &quot;eliminating..something permanent in ZK&quot; under the same umbrella.&lt;/p&gt;</comment>
                            <comment id="13961744" author="apurtell" created="Mon, 7 Apr 2014 09:36:34 +0000"  >&lt;p&gt;Makes sense. &lt;/p&gt;</comment>
                            <comment id="13961750" author="mantonov" created="Mon, 7 Apr 2014 09:47:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fenghh&quot; class=&quot;user-hover&quot; rel=&quot;fenghh&quot;&gt;Honghua Feng&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lhofhansl&quot; class=&quot;user-hover&quot; rel=&quot;lhofhansl&quot;&gt;Lars Hofhansl&lt;/a&gt; is that ok if I move it there as subtask?&lt;/p&gt;</comment>
                            <comment id="13961801" author="enis" created="Mon, 7 Apr 2014 12:07:17 +0000"  >&lt;blockquote&gt;&lt;p&gt;Make Master arbiter for these new system tables &#8211; only the master can mod them &#8211; and then add a response on the heartbeat to update regionservers on last edit? Could be as simple as master just replying w/ timestamp of last edit. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;We should do this as a part of (or using) &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9864&quot; title=&quot;Notifications bus for use by cluster members keeping up-to-date on changes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9864&quot;&gt;HBASE-9864&lt;/a&gt;. I was thinking of something similar, where the data is kept in an hbase table as a snapshot + WAL. All transactions will have an trxid (NO timestamps please). All region servers open a session with a lease, and keep heartbeats to renew their lease. They send the last seen trxId, and the coordinator replies with the list of edits that they should apply to their in memory cache. If some reader looses it&apos;s leases, the coordinator (master) invalidates its session (so that there is an upper bound on the time the edits will be propogated). The coordinator keeps the last seen trxId per session, so that it can do recreate the snapshot and get rid of write ahead log entries. &lt;/p&gt;

&lt;p&gt;However, astute readers might have noticed that this is indeed similar to zk&apos;s own protocol except that the data is not replicated via ZAB, but via datanode pipelines and hbase.  &lt;/p&gt;</comment>
                            <comment id="13962510" author="fenghh" created="Tue, 8 Apr 2014 01:44:50 +0000"  >&lt;blockquote&gt;&lt;p&gt;Honghua Feng stack Lars Hofhansl is that ok if I move it there as subtask?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Sounds good to me&lt;/p&gt;</comment>
                            <comment id="13962535" author="stack" created="Tue, 8 Apr 2014 02:43:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enis&quot; class=&quot;user-hover&quot; rel=&quot;enis&quot;&gt;Enis Soztutar&lt;/a&gt; Over on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9864&quot; title=&quot;Notifications bus for use by cluster members keeping up-to-date on changes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9864&quot;&gt;HBASE-9864&lt;/a&gt;, there is something a little simpler that came of a chat w/ my man Matteo.  I like the idea of doing the zk model but your short paragraph needs a bit of expansion so I understand better how you think it would work in our context.  Thanks.&lt;/p&gt;
</comment>
                            <comment id="13964056" author="enis" created="Wed, 9 Apr 2014 11:48:00 +0000"  >&lt;blockquote&gt;&lt;p&gt;Over on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9864&quot; title=&quot;Notifications bus for use by cluster members keeping up-to-date on changes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9864&quot;&gt;HBASE-9864&lt;/a&gt;, there is something a little simpler that came of a chat w/ my man Matteo.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Agreed, we should continue this over at &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9864&quot; title=&quot;Notifications bus for use by cluster members keeping up-to-date on changes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9864&quot;&gt;HBASE-9864&lt;/a&gt;. Let me carry my writing there as well. &lt;/p&gt;</comment>
                            <comment id="14141332" author="stack" created="Fri, 19 Sep 2014 21:26:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mantonov&quot; class=&quot;user-hover&quot; rel=&quot;mantonov&quot;&gt;Mikhail Antonov&lt;/a&gt; This one sounds up you fellas&apos; alley?  Let me backport the one the undoes table enable/disable.&lt;/p&gt;</comment>
                            <comment id="14189414" author="stack" created="Thu, 30 Oct 2014 01:05:40 +0000"  >&lt;p&gt;Moving out of 1.0. No progress.  Move back if I have it wrong.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12731091">HBASE-11629</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12676713">HBASE-9864</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12687801">HBASE-10296</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 8 Jan 2014 03:14:54 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>366789</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 7 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1r83b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>367100</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>