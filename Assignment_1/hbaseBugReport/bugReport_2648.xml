<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:03:37 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-2648/HBASE-2648.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-2648] API Rework: Have Delete and Put implement same Interface or subclass same &apos;Mutation&apos; ancestor (Get too?  And Result?)</title>
                <link>https://issues.apache.org/jira/browse/HBASE-2648</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Our API has a problem in that we can&apos;t pass a mix of Put and Delete edits.  We see it in various places.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1626&quot; title=&quot;Allow emitting Deletes out of new TableReducer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1626&quot;&gt;&lt;del&gt;HBASE-1626&lt;/del&gt;&lt;/a&gt; tried to add being able to emit Puts and Deletes from your Map or Reduce but as &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1969&quot; title=&quot;HBASE-1626 does not work as advertised due to lack of &amp;quot;instanceof&amp;quot; check in MR framework&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1969&quot;&gt;&lt;del&gt;HBASE-1969&lt;/del&gt;&lt;/a&gt; points out, it won&apos;t work as done.&lt;/p&gt;

&lt;p&gt;Ryan talks about need of being able to pass a set of Deletes and Puts against a single row so we can do a bunch of edits all under the umbrella of a single row &lt;b&gt;lock&lt;/b&gt;.&lt;/p&gt;

&lt;p&gt;Related, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1845&quot; title=&quot;MultiGet, MultiDelete, and MultiPut - batched to the appropriate region servers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1845&quot;&gt;&lt;del&gt;HBASE-1845&lt;/del&gt;&lt;/a&gt; wants to do bulk put/gets/deletes all in same way and &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2609&quot; title=&quot;Harmonize the Get and Delete operations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2609&quot;&gt;&lt;del&gt;HBASE-2609&lt;/del&gt;&lt;/a&gt; is related in that it asks that the Delete and Put API work the same.&lt;/p&gt;

&lt;p&gt;For at least the first issue, in hbase-1969, &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1626&quot; title=&quot;Allow emitting Deletes out of new TableReducer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1626&quot;&gt;&lt;del&gt;HBASE-1626&lt;/del&gt;&lt;/a&gt; does not work as advertised due to lack of &quot;instanceof&quot; check in MR framework&quot;, Lars G suggests we have a Mutation class that can carry Deletes and Puts on a row.  He notes that the sample client code in the BT table seems to do this.  This Mutation carrying-class could be used to solve the Ryan issue above.&lt;/p&gt;

&lt;p&gt;But maybe we need something more radical, an API overhaul (again) to do something like was proposed long-time ago in hbase-880.  This was an ugly, unfinished proposal but many of the classes shared an ancestor -&amp;gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12395138/880proposal5-v2.png&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12395138/880proposal5-v2.png&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12465912">HBASE-2648</key>
            <summary>API Rework: Have Delete and Put implement same Interface or subclass same &apos;Mutation&apos; ancestor (Get too?  And Result?)</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Jun 2010 23:11:26 +0000</created>
                <updated>Mon, 12 May 2014 00:40:05 +0000</updated>
                            <resolved>Mon, 12 May 2014 00:40:05 +0000</resolved>
                                                                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="12874346" author="streamy" created="Wed, 2 Jun 2010 00:42:04 +0000"  >&lt;p&gt;Ahhh!  No more of those old scary 880 proposals!&lt;/p&gt;

&lt;p&gt;The one you point out is a bit strange with Delete under Get?  It&apos;s also got all kinds of Cell stuff with no concept of KeyValue or column as family and qualifier.&lt;/p&gt;

&lt;p&gt;I think if we were going to add some base classes to our API we can do it in a pretty simple and non-invasive way.&lt;/p&gt;

&lt;p&gt;Put and Delete would implement or extend RowMutation or Mutation.  I like RowMutation because these are both single row mutations so it&apos;s more explicit.&lt;/p&gt;

&lt;p&gt;Get and Scan could also implement or extend something but it&apos;s more like a Get is a special kind of Scan now so it could just extend Scan?  That wouldn&apos;t necessarily help for cases like this where we want to pass out either type to the same thing but I&apos;m not sure it&apos;s needed for reads?&lt;/p&gt;</comment>
                            <comment id="12874372" author="ryanobjc" created="Wed, 2 Jun 2010 01:53:36 +0000"  >&lt;p&gt;Delete is a Get...&lt;br/&gt;
Put is a ColumnCellsMap&lt;br/&gt;
Get is a ColumnCellBoundsMap&lt;/p&gt;

&lt;p&gt;From my point of view, the only major flaw is the Delete and Get are&lt;br/&gt;
not doable in 1 operation, which also causes compare and set to be&lt;br/&gt;
fractured into 2 API calls.&lt;/p&gt;

&lt;p&gt;-ryan&lt;/p&gt;

</comment>
                            <comment id="12874408" author="streamy" created="Wed, 2 Jun 2010 04:12:27 +0000"  >&lt;p&gt;Maybe I&apos;m missing the point.. this is for atomic ops, passing of  &lt;br/&gt;
multiple ops to a shared API, reuse of underlying structures? &lt;/p&gt;
</comment>
                            <comment id="12874413" author="stack" created="Wed, 2 Jun 2010 04:38:32 +0000"  >&lt;p&gt;There is this clause in the description that tries to keep us away from a soln. that works for Put and Delete only:&lt;/p&gt;

&lt;p&gt;.bq Related, &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1845&quot; title=&quot;MultiGet, MultiDelete, and MultiPut - batched to the appropriate region servers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1845&quot;&gt;&lt;del&gt;HBASE-1845&lt;/del&gt;&lt;/a&gt; wants to do bulk put/gets/deletes all in same way and &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2609&quot; title=&quot;Harmonize the Get and Delete operations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2609&quot;&gt;&lt;del&gt;HBASE-2609&lt;/del&gt;&lt;/a&gt; is related in that it asks that the Delete and Put API work the same.&lt;/p&gt;

&lt;p&gt;1845 is bulk ops but for Put/Delete and Get.  That issue is about doing each mutually exclusively.  I&apos;d imagine better would be being able to do a bulk ops that is a mixture of all three and if a smattering all land in the same row, then the bulk ops would be done atomically.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2609&quot; title=&quot;Harmonize the Get and Delete operations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2609&quot;&gt;&lt;del&gt;HBASE-2609&lt;/del&gt;&lt;/a&gt;, as I read it, recognizes that Get and Delete are very alike and so API should be alike.&lt;/p&gt;</comment>
                            <comment id="12874757" author="hammer" created="Wed, 2 Jun 2010 19:32:58 +0000"  >&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2609&quot; title=&quot;Harmonize the Get and Delete operations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2609&quot;&gt;&lt;del&gt;HBASE-2609&lt;/del&gt;&lt;/a&gt; is related in that it asks that the Delete and Put API work the same.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m not sure if it&apos;s a typo in your statement, but I opened 2609 to make Delete and Get work the same. Put is a bit different...&lt;/p&gt;</comment>
                            <comment id="12874760" author="stack" created="Wed, 2 Jun 2010 19:39:50 +0000"  >&lt;p&gt;@Jeff Yeah, sorry, yeah, meant Delete and Get.&lt;/p&gt;

&lt;p&gt;Related, over in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2579&quot; title=&quot;Add atomic checkAndDelete support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2579&quot;&gt;&lt;del&gt;HBASE-2579&lt;/del&gt;&lt;/a&gt; (check and delete support) Todd requests:&lt;/p&gt;

&lt;p&gt;&quot;...The one thing I don&apos;t like is that checkAndMutate takes a Writable, and then downcasts based on instanceof. Can we extract a common interface between Put and Delete? maybe something like RowMutation or RowOperation, which would have getRowLock and a &quot;performMutation()&quot; or something? What do you guys think?&quot;&lt;/p&gt;

&lt;p&gt;Ryan puts it off with &quot;this is a somewhat reasonable compromise until one day we unify Put/Delete in an object hierarchy and fix up the API a bit&quot;  which I suppose is what this issue is about in part.&lt;/p&gt;</comment>
                            <comment id="12874872" author="stack" created="Thu, 3 Jun 2010 00:05:44 +0000"  >&lt;p&gt;Just noticed that Delete and Put share an interface called Row  Its only method is getRow.   Get does not implement this Interface though it has a getRow.  Wouldn&apos;t be hard to change this Interface name to RowMutation?&lt;/p&gt;</comment>
                            <comment id="13994725" author="apurtell" created="Mon, 12 May 2014 00:40:05 +0000"  >&lt;p&gt;We have done this elsewhere&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12472093">HBASE-2930</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12440274">HBASE-1969</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12429777">HBASE-1626</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12435843">HBASE-1845</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12465264">HBASE-2609</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 2 Jun 2010 00:42:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32694</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 31 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02ghj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12272</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>