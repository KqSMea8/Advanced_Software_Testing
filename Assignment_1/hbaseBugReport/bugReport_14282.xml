<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 20:51:32 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-14282/HBASE-14282.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-14282] Remove metrics2</title>
                <link>https://issues.apache.org/jira/browse/HBASE-14282</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Metrics2 has a whole bunch of race conditions and weird edges because of all of the caching that metrics2 does.&lt;/p&gt;

&lt;p&gt;Additionally tying something so integral to hadoop who has lots of versions we support has been a maintenance nightmare. It would allow us to completely get rid of the compat modules.&lt;/p&gt;

&lt;p&gt;Rip it out.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12857888">HBASE-14282</key>
            <summary>Remove metrics2</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="eclark">Elliott Clark</reporter>
                        <labels>
                    </labels>
                <created>Fri, 21 Aug 2015 16:30:25 +0000</created>
                <updated>Wed, 23 Nov 2016 01:55:35 +0000</updated>
                                                                            <component>metrics</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>11</watches>
                                                                <comments>
                            <comment id="14707053" author="stack" created="Fri, 21 Aug 2015 17:08:19 +0000"  >&lt;p&gt;That is a radical thought.&lt;/p&gt;</comment>
                            <comment id="14707054" author="stack" created="Fri, 21 Aug 2015 17:09:44 +0000"  >&lt;p&gt;I wonder how much work would be involved. As long as the over-the-wire JMX and the Beans published were the same, how the metrics are generated could change. Removing compat modules and metrics2 voodoo would be a nice cleanup.&lt;/p&gt;</comment>
                            <comment id="14707055" author="busbey" created="Fri, 21 Aug 2015 17:11:45 +0000"  >&lt;p&gt;switch to &lt;a href=&quot;https://github.com/dropwizard/metrics&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;coda hale&apos;s metrics&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="14707058" author="busbey" created="Fri, 21 Aug 2015 17:13:16 +0000"  >&lt;p&gt;I&apos;ll try to make a summary of the discussion that happened aroudn this over in Accumulo. Over there, we just switched to start using Hadoop Metrics 2 in the recent 1.7.0 release: &lt;a href=&quot;https://issues.apache.org/jira/browse/ACCUMULO-1817&quot; title=&quot;Use Hadoop Metrics2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ACCUMULO-1817&quot;&gt;&lt;del&gt;ACCUMULO-1817&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14707089" author="eclark" created="Fri, 21 Aug 2015 17:31:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=busbey&quot; class=&quot;user-hover&quot; rel=&quot;busbey&quot;&gt;Sean Busbey&lt;/a&gt; Yeah switching to dropwizards was my thought. Metrics2 has just been awful to work with. &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;It tries to cache things in places that make working with it hard.&lt;/li&gt;
	&lt;li&gt;Removing metrics is awful at best.&lt;/li&gt;
	&lt;li&gt;Adding more metrics means way too much work.&lt;/li&gt;
	&lt;li&gt;It&apos;s testability is awful because hadoop mangles names.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14707107" author="eclark" created="Fri, 21 Aug 2015 17:38:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stack&quot; class=&quot;user-hover&quot; rel=&quot;stack&quot;&gt;stack&lt;/a&gt; Not sure if it&apos;s possible to do this without changing the metrics names.&lt;/p&gt;</comment>
                            <comment id="14707149" author="stack" created="Fri, 21 Aug 2015 17:57:15 +0000"  >&lt;blockquote&gt;&lt;p&gt;Not sure if it&apos;s possible to do this without changing the metrics names.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Why sir? That&apos;d be a major stickler.&lt;/p&gt;</comment>
                            <comment id="14707166" author="apurtell" created="Fri, 21 Aug 2015 18:01:54 +0000"  >&lt;p&gt;This is something we could do for 2.0 maybe.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Not sure if it&apos;s possible to do this without changing the metrics names.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;And that would mean for sure we can only do it for 2.0. Even then migration of ops tooling will be painful for everyone.&lt;/p&gt;

&lt;p&gt;I&apos;m about to increase our use of Hadoop metrics at least for &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-11062&quot; title=&quot;htop&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-11062&quot;&gt;HBASE-11062&lt;/a&gt;.  Until we actually switch away it&apos;s the best implementation option since everything else uses them, and they are how we plumb metrics to JMX. &lt;/p&gt;</comment>
                            <comment id="14707176" author="eclark" created="Fri, 21 Aug 2015 18:09:14 +0000"  >&lt;blockquote&gt;&lt;p&gt;Why sir? That&apos;d be a major stickler.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;All of the different metrics libraries I know of organize mbeans differently and none of the others organize them in the same way as metrics2 from hadoop.&lt;/p&gt;</comment>
                            <comment id="14707177" author="eclark" created="Fri, 21 Aug 2015 18:10:11 +0000"  >&lt;blockquote&gt;&lt;p&gt;Until we actually switch away it&apos;s the best implementation option since everything else uses them, and they are how we plumb metrics to JMX.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;For sure. It&apos;s served us alright for now and I fully intend to add more. Just as we get deeper and deeper into using it the more it&apos;s showing the stress.&lt;/p&gt;</comment>
                            <comment id="14707182" author="busbey" created="Fri, 21 Aug 2015 18:14:15 +0000"  >&lt;p&gt;couldn&apos;t we make an adaptor bean that looked up the new metrics and published them to the old names periodically?&lt;/p&gt;</comment>
                            <comment id="14707221" author="eclark" created="Fri, 21 Aug 2015 18:26:28 +0000"  >&lt;p&gt;Potentially I think that could work.&lt;/p&gt;</comment>
                            <comment id="14956136" author="gliptak" created="Wed, 14 Oct 2015 02:04:24 +0000"  >&lt;p&gt;What is the preferred way to move forward here?&lt;/p&gt;</comment>
                            <comment id="15063813" author="eclark" created="Fri, 18 Dec 2015 10:49:51 +0000"  >&lt;p&gt;It compiles, so it&apos;s pretty much done..................&lt;/p&gt;</comment>
                            <comment id="15064667" author="hadoopqa" created="Fri, 18 Dec 2015 20:05:13 +0000"  >&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12778471/HBASE-14282.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12778471/HBASE-14282.patch&lt;/a&gt;&lt;br/&gt;
  against master branch at commit 58342a85fa77b0d415889dd1994c55c60525b83b.&lt;br/&gt;
  ATTACHMENT ID: 12778471&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 201 new or modified tests.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 hadoop versions&lt;/font&gt;. The patch compiles with all supported hadoop versions (2.4.0 2.4.1 2.5.0 2.5.1 2.5.2 2.6.0 2.6.1 2.7.0 2.7.1)&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 protoc&lt;/font&gt;.  The applied patch does not increase the total number of protoc compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;                &lt;font color=&quot;red&quot;&gt;-1 checkstyle&lt;/font&gt;.  The applied patch generated new checkstyle errors. Check build console for list of new errors.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any  new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 release audit&lt;/font&gt;.  The applied patch generated 5 release audit warnings (more than the master&apos;s current 0 warnings).&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 lineLengths&lt;/font&gt;.  The patch does not introduce lines longer than 100&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 site&lt;/font&gt;.  The mvn post-site goal succeeds with this patch.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 zombies&lt;/font&gt;. No zombie tests found running at the end of the build.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16925//testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16925//testReport/&lt;/a&gt;&lt;br/&gt;
Release audit warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16925//artifact/patchprocess/patchReleaseAuditWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16925//artifact/patchprocess/patchReleaseAuditWarnings.txt&lt;/a&gt;&lt;br/&gt;
Release Findbugs (version 2.0.3) 	warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16925//artifact/patchprocess/newFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16925//artifact/patchprocess/newFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Checkstyle Errors: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16925//artifact/patchprocess/checkstyle-aggregate.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16925//artifact/patchprocess/checkstyle-aggregate.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;                Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/16925//console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/16925//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15313206" author="eclark" created="Thu, 2 Jun 2016 22:29:07 +0000"  >&lt;p&gt;Removing from me. I don&apos;t think I will have the bandwidth to do this anytime soon.&lt;/p&gt;</comment>
                            <comment id="15313215" author="hadoopqa" created="Thu, 2 Jun 2016 22:38:35 +0000"  >&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;&lt;/b&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Vote &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Runtime &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Comment &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; patch &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; 0m 3s &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14282&quot; title=&quot;Remove metrics2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14282&quot;&gt;HBASE-14282&lt;/a&gt; does not apply to master. Rebase required? Wrong Branch? See &lt;a href=&quot;https://yetus.apache.org/documentation/0.2.1/precommit-patchnames&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://yetus.apache.org/documentation/0.2.1/precommit-patchnames&lt;/a&gt; for help. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Report/Notes &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Patch URL &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12778471/HBASE-14282.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12778471/HBASE-14282.patch&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Issue &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-14282&quot; title=&quot;Remove metrics2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-14282&quot;&gt;HBASE-14282&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Console output &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HBASE-Build/2093/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/PreCommit-HBASE-Build/2093/console&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Powered by &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Apache Yetus 0.2.1   &lt;a href=&quot;http://yetus.apache.org&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://yetus.apache.org&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;This message was automatically generated.&lt;/p&gt;
</comment>
                            <comment id="15662490" author="stack" created="Mon, 14 Nov 2016 01:35:12 +0000"  >&lt;p&gt;Good idea. Critical actually but no progress so removing from 2.0.0.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12674009">HBASE-9774</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12908937">HBASE-14719</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12778471" name="HBASE-14282.patch" size="826719" author="eclark" created="Fri, 18 Dec 2015 10:49:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 21 Aug 2015 17:08:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2j7u7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>