<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 21:04:44 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-15547/HBASE-15547.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-15547] Balancer should take into account number of PENDING_OPEN regions</title>
                <link>https://issues.apache.org/jira/browse/HBASE-15547</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;We recently had a cluster get into a bad state where a subset of region servers consistently could not open new regions (but could continue serving the regions they already hosted).&lt;/p&gt;

&lt;p&gt;Recovering the cluster was just a matter of restarting region servers in sequence. However, this led to things getting substantially worse before they got better since the bulk assigner continued to place an uniform number of recovered regions across all servers, including onto those that could not open regions.&lt;/p&gt;

&lt;p&gt;It would be useful if the balancer could penalize regionservers with a backlog of pending_open regions and place more work on those regionservers that are properly serving.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12953976">HBASE-15547</key>
            <summary>Balancer should take into account number of PENDING_OPEN regions</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="busbey">Sean Busbey</reporter>
                        <labels>
                    </labels>
                <created>Mon, 28 Mar 2016 15:21:37 +0000</created>
                <updated>Wed, 30 Mar 2016 02:25:18 +0000</updated>
                                            <version>0.98.0</version>
                    <version>1.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                    <fixVersion>1.4.0</fixVersion>
                                    <component>Balancer</component>
                    <component>Operability</component>
                    <component>Region Assignment</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                <comments>
                            <comment id="15215531" author="chenheng" created="Tue, 29 Mar 2016 06:26:03 +0000"  >&lt;blockquote&gt;
&lt;p&gt;We recently had a cluster get into a bad state where a subset of region servers consistently could not open new regions&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I think we should figure out why RS could not open new regions firstly.  (too many regions on that RS?)&lt;/p&gt;</comment>
                            <comment id="15216240" author="busbey" created="Tue, 29 Mar 2016 16:08:25 +0000"  >&lt;p&gt;we already know the root cause for the RS not opening regions (&lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-10223&quot; title=&quot;peerFromSocketAndKey performs SASL exchange before setting connection timeouts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-10223&quot;&gt;&lt;del&gt;HDFS-10223&lt;/del&gt;&lt;/a&gt;), it just wasn&apos;t relevant for the JIRA.&lt;/p&gt;</comment>
                            <comment id="15216926" author="chenheng" created="Tue, 29 Mar 2016 22:01:49 +0000"  >&lt;p&gt;Should balance policy take a bug (at least &quot;RS not open regions&quot; looks like a bug ) into account?  &lt;/p&gt;</comment>
                            <comment id="15216932" author="busbey" created="Tue, 29 Mar 2016 22:04:25 +0000"  >&lt;p&gt;it needn&apos;t even be that a RS can&apos;t open regions at all. just that some RS might severely lag others for a variety of reasons. If one of our goals is to keep MTTR reasonable, then a RS that is anomalous in how long it takes to get things open should be getting less work.&lt;/p&gt;</comment>
                            <comment id="15217097" author="eclark" created="Wed, 30 Mar 2016 00:03:48 +0000"  >&lt;p&gt;More generally I think the balancer should take into consideration a regionserver&apos;s inability to serve regions. We&apos;ve seen issues where one regionserver was broken and just couldn&apos;t handle opening any region. So every time the balancer tried to move a region there it was causing un-availability.&lt;/p&gt;</comment>
                            <comment id="15217267" author="chenheng" created="Wed, 30 Mar 2016 02:25:18 +0000"  >&lt;blockquote&gt;
&lt;p&gt;More generally I think the balancer should take into consideration a regionserver&apos;s inability to serve regions.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Agree.  How to evaluate the RS inability? Yeah, &quot;pending_open regions&quot; is one factor.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 29 Mar 2016 06:26:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            37 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2vafr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>