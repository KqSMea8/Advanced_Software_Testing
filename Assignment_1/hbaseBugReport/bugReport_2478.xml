<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:02:15 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-2478/HBASE-2478.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-2478] Experiment with alternate settings for io.bytes.per.checksum for HFiles</title>
                <link>https://issues.apache.org/jira/browse/HBASE-2478</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;HDFS keeps a separate &quot;checksum&quot; file for every  block. By default, io.bytes.per.checksum is set at 512, and the checksums are 4 bytes... i.e. for every 512 bytes of data in the block we maintain a 4 byte checksum. For 4TB of data, for instance, that&apos;s about 31GB of checksum data.&lt;/p&gt;

&lt;p&gt;A read that needs to read a small section (such as a 64k HFile block) from a HDFS block, especially on a cold access, is likely to end up doing two random disk reads--- one from the data file for the block and one from the checksum file.&lt;/p&gt;

&lt;p&gt;A though was that instead of keeping a checksum for every 512 bytes, given  that HBase will interact with HDFS on reads at the granularity of HBase block size (typically 64k, but smaller if compressed), should we consider keeping checksums at a coarser granularity (e.g, for every 8k bytes) for HFiles?  The advantage&lt;br/&gt;
with this would be that the checksum files would be much smaller (in proportion to the data) and the hot working set for &quot;checksum data&quot;  should fit better in the OS buffer cache (thus eliminating a good majority of the disk seeks for checksum data).&lt;/p&gt;

&lt;p&gt;The intent of the JIRA is to experiment with different settings for &quot;io.bytes.per.checksum&quot; for HFiles. &lt;/p&gt;

&lt;p&gt;Note: For the previous example, of 4TB of data, with an io.bytes.per.checksum setting of 8k, the size of the checksum data would drop to about 2Gig.&lt;/p&gt;

&lt;p&gt;Making the io.bytes.per.checksum too big might reduce the effectiveness of the checksum. So that needs to be taken into account as well in terms of determining a good value.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;For HLogs files, on the other hand, I suspect we would want to leave the checksum at finer granularity because my understanding is that if we are doing lots of small writes/syncs (as we do to HLogs), finer grained checksums are better (because the code currently doesn&amp;#39;t do a rolling checksum, and needs to rewind to the nearest checksum block boundary and recomputed the checksum on every edit).&amp;#93;&lt;/span&gt;&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12462803">HBASE-2478</key>
            <summary>Experiment with alternate settings for io.bytes.per.checksum for HFiles</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kannanm">Kannan Muthukkaruppan</reporter>
                        <labels>
                    </labels>
                <created>Thu, 22 Apr 2010 18:29:48 +0000</created>
                <updated>Sat, 19 Jul 2014 00:43:37 +0000</updated>
                            <resolved>Sat, 19 Jul 2014 00:43:37 +0000</resolved>
                                                                    <component>Performance</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="12859944" author="tlipcon" created="Thu, 22 Apr 2010 18:32:51 +0000"  >&lt;blockquote&gt;&lt;p&gt;because the code currently doesn&apos;t do a rolling checksum, and needs to rewind to the nearest checksum block boundary and recomputed the checksum on every edit&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t think it recomputes the checksum. However, it has to rewind and resend the entire chunk worth of data to the datanode on every flush.&lt;/p&gt;</comment>
                            <comment id="12885931" author="stack" created="Wed, 7 Jul 2010 12:46:30 +0000"  >&lt;p&gt;Assigning Hairong at her suggestion.&lt;/p&gt;</comment>
                            <comment id="12885972" author="tlipcon" created="Wed, 7 Jul 2010 16:06:15 +0000"  >&lt;p&gt;Would be interesting to run these comparisons with the new PureJavaCrc32 integrated into the Hadoop build. It changes the performance profile of checksumming pretty significantly, and since it&apos;s in 0.21 (and a trivial patch to put in 0.20) we might as well test with it.&lt;/p&gt;

&lt;p&gt;(The JIRAs are &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6148&quot; title=&quot;Implement a pure Java CRC32 calculator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6148&quot;&gt;&lt;del&gt;HADOOP-6148&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-496&quot; title=&quot;Use PureJavaCrc32 in HDFS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-496&quot;&gt;&lt;del&gt;HDFS-496&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6166&quot; title=&quot;Improve PureJavaCrc32&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6166&quot;&gt;&lt;del&gt;HADOOP-6166&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="12886220" author="hairong" created="Thu, 8 Jul 2010 04:02:26 +0000"  >&lt;p&gt;Todd, your suggestion sounds great to me! Do you mean backporting PureJavaCrc32 into the public 0.20-append branch? Does the branch accept performance-related patches? If so, could you please open a separate jira for this?&lt;/p&gt;</comment>
                            <comment id="12886248" author="tlipcon" created="Thu, 8 Jul 2010 05:54:30 +0000"  >&lt;p&gt;I don&apos;t think the Apache branch should accept performance patches. We&apos;ve had those patches in CDH, though, for somewhere approaching a year, so I&apos;m certain they&apos;re stable. It&apos;s also a trivial backport (some new classes plus just substituting the PureJavaCrc32 implementation for the one in java.util.zip). I can post the patches we use, but it&apos;s not any different from what&apos;s in trunk.&lt;/p&gt;</comment>
                            <comment id="14067295" author="apurtell" created="Sat, 19 Jul 2014 00:43:37 +0000"  >&lt;p&gt;Didn&apos;t happen&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12468664">HADOOP-6850</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 22 Apr 2010 18:32:51 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32606</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 21 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02fdb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12091</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>