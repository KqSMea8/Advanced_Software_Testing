<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 18:56:02 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-1748/HBASE-1748.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-1748] ClusterStatus needs to print out who has master role</title>
                <link>https://issues.apache.org/jira/browse/HBASE-1748</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;Is in zk_dump but not in clusterstatus.&lt;/p&gt;

&lt;p&gt;You need it when you have 5 masters and you are trying to find the UI.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12432228">HBASE-1748</key>
            <summary>ClusterStatus needs to print out who has master role</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stack">stack</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Aug 2009 01:09:52 +0000</created>
                <updated>Fri, 24 Feb 2012 19:28:10 +0000</updated>
                            <resolved>Fri, 24 Feb 2012 19:28:10 +0000</resolved>
                                                                    <component>master</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12739481" author="rafan" created="Wed, 5 Aug 2009 13:20:53 +0000"  >&lt;p&gt;just curious, can&apos;t we make ui on non-master node send redirection to the real master&apos;s ui?&lt;/p&gt;</comment>
                            <comment id="12739524" author="apurtell" created="Wed, 5 Aug 2009 14:23:49 +0000"  >&lt;p&gt;+1 on Rong-En&apos;s suggestion.&lt;/p&gt;</comment>
                            <comment id="12741568" author="stack" created="Mon, 10 Aug 2009 21:32:59 +0000"  >&lt;p&gt;This is a good idea Rong-en.&lt;/p&gt;</comment>
                            <comment id="12875544" author="larsgeorge" created="Fri, 4 Jun 2010 09:46:47 +0000"  >&lt;p&gt;So you mean that in UI jsp&apos;s or in Jetty wrapper code we poll ZK who is master and if not current machine send request to other master? Could be a javax.servlet.Filter? Anyone working on this? Should I have a looksee?&lt;/p&gt;</comment>
                            <comment id="12875626" author="stack" created="Fri, 4 Jun 2010 15:15:17 +0000"  >&lt;p&gt;If we could have both, that&apos;d be excellent.  Filter sounds right.  No one is working on this that I know Lars.  Take it.&lt;/p&gt;</comment>
                            <comment id="12875936" author="larsgeorge" created="Sat, 5 Jun 2010 20:52:17 +0000"  >&lt;p&gt;Before I do, what is exactly in zk_dump, i.e. what is the ZK node in question? Also, how do you test this best on local machine?&lt;/p&gt;</comment>
                            <comment id="12876365" author="larsgeorge" created="Mon, 7 Jun 2010 19:00:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1748&quot; title=&quot;ClusterStatus needs to print out who has master role&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1748&quot;&gt;&lt;del&gt;HBASE-1748&lt;/del&gt;&lt;/a&gt;.patch adds current master IP address to ClusterStatus and a request filter that for the master redirects from inactive master to the active one.&lt;/p&gt;</comment>
                            <comment id="12880660" author="larsgeorge" created="Sun, 20 Jun 2010 19:22:48 +0000"  >&lt;p&gt;OK, I finally have one cluster updated to 0.20.5 and backported the patch. But trying this now reveals a major flaw, the backup master does not run nor start its UI until it has taken over the ZK node. So in effect the backup master is sleeping and not being able to redirect anything. And once it wakes up and takes over, the old is considered gone or will sleep subsequently. All in all the approach with a redirect on the master is futile. &lt;/p&gt;

&lt;p&gt;We could change it so that the region servers redirect to the active master so as not to have to search for it and avoid confusion upon master switches. &lt;/p&gt;

&lt;p&gt;Currently we have a separate port for each UI, we could have the regions server webapp have a specific JSP that redirects to the active master like so?&lt;/p&gt;

&lt;p&gt;http://&amp;lt;regionserver&amp;gt;:60030/master.jsp&lt;/p&gt;

&lt;p&gt;Anything else is weird. Imagine you have three standby masters and once they are being used, how do you know how to contact the current active one? The address is in ZK but we are talking UI here, and at that time the only UI that still (may) respond is of a known region server.&lt;/p&gt;

&lt;p&gt;Any suggestions?&lt;/p&gt;</comment>
                            <comment id="12918236" author="streamy" created="Tue, 5 Oct 2010 21:48:06 +0000"  >&lt;p&gt;Does this patch work on new master?  This seems useful and easy enough to get in to 0.90.&lt;/p&gt;</comment>
                            <comment id="12922624" author="stack" created="Tue, 19 Oct 2010 17:23:17 +0000"  >&lt;p&gt;Moving out of 0.90.  The patch has rotted.  Talks of hbase-webapps and gets master address using old style zookeeper access.  IIRC, the filter doesn&apos;t work either talking w/ Lars.&lt;/p&gt;</comment>
                            <comment id="12922676" author="larsgeorge" created="Tue, 19 Oct 2010 19:15:33 +0000"  >&lt;p&gt;I agree, this is nonsense. The filter (aka the attached patch) is useless, I only realized that after having done that. The standby master does not load anything before it does not get activated. We should rethink the whole issue in the new context and do something more sane. But this is still an issue, users with many masters would want to be able to find the master. Maybe we simply add a &lt;/p&gt;

&lt;p&gt;$ hbase master-info &lt;/p&gt;

&lt;p&gt;or so that reads the ZK entry and prints it out? &lt;/p&gt;</comment>
                            <comment id="13215837" author="stack" created="Fri, 24 Feb 2012 19:28:10 +0000"  >&lt;p&gt;Fixed by &apos;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-5209&quot; title=&quot;HConnection/HMasterInterface should allow for way to get hostname of currently active master in multi-master HBase setup&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-5209&quot;&gt;&lt;del&gt;HBASE-5209&lt;/del&gt;&lt;/a&gt; HConnection/HMasterInterface should allow for way to get hostname of currently active master in multi-master HBase setup&apos;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12466397">HBASE-2685</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12446510" name="HBASE-1748.patch" size="10998" author="larsgeorge" created="Mon, 7 Jun 2010 19:00:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 5 Aug 2009 13:20:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>25957</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 42 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hf1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>99699</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>