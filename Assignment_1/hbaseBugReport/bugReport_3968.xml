<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:14:40 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-3968/HBASE-3968.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-3968] HLog Pretty Printer</title>
                <link>https://issues.apache.org/jira/browse/HBASE-3968</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;We currently have a rudimentary way to print HLog data, but it is limited and currently prints key-only information. We need extend this functionality, similar to how we developed HFile&apos;s pretty printer. Ideas for functionality:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;filter by sequence_id&lt;/li&gt;
	&lt;li&gt;filter by row / region&lt;/li&gt;
	&lt;li&gt;option to print values in addition to key info&lt;/li&gt;
	&lt;li&gt;option to print output in JSON format (so scripts can easily parse for analysis)&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12509659">HBASE-3968</key>
            <summary>HLog Pretty Printer</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="riley">Riley Patterson</assignee>
                                    <reporter username="nspiegelberg">Nicolas Spiegelberg</reporter>
                        <labels>
                            <label>hbase</label>
                    </labels>
                <created>Thu, 9 Jun 2011 01:03:35 +0000</created>
                <updated>Fri, 20 Nov 2015 11:53:54 +0000</updated>
                            <resolved>Fri, 1 Jul 2011 21:51:59 +0000</resolved>
                                                    <fixVersion>0.90.4</fixVersion>
                                    <component>io</component>
                    <component>regionserver</component>
                    <component>util</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13055982" author="nspiegelberg" created="Mon, 27 Jun 2011 22:42:04 +0000"  >&lt;p&gt;Riley, one of our summer interns, will be working on this task.&lt;/p&gt;</comment>
                            <comment id="13056228" author="nspiegelberg" created="Tue, 28 Jun 2011 00:23:37 +0000"  >&lt;p&gt;We need a basic JSON encoder for this task.  Noticed that this has been a pain point in the past.  We&apos;ll see if we can use Jersey for this task and tread lightly if not.&lt;/p&gt;</comment>
                            <comment id="13056667" author="tlipcon" created="Tue, 28 Jun 2011 17:41:52 +0000"  >&lt;p&gt;One possible route would be to write a converter to Avro. Then, you&apos;d have all of the existing Avro tooling for doing things like pretty-print, structured grep, etc, plus the advantage that you could easily write mapreduce/hive queries over the converted logs.&lt;/p&gt;</comment>
                            <comment id="13056712" author="nspiegelberg" created="Tue, 28 Jun 2011 19:07:42 +0000"  >&lt;p&gt;@Todd: our internal branches do not have Avro support, so that&apos;s a little overkill for us but might be good for a subsequent task.  The thought was that JSON encoding will allow us to easily feed the data into a Python/Ruby script to do any in-depth analysis that shell scripting falls short on.&lt;/p&gt;</comment>
                            <comment id="13056718" author="tlipcon" created="Tue, 28 Jun 2011 19:34:47 +0000"  >&lt;p&gt;seems reasonable&lt;/p&gt;</comment>
                            <comment id="13058729" author="stack" created="Fri, 1 Jul 2011 19:34:00 +0000"  >&lt;p&gt;Patch looks great.  A few questions:&lt;/p&gt;

&lt;p&gt;You do toStringBinary.  Is this going to be ok inside in the middle of a JSON output?  Does toStringBinary do sufficient escaping such that parse of the emitted JSON is still possible or when you do JSONObject, does that do the necessary escaping?&lt;/p&gt;

&lt;p&gt;What do you mean by Put action here:&lt;/p&gt;

&lt;p&gt;&apos;+            out.println(&quot;  Put action:&quot;);&apos;&lt;/p&gt;

&lt;p&gt;That everything is a &apos;put&apos;?&lt;/p&gt;

&lt;p&gt;You are missing a license on HLogPrettyPrinter.java (but thats minor, I can fix on commit).&lt;/p&gt;

&lt;p&gt;It looks great.&lt;/p&gt;

&lt;p&gt;Does it work?  Do you have examples you could paste into the issue to demo its actually working?&lt;/p&gt;

&lt;p&gt;Good on you Riley.&lt;/p&gt;
</comment>
                            <comment id="13058799" author="riley" created="Fri, 1 Jul 2011 21:07:13 +0000"  >&lt;p&gt;toStringBinary produces \x(hex value) for non-ascii characters, and the JSONObject further escapes this &quot;\&quot; -&amp;gt; &quot;&lt;br class=&quot;atl-forced-newline&quot; /&gt;&quot;.  This is desired behavior because when a JSON parser parses the string, it will decode this back to one backslash and the string can be parsed from there. It looks like the JSON standard doesn&apos;t support the \x notation, so this seemed like the best approach.&lt;/p&gt;

&lt;p&gt;I suppose the &quot;Put&quot; part of that line is not strictly necessary, but yes, I did mean that the following information represents a single put transaction.&lt;/p&gt;

&lt;p&gt;I apologize about the license; I&apos;ll make sure to add that next time.&lt;/p&gt;

&lt;p&gt;It does, in fact, work! Here are two examples, one with pretty printing and the other with JSON output:&lt;/p&gt;

&lt;p&gt;&amp;gt; HLog --dump logfilepath -p -w rpatt&lt;br/&gt;
Sequence 33 from region people,,1308955768047.c2bce8f6ab585127f13f37c59d23fe26. in table people&lt;br/&gt;
  Put action:&lt;br/&gt;
    row: rpatt&lt;br/&gt;
    column: name:first&lt;br/&gt;
    at time: Mon Jun 27 11:06:46 PDT 2011&lt;br/&gt;
    value: Riley&lt;br/&gt;
Sequence 34 from region people,,1308955768047.c2bce8f6ab585127f13f37c59d23fe26. in table people&lt;br/&gt;
  Put action:&lt;br/&gt;
    row: rpatt&lt;br/&gt;
    column: name:last&lt;br/&gt;
    at time: Mon Jun 27 11:06:56 PDT 2011&lt;br/&gt;
    value: Patterson&lt;/p&gt;

&lt;p&gt;&amp;gt; HLog --dump logfilepath -p -j -w rpatt&lt;br/&gt;
[{&quot;region&quot;:&quot;people,,1308955768047.c2bce8f6ab585127f13f37c59d23fe26.&quot;,&quot;sequence&quot;:33,&quot;table&quot;:&quot;people&quot;,&quot;actions&quot;:[&lt;/p&gt;
{&quot;timestamp&quot;:1309198006569,&quot;family&quot;:&quot;name&quot;,&quot;qualifier&quot;:&quot;first&quot;,&quot;row&quot;:&quot;rpatt&quot;,&quot;value&quot;:&quot;Riley&quot;}
&lt;p&gt;]},{&quot;region&quot;:&quot;people,,1308955768047.c2bce8f6ab585127f13f37c59d23fe26.&quot;,&quot;sequence&quot;:34,&quot;table&quot;:&quot;people&quot;,&quot;actions&quot;:[&lt;/p&gt;
{&quot;timestamp&quot;:1309198016702,&quot;family&quot;:&quot;name&quot;,&quot;qualifier&quot;:&quot;last&quot;,&quot;row&quot;:&quot;rpatt&quot;,&quot;value&quot;:&quot;Patterson&quot;}
&lt;p&gt;]}]&lt;/p&gt;

&lt;p&gt;Thanks for your feedback!&lt;/p&gt;</comment>
                            <comment id="13058802" author="riley" created="Fri, 1 Jul 2011 21:08:10 +0000"  >&lt;p&gt;Note that the post killed the indentations in the first example, but they are actually there in the output.&lt;/p&gt;</comment>
                            <comment id="13058808" author="stack" created="Fri, 1 Jul 2011 21:16:46 +0000"  >&lt;p&gt;Good.  Let me commit.  I can fix the license.  Will just remove &apos;Put action&apos; from the output for now.  That OK?&lt;/p&gt;</comment>
                            <comment id="13058810" author="riley" created="Fri, 1 Jul 2011 21:19:39 +0000"  >&lt;p&gt;Sounds good. A label like &quot;  Transaction:&quot; or something might be appropriate to separate multiple actions that occur in the same sequence though.&lt;/p&gt;</comment>
                            <comment id="13058827" author="stack" created="Fri, 1 Jul 2011 21:51:59 +0000"  >&lt;p&gt;Committed to branch and trunk.  Thank you for the patch Riley.&lt;/p&gt;</comment>
                            <comment id="13058890" author="hudson" created="Sat, 2 Jul 2011 01:03:14 +0000"  >&lt;p&gt;Integrated in HBase-TRUNK #2001 (See &lt;a href=&quot;https://builds.apache.org/job/HBase-TRUNK/2001/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://builds.apache.org/job/HBase-TRUNK/2001/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3968&quot; title=&quot;HLog Pretty Printer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3968&quot;&gt;&lt;del&gt;HBASE-3968&lt;/del&gt;&lt;/a&gt; HLog Pretty Printer&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3968&quot; title=&quot;HLog Pretty Printer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3968&quot;&gt;&lt;del&gt;HBASE-3968&lt;/del&gt;&lt;/a&gt; HLog Pretty Printer &amp;#8211; REDO&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3968&quot; title=&quot;HLog Pretty Printer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3968&quot;&gt;&lt;del&gt;HBASE-3968&lt;/del&gt;&lt;/a&gt; HLog Pretty Printer &amp;#8211; REVERT: I committed too much&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-3968&quot; title=&quot;HLog Pretty Printer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-3968&quot;&gt;&lt;del&gt;HBASE-3968&lt;/del&gt;&lt;/a&gt; HLog Pretty Printer&lt;/p&gt;

&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogPrettyPrinter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/KeyValue.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogKey.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLog.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/SplitTransaction.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogPrettyPrinter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/KeyValue.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/CatalogJanitor.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/handler/ServerShutdownHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogKey.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLog.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/SplitRequest.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;stack : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/SplitTransaction.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogPrettyPrinter.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/KeyValue.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/CatalogJanitor.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/handler/ServerShutdownHandler.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLogKey.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/wal/HLog.java&lt;/li&gt;
	&lt;li&gt;/hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/SplitRequest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13247910" author="lhofhansl" created="Fri, 6 Apr 2012 00:44:06 +0000"  >&lt;p&gt;Oops... I just remove the patch attachment (wrong issue sorry!)&lt;br/&gt;
I didn&apos;t download the attachment first. Please re-attach. Again so sorry about this!&lt;/p&gt;</comment>
                            <comment id="15016093" author="lars_francke" created="Fri, 20 Nov 2015 11:53:54 +0000"  >&lt;p&gt;This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12460387">HBASE-2383</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12512135">HBASE-4040</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                                                <inwardlinks description="is required by">
                                        <issuelink>
            <issuekey id="12511730">HBASE-4038</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12512135">HBASE-4040</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 28 Jun 2011 17:41:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33300</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0horb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>101273</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Implementation of a Pretty Printer for HLogs. Can be accessed with the Java API or with a command line interface, which replaces HLog --dump functionality. Can output to a human-readable pretty format, or to a JSON list for easy parsing in diagnostic scripts. Can also filter by region, row, and/or sequence id. See command line usage (HLog --dump -h) and the javadocs for more detail on these features.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>