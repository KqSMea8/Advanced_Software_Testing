<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:25:21 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-5164/HBASE-5164.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-5164] Better HTable resource consumption in CoprocessorHost</title>
                <link>https://issues.apache.org/jira/browse/HBASE-5164</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4805&quot; title=&quot;Allow better control of resource consumption in HTable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4805&quot;&gt;&lt;del&gt;HBASE-4805&lt;/del&gt;&lt;/a&gt; allows for more control over HTable&apos;s resource consumption.&lt;br/&gt;
This is currently not used by CoprocessorHost (even though it would even be more critical to control this inside the RegionServer).&lt;/p&gt;

&lt;p&gt;It&apos;s not immediate obvious how to do that.&lt;br/&gt;
Maybe CoprocessorHost should maintain a lazy ExecutorService and HConnection and reuse both for all HTables retrieved via CoprocessorEnvironment.getTable(...).&lt;/p&gt;

&lt;p&gt;Not sure how critical this is, but I feel without this it is dangerous to use getTable, as it would lead to all resource consumption problems we find in the client, but inside a crucial part of the HBase servers.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12537849">HBASE-5164</key>
            <summary>Better HTable resource consumption in CoprocessorHost</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12531712">HBASE-4805</parent>
                                    <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="lhofhansl">Lars Hofhansl</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Jan 2012 01:28:19 +0000</created>
                <updated>Sun, 8 Dec 2013 04:41:49 +0000</updated>
                            <resolved>Sun, 8 Dec 2013 04:41:49 +0000</resolved>
                                                                    <component>Coprocessors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13183069" author="apurtell@yahoo.com" created="Tue, 10 Jan 2012 04:43:39 +0000"  >&lt;p&gt;We added getTable to the CP API with that risk in mind. The notion is CPs are not allowed to just instantiate HTables, instead they ask for a more constrained server side IPC. No such implementation yet exists, so getTable essentially is a placeholder. &lt;/p&gt;

&lt;p&gt;If we consider coprocessors hosted in an external process, but still on the server, the risks are not much lower than in process. A stuck table client in the external CP will hold up the initiator anyway, and in fact this makes external CP handling more problematic than if table clients were simply not allowed server side at all. However I think many useful CP use cases must have a table access scope wider than the single region.&lt;/p&gt;

&lt;p&gt;What we need is a &quot;lightweight&quot; server to server IPC? Would present HTableInterface but lack the fat client semantics. &lt;/p&gt;</comment>
                            <comment id="13183100" author="lhofhansl" created="Tue, 10 Jan 2012 05:56:03 +0000"  >&lt;p&gt;Thanks Andrew,&lt;/p&gt;

&lt;p&gt;absolutely agree that CPs need table access beyond the local region scope.&lt;/p&gt;

&lt;p&gt;What I have in mind with this is essentially a stop gap measure, using the extended HTable API (introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-4805&quot; title=&quot;Allow better control of resource consumption in HTable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-4805&quot;&gt;&lt;del&gt;HBASE-4805&lt;/del&gt;&lt;/a&gt;) that allows for externally (from the HTable&apos;s viewpoint) managed ExecutorService/HConnection. The CPhost would manage these and getTable would return a HTable created with the HTable(byte[], HConnection, ExecutorService) constructor.&lt;/p&gt;

&lt;p&gt;Do you think it is worth doing this?&lt;/p&gt;</comment>
                            <comment id="13620347" author="stack" created="Tue, 2 Apr 2013 22:21:23 +0000"  >&lt;p&gt;No assignee and no progress with a hanging question... Removing from 0.95&lt;/p&gt;</comment>
                            <comment id="13842411" author="lhofhansl" created="Sun, 8 Dec 2013 04:41:49 +0000"  >&lt;p&gt;Largely fixed with &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9534&quot; title=&quot;Short-Circuit Coprocessor HTable access when on the same server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9534&quot;&gt;&lt;del&gt;HBASE-9534&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12668611">HBASE-9534</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 10 Jan 2012 04:43:39 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>223355</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 1 week, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hsw7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>101943</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>