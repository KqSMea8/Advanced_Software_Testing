<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 16 19:01:31 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HBASE-2396/HBASE-2396.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[HBASE-2396] Coprocessors: Server side dynamic scripting language execution</title>
                <link>https://issues.apache.org/jira/browse/HBASE-2396</link>
                <project id="12310753" key="HBASE">HBase</project>
                    <description>&lt;p&gt;There are a lot of use cases where users want to perform some simple operations on the region server. For example, a row may represent a Set and users want append/search/remove style operations within the row without having to perform the work on the client side. One possible solution is to embed a small language something like PL/SQL (not necessarily in syntax) which restricts users to a safe set of operations.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12460852">HBASE-2396</key>
            <summary>Coprocessors: Server side dynamic scripting language execution</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tlipcon">Todd Lipcon</reporter>
                        <labels>
                            <label>beginner</label>
                    </labels>
                <created>Wed, 31 Mar 2010 19:57:07 +0000</created>
                <updated>Tue, 5 Aug 2014 20:06:05 +0000</updated>
                                                                            <component>Coprocessors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>20</watches>
                                                                <comments>
                            <comment id="12852903" author="stack" created="Fri, 2 Apr 2010 18:34:20 +0000"  >&lt;p&gt;This looks related to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1002&quot; title=&quot;Coprocessors: Support small query language as filter on server side&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1002&quot;&gt;&lt;del&gt;HBASE-1002&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12922746" author="apurtell" created="Tue, 19 Oct 2010 22:06:30 +0000"  >&lt;p&gt;In the context of filters (&lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-1002&quot; title=&quot;Coprocessors: Support small query language as filter on server side&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-1002&quot;&gt;&lt;del&gt;HBASE-1002&lt;/del&gt;&lt;/a&gt;) we mentioned shipping up jruby scriptlets as an option for that. Given that HBase already carries the jruby jar for the shell, this seems a natural choice for that and more. If so it would be better if after receiving initially a String to execute an intermediate/compiled form can be cached for savings over repeated invocations, like &lt;a href=&quot;http://kenai.com/projects/jruby/pages/JRubyCompiler&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://kenai.com/projects/jruby/pages/JRubyCompiler&lt;/a&gt;. &lt;/p&gt;</comment>
                            <comment id="12922747" author="apurtell" created="Tue, 19 Oct 2010 22:07:43 +0000"  >&lt;blockquote&gt;&lt;p&gt;One possible solution is to embed a small language something like PL/SQL (not necessarily in syntax) &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I made a minor edit of summary to broaden scope. &lt;/p&gt;</comment>
                            <comment id="12971091" author="apurtell" created="Tue, 14 Dec 2010 00:00:33 +0000"  >&lt;p&gt;As discussed at the hackathon, the first cut of this should be an Endpoint that accepts code to execute as a string and sends back results. As Result? &lt;/p&gt;

&lt;p&gt;Later we can optimize through a facility for registering stored scripts and referencing them by name in RPCs. &lt;/p&gt;</comment>
                            <comment id="12971149" author="stack" created="Tue, 14 Dec 2010 03:47:11 +0000"  >&lt;p&gt;Talking in the hallway later, thought was that we&apos;d pass two Strings &amp;#8211; the name of the interpreter and the String we want to run.  The first cut at a coprocessor would use java scripting &amp;#8211; &lt;a href=&quot;http://download.oracle.com/javase/6/docs/technotes/guides/scripting/programmer_guide/index.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://download.oracle.com/javase/6/docs/technotes/guides/scripting/programmer_guide/index.html&lt;/a&gt; &amp;#8211; and do something like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        ScriptEngine engine = factory.getEngineByName(&lt;span class=&quot;code-quote&quot;&gt;&quot;JavaScript&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-comment&quot;&gt;// evaluate JavaScript code from &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;
&lt;/span&gt;        engine.eval(&lt;span class=&quot;code-quote&quot;&gt;&quot;print(&apos;Hello, World&apos;)&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Yeah, I suppose we&apos;d return a Result?  Maybe we should return a String?  JSON String?&lt;/p&gt;</comment>
                            <comment id="13284955" author="apurtell" created="Tue, 29 May 2012 17:42:29 +0000"  >&lt;p&gt;Coprocessors provide two extension surfaces, Observers (triggers) and Endpoints (stored procedures). We can provide access to both in a first cut via a system coprocessor that manages scriptlet execution. Consider:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Ruby embedding by default, since the JRuby jar is already available.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;JavaScript embedding, since this will be a very popular request if it is not available as an option, and since packaging Rhino into the scripting coprocessor artifact with Maven should be easy enough.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Support storing scriptlets for trigger-style execution at table, column&lt;span class=&quot;error&quot;&gt;&amp;#91;:qualifier&amp;#93;&lt;/span&gt;, or row scope.
	&lt;ul&gt;
		&lt;li&gt;User should be able to specify if the scriptlet should run at read time or write time or both.&lt;/li&gt;
		&lt;li&gt;Store scriptlet state in a metacolumn, similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-2893&quot; title=&quot;Table metacolumns&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-2893&quot;&gt;&lt;del&gt;HBASE-2893&lt;/del&gt;&lt;/a&gt;, but privately managed to punt on issues of cross coprocessor dependencies and API invocation.&lt;/li&gt;
		&lt;li&gt;The scriptlet execution host can wrap every Get or Scan with a custom filter that transforms or generates values according to entries in the metacolumn scanned internally at setup time. Implies that wherever the user specifies the location of a generator instead of a real value we must still store a placeholder.&lt;/li&gt;
		&lt;li&gt;We also need to consider how this wrapper will interact with the AccessController&apos;s RegionScanner wrapper: Because the AccessController is first in any CP chain by priority it will already be filtering out placeholders the current subject doesn&apos;t have read or write access to, but how to handle EXEC permission may need some thought.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Restrict scriptlets as observers to DML operations.
	&lt;ul&gt;
		&lt;li&gt;We can expose a callback interface in the scripting environment on region operations with a small and familiar Document Object Model. Set up the DOM in the scripting environment(s) when the scriptlet host initializes. Call up into the DOM from Observer hooks at the Java level. See &lt;a href=&quot;https://github.com/jruby/jruby/wiki/RedBridge&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;JRuby embedding&lt;/a&gt; and &lt;a href=&quot;http://www.mozilla.org/rhino/tutorial.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Rhino embedding&lt;/a&gt;.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;



&lt;ul&gt;
	&lt;li&gt;Provide the Endpoint interface Stack mentioned in the above comment.
	&lt;ul&gt;
		&lt;li&gt;The first cut Exec API could be &lt;tt&gt;String execute(String language, String script)&lt;/tt&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13286084" author="stack" created="Wed, 30 May 2012 21:32:50 +0000"  >&lt;p&gt;This&apos;d be a fun/crazy noob project.&lt;/p&gt;</comment>
                            <comment id="13286094" author="apurtell" created="Wed, 30 May 2012 21:44:33 +0000"  >&lt;p&gt;I keep threatening occasionslly my to do list with this. If so I&apos;ll assign to myself and drop the noob tag.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12628088">HBASE-7610</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12408672">HBASE-1002</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 2 Apr 2010 18:34:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32563</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 29 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hhl3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>100111</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>beginner</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>